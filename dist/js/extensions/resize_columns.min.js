/* Tabulator v4.0.0 (c) Oliver Folkerd */
"use strict";var ResizeColumns=function(e){this.table=e,this.startColumn=!1,this.startX=!1,this.startWidth=!1,this.handle=null,this.prevHandle=null};ResizeColumns.prototype.initializeColumn=function(e,t,n){var i=this,s=!1,o=this.table.options.resizableColumns;if("header"===e&&(s="textarea"==t.definition.formatter||t.definition.variableHeight,t.extensions.resize={variableHeight:s}),!0===o||o==e){var a=document.createElement("div");a.className="tabulator-col-resize-handle";var l=document.createElement("div");l.className="tabulator-col-resize-handle prev",a.addEventListener("click",function(e){e.stopPropagation()}),a.addEventListener("mousedown",function(e){var n=t.getLastColumn();n&&i._checkResizability(n)&&(i.startColumn=t,i._mouseDown(e,n))}),a.addEventListener("dblclick",function(e){i._checkResizability(t)&&t.reinitializeWidth(!0)}),l.addEventListener("click",function(e){e.stopPropagation()}),l.addEventListener("mousedown",function(e){var n,s,o;(n=t.getFirstColumn())&&(s=i.table.columnManager.findColumnIndex(n),(o=s>0&&i.table.columnManager.getColumnByIndex(s-1))&&i._checkResizability(o)&&(i.startColumn=t,i._mouseDown(e,o)))}),l.addEventListener("dblclick",function(e){var n,s,o;(n=t.getFirstColumn())&&(s=i.table.columnManager.findColumnIndex(n),(o=s>0&&i.table.columnManager.getColumnByIndex(s-1))&&i._checkResizability(o)&&o.reinitializeWidth(!0))}),n.append(a).append(l)}},ResizeColumns.prototype._checkResizability=function(e){return void 0!==e.definition.resizable?e.definition.resizable:this.table.options.resizableColumns},ResizeColumns.prototype._mouseDown=function(e,t){function n(e){t.setWidth(s.startWidth+(e.screenX-s.startX)),!s.table.browserSlow&&t.extensions.resize&&t.extensions.resize.variableHeight&&t.checkCellHeights()}function i(e){s.startColumn.extensions.edit&&(s.startColumn.extensions.edit.blocked=!1),s.table.browserSlow&&t.extensions.resize&&t.extensions.resize.variableHeight&&t.checkCellHeights(),$("body").off("mouseup",n),$("body").off("mousemove",n),s.table.element.removeClass("tabulator-block-select"),s.table.options.persistentLayout&&s.table.extExists("persistence",!0)&&s.table.extensions.persistence.save("columns"),s.table.options.columnResized(s.startColumn.getComponent())}var s=this;s.table.element.addClass("tabulator-block-select"),e.stopPropagation(),s.startColumn.extensions.edit&&(s.startColumn.extensions.edit.blocked=!0),s.startX=e.screenX,s.startWidth=t.getWidth(),$("body").on("mousemove",n),$("body").on("mouseup",i)},Tabulator.prototype.registerExtension("resizeColumns",ResizeColumns);