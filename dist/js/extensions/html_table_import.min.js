/* Tabulator v4.0.0 (c) Oliver Folkerd */
"use strict";var HtmlTableImport=function(t){this.table=t,this.hasIndex=!1};HtmlTableImport.prototype.parseTable=function(){var t=this,e=t.table.element,a=t.table.options,r=(a.columns,$("th",e)),i=$("tbody tr",e),o=[];t.hasIndex=!1,t.table.options.htmlImporting(),t._extractOptions(e,a),r.length?t._extractHeaders(e):t._generateBlankHeaders(e),i.each(function(e){var r={};t.hasIndex||(r[a.index]=e),$("td",$(this)).each(function(t){r[$(this).data("field")]=$(this).html()}),o.push(r)});var n=$("<div></div>"),l=e.prop("attributes");$.each(l,function(){n.attr(this.name,this.value)}),e.replaceWith(n),a.data=o,t.table.options.htmlImported(),n.tabulator(a)},HtmlTableImport.prototype._extractOptions=function(t,e){var a=this,r=t[0].attributes;for(var i in r){var o,n=r[i];if(n&&n.name&&0===n.name.indexOf("tabulator-")){o=n.name.replace("tabulator-","");for(var l in e)l.toLowerCase()==o&&(e[l]=a._attribValue(n.value))}}},HtmlTableImport.prototype._attribValue=function(t){return"true"===t||"false"!==t&&t},HtmlTableImport.prototype._findCol=function(t){return this.table.options.columns.find(function(e){return e.title===t})||!1},HtmlTableImport.prototype._extractHeaders=function(t){var e=this,a=$("th",t),r=$("tbody tr",t);a.each(function(t){var a,i,o=$(this),n=!1,l=e._findCol(o.text());l?n=!0:l={title:o.text().trim()},l.field||(l.field=o.text().trim().toLowerCase().replace(" ","_")),a=o.attr("width"),a&&!l.width&&(l.width=a),i=o[0].attributes,e._extractOptions(o,l);for(var s in i){var p,d=i[s];d&&d.name&&0===d.name.indexOf("tabulator-")&&(p=d.name.replace("tabulator-",""),l[p]=e._attribValue(d.value))}$("td:eq("+t+")",r).data("field",l.field),l.field==e.table.options.index&&(e.hasIndex=!0),n||e.table.options.columns.push(l)})},HtmlTableImport.prototype._generateBlankHeaders=function(t){var e=this,a=$("tr:first td",t),r=$("tbody tr",t);a.each(function(t){var a={title:"",field:"col"+t};$("td:eq("+t+")",r).data("field",a.field);var i=$(this).attr("width");i&&(a.width=i),e.table.options.columns.push(a)})},Tabulator.prototype.registerExtension("htmlTableImport",HtmlTableImport);