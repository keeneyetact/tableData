"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),o=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var i=arguments[1],n=0;n<o;){var s=e[n];if(t.call(i,s,n,e))return n;n++}return-1}}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),o=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var i=arguments[1],n=0;n<o;){var s=e[n];if(t.call(i,s,n,e))return s;n++}}});var t=function(t){this.table=t,this.element=$("<div class='tabulator-header'></div>"),this.rowManager=null,this.columns=[],this.columnsByIndex=[],this.columnsByField=[],this.scrollLeft=0};t.prototype.setRowManager=function(t){this.rowManager=t},t.prototype.getElement=function(){return this.element},t.prototype.scrollHorizontal=function(t){var e=0,o=this.element[0].scrollWidth-this.table.element.innerWidth();this.element.scrollLeft(t),t>o?(e=t-o,this.element.css("margin-left",-e)):this.element.css("margin-left",0),this.scrollLeft=t,this.table.extExists("frozenColumns")&&this.table.extensions.frozenColumns.layout()},t.prototype.setColumns=function(t,e){var o=this;o.element.empty(),o.columns=[],o.columnsByIndex=[],o.columnsByField=[],o.table.extExists("frozenColumns")&&o.table.extensions.frozenColumns.reset(),t.forEach(function(t,e){o._addColumn(t)}),o._reIndexColumns(),o.table.options.responsiveLayout&&o.table.extExists("responsiveLayout",!0)&&o.table.extensions.responsiveLayout.initialize(),o.redraw(!0)},t.prototype._addColumn=function(t,e,o){var n=new i(t,this),s=o?this.findColumnIndex(o):o;if(o&&s>-1){var a=this.columns.indexOf(o.getTopColumn());e?(this.columns.splice(a,0,n),o.getElement().before(n.getElement())):(this.columns.splice(a+1,0,n),o.getElement().after(n.getElement()))}else e?(this.columns.unshift(n),this.element.prepend(n.getElement())):(this.columns.push(n),this.element.append(n.getElement()))},t.prototype.registerColumnField=function(t){t.definition.field&&(this.columnsByField[t.definition.field]=t)},t.prototype.registerColumnPosition=function(t){this.columnsByIndex.push(t)},t.prototype._reIndexColumns=function(){this.columnsByIndex=[],this.columns.forEach(function(t){t.reRegisterPosition()})},t.prototype._verticalAlignHeaders=function(){var t=this;t.columns.forEach(function(t){t.clearVerticalAlign()}),t.columns.forEach(function(e){e.verticalAlign(t.table.options.columnVertAlign)}),t.rowManager.adjustTableSize()},t.prototype.findColumn=function(t){var e=this;if("object"==(void 0===t?"undefined":_typeof(t))){if(t instanceof i)return t;if(t instanceof jQuery){return e.columns.find(function(e){return e.element===t})||!1}return t._getSelf()||!1}return this.columnsByField[t]||!1},t.prototype.getColumnByField=function(t){return this.columnsByField[t]},t.prototype.getColumnByIndex=function(t){return this.columnsByIndex[t]},t.prototype.getColumns=function(){return this.columns},t.prototype.findColumnIndex=function(t){return this.columnsByIndex.findIndex(function(e){return t===e})},t.prototype.getRealColumns=function(){return this.columnsByIndex},t.prototype.traverse=function(t){this.columnsByIndex.forEach(function(e,o){t(e,o)})},t.prototype.getDefinitions=function(t){var e=this,o=[];return e.columnsByIndex.forEach(function(e){(!t||t&&e.visible)&&o.push(e.getDefinition())}),o},t.prototype.getDefinitionTree=function(){var t=this,e=[];return t.columns.forEach(function(t){e.push(t.getDefinition(!0))}),e},t.prototype.getComponents=function(){var t=this,e=[];return t.columnsByIndex.forEach(function(t){e.push(t.getComponent())}),e},t.prototype.getWidth=function(){var t=0;return this.columnsByIndex.forEach(function(e){e.visible&&(t+=e.getWidth())}),t},t.prototype.moveColumn=function(t,e,o){this._moveColumnInArray(this.columns,t,e,o),this._moveColumnInArray(this.columnsByIndex,t,e,o),this.table.options.columnMoved(t.getComponent()),this.table.options.persistentLayout&&this.table.extExists("persistentLayout",!0)&&this.table.extensions.persistentLayout.save()},t.prototype._moveColumnInArray=function(t,e,o,i){var n,s=t.indexOf(e);s>-1&&(t.splice(s,1),n=t.indexOf(o),n>-1?i?t.splice(n+1,0,e):t.splice(n,0,e):t.splice(s,0,e))},t.prototype.generateCells=function(t){var e=this,o=[];return e.columnsByIndex.forEach(function(e){o.push(e.generateCell(t))}),o},t.prototype.fitToData=function(){this.columnsByIndex.forEach(function(t){t.fitToData()})},t.prototype.fitToTable=function(){var t=this,e=t.table.element.innerWidth(),o=0,i=0,n=0,s=[],a=0;t.rowManager.element[0].scrollHeight>t.rowManager.element.innerHeight()&&(e-=t.rowManager.element[0].offsetWidth-t.rowManager.element[0].clientWidth),t.columnsByIndex.forEach(function(t){var e,i,n;t.visible&&(e=t.definition.width,e?(i=parseInt(t.minWidth),n="string"==typeof e?e.indexOf("%")>-1?totWidth/100*parseInt(e):parseInt(e):e,o+=n>i?n:i):s.push(t))}),i=e-o,n=Math.floor(i/s.length),a=e-o-n*s.length,a=a>0?a:0,s.forEach(function(t,e){var o=n>=t.minWidth?n:t.minWidth;e==s.length-1&&a&&(o+=a),t.setWidth(o)})},t.prototype.addColumn=function(t,e,o){this._addColumn(t,e,o),this._reIndexColumns(),this.table.options.responsiveLayout&&this.table.extExists("responsiveLayout",!0)&&this.table.extensions.responsiveLayout.initialize(),this.redraw(),this._verticalAlignHeaders(),this.table.rowManager.reinitialize()},t.prototype.deregisterColumn=function(t){var e,o=t.getField();o&&delete this.columnsByField[o],e=this.columnsByIndex.indexOf(t),e>-1&&this.columnsByIndex.splice(e,1),e=this.columns.indexOf(t),e>-1&&this.columns.splice(e,1),this.table.options.responsiveLayout&&this.table.extExists("responsiveLayout",!0)&&this.table.extensions.responsiveLayout.initialize(),this.redraw()},t.prototype.redraw=function(t){t&&(this._verticalAlignHeaders(),this.table.rowManager.resetScroll(),this.table.rowManager.reinitialize()),this.table.options.fitColumns?this.fitToTable():(t&&this.fitToData(),this.table.options.responsiveLayout&&this.table.extExists("responsiveLayout",!0)&&this.table.extensions.responsiveLayout.update()),this.table.extExists("frozenColumns")&&this.table.extensions.frozenColumns.layout(),t&&this.table.options.persistentLayout&&this.table.extExists("persistentLayout",!0)&&this.table.extensions.persistentLayout.save()};var o=function(t){return{type:"ColumnComponent",getElement:function(){return t.getElement()},getDefinition:function(){return t.getDefinition()},getField:function(){return t.getField()},getCells:function(){var e=[];return t.cells.forEach(function(t){e.push(t.getComponent())}),e},getVisibility:function(){return t.visible},show:function(){t.show()},hide:function(){t.hide()},toggle:function(){t.visible?t.hide():t.show()},delete:function(){t.delete()},_getSelf:function(){return t}}},i=function t(e,o){var i=this;this.table=o.table,this.definition=e,this.parent=o,this.type="column",this.columns=[],this.cells=[],this.element=$("<div class='tabulator-col' role='columnheader' aria-sort='none'></div>"),this.contentElement=!1,this.groupElement=$("<div class='tabulator-col-group-cols'></div>"),this.isGroup=!1,this.extensions={},this.cellEvents={cellClick:!1,cellDblClick:!1,cellContext:!1},this.width=null,this.minWidth=null,this.visible=!0,e.columns?(this.isGroup=!0,e.columns.forEach(function(e,o){var n=new t(e,i);i.attachColumn(n)}),i.checkColumnVisibility()):o.registerColumnField(this),e.rowHandle&&!1!==this.table.options.movableRows&&this.table.extExists("moveRow")&&this.table.extensions.moveRow.setHandle(!0),this._buildHeader()};i.prototype.registerColumnPosition=function(t){this.parent.registerColumnPosition(t)},i.prototype.registerColumnField=function(t){this.parent.registerColumnField(t)},i.prototype.reRegisterPosition=function(){this.isGroup?this.columns.forEach(function(t){t.reRegisterPosition()}):this.registerColumnPosition(this)},i.prototype._buildHeader=function(){var t=this,e=t.definition;t.element.empty(),t.contentElement=t._buildColumnHeaderContent(),t.element.append(t.contentElement),t.isGroup?t._buildGroupHeader():t._buildColumnHeader();var o=e.tooltipHeader||!1===e.tooltip?e.tooltipHeader:t.table.options.tooltipsHeader;o?!0===o?e.field?t.table.extensions.localize.bind("columns."+e.field,function(o){t.element.attr("title",o||e.title)}):t.element.attr("title",e.title):("function"==typeof o&&(o=o(column.getComponent())),t.element.attr("title",o)):t.element.attr("title",""),t.table.options.resizableColumns&&t.table.extExists("resizeColumns")&&t.table.extensions.resizeColumns.initializeColumn(t,t.element),e.headerFilter&&t.table.extExists("filter")&&t.table.extExists("edit")&&(void 0!==e.headerFilterPlaceholder&&e.field&&t.table.extensions.localize.setHeaderFilterColumnPlaceholder(e.field,e.headerFilterPlaceholder),t.table.extensions.filter.initializeColumn(t)),t.table.extExists("frozenColumns")&&t.table.extensions.frozenColumns.initializeColumn(t),t.table.options.movableColumns&&!t.isGroup&&t.table.extExists("moveColumn")&&t.table.extensions.moveColumn.initializeColumn(t),"function"==typeof e.headerClick&&t.element.on("click",function(o){e.headerClick(o,t.getComponent())}),"function"==typeof e.headerDblClick&&t.element.on("dblclick",function(o){e.headerDblClick(o,t.getComponent())}),"function"==typeof e.headerContext&&t.element.on("contextmenu",function(o){e.headerContext(o,t.getComponent())}),"function"==typeof e.cellClick&&(t.cellEvents.cellClick=e.cellClick),"function"==typeof e.cellDblClick&&(t.cellEvents.cellDblClick=e.cellDblClick),"function"==typeof e.cellContext&&(t.cellEvents.cellContext=e.cellContext)},i.prototype._buildColumnHeader=function(){var t=this,e=t.definition,o=t.table;o.extExists("sort")&&o.extensions.sort.initializeColumn(t,t.contentElement),o.extExists("format")&&o.extensions.format.initializeColumn(t),void 0!==e.editor&&o.extExists("edit")&&o.extensions.edit.initializeColumn(t),void 0!==e.mutator&&o.extExists("mutator")&&o.extensions.mutator.initializeColumn(t),void 0!==e.accessor&&o.extExists("accessor")&&o.extensions.accessor.initializeColumn(t),void 0!==e.visible&&(e.visible?t.show():t.hide()),e.cssClass&&t.element.addClass(e.cssClass),t.setMinWidth(void 0===e.minWidth?t.table.options.columnMinWidth:e.minWidth),t.setWidth(e.width)},i.prototype._buildColumnHeaderContent=function(){var t=this,e=(t.definition,t.table,$("<div class='tabulator-col-content'></div>"));return e.append(t._buildColumnHeaderTitle()),e},i.prototype._buildColumnHeaderTitle=function(){var t=this,e=t.definition,o=t.table,i=$("<div class='tabulator-col-title'></div>");if(e.editableTitle){var n=$("<input class='tabulator-title-editor'>");n.on("click",function(t){t.stopPropagation(),$(this).focus()}),n.on("change",function(){var i=$(this).val();e.title=i,o.options.columnTitleChanged(t.getComponent())}),i.append(n),e.field?o.extensions.localize.bind("columns."+e.field,function(t){n.val(t||e.title||"&nbsp")}):n.val(e.title||"&nbsp")}else e.field?o.extensions.localize.bind("columns."+e.field,function(t){i.html(t||e.title||"&nbsp")}):i.html(e.title||"&nbsp");return i},i.prototype._buildGroupHeader=function(){var t=this,e=t.definition;t.table;t.element.addClass("tabulator-col-group").attr("role","columngroup").attr("aria-title",e.title),t.element.append(t.groupElement)},i.prototype.attachColumn=function(t){var e=this;e.groupElement?(e.columns.push(t),e.groupElement.append(t.getElement())):console.warn("Column Warning - Column being attached to another column instead of column group")},i.prototype.verticalAlign=function(t){this.parent.isGroup?this.element.css("height",this.parent.getGroupElement().innerHeight()):this.element.css("height",this.parent.getElement().innerHeight()),this.isGroup||"top"===t||("bottom"===t?this.element.css({"padding-top":this.element.innerHeight()-this.contentElement.outerHeight()}):this.element.css({"padding-top":(this.element.innerHeight()-this.contentElement.outerHeight())/2})),this.columns.forEach(function(e){e.verticalAlign(t)})},i.prototype.clearVerticalAlign=function(){this.element.css("padding-top",""),this.element.css("height",""),this.columns.forEach(function(t){t.clearVerticalAlign()})},i.prototype.getElement=function(){return this.element},i.prototype.getGroupElement=function(){return this.groupElement},i.prototype.getField=function(){return this.definition.field},i.prototype.getFirstColumn=function(){return this.isGroup?!!this.columns.length&&this.columns[0].getFirstColumn():this},i.prototype.getLastColumn=function(){return this.isGroup?!!this.columns.length&&this.columns[this.columns.length-1].getLastColumn():this},i.prototype.getColumns=function(){return this.columns},i.prototype.getCells=function(){return this.cells},i.prototype.getTopColumn=function(){return this.parent.isGroup?this.parent.getTopColumn():this},i.prototype.getDefinition=function(t){var e=[];return this.isGroup&&t&&(this.columns.forEach(function(t){e.push(t.getDefinition(!0))}),this.definition.columns=e),this.definition},i.prototype.checkColumnVisibility=function(){var t=!1;this.columns.forEach(function(e){e.visible&&(t=!0)}),t?(this.show(),this.parent.table.options.columnVisibilityChanged(this.getComponent(),!1)):this.hide()},i.prototype.show=function(){this.visible||(this.visible=!0,this.element.show(),this.table.columnManager._verticalAlignHeaders(),this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(t){t.show()}),this.table.options.persistentLayout&&self.table.extExists("persistentLayout",!0)&&self.table.extensions.persistentLayout.save(),this.table.options.groupVisibilityChanged(this.getComponent(),!0))},i.prototype.hide=function(){this.visible&&(this.visible=!1,this.element.hide(),this.table.columnManager._verticalAlignHeaders(),this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(t){t.hide()}),this.table.options.persistentLayout&&self.table.extExists("persistentLayout",!0)&&self.table.extensions.persistentLayout.save(),this.table.options.groupVisibilityChanged(this.getComponent(),!1))},i.prototype.setWidth=function(t){t=Math.max(this.minWidth,t),this.width=t,this.isGroup||(this.element.css("width",t||""),this.cells.forEach(function(e){e.setWidth(t)})),this.table.extExists("frozenColumns")&&this.table.extensions.frozenColumns.layout()},i.prototype.checkCellHeights=function(){this.cells.forEach(function(t){t.checkHeight()})},i.prototype.getWidth=function(){return this.element.outerWidth()},i.prototype.getHeight=function(){return this.element.outerHeight()},i.prototype.setMinWidth=function(t){this.minWidth=t,this.element.css("min-width",t||""),this.cells.forEach(function(e){e.setMinWidth(t)})},i.prototype.delete=function(){this.isGroup&&this.columns.forEach(function(t){t.delete()});for(var t=this.cells.length,e=0;e<t;e++)this.cells[0].delete();this.element.detach(),this.table.columnManager.deregisterColumn(this)},i.prototype.generateCell=function(t){var e=this,o=new l(e,t);return this.cells.push(o),o},i.prototype.fitToData=function(){var t=this,e=this.element.outerWidth()+1;t.width||(t.cells.forEach(function(t){var o=t.getWidth();o>e&&(e=o)}),e&&t.setWidth(e))},i.prototype.deleteCell=function(t){var e=this.cells.indexOf(t);e>-1&&this.cells.splice(e,1)},i.prototype.getComponent=function(){return new o(this)};var n=function(t){this.table=t,this.element=$("<div class='tabulator-tableHolder' tabindex='0'></div>"),this.tableElement=$("<div class='tabulator-table'></div>"),this.columnManager=null,this.height=0,this.firstRender=!1,this.renderMode="classic",this.rows=[],this.activeRows=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.scrollTop=0,this.scrollLeft=0,this.vDomRowHeight=20,this.vDomTop=0,this.vDomBottom=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomWindowBuffer=0,this.vDomWindowMinTotalRows=20,this.vDomWindowMinMarginRows=5,this._initialize()};n.prototype.getElement=function(){return this.element},n.prototype.getTableElement=function(){return this.tableElement},n.prototype.setColumnManager=function(t){this.columnManager=t},n.prototype._initialize=function(){var t=this;t.element.append(t.tableElement),t.firstRender=!0,t.element.scroll(function(){var e=t.element.scrollLeft();t.scrollLeft!=e&&(t.columnManager.scrollHorizontal(e),t.table.options.groupBy&&t.table.extensions.groupRows.scrollHeaders(e)),t.scrollLeft=e}),t.table.options.height&&t.table.options.virtualDom&&t.element.scroll(function(){var e=t.element.scrollTop();t.scrollTop!=e?(t.scrollTop=e,t.scrollVertical()):t.scrollTop=e})},n.prototype.findRow=function(t){var e=this;if("object"==(void 0===t?"undefined":_typeof(t))){if(t instanceof a)return t;if(t instanceof jQuery){return e.rows.find(function(e){return e.element===t})||!1}return t._getSelf()||!1}return e.rows.find(function(o){return o.data[e.table.options.index]==t})||!1},n.prototype.scrollToRow=function(t){var e;if((e=this.displayRows.indexOf(t))>-1)switch(this.renderMode){case"classic":this.element.scrollTop(t.element.offset().top-this.element.offset().top+this.element.scrollTop());break;case"virtual":this._virtualRenderFill(e,!0)}else console.warn("Scroll Error - Row not visible")},n.prototype.setData=function(t){var e=this;e.table.options.dataLoading(t),e.rows=[],this.table.options.history&&this.table.extExists("history")&&this.table.extensions.history.clear(),Array.isArray(t)?(t.forEach(function(t,o){var i=new a(t,e);e.rows.push(i)}),e.table.options.dataLoaded(t),e.refreshActiveData(!0)):console.error("Data Loading Error - Unable to process data due to invalid data type \nExpecting: array \nReceived: ",void 0===t?"undefined":_typeof(t),"\nData:     ",t)},n.prototype.deleteRow=function(t){var e=this.rows.indexOf(t),o=this.activeRows.indexOf(t),i=this.displayRows.indexOf(t);i>-1&&this.displayRows.splice(i,1),o>-1&&this.activeRows.splice(o,1),e>-1&&this.rows.splice(e,1),this.table.options.rowDeleted(t.getComponent()),this.table.options.dataEdited(this.getData()),this.setActiveRows(this.activeRows),this.setDisplayRows(this.displayRows),this.table.options.pagination&&this.table.extExists("page")?this.refreshActiveData():this.renderTable()},n.prototype.addRow=function(t,e,o){var i=this.addRowActual(t,e,o);return this.table.options.history&&this.table.extExists("history")&&this.table.extensions.history.action("rowAdd",i,{data:t,pos:e,index:o}),i},n.prototype.addRowActual=function(t,e,o){var i=t||{},n=new a(i,this),s=void 0===e?this.table.options.addRowPos:e;if(o&&(o=this.findRow(o)),"top"===s&&(s=!0),"bottom"===s&&(s=!1),o){var r=this.rows.indexOf(o),l=this.activeRows.indexOf(o),u=this.displayRows.indexOf(o);u>-1&&this.displayRows.splice(s?u:u+1,0,n),l>-1&&this.activeRows.splice(s?l:l+1,0,n),r>-1&&this.rows.splice(s?r:r+1,0,n)}else s?(this.displayRows.unshift(n),this.activeRows.unshift(n),this.rows.unshift(n)):(this.displayRows.push(n),this.activeRows.push(n),this.rows.push(n));return this.setDisplayRows(this.displayRows),this.setActiveRows(this.activeRows),this.table.options.rowAdded(n.getComponent()),this.table.options.dataEdited(this.getData()),this.renderTable(),n},n.prototype.moveRow=function(t,e,o){this._moveRowInArray(this.rows,t,e,o),this._moveRowInArray(this.activeRows,t,e,o),this._moveRowInArray(this.displayRows,t,e,o),this.table.options.rowMoved(t.getComponent())},n.prototype._moveRowInArray=function(t,e,o,i){var n,s,a,r=t.indexOf(e);if(r>-1&&(t.splice(r,1),n=t.indexOf(o),n>-1?i?t.splice(n+1,0,e):t.splice(n,0,e):t.splice(r,0,e)),t===this.displayRows){s=r<n?r:n,a=n>r?n:r+1;for(var l=s;l<=a;l++)t[l]&&this.styleRow(t[l],l)}},n.prototype.clearData=function(){this.setData([])},n.prototype.getRowIndex=function(t){return this.findRowIndex(t,this.rows)},n.prototype.getDisplayRowIndex=function(t){return this.findRowIndex(t,this.displayRows)},n.prototype.nextDisplayRow=function(t){var e=this.getDisplayRowIndex(t),o=!1;return!1!==e&&e<this.displayRowsCount-1&&(o=this.displayRows[e+1]),o},n.prototype.prevDisplayRow=function(t){var e=this.getDisplayRowIndex(t),o=!1;return e&&(o=this.displayRows[e-1]),o},n.prototype.findRowIndex=function(t,e){var o;return!!((t=this.findRow(t))&&(o=e.indexOf(t))>-1)&&o},n.prototype.getData=function(t){var e=this,o=[];return(t?e.rows:e.activeRows).forEach(function(t){o.push(t.getData(!0))}),o},n.prototype.getDataCount=function(t){return t?this.rows.length:this.activeRows.length},n.prototype._genRemoteRequest=function(){var t=this,e=t.table,o=e.options,i={};if(e.extExists("page")){if(o.ajaxSorting){var n=t.table.extensions.sort.getSort();n[0]&&"function"!=typeof n[0].column&&(i[t.table.extensions.page.paginationDataSentNames.sort]=n[0].column.getField(),i[t.table.extensions.page.paginationDataSentNames.sort_dir]=n[0].dir)}if(o.ajaxFiltering){var s=t.table.extensions.filter.getFilter();s[0]&&"string"==typeof s[0].field&&(i[t.table.extensions.page.paginationDataSentNames.filter]=s[0].field,i[t.table.extensions.page.paginationDataSentNames.filter_type]=s[0].type,i[t.table.extensions.page.paginationDataSentNames.filter_value]=s[0].value)}t.table.extensions.ajax.setParams(i,!0)}e.extensions.ajax.sendRequest(function(e){t.setData(e)})},n.prototype.filterRefresh=function(){var t=this.table,e=t.options;e.ajaxFiltering?"remote"==e.pagination&&t.extExists("page")?(t.extensions.page.reset(!0),t.extensions.page.setPage(1)):this._genRemoteRequest():this.refreshActiveData()},n.prototype.sorterRefresh=function(){var t=this.table.options;t.ajaxSorting?"remote"==t.pagination&&table.extExists("page")?(table.extensions.page.reset(!0),table.extensions.page.setPage(1)):this._genRemoteRequest():this.refreshActiveData()},n.prototype.refreshActiveData=function(t){var e=this,o=this.table;o.options.selectable&&!o.options.selectablePersistence&&o.extExists("selectRow")&&o.extensions.selectRow.deselectRows(),o.extExists("filter")?(o.extensions.filter.hasChanged()||t)&&(e.setActiveRows(o.extensions.filter.filter(e.rows)),t=!0):e.setActiveRows(e.rows.slice(0)),o.extExists("sort")&&(o.extensions.sort.hasChanged()||t)&&(o.extensions.sort.sort(),t=!0),o.options.groupBy&&o.extExists("groupRows")?(e.setDisplayRows(o.extensions.groupRows.getRows(this.activeRows,t)),o.options.pagination&&console.warn("Invalid Setup Combination - Pagination and Row Grouping cannot be enabled at the same time")):o.options.pagination&&o.extExists("page")?("local"==o.extensions.page.getMode()&&(t&&o.extensions.page.reset(),o.extensions.page.setMaxRows(this.activeRows.length)),e.setDisplayRows(o.extensions.page.getRows(this.activeRows))):e.setDisplayRows(e.activeRows.slice(0)),e.renderTable(),this.displayRowsCount||o.options.placeholder&&e.getElement().append(o.options.placeholder)},n.prototype.setActiveRows=function(t){this.activeRows=t,this.activeRowsCount=this.activeRows.length},n.prototype.setDisplayRows=function(t){this.displayRows=t,this.displayRowsCount=this.displayRows.length},n.prototype.getRows=function(){return this.rows},n.prototype.renderTable=function(){var t=this;t.table.options.renderStarted(),t.element.scrollTop(0),t.height&&t.table.options.virtualDom&&!t.table.options.pagination?(t.renderMode="virtual",t._virtualRenderFill()):(t.renderMode="classic",t._simpleRender()),t.firstRender&&(t.displayRowsCount?(t.firstRender=!1,t.table.options.fitColumns?t.columnManager.fitToTable():t.columnManager.fitToData()):t.renderEmptyScroll(),t.table.options.responsiveLayout&&t.table.extExists("responsiveLayout",!0)&&t.table.extensions.responsiveLayout.update()),this.table.extExists("frozenColumns")&&this.table.extensions.frozenColumns.layout(),t.table.options.renderComplete()},n.prototype.getRenderMode=function(){return this.renderMode},n.prototype._simpleRender=function(){var t=this,e=this.tableElement;t._clearVirtualDom(),t.displayRowsCount?t.displayRows.forEach(function(o,i){t.styleRow(o,i),e.append(o.getElement()),o.initialize()}):t.renderEmptyScroll()},n.prototype.renderEmptyScroll=function(){var t=this;t.tableElement.css({"min-width":t.table.columnManager.getWidth(),"min-height":"1px",visibility:"hidden"})},n.prototype._clearVirtualDom=function(){var t=this.tableElement;this.table.options.placeholder&&this.table.options.placeholder.detach(),t.children().detach(),t.css({"padding-top":"","padding-bottom":"","min-width":"","min-height":"",visibility:""}),this.scrollTop=0,this.scrollLeft=0,this.vDomTop=0,this.vDomBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0},n.prototype.styleRow=function(t,e){e%2?t.element.addClass("tabulator-row-even").removeClass("tabulator-row-odd"):t.element.addClass("tabulator-row-odd").removeClass("tabulator-row-even")},n.prototype._virtualRenderFill=function(t,e){var o=this,i=o.tableElement,n=o.element,s=0,a=0,r=0,l=0;if(t=t||0){i.children().detach();var u=(o.displayRowsCount-t)*o.vDomRowHeight;u<o.height&&(t-=Math.ceil((o.height-u)/o.displayRowsCount))<0&&(t=0),s=Math.min(Math.max(Math.floor(o.vDomWindowBuffer/o.vDomRowHeight),o.vDomWindowMinMarginRows),t),t-=s}else o._clearVirtualDom();if(o.displayRowsCount&&o.element.is(":visible")){for(o.vDomTop=t,o.vDomBottom=t-1;(a<=o.height+o.vDomWindowBuffer||l<o.vDomWindowMinTotalRows)&&o.vDomBottom<o.displayRowsCount-1;){var c=o.vDomBottom+1,h=o.displayRows[c];o.styleRow(h,c),i.append(h.getElement()),h.initialize(),l<s?r+=h.getHeight():a+=h.getHeight(),o.vDomBottom++,l++}t?(o.vDomTopPad=e?o.vDomRowHeight*this.vDomTop+r:this.element.scrollTop()-r,o.vDomBottomPad=o.vDomBottom==o.displayRowsCount-1?0:Math.max(o.vDomScrollHeight-o.vDomTopPad-a-r,0)):(this.vDomTopPad=0,o.vDomRowHeight=Math.floor((a+r)/l),o.vDomBottomPad=o.vDomRowHeight*(o.displayRowsCount-o.vDomBottom-1),o.vDomScrollHeight=r+a+o.vDomBottomPad-o.element.innerHeight()),i.css({"padding-top":o.vDomTopPad,"padding-bottom":o.vDomBottomPad}),e&&(this.scrollTop=o.vDomTopPad+r),this.vDomScrollPosTop=this.scrollTop,this.vDomScrollPosBottom=this.scrollTop,e&&n.scrollTop(this.scrollTop)}else this.renderEmptyScroll()},n.prototype.scrollVertical=function(){var t=this.scrollTop-this.vDomScrollPosTop,e=this.scrollTop-this.vDomScrollPosBottom,o=2*this.vDomWindowBuffer;-t>o||e>o?this._virtualRenderFill(Math.floor(this.element.scrollTop()/this.element[0].scrollHeight*this.displayRowsCount)):(t>=0?this._removeTopRow(t):this._addTopRow(-t),e>=0?this._addBottomRow(e):this._removeBottomRow(-e))},n.prototype._addTopRow=function(t){var e=this.tableElement;if(this.vDomTop){var o=this.vDomTop-1,i=this.displayRows[o],n=i.getHeight()||this.vDomRowHeight;t>=n&&(this.styleRow(i,o),e.prepend(i.getElement()),i.initialize(),this.vDomTopPad-=n,this.vDomTopPad<0&&(this.vDomTopPad=(this.vDomTop-1)*this.vDomRowHeight),e.css("padding-top",this.vDomTopPad),this.vDomScrollPosTop-=n,this.vDomTop--),t=-(this.scrollTop-this.vDomScrollPosTop),this.vDomTop&&t>=(this.displayRows[this.vDomTop-1].getHeight()||this.vDomRowHeight)&&this._addTopRow(t)}},n.prototype._removeTopRow=function(t){var e=this.tableElement,o=this.displayRows[this.vDomTop],i=o.getHeight();this.scrollTop>this.vDomWindowBuffer&&(o.element.detach(),this.vDomTopPad+=i,e.css("padding-top",this.vDomTopPad),this.vDomScrollPosTop+=this.vDomTop?i:i+this.vDomWindowBuffer,this.vDomTop++,(t=this.scrollTop-this.vDomScrollPosTop)>=(this.displayRows[this.vDomTop].getHeight()||this.vDomRowHeight)&&this._removeTopRow(t))},n.prototype._addBottomRow=function(t){var e=this.tableElement;if(this.vDomBottom<this.displayRowsCount-1){var o=this.vDomBottom+1,i=this.displayRows[o],n=i.getHeight()||this.vDomRowHeight;t>=n&&(this.styleRow(i,o),e.append(i.getElement()),i.initialize(),this.vDomBottomPad-=n,(this.vDomBottomPad<0||o==this.displayRowsCount-1)&&(this.vDomBottomPad=0),e.css("padding-bottom",this.vDomBottomPad),this.vDomScrollPosBottom+=n,this.vDomBottom++),t=this.scrollTop-this.vDomScrollPosBottom,this.vDomBottom<this.displayRowsCount-1&&t>=(this.displayRows[this.vDomBottom+1].getHeight()||this.vDomRowHeight)&&this._addBottomRow(t)}},n.prototype._removeBottomRow=function(t){var e=this.tableElement,o=this.displayRows[this.vDomBottom],i=o.getHeight()||this.vDomRowHeight;this.scrollTop<this.element.innerHeight()-this.element[0].scrollHeight-this.vDomWindowBuffer&&(o.element.detach(),this.vDomBottomPad+=i,this.vDomBottomPad<0&&this.vDomBottomPad,e.css("padding-bottom",this.vDomBottomPad),this.vDomScrollPosBottom-=i,this.vDomBottom--,(t=-(this.scrollTop-this.vDomScrollPosBottom))>=(this.displayRows[this.vDomBottom].getHeight()||this.vDomRowHeight)&&this._removeBottomRow(t))},n.prototype.normalizeHeight=function(){this.displayRows.forEach(function(t){t.normalizeHeight()})},n.prototype.adjustTableSize=function(){var t=this;if(t.table.options.height){var e=t.columnManager.getElement().outerHeight()+(t.table.footerManager?t.table.footerManager.getElement().outerHeight():0);t.element.css({"min-height":"calc(100% - "+e+"px)",height:"calc(100% - "+e+"px)","max-height":"calc(100% - "+e+"px)"}),t.height=t.element.innerHeight(),t.vDomWindowBuffer=t.height}},n.prototype.reinitialize=function(){this.rows.forEach(function(t){t.reinitialize()})},n.prototype.redraw=function(t){("virtual"==this.renderMode&&this.adjustTableSize(),t)?this.renderTable():"simple"==self.renderMode?this._simpleRender():(Math.floor(this.element.scrollTop()/this.element[0].scrollHeight*this.displayRowsCount),this._virtualRenderFill(0))},n.prototype.resetScroll=function(){this.element.scrollLeft(0),this.element.scrollTop(0),this.element.scroll()};var s=function(t){return{getData:function(){return t.getData(!0)},getElement:function(){return t.getElement()},getCells:function(){var e=[];return t.getCells().forEach(function(t){e.push(t.getComponent())}),e},getCell:function(e){return t.getCell(e)},getIndex:function(){return t.getData(!0)[t.table.options.index]},delete:function(){t.delete()},scrollTo:function(){t.table.rowManager.scrollToRow(t)},update:function(e){t.updateData(e)},normalizeHeight:function(){t.normalizeHeight(!0)},_getSelf:function(){return t}}},a=function(t,e){this.table=e.table,this.parent=e,this.data={},this.element=$("<div class='tabulator-row' role='row'></div>"),this.extensions={},this.cells=[],this.height=0,this.outerHeight=0,this.initialized=!1,this.setData(t),this.generateElement()};a.prototype.getElement=function(){return this.element},a.prototype.generateElement=function(){var t=this;!1!==t.table.options.selectable&&t.table.extExists("selectRow")&&t.table.extensions.selectRow.initializeRow(this),!1!==t.table.options.movableRows&&t.table.extExists("moveRow")&&t.table.extensions.moveRow.initializeRow(this),t.table.options.rowClick&&t.element.on("click",function(e){t.table.options.rowClick(e,t.getComponent())}),t.table.options.rowDblClick&&t.element.on("dblclick",function(e){t.table.options.rowDblClick(e,t.getComponent())}),t.table.options.rowContext&&t.element.on("contextmenu",function(e){t.table.options.rowContext(e,t.getComponent())})},a.prototype.normalizeHeight=function(t){t&&this.cells.forEach(function(t){t.setHeight()}),this.setHeight(this.element.innerHeight(),t)},a.prototype.initialize=function(t){var e=this;e.initialized&&!t||(e.element.empty(),this.table.extExists("frozenColumns")&&this.table.extensions.frozenColumns.layoutRow(this),e.cells=this.parent.columnManager.generateCells(e),e.cells.forEach(function(t){e.element.append(t.getElement())}),e.normalizeHeight(),e.table.options.rowFormatter&&e.table.options.rowFormatter(e.getComponent()),e.initialized=!0)},a.prototype.reinitialize=function(){this.initialized=!1,this.height=0,this.element.is(":visible")&&this.initialize(!0)},a.prototype.setHeight=function(t,e){var o=this;(o.height!=t||e)&&(o.height=t,o.cells.forEach(function(e){e.setHeight(t)}),o.outerHeight=this.element.outerHeight())},a.prototype.getHeight=function(){
return this.outerHeight},a.prototype.getWidth=function(){return this.element.outerWidth()},a.prototype.deleteCell=function(t){var e=this.cells.indexOf(t);e>-1&&this.cells.splice(e,1)},a.prototype.setData=function(t){var e=this;e.table.extExists("mutator")?e.data=e.table.extensions.mutator.transformRow(t):e.data=t},a.prototype.updateData=function(t){var e=this;e.table.extExists("mutator")&&(t=e.table.extensions.mutator.transformRow(t));for(var o in t)e.data[o]=t[o];for(var o in t){var i=this.getCell(o);i&&i.getValue()!=t[o]&&i.setValueProcessData(t[o])}this.element.is(":visible")?(e.normalizeHeight(),e.table.options.rowFormatter&&e.table.options.rowFormatter(e.getComponent())):(this.initialized=!1,this.height=0),e.table.options.rowUpdated(e.getComponent())},a.prototype.getData=function(t){var e=this;return t?e.table.extExists("accessor")?e.table.extensions.accessor.transformRow(e.data):void 0:this.data},a.prototype.getCell=function(t){var t=this.table.columnManager.findColumn(t);return this.cells.find(function(e){return e.column===t})},a.prototype.getCellIndex=function(t){return this.cells.findIndex(function(e){return e===t})},a.prototype.findNextEditableCell=function(t){var e=!1;if(t<this.cells.length-1)for(var o=t+1;o<this.cells.length;o++){var i=this.cells[o];if(i.column.extensions.edit){var n=!0;if("function"==typeof i.column.extensions.edit.check&&(n=i.column.extensions.edit.check(i.getComponent())),n){e=i;break}}}return e},a.prototype.findPrevEditableCell=function(t){var e=!1;if(t>0)for(var o=t-1;o>=0;o--){var i=this.cells[o],n=!0;if(i.column.extensions.edit&&("function"==typeof i.column.extensions.edit.check&&(n=i.column.extensions.edit.check(i.getComponent())),n)){e=i;break}}return e},a.prototype.getCells=function(){return this.cells},a.prototype.delete=function(){var t=this.table.rowManager.getRowIndex(this);this.deleteActual(),this.table.options.history&&this.table.extExists("history")&&(t&&(t=this.table.rowManager.rows[t-1]),this.table.extensions.history.action("rowDelete",this,{data:this.getData(),pos:!t,index:t}))},a.prototype.deleteActual=function(){this.table.rowManager.deleteRow(this);for(var t=this.cells.length,e=0;e<t;e++)this.cells[0].delete()},a.prototype.getComponent=function(){return new s(this)};var r=function(t){return{getValue:function(){return t.getValue()},getOldValue:function(){return t.getOldValue()},getElement:function(){return t.getElement()},getRow:function(){return t.row.getComponent()},getColumn:function(){return t.column.getComponent()},setValue:function(e,o){void 0===o&&(o=!0),t.setValue(e,o)},edit:function(){t.edit()},nav:function(){return t.nav()},checkHeight:function(){t.checkHeight()},_getSelf:function(){return t}}},l=function(t,e){this.table=t.table,this.column=t,this.row=e,this.element=$("<div class='tabulator-cell' role='gridcell'></div>"),this.value=null,this.oldValue=null,this.height=null,this.width=null,this.minWidth=null,this.generateElement()};l.prototype.generateElement=function(){this.setWidth(this.column.width),this._configureCell(),this.setValueProcessData(this.row.data[this.column.getField()])},l.prototype._configureCell=function(){var t=this,e=t.column.cellEvents,o=t.element,i=this.column.getField();o.css("text-align",void 0===t.column.definition.align?"":t.column.definition.align),i&&o.attr("tabulator-field",i),t.column.definition.cssClass&&o.addClass(t.column.definition.cssClass),e.cellClick&&t.element.on("click",function(o){e.cellClick(o,t.getComponent())}),e.cellDblClick&&t.element.on("dblclick",function(o){e.cellDblClick(o,t.getComponent())}),e.cellContext&&t.element.on("contextmenu",function(o){e.cellContext(o,t.getComponent())}),t.column.extensions.edit&&t.table.extensions.edit.bindEditor(t),t.column.definition.rowHandle&&!1!==t.table.options.movableRows&&t.table.extExists("moveRow")&&t.table.extensions.moveRow.initializeCell(t),t.column.visible?t.show():t.hide()},l.prototype._generateContents=function(){var t=this;t.table.extExists("format")?t.element.html(t.table.extensions.format.formatValue(t)):t.element.html(t.value)},l.prototype._generateTooltip=function(){var t=this,e=t.column.definition.tooltip||!1===t.column.definition.tooltip?t.column.definition.tooltip:t.table.options.tooltips;e?(!0===e?e=t.value:"function"==typeof e&&(e=e(t.getComponent())),t.element.attr("title",e)):t.element.attr("title","")},l.prototype.getElement=function(){return this.element},l.prototype.getValue=function(){return this.value},l.prototype.getOldValue=function(){return this.oldValue},l.prototype.setValue=function(t,e){this.setValueProcessData(t,e)&&(this.table.options.history&&this.table.extExists("history")&&this.table.extensions.history.action("cellEdit",this,{oldValue:this.oldValue,newValue:this.value}),this.table.options.cellEdited(this.getComponent()),this.table.options.dataEdited(this.table.rowManager.getData()))},l.prototype.setValueProcessData=function(t,e){var o=!1;return this.value!=t&&(o=!0,e&&this.column.extensions.mutate&&"data"!==this.column.extensions.mutate.type&&(t=this.table.extensions.mutator.transformCell(cell,t))),this.setValueActual(t),o},l.prototype.setValueActual=function(t){this.oldValue=this.value,this.value=t,this.row.data[this.column.getField()]=t,this._generateContents(),this._generateTooltip(),this.table.options.resizableColumns&&this.table.extExists("resizeColumns")&&this.table.extensions.resizeColumns.initializeColumn(this.column,this.element),this.table.extExists("frozenColumns")&&this.table.extensions.frozenColumns.layoutElement(this.element,this.column)},l.prototype.setWidth=function(t){this.width=t,this.element.css("width",t||"")},l.prototype.getWidth=function(){return this.width||this.element.outerWidth()},l.prototype.setMinWidth=function(t){this.minWidth=t,this.element.css("min-width",t||"")},l.prototype.checkHeight=function(){var t=this.element.css("height");this.element.is(":visible")&&t?(this.element.css("height",""),this.element.outerHeight()!=parseInt(t)?this.row.normalizeHeight(!0):this.element.css("height",t)):this.row.reinitialize()},l.prototype.setHeight=function(t){this.height=t,this.element.css("height",t||"")},l.prototype.getHeight=function(){return this.height||this.element.outerHeight()},l.prototype.show=function(){this.element.css("display","")},l.prototype.hide=function(){this.element.css("display","none")},l.prototype.edit=function(){this.element.focus()},l.prototype.delete=function(){this.element.detach(),this.column.deleteCell(this),this.row.deleteCell(this)},l.prototype.nav=function(){var t=this,e=!1,o=this.row.getCellIndex(this);return{next:function(){var e,o=this.right();return!(o||!(e=t.table.rowManager.nextDisplayRow(t.row))||!(o=e.findNextEditableCell(-1)))&&(o.edit(),!0)},prev:function(){var e,o=this.left();return!(o||!(e=t.table.rowManager.prevDisplayRow(t.row))||!(o=e.findPrevEditableCell(e.cells.length)))&&(o.edit(),!0)},left:function(){return!!(e=t.row.findPrevEditableCell(o))&&(e.edit(),!0)},right:function(){return!!(e=t.row.findNextEditableCell(o))&&(e.edit(),!0)},up:function(){var e=t.table.rowManager.prevDisplayRow(t.row);e&&e.cells[o].edit()},down:function(){var e=t.table.rowManager.nextDisplayRow(t.row);e&&e.cells[o].edit()}}},l.prototype.getIndex=function(){this.row.getCellIndex(this)},l.prototype.getComponent=function(){return new r(this)};var u=function(t){this.table=t,this.element=$("<div class='tabulator-footer'></div>"),this._initialize()};u.prototype._initialize=function(t){this.table.options.footerElement&&(this.element=this.table.options.footerElement)},u.prototype.getElement=function(){return this.element},u.prototype.append=function(t){this.element.append(t),this.table.rowManager.adjustTableSize()},window.Tabulator={columnManager:null,rowManager:null,footerManager:null,options:{height:!1,fitColumns:!1,columnMinWidth:40,columnVertAlign:"top",resizableColumns:!0,columns:[],data:[],tooltips:!1,tooltipsHeader:!1,initialSort:!1,footerElement:!1,index:"id",keybindings:[],addRowPos:"bottom",selectable:"highlight",selectableRollingSelection:!0,selectablePersistence:!0,selectableCheck:function(t,e){return!0},headerFilterPlaceholder:!1,history:!1,locale:!1,langs:{},virtualDom:!0,persistentLayout:!1,persistentLayoutID:"",responsiveLayout:!1,pagination:!1,paginationSize:!1,paginationElement:!1,paginationDataSent:{},paginationDataReceived:{},paginator:!1,ajaxURL:!1,ajaxParams:{},ajaxConfig:"get",ajaxLoader:!0,ajaxLoaderLoading:!1,ajaxLoaderError:!1,ajaxFiltering:!1,ajaxSorting:!1,groupBy:!1,groupStartOpen:!0,groupHeader:!1,movableColumns:!1,movableRows:!1,rowFormatter:!1,placeholder:!1,tableBuilding:function(){},tableBuilt:function(){},renderStarted:function(){},renderComplete:function(){},rowClick:!1,rowDblClick:!1,rowContext:!1,rowAdded:function(){},rowDeleted:function(){},rowMoved:function(){},rowUpdated:function(){},rowSelectionChanged:function(){},rowSelected:function(){},rowDeselected:function(){},cellEditing:function(){},cellEdited:function(){},cellEditCancelled:function(){},columnMoved:function(){},columnResized:function(){},columnTitleChanged:function(){},columnVisibilityChanged:function(){},htmlImporting:function(){},htmlImported:function(){},dataLoading:function(){},dataLoaded:function(){},dataEdited:function(){},ajaxRequesting:function(){},ajaxResponse:!1,ajaxError:function(){},dataFiltering:!1,dataFiltered:!1,dataSorting:function(){},dataSorted:function(){},dataGrouping:function(){},dataGrouped:!1,groupVisibilityChanged:function(){},pageLoaded:function(){},localized:function(){}},_create:function(){var e=this,o=this.element;e.bindExtensions(),o.is("table")?this.extExists("htmlTableImport",!0)&&e.extensions.htmlTableImport.parseTable():(e.columnManager=new t(e),e.rowManager=new n(e),e.footerManager=new u(e),e.columnManager.setRowManager(e.rowManager),e.rowManager.setColumnManager(e.columnManager),e._buildElement(),e.options.pagination&&this.extExists("page")?(e.extensions.page.reset(!0),e.extensions.page.setPage(1)):e.options.data.length?e.rowManager.setData(e.options.data):e.options.ajaxURL&&this.extExists("ajax")?e.extensions.ajax.sendRequest(function(t){e.rowManager.setData(t)}):e.rowManager.setData(e.options.data))},_buildElement:function(){var t=this.element,e=this.extensions,o=this.options;o.tableBuilding(),t.addClass("tabulator").attr("role","grid").empty(),!1!==o.headerFilterPlaceholder&&e.localize.setHeaderFilterPlaceholder(o.headerFilterPlaceholder);for(var i in o.langs)e.localize.installLang(i,o.langs[i]);e.localize.setLocale(o.locale),"string"==typeof o.placeholder&&(o.placeholder=$("<div class='tabulator-placeholder'><span>"+o.placeholder+"</span></div>")),o.height&&(o.height=isNaN(o.height)?o.height:o.height+"px",this.element.css({height:o.height})),t.append(this.columnManager.getElement()),t.append(this.rowManager.getElement()),(o.pagination&&this.extExists("page",!0)||o.footerElement)&&t.append(this.footerManager.getElement()),o.persistentLayout&&this.extExists("persistentLayout",!0)&&(e.persistentLayout.initialize(o.persistentLayout,o.persistentLayoutID),o.columns=e.persistentLayout.load(o.columns)),this.columnManager.setColumns(o.columns),o.initialSort&&this.extExists("sort",!0)&&e.sort.setSort(o.initialSort),o.pagination&&this.extExists("page",!0)&&e.page.initialize(),o.groupBy&&this.extExists("groupRows",!0)&&e.groupRows.initialize(),this.extExists("ajax")&&e.ajax.initialize(),this.extExists("keybindings")&&e.keybindings.initialize(),o.tableBuilt()},_setOption:function(t,e){console.error("Options Error - Tabulator does not allow options to be set after initialization unless there is a function defined for that purpose")},_destroy:function(){var t=this.element;t.empty(),t.removeClass("tabulator")},setData:function(t,e,o){var i=this,i=this;"string"==typeof t?0==t.indexOf("{")||0==t.indexOf("[")?i.rowManager.setData(JSON.parse(t)):i.extExists("ajax",!0)&&(e&&i.extensions.ajax.setParams(e),o&&i.extensions.ajax.setConfig(o),i.extensions.ajax.setUrl(t),"remote"==i.options.pagination&&i.extExists("page",!0)?(i.extensions.page.reset(!0),i.extensions.page.setPage(1)):i.extensions.ajax.sendRequest(function(t){i.rowManager.setData(t)})):t?i.rowManager.setData(t):i.extExists("ajax")&&i.extensions.ajax.getUrl?"remote"==i.options.pagination&&i.extExists("page",!0)?(i.extensions.page.reset(!0),i.extensions.page.setPage(1)):i.extensions.ajax.sendRequest(function(t){i.rowManager.setData(t)}):i.rowManager.setData([])},clearData:function(){this.rowManager.clearData()},getData:function(t){return this.rowManager.getData(t)},getDataCount:function(t){return this.rowManager.getDataCount(t)},updateData:function(t){var e=this;t?t.forEach(function(t){var o=e.rowManager.findRow(t[e.options.index]);o&&o.updateData(t)}):console.warn("Update Error - No data provided")},updateOrAddData:function(t){var e=this;t?t.forEach(function(t){var o=e.rowManager.findRow(t[e.options.index]);o?o.updateData(t):e.rowManager.addRow(t)}):console.warn("Update Error - No data provided")},getRow:function(t){var e=this.rowManager.findRow(t);return e?e.getComponent():(console.warn("Find Error - No matching row found:",t),!1)},deleteRow:function(t){var e=this.rowManager.findRow(t);return e?(e.delete(),!0):(console.warn("Delete Error - No matching row found:",t),!1)},addRow:function(t,e,o){return this.rowManager.addRow(t,e,o).getComponent()},updateOrAddRow:function(t,e){var o=this.rowManager.findRow(t);return o?o.updateData(e):o=this.rowManager.addRow(e),o.getComponent()},updateRow:function(t,e){return row=this.rowManager.findRow(t),row?(row.updateData(e),row.getComponent()):(console.warn("Update Error - No matching row found:",t),!1)},scrollToRow:function(t){return row=this.rowManager.findRow(t),row?this.rowManager.scrollToRow(row):(console.warn("Scroll Error - No matching row found:",t),!1)},setColumns:function(t){this.columnManager.setColumns(t)},getColumns:function(){return this.columnManager.getComponents()},getColumnDefinitions:function(){return this.columnManager.getDefinitionTree()},getColumnLayout:function(){if(this.extExists("persistentLayout",!0))return this.extensions.persistentLayout.parseColumns(this.columnManager.getColumns())},setColumnLayout:function(t){return!!this.extExists("persistentLayout",!0)&&(this.columnManager.setColumns(this.extensions.persistentLayout.mergeDefinition(this.options.columns,t)),!0)},showColumn:function(t){var e=this.columnManager.findColumn(t);if(!e)return console.warn("Column Show Error - No matching column found:",t),!1;e.show()},hideColumn:function(t){var e=this.columnManager.findColumn(t);if(!e)return console.warn("Column Hide Error - No matching column found:",t),!1;e.hide()},toggleColumn:function(t){var e=this.columnManager.findColumn(t);if(!e)return console.warn("Column Visibility Toggle Error - No matching column found:",t),!1;e.visible?e.hide():e.show()},addColumn:function(t,e,o){var i=this.columnManager.findColumn(o);this.columnManager.addColumn(t,e,i)},deleteColumn:function(t){var e=this.columnManager.findColumn(t);if(!e)return console.warn("Column Delete Error - No matching column found:",t),!1;e.delete()},setLocale:function(t){this.extensions.localize.setLocale(t)},getLocale:function(){return this.extensions.localize.getLocale()},getLang:function(t){return this.extensions.localize.getLang(t)},redraw:function(t){this.columnManager.redraw(t),this.rowManager.redraw(t)},setHeight:function(t){this.options.height=isNaN(t)?t:t+"px",this.element.css({height:this.options.height}),this.rowManager.redraw()},setSort:function(t,e){this.extExists("sort",!0)&&(this.extensions.sort.setSort(t,e),this.rowManager.sorterRefresh())},getSort:function(){if(this.extExists("sort",!0))return this.extensions.sort.getSort()},clearSort:function(){this.extExists("sort",!0)&&(this.extensions.sort.clear(),this.rowManager.sorterRefresh())},setFilter:function(t,e,o){this.extExists("filter",!0)&&(this.extensions.filter.setFilter(t,e,o),this.rowManager.filterRefresh())},addFilter:function(t,e,o){this.extExists("filter",!0)&&(this.extensions.filter.addFilter(t,e,o),this.rowManager.filterRefresh())},getFilter:function(){if(this.extExists("filter",!0))return this.extensions.filter.getFilter()},removeFilter:function(t,e,o){this.extExists("filter",!0)&&(this.extensions.filter.removeFilter(t,e,o),this.rowManager.filterRefresh())},clearFilter:function(t){this.extExists("filter",!0)&&(this.extensions.filter.clearFilter(t),this.rowManager.filterRefresh())},clearHeaderFilter:function(){this.extExists("filter",!0)&&(this.extensions.filter.clearHeaderFilter(),this.rowManager.filterRefresh())},selectRow:function(t){this.extExists("selectRow",!0)&&this.extensions.selectRow.selectRows(t)},deselectRow:function(t){this.extExists("selectRow",!0)&&this.extensions.selectRow.deselectRows(t)},getSelectedRows:function(){if(this.extExists("selectRow",!0))return this.extensions.selectRow.getSelectedRows()},getSelectedData:function(){if(this.extExists("selectRow",!0))return this.extensions.selectRow.getSelectedData()},setMaxPage:function(t){if(!this.options.pagination||!this.extExists("page"))return!1;this.extensions.page.setMaxPage(t)},setPage:function(t){if(!this.options.pagination||!this.extExists("page"))return!1;this.extensions.page.setPage(t)},setPageSize:function(t){if(!this.options.pagination||!this.extExists("page"))return!1;this.extensions.page.setPageSize(t),this.extensions.page.setPage(1)},previousPage:function(){if(!this.options.pagination||!this.extExists("page"))return!1;this.extensions.page.previousPage()},nextPage:function(){if(!this.options.pagination||!this.extExists("page"))return!1;this.extensions.page.nextPage()},getPage:function(){if(!this.options.pagination||!this.extExists("page"))return!1;this.extensions.page.getPage()},getPageMax:function(){if(!this.options.pagination||!this.extExists("page"))return!1;this.extensions.page.getPageMax()},navigatePrev:function(){var t=!1;return!(!this.table.extExists("edit",!0)||!(t=this.table.extensions.edit.currentCell))&&(e.preventDefault(),t.nav().prev())},navigateNext:function(){var t=!1;return!(!this.table.extExists("edit",!0)||!(t=this.table.extensions.edit.currentCell))&&(e.preventDefault(),t.nav().next())},navigateLeft:function(){var t=!1;return!(!this.table.extExists("edit",!0)||!(t=this.table.extensions.edit.currentCell))&&(e.preventDefault(),t.nav().left())},navigateRight:function(){var t=!1;return!(!this.table.extExists("edit",!0)||!(t=this.table.extensions.edit.currentCell))&&(e.preventDefault(),t.nav().right())},navigateUp:function(){var t=!1;return!(!this.table.extExists("edit",!0)||!(t=this.table.extensions.edit.currentCell))&&(e.preventDefault(),t.nav().up())},navigateDown:function(){var t=!1;return!(!this.table.extExists("edit",!0)||!(t=this.table.extensions.edit.currentCell))&&(e.preventDefault(),t.nav().dpwn())},undo:function(){return!(!this.options.history||!this.extExists("history",!0))&&this.extensions.history.undo()},redo:function(){return!(!this.options.history||!this.extExists("history",!0))&&this.extensions.history.redo()},download:function(t,e,o){this.extExists("download",!0)&&this.extensions.download.download(t,e,o)},extensions:{},extensionBindings:{},extendExtension:function(t,e,o){if(this.extensionBindings[t]){var i=this.extensionBindings[t].prototype[e];if(i)if("object"==(void 0===o?"undefined":_typeof(o)))for(var n in o)i[n]=o[n];else console.warn("Extension Error - Invalid value type, it must be an object");else console.warn("Extension Error - property does not exist:",e)}else console.warn("Extension Error - extension does not exist:",t)},registerExtension:function(t,e){this.extensionBindings[t]=e},bindExtensions:function(){var t=this;this.extensions={};for(var e in t.extensionBindings)t.extensions[e]=new t.extensionBindings[e](t)},extExists:function(t,e){return!!this.extensions[t]||(e&&console.error("Tabulator Plugin Not Installed: "+t),!1)}};var c=function(t){this.table=t,this.locale="default",this.lang=!1,this.bindings={}};c.prototype.setHeaderFilterPlaceholder=function(t){this.langs.default.headerFilters.default=t},c.prototype.setHeaderFilterColumnPlaceholder=function(t,e){this.langs.default.headerFilters.columns[t]=e,this.lang&&!this.lang.headerFilters.columns[t]&&(this.lang.headerFilters.columns[t]=e)},c.prototype.installLang=function(t,e){this.langs[t]?this._setLangProp(this.langs[t],e):this.langs[t]=e},c.prototype._setLangProp=function(t,e){for(var o in e)t[o]&&"object"==_typeof(t[o])?this._setLangProp(t[o],e[o]):t[o]=e[o]},c.prototype.setLocale=function(t){function e(t,o){for(var i in t)"object"==_typeof(t[i])?(o[i]||(o[i]={}),e(t[i],o[i])):o[i]=t[i]}var o=this;if(t=t||"default",!0===t&&navigator.language&&(t=navigator.language.toLowerCase()),t&&!o.langs[t]){var i=t.split("-")[0];o.langs[i]?(console.warn("Localization Error - Exact matching locale not found, using closest match: ",t,i),t=i):(console.warn("Localization Error - Matching locale not found, using default: ",t),t="default")}o.locale=t,o.lang=$.extend(!0,{},o.langs.default),"default"!=t&&e(o.langs[t],o.lang),o.table.options.localized(o.locale,o.lang),o._executeBindings()},c.prototype.getLocale=function(t){return self.locale},c.prototype.getLang=function(t){return t?this.langs[t]:this.lang},c.prototype.getText=function(t,e){var o=this,t=e?t+"."+e:t,i=t.split(".");return this._getLangElement(i,o.locale)||""},c.prototype._getLangElement=function(t,e){var o=this,i=o.lang;return t.forEach(function(t){var e;i&&(e=i[t],i=void 0!==e&&e)}),i},c.prototype.bind=function(t,e){this.bindings[t]||(this.bindings[t]=[]),this.bindings[t].push(e),e(this.getText(t))},c.prototype._executeBindings=function(){var t=this;for(var e in t.bindings)!function(e){t.bindings[e].forEach(function(o){o(t.getText(e))})}(e)},c.prototype.langs={default:{columns:{},ajax:{loading:"Loading",error:"Error"},pagination:{first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page"},headerFilters:{default:"filter column...",columns:{}}}},Tabulator.registerExtension("localize",c);var h=function(t){this.table=t};h.prototype.initializeColumn=function(t){var e={accessor:!1,params:t.definition.accessorParams||{}};switch(_typeof(t.definition.accessor)){case"string":this.accessors[t.definition.accessor]?e.accessor=this.accessors[t.definition.accessor]:console.warn("Accessor Error - No such accessor found, ignoring: ",t.definition.accessor);break;case"function":e.accessor=t.definition.accessor}e.accessor&&(t.extensions.accessor=e)},h.prototype.transformRow=function(t){var e=this,o=$.extend(!0,{},t||{});return e.table.columnManager.traverse(function(t){var e;t.extensions.accessor&&(e=t.getField(),void 0!==o[e]&&(o[e]=t.extensions.accessor.accessor(o[e],o,t.extensions.accessor.params)))}),o},h.prototype.accessors={},Tabulator.registerExtension("accessor",h);var p=function(t){this.table=t,this.config=!1,this.url="",this.params=!1,this.loaderElement=$("<div class='tablulator-loader'></div>"),this.msgElement=$("<div class='tabulator-loader-msg' role='alert'></div>"),this.loadingElement=!1,this.errorElement=!1};p.prototype.initialize=function(){this.loaderElement.append(this.msgElement),this.table.options.ajaxLoaderLoading&&(this.loadingElement=this.table.options.ajaxLoaderLoading),this.table.options.ajaxLoaderError&&(this.errorElement=this.table.options.ajaxLoaderError),this.table.options.ajaxParams&&this.setParams(this.table.options.ajaxParams),this.table.options.ajaxConfig&&this.setConfig(this.table.options.ajaxConfig),this.table.options.ajaxURL&&this.setUrl(this.table.options.ajaxURL)},p.prototype.setParams=function(t,e){if(e){this.params=this.params||{};for(var o in t)this.params[o]=t[o]}else this.params=t},p.prototype.getParams=function(){return this.params||{}},p.prototype.setConfig=function(t){if(this._loadDefaultConfig(),"string"==typeof t)this.config.type=t;else for(var e in t)this.config[e]=t[e]},p.prototype._loadDefaultConfig=function(t){var e=this;if(!e.config||t){e.config={};for(var o in e.defaultConfig)e.config[o]=e.defaultConfig[o]}},p.prototype.setUrl=function(t){this.url=t},p.prototype.getUrl=function(){return this.url},p.prototype.sendRequest=function(t){var e=this;if(!e.url)return console.warn("Ajax Load Error - No URL Set"),!1;e._loadDefaultConfig(),e.config.url=e.url,e.params&&(e.config.data=e.params),e.table.options.ajaxRequesting(e.url,e.params),e.showLoader(),$.ajax(e.config).done(function(o){e.table.options.ajaxResponse&&(o=e.table.options.ajaxResponse(e.url,e.params,o)),e.table.options.dataLoaded(o),t(o),e.hideLoader()}).fail(function(t,o,i){console.error("Ajax Load Error - Connection Error: "+t.status,i),e.table.options.ajaxError(t,o,i),e.showError(),setTimeout(function(){e.hideLoader()},3e3)})},p.prototype.showLoader=function(){this.loaderElement.detach(),this.msgElement.empty().removeClass("tabulator-error").addClass("tabulator-loading"),this.loadingElement?this.msgElement.append(this.loadingElement):this.msgElement.append(this.table.extensions.localize.getText("ajax.loading")),this.table.element.append(this.loaderElement)},p.prototype.showError=function(){this.loaderElement.detach(),this.msgElement.empty().removeClass("tabulator-loading").addClass("tabulator-error"),this.errorElement?this.msgElement.append(this.errorElement):this.msgElement.append(this.table.extensions.localize.getText("ajax.error")),this.table.element.append(this.loaderElement)},p.prototype.hideLoader=function(){this.loaderElement.detach()},p.prototype.defaultConfig={url:"",type:"GET",async:!0,dataType:"json",success:function(t){}},Tabulator.registerExtension("ajax",p);var d=function(t){this.table=t};d.prototype.download=function(t,e,o){function i(o,i){n.triggerDownload(o,i,t,e)}var n=this,s=!1;"function"==typeof t?s=t:n.downloaders[t]?s=n.downloaders[t]:console.warn("Download Error - No such download type found: ",t),s&&s(n.table.columnManager.getDefinitions(),n.table.rowManager.getData(!0),o,i)},d.prototype.triggerDownload=function(t,e,o,i){var n=document.createElement("a"),s=new Blob([t],{type:e}),i=i||"Tabulator."+("function"==typeof o?"txt":o);navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(s,i):(n.setAttribute("href",window.URL.createObjectURL(s)),n.setAttribute("download",i),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n))},d.prototype.downloaders={csv:function(t,e,o,i){var n,s=[],a=[],r=o&&o.delimiter?o.delimiter:",";t.forEach(function(t){t.field&&(s.push('"'+String(t.title).split('"').join('""')+'"'),a.push(t.field))}),n=[s.join(r)],e.forEach(function(t){var e=[];a.forEach(function(o){var i="object"==_typeof(t[o])?JSON.stringify(t[o]):t[o];e.push('"'+String(i).split('"').join('""')+'"')}),n.push(e.join(r))}),i(n.join("\n"),"text/csv")},json:function(t,e,o,i){i(JSON.stringify(e,null,"\t"),"application/json")},xlsx:function(t,e,o,i){var n,s,a=[],r=[],l=[],u={SheetNames:["Sheet1"],Sheets:{}};t.forEach(function(t){t.field&&(a.push(t.title),r.push(t.field))}),l.push(r),e.forEach(function(t){var e=[];r.forEach(function(o){e.push(t[o])}),l.push(e)}),n=function(){var t={},e={s:{c:0,r:0},e:{c:r.length,r:l.length}};return l.forEach(function(e,o){e.forEach(function(e,i){var n={v:void 0===e?"":e};if(null!=n){switch(_typeof(n.v)){case"number":n.t="n";break;case"boolean":n.t="b";break;default:n.t="s"}t[XLSX.utils.encode_cell({c:i,r:o})]=n}})}),t["!ref"]=XLSX.utils.encode_range(e),t}(),u.Sheets.Sheet1=n,s=XLSX.write(u,{bookType:"xlsx",bookSST:!0,type:"binary"}),i(function(t){for(var e=new ArrayBuffer(t.length),o=new Uint8Array(e),i=0;i!=t.length;++i)o[i]=255&t.charCodeAt(i);return e}(s),"application/octet-stream")}},Tabulator.registerExtension("download",d);var f=function(t){this.table=t,this.currentCell=!1};f.prototype.initializeColumn=function(t){var e=this,o={editor:!1,blocked:!1,check:t.definition.editable,params:t.definition.editorParams||{}};switch(_typeof(t.definition.editor)){case"string":e.editors[t.definition.editor]?o.editor=e.editors[t.definition.editor]:console.warn("Editor Error - No such editor found: ",t.definition.editor);break;case"function":o.editor=t.definition.editor;break;case"boolean":!0===t.definition.editor&&("string"==typeof t.definition.formatter?e.editors[t.definition.formatter]?o.editor=e.editors[t.definition.formatter]:o.editor=e.editors.input:console.warn("Editor Error - Cannot auto lookup editor for a custom formatter: ",t.definition.formatter))}o.editor&&(t.extensions.edit=o)},f.prototype.getCurrentCell=function(){return!!this.currentCell&&this.currentCell.getComponent()},f.prototype.clearEditor=function(t){this.currentCell=!1,t.getElement().removeClass("tabulator-editing").empty(),t.row.getElement().removeClass("tabulator-row-editing")},f.prototype.bindEditor=function(t){function e(e){i.clearEditor(t),t.setValue(e,!0)}function o(){i.clearEditor(t),t.setValueActual(t.getValue()),i.table.options.cellEditCancelled(t.getComponent())}var i=this,n=t.getElement(),s=!1;n.attr("tabindex",0),n.on("click",function(t){$(this).hasClass("tabulator-editing")||$(this).focus()}),n.on("mousedown",function(t){s=!0}),n.on("focus",function(a){function r(t){u=t}var l,u=function(){},c=!0;i.currentCell=t,s&&(s=!1,t.column.cellEvents.cellClick&&t.column.cellEvents.cellClick(a,t.getComponent())),t.column.extensions.edit.blocked?n.blur():(a.stopPropagation(),"function"==typeof t.column.extensions.edit.check&&(c=t.column.extensions.edit.check(t.getComponent())),c?(i.table.options.cellEditing(t.getComponent()),l=t.column.extensions.edit.editor.call(i,t.getComponent(),r,e,o,t.column.extensions.edit.params),!1!==l?(n.addClass("tabulator-editing"),t.row.getElement().addClass("tabulator-row-editing"),n.empty(),n.append(l),u(),n.children().click(function(t){t.stopPropagation()})):n.blur()):n.blur())})},f.prototype.editors={input:function(t,e,o,i,n){var s=$("<input type='text'/>");return s.css({padding:"4px",width:"100%","box-sizing":"border-box"}).val(t.getValue()),e(function(){s.focus(),s.css("height","100%")}),s.on("change blur",function(e){s.val()!=t.getValue()?o(s.val()):i()}),s.on("keydown",function(t){13==t.keyCode&&o(s.val())}),s},textarea:function(t,e,o,i,n){var s=t.getValue(),a=(s.match(/(?:\r\n|\r|\n)/g),$("<textarea></textarea>")),r=0;return a.css({display:"block",height:"100%",width:"100%",padding:"2px","box-sizing":"border-box","white-space":"pre-wrap",resize:"none"}).val(s),e(function(){a.focus(),a.css("height","100%")}),a.on("change blur",function(e){a.val()!=t.getValue()?(o(a.val()),setTimeout(function(){t.getRow().normalizeHeight()},300)):i()}),a.on("keyup",function(){a.css({height:""});var e=a[0].scrollHeight;a.css({height:e}),e!=r&&(r=e,t.getRow().normalizeHeight())}),a},number:function(t,e,o,i,n){var s=$("<input type='number'/>");return s.css({padding:"4px",width:"100%","box-sizing":"border-box"}).val(t.getValue()),e(function(){s.focus(),s.css("height","100%")}),s.on("blur",function(e){var n=s.val();isNaN(n)||(n=Number(n)),n!=t.getValue()?o(n):i()}),s.on("keydown",function(t){var e;13==t.keyCode&&(e=s.val(),isNaN(e)||(e=Number(e)),o(e))}),s},star:function(t,e,o,i,n){
var s=t.getElement(),a=t.getValue(),r=$("svg",s).length||5,l=$("svg:first",s).attr("width")||14,u=$("<div style='vertical-align:middle; padding:4px; display:inline-block; vertical-align:middle;'></div>"),c=$('<svg width="'+l+'" height="'+l+'" class="tabulator-star-active" viewBox="0 0 512 512" xml:space="preserve" style="padding:0 1px;"><polygon fill="#488CE9" stroke="#014AAE" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/></svg>'),h=$('<svg width="'+l+'" height="'+l+'" class="tabulator-star-inactive" viewBox="0 0 512 512" xml:space="preserve" style="padding:0 1px;"><polygon fill="#010155" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/></svg>'),p=function(t){$(".tabulator-star-active",t.closest("div")).length!=t.prevAll("svg").length+1&&(t.prevAll("svg").replaceWith(c.clone()),t.nextAll("svg").replaceWith(h.clone()),t.replaceWith(c.clone()))};a=parseInt(a)<r?parseInt(a):r;for(var d=1;d<=r;d++){var f=d<=a?c:h;u.append(f.clone())}return u.on("mouseover","svg",function(t){t.stopPropagation(),p($(this))}),u.on("mouseover",function(t){$("svg",$(this)).replaceWith(h.clone())}),u.on("click",function(t){o(0)}),u.on("click","svg",function(t){t.stopPropagation(),o($(this).prevAll("svg").length+1)}),s.css({"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}),s.on("blur",function(){i()}),s.on("keydown",function(t){switch(t.keyCode){case 39:p($(".tabulator-star-inactive:first",u));break;case 37:var e=$(".tabulator-star-active:last",u).prev("svg");e.length?p(e):$("svg",u).replaceWith(h.clone());break;case 13:o($(".tabulator-star-active",u).length)}}),u},progress:function(t,e,o,i,n){var s,a=t.getElement(),r=$("div",a).data("max"),l=$("div",a).data("min"),u=(r-l)/100,c=t.getValue()||0,h=$("<div class='tabulator-progress-handle' style='position:absolute; right:0; top:0; bottom:0; width:5px;'></div>"),p=function(){var t=u*Math.round(s.outerWidth()/(a.width()/100))+l;o(t),a.attr("aria-valuenow",t).attr("aria-label",c)};return c=parseFloat(c)<=r?parseFloat(c):r,c=parseFloat(c)>=l?parseFloat(c):l,c=100-Math.round((c-l)/u),s=$("<div style='position:absolute; top:8px; bottom:8px; left:4px; right:"+c+"%; margin-right:4px; background-color:#488CE9; display:inline-block; max-width:100%; min-width:0%;' data-max='"+r+"' data-min='"+l+"'></div>"),a.css({padding:"0 4px"}),a.attr("aria-valuemin",l).attr("aria-valuemax",r),s.append(h),h.on("mousedown",function(t){s.data("mouseDrag",t.screenX),s.data("mouseDragWidth",s.outerWidth())}),h.on("mouseover",function(){$(this).css({cursor:"ew-resize"})}),a.on("mousemove",function(t){s.data("mouseDrag")&&s.css({width:s.data("mouseDragWidth")+(t.screenX-s.data("mouseDrag"))})}),a.on("mouseup",function(t){s.data("mouseDrag")&&(t.stopPropagation(),t.stopImmediatePropagation(),s.data("mouseDragOut",!0),s.data("mouseDrag",!1),s.data("mouseDragWidth",!1),p())}),a.on("keydown",function(t){switch(t.keyCode){case 39:s.css({width:s.width()+a.width()/100});break;case 37:s.css({width:s.width()-a.width()/100});break;case 13:p()}}),a.on("blur",function(){i()}),s},tickCross:function(t,e,o,i,n){var s=t.getValue(),a=$("<input type='checkbox'/>");return a.css({"margin-top":"5px","box-sizing":"border-box"}).val(s),e(function(){a.focus()}),!0===s||"true"===s||"True"===s||1===s?a.prop("checked",!0):a.prop("checked",!1),a.on("change blur",function(t){o(a.is(":checked"))}),a.on("keydown",function(t){13==t.keyCode&&o(a.is(":checked"))}),a},tick:function(t,e,o,i,n){var s=t.getValue(),a=$("<input type='checkbox'/>");return a.css({"margin-top":"5px","box-sizing":"border-box"}).val(s),e(function(){a.focus()}),!0===s||"true"===s||"True"===s||1===s?a.prop("checked",!0):a.prop("checked",!1),a.on("change blur",function(t){o(a.is(":checked"))}),a.on("keydown",function(t){13==t.keyCode&&o(a.is(":checked"))}),a}},Tabulator.registerExtension("edit",f);var m=function(t){this.table=t,this.filterList=[],this.headerFilters={},this.headerFilterElements=[],this.changed=!1};m.prototype.initializeColumn=function(t){function e(t){var e,o="input"==l&&"text"==u?"partial":"match";if(t){switch(o){case"partial":e=function(e){return String(e[h]).toLowerCase().indexOf(String(t).toLowerCase())>-1};break;default:e=function(e){return e[h]==t}}c.headerFilters[h]={value:t,func:e}}else delete c.headerFilters[h];c.changed=!0,c.table.rowManager.filterRefresh()}function o(){}var i,n,s,a,r,l,u,c=this,h=t.getField();if(h){switch(i=$("<div class='tabulator-header-filter'></div>"),_typeof(t.definition.headerFilter)){case"string":c.table.extensions.edit.editors[t.definition.headerFilter]?n=c.table.extensions.edit.editors[t.definition.headerFilter]:console.warn("Filter Error - Build header filter, No such editor found: ",t.definition.editor);break;case"function":n=t.definition.editor;break;case"boolean":t.extensions.edit&&t.extensions.edit.editor?n=t.extensions.edit.editor:console.warn("Filter Error - Cannot auto detect editor element, none set")}n&&(a={getValue:function(){return""},getElement:function(){return i}},s=n.call(c,a,function(){},e,o,t.definition.headerFilterParams||{}),t.definition.field?c.table.extensions.localize.bind("headerFilters.columns."+t.definition.field,function(t){s.attr("placeholder",void 0!==t&&t?t:c.table.extensions.localize.getText("headerFilters.default"))}):c.table.extensions.localize.bind("headerFilters.default",function(t){s.attr("placeholdder",void 0!==c.column.definition.headerFilterPlaceholder&&c.column.definition.headerFilterPlaceholder?c.column.definition.headerFilterPlaceholder:t)}),s.on("click",function(t){t.stopPropagation(),$(this).focus()}),r=!1,s.on("keyup search",function(t){var o=$(this);r&&clearTimeout(r),r=setTimeout(function(){e(o.val())},300)}),u=s.attr("type")?s.attr("type").toLowerCase():"","number"==u&&s.on("change",function(t){e($(this).val())}),"text"==u&&(s.attr("type","search"),s.off("change blur")),l=s.prop("tagName").toLowerCase(),"input"!=l&&"select"!=l||s.on("mousedown",function(t){t.stopPropagation()}),i.append(s),t.contentElement.append(i),c.headerFilterElements.push(s))}else console.warn("Filter Error - Cannot add header filter, column has no field set:",t.definition.title)},m.prototype.hasChanged=function(){var t=this.changed;return this.changed=!1,t},m.prototype.setFilter=function(t,e,o){var i=this;i.filterList=[],Array.isArray(t)||(t=[{field:t,type:e,value:o}]),i.addFilter(t)},m.prototype.addFilter=function(t,e,o){var i=this;Array.isArray(t)||(t=[{field:t,type:e,value:o}]),t.forEach(function(t){var e=!1;"function"==typeof t.field?e=t.field:i.filters[t.type]?e=function(e){return i.filters[t.type](t.value,e[t.field])}:console.warn("Filter Error - No such filter type found, ignoring: ",t.type),e&&(t.func=e,i.filterList.push(t),i.changed=!0)})},m.prototype.getFilter=function(){var t=this,e=[];return t.filterList.forEach(function(t){e.push({field:t.field,type:t.type,value:t.value})}),e},m.prototype.removeFilter=function(t,e,o){var i=this;Array.isArray(t)||(t=[{field:t,type:e,value:o}]),t.forEach(function(t){var e=-1;e="object"==_typeof(t.field)?i.filterList.findIndex(function(e){return t===e}):i.filterList.findIndex(function(e){return t.field===e.field&&t.type===e.type&&t.value===e.value}),e>-1?(i.filterList.splice(e,1),i.changed=!0):console.warn("Filter Error - No matching filter type found, ignoring: ",t.type)})},m.prototype.clearFilter=function(t){this.filterList=[],t&&this.clearHeaderFilter(),this.changed=!0},m.prototype.clearHeaderFilter=function(){this.headerFilters={},this.headerFilterElements.forEach(function(t){t.val("")}),self.changed=!0},m.prototype.filter=function(t){var e=this,o=[],i=[];return e.table.options.dataFiltering&&e.table.options.dataFiltering(e.getFilter()),e.table.options.ajaxFiltering||!e.filterList.length&&!Object.keys(e.headerFilters).length?o=t.slice(0):t.forEach(function(t){e.filterRow(t)&&o.push(t)}),e.table.options.dataFiltered&&(o.forEach(function(t){i.push(t.getComponent())}),e.table.options.dataFiltered(e.getFilter(),i)),o},m.prototype.filterRow=function(t){var e=this,o=!0,i=t.getData();e.filterList.forEach(function(t){t.func(i)||(o=!1)});for(var n in e.headerFilters)e.headerFilters[n].func(i)||(o=!1);return o},m.prototype.filters={"=":function(t,e){return e==t},"<":function(t,e){return e<t},"<=":function(t,e){return e<=t},">":function(t,e){return e>t},">=":function(t,e){return e>=t},"!=":function(t,e){return e!=t},like:function(t,e){return null===t?e===t:e.toLowerCase().indexOf(t.toLowerCase())>-1}},Tabulator.registerExtension("filter",m);var g=function(t){this.table=t};g.prototype.initializeColumn=function(t){var e=this,o={params:t.definition.formatterParams||{}};switch(_typeof(t.definition.formatter)){case"string":e.formatters[t.definition.formatter]?o.formatter=e.formatters[t.definition.formatter]:(console.warn("Formatter Error - No such formatter found: ",t.definition.formatter),o.formatter=e.formatters.plaintext);break;case"function":o.formatter=t.definition.formatter;break;default:o.formatter=e.formatters.plaintext}t.extensions.format=o},g.prototype.formatValue=function(t){return t.column.extensions.format.formatter.call(this,t.getComponent(),t.column.extensions.format.params)},g.prototype.sanitizeHTML=function(t){if(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(t).replace(/[&<>"'`=\/]/g,function(t){return e[t]})}return t},g.prototype.emptyToSpace=function(t){return null===t?"&nbsp":t},g.prototype.formatters={plaintext:function(t,e){return this.emptyToSpace(this.sanitizeHTML(t.getValue()))},html:function(t,e){return t.getValue()},textarea:function(t,e){return t.getElement().css({"white-space":"pre-wrap"}),this.emptyToSpace(this.sanitizeHTML(t.getValue()))},money:function(t,e){var o,i,n,s,a=parseFloat(t.getValue()),r=e.decimal||".",l=e.thousand||",",u=e.symbol||"",c=!!e.symbolAfter,h=void 0!==e.precision?e.precision:2;if(isNaN(a))return this.emptyToSpace(this.sanitizeHTML(t.getValue()));for(o=!1!==h?a.toFixed(h):a,o=o.split("."),i=o[0],n=o.length>1?r+o[1]:"",s=/(\d+)(\d{3})/;s.test(i);)i=i.replace(s,"$1"+l+"$2");return c?i+n+u:u+i+n},email:function(t,e){var o=this.sanitizeHTML(t.getValue());return"<a href='mailto:"+o+"'>"+this.emptyToSpace(o)+"</a>"},link:function(t,e){var o=this.sanitizeHTML(t.getValue());return"<a href='"+o+"'>"+this.emptyToSpace(o)+"</a>"},image:function(t,e){return"<img src='"+this.sanitizeHTML(t.getValue())+"'/>"},tick:function(t,e){var o=t.getValue(),i=t.getElement();return!0===o||"true"===o||"True"===o||1===o||"1"===o?(i.attr("aria-checked",!0),'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>'):(i.attr("aria-checked",!1),"")},tickCross:function(t,e){var o=t.getValue(),i=t.getElement();return!0===o||"true"===o||"True"===o||1===o||"1"===o?(i.attr("aria-checked",!0),'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>'):(i.attr("aria-checked",!1),'<svg enable-background="new 0 0 24 24" height="14" width="14"  viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>')},star:function(t,e){var o=t.getValue(),i=t.getElement(),n=e&&e.stars?e.stars:5,s=$("<span style='vertical-align:middle;'></span>"),a=$('<svg width="14" height="14" viewBox="0 0 512 512" xml:space="preserve" style="margin:0 1px;"><polygon fill="#FFEA00" stroke="#C1AB60" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/></svg>'),r=$('<svg width="14" height="14" viewBox="0 0 512 512" xml:space="preserve" style="margin:0 1px;"><polygon fill="#D2D2D2" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/></svg>');o=parseInt(o)<n?parseInt(o):n;for(var l=1;l<=n;l++){var u=l<=o?a:r;s.append(u.clone())}return i.css({"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}),i.attr("aria-label",o),s.html()},progress:function(t,e){var o,i=this.sanitizeHTML(t.getValue())||0,n=t.getElement(),s=e&&e.max?e.max:100,a=e&&e.min?e.min:0,r=e&&e.color?e.color:"#2DC214";return i=parseFloat(i)<=s?parseFloat(i):s,i=parseFloat(i)>=a?parseFloat(i):a,o=(s-a)/100,i=100-Math.round((i-a)/o),n.css({"min-width":"30px",position:"relative"}),n.attr("aria-label",i),"<div style='position:absolute; top:8px; bottom:8px; left:4px; right:"+i+"%; margin-right:4px; background-color:"+r+"; display:inline-block;' data-max='"+s+"' data-min='"+a+"'></div>"},color:function(t,e){return t.getElement().css({"background-color":this.sanitizeHTML(t.getValue())}),""},buttonTick:function(t,e){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>'},buttonCross:function(t,e){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>'},rownum:function(t,e){return this.table.rowManager.activeRows.indexOf(t.getRow()._getSelf())+1},handle:function(t,e){return t.getElement().addClass("tabulator-row-handle"),"<div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div>"}},Tabulator.registerExtension("format",g);var v=function(t){this.table=t,this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.initializationMode="left",this.active=!1};v.prototype.reset=function(){this.initializationMode="left",this.leftColumns=[],this.rightColumns=[],this.active=!1},v.prototype.initializeColumn=function(t){var e={margin:0,edge:!1};t.definition.frozen?t.parent.isGroup?console.warn("Frozen Column Error - Grouped columns cannot be frozen"):t.isGroup?console.warn("Frozen Column Error - Column Groups cannot be frozen"):(e.position=this.initializationMode,"left"==this.initializationMode?this.leftColumns.push(t):this.rightColumns.unshift(t),this.active=!0,t.extensions.frozen=e):this.initializationMode="right"},v.prototype.layout=function(){var t=this,e=this.table.rowManager.element,o=0;t.active&&(t.leftMargin=t._calcSpace(t.leftColumns,t.leftColumns.length),t.table.columnManager.element.css("padding-left",t.leftMargin),t.rightMargin=t._calcSpace(t.rightColumns,t.rightColumns.length),t.table.columnManager.element.css("padding-right",t.rightMargin),t.table.rowManager.getRows().forEach(function(e){t.layoutRow(e)}),t.leftColumns.forEach(function(e,o){e.extensions.frozen.margin=t._calcSpace(t.leftColumns,o)+t.table.columnManager.scrollLeft,o==t.leftColumns.length-1?e.extensions.frozen.edge=!0:e.extensions.frozen.edge=!1,t.layoutColumn(e)}),o=t.table.rowManager.element.innerWidth()+t.table.columnManager.scrollLeft,e[0].scrollHeight>e.innerHeight()&&(o-=e[0].offsetWidth-e[0].clientWidth),t.rightColumns.forEach(function(e,i){e.extensions.frozen.margin=o-t._calcSpace(t.rightColumns,i+1),i==t.rightColumns.length-1?e.extensions.frozen.edge=!0:e.extensions.frozen.edge=!1,t.layoutColumn(e)}))},v.prototype.layoutColumn=function(t){var e=this;e.layoutElement(t.element,t),t.cells.forEach(function(o){e.layoutElement(o.element,t)})},v.prototype.layoutRow=function(t){t.getElement().css({"padding-left":this.leftMargin,"padding-right":this.rightMargin})},v.prototype.layoutElement=function(t,e){if(e.extensions.frozen){var o={position:"absolute",left:e.extensions.frozen.margin};t.css(o),t.addClass("tabulator-frozen"),e.extensions.frozen.edge&&t.addClass("tabulator-frozen-"+e.extensions.frozen.position)}},v.prototype._calcSpace=function(t,e){for(var o=0,i=0;i<e;i++)t[i].visible&&(o+=t[i].getWidth());return o},Tabulator.registerExtension("frozenColumns",v);var b=function(t){return{type:"GroupComponent",getKey:function(){return t.key},getElement:function(){return t.element},getRows:function(){var e=[];return t.rows.forEach(function(t){e.push(t.getComponent())}),e},getVisibility:function(){return t.visible},show:function(){t.show()},hide:function(){t.hide()},toggle:function(){t.toggleVisibility()},_getSelf:function(){return t}}},x=function(t,e,o,i){this.key=e,this.parent=t,this.type="group",this.rows=[],this.generator=o,this.element=$("<div class='tabulator-row tabulator-group' role='rowgroup'></div>"),this.arrowElement=$("<div class='tabulator-arrow'></div>"),this.height=0,this.outerHeight=0,this.initialized=!1,this.visible=i,this.addBindings()};x.prototype.addBindings=function(){var t=this;t.arrowElement.on("click",function(e){e.stopPropagation(),e.stopImmediatePropagation(),t.toggleVisibility()})},x.prototype.addRow=function(t){this.rows.push(t)},x.prototype.getRows=function(){return this._visSet(),this.visible?this.rows:[]},x.prototype.getRowCount=function(){return this.rows.length},x.prototype.toggleVisibility=function(){this.visible?this.hide():this.show()},x.prototype.hide=function(){this.visible=!1,"classic"==this.parent.table.rowManager.getRenderMode()?this.rows.forEach(function(t){t.getElement().detach()}):this.parent.updateGroupRows(!0),this.parent.table.options.groupVisibilityChanged(this.getComponent(),!1)},x.prototype.show=function(){var t=this;t.visible=!0,"classic"==this.parent.table.rowManager.getRenderMode()?t.rows.forEach(function(e){t.getElement().after(e.getElement()),e.initialize()}):this.parent.updateGroupRows(!0),this.parent.table.options.groupVisibilityChanged(this.getComponent(),!0)},x.prototype._visSet=function(){var t=[];"function"==typeof this.visible&&(this.rows.forEach(function(e){t.push(e.getData())}),this.visible=this.visible(this.key,this.getRowCount(),t))},x.prototype.getElement=function(){this.addBindingsd=!1,this._visSet();var t=[];return this.rows.forEach(function(e){t.push(e.getData())}),this.visible?this.element.addClass("tabulator-group-visible"):this.element.removeClass("tabulator-group-visible"),this.element.children().detach(),this.element.html(this.generator(this.key,this.getRowCount(),t)).prepend(this.arrowElement),this.addBindings(),this.element},x.prototype.normalizeHeight=function(){this.setHeight(this.element.innerHeight())},x.prototype.initialize=function(t){this.initialized&&!t||(this.normalizeHeight(),this.initialized=!0)},x.prototype.reinitialize=function(){this.initialized=!1,this.height=0,this.element.is(":visible")&&this.initialize(!0)},x.prototype.setHeight=function(t){this.height!=t&&(this.height=t,this.outerHeight=this.element.outerHeight())},x.prototype.getHeight=function(){return this.outerHeight},x.prototype.getComponent=function(){return new b(this)};var w=function(t){this.table=t,this.findGroupId=!1,this.startOpen=function(){return!1},this.headerGenerator=function(t,e,o){return t+"<span>("+e+" "+(1===e?"item":"items")+")</span>"},this.groupList=[],this.groups={}};w.prototype.initialize=function(){var t=this;"function"==typeof t.table.options.groupBy?t.findGroupId=t.table.options.groupBy:t.findGroupId=function(e){return e[t.table.options.groupBy]},t.table.options.groupStartOpen&&(t.startOpen="function"==typeof t.table.options.groupStartOpen?t.table.options.groupStartOpen:function(){return!0}),t.table.options.groupHeader&&(t.headerGenerator=t.table.options.groupHeader)},w.prototype.getRows=function(t){var e=this,o=e.groups;return e.groups={},e.groupList=[],e.findGroupId?(e.table.options.dataGrouping(),t.forEach(function(t){var i=e.findGroupId(t.getData());if(!e.groups[i]){var n=new x(e,i,e.headerGenerator,o[i]?o[i].visible:e.startOpen);e.groups[i]=n,e.groupList.push(n)}e.groups[i].addRow(t)}),e.table.options.dataGrouped&&(e.groupList.forEach(function(t){e.groupComponents.push(t.getComponent())}),e.table.options.dataGrouped(groupList)),e.updateGroupRows()):t.slice(0)},w.prototype.updateGroupRows=function(t){var e,o=this,i=[];return o.groupList.forEach(function(t){i.push(t),t.getRows().forEach(function(t){i.push(t)})}),t&&(e=o.table.rowManager.displayRowsCount,o.table.rowManager.setDisplayRows(i),o.table.rowManager._virtualRenderFill(Math.floor(o.table.rowManager.element.scrollTop()/o.table.rowManager.element[0].scrollHeight*e))),i},w.prototype.scrollHeaders=function(t){this.groupList.forEach(function(e){e.arrowElement.css("margin-left",t)})},Tabulator.registerExtension("groupRows",w);var y=function(t){this.table=t,this.history=[],this.index=-1};y.prototype.clear=function(){this.history=[],this.index=-1},y.prototype.action=function(t,e,o){this.index>-1&&(this.history=this.history.slice(0,this.index+1)),this.history.push({type:t,component:e,data:o}),this.index++},y.prototype.undo=function(){if(this.index>-1){var t=this.history[this.index];return this.undoers[t.type].call(this,t),this.index--,!0}return console.warn("History Undo Error - No more history to undo"),!1},y.prototype.redo=function(){if(this.history.length-1>this.index){this.index++;var t=this.history[this.index];return this.redoers[t.type].call(this,t),!0}return console.warn("History Redo Error - No more history to redo"),!1},y.prototype.undoers={cellEdit:function(t){t.component.setValueProcessData(t.data.oldValue)},rowAdd:function(t){t.component.delete()},rowDelete:function(t){var e=this.table.rowManager.addRowActual(t.data.data,t.data.pos,t.data.index);this._rebindRow(t.component,e)}},y.prototype.redoers={cellEdit:function(t){t.component.setValueProcessData(t.data.newValue)},rowAdd:function(t){var e=this.table.rowManager.addRowActual(t.data.data,t.data.pos,t.data.index);this._rebindRow(t.component,e)},rowDelete:function(t){t.component.delete()}},y.prototype._rebindRow=function(t,e){this.history.forEach(function(o){if(o.component instanceof a)o.component===t&&(o.component=e);else if(o.component instanceof l&&o.component.row===t){var i=o.component.column.getField();i&&(o.component=e.getCell(i))}})},Tabulator.registerExtension("history",y);var C=function(t){this.table=t};C.prototype.parseTable=function(){var t=this,e=t.table.element,o=t.table.options,i=(o.columns,$("th",e)),n=$("tbody tr",e),s=[];t.table.options.htmlImporting(),t._extractOptions(e,o),i.length?t._extractHeaders(e):t._generateBlankHeaders(e),n.each(function(t){var e={};e[o.index]=t,$("td",$(this)).each(function(t){e[$(this).data("field")]=$(this).html()}),s.push(e)});var a=$("<div></div>"),r=e.prop("attributes");$.each(r,function(){a.attr(this.name,this.value)}),e.replaceWith(a),o.data=s,t.table.options.htmlImported(),a.tabulator(o)},C.prototype._extractOptions=function(t,e){var o=this,i=t[0].attributes;for(var n in i){var s,a=i[n];if(a&&a.name&&0===a.name.indexOf("tabulator-")){s=a.name.replace("tabulator-","");for(var r in e)r.toLowerCase()==s&&(e[r]=o._attribValue(a.value))}}},C.prototype._attribValue=function(t){return"true"===t||"false"!==t&&t},C.prototype._findCol=function(t){return this.table.options.columns.find(function(e){return e.title===t})||!1},C.prototype._extractHeaders=function(t){var e=this,o=$("th",t),i=$("tbody tr",t);o.each(function(t){var o,n,s=$(this),a=!1,r=e._findCol(s.text()),l=["title","field","align","width","minWidth","frozen","sortable","sorter","formatter","cellClick","cellDblClick","cellContext","editable","editor","visible","cssClass","tooltip","tooltipHeader","editableTitle","headerFilter","mutator","mutateType","accessor"];r?a=!0:r={title:s.text()},r.field||(r.field=s.text().toLowerCase().replace(" ","_")),$("td:eq("+t+")",i).data("field",r.field),o=s.attr("width"),o&&!r.width&&(r.width=o),r.field==e.table.options.index&&(hasIndex=!0),n=s[0].attributes;for(var t in n){var u,c=n[t];c&&c.name&&0===c.name.indexOf("tabulator-")&&(u=c.name.replace("tabulator-",""),l.forEach(function(t){t.toLowerCase()==u&&(r[t]=e._attribValue(c.value))}))}a||e.table.options.columns.push(r)})},C.prototype._generateBlankHeaders=function(t){var e=this;$("tr:first td",t).each(function(t){var o={title:"",field:"col"+t};$("td:eq("+t+")",rows).data("field",o.field);var i=$(this).attr("width");i&&(o.width=i),e.table.options.columns.push(o)})},Tabulator.registerExtension("htmlTableImport",C);var E=function(t){this.table=t,this.activeBindings={},this.watchKeys={},this.pressedKeys=[]};E.prototype.initialize=function(){var t=this.table.options.keybindings;if(!1!==t){if(t.length)for(var e in t)this.bindings[e]=t[e];this.mapBindings(),this.bindEvents()}},E.prototype.mapBindings=function(){var t=this,e=this;for(var o in this.bindings)!function(o){if(t.actions[o]){var i=t.bindings[o].toString(),n={action:t.actions[o],keys:[],ctrl:!1,shift:!1};i=i.toLowerCase().split(" ").join("").split("+"),i.forEach(function(t){switch(t){case"ctrl":n.ctrl=!0;break;case"shift":n.shift=!0;break;default:t=parseInt(t),n.keys.push(t),e.watchKeys[t]||(e.watchKeys[t]=[]),e.watchKeys[t].push(o)}}),t.activeBindings[o]=n}else console.warn("Key Binding Error - no such action:",o)}(o)},E.prototype.bindEvents=function(){var t=this;this.table.element.on("keydown",function(e){var o=e.keyCode,i=t.watchKeys[o];i&&(t.pressedKeys.push(o),i.forEach(function(o){t.checkBinding(e,t.activeBindings[o])}))}),this.table.element.on("keyup",function(e){var o=e.keyCode;if(t.watchKeys[o]){var i=t.pressedKeys.indexOf(o);i>-1&&t.pressedKeys.splice(i,1)}})},E.prototype.checkBinding=function(t,e){var o=this,i=!0;return t.ctrlKey==e.ctrl&&t.shiftKey==e.shift&&(e.keys.forEach(function(t){-1==o.pressedKeys.indexOf(t)&&(i=!1)}),i&&e.action.call(o,t),!0)},E.prototype.bindings={navPrev:"shift + 9",navNext:9,navUp:38,navDown:40,undo:"ctrl + 90",redo:"ctrl + 89"},E.prototype.actions={navPrev:function(t){var e=!1;this.table.extExists("edit")&&(e=this.table.extensions.edit.currentCell)&&(t.preventDefault(),e.nav().prev())},navNext:function(t){var e=!1;this.table.extExists("edit")&&(e=this.table.extensions.edit.currentCell)&&(t.preventDefault(),e.nav().next())},navLeft:function(t){var e=!1;this.table.extExists("edit")&&(e=this.table.extensions.edit.currentCell)&&(t.preventDefault(),e.nav().left())},navRight:function(t){var e=!1;this.table.extExists("edit")&&(e=this.table.extensions.edit.currentCell)&&(t.preventDefault(),e.nav().right())},navUp:function(t){var e=!1;this.table.extExists("edit")&&(e=this.table.extensions.edit.currentCell)&&(t.preventDefault(),e.nav().up())},navDown:function(t){var e=!1;this.table.extExists("edit")&&(e=this.table.extensions.edit.currentCell)&&(t.preventDefault(),e.nav().down())},undo:function(t){this.table.options.history&&this.table.extExists("history")&&this.table.extExists("edit")&&(this.table.extensions.edit.currentCell||(t.preventDefault(),this.table.extensions.history.undo()))},redo:function(t){this.table.options.history&&this.table.extExists("history")&&this.table.extExists("edit")&&(this.table.extensions.edit.currentCell||(t.preventDefault(),this.table.extensions.history.redo()))}},Tabulator.registerExtension("keybindings",E);var R=function(t){this.table=t,this.placeholderElement=$("<div class='tabulator-col tabulator-col-placeholder'></div>"),this.hoverElement=$(),this.checkTimeout=!1,this.checkPeriod=250,this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.startX=0,this.autoScrollMargin=40,this.autoScrollStep=5,this.autoScrollTimeout=!1,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this)};R.prototype.initializeColumn=function(t){var e=this,o={};t.extensions.frozen||(o.mousemove=function(o){t.parent===e.moving.parent&&(o.pageX-t.element.offset().left+e.table.columnManager.element.scrollLeft()>t.getWidth()/2?e.toCol===t&&e.toColAfter||(t.element.after(e.placeholderElement),e.moveColumn(t,!0)):(e.toCol!==t||e.toColAfter)&&(t.element.before(e.placeholderElement),e.moveColumn(t,!1)))}.bind(e),t.getElement().on("mousedown",function(o){e.checkTimeout=setTimeout(function(){e.startMove(o,t)},e.checkPeriod)}),t.getElement().on("mouseup",function(t){e.checkTimeout&&clearTimeout(e.checkTimeout)})),t.extensions.moveColumn=o},R.prototype.startMove=function(t,e){var o=this,i=e.getElement();o.moving=e,o.startX=t.pageX-i.offset().left,o.table.element.addClass("tabulator-block-select"),o.placeholderElement.css({width:e.getWidth(),height:e.getHeight()}),i.before(o.placeholderElement),i.detach(),o.hoverElement=i.clone(),o.hoverElement.addClass("tabulator-moving"),o.table.columnManager.getElement().append(o.hoverElement),o.hoverElement.css({left:0,bottom:0}),o._bindMouseMove(),$("body").on("mousemove",o.moveHover),$("body").on("mouseup",o.endMove),o.moveHover(t)},R.prototype._bindMouseMove=function(){this.table.columnManager.columnsByIndex.forEach(function(t){t.extensions.moveColumn.mousemove&&t.element.on("mousemove",t.extensions.moveColumn.mousemove)})},R.prototype._unbindMouseMove=function(){this.table.columnManager.columnsByIndex.forEach(function(t){t.extensions.moveColumn.mousemove&&t.element.off("mousemove",t.extensions.moveColumn.mousemove)})},R.prototype.moveColumn=function(t,e){var o=this,i=this.moving.getCells();o.toCol=t,o.toColAfter=e,e?t.getCells().forEach(function(t,e){t.getElement().after(i[e].getElement())}):t.getCells().forEach(function(t,e){t.getElement().before(i[e].getElement())})},
R.prototype.endMove=function(t){var e=this;e._unbindMouseMove(),e.placeholderElement.after(e.moving.getElement()),e.placeholderElement.detach(),e.hoverElement.detach(),e.table.element.removeClass("tabulator-block-select"),e.toCol&&e.table.columnManager.moveColumn(e.moving,e.toCol,e.toColAfter),e.moving=!1,e.toCol=!1,e.toColAfter=!1,$("body").off("mousemove",e.moveHover),$("body").off("mouseup",e.endMove)},R.prototype.moveHover=function(t){var e,o=this,i=o.table.columnManager.getElement(),n=i.scrollLeft(),s=t.pageX-i.offset().left+n;o.hoverElement.css({left:s-o.startX}),s-n<o.autoScrollMargin&&(o.autoScrollTimeout||(o.autoScrollTimeout=setTimeout(function(){e=Math.max(0,n-5),o.table.rowManager.getElement().scrollLeft(e),o.autoScrollTimeout=!1},1))),n+i.innerWidth()-s<o.autoScrollMargin&&(o.autoScrollTimeout||(o.autoScrollTimeout=setTimeout(function(){e=Math.min(i.innerWidth(),n+5),o.table.rowManager.getElement().scrollLeft(e),o.autoScrollTimeout=!1},1)))},Tabulator.registerExtension("moveColumn",R);var D=function(t){this.table=t,this.placeholderElement=$("<div class='tabulator-row tabulator-row-placeholder'></div>"),this.hoverElement=$(),this.checkTimeout=!1,this.checkPeriod=150,this.moving=!1,this.toRow=!1,this.toRowAfter=!1,this.hasHandle=!1,this.startY=0,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this)};D.prototype.setHandle=function(t){this.hasHandle=t},D.prototype.initializeRow=function(t){var e=this,o={};o.mousemove=function(o){o.pageY-t.element.offset().top+e.table.rowManager.element.scrollTop()>t.getHeight()/2?e.toRow===t&&e.toRowAfter||(t.element.after(e.placeholderElement),e.moveRow(t,!0)):(e.toRow!==t||e.toRowAfter)&&(t.element.before(e.placeholderElement),e.moveRow(t,!1))}.bind(e),this.hasHandle||(t.getElement().on("mousedown",function(o){e.checkTimeout=setTimeout(function(){e.startMove(o,t)},e.checkPeriod)}),t.getElement().on("mouseup",function(t){e.checkTimeout&&clearTimeout(e.checkTimeout)})),t.extensions.moveRow=o},D.prototype.initializeCell=function(t){var e=this;t.getElement().on("mousedown",function(o){e.checkTimeout=setTimeout(function(){e.startMove(o,t.row)},e.checkPeriod)}),t.getElement().on("mouseup",function(t){e.checkTimeout&&clearTimeout(e.checkTimeout)})},D.prototype._bindMouseMove=function(){this.table.rowManager.displayRows.forEach(function(t){t.extensions.moveRow.mousemove&&t.element.on("mousemove",t.extensions.moveRow.mousemove)})},D.prototype._unbindMouseMove=function(){this.table.rowManager.displayRows.forEach(function(t){t.extensions.moveRow.mousemove&&t.element.off("mousemove",t.extensions.moveRow.mousemove)})},D.prototype.startMove=function(t,e){var o=this,i=e.getElement();o.moving=e,o.startY=t.pageY-i.offset().top,o.table.element.addClass("tabulator-block-select"),o.placeholderElement.css({width:e.getWidth(),height:e.getHeight()}),i.before(o.placeholderElement),i.detach(),o.hoverElement=i.clone(),o.hoverElement.addClass("tabulator-moving"),o.table.rowManager.getTableElement().append(o.hoverElement),o.hoverElement.css({left:0,top:0}),o._bindMouseMove(),$("body").on("mousemove",o.moveHover),$("body").on("mouseup",o.endMove),o.moveHover(t)},D.prototype.endMove=function(t){var e=this;e._unbindMouseMove(),e.placeholderElement.after(e.moving.getElement()),e.placeholderElement.detach(),e.hoverElement.detach(),e.table.element.removeClass("tabulator-block-select"),e.toRow&&e.table.rowManager.moveRow(e.moving,e.toRow,e.toRowAfter),e.moving=!1,e.toRow=!1,e.toRowAfter=!1,$("body").off("mousemove",e.moveHover),$("body").off("mouseup",e.endMove)},D.prototype.moveRow=function(t,e){var o=this;o.toRow=t,o.toRowAfter=e},D.prototype.moveHover=function(t){var e=this,o=e.table.rowManager.getElement(),i=o.scrollTop(),n=t.pageY-o.offset().top+i;e.hoverElement.css({top:n-e.startY})},Tabulator.registerExtension("moveRow",D);var M=function(t){this.table=t};M.prototype.initializeColumn=function(t){var e={mutator:!1,type:t.definition.mutateType,params:t.definition.mutatorParams||{}};switch(_typeof(t.definition.mutator)){case"string":this.mutators[t.definition.mutator]?e.mutator=this.mutators[t.definition.mutator]:console.warn("Mutator Error - No such mutator found, ignoring: ",t.definition.mutator);break;case"function":e.mutator=t.definition.mutator}e.mutator&&(t.extensions.mutate=e)},M.prototype.transformRow=function(t){return this.table.columnManager.traverse(function(e){var o;e.extensions.mutate&&(o=e.getField(),void 0!==t[o]&&"edit"!=e.extensions.mutate.type&&(t[o]=e.extensions.mutate.mutator(t[o],t,"data",e.extensions.mutate.params)))}),t},M.prototype.transformCell=function(t,e){return t.column.extensions.mutate.mutator(e,t.row.getData(),"edit",t.column.extensions.mutate.params)},M.prototype.mutators={},Tabulator.registerExtension("mutator",M);var k=function(t){this.table=t,this.element=$("<span class='tabulator-paginator'></span>"),this.pagesElement=$("<span class='tabulator-pages'></span>"),this.firstBut=$("<button class='tabulator-page' data-page='first' role='button' aria-label='' title=''></button>"),this.prevBut=$("<button class='tabulator-page' data-page='prev' role='button' aria-label='' title=''></button>"),this.nextBut=$("<button class='tabulator-page' data-page='next' role='button' aria-label='' title=''></button>"),this.lastBut=$("<button class='tabulator-page' data-page='last' role='button' aria-label='' title=''></button>"),this.mode="local",this.size=0,this.page=1,this.max=1,this.paginator=!1};k.prototype.initialize=function(){var t=this;for(var e in t.table.options.paginationDataSent)t.paginationDataSentNames[e]=t.table.options.paginationDataSent[e];for(var o in t.table.options.paginationDataReceived)t.paginationDataReceivedNames[o]=t.table.options.paginationDataReceived[o];t.table.options.paginator&&(t.paginator=t.table.options.paginator),t.table.extensions.localize.bind("pagination.first",function(e){t.firstBut.html(e)}),t.table.extensions.localize.bind("pagination.first_title",function(e){t.firstBut.attr("aria-label",e).attr("title",e)}),t.table.extensions.localize.bind("pagination.prev",function(e){t.prevBut.html(e)}),t.table.extensions.localize.bind("pagination.prev_title",function(e){t.prevBut.attr("aria-label",e).attr("title",e)}),t.table.extensions.localize.bind("pagination.next",function(e){t.nextBut.html(e)}),t.table.extensions.localize.bind("pagination.next_title",function(e){t.nextBut.attr("aria-label",e).attr("title",e)}),t.table.extensions.localize.bind("pagination.last",function(e){t.lastBut.html(e)}),t.table.extensions.localize.bind("pagination.last_title",function(e){t.lastBut.attr("aria-label",e).attr("title",e)}),t.firstBut.on("click",function(){t.setPage(1)}),t.prevBut.on("click",function(){t.previousPage()}),t.nextBut.on("click",function(){t.nextPage()}),t.lastBut.on("click",function(){t.setPage(t.max)}),t.table.options.paginationElement&&(t.element=t.table.options.paginationElement),t.element.append(t.firstBut),t.element.append(t.prevBut),t.element.append(t.pagesElement),t.element.append(t.nextBut),t.element.append(t.lastBut),t.table.options.paginationElement||t.table.footerManager.append(t.element),t.mode=t.table.options.pagination,t.size=t.table.options.paginationSize||Math.floor(t.table.rowManager.getElement().innerHeight()/26)},k.prototype.setMaxRows=function(t){this.max=t?Math.ceil(t/this.size):1,this.page>this.max&&(this.page=this.max)},k.prototype.reset=function(t){return("local"==this.mode||t)&&(this.page=1),!0},k.prototype.setMaxPage=function(t){this.max=t||1,this.page>this.max&&(this.page=this.max,this.trigger())},k.prototype.setPage=function(t){return t>0&&t<=this.max?(this.page=t,this.trigger(),!0):(console.warn("Pagination Error - Requested page is out of range of 1 - "+this.max+":",t),!1)},k.prototype.setPageSize=function(t){t>0&&(this.size=t)},k.prototype._setPageButtons=function(){var t=this,e=this.page<this.max-2?this.page-2:this.page-(4-(this.max-this.page)),o=this.page>3?this.page+2:this.page+(5-this.page);t.pagesElement.empty(),1==t.page?(t.firstBut.prop("disabled",!0),t.prevBut.prop("disabled",!0)):(t.firstBut.prop("disabled",!1),t.prevBut.prop("disabled",!1)),t.page==t.max?(t.lastBut.prop("disabled",!0),t.nextBut.prop("disabled",!0)):(t.lastBut.prop("disabled",!1),t.nextBut.prop("disabled",!1));for(var i=e;i<=o;i++)i>0&&i<=t.max&&t.pagesElement.append(t._generatePageButton(i))},k.prototype._generatePageButton=function(t){var e=this,o=$("<button class='tabulator-page "+(t==e.page?"active":"")+"' data-page='"+t+"' role='button' arpagea-label='Show Page "+t+"'>"+t+"</button>");return o.on("click",function(o){e.setPage(t)}),o},k.prototype.previousPage=function(){return this.page>1?(this.page--,this.trigger(),!0):(console.warn("Pagination Error - Previous page would be less than page 1:",0),!1)},k.prototype.nextPage=function(){return this.page<this.max?(this.page++,this.trigger(),!0):(console.warn("Pagination Error - Next page would be greater than maximum page of "+this.max+":",this.max+1),!1)},k.prototype.getPage=function(){return this.page},k.prototype.getPageMax=function(){return this.max},k.prototype.getMode=function(){return this.mode},k.prototype.getRows=function(t){var e,o,i;if("local"==this.mode){e=[],o=this.size*(this.page-1),i=o+this.size,this._setPageButtons();for(var n=o;n<i;n++)t[n]&&e.push(t[n]);return e}return this._setPageButtons(),t.slice(0)},k.prototype.trigger=function(){switch(this.mode){case"local":this.table.rowManager.refreshActiveData(),this.table.options.pageLoaded(this.getPage());break;case"remote":this._getRemotePage();break;default:console.warn("Pagination Error - no such pagination mode:",this.mode)}},k.prototype._getRemotePage=function(){this.table.extExists("ajax",!0)&&(this.paginator?this._getRemotePagePaginator():this._getRemotePageAuto())},k.prototype._getRemotePagePaginator=function(){var t=this,e=t.table.extensions.ajax,o=e.getUrl();e.setUrl(t.paginator(e.getUrl(),t.page,t.size,e.getParams())),e.sendRequest(function(e){t._parseRemoteData(e)}),e.setUrl(o)},k.prototype._getRemotePageAuto=function(){var t,e,o=this;if(t=$.extend(!0,{},o.table.extensions.ajax.getParams()),e=o.table.extensions.ajax.getParams(),e[this.paginationDataSentNames.page]=o.page,this.size&&(e[this.paginationDataSentNames.size]=this.size),this.table.extExists("sort")){var i=o.table.extensions.sort.getSort();i[0]&&"function"!=typeof i[0].column&&(e[this.paginationDataSentNames.sort]=i[0].column.getField(),e[this.paginationDataSentNames.sort_dir]=i[0].dir)}if(this.table.extExists("filter")){var n=o.table.extensions.filter.getFilter();n[0]&&"string"==typeof n[0].field&&(e[this.paginationDataSentNames.filter]=n[0].field,e[this.paginationDataSentNames.filter_type]=n[0].type,e[this.paginationDataSentNames.filter_value]=n[0].value)}o.table.extensions.ajax.setParams(e),o.table.extensions.ajax.sendRequest(function(t){o._parseRemoteData(t)}),o.table.extensions.ajax.setParams(t)},k.prototype._parseRemoteData=function(t){t[this.paginationDataReceivedNames.last_page]?t[this.paginationDataReceivedNames.data]?(this.max=parseInt(t[this.paginationDataReceivedNames.last_page]),this.table.rowManager.setData(t[this.paginationDataReceivedNames.data]),this.table.options.pageLoaded(this.getPage())):console.warn("Remote Pagination Error - Server response missing '"+this.paginationDataReceivedNames.data+"' property"):console.warn("Remote Pagination Error - Server response missing '"+this.paginationDataReceivedNames.last_page+"' property")},k.prototype.paginationDataSentNames={page:"page",size:"size",sort:"sort",sort_dir:"sort_dir",filter:"filter",filter_value:"filter_value",filter_type:"fitler_type"},k.prototype.paginationDataReceivedNames={current_page:"current_page",last_page:"last_page",data:"data"},Tabulator.registerExtension("page",k);var T=function(t){this.table=t,this.mode="",this.id="",this.persistProps=["field","width","visible"]};T.prototype.initialize=function(t,e){this.mode=!0!==t?t:void 0!==window.localStorage?"local":"cookie",this.id="tabulator-"+(e||this.table.element.attr("id")||"")},T.prototype.load=function(t){var e="";switch(this.mode){case"local":e=localStorage.getItem(this.id);break;case"cookie":var o=document.cookie,i=o.indexOf(this.id+"="),n=void 0;i>-1&&(o=o.substr(i),n=o.indexOf(";"),n>-1&&(o=o.substr(0,n)),e=o.replace(this.id+"=",""));break;default:console.warn("Persistance Load Error - invalid mode selected",this.mode)}return e&&(e=JSON.parse(e),t=this.mergeDefinition(t,e)),t},T.prototype.mergeDefinition=function(t,e){var o=this,i=[];return e.forEach(function(e,n){var s=o._findColumn(t,e);s&&(s.width=e.width,s.visible=e.visible,s.columns&&(s.columns=o.mergeDefinition(s.columns,e.columns)),i.push(s))}),i},T.prototype._findColumn=function(t,e){var o=e.columns?"group":e.field?"field":"object";return t.find(function(t){switch(o){case"group":return t.title===e.title&&t.columns.length===e.columns.length;case"field":return t.field===e.field;case"object":return t===e}})},T.prototype.save=function(){var t=this.parseColumns(this.table.columnManager.getColumns()),e=JSON.stringify(t);switch(this.mode){case"local":localStorage.setItem(this.id,e);break;case"cookie":var o=new Date;o.setDate(o.getDate()+1e4),document.cookie=this.id+"="+e+"; expires="+o.toUTCString();break;default:console.warn("Persistance Save Error - invalid mode selected",this.mode)}},T.prototype.parseColumns=function(t){var e=this,o=[];return t.forEach(function(t){var i={};t.isGroup?(i.title=t.getDefinition().title,i.columns=e.parseColumns(t.getColumns())):(i.field=t.getField(),i.width=t.getWidth(),i.visible=t.visible),o.push(i)}),o},Tabulator.registerExtension("persistentLayout",T);var z=function(t){this.table=t,this.startColumn=!1,this.startX=!1,this.startWidth=!1,this.handle=$("<div class='tabulator-col-resize-handle'></div>"),this.prevHandle=$("<div class='tabulator-col-resize-handle prev'></div>")};z.prototype.initializeColumn=function(t,e){var o=this,i=o.handle.clone(),n=o.prevHandle.clone();i.on("click",function(t){t.stopPropagation()}),n.on("click",function(t){t.stopPropagation()}),i.on("mousedown",function(e){var i=t.getLastColumn();i&&(o.startColumn=t,o._mouseDown(e,i))}),n.on("mousedown",function(e){var i,n,s;(i=t.getFirstColumn())&&(n=o.table.columnManager.findColumnIndex(i),(s=n>0&&o.table.columnManager.getColumnByIndex(n-1))&&(o.startColumn=t,o._mouseDown(e,s)))}),e.append(i).append(n)},z.prototype._mouseDown=function(t,e){function o(t){e.setWidth(n.startWidth+(t.screenX-n.startX))}function i(t){n.startColumn.extensions.edit&&(n.startColumn.extensions.edit.blocked=!1),$("body").off("mouseup",o),$("body").off("mousemove",o),n.table.element.removeClass("tabulator-block-select"),n.table.options.persistentLayout&&n.table.extExists("persistentLayout",!0)&&n.table.extensions.persistentLayout.save(),n.table.options.columnResized(n.startColumn.getComponent())}var n=this;n.table.element.addClass("tabulator-block-select"),t.stopPropagation(),n.startColumn.extensions.edit&&(n.startColumn.extensions.edit.blocked=!0),n.startX=t.screenX,n.startWidth=e.getWidth(),$("body").on("mousemove",o),$("body").on("mouseup",i)},Tabulator.registerExtension("resizeColumns",z);var _=function(t){this.table=t,this.columns=[],this.index=0};_.prototype.initialize=function(){var t=[];this.table.columnManager.columnsByIndex.forEach(function(e){var o=e.getDefinition();e.extensions.responsive={order:void 0===o.responsive?1:o.responsive},e.extensions.responsive.order&&t.push(e)}),t=t.reverse(),t=t.sort(function(t,e){return e.extensions.responsive.order-t.extensions.responsive.order}),this.columns=t},_.prototype.update=function(){for(var t=this,e=!0;e;){var o=t.table.columnManager.element.innerWidth()-t.table.columnManager.getWidth();if(o<0){var i=t.columns[t.index];i?(i.hide(),t.index++):e=!1}else{var n=t.columns[t.index-1];n&&o>0&&o>=n.getWidth()?(n.show(),t.index--):e=!1}t.table.rowManager.activeRowsCount||t.table.rowManager.renderEmptyScroll()}},Tabulator.registerExtension("responsiveLayout",_);var S=function(t){this.table=t,this.selecting=!1,this.selectPrev=[],this.selectedRows=[]};S.prototype.initializeRow=function(t){var e=this,o=t.getElement(),i=function t(){setTimeout(function(){e.selecting=!1},50),$("body").off("mouseup",t)};t.extensions.select={selected:!1},e.table.options.selectableCheck(t.getComponent())?(o.addClass("tabulator-selectable").removeClass("tabulator-unselectable"),e.table.options.selectable&&"highlight"!=e.table.options.selectable&&(o.on("click",function(o){e.selecting||e.toggleRow(t)}),o.on("mousedown",function(o){if(o.shiftKey)return e.selecting=!0,e.selectPrev=[],$("body").on("mouseup",i),$("body").on("keyup",i),e.toggleRow(t),!1}),o.on("mouseenter",function(o){e.selecting&&(e.toggleRow(t),e.selectPrev[1]==t&&e.toggleRow(e.selectPrev[0]))}),o.on("mouseout",function(o){e.selecting&&e.selectPrev.unshift(t)}))):t.getElement().addClass("tabulator-unselectable").removeClass("tabulator-selectable")},S.prototype.toggleRow=function(t){this.table.options.selectableCheck(t.getComponent())&&(t.extensions.select.selected?this._deselectRow(t):this._selectRow(t))},S.prototype.selectRows=function(t){var e=this;void 0===t?(e.table.rowManager.rows.forEach(function(t){e._selectRow(t,!0,!0)}),e._rowSelectionChanged()):Array.isArray(t)?(t.forEach(function(t){e._selectRow(t,!0)}),e._rowSelectionChanged()):e._selectRow(t)},S.prototype._selectRow=function(t,e,o){var i=this;if(!isNaN(i.table.options.selectable)&&!0!==i.table.options.selectable&&!o&&i.selectedRows.length>=i.table.options.selectable){if(!i.table.options.selectableRollingSelection)return!1;i._deselectRow(i.selectedRows[0],!0)}var n=i.table.rowManager.findRow(t);if(n){var i=this;n.extensions.select.selected=!0,n.getElement().addClass("tabulator-selected"),i.selectedRows.push(n),e||(i.table.options.rowSelected(n.getComponent()),i._rowSelectionChanged())}else console.warn("Selection Error - No such row found, ignoring selection:"+t)},S.prototype.deselectRows=function(t){var e=this;if(void 0===t){for(var o=e.selectedRows.length,i=0;i<o;i++)e._deselectRow(e.selectedRows[0],!0);e._rowSelectionChanged()}else Array.isArray(t)?(t.forEach(function(t){e._deselectRow(t,!0)}),e._rowSelectionChanged()):e._deselectRow(t)},S.prototype._deselectRow=function(t,e){var o,i=this,n=i.table.rowManager.findRow(t);n?(o=i.selectedRows.findIndex(function(t){return n}))>-1&&(n.extensions.select.selected=!1,n.getElement().removeClass("tabulator-selected"),i.selectedRows.splice(o,1),e||(i.table.options.rowDeselected(n.getComponent()),i._rowSelectionChanged())):console.warn("Selection Error - No such row found, ignoring selection:"+t)},S.prototype.getSelectedData=function(){var t=[];return this.selectedRows.forEach(function(e){t.push(e.getData())}),t},S.prototype.getSelectedRows=function(){var t=[];return this.selectedRows.forEach(function(e){t.push(e.getComponent())}),t},S.prototype._rowSelectionChanged=function(){this.table.options.rowSelectionChanged(this.getSelectedData(),this.getSelectedRows())},Tabulator.registerExtension("selectRow",S);var L=function(t){this.table=t,this.sortList=[],this.changed=!1};L.prototype.initializeColumn=function(t,e){var o=this,i=!1;switch(_typeof(t.definition.sorter)){case"string":o.sorters[t.definition.sorter]?i=o.sorters[t.definition.sorter]:console.warn("Sort Error - No such sorter found: ",t.definition.sorter);break;case"function":i=t.definition.sorter}t.extensions.sort={sorter:i,dir:"none",params:t.definition.sorterParams||{}},!1!==t.definition.headerSort&&(t.element.addClass("tabulator-sortable"),e.append($("<div class='tabulator-arrow'></div>")),t.element.on("click",function(){t.extensions.sort&&("asc"==t.extensions.sort.dir?o.setSort(t,"desc"):o.setSort(t,"asc"),o.table.rowManager.sorterRefresh())}))},L.prototype.hasChanged=function(){var t=this.changed;return this.changed=!1,t},L.prototype.getSort=function(){var t=this,e=[];return t.sortList.forEach(function(t){t.column&&e.push({column:t.column.getComponent(),field:t.column.getField(),dir:t.dir})}),e},L.prototype.setSort=function(t,e){var o=this,i=[];Array.isArray(t)||(t=[{column:t,dir:e}]),t.forEach(function(t){t.column=o.table.columnManager.findColumn(t.column),t.column?(i.push(t),o.changed=!0):console.warn("Sort Warning - Sort field does not exist and is being ignored: ",t.column)}),o.sortList=i},L.prototype.clear=function(){this.setSort([])},L.prototype.findSorter=function(t){var e,o=this.table.rowManager.activeRows[0],i="string";if(o&&(o=o.getData(),e=t.getField()))switch(_typeof(o[e])){case"undefined":i="string";break;case"boolean":i="boolean";break;default:isNaN(o[e])?o[e].match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)&&(i="alphanum"):i="number"}return this.sorters[i]},L.prototype.sort=function(){var t,e=this;e.table.options.dataSorting&&e.table.options.dataSorting(e.getSort()),e.clearColumnHeaders(),e.table.options.ajaxSorting||e.sortList.forEach(function(t,o){t.column&&t.column.extensions.sort&&(t.column.extensions.sort.sorter||(t.column.extensions.sort.sorter=e.findSorter(t.column)),e._sortItem(t.column,t.dir,e.sortList,o))}),e.sortList.length&&(t=e.sortList[e.sortList.length-1],t.column&&e.setColumnHeader(t.column,t.dir)),e.table.options.dataSorted&&e.table.options.dataSorted(e.getSort())},L.prototype.clearColumnHeaders=function(){this.table.columnManager.getRealColumns().forEach(function(t){t.extensions.sort&&(t.extensions.sort.dir="none",t.element.attr("aria-sort","none"))})},L.prototype.setColumnHeader=function(t,e){this.clearColumnHeaders(),t.extensions.sort.dir=e,t.element.attr("aria-sort",e)},L.prototype._sortItem=function(t,e,o,i){var n=this;n.table.rowManager.activeRows.sort(function(s,a){var r=n._sortRow(s,a,t,e);if(0==r&&i)for(var l=i-1;l>=0&&0==(r=n._sortRow(s,a,o[l].column,o[l].dir));l--);return r})},L.prototype._sortRow=function(t,e,o,i){var n=this,s="asc"==i?t:e,a="asc"==i?e:t;return t=s.getData()[o.getField()],e=a.getData()[o.getField()],o.extensions.sort.sorter.call(n,t,e,s,a,o.getComponent(),i,o.extensions.sort.params)},L.prototype.sorters={number:function(t,e,o,i,n,s,a){return parseFloat(String(t).replace(",",""))-parseFloat(String(e).replace(",",""))},string:function(t,e,o,i,n,s,a){return String(t).toLowerCase().localeCompare(String(e).toLowerCase())},date:function(t,e,o,i,n,s,a){var r=a.format||"DD/MM/YYYY";return"undefined"!=typeof moment?(t=moment(t,r),e=moment(e,r)):console.error("Sort Error - 'date' sorter is dependant on moment.js"),t-e},boolean:function(t,e,o,i,n,s,a){return(!0===t||"true"===t||"True"===t||1===t?1:0)-(!0===e||"true"===e||"True"===e||1===e?1:0)},alphanum:function(t,e,o,i,n,s,a){var r,l,u,c,h,p=0,d=/(\d+)|(\D+)/g,f=/\d/;if(isFinite(t)&&isFinite(e))return t-e;if(r=String(t).toLowerCase(),l=String(e).toLowerCase(),r===l)return 0;if(!f.test(r)||!f.test(l))return r>l?1:-1;for(r=r.match(d),l=l.match(d),h=r.length>l.length?l.length:r.length;p<h;)if(u=r[p],c=l[p++],u!==c)return isFinite(u)&&isFinite(c)?("0"===u.charAt(0)&&(u="."+u),"0"===c.charAt(0)&&(c="."+c),u-c):u>c?1:-1;return r.length>l.length},time:function(t,e,o,i,n,s,a){var r=a.format||"hh:mm";return"undefined"!=typeof moment?(t=moment(t,r),e=moment(e,r)):console.error("Sort Error - 'date' sorter is dependant on moment.js"),t-e}},Tabulator.registerExtension("sort",L)}(),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):t(jQuery)}(function(t,e){t.widget("ui.tabulator",Tabulator)()});