/* Tabulator v4.1.0 (c) Oliver Folkerd */
var DataTree=function(e){this.table=e,this.indent=10,this.field="",this.collapseEl=null,this.expandEl=null,this.branchEl=null};DataTree.prototype.initialize=function(){var e=null,t=this.table.options;this.field=t.dataTreeChildField,this.indent=t.dataTreeChildIndent,t.dataTreeBranchElement&&(!0===t.dataTreeBranchElement?(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch")):"string"==typeof t.dataTreeBranchElement?(e=document.createElement("div"),e.innerHTML=t.dataTreeBranchElement,this.branchEl=e.firstChild):this.branchEl=t.dataTreeBranchElement),t.dataTreeCollapseElement?"string"==typeof t.dataTreeCollapseElement?(e=document.createElement("div"),e.innerHTML=t.dataTreeCollapseElement,this.collapseEl=e.firstChild):this.collapseEl=t.dataTreeCollapseElement:(this.collapseEl=document.createElement("div"),this.collapseEl.classList.add("tabulator-data-tree-control"),this.collapseEl.innerHTML="<div class='tabulator-data-tree-control-collapse'></div>"),t.dataTreeExpandElement?"string"==typeof t.dataTreeExpandElement?(e=document.createElement("div"),e.innerHTML=t.dataTreeExpandElement,this.expandEl=e.firstChild):this.expandEl=t.dataTreeExpandElement:(this.expandEl=document.createElement("div"),this.expandEl.classList.add("tabulator-data-tree-control"),this.expandEl.innerHTML="<div class='tabulator-data-tree-control-expand'></div>")},DataTree.prototype.initializeRow=function(e){e.modules.dataTable={index:0,open:!1,controlEl:!1,branchEl:!1,children:void 0!==e.getData()[this.field]}},DataTree.prototype.layoutRow=function(e){var t=e.getCells()[0],a=t.getElement(),l=e.modules.dataTable;a.style.paddingLeft=parseInt(window.getComputedStyle(a,null).getPropertyValue("padding-left"))+l.index*this.indent+"px",l.branchEl&&l.branchEl.parentNode.removeChild(l.branchEl),this.generateControlElement(e,a),l.index&&this.branchEl&&(l.branchEl=this.branchEl.cloneNode(!0),a.insertBefore(l.branchEl,a.firstChild),a.style.paddingLeft=parseInt(a.style.paddingLeft)+(l.branchEl.offsetWidth+l.branchEl.style.marginRight)*(l.index-1)+"px")},DataTree.prototype.generateControlElement=function(e,t){var a=this,l=e.modules.dataTable,t=t||e.getCells()[0].getElement(),n=l.controlEl;!1!==l.children&&(l.open?(l.controlEl=this.collapseEl.cloneNode(!0),l.controlEl.addEventListener("click",function(){a.collapseRow(e)})):(l.controlEl=this.expandEl.cloneNode(!0),l.controlEl.addEventListener("click",function(){a.expandRow(e)})),n&&n.parentNode===t?n.parentNode.replaceChild(l.controlEl,n):t.insertBefore(l.controlEl,t.firstChild))},DataTree.prototype.expandRow=function(e,t){var a,l=this,n=e.modules.dataTable;Array.isArray(n.children)||(n.children=[],e.getData()[this.field].forEach(function(t){var a=new Row(t||{},l.table.rowManager);a.modules.dataTable.index=e.modules.dataTable.index+1,n.children.push(a)})),a=this.table.rowManager.addRows(n.children.slice(),!1,e),a.then(function(e){e.forEach(function(e){e.modules.dataTable.open&&l.expandRow(e,!0)})}),n.open=!0,t||this.table.options.dataTreeRowExpanded(e.getComponent(),e.modules.dataTable.index),this.generateControlElement(e)},DataTree.prototype.collapseRow=function(e,t){var a=e.modules.dataTable;Array.isArray(a.children)&&(a.children.forEach(function(e){e.delete()}),t||(a.open=!1,this.table.options.dataTreeRowCollapsed(e.getComponent(),e.modules.dataTable.index)),this.generateControlElement(e))},Tabulator.prototype.registerModule("dataTree",DataTree);