{"version":3,"file":"tabulator.js","sources":["../../src/js/core/defaults/options.js","../../src/js/core/column/ColumnComponent.js","../../src/js/core/column/defaults/options.js","../../src/js/core/cell/CellComponent.js","../../src/js/core/cell/Cell.js","../../src/js/core/column/Column.js","../../src/js/core/Helpers.js","../../src/js/core/ColumnManager.js","../../src/js/core/row/RowComponent.js","../../src/js/core/row/Row.js","../../src/js/core/RowManager.js","../../src/js/core/FooterManager.js","../../src/js/core/TableRegistry.js","../../src/js/core/Module.js","../../src/js/modules/Layout/defaults/modes/fitData.js","../../src/js/modules/Layout/defaults/modes/fitDataGeneral.js","../../src/js/modules/Layout/defaults/modes/fitDataStretch.js","../../src/js/modules/Layout/defaults/modes/fitColumns.js","../../src/js/modules/Layout/defaults/modes.js","../../src/js/modules/Layout/Layout.js","../../src/js/modules/Localize/defaults/langs.js","../../src/js/modules/Localize/Localize.js","../../src/js/modules/Comms/Comms.js","../../src/js/core/ModuleBinder.js","../../src/js/core/renderers/VirtualDomHorizontal.js","../../src/js/core/Tabulator.js","../../src/js/modules/Accessor/defaults/accessors.js","../../src/js/modules/Accessor/Accessor.js","../../src/js/modules/Ajax/defaults/config.js","../../src/js/modules/Ajax/defaults/urlGenerator.js","../../src/js/modules/Ajax/defaults/loaderPromise.js","../../src/js/modules/Ajax/defaults/contentTypeFormatters.js","../../src/js/modules/Ajax/Ajax.js","../../src/js/modules/Clipboard/defaults/pasteActions.js","../../src/js/modules/Clipboard/defaults/pasteParsers.js","../../src/js/modules/Clipboard/Clipboard.js","../../src/js/modules/ColumnCalcs/CalcComponent.js","../../src/js/modules/ColumnCalcs/defaults/calculations.js","../../src/js/modules/ColumnCalcs/ColumnCalcs.js","../../src/js/modules/DataTree/DataTree.js","../../src/js/modules/Download/defaults/downloaders/csv.js","../../src/js/modules/Download/defaults/downloaders/json.js","../../src/js/modules/Download/defaults/downloaders/pdf.js","../../src/js/modules/Download/defaults/downloaders/xlsx.js","../../src/js/modules/Download/defaults/downloaders/html.js","../../src/js/modules/Download/defaults/downloaders.js","../../src/js/modules/Download/Download.js","../../src/js/modules/Edit/defaults/editors/input.js","../../src/js/modules/Edit/defaults/editors/textarea.js","../../src/js/modules/Edit/defaults/editors/number.js","../../src/js/modules/Edit/defaults/editors/range.js","../../src/js/modules/Edit/defaults/editors/select.js","../../src/js/modules/Edit/defaults/editors/autocomplete.js","../../src/js/modules/Edit/defaults/editors/star.js","../../src/js/modules/Edit/defaults/editors/progress.js","../../src/js/modules/Edit/defaults/editors/tickCross.js","../../src/js/modules/Edit/defaults/editors.js","../../src/js/modules/Edit/Edit.js","../../src/js/modules/Export/ExportRow.js","../../src/js/modules/Export/ExportColumn.js","../../src/js/modules/Export/Export.js","../../src/js/modules/Filter/defaults/filters.js","../../src/js/modules/Filter/Filter.js","../../src/js/modules/Format/defaults/formatters/plaintext.js","../../src/js/modules/Format/defaults/formatters/html.js","../../src/js/modules/Format/defaults/formatters/textarea.js","../../src/js/modules/Format/defaults/formatters/money.js","../../src/js/modules/Format/defaults/formatters/link.js","../../src/js/modules/Format/defaults/formatters/image.js","../../src/js/modules/Format/defaults/formatters/tickCross.js","../../src/js/modules/Format/defaults/formatters/datetime.js","../../src/js/modules/Format/defaults/formatters/datetimediff.js","../../src/js/modules/Format/defaults/formatters/lookup.js","../../src/js/modules/Format/defaults/formatters/star.js","../../src/js/modules/Format/defaults/formatters/traffic.js","../../src/js/modules/Format/defaults/formatters/progress.js","../../src/js/modules/Format/defaults/formatters/color.js","../../src/js/modules/Format/defaults/formatters/buttonTick.js","../../src/js/modules/Format/defaults/formatters/buttonCross.js","../../src/js/modules/Format/defaults/formatters/rownum.js","../../src/js/modules/Format/defaults/formatters/handle.js","../../src/js/modules/Format/defaults/formatters/responsiveCollapse.js","../../src/js/modules/Format/defaults/formatters/rowSelection.js","../../src/js/modules/Format/defaults/formatters.js","../../src/js/modules/Format/Format.js","../../src/js/modules/FrozenColumns/FrozenColumns.js","../../src/js/modules/FrozenRows/FrozenRows.js","../../src/js/modules/GroupRows/Group.js","../../src/js/modules/GroupRows/GroupRows.js","../../src/js/modules/History/defaults/undoers.js","../../src/js/modules/History/defaults/redoers.js","../../src/js/modules/History/History.js","../../src/js/modules/HtmlTableImport/HtmlTableImport.js","../../src/js/modules/Keybindings/defaults/bindings.js","../../src/js/modules/Keybindings/defaults/actions.js","../../src/js/modules/Keybindings/Keybindings.js","../../src/js/modules/Menu/Menu.js","../../src/js/modules/MoveColumns/MoveColumns.js","../../src/js/modules/MoveRows/MoveRows.js","../../src/js/modules/Mutator/defaults/mutators.js","../../src/js/modules/Mutator/Mutator.js","../../src/js/modules/Page/defaults/dataSentNames.js","../../src/js/modules/Page/defaults/dataReceivedNames.js","../../src/js/modules/Page/Page.js","../../src/js/modules/Persistence/defaults/readers.js","../../src/js/modules/Persistence/defaults/writers.js","../../src/js/modules/Persistence/Persistence.js","../../src/js/modules/Print/Print.js","../../src/js/modules/ReactiveData/ReactiveData.js","../../src/js/modules/ResizeColumns/ResizeColumns.js","../../src/js/modules/ResizeRows/ResizeRows.js","../../src/js/modules/ResizeTable/ResizeTable.js","../../src/js/modules/ResponsiveLayout/ResponsiveLayout.js","../../src/js/modules/SelectRow/SelectRow.js","../../src/js/modules/Sort/defaults/sorters/number.js","../../src/js/modules/Sort/defaults/sorters/string.js","../../src/js/modules/Sort/defaults/sorters/datetime.js","../../src/js/modules/Sort/defaults/sorters/date.js","../../src/js/modules/Sort/defaults/sorters/time.js","../../src/js/modules/Sort/defaults/sorters/boolean.js","../../src/js/modules/Sort/defaults/sorters/array.js","../../src/js/modules/Sort/defaults/sorters/exists.js","../../src/js/modules/Sort/defaults/sorters/alphanum.js","../../src/js/modules/Sort/defaults/sorters.js","../../src/js/modules/Sort/Sort.js","../../src/js/modules/Validate/defaults/validators.js","../../src/js/modules/Validate/Validate.js","../../src/js/core/TabulatorFull.js"],"sourcesContent":["export default {\r\n\theight:false, //height of tabulator\r\n\tminHeight:false, //minimum height of tabulator\r\n\tmaxHeight:false, //maximum height of tabulator\r\n\r\n\tlayout:\"fitData\", ///layout type \"fitColumns\" | \"fitData\"\r\n\tlayoutColumnsOnNewData:false, //update column widths on setData\r\n\r\n\tcolumnMinWidth:40, //minimum global width for a column\r\n\tcolumnMaxWidth:false, //minimum global width for a column\r\n\tcolumnHeaderVertAlign:\"top\", //vertical alignment of column headers\r\n\tcolumnVertAlign:false, // DEPRECATED - Left to allow warning\r\n\r\n\tresizableColumns:true, //resizable columns\r\n\tresizableRows:false, //resizable rows\r\n\tautoResize:true, //auto resize table\r\n\r\n\tcolumns:[],//store for colum header info\r\n\r\n\tcellHozAlign:\"\", //horizontal align columns\r\n\tcellVertAlign:\"\", //vertical align columns\r\n\theaderHozAlign:\"\", //horizontal header alignment\r\n\r\n\tdata:[], //default starting data\r\n\r\n\tautoColumns:false, //build columns from data row structure\r\n\tautoColumnsDefinitions:false,\r\n\r\n\treactiveData:false, //enable data reactivity\r\n\r\n\tnestedFieldSeparator:\".\", //seperatpr for nested data\r\n\r\n\ttooltips: false, //Tool tip value\r\n\ttooltipsHeader: false, //Tool tip for headers\r\n\ttooltipGenerationMode:\"load\", //when to generate tooltips\r\n\r\n\tinitialSort:false, //initial sorting criteria\r\n\tinitialFilter:false, //initial filtering criteria\r\n\tinitialHeaderFilter:false, //initial header filtering criteria\r\n\r\n\tcolumnHeaderSortMulti: true, //multiple or single column sorting\r\n\r\n\tsortOrderReverse:false, //reverse internal sort ordering\r\n\r\n\theaderSort:true, //set default global header sort\r\n\theaderSortTristate:false, //set default tristate header sorting\r\n\theaderSortElement:\"<div class='tabulator-arrow'></div>\", //header sort element\r\n\r\n\tfooterElement:false, //hold footer element\r\n\r\n\tindex:\"id\", //filed for row index\r\n\r\n\ttextDirection:\"auto\",\r\n\r\n\tkeybindings:[], //array for keybindings\r\n\r\n\ttabEndNewRow:false, //create new row when tab to end of table\r\n\r\n\tinvalidOptionWarnings:true, //allow toggling of invalid option warnings\r\n\r\n\tclipboard:false, //enable clipboard\r\n\tclipboardCopyStyled:true, //formatted table data\r\n\tclipboardCopyConfig:false, //clipboard config\r\n\tclipboardCopyFormatter:false, //DEPRICATED - REMOVE in 5.0\r\n\tclipboardCopyRowRange:\"active\", //restrict clipboard to visible rows only\r\n\tclipboardPasteParser:\"table\", //convert pasted clipboard data to rows\r\n\tclipboardPasteAction:\"insert\", //how to insert pasted data into the table\r\n\r\n\tclipboardCopied:function(){}, //data has been copied to the clipboard\r\n\tclipboardPasted:function(){}, //data has been pasted into the table\r\n\tclipboardPasteError:function(){}, //data has not successfully been pasted into the table\r\n\r\n\tdownloadDataFormatter:false, //function to manipulate table data before it is downloaded\r\n\tdownloadReady:function(data, blob){return blob;}, //function to manipulate download data\r\n\tdownloadComplete:false, //function to manipulate download data\r\n\tdownloadConfig:{},\t//download config\r\n\tdownloadRowRange:\"active\", //restrict download to active rows only\r\n\r\n\tdataTree:false, //enable data tree\r\n\tdataTreeFilter:true, //filter child rows\r\n\tdataTreeSort:true, //sort child rows\r\n\tdataTreeElementColumn:false,\r\n\tdataTreeBranchElement: true, //show data tree branch element\r\n\tdataTreeChildIndent:9, //data tree child indent in px\r\n\tdataTreeChildField:\"_children\", //data tre column field to look for child rows\r\n\tdataTreeCollapseElement:false, //data tree row collapse element\r\n\tdataTreeExpandElement:false, //data tree row expand element\r\n\tdataTreeStartExpanded:false,\r\n\tdataTreeRowExpanded:function(){}, //row has been expanded\r\n\tdataTreeRowCollapsed:function(){}, //row has been collapsed\r\n\tdataTreeChildColumnCalcs:false, //include visible data tree rows in column calculations\r\n\tdataTreeSelectPropagate:false, //seleccting a parent row selects its children\r\n\r\n\tprintAsHtml:false, //enable print as html\r\n\tprintFormatter:false, //printing page formatter\r\n\tprintHeader:false, //page header contents\r\n\tprintFooter:false, //page footer contents\r\n\tprintCopyStyle:true, //DEPRICATED - REMOVE in 5.0\r\n\tprintStyled:true, //enable print as html styling\r\n\tprintVisibleRows:true,  //DEPRICATED - REMOVE in 5.0\r\n\tprintRowRange:\"visible\", //restrict print to visible rows only\r\n\tprintConfig:{}, //print config options\r\n\r\n\taddRowPos:\"bottom\", //position to insert blank rows, top|bottom\r\n\r\n\tselectable:\"highlight\", //highlight rows on hover\r\n\tselectableRangeMode: \"drag\", //highlight rows on hover\r\n\tselectableRollingSelection:true, //roll selection once maximum number of selectable rows is reached\r\n\tselectablePersistence:true, // maintain selection when table view is updated\r\n\tselectableCheck:function(data, row){return true;}, //check wheather row is selectable\r\n\r\n\theaderFilterLiveFilterDelay: 300, //delay before updating column after user types in header filter\r\n\theaderFilterPlaceholder: false, //placeholder text to display in header filters\r\n\r\n\theaderVisible:true, //hide header\r\n\r\n\thistory:false, //enable edit history\r\n\r\n\tlocale:false, //current system language\r\n\tlangs:{},\r\n\r\n\tvirtualDom:true, //enable DOM virtualization\r\n    virtualDomBuffer:0, // set virtual DOM buffer size\r\n\tvirtualDomHoz:false, //enable horizontal DOM virtualization\r\n\r\n    persistentLayout:false, //DEPRICATED - REMOVE in 5.0\r\n    persistentSort:false, //DEPRICATED - REMOVE in 5.0\r\n    persistentFilter:false, //DEPRICATED - REMOVE in 5.0\r\n\tpersistenceID:\"\", //key for persistent storage\r\n\tpersistenceMode:true, //mode for storing persistence information\r\n\tpersistenceReaderFunc:false, //function for handling persistence data reading\r\n\tpersistenceWriterFunc:false, //function for handling persistence data writing\r\n\r\n\tpersistence:false,\r\n\r\n\tresponsiveLayout:false, //responsive layout flags\r\n\tresponsiveLayoutCollapseStartOpen:true, //start showing collapsed data\r\n\tresponsiveLayoutCollapseUseFormatters:true, //responsive layout collapse formatter\r\n\tresponsiveLayoutCollapseFormatter:false, //responsive layout collapse formatter\r\n\r\n\tpagination:false, //set pagination type\r\n\tpaginationSize:false, //set number of rows to a page\r\n\tpaginationInitialPage:1, //initail page to show on load\r\n\tpaginationButtonCount: 5, // set count of page button\r\n\tpaginationSizeSelector:false, //add pagination size selector element\r\n\tpaginationElement:false, //element to hold pagination numbers\r\n\tpaginationDataSent:{}, //pagination data sent to the server\r\n\tpaginationDataReceived:{}, //pagination data received from the server\r\n\tpaginationAddRow: \"page\", //add rows on table or page\r\n\r\n\tajaxURL:false, //url for ajax loading\r\n\tajaxURLGenerator:false,\r\n\tajaxParams:{}, //params for ajax loading\r\n\tajaxConfig:\"get\", //ajax request type\r\n\tajaxContentType:\"form\", //ajax request type\r\n\tajaxRequestFunc:false, //promise function\r\n\tajaxLoader:true, //show loader\r\n\tajaxLoaderLoading:false, //loader element\r\n\tajaxLoaderError:false, //loader element\r\n\tajaxFiltering:false,\r\n\tajaxSorting:false,\r\n\tajaxProgressiveLoad:false, //progressive loading\r\n\tajaxProgressiveLoadDelay:0, //delay between requests\r\n\tajaxProgressiveLoadScrollMargin:0, //margin before scroll begins\r\n\r\n\tgroupBy:false, //enable table grouping and set field to group by\r\n\tgroupStartOpen:true, //starting state of group\r\n\tgroupValues:false,\r\n\tgroupUpdateOnCellEdit:false,\r\n\r\n\tgroupHeader:false, //header generation function\r\n\tgroupHeaderPrint:null,\r\n\tgroupHeaderClipboard:null,\r\n\tgroupHeaderHtmlOutput:null,\r\n\tgroupHeaderDownload:null,\r\n\r\n\thtmlOutputConfig:false, //html outypu config\r\n\r\n\tmovableColumns:false, //enable movable columns\r\n\r\n\tmovableRows:false, //enable movable rows\r\n\tmovableRowsConnectedTables:false, //tables for movable rows to be connected to\r\n\tmovableRowsConnectedElements:false, //other elements for movable rows to be connected to\r\n\tmovableRowsSender:false,\r\n\tmovableRowsReceiver:\"insert\",\r\n\tmovableRowsSendingStart:function(){},\r\n\tmovableRowsSent:function(){},\r\n\tmovableRowsSentFailed:function(){},\r\n\tmovableRowsSendingStop:function(){},\r\n\tmovableRowsReceivingStart:function(){},\r\n\tmovableRowsReceived:function(){},\r\n\tmovableRowsReceivedFailed:function(){},\r\n\tmovableRowsReceivingStop:function(){},\r\n\tmovableRowsElementDrop:function(){},\r\n\r\n\tscrollToRowPosition:\"top\",\r\n\tscrollToRowIfVisible:true,\r\n\r\n\tscrollToColumnPosition:\"left\",\r\n\tscrollToColumnIfVisible:true,\r\n\r\n\trowFormatter:false,\r\n\trowFormatterPrint:null,\r\n\trowFormatterClipboard:null,\r\n\trowFormatterHtmlOutput:null,\r\n\r\n\tplaceholder:false,\r\n\r\n\t//table building callbacks\r\n\ttableBuilding:function(){},\r\n\ttableBuilt:function(){},\r\n\r\n\t//render callbacks\r\n\trenderStarted:function(){},\r\n\trenderComplete:function(){},\r\n\r\n\t//row callbacks\r\n\trowClick:false,\r\n\trowDblClick:false,\r\n\trowContext:false,\r\n\trowTap:false,\r\n\trowDblTap:false,\r\n\trowTapHold:false,\r\n\trowMouseEnter:false,\r\n\trowMouseLeave:false,\r\n\trowMouseOver:false,\r\n\trowMouseOut:false,\r\n\trowMouseMove:false,\r\n\trowContextMenu:false,\r\n\trowClickMenu:false,\r\n\trowAdded:function(){},\r\n\trowDeleted:function(){},\r\n\trowMoved:function(){},\r\n\trowUpdated:function(){},\r\n\trowSelectionChanged:function(){},\r\n\trowSelected:function(){},\r\n\trowDeselected:function(){},\r\n\trowResized:function(){},\r\n\r\n\t//cell callbacks\r\n\t//row callbacks\r\n\tcellClick:false,\r\n\tcellDblClick:false,\r\n\tcellContext:false,\r\n\tcellTap:false,\r\n\tcellDblTap:false,\r\n\tcellTapHold:false,\r\n\tcellMouseEnter:false,\r\n\tcellMouseLeave:false,\r\n\tcellMouseOver:false,\r\n\tcellMouseOut:false,\r\n\tcellMouseMove:false,\r\n\tcellEditing:function(){},\r\n\tcellEdited:function(){},\r\n\tcellEditCancelled:function(){},\r\n\r\n\t//column callbacks\r\n\tcolumnMoved:false,\r\n\tcolumnResized:function(){},\r\n\tcolumnTitleChanged:function(){},\r\n\tcolumnVisibilityChanged:function(){},\r\n\r\n\t//HTML iport callbacks\r\n\thtmlImporting:function(){},\r\n\thtmlImported:function(){},\r\n\r\n\t//data callbacks\r\n\tdataLoading:function(){},\r\n\tdataLoaded:function(){},\r\n\tdataEdited:false, //DEPRECATED\r\n\tdataChanged:false,\r\n\r\n\t//ajax callbacks\r\n\tajaxRequesting:function(){},\r\n\tajaxResponse:false,\r\n\tajaxError:function(){},\r\n\r\n\t//filtering callbacks\r\n\tdataFiltering:false,\r\n\tdataFiltered:false,\r\n\r\n\t//sorting callbacks\r\n\tdataSorting:function(){},\r\n\tdataSorted:function(){},\r\n\r\n\t//grouping callbacks\r\n\tgroupToggleElement:\"arrow\",\r\n\tgroupClosedShowCalcs:false,\r\n\tdataGrouping:function(){},\r\n\tdataGrouped:false,\r\n\tgroupVisibilityChanged:function(){},\r\n\tgroupClick:false,\r\n\tgroupDblClick:false,\r\n\tgroupContext:false,\r\n\tgroupContextMenu:false,\r\n\tgroupClickMenu:false,\r\n\tgroupTap:false,\r\n\tgroupDblTap:false,\r\n\tgroupTapHold:false,\r\n\r\n\tcolumnCalcs:true,\r\n\r\n\t//pagination callbacks\r\n\tpageLoaded:function(){},\r\n\r\n\t//localization callbacks\r\n\tlocalized:function(){},\r\n\r\n\t//validation callbacks\r\n\tvalidationMode:\"blocking\",\r\n\tvalidationFailed:function(){},\r\n\r\n\t//history callbacks\r\n\thistoryUndo:function(){},\r\n\thistoryRedo:function(){},\r\n\r\n\t//scroll callbacks\r\n\tscrollHorizontal:function(){},\r\n\tscrollVertical:function(){},\r\n};","//public column object\r\nexport default class ColumnComponent {\r\n\tconstructor (column){\r\n\t\tthis._column = column;\r\n\t\tthis.type = \"ColumnComponent\";\r\n\t}\r\n\r\n\tgetElement(){\r\n\t\treturn this._column.getElement();\r\n\t}\r\n\r\n\tgetDefinition(){\r\n\t\treturn this._column.getDefinition();\r\n\t}\r\n\r\n\tgetField(){\r\n\t\treturn this._column.getField();\r\n\t}\r\n\r\n\tgetCells(){\r\n\t\tvar cells = [];\r\n\r\n\t\tthis._column.cells.forEach(function(cell){\r\n\t\t\tcells.push(cell.getComponent());\r\n\t\t});\r\n\r\n\t\treturn cells;\r\n\t}\r\n\r\n\tgetVisibility(){\r\n\t\tconsole.warn(\"getVisibility function is deprecated, you should now use the isVisible function\");\r\n\t\treturn this._column.visible;\r\n\t}\r\n\r\n\tisVisible(){\r\n\t\treturn this._column.visible;\r\n\t}\r\n\r\n\tshow(){\r\n\t\tif(this._column.isGroup){\r\n\t\t\tthis._column.columns.forEach(function(column){\r\n\t\t\t\tcolumn.show();\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tthis._column.show();\r\n\t\t}\r\n\t}\r\n\r\n\thide(){\r\n\t\tif(this._column.isGroup){\r\n\t\t\tthis._column.columns.forEach(function(column){\r\n\t\t\t\tcolumn.hide();\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tthis._column.hide();\r\n\t\t}\r\n\t}\r\n\r\n\ttoggle(){\r\n\t\tif(this._column.visible){\r\n\t\t\tthis.hide();\r\n\t\t}else{\r\n\t\t\tthis.show();\r\n\t\t}\r\n\t}\r\n\r\n\tdelete(){\r\n\t\treturn this._column.delete();\r\n\t}\r\n\r\n\tgetSubColumns(){\r\n\t\tvar output = [];\r\n\r\n\t\tif(this._column.columns.length){\r\n\t\t\tthis._column.columns.forEach(function(column){\r\n\t\t\t\toutput.push(column.getComponent());\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgetParentColumn(){\r\n\t\treturn this._column.parent instanceof Column ? this._column.parent.getComponent() : false;\r\n\t}\r\n\r\n\t_getSelf(){\r\n\t\treturn this._column;\r\n\t}\r\n\r\n\tscrollTo(){\r\n\t\treturn this._column.table.columnManager.scrollToColumn(this._column);\r\n\t}\r\n\r\n\tgetTable(){\r\n\t\treturn this._column.table;\r\n\t}\r\n\r\n\theaderFilterFocus(){\r\n\t\tif(this._column.table.modExists(\"filter\", true)){\r\n\t\t\tthis._column.table.modules.filter.setHeaderFilterFocus(this._column);\r\n\t\t}\r\n\t}\r\n\r\n\treloadHeaderFilter(){\r\n\t\tif(this._column.table.modExists(\"filter\", true)){\r\n\t\t\tthis._column.table.modules.filter.reloadHeaderFilter(this._column);\r\n\t\t}\r\n\t}\r\n\r\n\tgetHeaderFilterValue(){\r\n\t\tif(this._column.table.modExists(\"filter\", true)){\r\n\t\t\treturn this._column.table.modules.filter.getHeaderFilterValue(this._column);\r\n\t\t}\r\n\t}\r\n\r\n\tsetHeaderFilterValue(value){\r\n\t\tif(this._column.table.modExists(\"filter\", true)){\r\n\t\t\tthis._column.table.modules.filter.setHeaderFilterValue(this._column, value);\r\n\t\t}\r\n\t}\r\n\r\n\tmove(to, after){\r\n\t\tvar toColumn = this._column.table.columnManager.findColumn(to);\r\n\r\n\t\tif(toColumn){\r\n\t\t\tthis._column.table.columnManager.moveColumn(this._column, toColumn, after)\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Move Error - No matching column found:\", toColumn);\r\n\t\t}\r\n\t}\r\n\r\n\tgetNextColumn(){\r\n\t\tvar nextCol = this._column.nextColumn();\r\n\r\n\t\treturn nextCol ? nextCol.getComponent() : false;\r\n\t}\r\n\r\n\tgetPrevColumn(){\r\n\t\tvar prevCol = this._column.prevColumn();\r\n\r\n\t\treturn prevCol ? prevCol.getComponent() : false;\r\n\t}\r\n\r\n\tupdateDefinition(updates){\r\n\t\treturn this._column.updateDefinition(updates);\r\n\t}\r\n\r\n\tgetWidth(){\r\n\t\treturn this._column.getWidth();\r\n\t}\r\n\r\n\tsetWidth(width){\r\n\t\tvar result;\r\n\r\n\t\tif(width === true){\r\n\t\t\tresult =  this._column.reinitializeWidth(true);\r\n\t\t}else{\r\n\t\t\tresult =  this._column.setWidth(width);\r\n\t\t}\r\n\r\n\t\tif(this._column.table.options.virtualDomHoz){\r\n\t\t\tthis._column.table.vdomHoz.reinitialize(true);\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tvalidate(){\r\n\t\treturn this._column.validate();\r\n\t}\r\n}","export default [\r\n\t\"title\",\r\n\t\"field\",\r\n\t\"columns\",\r\n\t\"visible\",\r\n\t\"align\",\r\n\t\"hozAlign\",\r\n\t\"vertAlign\",\r\n\t\"width\",\r\n\t\"minWidth\",\r\n\t\"maxWidth\",\r\n\t\"widthGrow\",\r\n\t\"widthShrink\",\r\n\t\"resizable\",\r\n\t\"frozen\",\r\n\t\"responsive\",\r\n\t\"tooltip\",\r\n\t\"cssClass\",\r\n\t\"rowHandle\",\r\n\t\"hideInHtml\",\r\n\t\"print\",\r\n\t\"htmlOutput\",\r\n\t\"sorter\",\r\n\t\"sorterParams\",\r\n\t\"formatter\",\r\n\t\"formatterParams\",\r\n\t\"variableHeight\",\r\n\t\"editable\",\r\n\t\"editor\",\r\n\t\"editorParams\",\r\n\t\"validator\",\r\n\t\"mutator\",\r\n\t\"mutatorParams\",\r\n\t\"mutatorData\",\r\n\t\"mutatorDataParams\",\r\n\t\"mutatorEdit\",\r\n\t\"mutatorEditParams\",\r\n\t\"mutatorClipboard\",\r\n\t\"mutatorClipboardParams\",\r\n\t\"accessor\",\r\n\t\"accessorParams\",\r\n\t\"accessorData\",\r\n\t\"accessorDataParams\",\r\n\t\"accessorDownload\",\r\n\t\"accessorDownloadParams\",\r\n\t\"accessorClipboard\",\r\n\t\"accessorClipboardParams\",\r\n\t\"accessorPrint\",\r\n\t\"accessorPrintParams\",\r\n\t\"accessorHtmlOutput\",\r\n\t\"accessorHtmlOutputParams\",\r\n\t\"clipboard\",\r\n\t\"download\",\r\n\t\"downloadTitle\",\r\n\t\"topCalc\",\r\n\t\"topCalcParams\",\r\n\t\"topCalcFormatter\",\r\n\t\"topCalcFormatterParams\",\r\n\t\"bottomCalc\",\r\n\t\"bottomCalcParams\",\r\n\t\"bottomCalcFormatter\",\r\n\t\"bottomCalcFormatterParams\",\r\n\t\"cellClick\",\r\n\t\"cellDblClick\",\r\n\t\"cellContext\",\r\n\t\"cellTap\",\r\n\t\"cellDblTap\",\r\n\t\"cellTapHold\",\r\n\t\"cellMouseEnter\",\r\n\t\"cellMouseLeave\",\r\n\t\"cellMouseOver\",\r\n\t\"cellMouseOut\",\r\n\t\"cellMouseMove\",\r\n\t\"cellEditing\",\r\n\t\"cellEdited\",\r\n\t\"cellEditCancelled\",\r\n\t\"headerSort\",\r\n\t\"headerSortStartingDir\",\r\n\t\"headerSortTristate\",\r\n\t\"headerClick\",\r\n\t\"headerDblClick\",\r\n\t\"headerContext\",\r\n\t\"headerTap\",\r\n\t\"headerDblTap\",\r\n\t\"headerTapHold\",\r\n\t\"headerTooltip\",\r\n\t\"headerVertical\",\r\n\t\"headerHozAlign\",\r\n\t\"editableTitle\",\r\n\t\"titleFormatter\",\r\n\t\"titleFormatterParams\",\r\n\t\"headerFilter\",\r\n\t\"headerFilterPlaceholder\",\r\n\t\"headerFilterParams\",\r\n\t\"headerFilterEmptyCheck\",\r\n\t\"headerFilterFunc\",\r\n\t\"headerFilterFuncParams\",\r\n\t\"headerFilterLiveFilter\",\r\n\t\"print\",\r\n\t\"headerContextMenu\",\r\n\t\"headerMenu\",\r\n\t\"contextMenu\",\r\n\t// \"headerClickMenu\",\r\n\t\"clickMenu\",\r\n\t\"formatterPrint\",\r\n\t\"formatterPrintParams\",\r\n\t\"formatterClipboard\",\r\n\t\"formatterClipboardParams\",\r\n\t\"formatterHtmlOutput\",\r\n\t\"formatterHtmlOutputParams\",\r\n\t\"titlePrint\",\r\n\t\"titleClipboard\",\r\n\t\"titleHtmlOutput\",\r\n\t\"titleDownload\",\r\n];","//public cell object\r\nexport default class CellComponent {\r\n\r\n\tconstructor (cell){\r\n\t\tthis._cell = cell;\r\n\t}\r\n\r\n\tgetValue(){\r\n\t\treturn this._cell.getValue();\r\n\t}\r\n\r\n\tgetOldValue(){\r\n\t\treturn this._cell.getOldValue();\r\n\t}\r\n\r\n\tgetInitialValue(){\r\n\t\treturn this._cell.initialValue;\r\n\t}\r\n\r\n\tgetElement(){\r\n\t\treturn this._cell.getElement();\r\n\t}\r\n\r\n\tgetRow(){\r\n\t\treturn this._cell.row.getComponent();\r\n\t}\r\n\r\n\tgetData(){\r\n\t\treturn this._cell.row.getData();\r\n\t}\r\n\r\n\tgetField(){\r\n\t\treturn this._cell.column.getField();\r\n\t}\r\n\r\n\tgetColumn(){\r\n\t\treturn this._cell.column.getComponent();\r\n\t}\r\n\r\n\tsetValue(value, mutate){\r\n\t\tif(typeof mutate == \"undefined\"){\r\n\t\t\tmutate = true;\r\n\t\t}\r\n\r\n\t\tthis._cell.setValue(value, mutate);\r\n\t}\r\n\r\n\trestoreOldValue(){\r\n\t\tthis._cell.setValueActual(this._cell.getOldValue());\r\n\t}\r\n\r\n\trestoreInitialValue(){\r\n\t\tthis._cell.setValueActual(this._cell.initialValue);\r\n\t}\r\n\r\n\tedit(force){\r\n\t\treturn this._cell.edit(force);\r\n\t}\r\n\r\n\tcancelEdit(){\r\n\t\tthis._cell.cancelEdit();\r\n\t}\r\n\r\n\tisEdited(){\r\n\t\treturn !! this._cell.modules.edit && this._cell.modules.edit.edited;\r\n\t}\r\n\r\n\tclearEdited(){\r\n\t\tif(this._cell.table.modExists(\"edit\", true)){\r\n\t\t\tthis._cell.table.modules.edit.clearEdited(this._cell);\r\n\t\t}\r\n\t}\r\n\r\n\tisValid(){\r\n\t\treturn this._cell.modules.validate ? !this._cell.modules.validate.invalid : true;\r\n\t}\r\n\r\n\tvalidate(){\r\n\t\treturn this._cell.validate();\r\n\t}\r\n\r\n\tclearValidation(){\r\n\t\tif(this._cell.table.modExists(\"validate\", true)){\r\n\t\t\tthis._cell.table.modules.validate.clearValidation(this._cell);\r\n\t\t}\r\n\t}\r\n\r\n\tnav(){\r\n\t\treturn this._cell.nav();\r\n\t}\r\n\r\n\tcheckHeight(){\r\n\t\tthis._cell.checkHeight();\r\n\t}\r\n\r\n\tgetTable(){\r\n\t\treturn this._cell.table;\r\n\t}\r\n\r\n\t_getSelf(){\r\n\t\treturn this._cell;\r\n\t}\r\n}","import CellComponent from './CellComponent.js';\r\n\r\nexport default class Cell {\r\n\tconstructor(column, row){\r\n\t\tthis.table = column.table;\r\n\t\tthis.column = column;\r\n\t\tthis.row = row;\r\n\t\tthis.element = null;\r\n\t\tthis.value = null;\r\n\t\tthis.initialValue;\r\n\t\tthis.oldValue = null;\r\n\t\tthis.modules = {};\r\n\r\n\t\tthis.height = null;\r\n\t\tthis.width = null;\r\n\t\tthis.minWidth = null;\r\n\r\n\t\tthis.component = null;\r\n\r\n\t\tthis.loaded = false; //track if the cell has been added to the DOM yet\r\n\r\n\t\tthis.build();\r\n\t}\r\n\r\n\t//////////////// Setup Functions /////////////////\r\n\t//generate element\r\n\tbuild(){\r\n\t\tthis.generateElement();\r\n\r\n\t\tthis.setWidth();\r\n\r\n\t\tthis._configureCell();\r\n\r\n\t\tthis.setValueActual(this.column.getFieldValue(this.row.data));\r\n\r\n\t\tthis.initialValue = this.value;\r\n\t}\r\n\r\n\tgenerateElement(){\r\n\t\tthis.element = document.createElement('div');\r\n\t\tthis.element.className = \"tabulator-cell\";\r\n\t\tthis.element.setAttribute(\"role\", \"gridcell\");\r\n\t\tthis.element = this.element;\r\n\t}\r\n\r\n\t_configureCell(){\r\n\t\tvar cellEvents = this.column.cellEvents,\r\n\t\telement = this.element,\r\n\t\tfield = this.column.getField(),\r\n\t\tvertAligns = {\r\n\t\t\ttop:\"flex-start\",\r\n\t\t\tbottom:\"flex-end\",\r\n\t\t\tmiddle:\"center\",\r\n\t\t},\r\n\t\thozAligns = {\r\n\t\t\tleft:\"flex-start\",\r\n\t\t\tright:\"flex-end\",\r\n\t\t\tcenter:\"center\",\r\n\t\t};\r\n\r\n\t\t//set text alignment\r\n\t\telement.style.textAlign = this.column.hozAlign;\r\n\r\n\t\tif(this.column.vertAlign){\r\n\t\t\telement.style.display = \"inline-flex\";\r\n\r\n\t\t\telement.style.alignItems = vertAligns[this.column.vertAlign] || \"\";\r\n\r\n\t\t\tif(this.column.hozAlign){\r\n\t\t\t\telement.style.justifyContent = hozAligns[this.column.hozAlign] || \"\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(field){\r\n\t\t\telement.setAttribute(\"tabulator-field\", field);\r\n\t\t}\r\n\r\n\t\t//add class to cell if needed\r\n\t\tif(this.column.definition.cssClass){\r\n\t\t\tvar classNames = this.column.definition.cssClass.split(\" \")\r\n\t\t\tclassNames.forEach((className) => {\r\n\t\t\t\telement.classList.add(className)\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t//update tooltip on mouse enter\r\n\t\tif (this.table.options.tooltipGenerationMode === \"hover\"){\r\n\t\t\telement.addEventListener(\"mouseenter\", (e) => {\r\n\t\t\t\tthis._generateTooltip();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis._bindClickEvents(cellEvents);\r\n\r\n\t\tthis._bindTouchEvents(cellEvents);\r\n\r\n\t\tthis._bindMouseEvents(cellEvents);\r\n\r\n\t\tif(this.column.modules.edit){\r\n\t\t\tthis.table.modules.edit.bindEditor(this);\r\n\t\t}\r\n\r\n\t\tif(this.column.definition.rowHandle && this.table.options.movableRows !== false && this.table.modExists(\"moveRow\")){\r\n\t\t\tthis.table.modules.moveRow.initializeCell(this);\r\n\t\t}\r\n\r\n\t\t//hide cell if not visible\r\n\t\tif(!this.column.visible){\r\n\t\t\tthis.hide();\r\n\t\t}\r\n\t}\r\n\r\n\t_bindClickEvents(cellEvents){\r\n\t\tvar element = this.element;\r\n\r\n\t\t//set event bindings\r\n\t\tif (cellEvents.cellClick || this.table.options.cellClick){\r\n\t\t\telement.addEventListener(\"click\", (e) => {\r\n\t\t\t\tvar component = this.getComponent();\r\n\r\n\t\t\t\tif(cellEvents.cellClick){\r\n\t\t\t\t\tcellEvents.cellClick.call(this.table, e, component);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this.table.options.cellClick){\r\n\t\t\t\t\tthis.table.options.cellClick.call(this.table, e, component);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (cellEvents.cellDblClick || this.table.options.cellDblClick){\r\n\t\t\telement.addEventListener(\"dblclick\", (e) => {\r\n\t\t\t\tvar component = this.getComponent();\r\n\r\n\t\t\t\tif(cellEvents.cellDblClick){\r\n\t\t\t\t\tcellEvents.cellDblClick.call(this.table, e, component);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this.table.options.cellDblClick){\r\n\t\t\t\t\tthis.table.options.cellDblClick.call(this.table, e, component);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\telement.addEventListener(\"dblclick\", (e) => {\r\n\t\t\t\tif(this.table.modExists(\"edit\")){\r\n\t\t\t\t\tif (this.table.modules.edit.currentCell === this){\r\n\t\t\t\t\t\treturn; //prevent instant selection of editor content\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\ttry{\r\n\t\t\t\t\tif (document.selection) { // IE\r\n\t\t\t\t\t\tvar range = document.body.createTextRange();\r\n\t\t\t\t\t\trange.moveToElementText(this.element);\r\n\t\t\t\t\t\trange.select();\r\n\t\t\t\t\t} else if (window.getSelection) {\r\n\t\t\t\t\t\tvar range = document.createRange();\r\n\t\t\t\t\t\trange.selectNode(this.element);\r\n\t\t\t\t\t\twindow.getSelection().removeAllRanges();\r\n\t\t\t\t\t\twindow.getSelection().addRange(range);\r\n\t\t\t\t\t}\r\n\t\t\t\t}catch(e){}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (cellEvents.cellContext || this.table.options.cellContext){\r\n\t\t\telement.addEventListener(\"contextmenu\", (e) => {\r\n\t\t\t\tvar component = this.getComponent();\r\n\r\n\t\t\t\tif(cellEvents.cellContext){\r\n\t\t\t\t\tcellEvents.cellContext.call(this.table, e, component);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this.table.options.cellContext){\r\n\t\t\t\t\tthis.table.options.cellContext.call(this.table, e, component);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t_bindMouseEvents(cellEvents){\r\n\t\tvar element = this.element;\r\n\r\n\t\tif (cellEvents.cellMouseEnter || this.table.options.cellMouseEnter){\r\n\t\t\telement.addEventListener(\"mouseenter\", (e) => {\r\n\t\t\t\tvar component = this.getComponent();\r\n\r\n\t\t\t\tif(cellEvents.cellMouseEnter){\r\n\t\t\t\t\tcellEvents.cellMouseEnter.call(this.table, e, component);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this.table.options.cellMouseEnter){\r\n\t\t\t\t\tthis.table.options.cellMouseEnter.call(this.table, e, component);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (cellEvents.cellMouseLeave || this.table.options.cellMouseLeave){\r\n\t\t\telement.addEventListener(\"mouseleave\", (e) => {\r\n\t\t\t\tvar component = this.getComponent();\r\n\r\n\t\t\t\tif(cellEvents.cellMouseLeave){\r\n\t\t\t\t\tcellEvents.cellMouseLeave.call(this.table, e, component);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this.table.options.cellMouseLeave){\r\n\t\t\t\t\tthis.table.options.cellMouseLeave.call(this.table, e, component);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (cellEvents.cellMouseOver || this.table.options.cellMouseOver){\r\n\t\t\telement.addEventListener(\"mouseover\", (e) => {\r\n\t\t\t\tvar component = this.getComponent();\r\n\r\n\t\t\t\tif(cellEvents.cellMouseOver){\r\n\t\t\t\t\tcellEvents.cellMouseOver.call(this.table, e, component);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this.table.options.cellMouseOver){\r\n\t\t\t\t\tthis.table.options.cellMouseOver.call(this.table, e, component);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (cellEvents.cellMouseOut || this.table.options.cellMouseOut){\r\n\t\t\telement.addEventListener(\"mouseout\", (e) => {\r\n\t\t\t\tvar component = this.getComponent();\r\n\r\n\t\t\t\tif(cellEvents.cellMouseOut){\r\n\t\t\t\t\tcellEvents.cellMouseOut.call(this.table, e, component);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this.table.options.cellMouseOut){\r\n\t\t\t\t\tthis.table.options.cellMouseOut.call(this.table, e, component);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (cellEvents.cellMouseMove || this.table.options.cellMouseMove){\r\n\t\t\telement.addEventListener(\"mousemove\", (e) => {\r\n\t\t\t\tvar component = this.getComponent();\r\n\r\n\t\t\t\tif(cellEvents.cellMouseMove){\r\n\t\t\t\t\tcellEvents.cellMouseMove.call(this.table, e, component);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this.table.options.cellMouseMove){\r\n\t\t\t\t\tthis.table.options.cellMouseMove.call(this.table, e, component);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t_bindTouchEvents(cellEvents){\r\n\t\tvar element = this.element,\r\n\t\tdblTap,\ttapHold, tap;\r\n\r\n\t\tif (cellEvents.cellTap || this.table.options.cellTap){\r\n\t\t\ttap = false;\r\n\r\n\t\t\telement.addEventListener(\"touchstart\", (e) => {\r\n\t\t\t\ttap = true;\r\n\t\t\t}, {passive: true});\r\n\r\n\t\t\telement.addEventListener(\"touchend\", (e) => {\r\n\t\t\t\tif(tap){\r\n\t\t\t\t\tvar component = this.getComponent();\r\n\r\n\t\t\t\t\tif(cellEvents.cellTap){\r\n\t\t\t\t\t\tcellEvents.cellTap.call(this.table, e, component);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(this.table.options.cellTap){\r\n\t\t\t\t\t\tthis.table.options.cellTap.call(this.table, e, component);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttap = false;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (cellEvents.cellDblTap || this.table.options.cellDblTap){\r\n\t\t\tdblTap = null;\r\n\r\n\t\t\telement.addEventListener(\"touchend\", (e) => {\r\n\t\t\t\tif(dblTap){\r\n\t\t\t\t\tclearTimeout(dblTap);\r\n\t\t\t\t\tdblTap = null;\r\n\r\n\t\t\t\t\tvar component = this.getComponent();\r\n\r\n\t\t\t\t\tif(cellEvents.cellDblTap){\r\n\t\t\t\t\t\tcellEvents.cellDblTap.call(this.table, e, component);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(this.table.options.cellDblTap){\r\n\t\t\t\t\t\tthis.table.options.cellDblTap.call(this.table, e, component);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\r\n\t\t\t\t\tdblTap = setTimeout(() => {\r\n\t\t\t\t\t\tclearTimeout(dblTap);\r\n\t\t\t\t\t\tdblTap = null;\r\n\t\t\t\t\t}, 300);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (cellEvents.cellTapHold || this.table.options.cellTapHold){\r\n\t\t\ttapHold = null;\r\n\r\n\t\t\telement.addEventListener(\"touchstart\", (e) => {\r\n\t\t\t\tclearTimeout(tapHold);\r\n\r\n\t\t\t\ttapHold = setTimeout(() => {\r\n\t\t\t\t\tclearTimeout(tapHold);\r\n\t\t\t\t\ttapHold = null;\r\n\t\t\t\t\ttap = false;\r\n\t\t\t\t\tvar component = this.getComponent();\r\n\r\n\t\t\t\t\tif(cellEvents.cellTapHold){\r\n\t\t\t\t\t\tcellEvents.cellTapHold.call(this.table, e, component);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(this.table.options.cellTapHold){\r\n\t\t\t\t\t\tthis.table.options.cellTapHold.call(this.table, e, component);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 1000);\r\n\r\n\t\t\t}, {passive: true});\r\n\r\n\t\t\telement.addEventListener(\"touchend\", (e) => {\r\n\t\t\t\tclearTimeout(tapHold);\r\n\t\t\t\ttapHold = null;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t//generate cell contents\r\n\t_generateContents(){\r\n\t\tvar val;\r\n\r\n\t\tif(this.table.modExists(\"format\")){\r\n\t\t\tval = this.table.modules.format.formatValue(this);\r\n\t\t}else{\r\n\t\t\tval = this.element.innerHTML = this.value;\r\n\t\t}\r\n\r\n\t\tswitch(typeof val){\r\n\t\t\tcase \"object\":\r\n\t\t\tif(val instanceof Node){\r\n\r\n\t\t\t\t//clear previous cell contents\r\n\t\t\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\r\n\r\n\t\t\t\tthis.element.appendChild(val);\r\n\t\t\t}else{\r\n\t\t\t\tthis.element.innerHTML = \"\";\r\n\r\n\t\t\t\tif(val != null){\r\n\t\t\t\t\tconsole.warn(\"Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", val);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t\tcase \"undefined\":\r\n\t\t\tcase \"null\":\r\n\t\t\tthis.element.innerHTML = \"\";\r\n\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\tthis.element.innerHTML = val;\r\n\t\t}\r\n\t}\r\n\r\n\tcellRendered(){\r\n\t\tif(this.table.modExists(\"format\") && this.table.modules.format.cellRendered){\r\n\t\t\tthis.table.modules.format.cellRendered(this);\r\n\t\t}\r\n\t}\r\n\r\n\t//generate tooltip text\r\n\t_generateTooltip(){\r\n\t\tvar tooltip = this.column.tooltip;\r\n\r\n\t\tif(tooltip){\r\n\t\t\tif(tooltip === true){\r\n\t\t\t\ttooltip = this.value;\r\n\t\t\t}else if(typeof(tooltip) == \"function\"){\r\n\t\t\t\ttooltip = tooltip(this.getComponent());\r\n\r\n\t\t\t\tif(tooltip === false){\r\n\t\t\t\t\ttooltip = \"\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(typeof tooltip === \"undefined\"){\r\n\t\t\t\ttooltip = \"\";\r\n\t\t\t}\r\n\r\n\t\t\tthis.element.setAttribute(\"title\", tooltip);\r\n\t\t}else{\r\n\t\t\tthis.element.setAttribute(\"title\", \"\");\r\n\t\t}\r\n\t}\r\n\r\n\t//////////////////// Getters ////////////////////\r\n\tgetElement(containerOnly){\r\n\t\tif(!this.loaded){\r\n\t\t\tthis.loaded = true;\r\n\t\t\tif(!containerOnly){\r\n\t\t\t\tthis.layoutElement();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this.element;\r\n\t}\r\n\r\n\tgetValue(){\r\n\t\treturn this.value;\r\n\t}\r\n\r\n\tgetOldValue(){\r\n\t\treturn this.oldValue;\r\n\t}\r\n\r\n\t//////////////////// Actions ////////////////////\r\n\tsetValue(value, mutate){\r\n\t\tvar changed = this.setValueProcessData(value, mutate),\r\n\t\tcomponent;\r\n\r\n\t\tif(changed){\r\n\t\t\tif(this.table.options.history && this.table.modExists(\"history\")){\r\n\t\t\t\tthis.table.modules.history.action(\"cellEdit\", this, {oldValue:this.oldValue, newValue:this.value});\r\n\t\t\t}\r\n\r\n\t\t\tcomponent = this.getComponent();\r\n\r\n\t\t\tif(this.column.cellEvents.cellEdited){\r\n\t\t\t\tthis.column.cellEvents.cellEdited.call(this.table, component);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.options.groupUpdateOnCellEdit && this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\r\n\t\t\t\tthis.table.modules.groupRows.reassignRowToGroup(this.row);\r\n\t\t\t}\r\n\r\n\t\t\tthis.cellRendered();\r\n\r\n\t\t\tthis.table.options.cellEdited.call(this.table, component);\r\n\r\n\t\t\tif(this.table.options.dataChanged){\r\n\t\t\t\tthis.table.options.dataChanged.call(this.table, this.table.rowManager.getData());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsetValueProcessData(value, mutate){\r\n\t\tvar changed = false;\r\n\r\n\t\tif(this.value != value){\r\n\r\n\t\t\tchanged = true;\r\n\r\n\t\t\tif(mutate){\r\n\t\t\t\tif(this.column.modules.mutate){\r\n\t\t\t\t\tvalue = this.table.modules.mutator.transformCell(this, value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.setValueActual(value);\r\n\r\n\t\tif(changed && this.table.modExists(\"columnCalcs\")){\r\n\t\t\tif(this.column.definition.topCalc || this.column.definition.bottomCalc){\r\n\t\t\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\r\n\r\n\t\t\t\t\tif(this.table.options.columnCalcs == \"table\" || this.table.options.columnCalcs == \"both\"){\r\n\t\t\t\t\t\tthis.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(this.table.options.columnCalcs != \"table\"){\r\n\t\t\t\t\t\tthis.table.modules.columnCalcs.recalcRowGroup(this.row);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn changed;\r\n\t}\r\n\r\n\tsetValueActual(value){\r\n\t\tthis.oldValue = this.value;\r\n\r\n\t\tthis.value = value;\r\n\r\n\t\tif(this.table.options.reactiveData && this.table.modExists(\"reactiveData\")){\r\n\t\t\tthis.table.modules.reactiveData.block();\r\n\t\t}\r\n\r\n\t\tthis.column.setFieldValue(this.row.data, value);\r\n\r\n\t\tif(this.table.options.reactiveData && this.table.modExists(\"reactiveData\")){\r\n\t\t\tthis.table.modules.reactiveData.unblock();\r\n\t\t}\r\n\r\n\t\tif(this.loaded){\r\n\t\t\tthis.layoutElement();\r\n\t\t}\r\n\t}\r\n\r\n\tlayoutElement(){\r\n\t\tthis._generateContents();\r\n\t\tthis._generateTooltip();\r\n\r\n\t\t//set resizable handles\r\n\t\tif(this.table.options.resizableColumns && this.table.modExists(\"resizeColumns\") && this.row.type === \"row\"){\r\n\t\t\tthis.table.modules.resizeColumns.initializeColumn(\"cell\", this.column, this.element);\r\n\t\t}\r\n\r\n\r\n\t\tif((this.column.definition.contextMenu || this.column.definition.clickMenu) && this.table.modExists(\"menu\")){\r\n\t\t\tthis.table.modules.menu.initializeCell(this);\r\n\t\t}\r\n\r\n\t\t//handle frozen cells\r\n\t\tif(this.table.modExists(\"frozenColumns\")){\r\n\t\t\tthis.table.modules.frozenColumns.layoutElement(this.element, this.column);\r\n\t\t}\r\n\t}\r\n\r\n\tsetWidth(){\r\n\t\tthis.width = this.column.width;\r\n\t\tthis.element.style.width = this.column.widthStyled;\r\n\t}\r\n\r\n\tclearWidth(){\r\n\t\tthis.width = \"\";\r\n\t\tthis.element.style.width = \"\";\r\n\t}\r\n\r\n\tgetWidth(){\r\n\t\treturn this.width || this.element.offsetWidth;\r\n\t}\r\n\r\n\tsetMinWidth(){\r\n\t\tthis.minWidth = this.column.minWidth;\r\n\t\tthis.element.style.minWidth = this.column.minWidthStyled;\r\n\t}\r\n\r\n\tsetMaxWidth(){\r\n\t\tthis.maxWidth = this.column.maxWidth;\r\n\t\tthis.element.style.maxWidth = this.column.maxWidthStyled;\r\n\t}\r\n\r\n\tcheckHeight(){\r\n\t\t// var height = this.element.css(\"height\");\r\n\t\tthis.row.reinitializeHeight();\r\n\t}\r\n\r\n\tclearHeight(){\r\n\t\tthis.element.style.height = \"\";\r\n\t\tthis.height = null;\r\n\t}\r\n\r\n\tsetHeight(){\r\n\t\tthis.height = this.row.height;\r\n\t\tthis.element.style.height =  this.row.heightStyled;\r\n\t}\r\n\r\n\tgetHeight(){\r\n\t\treturn this.height || this.element.offsetHeight;\r\n\t}\r\n\r\n\tshow(){\r\n\t\tthis.element.style.display = this.column.vertAlign ? \"inline-flex\" : \"\";\r\n\t}\r\n\r\n\thide(){\r\n\t\tthis.element.style.display = \"none\";\r\n\t}\r\n\r\n\tedit(force){\r\n\t\tif(this.table.modExists(\"edit\", true)){\r\n\t\t\treturn this.table.modules.edit.editCell(this, force);\r\n\t\t}\r\n\t}\r\n\r\n\tcancelEdit(){\r\n\t\tif(this.table.modExists(\"edit\", true)){\r\n\t\t\tvar editing = this.table.modules.edit.getCurrentCell();\r\n\r\n\t\t\tif(editing && editing._getSelf() === this){\r\n\t\t\t\tthis.table.modules.edit.cancelEdit();\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Cancel Editor Error - This cell is not currently being edited \");\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tvalidate(){\r\n\t\tif(this.column.modules.validate && this.table.modExists(\"validate\", true)){\r\n\t\t\tvar valid = this.table.modules.validate.validate(this.column.modules.validate, this, this.getValue());\r\n\r\n\t\t\treturn valid === true;\r\n\t\t}else{\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\r\n\tdelete(){\r\n\t\tif(!this.table.rowManager.redrawBlock && this.element.parentNode){\r\n\t\t\tthis.element.parentNode.removeChild(this.element);\r\n\t\t}\r\n\r\n\t\tif(this.modules.validate && this.modules.validate.invalid){\r\n\t\t\tthis.table.modules.validate.clearValidation(this);\r\n\t\t}\r\n\r\n\t\tif(this.modules.edit && this.modules.edit.edited){\r\n\t\t\tthis.table.modules.edit.clearEdited(this);\r\n\t\t}\r\n\r\n\t\tif(this.table.options.history){\r\n\t\t\tthis.table.modules.history.clearComponentHistory(this);\r\n\t\t}\r\n\r\n\t\tthis.element = false;\r\n\t\tthis.column.deleteCell(this);\r\n\t\tthis.row.deleteCell(this);\r\n\t\tthis.calcs = {};\r\n\t}\r\n\r\n\t//////////////// Navigation /////////////////\r\n\tnav(){\r\n\t\tvar self = this,\r\n\t\tnextCell = false,\r\n\t\tindex = this.row.getCellIndex(this);\r\n\r\n\t\treturn {\r\n\t\t\tnext:function(){\r\n\t\t\t\tvar nextCell = this.right(),\r\n\t\t\t\tnextRow;\r\n\r\n\t\t\t\tif(!nextCell){\r\n\t\t\t\t\tnextRow = self.table.rowManager.nextDisplayRow(self.row, true);\r\n\r\n\t\t\t\t\tif(nextRow){\r\n\t\t\t\t\t\tnextCell = nextRow.findNextEditableCell(-1);\r\n\r\n\t\t\t\t\t\tif(nextCell){\r\n\t\t\t\t\t\t\tnextCell.edit();\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tprev:function(){\r\n\t\t\t\tvar nextCell = this.left(),\r\n\t\t\t\tprevRow;\r\n\r\n\t\t\t\tif(!nextCell){\r\n\t\t\t\t\tprevRow = self.table.rowManager.prevDisplayRow(self.row, true);\r\n\r\n\t\t\t\t\tif(prevRow){\r\n\t\t\t\t\t\tnextCell = prevRow.findPrevEditableCell(prevRow.cells.length);\r\n\r\n\t\t\t\t\t\tif(nextCell){\r\n\t\t\t\t\t\t\tnextCell.edit();\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tleft:function(){\r\n\r\n\t\t\t\tnextCell = self.row.findPrevEditableCell(index);\r\n\r\n\t\t\t\tif(nextCell){\r\n\t\t\t\t\tnextCell.edit();\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tright:function(){\r\n\t\t\t\tnextCell = self.row.findNextEditableCell(index);\r\n\r\n\t\t\t\tif(nextCell){\r\n\t\t\t\t\tnextCell.edit();\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tup:function(){\r\n\t\t\t\tvar nextRow = self.table.rowManager.prevDisplayRow(self.row, true);\r\n\r\n\t\t\t\tif(nextRow){\r\n\t\t\t\t\tnextRow.cells[index].edit();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdown:function(){\r\n\t\t\t\tvar nextRow = self.table.rowManager.nextDisplayRow(self.row, true);\r\n\r\n\t\t\t\tif(nextRow){\r\n\t\t\t\t\tnextRow.cells[index].edit();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t};\r\n\t}\r\n\r\n\tgetIndex(){\r\n\t\tthis.row.getCellIndex(this);\r\n\t}\r\n\r\n\t//////////////// Object Generation /////////////////\r\n\tgetComponent(){\r\n\t\tif(!this.component){\r\n\t\t\tthis.component = new CellComponent(this);\r\n\t\t}\r\n\r\n\t\treturn this.component;\r\n\t}\r\n}","import ColumnComponent from './ColumnComponent.js';\r\nimport defaultOptions from './defaults/options.js';\r\n\r\nimport Cell from '../cell/Cell.js';\r\n\r\nclass Column {\r\n\r\n\tconstructor(def, parent){\r\n\t\tthis.table = parent.table;\r\n\t\tthis.definition = def; //column definition\r\n\t\tthis.parent = parent; //hold parent object\r\n\t\tthis.type = \"column\"; //type of element\r\n\t\tthis.columns = []; //child columns\r\n\t\tthis.cells = []; //cells bound to this column\r\n\t\tthis.element = this.createElement(); //column header element\r\n\t\tthis.contentElement = false;\r\n\t\tthis.titleHolderElement = false;\r\n\t\tthis.titleElement = false;\r\n\t\tthis.groupElement = this.createGroupElement(); //column group holder element\r\n\t\tthis.isGroup = false;\r\n\t\tthis.tooltip = false; //hold column tooltip\r\n\t\tthis.hozAlign = \"\"; //horizontal text alignment\r\n\t\tthis.vertAlign = \"\"; //vert text alignment\r\n\r\n\t\t//multi dimensional filed handling\r\n\t\tthis.field =\"\";\r\n\t\tthis.fieldStructure = \"\";\r\n\t\tthis.getFieldValue = \"\";\r\n\t\tthis.setFieldValue = \"\";\r\n\r\n\t\tthis.titleFormatterRendered = false;\r\n\r\n\t\tthis.setField(this.definition.field);\r\n\r\n\t\tif(this.table.options.invalidOptionWarnings){\r\n\t\t\tthis.checkDefinition();\r\n\t\t}\r\n\r\n\t\tthis.modules = {}; //hold module variables;\r\n\r\n\t\tthis.cellEvents = {\r\n\t\t\tcellClick:false,\r\n\t\t\tcellDblClick:false,\r\n\t\t\tcellContext:false,\r\n\t\t\tcellTap:false,\r\n\t\t\tcellDblTap:false,\r\n\t\t\tcellTapHold:false,\r\n\t\t\tcellMouseEnter:false,\r\n\t\t\tcellMouseLeave:false,\r\n\t\t\tcellMouseOver:false,\r\n\t\t\tcellMouseOut:false,\r\n\t\t\tcellMouseMove:false,\r\n\t\t};\r\n\r\n\t\tthis.width = null; //column width\r\n\t\tthis.widthStyled = \"\"; //column width prestyled to improve render efficiency\r\n\t\tthis.maxWidth = null; //column maximum width\r\n\t\tthis.maxWidthStyled = \"\"; //column maximum prestyled to improve render efficiency\r\n\t\tthis.minWidth = null; //column minimum width\r\n\t\tthis.minWidthStyled = \"\"; //column minimum prestyled to improve render efficiency\r\n\t\tthis.widthFixed = false; //user has specified a width for this column\r\n\r\n\t\tthis.visible = true; //default visible state\r\n\r\n\t\tthis.component = null;\r\n\r\n\t\tthis._mapDepricatedFunctionality();\r\n\r\n\t\t//initialize column\r\n\t\tif(def.columns){\r\n\r\n\t\t\tthis.isGroup = true;\r\n\r\n\t\t\tdef.columns.forEach((def, i) => {\r\n\t\t\t\tvar newCol = new Column(def, this);\r\n\t\t\t\tthis.attachColumn(newCol);\r\n\t\t\t});\r\n\r\n\t\t\tthis.checkColumnVisibility();\r\n\t\t}else{\r\n\t\t\tparent.registerColumnField(this);\r\n\t\t}\r\n\r\n\t\tif(def.rowHandle && this.table.options.movableRows !== false && this.table.modExists(\"moveRow\")){\r\n\t\t\tthis.table.modules.moveRow.setHandle(true);\r\n\t\t}\r\n\r\n\t\tthis._buildHeader();\r\n\r\n\t\tthis.bindModuleColumns();\r\n\t}\r\n\r\n\tcreateElement (){\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tel.classList.add(\"tabulator-col\");\r\n\t\tel.setAttribute(\"role\", \"columnheader\");\r\n\t\tel.setAttribute(\"aria-sort\", \"none\");\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\tcreateGroupElement (){\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tel.classList.add(\"tabulator-col-group-cols\");\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\tcheckDefinition(){\r\n\t\tObject.keys(this.definition).forEach((key) => {\r\n\t\t\tif(Column.defaultOptionList.indexOf(key) === -1){\r\n\t\t\t\tconsole.warn(\"Invalid column definition option in '\" + (this.field || this.definition.title) + \"' column:\", key)\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tsetField(field){\r\n\t\tthis.field = field;\r\n\t\tthis.fieldStructure = field ? (this.table.options.nestedFieldSeparator ? field.split(this.table.options.nestedFieldSeparator) : [field]) : [];\r\n\t\tthis.getFieldValue = this.fieldStructure.length > 1 ? this._getNestedData : this._getFlatData;\r\n\t\tthis.setFieldValue = this.fieldStructure.length > 1 ? this._setNestedData : this._setFlatData;\r\n\t}\r\n\r\n\t//register column position with column manager\r\n\tregisterColumnPosition(column){\r\n\t\tthis.parent.registerColumnPosition(column);\r\n\t}\r\n\r\n\t//register column position with column manager\r\n\tregisterColumnField(column){\r\n\t\tthis.parent.registerColumnField(column);\r\n\t}\r\n\r\n\t//trigger position registration\r\n\treRegisterPosition(){\r\n\t\tif(this.isGroup){\r\n\t\t\tthis.columns.forEach(function(column){\r\n\t\t\t\tcolumn.reRegisterPosition();\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tthis.registerColumnPosition(this);\r\n\t\t}\r\n\t}\r\n\r\n\t_mapDepricatedFunctionality(){\r\n\t\tif(typeof this.definition.hideInHtml !== \"undefined\"){\r\n\t\t\tthis.definition.htmlOutput = !this.definition.hideInHtml;\r\n\t\t\tconsole.warn(\"hideInHtml column definition property is deprecated, you should now use htmlOutput\")\r\n\t\t}\r\n\r\n\t\tif(typeof this.definition.align !== \"undefined\"){\r\n\t\t\tthis.definition.hozAlign = this.definition.align;\r\n\t\t\tconsole.warn(\"align column definition property is deprecated, you should now use hozAlign\");\r\n\t\t}\r\n\r\n\t\tif(typeof this.definition.downloadTitle !== \"undefined\"){\r\n\t\t\tthis.definition.titleDownload = this.definition.downloadTitle;\r\n\t\t\tconsole.warn(\"downloadTitle definition property is deprecated, you should now use titleDownload\");\r\n\t\t}\r\n\t}\r\n\r\n\tsetTooltip(){\r\n\t\tvar def = this.definition;\r\n\r\n\t\t//set header tooltips\r\n\t\tvar tooltip = def.headerTooltip || def.tooltip === false  ? def.headerTooltip : this.table.options.tooltipsHeader;\r\n\r\n\t\tif(tooltip){\r\n\t\t\tif(tooltip === true){\r\n\t\t\t\tif(def.field){\r\n\t\t\t\t\tthis.table.modules.localize.bind(\"columns|\" + def.field, (value) => {\r\n\t\t\t\t\t\tthis.element.setAttribute(\"title\", value || def.title);\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.element.setAttribute(\"title\", def.title);\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tif(typeof(tooltip) == \"function\"){\r\n\t\t\t\t\ttooltip = tooltip(this.getComponent());\r\n\r\n\t\t\t\t\tif(tooltip === false){\r\n\t\t\t\t\t\ttooltip = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.element.setAttribute(\"title\", tooltip);\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\tthis.element.setAttribute(\"title\", \"\");\r\n\t\t}\r\n\t}\r\n\r\n\t//build header element\r\n\t_buildHeader(){\r\n\t\tvar def = this.definition;\r\n\r\n\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\r\n\r\n\t\tif(def.headerVertical){\r\n\t\t\tthis.element.classList.add(\"tabulator-col-vertical\");\r\n\r\n\t\t\tif(def.headerVertical === \"flip\"){\r\n\t\t\t\tthis.element.classList.add(\"tabulator-col-vertical-flip\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.contentElement = this._bindEvents();\r\n\r\n\t\tthis.contentElement = this._buildColumnHeaderContent();\r\n\r\n\t\tthis.element.appendChild(this.contentElement);\r\n\r\n\t\tif(this.isGroup){\r\n\t\t\tthis._buildGroupHeader();\r\n\t\t}else{\r\n\t\t\tthis._buildColumnHeader();\r\n\t\t}\r\n\r\n\t\tthis.setTooltip();\r\n\r\n\t\t//set resizable handles\r\n\t\tif(this.table.options.resizableColumns && this.table.modExists(\"resizeColumns\")){\r\n\t\t\tthis.table.modules.resizeColumns.initializeColumn(\"header\", this, this.element);\r\n\t\t}\r\n\r\n\t\t//set resizable handles\r\n\t\tif(def.headerFilter && this.table.modExists(\"filter\") && this.table.modExists(\"edit\")){\r\n\t\t\tif(typeof def.headerFilterPlaceholder !== \"undefined\" && def.field){\r\n\t\t\t\tthis.table.modules.localize.setHeaderFilterColumnPlaceholder(def.field, def.headerFilterPlaceholder);\r\n\t\t\t}\r\n\r\n\t\t\tthis.table.modules.filter.initializeColumn(this);\r\n\t\t}\r\n\r\n\r\n\t\t//set resizable handles\r\n\t\tif(this.table.modExists(\"frozenColumns\")){\r\n\t\t\tthis.table.modules.frozenColumns.initializeColumn(this);\r\n\t\t}\r\n\r\n\t\t//set movable column\r\n\t\tif(this.table.options.movableColumns && !this.isGroup && this.table.modExists(\"moveColumn\")){\r\n\t\t\tthis.table.modules.moveColumn.initializeColumn(this);\r\n\t\t}\r\n\r\n\t\t//set calcs column\r\n\t\tif((def.topCalc || def.bottomCalc) && this.table.modExists(\"columnCalcs\")){\r\n\t\t\tthis.table.modules.columnCalcs.initializeColumn(this);\r\n\t\t}\r\n\r\n\t\t//handle persistence\r\n\t\tif(this.table.modExists(\"persistence\") && this.table.modules.persistence.config.columns){\r\n\t\t\tthis.table.modules.persistence.initializeColumn(this);\r\n\t\t}\r\n\r\n\r\n\t\t//update header tooltip on mouse enter\r\n\t\tthis.element.addEventListener(\"mouseenter\", (e) => {\r\n\t\t\tthis.setTooltip();\r\n\t\t});\r\n\t}\r\n\r\n\t_bindEvents(){\r\n\t\tvar def = this.definition,\r\n\t\tdblTap,\ttapHold, tap;\r\n\r\n\t\t//setup header click event bindings\r\n\t\tif(typeof(def.headerClick) == \"function\"){\r\n\t\t\tthis.element.addEventListener(\"click\", (e) => {def.headerClick(e, this.getComponent());});\r\n\t\t}\r\n\r\n\t\tif(typeof(def.headerDblClick) == \"function\"){\r\n\t\t\tthis.element.addEventListener(\"dblclick\", (e) => {def.headerDblClick(e, this.getComponent());});\r\n\t\t}\r\n\r\n\t\tif(typeof(def.headerContext) == \"function\"){\r\n\t\t\tthis.element.addEventListener(\"contextmenu\", (e) => {def.headerContext(e, this.getComponent());});\r\n\t\t}\r\n\r\n\t\t//setup header tap event bindings\r\n\t\tif(typeof(def.headerTap) == \"function\"){\r\n\t\t\ttap = false;\r\n\r\n\t\t\tthis.element.addEventListener(\"touchstart\", (e) => {\r\n\t\t\t\ttap = true;\r\n\t\t\t}, {passive: true});\r\n\r\n\t\t\tthis.element.addEventListener(\"touchend\", (e) => {\r\n\t\t\t\tif(tap){\r\n\t\t\t\t\tdef.headerTap(e, this.getComponent());\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttap = false;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(typeof(def.headerDblTap) == \"function\"){\r\n\t\t\tdblTap = null;\r\n\r\n\t\t\tthis.element.addEventListener(\"touchend\", (e) => {\r\n\r\n\t\t\t\tif(dblTap){\r\n\t\t\t\t\tclearTimeout(dblTap);\r\n\t\t\t\t\tdblTap = null;\r\n\r\n\t\t\t\t\tdef.headerDblTap(e, this.getComponent());\r\n\t\t\t\t}else{\r\n\r\n\t\t\t\t\tdblTap = setTimeout(() => {\r\n\t\t\t\t\t\tclearTimeout(dblTap);\r\n\t\t\t\t\t\tdblTap = null;\r\n\t\t\t\t\t}, 300);\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(typeof(def.headerTapHold) == \"function\"){\r\n\t\t\ttapHold = null;\r\n\r\n\t\t\tthis.element.addEventListener(\"touchstart\", (e) => {\r\n\t\t\t\tclearTimeout(tapHold);\r\n\r\n\t\t\t\ttapHold = setTimeout(function(){\r\n\t\t\t\t\tclearTimeout(tapHold);\r\n\t\t\t\t\ttapHold = null;\r\n\t\t\t\t\ttap = false;\r\n\t\t\t\t\tdef.headerTapHold(e, this.getComponent());\r\n\t\t\t\t}, 1000);\r\n\r\n\t\t\t}, {passive: true});\r\n\r\n\t\t\tthis.element.addEventListener(\"touchend\", (e) => {\r\n\t\t\t\tclearTimeout(tapHold);\r\n\t\t\t\ttapHold = null;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t//store column cell click event bindings\r\n\t\tif(typeof(def.cellClick) == \"function\"){\r\n\t\t\tthis.cellEvents.cellClick = def.cellClick;\r\n\t\t}\r\n\r\n\t\tif(typeof(def.cellDblClick) == \"function\"){\r\n\t\t\tthis.cellEvents.cellDblClick = def.cellDblClick;\r\n\t\t}\r\n\r\n\t\tif(typeof(def.cellContext) == \"function\"){\r\n\t\t\tthis.cellEvents.cellContext = def.cellContext;\r\n\t\t}\r\n\r\n\t\t//store column mouse event bindings\r\n\t\tif(typeof(def.cellMouseEnter) == \"function\"){\r\n\t\t\tthis.cellEvents.cellMouseEnter = def.cellMouseEnter;\r\n\t\t}\r\n\r\n\t\tif(typeof(def.cellMouseLeave) == \"function\"){\r\n\t\t\tthis.cellEvents.cellMouseLeave = def.cellMouseLeave;\r\n\t\t}\r\n\r\n\t\tif(typeof(def.cellMouseOver) == \"function\"){\r\n\t\t\tthis.cellEvents.cellMouseOver = def.cellMouseOver;\r\n\t\t}\r\n\r\n\t\tif(typeof(def.cellMouseOut) == \"function\"){\r\n\t\t\tthis.cellEvents.cellMouseOut = def.cellMouseOut;\r\n\t\t}\r\n\r\n\t\tif(typeof(def.cellMouseMove) == \"function\"){\r\n\t\t\tthis.cellEvents.cellMouseMove = def.cellMouseMove;\r\n\t\t}\r\n\r\n\t\t//setup column cell tap event bindings\r\n\t\tif(typeof(def.cellTap) == \"function\"){\r\n\t\t\tthis.cellEvents.cellTap = def.cellTap;\r\n\t\t}\r\n\r\n\t\tif(typeof(def.cellDblTap) == \"function\"){\r\n\t\t\tthis.cellEvents.cellDblTap = def.cellDblTap;\r\n\t\t}\r\n\r\n\t\tif(typeof(def.cellTapHold) == \"function\"){\r\n\t\t\tthis.cellEvents.cellTapHold = def.cellTapHold;\r\n\t\t}\r\n\r\n\t\t//setup column cell edit callbacks\r\n\t\tif(typeof(def.cellEdited) == \"function\"){\r\n\t\t\tthis.cellEvents.cellEdited = def.cellEdited;\r\n\t\t}\r\n\r\n\t\tif(typeof(def.cellEditing) == \"function\"){\r\n\t\t\tthis.cellEvents.cellEditing = def.cellEditing;\r\n\t\t}\r\n\r\n\t\tif(typeof(def.cellEditCancelled) == \"function\"){\r\n\t\t\tthis.cellEvents.cellEditCancelled = def.cellEditCancelled;\r\n\t\t}\r\n\t}\r\n\r\n\t//build header element for header\r\n\t_buildColumnHeader(){\r\n\t\tvar def = this.definition,\r\n\t\ttable = this.table,\r\n\t\tsortable;\r\n\r\n\t\t//set column sorter\r\n\t\tif(table.modExists(\"sort\")){\r\n\t\t\ttable.modules.sort.initializeColumn(this, this.titleHolderElement);\r\n\t\t}\r\n\r\n\t\t//set column header context menu\r\n\t\tif((def.headerContextMenu || def.headerClickMenu || def.headerMenu) && table.modExists(\"menu\")){\r\n\t\t\ttable.modules.menu.initializeColumnHeader(this);\r\n\t\t}\r\n\r\n\t\t//set column formatter\r\n\t\tif(table.modExists(\"format\")){\r\n\t\t\ttable.modules.format.initializeColumn(this);\r\n\t\t}\r\n\r\n\t\t//set column editor\r\n\t\tif(typeof def.editor != \"undefined\" && table.modExists(\"edit\")){\r\n\t\t\ttable.modules.edit.initializeColumn(this);\r\n\t\t}\r\n\r\n\t\t//set colum validator\r\n\t\tif(typeof def.validator != \"undefined\" && table.modExists(\"validate\")){\r\n\t\t\ttable.modules.validate.initializeColumn(this);\r\n\t\t}\r\n\r\n\r\n\t\t//set column mutator\r\n\t\tif(table.modExists(\"mutator\")){\r\n\t\t\ttable.modules.mutator.initializeColumn(this);\r\n\t\t}\r\n\r\n\t\t//set column accessor\r\n\t\tif(table.modExists(\"accessor\")){\r\n\t\t\ttable.modules.accessor.initializeColumn(this);\r\n\t\t}\r\n\r\n\t\t//set respoviveLayout\r\n\t\tif(typeof table.options.responsiveLayout && table.modExists(\"responsiveLayout\")){\r\n\t\t\ttable.modules.responsiveLayout.initializeColumn(this);\r\n\t\t}\r\n\r\n\t\t//set column visibility\r\n\t\tif(typeof def.visible != \"undefined\"){\r\n\t\t\tif(def.visible){\r\n\t\t\t\tthis.show(true);\r\n\t\t\t}else{\r\n\t\t\t\tthis.hide(true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//asign additional css classes to column header\r\n\t\tif(def.cssClass){\r\n\t\t\tvar classeNames = def.cssClass.split(\" \");\r\n\t\t\tclasseNames.forEach((className) => {\r\n\t\t\t\tthis.element.classList.add(className);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(def.field){\r\n\t\t\tthis.element.setAttribute(\"tabulator-field\", def.field);\r\n\t\t}\r\n\r\n\t\t//set min width if present\r\n\t\tthis.setMinWidth(typeof def.minWidth == \"undefined\" ? this.table.options.columnMinWidth : parseInt(def.minWidth));\r\n\r\n\t\tif(def.maxWidth || this.table.options.columnMaxWidth){\r\n\t\t\tif(def.maxWidth !== false){\r\n\t\t\t\tthis.setMaxWidth(typeof def.maxWidth == \"undefined\" ? this.table.options.columnMaxWidth : parseInt(def.maxWidth));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.reinitializeWidth();\r\n\r\n\t\t//set tooltip if present\r\n\t\tthis.tooltip = this.definition.tooltip || this.definition.tooltip === false ? this.definition.tooltip : this.table.options.tooltips;\r\n\r\n\t\t//set orizontal text alignment\r\n\t\tthis.hozAlign = typeof(this.definition.hozAlign) == \"undefined\" ? this.table.options.cellHozAlign : this.definition.hozAlign;\r\n\t\tthis.vertAlign = typeof(this.definition.vertAlign) == \"undefined\" ? this.table.options.cellVertAlign : this.definition.vertAlign;\r\n\r\n\t\tthis.titleElement.style.textAlign = this.definition.headerHozAlign || this.table.options.headerHozAlign;\r\n\t}\r\n\r\n\t_buildColumnHeaderContent(){\r\n\t\tvar def = this.definition,\r\n\t\ttable = this.table;\r\n\r\n\t\tvar contentElement = document.createElement(\"div\");\r\n\t\tcontentElement.classList.add(\"tabulator-col-content\");\r\n\r\n\t\tthis.titleHolderElement = document.createElement(\"div\");\r\n\t\tthis.titleHolderElement.classList.add(\"tabulator-col-title-holder\");\r\n\r\n\t\tcontentElement.appendChild(this.titleHolderElement);\r\n\r\n\t\tthis.titleElement = this._buildColumnHeaderTitle();\r\n\r\n\t\tthis.titleHolderElement.appendChild(this.titleElement);\r\n\r\n\t\treturn contentElement;\r\n\t}\r\n\r\n\t//build title element of column\r\n\t_buildColumnHeaderTitle(){\r\n\t\tvar def = this.definition,\r\n\t\ttable = this.table,\r\n\t\ttitle;\r\n\r\n\t\tvar titleHolderElement = document.createElement(\"div\");\r\n\t\ttitleHolderElement.classList.add(\"tabulator-col-title\");\r\n\r\n\t\tif(def.editableTitle){\r\n\t\t\tvar titleElement = document.createElement(\"input\");\r\n\t\t\ttitleElement.classList.add(\"tabulator-title-editor\");\r\n\r\n\t\t\ttitleElement.addEventListener(\"click\", (e) => {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\ttitleElement.focus();\r\n\t\t\t});\r\n\r\n\t\t\ttitleElement.addEventListener(\"change\", () => {\r\n\t\t\t\tdef.title = titleElement.value;\r\n\t\t\t\ttable.options.columnTitleChanged.call(this.table, this.getComponent());\r\n\t\t\t});\r\n\r\n\t\t\ttitleHolderElement.appendChild(titleElement);\r\n\r\n\t\t\tif(def.field){\r\n\t\t\t\ttable.modules.localize.bind(\"columns|\" + def.field, (text) => {\r\n\t\t\t\t\ttitleElement.value = text || (def.title || \"&nbsp;\");\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\ttitleElement.value  = def.title || \"&nbsp;\";\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\tif(def.field){\r\n\t\t\t\ttable.modules.localize.bind(\"columns|\" + def.field, (text) => {\r\n\t\t\t\t\tthis._formatColumnHeaderTitle(titleHolderElement, text || (def.title || \"&nbsp;\"));\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tthis._formatColumnHeaderTitle(titleHolderElement, def.title || \"&nbsp;\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn titleHolderElement;\r\n\t}\r\n\r\n\t_formatColumnHeaderTitle(el, title){\r\n\t\tvar formatter, contents, params, mockCell, onRendered;\r\n\r\n\t\tif(this.definition.titleFormatter && this.table.modExists(\"format\")){\r\n\r\n\t\t\tformatter = this.table.modules.format.getFormatter(this.definition.titleFormatter);\r\n\r\n\t\t\tonRendered = (callback) => {\r\n\t\t\t\tthis.titleFormatterRendered = callback;\r\n\t\t\t};\r\n\r\n\t\t\tmockCell = {\r\n\t\t\t\tgetValue:function(){\r\n\t\t\t\t\treturn title;\r\n\t\t\t\t},\r\n\t\t\t\tgetElement:function(){\r\n\t\t\t\t\treturn el;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tparams = this.definition.titleFormatterParams || {};\r\n\r\n\t\t\tparams = typeof params === \"function\" ? params() : params;\r\n\r\n\t\t\tcontents = formatter.call(this.table.modules.format, mockCell, params, onRendered);\r\n\r\n\t\t\tswitch(typeof contents){\r\n\t\t\t\tcase \"object\":\r\n\t\t\t\tif(contents instanceof Node){\r\n\t\t\t\t\tel.appendChild(contents);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tel.innerHTML = \"\";\r\n\t\t\t\t\tconsole.warn(\"Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", contents);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"undefined\":\r\n\t\t\t\tcase \"null\":\r\n\t\t\t\tel.innerHTML = \"\";\r\n\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\tel.innerHTML = contents;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tel.innerHTML = title;\r\n\t\t}\r\n\t}\r\n\r\n\t//build header element for column group\r\n\t_buildGroupHeader(){\r\n\t\tthis.element.classList.add(\"tabulator-col-group\");\r\n\t\tthis.element.setAttribute(\"role\", \"columngroup\");\r\n\t\tthis.element.setAttribute(\"aria-title\", this.definition.title);\r\n\r\n\t\t//asign additional css classes to column header\r\n\t\tif(this.definition.cssClass){\r\n\t\t\tvar classeNames = this.definition.cssClass.split(\" \");\r\n\t\t\tclasseNames.forEach((className) => {\r\n\t\t\t\tthis.element.classList.add(className);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t//set column header context menu\r\n\t\tif ((this.definition.headerContextMenu || this.definition.headerMenu) && this.table.modExists(\"menu\")) {\r\n\t\t\tthis.table.modules.menu.initializeColumnHeader(this);\r\n\t\t}\r\n\r\n\t\tthis.titleElement.style.textAlign = this.definition.headerHozAlign || this.table.options.headerHozAlign;\r\n\r\n\t\tthis.element.appendChild(this.groupElement);\r\n\t}\r\n\r\n\t//flat field lookup\r\n\t_getFlatData(data){\r\n\t\treturn data[this.field];\r\n\t}\r\n\r\n\t//nested field lookup\r\n\t_getNestedData(data){\r\n\t\tvar dataObj = data,\r\n\t\tstructure = this.fieldStructure,\r\n\t\tlength = structure.length,\r\n\t\toutput;\r\n\r\n\t\tfor(let i = 0; i < length; i++){\r\n\r\n\t\t\tdataObj = dataObj[structure[i]];\r\n\r\n\t\t\toutput = dataObj;\r\n\r\n\t\t\tif(!dataObj){\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\t//flat field set\r\n\t_setFlatData(data, value){\r\n\t\tif(this.field){\r\n\t\t\tdata[this.field] = value;\r\n\t\t}\r\n\t}\r\n\r\n\t//nested field set\r\n\t_setNestedData(data, value){\r\n\t\tvar dataObj = data,\r\n\t\tstructure = this.fieldStructure,\r\n\t\tlength = structure.length;\r\n\r\n\t\tfor(let i = 0; i < length; i++){\r\n\r\n\t\t\tif(i == length -1){\r\n\t\t\t\tdataObj[structure[i]] = value;\r\n\t\t\t}else{\r\n\t\t\t\tif(!dataObj[structure[i]]){\r\n\t\t\t\t\tif(typeof value !== \"undefined\"){\r\n\t\t\t\t\t\tdataObj[structure[i]] = {};\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdataObj = dataObj[structure[i]];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//attach column to this group\r\n\tattachColumn(column){\r\n\t\tif(this.groupElement){\r\n\t\t\tthis.columns.push(column);\r\n\t\t\tthis.groupElement.appendChild(column.getElement());\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Column Warning - Column being attached to another column instead of column group\");\r\n\t\t}\r\n\t}\r\n\r\n\t//vertically align header in column\r\n\tverticalAlign(alignment, height){\r\n\r\n\t\t//calculate height of column header and group holder element\r\n\t\tvar parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : (height || this.parent.getHeadersElement().clientHeight);\r\n\t\t// var parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : this.parent.getHeadersElement().clientHeight;\r\n\r\n\t\tthis.element.style.height = parentHeight + \"px\";\r\n\r\n\t\tif(this.isGroup){\r\n\t\t\tthis.groupElement.style.minHeight = (parentHeight - this.contentElement.offsetHeight) + \"px\";\r\n\t\t}\r\n\r\n\t\t//vertically align cell contents\r\n\t\tif(!this.isGroup && alignment !== \"top\"){\r\n\t\t\tif(alignment === \"bottom\"){\r\n\t\t\t\tthis.element.style.paddingTop = (this.element.clientHeight - this.contentElement.offsetHeight) + \"px\";\r\n\t\t\t}else{\r\n\t\t\t\tthis.element.style.paddingTop = ((this.element.clientHeight - this.contentElement.offsetHeight) / 2) + \"px\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.columns.forEach(function(column){\r\n\t\t\tcolumn.verticalAlign(alignment);\r\n\t\t});\r\n\t}\r\n\r\n\t//clear vertical alignmenet\r\n\tclearVerticalAlign(){\r\n\t\tthis.element.style.paddingTop = \"\";\r\n\t\tthis.element.style.height = \"\";\r\n\t\tthis.element.style.minHeight = \"\";\r\n\t\tthis.groupElement.style.minHeight = \"\";\r\n\r\n\t\tthis.columns.forEach(function(column){\r\n\t\t\tcolumn.clearVerticalAlign();\r\n\t\t});\r\n\t}\r\n\r\n\tbindModuleColumns (){\r\n\t\t//check if rownum formatter is being used on a column\r\n\t\tif(this.definition.formatter == \"rownum\"){\r\n\t\t\tthis.table.rowManager.rowNumColumn = this;\r\n\t\t}\r\n\t}\r\n\r\n\t//// Retreive Column Information ////\r\n\t//return column header element\r\n\tgetElement(){\r\n\t\treturn this.element;\r\n\t}\r\n\r\n\t//return colunm group element\r\n\tgetGroupElement(){\r\n\t\treturn this.groupElement;\r\n\t}\r\n\r\n\t//return field name\r\n\tgetField(){\r\n\t\treturn this.field;\r\n\t}\r\n\r\n\t//return the first column in a group\r\n\tgetFirstColumn(){\r\n\t\tif(!this.isGroup){\r\n\t\t\treturn this;\r\n\t\t}else{\r\n\t\t\tif(this.columns.length){\r\n\t\t\t\treturn this.columns[0].getFirstColumn();\r\n\t\t\t}else{\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//return the last column in a group\r\n\tgetLastColumn(){\r\n\t\tif(!this.isGroup){\r\n\t\t\treturn this;\r\n\t\t}else{\r\n\t\t\tif(this.columns.length){\r\n\t\t\t\treturn this.columns[this.columns.length -1].getLastColumn();\r\n\t\t\t}else{\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//return all columns in a group\r\n\tgetColumns(){\r\n\t\treturn this.columns;\r\n\t}\r\n\r\n\t//return all columns in a group\r\n\tgetCells(){\r\n\t\treturn this.cells;\r\n\t}\r\n\r\n\t//retreive the top column in a group of columns\r\n\tgetTopColumn(){\r\n\t\tif(this.parent.isGroup){\r\n\t\t\treturn this.parent.getTopColumn();\r\n\t\t}else{\r\n\t\t\treturn this;\r\n\t\t}\r\n\t}\r\n\r\n\t//return column definition object\r\n\tgetDefinition(updateBranches){\r\n\t\tvar colDefs = [];\r\n\r\n\t\tif(this.isGroup && updateBranches){\r\n\t\t\tthis.columns.forEach(function(column){\r\n\t\t\t\tcolDefs.push(column.getDefinition(true));\r\n\t\t\t});\r\n\r\n\t\t\tthis.definition.columns = colDefs;\r\n\t\t}\r\n\r\n\t\treturn this.definition;\r\n\t}\r\n\r\n\t//////////////////// Actions ////////////////////\r\n\tcheckColumnVisibility(){\r\n\t\tvar visible = false;\r\n\r\n\t\tthis.columns.forEach(function(column){\r\n\t\t\tif(column.visible){\r\n\t\t\t\tvisible = true;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(visible){\r\n\t\t\tthis.show();\r\n\t\t\tthis.parent.table.options.columnVisibilityChanged.call(this.table, this.getComponent(), false);\r\n\t\t}else{\r\n\t\t\tthis.hide();\r\n\t\t}\r\n\t}\r\n\r\n\t//show column\r\n\tshow(silent, responsiveToggle){\r\n\t\tif(!this.visible){\r\n\t\t\tthis.visible = true;\r\n\r\n\t\t\tthis.element.style.display = \"\";\r\n\r\n\t\t\tif(this.parent.isGroup){\r\n\t\t\t\tthis.parent.checkColumnVisibility();\r\n\t\t\t}\r\n\r\n\t\t\tthis.cells.forEach(function(cell){\r\n\t\t\t\tcell.show();\r\n\t\t\t});\r\n\r\n\t\t\tif(!this.isGroup && this.width === null){\r\n\t\t\t\tthis.reinitializeWidth();\r\n\t\t\t}\r\n\r\n\t\t\tthis.table.columnManager._verticalAlignHeaders();\r\n\r\n\t\t\tif(this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.columns){\r\n\t\t\t\tthis.table.modules.persistence.save(\"columns\");\r\n\t\t\t}\r\n\r\n\t\t\tif(!responsiveToggle && this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\r\n\t\t\t\tthis.table.modules.responsiveLayout.updateColumnVisibility(this, this.visible);\r\n\t\t\t}\r\n\r\n\t\t\tif(!silent){\r\n\t\t\t\tthis.table.options.columnVisibilityChanged.call(this.table, this.getComponent(), true);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.parent.isGroup){\r\n\t\t\t\tthis.parent.matchChildWidths();\r\n\t\t\t}\r\n\r\n\t\t\tif(!this.silent && this.table.options.virtualDomHoz){\r\n\t\t\t\tthis.table.vdomHoz.reinitialize();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//hide column\r\n\thide(silent, responsiveToggle){\r\n\t\tif(this.visible){\r\n\t\t\tthis.visible = false;\r\n\r\n\t\t\tthis.element.style.display = \"none\";\r\n\r\n\t\t\tthis.table.columnManager._verticalAlignHeaders();\r\n\r\n\t\t\tif(this.parent.isGroup){\r\n\t\t\t\tthis.parent.checkColumnVisibility();\r\n\t\t\t}\r\n\r\n\t\t\tthis.cells.forEach(function(cell){\r\n\t\t\t\tcell.hide();\r\n\t\t\t});\r\n\r\n\t\t\tif(this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.columns){\r\n\t\t\t\tthis.table.modules.persistence.save(\"columns\");\r\n\t\t\t}\r\n\r\n\t\t\tif(!responsiveToggle && this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\r\n\t\t\t\tthis.table.modules.responsiveLayout.updateColumnVisibility(this, this.visible);\r\n\t\t\t}\r\n\r\n\t\t\tif(!silent){\r\n\t\t\t\tthis.table.options.columnVisibilityChanged.call(this.table, this.getComponent(), false);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.parent.isGroup){\r\n\t\t\t\tthis.parent.matchChildWidths();\r\n\t\t\t}\r\n\r\n\t\t\tif(!this.silent && this.table.options.virtualDomHoz){\r\n\t\t\t\tthis.table.vdomHoz.reinitialize();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tmatchChildWidths(){\r\n\t\tvar childWidth = 0;\r\n\r\n\t\tif(this.contentElement && this.columns.length){\r\n\t\t\tthis.columns.forEach(function(column){\r\n\t\t\t\tif(column.visible){\r\n\t\t\t\t\tchildWidth += column.getWidth();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.contentElement.style.maxWidth = (childWidth - 1) + \"px\";\r\n\r\n\t\t\tif(this.parent.isGroup){\r\n\t\t\t\tthis.parent.matchChildWidths();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tremoveChild(child){\r\n\t\tvar index = this.columns.indexOf(child);\r\n\r\n\t\tif(index > -1){\r\n\t\t\tthis.columns.splice(index, 1);\r\n\t\t}\r\n\r\n\t\tif(!this.columns.length){\r\n\t\t\tthis.delete();\r\n\t\t}\r\n\t}\r\n\r\n\tsetWidth(width){\r\n\t\tthis.widthFixed = true;\r\n\t\tthis.setWidthActual(width);\r\n\t}\r\n\r\n\tsetWidthActual(width){\r\n\t\tif(isNaN(width)){\r\n\t\t\twidth = Math.floor((this.table.element.clientWidth/100) * parseInt(width));\r\n\t\t}\r\n\r\n\t\twidth = Math.max(this.minWidth, width);\r\n\r\n\t\tif(this.maxWidth){\r\n\t\t\twidth = Math.min(this.maxWidth, width);\r\n\t\t}\r\n\r\n\t\tthis.width = width;\r\n\t\tthis.widthStyled = width ? width + \"px\" : \"\";\r\n\r\n\t\tthis.element.style.width = this.widthStyled;\r\n\r\n\t\tif(!this.isGroup){\r\n\t\t\tthis.cells.forEach(function(cell){\r\n\t\t\t\tcell.setWidth();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(this.parent.isGroup){\r\n\t\t\tthis.parent.matchChildWidths();\r\n\t\t}\r\n\r\n\t\t//set resizable handles\r\n\t\tif(this.table.modExists(\"frozenColumns\")){\r\n\t\t\tthis.table.modules.frozenColumns.layout();\r\n\t\t}\r\n\t}\r\n\r\n\tcheckCellHeights(){\r\n\t\tvar rows = [];\r\n\r\n\t\tthis.cells.forEach(function(cell){\r\n\t\t\tif(cell.row.heightInitialized){\r\n\t\t\t\tif(cell.row.getElement().offsetParent !== null){\r\n\t\t\t\t\trows.push(cell.row);\r\n\t\t\t\t\tcell.row.clearCellHeight();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcell.row.heightInitialized = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\trows.forEach(function(row){\r\n\t\t\trow.calcHeight();\r\n\t\t});\r\n\r\n\t\trows.forEach(function(row){\r\n\t\t\trow.setCellHeight();\r\n\t\t});\r\n\t}\r\n\r\n\tgetWidth(){\r\n\t\tvar width = 0;\r\n\r\n\t\tif(this.isGroup){\r\n\t\t\tthis.columns.forEach(function(column){\r\n\t\t\t\tif(column.visible){\r\n\t\t\t\t\twidth += column.getWidth();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\twidth = this.width;\r\n\t\t}\r\n\r\n\t\treturn width;\r\n\t}\r\n\r\n\tgetHeight(){\r\n\t\treturn this.element.offsetHeight;\r\n\t}\r\n\r\n\tsetMinWidth(minWidth){\r\n\t\tthis.minWidth = minWidth;\r\n\t\tthis.minWidthStyled = minWidth ? minWidth + \"px\" : \"\";\r\n\r\n\t\tthis.element.style.minWidth = this.minWidthStyled;\r\n\r\n\t\tthis.cells.forEach(function(cell){\r\n\t\t\tcell.setMinWidth();\r\n\t\t});\r\n\t}\r\n\r\n\tsetMaxWidth(maxWidth){\r\n\t\tthis.maxWidth = maxWidth;\r\n\t\tthis.maxWidthStyled = maxWidth ? maxWidth + \"px\" : \"\";\r\n\r\n\t\tthis.element.style.maxWidth = this.maxWidthStyled;\r\n\r\n\t\tthis.cells.forEach(function(cell){\r\n\t\t\tcell.setMaxWidth();\r\n\t\t});\r\n\t}\r\n\r\n\tdelete(){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tvar index;\r\n\r\n\t\t\tif(this.isGroup){\r\n\t\t\t\tthis.columns.forEach(function(column){\r\n\t\t\t\t\tcolumn.delete();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t//cancel edit if column is currently being edited\r\n\t\t\tif(this.table.modExists(\"edit\")){\r\n\t\t\t\tif(this.table.modules.edit.currentCell.column === this){\r\n\t\t\t\t\tthis.table.modules.edit.cancelEdit();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar cellCount = this.cells.length;\r\n\r\n\t\t\tfor(let i = 0; i < cellCount; i++){\r\n\t\t\t\tthis.cells[0].delete();\r\n\t\t\t}\r\n\r\n\t\t\tif(this.element.parentNode){\r\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\r\n\t\t\t}\r\n\r\n\t\t\tthis.element = false;\r\n\t\t\tthis.contentElement = false;\r\n\t\t\tthis.titleElement = false;\r\n\t\t\tthis.groupElement = false;\r\n\r\n\t\t\tif(this.parent.isGroup){\r\n\t\t\t\tthis.parent.removeChild(this);\r\n\t\t\t}\r\n\r\n\t\t\tthis.table.columnManager.deregisterColumn(this);\r\n\r\n\t\t\tif(this.table.options.virtualDomHoz){\r\n\t\t\t\tthis.table.vdomHoz.reinitialize(true);\r\n\t\t\t}\r\n\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\r\n\tcolumnRendered(){\r\n\t\tif(this.titleFormatterRendered){\r\n\t\t\tthis.titleFormatterRendered();\r\n\t\t}\r\n\t}\r\n\r\n\tvalidate(){\r\n\t\tvar invalid = [];\r\n\r\n\t\tthis.cells.forEach(function(cell){\r\n\t\t\tif(!cell.validate()){\r\n\t\t\t\tinvalid.push(cell.getComponent());\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn invalid.length ? invalid : true;\r\n\t}\r\n\r\n\t//////////////// Cell Management /////////////////\r\n\t//generate cell for this column\r\n\tgenerateCell(row){\r\n\t\tvar cell = new Cell(this, row);\r\n\r\n\t\tthis.cells.push(cell);\r\n\r\n\t\treturn cell;\r\n\t}\r\n\r\n\tnextColumn(){\r\n\t\tvar index = this.table.columnManager.findColumnIndex(this);\r\n\t\treturn index > -1 ? this._nextVisibleColumn(index + 1) : false;\r\n\t}\r\n\r\n\t_nextVisibleColumn(index){\r\n\t\tvar column = this.table.columnManager.getColumnByIndex(index);\r\n\t\treturn !column || column.visible ? column : this._nextVisibleColumn(index + 1);\r\n\t}\r\n\r\n\tprevColumn(){\r\n\t\tvar index = this.table.columnManager.findColumnIndex(this);\r\n\t\treturn index > -1 ? this._prevVisibleColumn(index - 1) : false;\r\n\t}\r\n\r\n\t_prevVisibleColumn(index){\r\n\t\tvar column = this.table.columnManager.getColumnByIndex(index);\r\n\t\treturn !column || column.visible ? column : this._prevVisibleColumn(index - 1);\r\n\t}\r\n\r\n\treinitializeWidth(force){\r\n\t\tthis.widthFixed = false;\r\n\r\n\t\t//set width if present\r\n\t\tif(typeof this.definition.width !== \"undefined\" && !force){\r\n\t\t\tthis.setWidth(this.definition.width);\r\n\t\t}\r\n\r\n\t\t//hide header filters to prevent them altering column width\r\n\t\tif(this.table.modExists(\"filter\")){\r\n\t\t\tthis.table.modules.filter.hideHeaderFilterElements();\r\n\t\t}\r\n\r\n\t\tthis.fitToData();\r\n\r\n\t\t//show header filters again after layout is complete\r\n\t\tif(this.table.modExists(\"filter\")){\r\n\t\t\tthis.table.modules.filter.showHeaderFilterElements();\r\n\t\t}\r\n\t}\r\n\r\n\t//set column width to maximum cell width\r\n\tfitToData(){\r\n\t\tif(!this.widthFixed){\r\n\t\t\tthis.element.style.width = \"\";\r\n\r\n\t\t\tthis.cells.forEach((cell) => {\r\n\t\t\t\tcell.clearWidth();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tvar maxWidth = this.element.offsetWidth;\r\n\r\n\t\tif(!this.width || !this.widthFixed){\r\n\t\t\tthis.cells.forEach((cell) => {\r\n\t\t\t\tvar width = cell.getWidth();\r\n\r\n\t\t\t\tif(width > maxWidth){\r\n\t\t\t\t\tmaxWidth = width;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(maxWidth){\r\n\t\t\t\tthis.setWidthActual(maxWidth + 1);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tupdateDefinition(updates){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tvar definition;\r\n\r\n\t\t\tif(!this.isGroup){\r\n\t\t\t\tif(!this.parent.isGroup){\r\n\t\t\t\t\tdefinition = Object.assign({}, this.getDefinition());\r\n\t\t\t\t\tdefinition = Object.assign(definition, updates);\r\n\r\n\t\t\t\t\tthis.table.columnManager.addColumn(definition, false, this)\r\n\t\t\t\t\t.then((column) => {\r\n\r\n\t\t\t\t\t\tif(definition.field == this.field){\r\n\t\t\t\t\t\t\tthis.field = false; //cleair field name to prevent deletion of duplicate column from arrays\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis.delete()\r\n\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\tresolve(column.getComponent());\r\n\t\t\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\t\t\treject(err);\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\t\treject(err);\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Column Update Error - The updateDefinition function is only available on ungrouped columns\");\r\n\t\t\t\t\treject(\"Column Update Error - The updateDefinition function is only available on columns, not column groups\");\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Column Update Error - The updateDefinition function is only available on ungrouped columns\");\r\n\t\t\t\treject(\"Column Update Error - The updateDefinition function is only available on columns, not column groups\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tdeleteCell(cell){\r\n\t\tvar index = this.cells.indexOf(cell);\r\n\r\n\t\tif(index > -1){\r\n\t\t\tthis.cells.splice(index, 1);\r\n\t\t}\r\n\t}\r\n\r\n\t//////////////// Object Generation /////////////////\r\n\tgetComponent(){\r\n\t\tif(!this.component){\r\n\t\t\tthis.component = new ColumnComponent(this);\r\n\t\t}\r\n\r\n\t\treturn this.component;\r\n\t}\r\n}\r\n\r\nColumn.defaultOptionList = defaultOptions;\r\n\r\nexport default Column;","export default class Helpers{\r\n\r\n\tstatic elVisible(el){\r\n\t\treturn !(el.offsetWidth <= 0 && el.offsetHeight <= 0);\r\n\t}\r\n\r\n\tstatic elOffset(el){\r\n\t\tvar box = el.getBoundingClientRect();\r\n\r\n\t\treturn {\r\n\t\t\ttop: box.top + window.pageYOffset - document.documentElement.clientTop,\r\n\t\t\tleft: box.left + window.pageXOffset - document.documentElement.clientLeft\r\n\t\t};\r\n\t}\r\n\r\n\tstatic deepClone(obj){\r\n\t\tvar clone = Object.assign(Array.isArray(obj) ? [] : {}, obj);\r\n\r\n\t\tfor(var i in obj) {\r\n\t\t\tif(obj[i] != null && typeof(obj[i])  === \"object\"){\r\n\t\t\t\tif (obj[i] instanceof Date) {\r\n\t\t\t\t\tclone[i] = new Date(obj[i]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tclone[i] = this.deepClone(obj[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn clone;\r\n\t}\r\n}","import Column from './column/Column.js';\r\nimport Helpers from './Helpers.js';\r\n\r\nexport default class ColumnManager {\r\n\r\n\tconstructor (table){\r\n\t\tthis.table = table; //hold parent table\r\n\t\tthis.blockHozScrollEvent = false;\r\n\t\tthis.headersElement = this.createHeadersElement();\r\n\t\tthis.element = this.createHeaderElement(); //containing element\r\n\t\tthis.rowManager = null; //hold row manager object\r\n\t\tthis.columns = []; // column definition object\r\n\t\tthis.columnsByIndex = []; //columns by index\r\n\t\tthis.columnsByField = {}; //columns by field\r\n\t\tthis.scrollLeft = 0;\r\n\r\n\t\tthis.element.insertBefore(this.headersElement, this.element.firstChild);\r\n\t}\r\n\r\n\t////////////// Setup Functions /////////////////\r\n\r\n\tcreateHeadersElement (){\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tel.classList.add(\"tabulator-headers\");\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\tcreateHeaderElement (){\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tel.classList.add(\"tabulator-header\");\r\n\r\n\t\tif(!this.table.options.headerVisible){\r\n\t\t\tel.classList.add(\"tabulator-header-hidden\");\r\n\t\t}\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\tinitialize (){\r\n\t\t//scroll body along with header\r\n\t\t// this.element.addEventListener(\"scroll\", (e) => {\r\n\t\t// \tif(!this.blockHozScrollEvent){\r\n\t\t// \t\tthis.table.rowManager.scrollHorizontal(this.element.scrollLeft);\r\n\t\t// \t}\r\n\t\t// });\r\n\t}\r\n\r\n\t//link to row manager\r\n\tsetRowManager(manager){\r\n\t\tthis.rowManager = manager;\r\n\t}\r\n\r\n\t//return containing element\r\n\tgetElement(){\r\n\t\treturn this.element;\r\n\t}\r\n\r\n\t//return header containing element\r\n\tgetHeadersElement(){\r\n\t\treturn this.headersElement;\r\n\t}\r\n\r\n\t//scroll horizontally to match table body\r\n\tscrollHorizontal(left){\r\n\t\tvar hozAdjust = 0,\r\n\t\tscrollWidth = this.element.scrollWidth - this.table.element.clientWidth;\r\n\r\n\t\t// this.tempScrollBlock();\r\n\t\tthis.element.scrollLeft = left;\r\n\r\n\t\t//adjust for vertical scrollbar moving table when present\r\n\t\tif(left > scrollWidth){\r\n\t\t\thozAdjust = left - scrollWidth;\r\n\t\t\tthis.element.style.marginLeft = (-(hozAdjust)) + \"px\";\r\n\t\t}else{\r\n\t\t\tthis.element.style.marginLeft = 0;\r\n\t\t}\r\n\r\n\t\t//keep frozen columns fixed in position\r\n\t\t//this._calcFrozenColumnsPos(hozAdjust + 3);\r\n\r\n\t\tthis.scrollLeft = left;\r\n\r\n\t\tif(this.table.modExists(\"frozenColumns\")){\r\n\t\t\tthis.table.modules.frozenColumns.scrollHorizontal();\r\n\t\t}\r\n\t}\r\n\r\n\t///////////// Column Setup Functions /////////////\r\n\tgenerateColumnsFromRowData(data){\r\n\t\tvar cols = [],\r\n\t\tdefinitions = this.table.options.autoColumnsDefinitions,\r\n\t\trow, sorter;\r\n\r\n\t\tif(data && data.length){\r\n\r\n\t\t\trow = data[0];\r\n\r\n\t\t\tfor(var key in row){\r\n\t\t\t\tlet col = {\r\n\t\t\t\t\tfield:key,\r\n\t\t\t\t\ttitle:key,\r\n\t\t\t\t};\r\n\r\n\t\t\t\tlet value = row[key];\r\n\r\n\t\t\t\tswitch(typeof value){\r\n\t\t\t\t\tcase \"undefined\":\r\n\t\t\t\t\tsorter = \"string\";\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase \"boolean\":\r\n\t\t\t\t\tsorter = \"boolean\";\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase \"object\":\r\n\t\t\t\t\tif(Array.isArray(value)){\r\n\t\t\t\t\t\tsorter = \"array\";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tsorter = \"string\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\tif(!isNaN(value) && value !== \"\"){\r\n\t\t\t\t\t\tsorter = \"number\";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)){\r\n\t\t\t\t\t\t\tsorter = \"alphanum\";\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tsorter = \"string\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcol.sorter = sorter;\r\n\r\n\t\t\t\tcols.push(col);\r\n\t\t\t}\r\n\r\n\t\t\tif(definitions){\r\n\r\n\t\t\t\tswitch(typeof definitions){\r\n\t\t\t\t\tcase \"function\":\r\n\t\t\t\t\t\tthis.table.options.columns = definitions.call(this.table, cols);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase \"object\":\r\n\t\t\t\t\t\tif(Array.isArray(definitions)){\r\n\t\t\t\t\t\t\tcols.forEach((col) => {\r\n\t\t\t\t\t\t\t\tvar match = definitions.find((def) => {\r\n\t\t\t\t\t\t\t\t\treturn def.field === col.field;\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\tif(match){\r\n\t\t\t\t\t\t\t\t\tObject.assign(col, match);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tcols.forEach((col) => {\r\n\t\t\t\t\t\t\t\tif(definitions[col.field]){\r\n\t\t\t\t\t\t\t\t\tObject.assign(col, definitions[col.field]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis.table.options.columns = cols;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.table.options.columns = cols;\r\n\t\t\t}\r\n\r\n\t\t\tthis.setColumns(this.table.options.columns);\r\n\t\t}\r\n\t}\r\n\r\n\tsetColumns(cols, row){\r\n\t\twhile(this.headersElement.firstChild) this.headersElement.removeChild(this.headersElement.firstChild);\r\n\r\n\t\tthis.columns = [];\r\n\t\tthis.columnsByIndex = [];\r\n\t\tthis.columnsByField = {};\r\n\r\n\t\t//reset frozen columns\r\n\t\tif(this.table.modExists(\"frozenColumns\")){\r\n\t\t\tthis.table.modules.frozenColumns.reset();\r\n\t\t}\r\n\r\n\t\tcols.forEach((def, i) => {\r\n\t\t\tthis._addColumn(def);\r\n\t\t});\r\n\r\n\t\tthis._reIndexColumns();\r\n\r\n\t\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\r\n\t\t\tthis.table.modules.responsiveLayout.initialize();\r\n\t\t}\r\n\r\n\t\tif(this.table.options.virtualDomHoz){\r\n\t\t\tthis.table.vdomHoz.reinitialize(false, true);\r\n\t\t}\r\n\r\n\t\tthis.redraw(true);\r\n\t}\r\n\r\n\t_addColumn(definition, before, nextToColumn){\r\n\t\tvar column = new Column(definition, this),\r\n\t\tcolEl = column.getElement(),\r\n\t\tindex = nextToColumn ? this.findColumnIndex(nextToColumn) : nextToColumn;\r\n\r\n\t\tif(nextToColumn && index > -1){\r\n\r\n\t\t\tvar parentIndex = this.columns.indexOf(nextToColumn.getTopColumn());\r\n\t\t\tvar nextEl = nextToColumn.getElement();\r\n\r\n\t\t\tif(before){\r\n\t\t\t\tthis.columns.splice(parentIndex, 0, column);\r\n\t\t\t\tnextEl.parentNode.insertBefore(colEl, nextEl);\r\n\t\t\t}else{\r\n\t\t\t\tthis.columns.splice(parentIndex + 1, 0, column);\r\n\t\t\t\tnextEl.parentNode.insertBefore(colEl, nextEl.nextSibling);\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\tif(before){\r\n\t\t\t\tthis.columns.unshift(column);\r\n\t\t\t\tthis.headersElement.insertBefore(column.getElement(), this.headersElement.firstChild);\r\n\t\t\t}else{\r\n\t\t\t\tthis.columns.push(column);\r\n\t\t\t\tthis.headersElement.appendChild(column.getElement());\r\n\t\t\t}\r\n\r\n\t\t\tcolumn.columnRendered();\r\n\t\t}\r\n\r\n\t\treturn column;\r\n\t}\r\n\r\n\tregisterColumnField(col){\r\n\t\tif(col.definition.field){\r\n\t\t\tthis.columnsByField[col.definition.field] = col;\r\n\t\t}\r\n\t}\r\n\r\n\tregisterColumnPosition(col){\r\n\t\tthis.columnsByIndex.push(col);\r\n\t}\r\n\r\n\t_reIndexColumns(){\r\n\t\tthis.columnsByIndex = [];\r\n\r\n\t\tthis.columns.forEach(function(column){\r\n\t\t\tcolumn.reRegisterPosition();\r\n\t\t});\r\n\t}\r\n\r\n\t//ensure column headers take up the correct amount of space in column groups\r\n\t_verticalAlignHeaders(){\r\n\t\tvar minHeight = 0;\r\n\r\n\t\tthis.columns.forEach((column) => {\r\n\t\t\tvar height;\r\n\r\n\t\t\tcolumn.clearVerticalAlign();\r\n\r\n\t\t\theight = column.getHeight();\r\n\r\n\t\t\tif(height > minHeight){\r\n\t\t\t\tminHeight = height;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.columns.forEach((column) => {\r\n\t\t\tcolumn.verticalAlign(this.table.options.columnHeaderVertAlign, minHeight);\r\n\t\t});\r\n\r\n\t\tthis.rowManager.adjustTableSize();\r\n\t}\r\n\r\n\t//////////////// Column Details /////////////////\r\n\tfindColumn(subject){\r\n\t\tif(typeof subject == \"object\"){\r\n\r\n\t\t\tif(subject instanceof Column){\r\n\t\t\t\t//subject is column element\r\n\t\t\t\treturn subject;\r\n\t\t\t}else if(subject instanceof ColumnComponent){\r\n\t\t\t\t//subject is public column component\r\n\t\t\t\treturn subject._getSelf() || false;\r\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement){\r\n\t\t\t\t//subject is a HTML element of the column header\r\n\t\t\t\tlet match = this.columns.find((column) => {\r\n\t\t\t\t\treturn column.element === subject;\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn match || false;\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\t//subject should be treated as the field name of the column\r\n\t\t\treturn this.columnsByField[subject] || false;\r\n\t\t}\r\n\r\n\t\t//catch all for any other type of input\r\n\t\treturn false;\r\n\t}\r\n\r\n\tgetColumnByField(field){\r\n\t\treturn this.columnsByField[field];\r\n\t}\r\n\r\n\tgetColumnsByFieldRoot(root){\r\n\t\tvar matches = [];\r\n\r\n\t\tObject.keys(this.columnsByField).forEach((field) => {\r\n\t\t\tvar fieldRoot = field.split(\".\")[0];\r\n\t\t\tif(fieldRoot === root){\r\n\t\t\t\tmatches.push(this.columnsByField[field]);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn matches;\r\n\t}\r\n\r\n\tgetColumnByIndex(index){\r\n\t\treturn this.columnsByIndex[index];\r\n\t}\r\n\r\n\tgetFirstVisibileColumn(index){\r\n\t\tvar index = this.columnsByIndex.findIndex((col) => {\r\n\t\t\treturn col.visible;\r\n\t\t});\r\n\r\n\t\treturn index > -1 ? this.columnsByIndex[index] : false;\r\n\t}\r\n\r\n\tgetColumns(){\r\n\t\treturn this.columns;\r\n\t}\r\n\r\n\tfindColumnIndex(column){\r\n\t\treturn this.columnsByIndex.findIndex((col) => {\r\n\t\t\treturn column === col;\r\n\t\t});\r\n\t}\r\n\r\n\t//return all columns that are not groups\r\n\tgetRealColumns(){\r\n\t\treturn this.columnsByIndex;\r\n\t}\r\n\r\n\t//travers across columns and call action\r\n\ttraverse(callback){\r\n\t\tthis.columnsByIndex.forEach((column,i) =>{\r\n\t\t\tcallback(column, i);\r\n\t\t});\r\n\t}\r\n\r\n\t//get defintions of actual columns\r\n\tgetDefinitions(active){\r\n\t\tvar output = [];\r\n\r\n\t\tthis.columnsByIndex.forEach((column) => {\r\n\t\t\tif(!active || (active && column.visible)){\r\n\t\t\t\toutput.push(column.getDefinition());\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\t//get full nested definition tree\r\n\tgetDefinitionTree(){\r\n\t\tvar output = [];\r\n\r\n\t\tthis.columns.forEach((column) => {\r\n\t\t\toutput.push(column.getDefinition(true));\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgetComponents(structured){\r\n\t\tvar output = [],\r\n\t\tcolumns = structured ? this.columns : this.columnsByIndex;\r\n\r\n\t\tcolumns.forEach((column) => {\r\n\t\t\toutput.push(column.getComponent());\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgetWidth(){\r\n\t\tvar width = 0;\r\n\r\n\t\tthis.columnsByIndex.forEach((column) => {\r\n\t\t\tif(column.visible){\r\n\t\t\t\twidth += column.getWidth();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn width;\r\n\t}\r\n\r\n\tmoveColumn(from, to, after){\r\n\t\tthis.moveColumnActual(from, to, after);\r\n\r\n\t\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\r\n\t\t\tthis.table.modules.responsiveLayout.initialize();\r\n\t\t}\r\n\r\n\t\tif(this.table.modExists(\"columnCalcs\")){\r\n\t\t\tthis.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\r\n\t\t}\r\n\r\n\t\tto.element.parentNode.insertBefore(from.element, to.element);\r\n\r\n\t\tif(after){\r\n\t\t\tto.element.parentNode.insertBefore(to.element, from.element);\r\n\t\t}\r\n\r\n\t\tthis._verticalAlignHeaders();\r\n\r\n\t\tthis.table.rowManager.reinitialize();\r\n\t}\r\n\r\n\tmoveColumnActual(from, to, after){\r\n\r\n\t\tif(from.parent.isGroup){\r\n\t\t\tthis._moveColumnInArray(from.parent.columns, from, to, after);\r\n\t\t}else{\r\n\t\t\tthis._moveColumnInArray(this.columns, from, to, after);\r\n\t\t}\r\n\r\n\t\tthis._moveColumnInArray(this.columnsByIndex, from, to, after, true);\r\n\r\n\t\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\r\n\t\t\tthis.table.modules.responsiveLayout.initialize();\r\n\t\t}\r\n\r\n\t\tif(this.table.options.virtualDomHoz){\r\n\t\t\tthis.table.vdomHoz.reinitialize(true);\r\n\t\t}\r\n\r\n\t\tif(this.table.options.columnMoved){\r\n\t\t\tthis.table.options.columnMoved.call(this.table, from.getComponent(), this.table.columnManager.getComponents());\r\n\t\t}\r\n\r\n\t\tif(this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.columns){\r\n\t\t\tthis.table.modules.persistence.save(\"columns\");\r\n\t\t}\r\n\t}\r\n\r\n\t_moveColumnInArray(columns, from, to, after, updateRows){\r\n\t\tvar\tfromIndex = columns.indexOf(from),\r\n\t\ttoIndex, rows = [];\r\n\r\n\t\tif (fromIndex > -1) {\r\n\r\n\t\t\tcolumns.splice(fromIndex, 1);\r\n\r\n\t\t\ttoIndex = columns.indexOf(to);\r\n\r\n\t\t\tif (toIndex > -1) {\r\n\r\n\t\t\t\tif(after){\r\n\t\t\t\t\ttoIndex = toIndex+1;\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\ttoIndex = fromIndex;\r\n\t\t\t}\r\n\r\n\t\t\tcolumns.splice(toIndex, 0, from);\r\n\r\n\t\t\tif(updateRows){\r\n\r\n\t\t\t\tif(this.table.options.dataTree && this.table.modExists(\"dataTree\", true)){\r\n\t\t\t\t\tthis.table.rowManager.rows.forEach((row) => {\r\n\t\t\t\t\t\trows = rows.concat(this.table.modules.dataTree.getTreeChildren(row, false, true));\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\trows = rows.concat(this.table.rowManager.rows);\r\n\r\n\t\t\t\trows.forEach(function(row){\r\n\t\t\t\t\tif(row.cells.length){\r\n\t\t\t\t\t\tvar cell = row.cells.splice(fromIndex, 1)[0];\r\n\t\t\t\t\t\trow.cells.splice(toIndex, 0, cell);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tscrollToColumn(column, position, ifVisible){\r\n\t\tvar left = 0,\r\n\t\toffset = 0,\r\n\t\tadjust = 0,\r\n\t\tcolEl = column.getElement();\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\r\n\t\t\tif(typeof position === \"undefined\"){\r\n\t\t\t\tposition = this.table.options.scrollToColumnPosition;\r\n\t\t\t}\r\n\r\n\t\t\tif(typeof ifVisible === \"undefined\"){\r\n\t\t\t\tifVisible = this.table.options.scrollToColumnIfVisible;\r\n\t\t\t}\r\n\r\n\t\t\tif(column.visible){\r\n\r\n\t\t\t\t//align to correct position\r\n\t\t\t\tswitch(position){\r\n\t\t\t\t\tcase \"middle\":\r\n\t\t\t\t\tcase \"center\":\r\n\t\t\t\t\tadjust = -this.element.clientWidth / 2;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase \"right\":\r\n\t\t\t\t\tadjust = colEl.clientWidth - this.headersElement.clientWidth;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//check column visibility\r\n\t\t\t\tif(!ifVisible){\r\n\r\n\t\t\t\t\toffset = colEl.offsetLeft;\r\n\r\n\t\t\t\t\tif(offset > 0 && offset + colEl.offsetWidth < this.element.clientWidth){\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//calculate scroll position\r\n\t\t\t\tleft = colEl.offsetLeft + adjust;\r\n\r\n\t\t\t\tleft = Math.max(Math.min(left, this.table.rowManager.element.scrollWidth - this.table.rowManager.element.clientWidth),0);\r\n\r\n\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\r\n\t\t\t\tthis.scrollHorizontal(left);\r\n\r\n\t\t\t\tresolve();\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Scroll Error - Column not visible\");\r\n\t\t\t\treject(\"Scroll Error - Column not visible\");\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t}\r\n\r\n\t//////////////// Cell Management /////////////////\r\n\tgenerateCells(row){\r\n\t\tvar cells = [];\r\n\r\n\t\tthis.columnsByIndex.forEach((column) => {\r\n\t\t\tcells.push(column.generateCell(row));\r\n\t\t});\r\n\r\n\t\treturn cells;\r\n\t}\r\n\r\n\t//////////////// Column Management /////////////////\r\n\tgetFlexBaseWidth(){\r\n\t\tvar totalWidth = this.table.element.clientWidth, //table element width\r\n\t\tfixedWidth = 0;\r\n\r\n\t\t//adjust for vertical scrollbar if present\r\n\t\tif(this.rowManager.element.scrollHeight > this.rowManager.element.clientHeight){\r\n\t\t\ttotalWidth -= this.rowManager.element.offsetWidth - this.rowManager.element.clientWidth;\r\n\t\t}\r\n\r\n\t\tthis.columnsByIndex.forEach(function(column){\r\n\t\t\tvar width, minWidth, colWidth;\r\n\r\n\t\t\tif(column.visible){\r\n\r\n\t\t\t\twidth = column.definition.width || 0;\r\n\r\n\t\t\t\tminWidth = typeof column.minWidth == \"undefined\" ? this.table.options.columnMinWidth : parseInt(column.minWidth);\r\n\r\n\t\t\t\tif(typeof(width) == \"string\"){\r\n\t\t\t\t\tif(width.indexOf(\"%\") > -1){\r\n\t\t\t\t\t\tcolWidth = (totalWidth / 100) * parseInt(width) ;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tcolWidth = parseInt(width);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcolWidth = width;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfixedWidth += colWidth > minWidth ? colWidth : minWidth;\r\n\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn fixedWidth;\r\n\t}\r\n\r\n\taddColumn(definition, before, nextToColumn){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tvar column = this._addColumn(definition, before, nextToColumn);\r\n\r\n\t\t\tthis._reIndexColumns();\r\n\r\n\t\t\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\r\n\t\t\t\tthis.table.modules.responsiveLayout.initialize();\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.modExists(\"columnCalcs\")){\r\n\t\t\t\tthis.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\r\n\t\t\t}\r\n\r\n\t\t\tthis.redraw(true);\r\n\r\n\t\t\tif(this.table.modules.layout.getMode() != \"fitColumns\"){\r\n\t\t\t\tcolumn.reinitializeWidth();\r\n\t\t\t}\r\n\r\n\t\t\tthis._verticalAlignHeaders();\r\n\r\n\t\t\tthis.table.rowManager.reinitialize();\r\n\r\n\t\t\tif(this.table.options.virtualDomHoz){\r\n\t\t\t\tthis.table.vdomHoz.reinitialize();\r\n\t\t\t}\r\n\r\n\t\t\tresolve(column);\r\n\t\t});\r\n\t}\r\n\r\n\t//remove column from system\r\n\tderegisterColumn(column){\r\n\t\tvar field = column.getField(),\r\n\t\tindex;\r\n\r\n\t\t//remove from field list\r\n\t\tif(field){\r\n\t\t\tdelete this.columnsByField[field];\r\n\t\t}\r\n\r\n\t\t//remove from index list\r\n\t\tindex = this.columnsByIndex.indexOf(column);\r\n\r\n\t\tif(index > -1){\r\n\t\t\tthis.columnsByIndex.splice(index, 1);\r\n\t\t}\r\n\r\n\t\t//remove from column list\r\n\t\tindex = this.columns.indexOf(column);\r\n\r\n\t\tif(index > -1){\r\n\t\t\tthis.columns.splice(index, 1);\r\n\t\t}\r\n\r\n\t\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\r\n\t\t\tthis.table.modules.responsiveLayout.initialize();\r\n\t\t}\r\n\r\n\t\tthis._verticalAlignHeaders();\r\n\r\n\t\tthis.redraw();\r\n\t}\r\n\r\n\t//redraw columns\r\n\tredraw(force){\r\n\t\tif(force){\r\n\t\t\tif(Helpers.elVisible(this.element)){\r\n\t\t\t\tthis._verticalAlignHeaders();\r\n\t\t\t}\r\n\r\n\t\t\tthis.table.rowManager.resetScroll();\r\n\t\t\tthis.table.rowManager.reinitialize();\r\n\t\t}\r\n\r\n\t\tif([\"fitColumns\", \"fitDataStretch\"].indexOf(this.table.modules.layout.getMode()) > -1){\r\n\t\t\tthis.table.modules.layout.layout();\r\n\t\t}else{\r\n\t\t\tif(force){\r\n\t\t\t\tthis.table.modules.layout.layout();\r\n\t\t\t}else{\r\n\t\t\t\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\r\n\t\t\t\t\tthis.table.modules.responsiveLayout.update();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.table.modExists(\"frozenColumns\")){\r\n\t\t\tthis.table.modules.frozenColumns.layout();\r\n\t\t}\r\n\r\n\t\tif(this.table.modExists(\"columnCalcs\")){\r\n\t\t\tthis.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\r\n\t\t}\r\n\r\n\t\tif(force){\r\n\t\t\tif(this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.columns){\r\n\t\t\t\tthis.table.modules.persistence.save(\"columns\");\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.modExists(\"columnCalcs\")){\r\n\t\t\t\tthis.table.modules.columnCalcs.redraw();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.table.footerManager.redraw();\r\n\t}\r\n}","//public row object\r\nexport default class RowComponent {\r\n\r\n\tconstructor (row){\r\n\t\tthis._row = row;\r\n\t}\r\n\r\n\tgetData(transform){\r\n\t\treturn this._row.getData(transform);\r\n\t}\r\n\r\n\tgetElement(){\r\n\t\treturn this._row.getElement();\r\n\t}\r\n\r\n\tgetCells(){\r\n\t\tvar cells = [];\r\n\r\n\t\tthis._row.getCells().forEach(function(cell){\r\n\t\t\tcells.push(cell.getComponent());\r\n\t\t});\r\n\r\n\t\treturn cells;\r\n\t}\r\n\r\n\tgetCell(column){\r\n\t\tvar cell = this._row.getCell(column);\r\n\t\treturn cell ? cell.getComponent() : false;\r\n\t}\r\n\r\n\tgetIndex(){\r\n\t\treturn this._row.getData(\"data\")[this._row.table.options.index];\r\n\t}\r\n\r\n\tgetPosition(active){\r\n\t\treturn this._row.table.rowManager.getRowPosition(this._row, active);\r\n\t}\r\n\r\n\tdelete(){\r\n\t\treturn this._row.delete();\r\n\t}\r\n\r\n\tscrollTo(){\r\n\t\treturn this._row.table.rowManager.scrollToRow(this._row);\r\n\t}\r\n\r\n\tpageTo(){\r\n\t\tif(this._row.table.modExists(\"page\", true)){\r\n\t\t\treturn this._row.table.modules.page.setPageToRow(this._row);\r\n\t\t}\r\n\t}\r\n\r\n\tmove(to, after){\r\n\t\tthis._row.moveToRow(to, after);\r\n\t}\r\n\r\n\tupdate(data){\r\n\t\treturn this._row.updateData(data);\r\n\t}\r\n\r\n\tnormalizeHeight(){\r\n\t\tthis._row.normalizeHeight(true);\r\n\t}\r\n\r\n\tselect(){\r\n\t\tthis._row.table.modules.selectRow.selectRows(this._row);\r\n\t}\r\n\r\n\tdeselect(){\r\n\t\tthis._row.table.modules.selectRow.deselectRows(this._row);\r\n\t}\r\n\r\n\ttoggleSelect(){\r\n\t\tthis._row.table.modules.selectRow.toggleRow(this._row);\r\n\t}\r\n\r\n\tisSelected(){\r\n\t\treturn this._row.table.modules.selectRow.isRowSelected(this._row);\r\n\t}\r\n\r\n\t_getSelf(){\r\n\t\treturn this._row;\r\n\t}\r\n\r\n\tvalidate(){\r\n\t\treturn this._row.validate();\r\n\t}\r\n\r\n\tfreeze(){\r\n\t\tif(this._row.table.modExists(\"frozenRows\", true)){\r\n\t\t\tthis._row.table.modules.frozenRows.freezeRow(this._row);\r\n\t\t}\r\n\t}\r\n\r\n\tunfreeze(){\r\n\t\tif(this._row.table.modExists(\"frozenRows\", true)){\r\n\t\t\tthis._row.table.modules.frozenRows.unfreezeRow(this._row);\r\n\t\t}\r\n\t}\r\n\r\n\tisFrozen(){\r\n\t\tif(this._row.table.modExists(\"frozenRows\", true)){\r\n\t\t\tvar index = this._row.table.modules.frozenRows.rows.indexOf(this._row);\r\n\t\t\treturn index > -1;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\ttreeCollapse(){\r\n\t\tif(this._row.table.modExists(\"dataTree\", true)){\r\n\t\t\tthis._row.table.modules.dataTree.collapseRow(this._row);\r\n\t\t}\r\n\t}\r\n\r\n\ttreeExpand(){\r\n\t\tif(this._row.table.modExists(\"dataTree\", true)){\r\n\t\t\tthis._row.table.modules.dataTree.expandRow(this._row);\r\n\t\t}\r\n\t}\r\n\r\n\ttreeToggle(){\r\n\t\tif(this._row.table.modExists(\"dataTree\", true)){\r\n\t\t\tthis._row.table.modules.dataTree.toggleRow(this._row);\r\n\t\t}\r\n\t}\r\n\r\n\tgetTreeParent(){\r\n\t\tif(this._row.table.modExists(\"dataTree\", true)){\r\n\t\t\treturn this._row.table.modules.dataTree.getTreeParent(this._row);\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tgetTreeChildren(){\r\n\t\tif(this._row.table.modExists(\"dataTree\", true)){\r\n\t\t\treturn this._row.table.modules.dataTree.getTreeChildren(this._row, true);\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\taddTreeChild(data, pos, index){\r\n\t\tif(this._row.table.modExists(\"dataTree\", true)){\r\n\t\t\treturn this._row.table.modules.dataTree.addTreeChildRow(this._row, data, pos, index);\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\treformat(){\r\n\t\treturn this._row.reinitialize();\r\n\t}\r\n\r\n\tgetGroup(){\r\n\t\treturn this._row.getGroup().getComponent();\r\n\t}\r\n\r\n\tgetTable(){\r\n\t\treturn this._row.table;\r\n\t}\r\n\r\n\tgetNextRow(){\r\n\t\tvar row = this._row.nextRow();\r\n\t\treturn row ? row.getComponent() : row;\r\n\t}\r\n\r\n\tgetPrevRow(){\r\n\t\tvar row = this._row.prevRow();\r\n\t\treturn row ? row.getComponent() : row;\r\n\t}\r\n}","import RowComponent from './RowComponent.js';\r\nimport Helpers from '../Helpers.js';\r\n\r\nexport default class Row {\r\n\tconstructor (data, parent, type = \"row\"){\r\n\t\tthis.table = parent.table;\r\n\t\tthis.parent = parent;\r\n\t\tthis.data = {};\r\n\t\tthis.type = type; //type of element\r\n\t\tthis.element = false;\r\n\t\tthis.modules = {}; //hold module variables;\r\n\t\tthis.cells = [];\r\n\t\tthis.height = 0; //hold element height\r\n\t\tthis.heightStyled = \"\"; //hold element height prestyled to improve render efficiency\r\n\t\tthis.manualHeight = false; //user has manually set row height\r\n\t\tthis.outerHeight = 0; //holde lements outer height\r\n\t\tthis.initialized = false; //element has been rendered\r\n\t\tthis.heightInitialized = false; //element has resized cells to fit\r\n\r\n\t\tthis.component = null;\r\n\r\n\t\tthis.created = false;\r\n\r\n\t\tthis.setData(data);\r\n\t}\r\n\r\n\tcreate(){\r\n\t\tif(!this.created){\r\n\t\t\tthis.created = true;\r\n\t\t\tthis.generateElement();\r\n\t\t}\r\n\t}\r\n\r\n\tcreateElement (){\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tel.classList.add(\"tabulator-row\");\r\n\t\tel.setAttribute(\"role\", \"row\");\r\n\r\n\t\tthis.element = el;\r\n\t}\r\n\r\n\tgetElement(){\r\n\t\tthis.create();\r\n\t\treturn this.element;\r\n\t}\r\n\r\n\tdetachElement(){\r\n\t\tif (this.element && this.element.parentNode){\r\n\t\t\tthis.element.parentNode.removeChild(this.element);\r\n\t\t}\r\n\t}\r\n\r\n\tgenerateElement(){\r\n\t\tvar dblTap,\ttapHold, tap;\r\n\r\n\t\tthis.createElement();\r\n\r\n\t\t//set row selection characteristics\r\n\t\tif(this.table.options.selectable !== false && this.table.modExists(\"selectRow\")){\r\n\t\t\tthis.table.modules.selectRow.initializeRow(this);\r\n\t\t}\r\n\r\n\t\t//setup movable rows\r\n\t\tif(this.table.options.movableRows !== false && this.table.modExists(\"moveRow\")){\r\n\t\t\tthis.table.modules.moveRow.initializeRow(this);\r\n\t\t}\r\n\r\n\t\t//setup data tree\r\n\t\tif(this.table.options.dataTree !== false && this.table.modExists(\"dataTree\")){\r\n\t\t\tthis.table.modules.dataTree.initializeRow(this);\r\n\t\t}\r\n\r\n\t\t//setup column colapse container\r\n\t\tif(this.table.options.responsiveLayout === \"collapse\" && this.table.modExists(\"responsiveLayout\")){\r\n\t\t\tthis.table.modules.responsiveLayout.initializeRow(this);\r\n\t\t}\r\n\r\n\t\t//set column menu\r\n\t\tif((this.table.options.rowContextMenu || this.table.options.rowClickMenu) && this.table.modExists(\"menu\")){\r\n\t\t\tthis.table.modules.menu.initializeRow(this);\r\n\t\t}\r\n\r\n\t\t//handle row click events\r\n\t\tif (this.table.options.rowClick){\r\n\t\t\tthis.element.addEventListener(\"click\", (e) => {\r\n\t\t\t\tthis.table.options.rowClick(e, this.getComponent());\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.table.options.rowDblClick){\r\n\t\t\tthis.element.addEventListener(\"dblclick\", (e) => {\r\n\t\t\t\tthis.table.options.rowDblClick(e, this.getComponent());\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.table.options.rowContext){\r\n\t\t\tthis.element.addEventListener(\"contextmenu\", (e) => {\r\n\t\t\t\tthis.table.options.rowContext(e, this.getComponent());\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t//handle mouse events\r\n\t\tif (this.table.options.rowMouseEnter){\r\n\t\t\tthis.element.addEventListener(\"mouseenter\", (e) => {\r\n\t\t\t\tthis.table.options.rowMouseEnter(e, this.getComponent());\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.table.options.rowMouseLeave){\r\n\t\t\tthis.element.addEventListener(\"mouseleave\", (e) => {\r\n\t\t\t\tthis.table.options.rowMouseLeave(e, this.getComponent());\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.table.options.rowMouseOver){\r\n\t\t\tthis.element.addEventListener(\"mouseover\", (e) => {\r\n\t\t\t\tthis.table.options.rowMouseOver(e, this.getComponent());\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.table.options.rowMouseOut){\r\n\t\t\tthis.element.addEventListener(\"mouseout\", (e) => {\r\n\t\t\t\tthis.table.options.rowMouseOut(e, this.getComponent());\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.table.options.rowMouseMove){\r\n\t\t\tthis.element.addEventListener(\"mousemove\", (e) => {\r\n\t\t\t\tthis.table.options.rowMouseMove(e, this.getComponent());\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.table.options.rowTap){\r\n\r\n\t\t\ttap = false;\r\n\r\n\t\t\tthis.element.addEventListener(\"touchstart\", (e) => {\r\n\t\t\t\ttap = true;\r\n\t\t\t}, {passive: true});\r\n\r\n\t\t\tthis.element.addEventListener(\"touchend\", (e) => {\r\n\t\t\t\tif(tap){\r\n\t\t\t\t\tthis.table.options.rowTap(e, this.getComponent());\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttap = false;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.table.options.rowDblTap){\r\n\r\n\t\t\tdblTap = null;\r\n\r\n\t\t\tthis.element.addEventListener(\"touchend\", (e) => {\r\n\t\t\t\tif(dblTap){\r\n\t\t\t\t\tclearTimeout(dblTap);\r\n\t\t\t\t\tdblTap = null;\r\n\r\n\t\t\t\t\tthis.table.options.rowDblTap(e, this.getComponent());\r\n\t\t\t\t}else{\r\n\r\n\t\t\t\t\tdblTap = setTimeout(() => {\r\n\t\t\t\t\t\tclearTimeout(dblTap);\r\n\t\t\t\t\t\tdblTap = null;\r\n\t\t\t\t\t}, 300);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.table.options.rowTapHold){\r\n\r\n\t\t\ttapHold = null;\r\n\r\n\t\t\tthis.element.addEventListener(\"touchstart\", (e) => {\r\n\t\t\t\tclearTimeout(tapHold);\r\n\r\n\t\t\t\ttapHold = setTimeout(() => {\r\n\t\t\t\t\tclearTimeout(tapHold);\r\n\t\t\t\t\ttapHold = null;\r\n\t\t\t\t\ttap = false;\r\n\t\t\t\t\tthis.table.options.rowTapHold(e, this.getComponent());\r\n\t\t\t\t}, 1000);\r\n\r\n\t\t\t}, {passive: true});\r\n\r\n\t\t\tthis.element.addEventListener(\"touchend\", (e) => {\r\n\t\t\t\tclearTimeout(tapHold);\r\n\t\t\t\ttapHold = null;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tgenerateCells(){\r\n\t\tthis.cells = this.table.columnManager.generateCells(this);\r\n\t}\r\n\r\n\t//functions to setup on first render\r\n\tinitialize(force){\r\n\t\tthis.create();\r\n\r\n\t\tif(!this.initialized || force){\r\n\r\n\t\t\tthis.deleteCells();\r\n\r\n\t\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\r\n\r\n\t\t\t//handle frozen cells\r\n\t\t\tif(this.table.modExists(\"frozenColumns\")){\r\n\t\t\t\tthis.table.modules.frozenColumns.layoutRow(this);\r\n\t\t\t}\r\n\r\n\t\t\tthis.generateCells();\r\n\r\n\t\t\tif(this.table.options.virtualDomHoz && this.table.vdomHoz.initialized){\r\n\t\t\t\tthis.table.vdomHoz.initializeRow(this);\r\n\t\t\t}else{\r\n\t\t\t\tthis.cells.forEach((cell) => {\r\n\t\t\t\t\tthis.element.appendChild(cell.getElement());\r\n\t\t\t\t\tcell.cellRendered();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif(force){\r\n\t\t\t\tthis.normalizeHeight();\r\n\t\t\t}\r\n\r\n\t\t\t//setup movable rows\r\n\t\t\tif(this.table.options.dataTree && this.table.modExists(\"dataTree\")){\r\n\t\t\t\tthis.table.modules.dataTree.layoutRow(this);\r\n\t\t\t}\r\n\r\n\t\t\t//setup column colapse container\r\n\t\t\tif(this.table.options.responsiveLayout === \"collapse\" && this.table.modExists(\"responsiveLayout\")){\r\n\t\t\t\tthis.table.modules.responsiveLayout.layoutRow(this);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.options.rowFormatter){\r\n\t\t\t\tthis.table.options.rowFormatter(this.getComponent());\r\n\t\t\t}\r\n\r\n\t\t\t//set resizable handles\r\n\t\t\tif(this.table.options.resizableRows && this.table.modExists(\"resizeRows\")){\r\n\t\t\t\tthis.table.modules.resizeRows.initializeRow(this);\r\n\t\t\t}\r\n\r\n\t\t\tthis.initialized = true;\r\n\t\t}else{\r\n\t\t\tif(this.table.options.virtualDomHoz){\r\n\t\t\t\tthis.table.vdomHoz.reinitializeRow(this);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treinitializeHeight(){\r\n\t\tthis.heightInitialized = false;\r\n\r\n\t\tif(this.element && this.element.offsetParent !== null){\r\n\t\t\tthis.normalizeHeight(true);\r\n\t\t}\r\n\t}\r\n\r\n\treinitialize(children){\r\n\t\tthis.initialized = false;\r\n\t\tthis.heightInitialized = false;\r\n\r\n\t\tif(!this.manualHeight){\r\n\t\t\tthis.height = 0;\r\n\t\t\tthis.heightStyled = \"\";\r\n\t\t}\r\n\r\n\t\tif(this.element && this.element.offsetParent !== null){\r\n\t\t\tthis.initialize(true);\r\n\t\t}\r\n\r\n\t\tif(this.table.options.dataTree && this.table.modExists(\"dataTree\", true)){\r\n\t\t\tthis.table.modules.dataTree.getTreeChildren(this, false, true).forEach(function(child){\r\n\t\t\t\tchild.reinitialize(true);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t//get heights when doing bulk row style calcs in virtual DOM\r\n\tcalcHeight(force){\r\n\r\n\t\tvar maxHeight = 0,\r\n\t\tminHeight = this.table.options.resizableRows ? this.element.clientHeight : 0;\r\n\r\n\t\tthis.cells.forEach(function(cell){\r\n\t\t\tvar height = cell.getHeight();\r\n\t\t\tif(height > maxHeight){\r\n\t\t\t\tmaxHeight = height;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(force){\r\n\t\t\tthis.height = Math.max(maxHeight, minHeight);\r\n\t\t}else{\r\n\t\t\tthis.height = this.manualHeight ? this.height : Math.max(maxHeight, minHeight);\r\n\t\t}\r\n\r\n\t\tthis.heightStyled = this.height ? this.height + \"px\" : \"\";\r\n\t\tthis.outerHeight = this.element.offsetHeight;\r\n\t}\r\n\r\n\t//set of cells\r\n\tsetCellHeight(){\r\n\t\tthis.cells.forEach(function(cell){\r\n\t\t\tcell.setHeight();\r\n\t\t});\r\n\r\n\t\tthis.heightInitialized = true;\r\n\t}\r\n\r\n\tclearCellHeight(){\r\n\t\tthis.cells.forEach(function(cell){\r\n\t\t\tcell.clearHeight();\r\n\t\t});\r\n\t}\r\n\r\n\t//normalize the height of elements in the row\r\n\tnormalizeHeight(force){\r\n\r\n\t\tif(force){\r\n\t\t\tthis.clearCellHeight();\r\n\t\t}\r\n\r\n\t\tthis.calcHeight(force);\r\n\r\n\t\tthis.setCellHeight();\r\n\t}\r\n\r\n\t//set height of rows\r\n\tsetHeight(height, force){\r\n\t\tif(this.height != height || force){\r\n\r\n\t\t\tthis.manualHeight = true;\r\n\r\n\t\t\tthis.height = height;\r\n\t\t\tthis.heightStyled = height ? height + \"px\" : \"\";\r\n\r\n\t\t\tthis.setCellHeight();\r\n\r\n\t\t\t// this.outerHeight = this.element.outerHeight();\r\n\t\t\tthis.outerHeight = this.element.offsetHeight;\r\n\t\t}\r\n\t}\r\n\r\n\t//return rows outer height\r\n\tgetHeight(){\r\n\t\treturn this.outerHeight;\r\n\t}\r\n\r\n\t//return rows outer Width\r\n\tgetWidth(){\r\n\t\treturn this.element.offsetWidth;\r\n\t}\r\n\r\n\t//////////////// Cell Management /////////////////\r\n\tdeleteCell(cell){\r\n\t\tvar index = this.cells.indexOf(cell);\r\n\r\n\t\tif(index > -1){\r\n\t\t\tthis.cells.splice(index, 1);\r\n\t\t}\r\n\t}\r\n\r\n\t//////////////// Data Management /////////////////\r\n\tsetData(data){\r\n\t\tif(this.table.modExists(\"mutator\")){\r\n\t\t\tdata = this.table.modules.mutator.transformRow(data, \"data\");\r\n\t\t}\r\n\r\n\t\tthis.data = data;\r\n\r\n\t\tif(this.table.options.reactiveData && this.table.modExists(\"reactiveData\", true)){\r\n\t\t\tthis.table.modules.reactiveData.watchRow(this);\r\n\t\t}\r\n\t}\r\n\r\n\t//update the rows data\r\n\tupdateData(updatedData){\r\n\t\tvar visible = this.element && Helpers.elVisible(this.element),\r\n\t\ttempData = {},\r\n\t\tnewRowData;\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\r\n\t\t\tif(typeof updatedData === \"string\"){\r\n\t\t\t\tupdatedData = JSON.parse(updatedData);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.options.reactiveData && this.table.modExists(\"reactiveData\", true)){\r\n\t\t\t\tthis.table.modules.reactiveData.block();\r\n\t\t\t}\r\n\r\n\t\t\t//mutate incomming data if needed\r\n\t\t\tif(this.table.modExists(\"mutator\")){\r\n\r\n\t\t\t\ttempData = Object.assign(tempData, this.data);\r\n\t\t\t\ttempData = Object.assign(tempData, updatedData);\r\n\r\n\t\t\t\tnewRowData = this.table.modules.mutator.transformRow(tempData, \"data\", updatedData);\r\n\t\t\t}else{\r\n\t\t\t\tnewRowData = updatedData;\r\n\t\t\t}\r\n\r\n\t\t\t//set data\r\n\t\t\tfor (var attrname in newRowData) {\r\n\t\t\t\tthis.data[attrname] = newRowData[attrname];\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.options.reactiveData && this.table.modExists(\"reactiveData\", true)){\r\n\t\t\t\tthis.table.modules.reactiveData.unblock();\r\n\t\t\t}\r\n\r\n\t\t\t//update affected cells only\r\n\t\t\tfor (var attrname in updatedData) {\r\n\r\n\t\t\t\tlet columns = this.table.columnManager.getColumnsByFieldRoot(attrname);\r\n\r\n\t\t\t\tcolumns.forEach((column) => {\r\n\t\t\t\t\tlet cell = this.getCell(column.getField());\r\n\r\n\t\t\t\t\tif(cell){\r\n\t\t\t\t\t\tlet value = column.getFieldValue(newRowData);\r\n\t\t\t\t\t\tif(cell.getValue() != value){\r\n\t\t\t\t\t\t\tcell.setValueProcessData(value);\r\n\r\n\t\t\t\t\t\t\tif(visible){\r\n\t\t\t\t\t\t\t\tcell.cellRendered();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.options.groupUpdateOnCellEdit && this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\r\n\t\t\t\tthis.table.modules.groupRows.reassignRowToGroup(this.row);\r\n\t\t\t}\r\n\r\n\t\t\t//Partial reinitialization if visible\r\n\t\t\tif(visible){\r\n\t\t\t\tthis.normalizeHeight(true);\r\n\r\n\t\t\t\tif(this.table.options.rowFormatter){\r\n\t\t\t\t\tthis.table.options.rowFormatter(this.getComponent());\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.initialized = false;\r\n\t\t\t\tthis.height = 0;\r\n\t\t\t\tthis.heightStyled = \"\";\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.options.dataTree !== false && this.table.modExists(\"dataTree\") && this.table.modules.dataTree.redrawNeeded(updatedData)){\r\n\t\t\t\tthis.table.modules.dataTree.initializeRow(this);\r\n\r\n\t\t\t\tif(visible){\r\n\t\t\t\t\tthis.table.modules.dataTree.layoutRow(this);\r\n\t\t\t\t\tthis.table.rowManager.refreshActiveData(\"tree\", false, true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\t//this.reinitialize();\r\n\r\n\t\t\tthis.table.options.rowUpdated.call(this.table, this.getComponent());\r\n\r\n\t\t\tif(this.table.options.dataChanged){\r\n\t\t\t\tthis.table.options.dataChanged.call(this.table, this.table.rowManager.getData());\r\n\t\t\t}\r\n\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\r\n\tgetData(transform){\r\n\t\tif(transform){\r\n\t\t\tif(this.table.modExists(\"accessor\")){\r\n\t\t\t\treturn this.table.modules.accessor.transformRow(this, transform);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this.data;\r\n\t}\r\n\r\n\tgetCell(column){\r\n\t\tvar match = false;\r\n\r\n\t\tcolumn = this.table.columnManager.findColumn(column);\r\n\r\n\t\tmatch = this.cells.find(function(cell){\r\n\t\t\treturn cell.column === column;\r\n\t\t});\r\n\r\n\t\treturn match;\r\n\t}\r\n\r\n\tgetCellIndex(findCell){\r\n\t\treturn this.cells.findIndex(function(cell){\r\n\t\t\treturn cell === findCell;\r\n\t\t});\r\n\t}\r\n\r\n\tfindNextEditableCell(index){\r\n\t\tvar nextCell = false;\r\n\r\n\t\tif(index < this.cells.length-1){\r\n\t\t\tfor(var i = index+1; i < this.cells.length; i++){\r\n\t\t\t\tlet cell = this.cells[i];\r\n\r\n\t\t\t\tif(cell.column.modules.edit && Helpers.elVisible(cell.getElement())){\r\n\t\t\t\t\tlet allowEdit = true;\r\n\r\n\t\t\t\t\tif(typeof cell.column.modules.edit.check == \"function\"){\r\n\t\t\t\t\t\tallowEdit = cell.column.modules.edit.check(cell.getComponent());\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(allowEdit){\r\n\t\t\t\t\t\tnextCell = cell;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn nextCell;\r\n\t}\r\n\r\n\tfindPrevEditableCell(index){\r\n\t\tvar prevCell = false;\r\n\r\n\t\tif(index > 0){\r\n\t\t\tfor(var i = index-1; i >= 0; i--){\r\n\t\t\t\tlet cell = this.cells[i],\r\n\t\t\t\tallowEdit = true;\r\n\r\n\t\t\t\tif(cell.column.modules.edit && Helpers.elVisible(cell.getElement())){\r\n\t\t\t\t\tif(typeof cell.column.modules.edit.check == \"function\"){\r\n\t\t\t\t\t\tallowEdit = cell.column.modules.edit.check(cell.getComponent());\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(allowEdit){\r\n\t\t\t\t\t\tprevCell = cell;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn prevCell;\r\n\t}\r\n\r\n\tgetCells(){\r\n\t\treturn this.cells;\r\n\t}\r\n\r\n\tnextRow(){\r\n\t\tvar row = this.table.rowManager.nextDisplayRow(this, true);\r\n\t\treturn row || false;\r\n\t}\r\n\r\n\tprevRow(){\r\n\t\tvar row = this.table.rowManager.prevDisplayRow(this, true);\r\n\t\treturn row || false;\r\n\t}\r\n\r\n\tmoveToRow(to, before){\r\n\t\tvar toRow = this.table.rowManager.findRow(to);\r\n\r\n\t\tif(toRow){\r\n\t\t\tthis.table.rowManager.moveRowActual(this, toRow, !before);\r\n\t\t\tthis.table.rowManager.refreshActiveData(\"display\", false, true);\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Move Error - No matching row found:\", to);\r\n\t\t}\r\n\t}\r\n\r\n\tvalidate(){\r\n\t\tvar invalid = [];\r\n\r\n\t\tthis.cells.forEach(function(cell){\r\n\t\t\tif(!cell.validate()){\r\n\t\t\t\tinvalid.push(cell.getComponent());\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn invalid.length ? invalid : true;\r\n\t}\r\n\r\n\t///////////////////// Actions  /////////////////////\r\n\tdelete(){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tvar index, rows;\r\n\r\n\t\t\tif(this.table.options.history && this.table.modExists(\"history\")){\r\n\r\n\t\t\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\r\n\t\t\t\t\trows = this.getGroup().rows\r\n\t\t\t\t\tindex = rows.indexOf(this);\r\n\r\n\t\t\t\t\tif(index){\r\n\t\t\t\t\t\tindex = rows[index-1];\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tindex = this.table.rowManager.getRowIndex(this);\r\n\r\n\t\t\t\t\tif(index){\r\n\t\t\t\t\t\tindex = this.table.rowManager.rows[index-1];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.table.modules.history.action(\"rowDelete\", this, {data:this.getData(), pos:!index, index:index});\r\n\t\t\t}\r\n\r\n\t\t\tthis.deleteActual();\r\n\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\r\n\tdeleteActual(blockRedraw){\r\n\t\tvar index = this.table.rowManager.getRowIndex(this);\r\n\r\n\t\tthis.detatchModules();\r\n\r\n\t\t// if(this.table.options.dataTree && this.table.modExists(\"dataTree\")){\r\n\t\t// \tthis.table.modules.dataTree.collapseRow(this, true);\r\n\t\t// }\r\n\r\n\t\t//remove any reactive data watchers from row object\r\n\t\tif(this.table.options.reactiveData && this.table.modExists(\"reactiveData\", true)){\r\n\t\t\t// this.table.modules.reactiveData.unwatchRow(this);\r\n\t\t}\r\n\r\n\t\t//remove from group\r\n\t\tif(this.modules.group){\r\n\t\t\tthis.modules.group.removeRow(this);\r\n\t\t}\r\n\r\n\t\tthis.table.rowManager.deleteRow(this, blockRedraw);\r\n\r\n\t\tthis.deleteCells();\r\n\r\n\t\tthis.initialized = false;\r\n\t\tthis.heightInitialized = false;\r\n\t\tthis.element = false;\r\n\r\n\t\tif(this.table.options.dataTree && this.table.modExists(\"dataTree\", true)){\r\n\t\t\tthis.table.modules.dataTree.rowDelete(this);\r\n\t\t}\r\n\r\n\t\t//recalc column calculations if present\r\n\t\tif(this.table.modExists(\"columnCalcs\")){\r\n\t\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\r\n\t\t\t\tthis.table.modules.columnCalcs.recalcRowGroup(this);\r\n\t\t\t}else{\r\n\t\t\t\tthis.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdetatchModules(){\r\n\t\t//deselect row if it is selected\r\n\t\tif(this.table.modExists(\"selectRow\")){\r\n\t\t\tthis.table.modules.selectRow._deselectRow(this, true);\r\n\t\t}\r\n\r\n\t\t//cancel edit if row is currently being edited\r\n\t\tif(this.table.modExists(\"edit\")){\r\n\t\t\tif(this.table.modules.edit.currentCell.row === this){\r\n\t\t\t\tthis.table.modules.edit.cancelEdit();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.table.modExists(\"frozenRows\")){\r\n\t\t\tthis.table.modules.frozenRows.detachRow(this);\r\n\t\t}\r\n\t}\r\n\r\n\tdeleteCells(){\r\n\t\tvar cellCount = this.cells.length;\r\n\r\n\t\tfor(let i = 0; i < cellCount; i++){\r\n\t\t\tthis.cells[0].delete();\r\n\t\t}\r\n\t}\r\n\r\n\twipe(){\r\n\t\tthis.detatchModules();\r\n\t\tthis.deleteCells();\r\n\r\n\t\tif(this.element){\r\n\t\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\r\n\r\n\t\t\tif(this.element.parentNode){\r\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.element = false;\r\n\t\tthis.modules = {};\r\n\t}\r\n\r\n\tgetGroup(){\r\n\t\treturn this.modules.group || false;\r\n\t}\r\n\r\n\t//////////////// Object Generation /////////////////\r\n\tgetComponent(){\r\n\t\tif(!this.component){\r\n\t\t\tthis.component = new RowComponent(this);\r\n\t\t}\r\n\r\n\t\treturn this.component;\r\n\t}\r\n}","import Row from './row/Row.js';\r\nimport Helpers from './Helpers.js';\r\n\r\nexport default class RowManager {\r\n\r\n\tconstructor(table){\r\n\t\tthis.table = table;\r\n\t\tthis.element = this.createHolderElement(); //containing element\r\n\t\tthis.tableElement = this.createTableElement(); //table element\r\n\t\tthis.heightFixer = this.createTableElement(); //table element\r\n\t\tthis.columnManager = null; //hold column manager object\r\n\t\tthis.height = 0; //hold height of table element\r\n\r\n\t\tthis.firstRender = false; //handle first render\r\n\t\tthis.renderMode = \"virtual\"; //current rendering mode\r\n\t\tthis.fixedHeight = false; //current rendering mode\r\n\r\n\t\tthis.rows = []; //hold row data objects\r\n\t\tthis.activeRows = []; //rows currently available to on display in the table\r\n\t\tthis.activeRowsCount = 0; //count of active rows\r\n\r\n\t\tthis.displayRows = []; //rows currently on display in the table\r\n\t\tthis.displayRowsCount = 0; //count of display rows\r\n\r\n\t\tthis.scrollTop = 0;\r\n\t\tthis.scrollLeft = 0;\r\n\r\n\t\tthis.vDomRowHeight = 20; //approximation of row heights for padding\r\n\r\n\t\tthis.vDomTop = 0; //hold position for first rendered row in the virtual DOM\r\n\t\tthis.vDomBottom = 0; //hold possition for last rendered row in the virtual DOM\r\n\r\n\t\tthis.vDomScrollPosTop = 0; //last scroll position of the vDom top;\r\n\t\tthis.vDomScrollPosBottom = 0; //last scroll position of the vDom bottom;\r\n\r\n\t\tthis.vDomTopPad = 0; //hold value of padding for top of virtual DOM\r\n\t\tthis.vDomBottomPad = 0; //hold value of padding for bottom of virtual DOM\r\n\r\n\t\tthis.vDomMaxRenderChain = 90; //the maximum number of dom elements that can be rendered in 1 go\r\n\r\n\t\tthis.vDomWindowBuffer = 0; //window row buffer before removing elements, to smooth scrolling\r\n\r\n\t\tthis.vDomWindowMinTotalRows = 20; //minimum number of rows to be generated in virtual dom (prevent buffering issues on tables with tall rows)\r\n\t\tthis.vDomWindowMinMarginRows = 5; //minimum number of rows to be generated in virtual dom margin\r\n\r\n\t\tthis.vDomTopNewRows = []; //rows to normalize after appending to optimize render speed\r\n\t\tthis.vDomBottomNewRows = []; //rows to normalize after appending to optimize render speed\r\n\r\n\t\tthis.rowNumColumn = false; //hold column component for row number column\r\n\r\n\t\tthis.redrawBlock = false; //prevent redraws to allow multiple data manipulations becore continuing\r\n\t\tthis.redrawBlockRestoreConfig = false; //store latest redraw function calls for when redraw is needed\r\n\t\tthis.redrawBlockRederInPosition = false; //store latest redraw function calls for when redraw is needed\r\n\t}\r\n\r\n\t//////////////// Setup Functions /////////////////\r\n\r\n\tcreateHolderElement (){\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tel.classList.add(\"tabulator-tableHolder\");\r\n\t\tel.setAttribute(\"tabindex\", 0);\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\tcreateTableElement (){\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tel.classList.add(\"tabulator-table\");\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\t//return containing element\r\n\tgetElement(){\r\n\t\treturn this.element;\r\n\t}\r\n\r\n\t//return table element\r\n\tgetTableElement(){\r\n\t\treturn this.tableElement;\r\n\t}\r\n\r\n\t//return position of row in table\r\n\tgetRowPosition(row, active){\r\n\t\tif(active){\r\n\t\t\treturn this.activeRows.indexOf(row);\r\n\t\t}else{\r\n\t\t\treturn this.rows.indexOf(row);\r\n\t\t}\r\n\t}\r\n\r\n\t//link to column manager\r\n\tsetColumnManager(manager){\r\n\t\tthis.columnManager = manager;\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.setRenderMode();\r\n\r\n\t\t//initialize manager\r\n\t\tthis.element.appendChild(this.tableElement);\r\n\r\n\t\tthis.firstRender = true;\r\n\r\n\t\t//scroll header along with table body\r\n\t\tthis.element.addEventListener(\"scroll\", () => {\r\n\t\t\tvar left = this.element.scrollLeft;\r\n\r\n\t\t\t//handle horizontal scrolling\r\n\t\t\tif(this.scrollLeft != left){\r\n\t\t\t\tthis.columnManager.scrollHorizontal(left);\r\n\r\n\t\t\t\tif(this.table.options.groupBy){\r\n\t\t\t\t\tthis.table.modules.groupRows.scrollHeaders(left);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this.table.modExists(\"columnCalcs\")){\r\n\t\t\t\t\tthis.table.modules.columnCalcs.scrollHorizontal(left);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.table.options.scrollHorizontal(left);\r\n\t\t\t}\r\n\r\n\t\t\tthis.scrollLeft = left;\r\n\t\t});\r\n\r\n\t\t//handle virtual dom scrolling\r\n\t\tif(this.renderMode === \"virtual\"){\r\n\t\t\tthis.element.addEventListener(\"scroll\", () => {\r\n\t\t\t\tvar top = this.element.scrollTop;\r\n\t\t\t\tvar dir = this.scrollTop > top;\r\n\r\n\t\t\t\t//handle verical scrolling\r\n\t\t\t\tif(this.scrollTop != top){\r\n\t\t\t\t\tthis.scrollTop = top;\r\n\t\t\t\t\tthis.scrollVertical(dir);\r\n\r\n\t\t\t\t\tif(this.table.options.ajaxProgressiveLoad == \"scroll\"){\r\n\t\t\t\t\t\tthis.table.modules.ajax.nextPage(this.element.scrollHeight - this.element.clientHeight - top);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.table.options.scrollVertical(top);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.scrollTop = top;\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t////////////////// Row Manipulation //////////////////\r\n\tfindRow(subject){\r\n\t\tif(typeof subject == \"object\"){\r\n\t\t\tif(subject instanceof Row){\r\n\t\t\t\t//subject is row element\r\n\t\t\t\treturn subject;\r\n\t\t\t}else if(subject instanceof RowComponent){\r\n\t\t\t\t//subject is public row component\r\n\t\t\t\treturn subject._getSelf() || false;\r\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement){\r\n\t\t\t\t//subject is a HTML element of the row\r\n\t\t\t\tlet match = this.rows.find((row) => {\r\n\t\t\t\t\treturn row.getElement() === subject;\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn match || false;\r\n\t\t\t}\r\n\t\t}else if(typeof subject == \"undefined\" || subject === null){\r\n\t\t\treturn false;\r\n\t\t}else{\r\n\t\t\t//subject should be treated as the index of the row\r\n\t\t\tlet match = this.rows.find((row) => {\r\n\t\t\t\treturn row.data[this.table.options.index] == subject;\r\n\t\t\t});\r\n\r\n\t\t\treturn match || false;\r\n\t\t}\r\n\r\n\t\t//catch all for any other type of input\r\n\t\treturn false;\r\n\t}\r\n\r\n\tgetRowFromDataObject(data){\r\n\t\tvar match = this.rows.find((row) => {\r\n\t\t\treturn row.data === data;\r\n\t\t});\r\n\r\n\t\treturn match || false;\r\n\t}\r\n\r\n\tgetRowFromPosition(position, active){\r\n\t\tif(active){\r\n\t\t\treturn this.activeRows[position];\r\n\t\t}else{\r\n\t\t\treturn this.rows[position];\r\n\t\t}\r\n\t}\r\n\r\n\tscrollToRow(row, position, ifVisible){\r\n\t\tvar rowIndex = this.getDisplayRows().indexOf(row),\r\n\t\trowEl = row.getElement(),\r\n\t\trowTop,\r\n\t\toffset = 0;\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif(rowIndex > -1){\r\n\r\n\t\t\t\tif(typeof position === \"undefined\"){\r\n\t\t\t\t\tposition = this.table.options.scrollToRowPosition;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(typeof ifVisible === \"undefined\"){\r\n\t\t\t\t\tifVisible = this.table.options.scrollToRowIfVisible;\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif(position === \"nearest\"){\r\n\t\t\t\t\tswitch(this.renderMode){\r\n\t\t\t\t\t\tcase\"classic\":\r\n\t\t\t\t\t\trowTop = Helpers.elOffset(rowEl).top;\r\n\t\t\t\t\t\tposition = Math.abs(this.element.scrollTop - rowTop) > Math.abs(this.element.scrollTop + this.element.clientHeight - rowTop) ? \"bottom\" : \"top\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase\"virtual\":\r\n\t\t\t\t\t\tposition = Math.abs(this.vDomTop - rowIndex) > Math.abs(this.vDomBottom - rowIndex) ? \"bottom\" : \"top\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//check row visibility\r\n\t\t\t\tif(!ifVisible){\r\n\t\t\t\t\tif(Helpers.elVisible(rowEl)){\r\n\t\t\t\t\t\toffset = Helpers.elOffset(rowEl).top - Helpers.elOffset(this.element).top;\r\n\r\n\t\t\t\t\t\tif(offset > 0 && offset < this.element.clientHeight - rowEl.offsetHeight){\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//scroll to row\r\n\t\t\t\tswitch(this.renderMode){\r\n\t\t\t\t\tcase\"classic\":\r\n\t\t\t\t\tthis.element.scrollTop = Helpers.elOffset(rowEl).top - Helpers.elOffset(this.element).top + this.element.scrollTop;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase\"virtual\":\r\n\t\t\t\t\tthis._virtualRenderFill(rowIndex, true);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//align to correct position\r\n\t\t\t\tswitch(position){\r\n\t\t\t\t\tcase \"middle\":\r\n\t\t\t\t\tcase \"center\":\r\n\r\n\t\t\t\t\tif(this.element.scrollHeight - this.element.scrollTop == this.element.clientHeight){\r\n\t\t\t\t\t\tthis.element.scrollTop = this.element.scrollTop + (rowEl.offsetTop - this.element.scrollTop) - ((this.element.scrollHeight - rowEl.offsetTop) / 2);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.element.scrollTop = this.element.scrollTop - (this.element.clientHeight / 2);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase \"bottom\":\r\n\r\n\t\t\t\t\tif(this.element.scrollHeight - this.element.scrollTop == this.element.clientHeight){\r\n\t\t\t\t\t\tthis.element.scrollTop = this.element.scrollTop - (this.element.scrollHeight - rowEl.offsetTop) + rowEl.offsetHeight;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.element.scrollTop = this.element.scrollTop - this.element.clientHeight + rowEl.offsetHeight;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tresolve();\r\n\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Scroll Error - Row not visible\");\r\n\t\t\t\treject(\"Scroll Error - Row not visible\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t////////////////// Data Handling //////////////////\r\n\tsetData(data, renderInPosition, columnsChanged){\r\n\t\treturn new Promise((resolve, reject)=>{\r\n\t\t\tif(renderInPosition && this.getDisplayRows().length){\r\n\t\t\t\tif(this.table.options.pagination){\r\n\t\t\t\t\tthis._setDataActual(data, true);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.reRenderInPosition(() => {\r\n\t\t\t\t\t\tthis._setDataActual(data);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(this.table.options.autoColumns && columnsChanged){\r\n\t\t\t\t\tthis.table.columnManager.generateColumnsFromRowData(data);\r\n\t\t\t\t}\r\n\t\t\t\tthis.resetScroll();\r\n\r\n\t\t\t\tthis._setDataActual(data);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\r\n\t_setDataActual(data, renderInPosition){\r\n\t\tthis.table.options.dataLoading.call(this.table, data);\r\n\r\n\t\tthis._wipeElements();\r\n\r\n\t\tif(this.table.options.history && this.table.modExists(\"history\")){\r\n\t\t\tthis.table.modules.history.clear();\r\n\t\t}\r\n\r\n\t\tif(Array.isArray(data)){\r\n\r\n\t\t\tif(this.table.modExists(\"selectRow\")){\r\n\t\t\t\tthis.table.modules.selectRow.clearSelectionData();\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.options.reactiveData && this.table.modExists(\"reactiveData\", true)){\r\n\t\t\t\tthis.table.modules.reactiveData.watchData(data);\r\n\t\t\t}\r\n\r\n\t\t\tdata.forEach((def, i) => {\r\n\t\t\t\tif(def && typeof def === \"object\"){\r\n\t\t\t\t\tvar row = new Row(def, this);\r\n\t\t\t\t\tthis.rows.push(row);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Data Loading Warning - Invalid row data detected and ignored, expecting object but received:\", def);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.refreshActiveData(false, false, renderInPosition);\r\n\r\n\t\t\tthis.table.options.dataLoaded.call(this.table, data);\r\n\t\t}else{\r\n\t\t\tconsole.error(\"Data Loading Error - Unable to process data due to invalid data type \\nExpecting: array \\nReceived: \", typeof data, \"\\nData:     \", data);\r\n\t\t}\r\n\t}\r\n\r\n\t_wipeElements(){\r\n\t\tthis.rows.forEach((row) => {\r\n\t\t\trow.wipe();\r\n\t\t});\r\n\r\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\r\n\t\t\tthis.table.modules.groupRows.wipe();\r\n\t\t}\r\n\r\n\t\tthis.rows = [];\r\n\t\tthis.activeRows = [];\r\n\t\tthis.activeRowsCount = 0;\r\n\t\tthis.displayRows = [];\r\n\t\tthis.displayRowsCount = 0;\r\n\r\n\t\tthis.adjustTableSize();\r\n\t}\r\n\r\n\tdeleteRow(row, blockRedraw){\r\n\t\tvar allIndex = this.rows.indexOf(row),\r\n\t\tactiveIndex = this.activeRows.indexOf(row);\r\n\r\n\t\tif(activeIndex > -1){\r\n\t\t\tthis.activeRows.splice(activeIndex, 1);\r\n\t\t}\r\n\r\n\t\tif(allIndex > -1){\r\n\t\t\tthis.rows.splice(allIndex, 1);\r\n\t\t}\r\n\r\n\t\tthis.setActiveRows(this.activeRows);\r\n\r\n\t\tthis.displayRowIterator((rows) => {\r\n\t\t\tvar displayIndex = rows.indexOf(row);\r\n\r\n\t\t\tif(displayIndex > -1){\r\n\t\t\t\trows.splice(displayIndex, 1);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(!blockRedraw){\r\n\t\t\tthis.reRenderInPosition();\r\n\t\t}\r\n\r\n\t\tthis.regenerateRowNumbers();\r\n\r\n\t\tthis.table.options.rowDeleted.call(this.table, row.getComponent());\r\n\r\n\t\tif(this.table.options.dataChanged){\r\n\t\t\tthis.table.options.dataChanged.call(this.table, this.getData());\r\n\t\t}\r\n\r\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\r\n\t\t\tthis.table.modules.groupRows.updateGroupRows(true);\r\n\t\t}else if(this.table.options.pagination && this.table.modExists(\"page\")){\r\n\t\t\tthis.refreshActiveData(false, false, true);\r\n\t\t}else{\r\n\t\t\tif(this.table.options.pagination && this.table.modExists(\"page\")){\r\n\t\t\t\tthis.refreshActiveData(\"page\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\taddRow(data, pos, index, blockRedraw){\r\n\t\tvar row = this.addRowActual(data, pos, index, blockRedraw);\r\n\r\n\t\tif(this.table.options.history && this.table.modExists(\"history\")){\r\n\t\t\tthis.table.modules.history.action(\"rowAdd\", row, {data:data, pos:pos, index:index});\r\n\t\t}\r\n\r\n\t\treturn row;\r\n\t}\r\n\r\n\t//add multiple rows\r\n\taddRows(data, pos, index){\r\n\t\tvar length = 0,\r\n\t\trows = [];\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tpos = this.findAddRowPos(pos);\r\n\r\n\t\t\tif(!Array.isArray(data)){\r\n\t\t\t\tdata = [data];\r\n\t\t\t}\r\n\r\n\t\t\tlength = data.length - 1;\r\n\r\n\t\t\tif((typeof index == \"undefined\" && pos) || (typeof index !== \"undefined\" && !pos)){\r\n\t\t\t\tdata.reverse();\r\n\t\t\t}\r\n\r\n\t\t\tdata.forEach((item, i) => {\r\n\t\t\t\tvar row = this.addRow(item, pos, index, true);\r\n\t\t\t\trows.push(row);\r\n\t\t\t});\r\n\r\n\t\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\r\n\t\t\t\tthis.table.modules.groupRows.updateGroupRows(true);\r\n\t\t\t}else if(this.table.options.pagination && this.table.modExists(\"page\")){\r\n\t\t\t\tthis.refreshActiveData(false, false, true);\r\n\t\t\t}else{\r\n\t\t\t\tthis.reRenderInPosition();\r\n\t\t\t}\r\n\r\n\t\t\t//recalc column calculations if present\r\n\t\t\tif(this.table.modExists(\"columnCalcs\")){\r\n\t\t\t\tthis.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\r\n\t\t\t}\r\n\r\n\t\t\tthis.regenerateRowNumbers();\r\n\t\t\tresolve(rows);\r\n\t\t});\r\n\t}\r\n\r\n\tfindAddRowPos(pos){\r\n\t\tif(typeof pos === \"undefined\"){\r\n\t\t\tpos = this.table.options.addRowPos;\r\n\t\t}\r\n\r\n\t\tif(pos === \"pos\"){\r\n\t\t\tpos = true;\r\n\t\t}\r\n\r\n\t\tif(pos === \"bottom\"){\r\n\t\t\tpos = false;\r\n\t\t}\r\n\r\n\t\treturn pos;\r\n\t}\r\n\r\n\taddRowActual(data, pos, index, blockRedraw){\r\n\t\tvar row = data instanceof Row ? data : new Row(data || {}, this),\r\n\t\ttop = this.findAddRowPos(pos),\r\n\t\tallIndex = -1,\r\n\t\tactiveIndex, dispRows;\r\n\r\n\t\tif(!index && this.table.options.pagination && this.table.options.paginationAddRow == \"page\"){\r\n\t\t\tdispRows = this.getDisplayRows();\r\n\r\n\t\t\tif(top){\r\n\t\t\t\tif(dispRows.length){\r\n\t\t\t\t\tindex = dispRows[0];\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(this.activeRows.length){\r\n\t\t\t\t\t\tindex = this.activeRows[this.activeRows.length-1];\r\n\t\t\t\t\t\ttop = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(dispRows.length){\r\n\t\t\t\t\tindex = dispRows[dispRows.length - 1];\r\n\t\t\t\t\ttop = dispRows.length < this.table.modules.page.getPageSize() ? false : true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(typeof index !== \"undefined\"){\r\n\t\t\tindex = this.findRow(index);\r\n\t\t}\r\n\r\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\r\n\t\t\tthis.table.modules.groupRows.assignRowToGroup(row);\r\n\r\n\t\t\tvar groupRows = row.getGroup().rows;\r\n\r\n\t\t\tif(groupRows.length > 1){\r\n\r\n\t\t\t\tif(!index || (index && groupRows.indexOf(index) == -1)){\r\n\t\t\t\t\tif(top){\r\n\t\t\t\t\t\tif(groupRows[0] !== row){\r\n\t\t\t\t\t\t\tindex = groupRows[0];\r\n\t\t\t\t\t\t\tthis._moveRowInArray(row.getGroup().rows, row, index, !top);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(groupRows[groupRows.length -1] !== row){\r\n\t\t\t\t\t\t\tindex = groupRows[groupRows.length -1];\r\n\t\t\t\t\t\t\tthis._moveRowInArray(row.getGroup().rows, row, index, !top);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis._moveRowInArray(row.getGroup().rows, row, index, !top);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(index){\r\n\t\t\tallIndex = this.rows.indexOf(index);\r\n\t\t}\r\n\r\n\t\tif(index && allIndex > -1){\r\n\t\t\tactiveIndex = this.activeRows.indexOf(index);\r\n\r\n\t\t\tthis.displayRowIterator(function(rows){\r\n\t\t\t\tvar displayIndex = rows.indexOf(index);\r\n\r\n\t\t\t\tif(displayIndex > -1){\r\n\t\t\t\t\trows.splice((top ? displayIndex : displayIndex + 1), 0, row);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(activeIndex > -1){\r\n\t\t\t\tthis.activeRows.splice((top ? activeIndex : activeIndex + 1), 0, row);\r\n\t\t\t}\r\n\r\n\t\t\tthis.rows.splice((top ? allIndex : allIndex + 1), 0, row);\r\n\r\n\t\t}else{\r\n\r\n\t\t\tif(top){\r\n\r\n\t\t\t\tthis.displayRowIterator(function(rows){\r\n\t\t\t\t\trows.unshift(row);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.activeRows.unshift(row);\r\n\t\t\t\tthis.rows.unshift(row);\r\n\t\t\t}else{\r\n\t\t\t\tthis.displayRowIterator(function(rows){\r\n\t\t\t\t\trows.push(row);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.activeRows.push(row);\r\n\t\t\t\tthis.rows.push(row);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.setActiveRows(this.activeRows);\r\n\r\n\t\tthis.table.options.rowAdded.call(this.table, row.getComponent());\r\n\r\n\t\tif(this.table.options.dataChanged){\r\n\t\t\tthis.table.options.dataChanged.call(this.table, this.getData());\r\n\t\t}\r\n\r\n\t\tif(!blockRedraw){\r\n\t\t\tthis.reRenderInPosition();\r\n\t\t}\r\n\r\n\t\treturn row;\r\n\t}\r\n\r\n\tmoveRow(from, to, after){\r\n\t\tif(this.table.options.history && this.table.modExists(\"history\")){\r\n\t\t\tthis.table.modules.history.action(\"rowMove\", from, {posFrom:this.getRowPosition(from), posTo:this.getRowPosition(to), to:to, after:after});\r\n\t\t}\r\n\r\n\t\tthis.moveRowActual(from, to, after);\r\n\r\n\t\tthis.regenerateRowNumbers();\r\n\r\n\t\tthis.table.options.rowMoved.call(this.table, from.getComponent());\r\n\t}\r\n\r\n\tmoveRowActual(from, to, after){\r\n\t\tthis._moveRowInArray(this.rows, from, to, after);\r\n\t\tthis._moveRowInArray(this.activeRows, from, to, after);\r\n\r\n\t\tthis.displayRowIterator((rows) => {\r\n\t\t\tthis._moveRowInArray(rows, from, to, after);\r\n\t\t});\r\n\r\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\r\n\r\n\t\t\tif(!after && to instanceof Group){\r\n\t\t\t\tto = this.table.rowManager.prevDisplayRow(from) || to;\r\n\t\t\t}\r\n\r\n\t\t\tvar toGroup = to.getGroup();\r\n\t\t\tvar fromGroup = from.getGroup();\r\n\r\n\t\t\tif(toGroup === fromGroup){\r\n\t\t\t\tthis._moveRowInArray(toGroup.rows, from, to, after);\r\n\t\t\t}else{\r\n\t\t\t\tif(fromGroup){\r\n\t\t\t\t\tfromGroup.removeRow(from);\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttoGroup.insertRow(from, to, after);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t_moveRowInArray(rows, from, to, after){\r\n\t\tvar\tfromIndex, toIndex, start, end;\r\n\r\n\t\tif(from !== to){\r\n\r\n\t\t\tfromIndex = rows.indexOf(from);\r\n\r\n\t\t\tif (fromIndex > -1) {\r\n\r\n\t\t\t\trows.splice(fromIndex, 1);\r\n\r\n\t\t\t\ttoIndex = rows.indexOf(to);\r\n\r\n\t\t\t\tif (toIndex > -1) {\r\n\r\n\t\t\t\t\tif(after){\r\n\t\t\t\t\t\trows.splice(toIndex+1, 0, from);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\trows.splice(toIndex, 0, from);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}else{\r\n\t\t\t\t\trows.splice(fromIndex, 0, from);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//restyle rows\r\n\t\t\tif(rows === this.getDisplayRows()){\r\n\r\n\t\t\t\tstart = fromIndex < toIndex ? fromIndex : toIndex;\r\n\t\t\t\tend = toIndex > fromIndex ? toIndex : fromIndex +1;\r\n\r\n\t\t\t\tfor(let i = start; i <= end; i++){\r\n\t\t\t\t\tif(rows[i]){\r\n\t\t\t\t\t\tthis.styleRow(rows[i], i);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tclearData(){\r\n\t\tthis.setData([]);\r\n\t}\r\n\r\n\tgetRowIndex(row){\r\n\t\treturn this.findRowIndex(row, this.rows);\r\n\t}\r\n\r\n\tgetDisplayRowIndex(row){\r\n\t\tvar index = this.getDisplayRows().indexOf(row);\r\n\t\treturn index > -1 ? index : false;\r\n\t}\r\n\r\n\tnextDisplayRow(row, rowOnly){\r\n\t\tvar index = this.getDisplayRowIndex(row),\r\n\t\tnextRow = false;\r\n\r\n\r\n\t\tif(index !== false && index < this.displayRowsCount -1){\r\n\t\t\tnextRow = this.getDisplayRows()[index+1];\r\n\t\t}\r\n\r\n\t\tif(nextRow && (!(nextRow instanceof Row) || nextRow.type != \"row\")){\r\n\t\t\treturn this.nextDisplayRow(nextRow, rowOnly);\r\n\t\t}\r\n\r\n\t\treturn nextRow;\r\n\t}\r\n\r\n\tprevDisplayRow(row, rowOnly){\r\n\t\tvar index = this.getDisplayRowIndex(row),\r\n\t\tprevRow = false;\r\n\r\n\t\tif(index){\r\n\t\t\tprevRow = this.getDisplayRows()[index-1];\r\n\t\t}\r\n\r\n\t\tif(rowOnly && prevRow && (!(prevRow instanceof Row) || prevRow.type != \"row\")){\r\n\t\t\treturn this.prevDisplayRow(prevRow, rowOnly);\r\n\t\t}\r\n\r\n\t\treturn prevRow;\r\n\t}\r\n\r\n\tfindRowIndex(row, list){\r\n\t\tvar rowIndex;\r\n\r\n\t\trow = this.findRow(row);\r\n\r\n\t\tif(row){\r\n\t\t\trowIndex = list.indexOf(row);\r\n\r\n\t\t\tif(rowIndex > -1){\r\n\t\t\t\treturn rowIndex;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tgetData(active, transform){\r\n\t\tvar output = [],\r\n\t\trows = this.getRows(active);\r\n\r\n\t\trows.forEach(function(row){\r\n\t\t\tif(row.type == \"row\"){\r\n\t\t\t\toutput.push(row.getData(transform || \"data\"));\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgetComponents(active){\r\n\t\tvar\toutput = [],\r\n\t\trows = this.getRows(active);\r\n\r\n\t\trows.forEach(function(row){\r\n\t\t\toutput.push(row.getComponent());\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgetDataCount(active){\r\n\t\tvar rows = this.getRows(active);\r\n\r\n\t\treturn rows.length;\r\n\t}\r\n\r\n\t_genRemoteRequest(){\r\n\t\tvar table = this.table,\r\n\t\toptions = table.options,\r\n\t\tparams = {};\r\n\r\n\t\tif(table.modExists(\"page\")){\r\n\t\t\t//set sort data if defined\r\n\t\t\tif(options.ajaxSorting){\r\n\t\t\t\tlet sorters = this.table.modules.sort.getSort();\r\n\r\n\t\t\t\tsorters.forEach(function(item){\r\n\t\t\t\t\tdelete item.column;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tparams[this.table.modules.page.paginationDataSentNames.sorters] = sorters;\r\n\t\t\t}\r\n\r\n\t\t\t//set filter data if defined\r\n\t\t\tif(options.ajaxFiltering){\r\n\t\t\t\tlet filters = this.table.modules.filter.getFilters(true, true);\r\n\r\n\t\t\t\tparams[this.table.modules.page.paginationDataSentNames.filters] = filters;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tthis.table.modules.ajax.setParams(params, true);\r\n\t\t}\r\n\r\n\t\ttable.modules.ajax.sendRequest()\r\n\t\t.then((data)=>{\r\n\t\t\tthis._setDataActual(data, true);\r\n\t\t})\r\n\t\t.catch((e)=>{});\r\n\t}\r\n\r\n\t//choose the path to refresh data after a filter update\r\n\tfilterRefresh(){\r\n\t\tvar table = this.table,\r\n\t\toptions = table.options,\r\n\t\tleft = this.scrollLeft;\r\n\r\n\t\tif(options.ajaxFiltering){\r\n\t\t\tif(options.pagination == \"remote\" && table.modExists(\"page\")){\r\n\t\t\t\ttable.modules.page.reset(true);\r\n\t\t\t\ttable.modules.page.setPage(1).then(()=>{}).catch(()=>{});\r\n\t\t\t}else if(options.ajaxProgressiveLoad){\r\n\t\t\t\ttable.modules.ajax.loadData().then(()=>{}).catch(()=>{});\r\n\t\t\t}else{\r\n\t\t\t\t//assume data is url, make ajax call to url to get data\r\n\t\t\t\tthis._genRemoteRequest();\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.refreshActiveData(\"filter\");\r\n\t\t}\r\n\r\n\t\tthis.scrollHorizontal(left);\r\n\t}\r\n\r\n\t//choose the path to refresh data after a sorter update\r\n\tsorterRefresh(loadOrignalData){\r\n\t\tvar table = this.table,\r\n\t\toptions = this.table.options,\r\n\t\tleft = this.scrollLeft;\r\n\r\n\t\tif(options.ajaxSorting){\r\n\t\t\tif((options.pagination == \"remote\" || options.progressiveLoad) && table.modExists(\"page\")){\r\n\t\t\t\ttable.modules.page.reset(true);\r\n\t\t\t\ttable.modules.page.setPage(1).then(()=>{}).catch(()=>{});\r\n\t\t\t}else if(options.ajaxProgressiveLoad){\r\n\t\t\t\ttable.modules.ajax.loadData().then(()=>{}).catch(()=>{});\r\n\t\t\t}else{\r\n\t\t\t\t//assume data is url, make ajax call to url to get data\r\n\t\t\t\tthis._genRemoteRequest();\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.refreshActiveData(loadOrignalData ? \"filter\" : \"sort\");\r\n\t\t}\r\n\r\n\t\tthis.scrollHorizontal(left);\r\n\t}\r\n\r\n\tscrollHorizontal(left){\r\n\t\tthis.scrollLeft = left;\r\n\t\tthis.element.scrollLeft = left;\r\n\r\n\t\tif(this.table.options.groupBy){\r\n\t\t\tthis.table.modules.groupRows.scrollHeaders(left);\r\n\t\t}\r\n\r\n\t\tif(this.table.modExists(\"columnCalcs\")){\r\n\t\t\tthis.table.modules.columnCalcs.scrollHorizontal(left);\r\n\t\t}\r\n\t}\r\n\r\n\t//set active data set\r\n\trefreshActiveData(stage, skipStage, renderInPosition){\r\n\t\tvar table = this.table,\r\n\t\tcascadeOrder = [\"all\", \"filter\", \"sort\", \"display\", \"freeze\", \"group\", \"tree\", \"page\"],\r\n\t\tdisplayIndex;\r\n\r\n\t\tif(this.redrawBlock){\r\n\r\n\t\t\tif(!this.redrawBlockRestoreConfig || (cascadeOrder.indexOf(stage) < cascadeOrder.indexOf(this.redrawBlockRestoreConfig.stage))){\r\n\t\t\t\tthis.redrawBlockRestoreConfig = {\r\n\t\t\t\t\tstage: stage,\r\n\t\t\t\t\tskipStage: skipStage,\r\n\t\t\t\t\trenderInPosition: renderInPosition,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\t\t}else{\r\n\r\n\t\t\tif(this.table.modExists(\"edit\")){\r\n\t\t\t\tthis.table.modules.edit.cancelEdit();\r\n\t\t\t}\r\n\r\n\t\t\tif(!stage){\r\n\t\t\t\tstage = \"all\";\r\n\t\t\t}\r\n\r\n\t\t\tif(table.options.selectable && !table.options.selectablePersistence && table.modExists(\"selectRow\")){\r\n\t\t\t\ttable.modules.selectRow.deselectRows();\r\n\t\t\t}\r\n\r\n\t\t\t//cascade through data refresh stages\r\n\t\t\tswitch(stage){\r\n\t\t\t\tcase \"all\":\r\n\r\n\t\t\t\tcase \"filter\":\r\n\t\t\t\tif(!skipStage){\r\n\t\t\t\t\tif(table.modExists(\"filter\")){\r\n\t\t\t\t\t\tthis.setActiveRows(table.modules.filter.filter(this.rows));\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.setActiveRows(this.rows.slice(0));\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tskipStage = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcase \"sort\":\r\n\t\t\t\tif(!skipStage){\r\n\t\t\t\t\tif(table.modExists(\"sort\")){\r\n\t\t\t\t\t\ttable.modules.sort.sort(this.activeRows);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tskipStage = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//regenerate row numbers for row number formatter if in use\r\n\t\t\t\tthis.regenerateRowNumbers();\r\n\r\n\t\t\t\t//generic stage to allow for pipeline trigger after the data manipulation stage\r\n\t\t\t\tcase \"display\":\r\n\t\t\t\tthis.resetDisplayRows();\r\n\r\n\t\t\t\tcase \"freeze\":\r\n\t\t\t\tif(!skipStage){\r\n\t\t\t\t\tif(this.table.modExists(\"frozenRows\")){\r\n\t\t\t\t\t\tif(table.modules.frozenRows.isFrozen()){\r\n\t\t\t\t\t\t\tif(!table.modules.frozenRows.getDisplayIndex()){\r\n\t\t\t\t\t\t\t\ttable.modules.frozenRows.setDisplayIndex(this.getNextDisplayIndex());\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tdisplayIndex = table.modules.frozenRows.getDisplayIndex();\r\n\r\n\t\t\t\t\t\t\tdisplayIndex = this.setDisplayRows(table.modules.frozenRows.getRows(this.getDisplayRows(displayIndex - 1)), displayIndex);\r\n\r\n\t\t\t\t\t\t\tif(displayIndex !== true){\r\n\t\t\t\t\t\t\t\ttable.modules.frozenRows.setDisplayIndex(displayIndex);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tskipStage = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcase \"group\":\r\n\t\t\t\tif(!skipStage){\r\n\t\t\t\t\tif(table.options.groupBy && table.modExists(\"groupRows\")){\r\n\r\n\t\t\t\t\t\tif(!table.modules.groupRows.getDisplayIndex()){\r\n\t\t\t\t\t\t\ttable.modules.groupRows.setDisplayIndex(this.getNextDisplayIndex());\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tdisplayIndex = table.modules.groupRows.getDisplayIndex();\r\n\r\n\t\t\t\t\t\tdisplayIndex = this.setDisplayRows(table.modules.groupRows.getRows(this.getDisplayRows(displayIndex - 1)), displayIndex);\r\n\r\n\t\t\t\t\t\tif(displayIndex !== true){\r\n\t\t\t\t\t\t\ttable.modules.groupRows.setDisplayIndex(displayIndex);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tskipStage = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcase \"tree\":\r\n\r\n\t\t\t\tif(!skipStage){\r\n\t\t\t\t\tif(table.options.dataTree && table.modExists(\"dataTree\")){\r\n\t\t\t\t\t\tif(!table.modules.dataTree.getDisplayIndex()){\r\n\t\t\t\t\t\t\ttable.modules.dataTree.setDisplayIndex(this.getNextDisplayIndex());\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tdisplayIndex = table.modules.dataTree.getDisplayIndex();\r\n\r\n\t\t\t\t\t\tdisplayIndex = this.setDisplayRows(table.modules.dataTree.getRows(this.getDisplayRows(displayIndex - 1)), displayIndex);\r\n\r\n\t\t\t\t\t\tif(displayIndex !== true){\r\n\t\t\t\t\t\t\ttable.modules.dataTree.setDisplayIndex(displayIndex);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tskipStage = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(table.options.pagination && table.modExists(\"page\") && !renderInPosition){\r\n\t\t\t\t\tif(table.modules.page.getMode() == \"local\"){\r\n\t\t\t\t\t\ttable.modules.page.reset();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcase \"page\":\r\n\t\t\t\tif(!skipStage){\r\n\t\t\t\t\tif(table.options.pagination && table.modExists(\"page\")){\r\n\r\n\t\t\t\t\t\tif(!table.modules.page.getDisplayIndex()){\r\n\t\t\t\t\t\t\ttable.modules.page.setDisplayIndex(this.getNextDisplayIndex());\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tdisplayIndex = table.modules.page.getDisplayIndex();\r\n\r\n\t\t\t\t\t\tif(table.modules.page.getMode() == \"local\"){\r\n\t\t\t\t\t\t\ttable.modules.page.setMaxRows(this.getDisplayRows(displayIndex - 1).length);\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\tdisplayIndex = this.setDisplayRows(table.modules.page.getRows(this.getDisplayRows(displayIndex - 1)), displayIndex);\r\n\r\n\t\t\t\t\t\tif(displayIndex !== true){\r\n\t\t\t\t\t\t\ttable.modules.page.setDisplayIndex(displayIndex);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tskipStage = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif(Helpers.elVisible(this.element)){\r\n\t\t\t\tif(renderInPosition){\r\n\t\t\t\t\tthis.reRenderInPosition();\r\n\t\t\t\t}else{\r\n\r\n\t\t\t\t\tif(stage === \"all\" && this.table.options.virtualDomHoz){\r\n\t\t\t\t\t\tthis.table.vdomHoz.dataChange();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.renderTable();\r\n\r\n\t\t\t\t\tif(table.options.layoutColumnsOnNewData){\r\n\t\t\t\t\t\tthis.table.columnManager.redraw(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(table.modExists(\"columnCalcs\")){\r\n\t\t\t\ttable.modules.columnCalcs.recalc(this.activeRows);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//regenerate row numbers for row number formatter if in use\r\n\tregenerateRowNumbers(){\r\n\t\tif(this.rowNumColumn){\r\n\t\t\tthis.activeRows.forEach((row) => {\r\n\t\t\t\tvar cell = row.getCell(this.rowNumColumn);\r\n\r\n\t\t\t\tif(cell){\r\n\t\t\t\t\tcell._generateContents();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tsetActiveRows(activeRows){\r\n\t\tthis.activeRows = activeRows;\r\n\t\tthis.activeRowsCount = this.activeRows.length;\r\n\t}\r\n\r\n\t//reset display rows array\r\n\tresetDisplayRows(){\r\n\t\tthis.displayRows = [];\r\n\r\n\t\tthis.displayRows.push(this.activeRows.slice(0));\r\n\r\n\t\tthis.displayRowsCount = this.displayRows[0].length;\r\n\r\n\t\tif(this.table.modExists(\"frozenRows\")){\r\n\t\t\tthis.table.modules.frozenRows.setDisplayIndex(0);\r\n\t\t}\r\n\r\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\r\n\t\t\tthis.table.modules.groupRows.setDisplayIndex(0);\r\n\t\t}\r\n\r\n\t\tif(this.table.options.pagination && this.table.modExists(\"page\")){\r\n\t\t\tthis.table.modules.page.setDisplayIndex(0);\r\n\t\t}\r\n\t}\r\n\r\n\tgetNextDisplayIndex(){\r\n\t\treturn this.displayRows.length;\r\n\t}\r\n\r\n\t//set display row pipeline data\r\n\tsetDisplayRows(displayRows, index){\r\n\r\n\t\tvar output = true;\r\n\r\n\t\tif(index && typeof this.displayRows[index] != \"undefined\"){\r\n\t\t\tthis.displayRows[index] = displayRows;\r\n\t\t\toutput = true;\r\n\t\t}else{\r\n\t\t\tthis.displayRows.push(displayRows)\r\n\t\t\toutput = index = this.displayRows.length -1;\r\n\t\t}\r\n\r\n\t\tif(index == this.displayRows.length -1){\r\n\t\t\tthis.displayRowsCount = this.displayRows[this.displayRows.length -1].length;\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgetDisplayRows(index){\r\n\t\tif(typeof index == \"undefined\"){\r\n\t\t\treturn this.displayRows.length ? this.displayRows[this.displayRows.length -1] : [];\r\n\t\t}else{\r\n\t\t\treturn this.displayRows[index] || [];\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgetVisibleRows(viewable){\r\n\t\tvar topEdge = this.element.scrollTop,\r\n\t\tbottomEdge = this.element.clientHeight + topEdge,\r\n\t\ttopFound = false,\r\n\t\ttopRow = 0,\r\n\t\tbottomRow = 0,\r\n\t\trows = this.getDisplayRows();\r\n\r\n\t\tif(viewable){\r\n\r\n\t\t\tthis.getDisplayRows();\r\n\t\t\tfor(var i = this.vDomTop; i <= this.vDomBottom; i++){\r\n\t\t\t\tif(rows[i]){\r\n\t\t\t\t\tif(!topFound){\r\n\t\t\t\t\t\tif((topEdge - rows[i].getElement().offsetTop) >= 0){\r\n\t\t\t\t\t\t\ttopRow = i;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\ttopFound = true;\r\n\r\n\t\t\t\t\t\t\tif(bottomEdge - rows[i].getElement().offsetTop >= 0){\r\n\t\t\t\t\t\t\t\tbottomRow = i;\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(bottomEdge - rows[i].getElement().offsetTop >= 0){\r\n\t\t\t\t\t\t\tbottomRow = i;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\ttopRow = this.vDomTop;\r\n\t\t\tbottomRow = this.vDomBottom;\r\n\t\t}\r\n\r\n\t\treturn rows.slice(topRow, bottomRow + 1);\r\n\t}\r\n\r\n\t//repeat action accross display rows\r\n\tdisplayRowIterator(callback){\r\n\t\tthis.displayRows.forEach(callback);\r\n\r\n\t\tthis.displayRowsCount = this.displayRows[this.displayRows.length -1].length;\r\n\t}\r\n\r\n\t//return only actual rows (not group headers etc)\r\n\tgetRows(active){\r\n\t\tvar rows;\r\n\r\n\t\tswitch(active){\r\n\t\t\tcase \"active\":\r\n\t\t\trows = this.activeRows;\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"display\":\r\n\t\t\trows = this.table.rowManager.getDisplayRows();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"visible\":\r\n\t\t\trows = this.getVisibleRows(true);\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"selected\":\r\n\t\t\trows = this.table.modules.selectRow.selectedRows;\r\n\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\trows = this.rows;\r\n\t\t}\r\n\r\n\t\treturn rows;\r\n\t}\r\n\r\n\t///////////////// Table Rendering /////////////////\r\n\t//trigger rerender of table in current position\r\n\treRenderInPosition(callback){\r\n\t\tif(this.getRenderMode() == \"virtual\"){\r\n\r\n\t\t\tif(this.redrawBlock){\r\n\t\t\t\tif(callback){\r\n\t\t\t\t\tcallback();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.redrawBlockRederInPosition = true;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tvar scrollTop = this.element.scrollTop;\r\n\t\t\t\tvar topRow = false;\r\n\t\t\t\tvar topOffset = false;\r\n\r\n\t\t\t\tvar left = this.scrollLeft;\r\n\r\n\t\t\t\tvar rows = this.getDisplayRows();\r\n\r\n\t\t\t\tfor(var i = this.vDomTop; i <= this.vDomBottom; i++){\r\n\r\n\t\t\t\t\tif(rows[i]){\r\n\t\t\t\t\t\tvar diff = scrollTop - rows[i].getElement().offsetTop;\r\n\r\n\t\t\t\t\t\tif(topOffset === false || Math.abs(diff) < topOffset){\r\n\t\t\t\t\t\t\ttopOffset = diff;\r\n\t\t\t\t\t\t\ttopRow = i;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(callback){\r\n\t\t\t\t\tcallback();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._virtualRenderFill((topRow === false ? this.displayRowsCount - 1 : topRow), true, topOffset || 0);\r\n\r\n\t\t\t\tthis.scrollHorizontal(left);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.renderTable();\r\n\r\n\t\t\tif(callback){\r\n\t\t\t\tcallback();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsetRenderMode(){\r\n\r\n\t\tif(this.table.options.virtualDom){\r\n\r\n\t\t\tthis.renderMode = \"virtual\";\r\n\r\n\t\t\tif((this.table.element.clientHeight || this.table.options.height)){\r\n\t\t\t\tthis.fixedHeight = true;\r\n\t\t\t}else{\r\n\t\t\t\tthis.fixedHeight = false;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.renderMode = \"classic\";\r\n\t\t}\r\n\t}\r\n\r\n\tgetRenderMode(){\r\n\t\treturn this.renderMode;\r\n\t}\r\n\r\n\trenderTable(){\r\n\r\n\t\tthis.table.options.renderStarted.call(this.table);\r\n\r\n\t\tthis.element.scrollTop = 0;\r\n\r\n\t\tswitch(this.renderMode){\r\n\t\t\tcase \"classic\":\r\n\t\t\tthis._simpleRender();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"virtual\":\r\n\t\t\tthis._virtualRenderFill();\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tif(this.firstRender){\r\n\t\t\tif(this.displayRowsCount){\r\n\t\t\t\tthis.firstRender = false;\r\n\t\t\t\tthis.table.modules.layout.layout();\r\n\t\t\t}else{\r\n\t\t\t\tthis.renderEmptyScroll();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.table.modExists(\"frozenColumns\")){\r\n\t\t\tthis.table.modules.frozenColumns.layout();\r\n\t\t}\r\n\r\n\t\tif(!this.displayRowsCount){\r\n\t\t\tif(this.table.options.placeholder){\r\n\r\n\t\t\t\tthis.table.options.placeholder.setAttribute(\"tabulator-render-mode\", this.renderMode);\r\n\r\n\t\t\t\tthis.getElement().appendChild(this.table.options.placeholder);\r\n\t\t\t\tthis.table.options.placeholder.style.width = this.table.columnManager.getWidth() + \"px\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.table.options.renderComplete.call(this.table);\r\n\t}\r\n\r\n\t//simple render on heightless table\r\n\t_simpleRender(){\r\n\t\tthis._clearVirtualDom();\r\n\r\n\t\tif(this.displayRowsCount){\r\n\t\t\tthis.checkClassicModeGroupHeaderWidth();\r\n\t\t}else{\r\n\t\t\tthis.renderEmptyScroll();\r\n\t\t}\r\n\t}\r\n\r\n\tcheckClassicModeGroupHeaderWidth(){\r\n\t\tvar element = this.tableElement,\r\n\t\tonlyGroupHeaders = true;\r\n\r\n\t\tthis.getDisplayRows().forEach((row, index) => {\r\n\t\t\tthis.styleRow(row, index);\r\n\t\t\telement.appendChild(row.getElement());\r\n\t\t\trow.initialize(true);\r\n\r\n\t\t\tif(row.type !== \"group\"){\r\n\t\t\t\tonlyGroupHeaders = false;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(onlyGroupHeaders){\r\n\t\t\telement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\r\n\t\t}else{\r\n\t\t\telement.style.minWidth = \"\";\r\n\t\t}\r\n\t}\r\n\r\n\t//show scrollbars on empty table div\r\n\trenderEmptyScroll(){\r\n\t\tif(this.table.options.placeholder){\r\n\t\t\tthis.tableElement.style.display = \"none\";\r\n\t\t}else{\r\n\t\t\tthis.tableElement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\r\n\t\t\t// this.tableElement.style.minHeight = \"1px\";\r\n\t\t\t// this.tableElement.style.visibility = \"hidden\";\r\n\t\t}\r\n\t}\r\n\r\n\t_clearVirtualDom(){\r\n\t\tvar element = this.tableElement;\r\n\r\n\t\tif(this.table.options.placeholder && this.table.options.placeholder.parentNode){\r\n\t\t\tthis.table.options.placeholder.parentNode.removeChild(this.table.options.placeholder);\r\n\t\t}\r\n\r\n\t\t// element.children.detach();\r\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\r\n\r\n\t\telement.style.paddingTop = \"\";\r\n\t\telement.style.paddingBottom = \"\";\r\n\t\telement.style.minWidth = \"\";\r\n\t\telement.style.minHeight = \"\";\r\n\t\telement.style.display = \"\";\r\n\t\telement.style.visibility = \"\";\r\n\r\n\t\tthis.scrollTop = 0;\r\n\t\tthis.scrollLeft = 0;\r\n\t\tthis.vDomTop = 0;\r\n\t\tthis.vDomBottom = 0;\r\n\t\tthis.vDomTopPad = 0;\r\n\t\tthis.vDomBottomPad = 0;\r\n\t}\r\n\r\n\tstyleRow(row, index){\r\n\t\tvar rowEl = row.getElement();\r\n\r\n\t\tif(index % 2){\r\n\t\t\trowEl.classList.add(\"tabulator-row-even\");\r\n\t\t\trowEl.classList.remove(\"tabulator-row-odd\");\r\n\t\t}else{\r\n\t\t\trowEl.classList.add(\"tabulator-row-odd\");\r\n\t\t\trowEl.classList.remove(\"tabulator-row-even\");\r\n\t\t}\r\n\t}\r\n\r\n\t//full virtual render\r\n\t_virtualRenderFill(position, forceMove, offset){\r\n\t\tvar\telement = this.tableElement,\r\n\t\tholder = this.element,\r\n\t\ttopPad = 0,\r\n\t\trowsHeight = 0,\r\n\t\ttopPadHeight = 0,\r\n\t\ti = 0,\r\n\t\tonlyGroupHeaders = true,\r\n\t\trows = this.getDisplayRows();\r\n\r\n\t\tposition = position || 0;\r\n\r\n\t\toffset = offset || 0;\r\n\r\n\t\tif(!position){\r\n\t\t\tthis._clearVirtualDom();\r\n\t\t}else{\r\n\t\t\twhile(element.firstChild) element.removeChild(element.firstChild);\r\n\r\n\t\t\t//check if position is too close to bottom of table\r\n\t\t\tlet heightOccupied  = (this.displayRowsCount - position + 1) * this.vDomRowHeight;\r\n\r\n\t\t\tif(heightOccupied  < this.height){\r\n\t\t\t\tposition -= Math.ceil((this.height - heightOccupied ) / this.vDomRowHeight);\r\n\r\n\t\t\t\tif(position < 0){\r\n\t\t\t\t\tposition = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//calculate initial pad\r\n\t\t\ttopPad = Math.min(Math.max(Math.floor(this.vDomWindowBuffer / this.vDomRowHeight),  this.vDomWindowMinMarginRows), position);\r\n\t\t\tposition -= topPad;\r\n\t\t}\r\n\r\n\t\tif(this.displayRowsCount && Helpers.elVisible(this.element)){\r\n\t\t\tthis.vDomTop = position;\r\n\r\n\t\t\tthis.vDomBottom = position -1;\r\n\r\n\t\t\twhile ((rowsHeight <= this.height + this.vDomWindowBuffer || i < this.vDomWindowMinTotalRows) && this.vDomBottom < this.displayRowsCount -1){\r\n\t\t\t\tvar index = this.vDomBottom + 1,\r\n\t\t\t\trow = rows[index],\r\n\t\t\t\trowHeight = 0;\r\n\r\n\t\t\t\tthis.styleRow(row, index);\r\n\r\n\t\t\t\telement.appendChild(row.getElement());\r\n\r\n\t\t\t\trow.initialize();\r\n\r\n\t\t\t\tif(!row.heightInitialized){\r\n\t\t\t\t\trow.normalizeHeight(true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\trowHeight = row.getHeight();\r\n\r\n\t\t\t\tif(i < topPad){\r\n\t\t\t\t\ttopPadHeight += rowHeight;\r\n\t\t\t\t}else{\r\n\t\t\t\t\trowsHeight += rowHeight;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(rowHeight > this.vDomWindowBuffer){\r\n\t\t\t\t\tthis.vDomWindowBuffer = rowHeight * 2;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(row.type !== \"group\"){\r\n\t\t\t\t\tonlyGroupHeaders = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.vDomBottom ++;\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\r\n\t\t\tif(!position){\r\n\t\t\t\tthis.vDomTopPad = 0;\r\n\t\t\t\t//adjust rowheight to match average of rendered elements\r\n\t\t\t\tthis.vDomRowHeight = Math.floor((rowsHeight + topPadHeight) / i);\r\n\t\t\t\tthis.vDomBottomPad = this.vDomRowHeight * (this.displayRowsCount - this.vDomBottom -1);\r\n\r\n\t\t\t\tthis.vDomScrollHeight = topPadHeight + rowsHeight + this.vDomBottomPad - this.height;\r\n\t\t\t}else{\r\n\t\t\t\tthis.vDomTopPad = !forceMove ? this.scrollTop - topPadHeight : (this.vDomRowHeight * this.vDomTop) + offset;\r\n\t\t\t\tthis.vDomBottomPad = this.vDomBottom == this.displayRowsCount-1 ? 0 : Math.max(this.vDomScrollHeight - this.vDomTopPad - rowsHeight - topPadHeight, 0);\r\n\t\t\t}\r\n\r\n\t\t\telement.style.paddingTop = this.vDomTopPad + \"px\";\r\n\t\t\telement.style.paddingBottom = this.vDomBottomPad + \"px\";\r\n\r\n\t\t\tif(forceMove){\r\n\t\t\t\tthis.scrollTop = this.vDomTopPad + (topPadHeight) + offset - (this.element.scrollWidth > this.element.clientWidth ? this.element.offsetHeight - this.element.clientHeight : 0);\r\n\t\t\t}\r\n\r\n\t\t\tthis.scrollTop = Math.min(this.scrollTop, this.element.scrollHeight - this.height);\r\n\r\n\t\t\t//adjust for horizontal scrollbar if present (and not at top of table)\r\n\t\t\tif(this.element.scrollWidth > this.element.offsetWidth && forceMove){\r\n\t\t\t\tthis.scrollTop += this.element.offsetHeight - this.element.clientHeight;\r\n\t\t\t}\r\n\r\n\t\t\tthis.vDomScrollPosTop = this.scrollTop;\r\n\t\t\tthis.vDomScrollPosBottom = this.scrollTop;\r\n\r\n\t\t\tholder.scrollTop = this.scrollTop;\r\n\r\n\t\t\telement.style.minWidth = onlyGroupHeaders ? this.table.columnManager.getWidth() + \"px\" : \"\";\r\n\r\n\t\t\tif(this.table.options.groupBy){\r\n\t\t\t\tif(this.table.modules.layout.getMode() != \"fitDataFill\" && this.displayRowsCount == this.table.modules.groupRows.countGroups()){\r\n\t\t\t\t\tthis.tableElement.style.minWidth = this.table.columnManager.getWidth();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.renderEmptyScroll();\r\n\t\t}\r\n\r\n\t\tif(!this.fixedHeight){\r\n\t\t\tthis.adjustTableSize();\r\n\t\t}\r\n\t}\r\n\r\n\t//handle vertical scrolling\r\n\tscrollVertical(dir){\r\n\t\tvar topDiff = this.scrollTop - this.vDomScrollPosTop;\r\n\t\tvar bottomDiff = this.scrollTop - this.vDomScrollPosBottom;\r\n\t\tvar margin = this.vDomWindowBuffer * 2;\r\n\r\n\t\tif(-topDiff > margin || bottomDiff > margin){\r\n\t\t\t//if big scroll redraw table;\r\n\t\t\tvar left = this.scrollLeft;\r\n\t\t\tthis._virtualRenderFill(Math.floor((this.element.scrollTop / this.element.scrollHeight) * this.displayRowsCount));\r\n\t\t\tthis.scrollHorizontal(left);\r\n\t\t}else{\r\n\r\n\t\t\tif(dir){\r\n\t\t\t\t//scrolling up\r\n\t\t\t\tif(topDiff < 0){\r\n\r\n\t\t\t\t\tthis._addTopRow(-topDiff);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(bottomDiff < 0){\r\n\r\n\t\t\t\t\t//hide bottom row if needed\r\n\t\t\t\t\tif(this.vDomScrollHeight - this.scrollTop > this.vDomWindowBuffer){\r\n\t\t\t\t\t\tthis._removeBottomRow(-bottomDiff);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.vDomScrollPosBottom = this.scrollTop;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\t//scrolling down\r\n\t\t\t\tif(topDiff >= 0){\r\n\r\n\t\t\t\t\t//hide top row if needed\r\n\t\t\t\t\tif(this.scrollTop > this.vDomWindowBuffer){\r\n\r\n\t\t\t\t\t\tthis._removeTopRow(topDiff);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.vDomScrollPosTop = this.scrollTop;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(bottomDiff >= 0){\r\n\r\n\t\t\t\t\tthis._addBottomRow(bottomDiff);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t_addTopRow(topDiff, i=0){\r\n\t\tvar table = this.tableElement,\r\n\t\trows = this.getDisplayRows();\r\n\r\n\t\tif(this.vDomTop){\r\n\t\t\tlet index = this.vDomTop -1,\r\n\t\t\ttopRow = rows[index],\r\n\t\t\ttopRowHeight = topRow.getHeight() || this.vDomRowHeight;\r\n\r\n\t\t\t//hide top row if needed\r\n\t\t\tif(topDiff >= topRowHeight){\r\n\t\t\t\tthis.styleRow(topRow, index);\r\n\t\t\t\ttable.insertBefore(topRow.getElement(), table.firstChild);\r\n\t\t\t\tif(!topRow.initialized || !topRow.heightInitialized){\r\n\t\t\t\t\tthis.vDomTopNewRows.push(topRow);\r\n\r\n\t\t\t\t\tif(!topRow.heightInitialized){\r\n\t\t\t\t\t\ttopRow.clearCellHeight();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttopRow.initialize();\r\n\r\n\t\t\t\tthis.vDomTopPad -= topRowHeight;\r\n\r\n\t\t\t\tif(this.vDomTopPad < 0){\r\n\t\t\t\t\tthis.vDomTopPad = index * this.vDomRowHeight;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!index){\r\n\t\t\t\t\tthis.vDomTopPad = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttable.style.paddingTop = this.vDomTopPad + \"px\";\r\n\t\t\t\tthis.vDomScrollPosTop -= topRowHeight;\r\n\t\t\t\tthis.vDomTop--;\r\n\t\t\t}\r\n\r\n\t\t\ttopDiff = -(this.scrollTop - this.vDomScrollPosTop);\r\n\r\n\t\t\tif(topRow.getHeight() > this.vDomWindowBuffer){\r\n\t\t\t\tthis.vDomWindowBuffer = topRow.getHeight() * 2;\r\n\t\t\t}\r\n\r\n\t\t\tif(i < this.vDomMaxRenderChain && this.vDomTop && topDiff >= (rows[this.vDomTop -1].getHeight() || this.vDomRowHeight)){\r\n\t\t\t\tthis._addTopRow(topDiff, i+1);\r\n\t\t\t}else{\r\n\t\t\t\tthis._quickNormalizeRowHeight(this.vDomTopNewRows);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t_removeTopRow(topDiff){\r\n\t\tvar table = this.tableElement,\r\n\t\ttopRow = this.getDisplayRows()[this.vDomTop],\r\n\t\ttopRowHeight = topRow.getHeight() || this.vDomRowHeight;\r\n\r\n\t\tif(topDiff >= topRowHeight){\r\n\r\n\t\t\tvar rowEl = topRow.getElement();\r\n\t\t\trowEl.parentNode.removeChild(rowEl);\r\n\r\n\t\t\tthis.vDomTopPad += topRowHeight;\r\n\t\t\ttable.style.paddingTop = this.vDomTopPad + \"px\";\r\n\t\t\tthis.vDomScrollPosTop += this.vDomTop ? topRowHeight : topRowHeight + this.vDomWindowBuffer;\r\n\t\t\tthis.vDomTop++;\r\n\r\n\t\t\ttopDiff = this.scrollTop - this.vDomScrollPosTop;\r\n\r\n\t\t\tthis._removeTopRow(topDiff);\r\n\t\t}\r\n\t}\r\n\r\n\t_addBottomRow(bottomDiff, i=0){\r\n\t\tvar table = this.tableElement,\r\n\t\trows = this.getDisplayRows();\r\n\r\n\t\tif(this.vDomBottom < this.displayRowsCount -1){\r\n\t\t\tlet index = this.vDomBottom + 1,\r\n\t\t\tbottomRow = rows[index],\r\n\t\t\tbottomRowHeight = bottomRow.getHeight() || this.vDomRowHeight;\r\n\r\n\t\t\t//hide bottom row if needed\r\n\t\t\tif(bottomDiff >= bottomRowHeight){\r\n\t\t\t\tthis.styleRow(bottomRow, index);\r\n\t\t\t\ttable.appendChild(bottomRow.getElement());\r\n\r\n\t\t\t\tif(!bottomRow.initialized || !bottomRow.heightInitialized){\r\n\t\t\t\t\tthis.vDomBottomNewRows.push(bottomRow);\r\n\r\n\t\t\t\t\tif(!bottomRow.heightInitialized){\r\n\t\t\t\t\t\tbottomRow.clearCellHeight();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbottomRow.initialize();\r\n\r\n\t\t\t\tthis.vDomBottomPad -= bottomRowHeight;\r\n\r\n\t\t\t\tif(this.vDomBottomPad < 0 || index == this.displayRowsCount -1){\r\n\t\t\t\t\tthis.vDomBottomPad = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttable.style.paddingBottom = this.vDomBottomPad + \"px\";\r\n\t\t\t\tthis.vDomScrollPosBottom += bottomRowHeight;\r\n\t\t\t\tthis.vDomBottom++;\r\n\t\t\t}\r\n\r\n\t\t\tbottomDiff = this.scrollTop - this.vDomScrollPosBottom;\r\n\r\n\t\t\tif(bottomRow.getHeight() > this.vDomWindowBuffer){\r\n\t\t\t\tthis.vDomWindowBuffer = bottomRow.getHeight() * 2;\r\n\t\t\t}\r\n\r\n\t\t\tif(i < this.vDomMaxRenderChain && this.vDomBottom < this.displayRowsCount -1 && bottomDiff >= (rows[this.vDomBottom + 1].getHeight() || this.vDomRowHeight)){\r\n\t\t\t\tthis._addBottomRow(bottomDiff, i+1);\r\n\t\t\t}else{\r\n\t\t\t\tthis._quickNormalizeRowHeight(this.vDomBottomNewRows);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t_removeBottomRow(bottomDiff){\r\n\t\tvar table = this.tableElement,\r\n\t\tbottomRow = this.getDisplayRows()[this.vDomBottom],\r\n\t\tbottomRowHeight = bottomRow.getHeight() || this.vDomRowHeight;\r\n\r\n\t\tif(bottomDiff >= bottomRowHeight){\r\n\r\n\t\t\tvar rowEl = bottomRow.getElement();\r\n\r\n\t\t\tif(rowEl.parentNode){\r\n\t\t\t\trowEl.parentNode.removeChild(rowEl);\r\n\t\t\t}\r\n\r\n\t\t\tthis.vDomBottomPad += bottomRowHeight;\r\n\r\n\t\t\tif(this.vDomBottomPad < 0){\r\n\t\t\t\tthis.vDomBottomPad = 0;\r\n\t\t\t}\r\n\r\n\t\t\ttable.style.paddingBottom = this.vDomBottomPad + \"px\";\r\n\t\t\tthis.vDomScrollPosBottom -= bottomRowHeight;\r\n\t\t\tthis.vDomBottom--;\r\n\r\n\t\t\tbottomDiff = -(this.scrollTop - this.vDomScrollPosBottom);\r\n\r\n\t\t\tthis._removeBottomRow(bottomDiff);\r\n\t\t}\r\n\t}\r\n\r\n\t_quickNormalizeRowHeight(rows){\r\n\t\trows.forEach(function(row){\r\n\t\t\trow.calcHeight();\r\n\t\t});\r\n\r\n\t\trows.forEach(function(row){\r\n\t\t\trow.setCellHeight();\r\n\t\t});\r\n\r\n\t\trows.length = 0;\r\n\t}\r\n\r\n\t//normalize height of active rows\r\n\tnormalizeHeight(){\r\n\t\tthis.activeRows.forEach(function(row){\r\n\t\t\trow.normalizeHeight();\r\n\t\t});\r\n\t}\r\n\r\n\t//adjust the height of the table holder to fit in the Tabulator element\r\n\tadjustTableSize(){\r\n\t\tvar initialHeight = this.element.clientHeight,\r\n\t\tmodExists;\r\n\r\n\t\tif(this.renderMode === \"virtual\"){\r\n\r\n\t\t\tlet otherHeight =  Math.floor(this.columnManager.getElement().getBoundingClientRect().height + (this.table.footerManager && this.table.footerManager.active && !this.table.footerManager.external ? this.table.footerManager.getElement().getBoundingClientRect().height : 0));\r\n\r\n\t\t\tif(this.fixedHeight){\r\n\t\t\t\tthis.element.style.minHeight = \"calc(100% - \" + otherHeight + \"px)\";\r\n\t\t\t\tthis.element.style.height = \"calc(100% - \" + otherHeight + \"px)\";\r\n\t\t\t\tthis.element.style.maxHeight = \"calc(100% - \" + otherHeight + \"px)\";\r\n\t\t\t}else{\r\n\t\t\t\tthis.element.style.height = \"\";\r\n\t\t\t\tthis.element.style.height = (this.table.element.clientHeight - otherHeight) + \"px\";\r\n\t\t\t\tthis.element.scrollTop = this.scrollTop;\r\n\t\t\t}\r\n\r\n\t\t\tthis.height = this.element.clientHeight;\r\n\t\t\tthis.vDomWindowBuffer = this.table.options.virtualDomBuffer || this.height;\r\n\r\n\t\t\t//check if the table has changed size when dealing with variable height tables\r\n\t\t\tif(!this.fixedHeight && initialHeight != this.element.clientHeight){\r\n\t\t\t\tmodExists = this.table.modExists(\"resizeTable\");\r\n\r\n\t\t\t\tif((modExists && !this.table.modules.resizeTable.autoResize) || !modExists){\r\n\t\t\t\t\tthis.redraw();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\r\n\t//renitialize all rows\r\n\treinitialize(){\r\n\t\tthis.rows.forEach(function(row){\r\n\t\t\trow.reinitialize(true);\r\n\t\t});\r\n\t}\r\n\r\n\t//prevent table from being redrawn\r\n\tblockRedraw (){\r\n\t\tthis.redrawBlock = true;\r\n\t\tthis.redrawBlockRestoreConfig = false;\r\n\t}\r\n\r\n\t//restore table redrawing\r\n\trestoreRedraw (){\r\n\t\tthis.redrawBlock = false;\r\n\r\n\t\tif(this.redrawBlockRestoreConfig){\r\n\t\t\tthis.refreshActiveData(this.redrawBlockRestoreConfig.stage, this.redrawBlockRestoreConfig.skipStage, this.redrawBlockRestoreConfig.renderInPosition)\r\n\r\n\t\t\tthis.redrawBlockRestoreConfig = false;\r\n\t\t}else{\r\n\t\t\tif(this.redrawBlockRederInPosition){\r\n\t\t\t\tthis.reRenderInPosition();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.redrawBlockRederInPosition = false;\r\n\t}\r\n\r\n\t//redraw table\r\n\tredraw (force){\r\n\t\tvar pos = 0,\r\n\t\tleft = this.scrollLeft;\r\n\r\n\t\tthis.adjustTableSize();\r\n\r\n\t\tthis.table.tableWidth = this.table.element.clientWidth;\r\n\r\n\t\tif(!force){\r\n\t\t\tif(this.renderMode == \"classic\"){\r\n\r\n\t\t\t\tif(this.table.options.groupBy){\r\n\t\t\t\t\tthis.refreshActiveData(\"group\", false, false);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis._simpleRender();\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tthis.reRenderInPosition();\r\n\t\t\t\tthis.scrollHorizontal(left);\r\n\t\t\t}\r\n\r\n\t\t\tif(!this.displayRowsCount){\r\n\t\t\t\tif(this.table.options.placeholder){\r\n\t\t\t\t\tthis.getElement().appendChild(this.table.options.placeholder);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\tthis.renderTable();\r\n\t\t}\r\n\t}\r\n\r\n\tresetScroll(){\r\n\t\tthis.element.scrollLeft = 0;\r\n\t\tthis.element.scrollTop = 0;\r\n\r\n\t\tif(this.table.browser === \"ie\"){\r\n\t\t\tvar event = document.createEvent(\"Event\");\r\n\t\t\tevent.initEvent(\"scroll\", false, true);\r\n\t\t\tthis.element.dispatchEvent(event);\r\n\t\t}else{\r\n\t\t\tthis.element.dispatchEvent(new Event('scroll'));\r\n\t\t}\r\n\t}\r\n}","export default class FooterManager {\r\n\r\n\tconstructor(table){\r\n\t\tthis.table = table;\r\n\t\tthis.active = false;\r\n\t\tthis.element = this.createElement(); //containing element\r\n\t\tthis.external = false;\r\n\t\tthis.links = [];\r\n\r\n\t\tthis._initialize();\r\n\t}\r\n\r\n\tcreateElement (){\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tel.classList.add(\"tabulator-footer\");\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\t_initialize(element){\r\n\t\tif(this.table.options.footerElement){\r\n\r\n\t\t\tswitch(typeof this.table.options.footerElement){\r\n\t\t\t\tcase \"string\":\r\n\t\t\t\tif(this.table.options.footerElement[0] === \"<\"){\r\n\t\t\t\t\tthis.element.innerHTML = this.table.options.footerElement;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.external = true;\r\n\t\t\t\t\tthis.element = document.querySelector(this.table.options.footerElement);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\tthis.element = this.table.options.footerElement;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetElement(){\r\n\t\treturn this.element;\r\n\t}\r\n\r\n\tappend(element, parent){\r\n\t\tthis.activate(parent);\r\n\r\n\t\tthis.element.appendChild(element);\r\n\t\tthis.table.rowManager.adjustTableSize();\r\n\t}\r\n\r\n\tprepend(element, parent){\r\n\t\tthis.activate(parent);\r\n\r\n\t\tthis.element.insertBefore(element, this.element.firstChild);\r\n\t\tthis.table.rowManager.adjustTableSize();\r\n\t}\r\n\r\n\tremove(element){\r\n\t\telement.parentNode.removeChild(element);\r\n\t\tthis.deactivate();\r\n\t}\r\n\r\n\tdeactivate(force){\r\n\t\tif(!this.element.firstChild || force){\r\n\t\t\tif(!this.external){\r\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\r\n\t\t\t}\r\n\t\t\tthis.active = false;\r\n\t\t}\r\n\t}\r\n\r\n\tactivate(parent){\r\n\t\tif(!this.active){\r\n\t\t\tthis.active = true;\r\n\t\t\tif(!this.external){\r\n\t\t\t\tthis.table.element.appendChild(this.getElement());\r\n\t\t\t\tthis.table.element.style.display = '';\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(parent){\r\n\t\t\tthis.links.push(parent);\r\n\t\t}\r\n\t}\r\n\r\n\tredraw(){\r\n\t\tthis.links.forEach(function(link){\r\n\t\t\tlink.footerRedraw();\r\n\t\t});\r\n\t}\r\n}","import Tabulator from './Tabulator.js';\r\n\r\nclass TableRegistry {\r\n\r\n\tstatic register(table){\r\n\t\tTableRegistry.tables.push(table);\r\n\t}\r\n\r\n\tstatic deregister(table){\r\n\t\tvar index = TableRegistry.tables.indexOf(table);\r\n\r\n\t\tif(index > -1){\r\n\t\t\tTableRegistry.tables.splice(index, 1);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic lookupTable(query, silent){\r\n\t\tvar results = [],\r\n\t\tmatches, match;\r\n\r\n\t\tif(typeof query === \"string\"){\r\n\t\t\tmatches = document.querySelectorAll(query);\r\n\r\n\t\t\tif(matches.length){\r\n\t\t\t\tfor(var i = 0; i < matches.length; i++){\r\n\t\t\t\t\tmatch = TableRegistry.matchElement(matches[i]);\r\n\r\n\t\t\t\t\tif(match){\r\n\t\t\t\t\t\tresults.push(match);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}else if((typeof HTMLElement !== \"undefined\" && query instanceof HTMLElement) || query instanceof Tabulator){\r\n\t\t\tmatch = TableRegistry.matchElement(query);\r\n\r\n\t\t\tif(match){\r\n\t\t\t\tresults.push(match);\r\n\t\t\t}\r\n\t\t}else if(Array.isArray(query)){\r\n\t\t\tquery.forEach(function(item){\r\n\t\t\t\tresults = results.concat(TableRegistry.lookupTable(item));\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tif(!silent){\r\n\t\t\t\tconsole.warn(\"Table Connection Error - Invalid Selector\", query);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn results;\r\n\t}\r\n\r\n\tstatic matchElement(element){\r\n\t\treturn TableRegistry.tables.find(function(table){\r\n\t\t\treturn element instanceof Tabulator ? table === element : table.element === element;\r\n\t\t});\r\n\t}\r\n}\r\n\r\nTableRegistry.tables = [];\r\n\r\nexport default TableRegistry;","class Module{\r\n\r\n\tconstructor(table, name){\r\n\t\tthis.table = table;\r\n\t}\r\n\r\n\tregister(){\r\n\t}\r\n}\r\n\r\nexport default Module;","//resize columns to fit data they contain\r\nexport default function(columns){\r\n\tif(this.table.options.virtualDomHoz){\r\n\t\tthis.table.vdomHoz.fitDataLayoutOverride();\r\n\t}else{\r\n\t\tcolumns.forEach(function(column){\r\n\t\t\tcolumn.reinitializeWidth();\r\n\t\t});\r\n\t}\r\n\r\n\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\r\n\t\tthis.table.modules.responsiveLayout.update();\r\n\t}\r\n};","//resize columns to fit data they contain and stretch row to fill table, also used for fitDataTable\r\nexport default function(columns){\r\n\tcolumns.forEach(function(column){\r\n\t\tcolumn.reinitializeWidth();\r\n\t});\r\n\r\n\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\r\n\t\tthis.table.modules.responsiveLayout.update();\r\n\t}\r\n};","//resize columns to fit data the contain and stretch last column to fill table\r\nexport default function(columns){\r\n\tvar colsWidth = 0,\r\n\ttableWidth = this.table.rowManager.element.clientWidth,\r\n\tgap = 0,\r\n\tlastCol = false;\r\n\r\n\tcolumns.forEach((column, i) => {\r\n\t\tif(!column.widthFixed){\r\n\t\t\tcolumn.reinitializeWidth();\r\n\t\t}\r\n\r\n\t\tif(this.table.options.responsiveLayout ? column.modules.responsive.visible : column.visible){\r\n\t\t\tlastCol = column;\r\n\t\t}\r\n\r\n\t\tif(column.visible){\r\n\t\t\tcolsWidth += column.getWidth();\r\n\t\t}\r\n\t});\r\n\r\n\tif(lastCol){\r\n\t\tgap = tableWidth - colsWidth + lastCol.getWidth();\r\n\r\n\t\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\r\n\t\t\tlastCol.setWidth(0);\r\n\t\t\tthis.table.modules.responsiveLayout.update();\r\n\t\t}\r\n\r\n\t\tif(gap > 0){\r\n\t\t\tlastCol.setWidth(gap);\r\n\t\t}else{\r\n\t\t\tlastCol.reinitializeWidth();\r\n\t\t}\r\n\t}else{\r\n\t\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\r\n\t\t\tthis.table.modules.responsiveLayout.update();\r\n\t\t}\r\n\t}\r\n};","//resize columns to fit\r\nexport default function(columns){\r\n\tvar totalWidth = this.table.element.clientWidth; //table element width\r\n\tvar fixedWidth = 0; //total width of columns with a defined width\r\n\tvar flexWidth = 0; //total width available to flexible columns\r\n\tvar flexGrowUnits = 0; //total number of widthGrow blocks accross all columns\r\n\tvar flexColWidth = 0; //desired width of flexible columns\r\n\tvar flexColumns = []; //array of flexible width columns\r\n\tvar fixedShrinkColumns = []; //array of fixed width columns that can shrink\r\n\tvar flexShrinkUnits = 0; //total number of widthShrink blocks accross all columns\r\n\tvar overflowWidth = 0; //horizontal overflow width\r\n\tvar gapFill=0; //number of pixels to be added to final column to close and half pixel gaps\r\n\r\n\tfunction calcWidth(width){\r\n\t\tvar colWidth;\r\n\r\n\t\tif(typeof(width) == \"string\"){\r\n\t\t\tif(width.indexOf(\"%\") > -1){\r\n\t\t\t\tcolWidth = (totalWidth / 100) * parseInt(width);\r\n\t\t\t}else{\r\n\t\t\t\tcolWidth = parseInt(width);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tcolWidth = width;\r\n\t\t}\r\n\r\n\t\treturn colWidth;\r\n\t}\r\n\r\n\t//ensure columns resize to take up the correct amount of space\r\n\tfunction scaleColumns(columns, freeSpace, colWidth, shrinkCols){\r\n\r\n\t\tvar oversizeCols = [],\r\n\t\toversizeSpace = 0,\r\n\t\tremainingSpace = 0,\r\n\t\tnextColWidth = 0,\r\n\t\tremainingFlexGrowUnits = flexGrowUnits,\r\n\t\tgap = 0,\r\n\t\tchangeUnits = 0,\r\n\t\tundersizeCols = [];\r\n\r\n\t\tfunction calcGrow(col){\r\n\t\t\treturn (colWidth * (col.column.definition.widthGrow || 1));\r\n\t\t}\r\n\r\n\t\tfunction calcShrink(col){\r\n\t\t\treturn  (calcWidth(col.width) - (colWidth * (col.column.definition.widthShrink || 0)))\r\n\t\t}\r\n\r\n\t\tcolumns.forEach(function(col, i){\r\n\t\t\tvar width = shrinkCols ? calcShrink(col) : calcGrow(col);\r\n\t\t\tif(col.column.minWidth >= width){\r\n\t\t\t\toversizeCols.push(col);\r\n\t\t\t}else{\r\n\t\t\t\tif(col.column.maxWidth && col.column.maxWidth < width){\r\n\t\t\t\t\tcol.width = col.column.maxWidth;\r\n\t\t\t\t\tfreeSpace -= col.column.maxWidth;\r\n\r\n\t\t\t\t\tremainingFlexGrowUnits -= shrinkCols ? (col.column.definition.widthShrink || 1) : (col.column.definition.widthGrow || 1);\r\n\r\n\t\t\t\t\tif(remainingFlexGrowUnits){\r\n\t\t\t\t\t\tcolWidth = Math.floor(freeSpace/remainingFlexGrowUnits);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tundersizeCols.push(col);\r\n\t\t\t\t\tchangeUnits += shrinkCols ? (col.column.definition.widthShrink || 1) : (col.column.definition.widthGrow || 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(oversizeCols.length){\r\n\t\t\toversizeCols.forEach(function(col){\r\n\t\t\t\toversizeSpace += shrinkCols ?  col.width - col.column.minWidth : col.column.minWidth;\r\n\t\t\t\tcol.width = col.column.minWidth;\r\n\t\t\t});\r\n\r\n\t\t\tremainingSpace = freeSpace - oversizeSpace;\r\n\r\n\t\t\tnextColWidth = changeUnits ? Math.floor(remainingSpace/changeUnits) : remainingSpace;\r\n\r\n\t\t\tgap = remainingSpace - (nextColWidth * changeUnits);\r\n\r\n\t\t\tgap += scaleColumns(undersizeCols, remainingSpace, nextColWidth, shrinkCols);\r\n\t\t}else{\r\n\t\t\tgap = changeUnits ? freeSpace - (Math.floor(freeSpace/changeUnits) * changeUnits) : freeSpace;\r\n\r\n\t\t\tundersizeCols.forEach(function(column){\r\n\t\t\t\tcolumn.width = shrinkCols ? calcShrink(column) : calcGrow(column);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn gap;\r\n\t}\r\n\r\n\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\r\n\t\tthis.table.modules.responsiveLayout.update();\r\n\t}\r\n\r\n\t//adjust for vertical scrollbar if present\r\n\tif(this.table.rowManager.element.scrollHeight > this.table.rowManager.element.clientHeight){\r\n\t\ttotalWidth -= this.table.rowManager.element.offsetWidth - this.table.rowManager.element.clientWidth;\r\n\t}\r\n\r\n\tcolumns.forEach(function(column){\r\n\t\tvar width, minWidth, colWidth;\r\n\r\n\t\tif(column.visible){\r\n\r\n\t\t\twidth = column.definition.width;\r\n\t\t\tminWidth =  parseInt(column.minWidth);\r\n\r\n\t\t\tif(width){\r\n\r\n\t\t\t\tcolWidth = calcWidth(width);\r\n\r\n\t\t\t\tfixedWidth += colWidth > minWidth ? colWidth : minWidth;\r\n\r\n\t\t\t\tif(column.definition.widthShrink){\r\n\t\t\t\t\tfixedShrinkColumns.push({\r\n\t\t\t\t\t\tcolumn:column,\r\n\t\t\t\t\t\twidth:colWidth > minWidth ? colWidth : minWidth\r\n\t\t\t\t\t});\r\n\t\t\t\t\tflexShrinkUnits += column.definition.widthShrink;\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tflexColumns.push({\r\n\t\t\t\t\tcolumn:column,\r\n\t\t\t\t\twidth:0,\r\n\t\t\t\t});\r\n\t\t\t\tflexGrowUnits += column.definition.widthGrow || 1;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t//calculate available space\r\n\tflexWidth = totalWidth - fixedWidth;\r\n\r\n\t//calculate correct column size\r\n\tflexColWidth = Math.floor(flexWidth / flexGrowUnits)\r\n\r\n\t//generate column widths\r\n\tvar gapFill = scaleColumns(flexColumns, flexWidth, flexColWidth, false);\r\n\r\n\t//increase width of last column to account for rounding errors\r\n\tif(flexColumns.length && gapFill > 0){\r\n\t\tflexColumns[flexColumns.length-1].width += + gapFill;\r\n\t}\r\n\r\n\t//caculate space for columns to be shrunk into\r\n\tflexColumns.forEach(function(col){\r\n\t\tflexWidth -= col.width;\r\n\t});\r\n\r\n\toverflowWidth = Math.abs(gapFill) + flexWidth;\r\n\r\n\t//shrink oversize columns if there is no available space\r\n\tif(overflowWidth > 0 && flexShrinkUnits){\r\n\t\tgapFill = scaleColumns(fixedShrinkColumns, overflowWidth, Math.floor(overflowWidth / flexShrinkUnits), true);\r\n\t}\r\n\r\n\t//decrease width of last column to account for rounding errors\r\n\tif(fixedShrinkColumns.length){\r\n\t\tfixedShrinkColumns[fixedShrinkColumns.length-1].width -= gapFill;\r\n\t}\r\n\r\n\tflexColumns.forEach(function(col){\r\n\t\tcol.column.setWidth(col.width);\r\n\t});\r\n\r\n\tfixedShrinkColumns.forEach(function(col){\r\n\t\tcol.column.setWidth(col.width);\r\n\t});\r\n};","import fitData from './modes/fitData.js';\r\nimport fitDataGeneral from './modes/fitDataGeneral.js';\r\nimport fitDataStretch from './modes/fitDataStretch.js';\r\nimport fitColumns from './modes/fitColumns.js';\r\n\r\nexport default {\r\n\tfitData:fitData,\r\n\tfitDataFill:fitDataGeneral,\r\n\tfitDataTable:fitDataGeneral,\r\n\tfitDataStretch:fitDataStretch,\r\n\tfitColumns:fitColumns ,\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport defaultModes from './defaults/modes.js';\r\n\r\nclass Layout extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table, \"layout\");\r\n\r\n\t\tthis.mode = null;\r\n\t}\r\n\r\n\t//initialize layout system\r\n\tinitialize(layout){\r\n\t\tif(Layout.modes[layout]){\r\n\t\t\tthis.mode = layout;\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Layout Error - invalid mode set, defaulting to 'fitData' : \" + layout);\r\n\t\t\tthis.mode = 'fitData';\r\n\t\t}\r\n\r\n\t\tthis.table.element.setAttribute(\"tabulator-layout\", this.mode);\r\n\t}\r\n\r\n\tgetMode(){\r\n\t\treturn this.mode;\r\n\t}\r\n\r\n\t//trigger table layout\r\n\tlayout(){\r\n\t\tLayout.modes[this.mode].call(this, this.table.columnManager.columnsByIndex);\r\n\r\n\t\tif(this.mode.indexOf(\"fitData\") === 0 && this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.columns){\r\n\t\t\tthis.table.modules.persistence.save(\"columns\");\r\n\t\t}\r\n\t}\r\n}\r\n\r\nLayout.moduleName = \"layout\";\r\n\r\n//load defaults\r\nLayout.modes = defaultModes;\r\n\r\nexport default Layout;","export default {\r\n\t\"default\":{ //hold default locale text\r\n\t\t\"groups\":{\r\n\t\t\t\"item\":\"item\",\r\n\t\t\t\"items\":\"items\",\r\n\t\t},\r\n\t\t\"columns\":{\r\n\t\t},\r\n\t\t\"ajax\":{\r\n\t\t\t\"loading\":\"Loading\",\r\n\t\t\t\"error\":\"Error\",\r\n\t\t},\r\n\t\t\"pagination\":{\r\n\t\t\t\"page_size\":\"Page Size\",\r\n\t\t\t\"page_title\":\"Show Page\",\r\n\t\t\t\"first\":\"First\",\r\n\t\t\t\"first_title\":\"First Page\",\r\n\t\t\t\"last\":\"Last\",\r\n\t\t\t\"last_title\":\"Last Page\",\r\n\t\t\t\"prev\":\"Prev\",\r\n\t\t\t\"prev_title\":\"Prev Page\",\r\n\t\t\t\"next\":\"Next\",\r\n\t\t\t\"next_title\":\"Next Page\",\r\n\t\t\t\"all\":\"All\",\r\n\t\t},\r\n\t\t\"headerFilters\":{\r\n\t\t\t\"default\":\"filter column...\",\r\n\t\t\t\"columns\":{}\r\n\t\t}\r\n\t},\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport Helpers from '../../core/Helpers.js';\r\n\r\nimport defaultLangs from './defaults/langs.js';\r\n\r\nclass Localize extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.locale = \"default\"; //current locale\r\n\t\tthis.lang = false; //current language\r\n\t\tthis.bindings = {}; //update events to call when locale is changed\r\n\t\tthis.langList = {};\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.langList = Helpers.deepClone(Localize.langs);\r\n\t}\r\n\r\n\t//set header placehoder\r\n\tsetHeaderFilterPlaceholder(placeholder){\r\n\t\tthis.langList.default.headerFilters.default = placeholder;\r\n\t}\r\n\r\n\t//set header filter placeholder by column\r\n\tsetHeaderFilterColumnPlaceholder(column, placeholder){\r\n\t\tthis.langList.default.headerFilters.columns[column] = placeholder;\r\n\r\n\t\tif(this.lang && !this.lang.headerFilters.columns[column]){\r\n\t\t\tthis.lang.headerFilters.columns[column] = placeholder;\r\n\t\t}\r\n\t}\r\n\r\n\t//setup a lang description object\r\n\tinstallLang(locale, lang){\r\n\t\tif(this.langList[locale]){\r\n\t\t\tthis._setLangProp(this.langList[locale], lang);\r\n\t\t}else{\r\n\t\t\tthis.langList[locale] = lang;\r\n\t\t}\r\n\t}\r\n\r\n\t_setLangProp(lang, values){\r\n\t\tfor(let key in values){\r\n\t\t\tif(lang[key] && typeof lang[key] == \"object\"){\r\n\t\t\t\tthis._setLangProp(lang[key], values[key])\r\n\t\t\t}else{\r\n\t\t\t\tlang[key] = values[key];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//set current locale\r\n\tsetLocale(desiredLocale){\r\n\t\tdesiredLocale = desiredLocale || \"default\";\r\n\r\n\t\t//fill in any matching languge values\r\n\t\tfunction traverseLang(trans, path){\r\n\t\t\tfor(var prop in trans){\r\n\t\t\t\tif(typeof trans[prop] == \"object\"){\r\n\t\t\t\t\tif(!path[prop]){\r\n\t\t\t\t\t\tpath[prop] = {};\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttraverseLang(trans[prop], path[prop]);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tpath[prop] = trans[prop];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//determing correct locale to load\r\n\t\tif(desiredLocale === true && navigator.language){\r\n\t\t\t//get local from system\r\n\t\t\tdesiredLocale = navigator.language.toLowerCase();\r\n\t\t}\r\n\r\n\t\tif(desiredLocale){\r\n\t\t\t//if locale is not set, check for matching top level locale else use default\r\n\t\t\tif(!this.langList[desiredLocale]){\r\n\t\t\t\tlet prefix = desiredLocale.split(\"-\")[0];\r\n\r\n\t\t\t\tif(this.langList[prefix]){\r\n\t\t\t\t\tconsole.warn(\"Localization Error - Exact matching locale not found, using closest match: \", desiredLocale, prefix);\r\n\t\t\t\t\tdesiredLocale = prefix;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Localization Error - Matching locale not found, using default: \", desiredLocale);\r\n\t\t\t\t\tdesiredLocale = \"default\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.locale = desiredLocale;\r\n\r\n\t\t//load default lang template\r\n\t\tthis.lang = Helpers.deepClone(this.langList.default || {});\r\n\r\n\t\tif(desiredLocale != \"default\"){\r\n\t\t\ttraverseLang(this.langList[desiredLocale], this.lang);\r\n\t\t}\r\n\r\n\t\tthis.table.options.localized.call(this.table, this.locale, this.lang);\r\n\r\n\t\tthis._executeBindings();\r\n\t}\r\n\r\n\t//get current locale\r\n\tgetLocale(locale){\r\n\t\treturn this.locale;\r\n\t}\r\n\r\n\t//get lang object for given local or current if none provided\r\n\tgetLang(locale){\r\n\t\treturn locale ? this.langList[locale] : this.lang;\r\n\t}\r\n\r\n\t//get text for current locale\r\n\tgetText(path, value){\r\n\t\tvar path = value ? path + \"|\" + value : path,\r\n\t\tpathArray = path.split(\"|\"),\r\n\t\ttext = this._getLangElement(pathArray, this.locale);\r\n\r\n\t\t// if(text === false){\r\n\t\t// \tconsole.warn(\"Localization Error - Matching localized text not found for given path: \", path);\r\n\t\t// }\r\n\r\n\t\treturn text || \"\";\r\n\t}\r\n\r\n\t//traverse langs object and find localized copy\r\n\t_getLangElement(path, locale){\r\n\t\tvar root = this.lang;\r\n\r\n\t\tpath.forEach(function(level){\r\n\t\t\tvar rootPath;\r\n\r\n\t\t\tif(root){\r\n\t\t\t\trootPath = root[level];\r\n\r\n\t\t\t\tif(typeof rootPath != \"undefined\"){\r\n\t\t\t\t\troot = rootPath;\r\n\t\t\t\t}else{\r\n\t\t\t\t\troot = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn root;\r\n\t}\r\n\r\n\t//set update binding\r\n\tbind(path, callback){\r\n\t\tif(!this.bindings[path]){\r\n\t\t\tthis.bindings[path] = [];\r\n\t\t}\r\n\r\n\t\tthis.bindings[path].push(callback);\r\n\r\n\t\tcallback(this.getText(path), this.lang);\r\n\t}\r\n\r\n\t//itterate through bindings and trigger updates\r\n\t_executeBindings(){\r\n\t\tfor(let path in this.bindings){\r\n\t\t\tthis.bindings[path].forEach((binding) => {\r\n\t\t\t\tbinding(this.getText(path), this.lang);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\nLocalize.moduleName = \"localize\";\r\n\r\n//load defaults\r\nLocalize.langs = defaultLangs;\r\n\r\nexport default Localize;","import Module from '../../core/Module.js';\r\nimport TableRegistry from '../../core/TableRegistry.js';\r\n\r\nclass Comms extends Module{\r\n\r\n\tgetConnections(selectors){\r\n\t\tvar connections = [],\r\n\t\tconnection;\r\n\r\n\t\tconnection = Tabulator.comms.lookupTable(selectors);\r\n\r\n\t\tconnection.forEach((con) =>{\r\n\t\t\tif(this.table !== con){\r\n\t\t\t\tconnections.push(con);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn connections;\r\n\t}\r\n\r\n\tsend(selectors, module, action, data){\r\n\t\tvar connections = this.getConnections(selectors);\r\n\r\n\t\tconnections.forEach((connection) => {\r\n\t\t\tconnection.tableComms(this.table.element, module, action, data);\r\n\t\t});\r\n\r\n\t\tif(!connections.length && selectors){\r\n\t\t\tconsole.warn(\"Table Connection Error - No tables matching selector found\", selectors);\r\n\t\t}\r\n\t}\r\n\r\n\treceive(table, module, action, data){\r\n\t\tif(this.table.modExists(module)){\r\n\t\t\treturn this.table.modules[module].commsReceived(table, action, data);\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Inter-table Comms Error - no such module:\", module);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nComms.moduleName = \"comms\";\r\n\r\nexport default Comms;","import * as coreModules from './modules/core.js';\r\nimport TableRegistry from './TableRegistry.js';\r\n\r\nexport default class ModuleBinder {\r\n\r\n\tconstructor(tabulator, modules){\r\n\t\tthis.bindStaticFuctionality(tabulator);\r\n\t\tthis.bindModules(tabulator, coreModules);\r\n\r\n\t\tif(modules){\r\n\t\t\tthis.bindModules(tabulator, modules);\r\n\t\t}\r\n\t}\r\n\r\n\tbindStaticFuctionality(tabulator){\r\n\r\n\t\ttabulator.moduleBindings = {};\r\n\r\n\t\ttabulator.extendModule = function(name, property, values){\r\n\t\t\tif(tabulator.moduleBindings[name]){\r\n\t\t\t\tvar source = tabulator.moduleBindings[name].prototype[property];\r\n\r\n\t\t\t\tif(source){\r\n\t\t\t\t\tif(typeof values == \"object\"){\r\n\t\t\t\t\t\tfor(let key in values){\r\n\t\t\t\t\t\t\tsource[key] = values[key];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tconsole.warn(\"Module Error - Invalid value type, it must be an object\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Module Error - property does not exist:\", property);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Module Error - module does not exist:\", name);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\ttabulator.registerModule = function(modules){\r\n\t\t\tif(!Array.isArray(modules)){\r\n\t\t\t\tmodules = [modules];\r\n\t\t\t}\r\n\r\n\t\t\tmodules.forEach((mod) => {\r\n\t\t\t\ttabulator.registerModuleBinding(mod)\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\ttabulator.registerModuleBinding = function(mod){\r\n\t\t\ttabulator.moduleBindings[mod.moduleName] = mod;\r\n\t\t};\r\n\r\n\t\ttabulator.findTable = function(query){\r\n\t\t\tvar results = TableRegistry.lookupTable(query, true);\r\n\t\t\treturn Array.isArray(results) && !results.length ? false : results;\r\n\t\t}\r\n\r\n\t\t//ensure that module are bound to instantiated function\r\n\t\ttabulator.prototype.bindModules = function(){\r\n\t\t\tthis.modules = {};\r\n\r\n\t\t\tfor(var name in tabulator.moduleBindings){\r\n\t\t\t\tthis.modules[name] = new tabulator.moduleBindings[name](this);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tbindModules(tabulator, modules){\r\n\t\tvar mods = Object.values(modules);\r\n\r\n\t\ttabulator.registerModule(mods);\r\n\t}\r\n}","export default class VirtualDomHorizontal {\r\n\tconstructor(table){\r\n\t\tthis.table = table;\r\n\r\n\t\tthis.element = this.table.rowManager.tableElement;\r\n\t\tthis.holderEl = this.table.rowManager.element;\r\n\r\n\t\tthis.leftCol = 0;\r\n\t\tthis.rightCol = 0;\r\n\t\tthis.scrollLeft = 0;\r\n\r\n\t\tthis.vDomScrollPosLeft = 0;\r\n\t\tthis.vDomScrollPosRight = 0;\r\n\r\n\t\tthis.vDomPadLeft = 0;\r\n\t\tthis.vDomPadRight = 0;\r\n\r\n\t\tthis.fitDataColAvg = 0;\r\n\r\n\t\tthis.window = 200; //pixel margin to make column visible before it is shown on screen\r\n\r\n\t\tthis.initialized = false;\r\n\r\n\t\tthis.columns = [];\r\n\r\n\t\tif(this.compatabilityCheck()){\r\n\t\t\tthis.initialize();\r\n\t\t}\r\n\t}\r\n\r\n\tcompatabilityCheck(){\r\n\t\tvar options = this.table.options,\r\n\t\tfrozen = false,\r\n\t\tok = true;\r\n\r\n\t\tif(options.layout == \"fitDataTable\"){\r\n\t\t\tconsole.warn(\"Horizontal Vitrual DOM is not compatible with fitDataTable layout mode\");\r\n\t\t\tok = false;\r\n\t\t}\r\n\r\n\t\tif(options.responsiveLayout){\r\n\t\t\tconsole.warn(\"Horizontal Vitrual DOM is not compatible with responsive columns\");\r\n\t\t\tok = false;\r\n\t\t}\r\n\r\n\t\tif(this.table.rtl){\r\n\t\t\tconsole.warn(\"Horizontal Vitrual DOM is not currently compatible with RTL text direction\");\r\n\t\t\tok = false;\r\n\t\t}\r\n\r\n\t\tif(options.columns){\r\n\t\t\tfrozen = options.columns.find((col) => {\r\n\t\t\t\treturn col.frozen;\r\n\t\t\t});\r\n\r\n\t\t\tif(frozen){\r\n\t\t\t\tconsole.warn(\"Horizontal Vitrual DOM is not compatible with frozen columns\");\r\n\t\t\t\tok = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(!ok){\r\n\t\t\toptions.virtualDomHoz = false;\r\n\t\t}\r\n\r\n\t\treturn ok;\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.holderEl.addEventListener(\"scroll\", () => {\r\n\t\t\tvar left = this.holderEl.scrollLeft;\r\n\r\n\t\t\tif(this.scrollLeft != left){\r\n\t\t\t\tthis.scrollLeft = left;\r\n\t\t\t\tthis.scroll(left - (this.vDomScrollPosLeft + this.window));\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tdeinitialize(){\r\n\t\tthis.initialized = false;\r\n\t}\r\n\r\n\tclear(){\r\n\t\tthis.columns = [];\r\n\r\n\t\tthis.leftCol = -1;\r\n\t\tthis.rightCol = 0;\r\n\r\n\t\tthis.vDomScrollPosLeft = 0;\r\n\t\tthis.vDomScrollPosRight = 0;\r\n\t\tthis.vDomPadLeft = 0;\r\n\t\tthis.vDomPadRight = 0;\r\n\t}\r\n\r\n\tdataChange(){\r\n\t\tvar change = false,\r\n\t\tcollsWidth = 0,\r\n\t\tcolEnd = 0,\r\n\t\tgroup, row, rowEl;\r\n\r\n\t\tif(this.table.options.layout === \"fitData\"){\r\n\t\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\r\n\t\t\t\tif(!column.definition.width && column.visible){\r\n\t\t\t\t\tchange = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(change){\r\n\t\t\t\tif(change && this.table.rowManager.getDisplayRows().length){\r\n\r\n\t\t\t\t\tthis.vDomScrollPosRight = this.scrollLeft + this.holderEl.clientWidth + this.window;\r\n\r\n\t\t\t\t\tif(this.table.options.groupBy){\r\n\t\t\t\t\t\tgroup = this.table.modules.groupRows.getGroups(false)[0];\r\n\r\n\t\t\t\t\t\trow = group.getRows(false)[0];\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\trow = this.table.rowManager.getDisplayRows()[0];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(row){\r\n\r\n\t\t\t\t\t\trowEl = row.getElement();\r\n\r\n\t\t\t\t\t\trow.generateCells();\r\n\r\n\t\t\t\t\t\tthis.element.appendChild(rowEl);\r\n\r\n\t\t\t\t\t\tfor(var colEnd = 0; colEnd < row.cells.length; colEnd++){\r\n\t\t\t\t\t\t\tlet cell = row.cells[colEnd];\r\n\t\t\t\t\t\t\trowEl.appendChild(cell.getElement());\r\n\r\n\t\t\t\t\t\t\tcell.column.reinitializeWidth();\r\n\r\n\t\t\t\t\t\t\tcollsWidth += cell.column.getWidth();\r\n\r\n\t\t\t\t\t\t\tif(collsWidth > this.vDomScrollPosRight){\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\trowEl.parentNode.removeChild(rowEl);\r\n\r\n\t\t\t\t\t\tthis.fitDataColAvg = Math.floor(collsWidth / (colEnd + 1));\r\n\r\n\t\t\t\t\t\tfor(colEnd; colEnd < this.table.columnManager.columnsByIndex.length; colEnd++){\r\n\t\t\t\t\t\t\tthis.table.columnManager.columnsByIndex[colEnd].setWidth(this.fitDataColAvg);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis.reinitialize(false, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(this.table.options.layout === \"fitColumns\"){\r\n\t\t\t\tthis.table.modules.layout.layout();\r\n\t\t\t\tthis.table.vdomHoz.reinitialize(false, true);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfitDataLayoutOverride(){\r\n\t\tfor(let i = this.leftCol; i <= this.rightCol; i++){\r\n\t\t\tthis.columns[i].reinitializeWidth();\r\n\t\t}\r\n\t}\r\n\r\n\treinitialize(update, blockRedraw){\r\n\t\tvar old = {\r\n\t\t\tcols:this.columns,\r\n\t\t\tleftCol:this.leftCol,\r\n\t\t\trightCol:this.rightCol,\r\n\t\t};\r\n\r\n\t\tif(update && !this.initialized){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.clear();\r\n\r\n\t\tthis.scrollLeft = this.holderEl.scrollLeft;\r\n\r\n\t\tthis.vDomScrollPosLeft = this.scrollLeft - this.window;\r\n\t\tthis.vDomScrollPosRight = this.scrollLeft + this.holderEl.clientWidth + this.window;\r\n\r\n\t\tvar colPos = 0;\r\n\r\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\r\n\t\t\tvar config = {};\r\n\r\n\t\t\tif(column.visible){\r\n\t\t\t\tvar width = column.getWidth();\r\n\r\n\t\t\t\tconfig.leftPos = colPos;\r\n\t\t\t\tconfig.rightPos = colPos + width;\r\n\r\n\t\t\t\tif((colPos + width > this.vDomScrollPosLeft) && (colPos < this.vDomScrollPosRight)){\r\n\t        \t\t//column is visible\r\n\r\n\t        \t\tif(this.leftCol == -1){\r\n\t        \t\t\tthis.leftCol = this.columns.length;\r\n\t        \t\t\tthis.vDomPadLeft = colPos;\r\n\t        \t\t}\r\n\r\n\t        \t\tthis.rightCol = this.columns.length;\r\n\t        \t}else{\r\n\t        \t\t// column is hidden\r\n\t        \t\tif(this.leftCol !== -1){\r\n\t        \t\t\tthis.vDomPadRight += width;\r\n\t        \t\t}\r\n\t        \t}\r\n\r\n\t        \tthis.columns.push(column);\r\n\r\n\t        \tcolumn.modules.vdomHoz = config;\r\n\r\n\t        \tcolPos += width;\r\n\t        }\r\n\t    });\r\n\r\n\t\tthis.element.style.paddingLeft = this.vDomPadLeft + \"px\";\r\n\t\tthis.element.style.paddingRight = this.vDomPadRight + \"px\";\r\n\r\n\t\tthis.initialized = true;\r\n\r\n\t\tif(!blockRedraw){\r\n\t\t\tif(!update || this.reinitChanged(old)){\r\n\t\t\t\tthis.renitializeRows();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.holderEl.scrollLeft = this.scrollLeft;\r\n\t}\r\n\r\n\treinitChanged(old){\r\n\t\tvar match = true;\r\n\r\n\t\tif(old.cols.length !== this.columns.length || old.leftCol !== this.leftCol || old.rightCol !== this.rightCol){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\told.cols.forEach((col, i) => {\r\n\t\t\tif(col !== this.columns[i]){\r\n\t\t\t\tmatch = false;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn !match;\r\n\t}\r\n\r\n\trenitializeRows(){\r\n\t\tvar rows = this.table.rowManager.getVisibleRows();\r\n\t\trows.forEach((row) => {\r\n\t\t\tthis.reinitializeRow(row, true);\r\n\t\t});\r\n\t}\r\n\r\n\tscroll(diff){\r\n\t\tthis.vDomScrollPosLeft += diff;\r\n\t\tthis.vDomScrollPosRight += diff;\r\n\r\n\t\tif(diff > (this.holderEl.clientWidth * .8)){\r\n\t\t\tthis.reinitialize();\r\n\t\t}else{\r\n\t\t\tif(diff > 0){\r\n\t\t\t\t//scroll right\r\n\t\t\t\tthis.addColRight();\r\n\t\t\t\tthis.removeColLeft();\r\n\t\t\t}else{\r\n\t\t\t\t//scroll left\r\n\t\t\t\tthis.addColLeft();\r\n\t\t\t\tthis.removeColRight();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcolPositionAdjust (start, end, diff){\r\n\t\tfor(let i = start; i < end; i++){\r\n\t\t\tlet column = this.columns[i];\r\n\r\n\t\t\tcolumn.modules.vdomHoz.leftPos -= diff;\r\n\t\t\tcolumn.modules.vdomHoz.rightPos -= diff;\r\n\t\t}\r\n\t}\r\n\r\n\taddColRight(){\r\n\t\tvar column = this.columns[this.rightCol + 1],\r\n\t\trows, oldWidth, widthDiff;\r\n\r\n\t\tif(column && column.modules.vdomHoz.leftPos <= this.vDomScrollPosRight){\r\n\r\n\t\t\trows = this.table.rowManager.getVisibleRows();\r\n\r\n\t\t\trows.forEach((row) => {\r\n\t\t\t\tif(row.type !== \"group\"){\r\n\t\t\t\t\tvar cell = row.getCell(column);\r\n\t\t\t\t\trow.getElement().appendChild(cell.getElement());\r\n\t\t\t\t\tcell.cellRendered();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(this.fitDataColAvg){\r\n\r\n\t\t\t\toldWidth = column.getWidth();\r\n\r\n\t\t\t\tif(oldWidth === this.fitDataColAvg){\r\n\t\t\t\t\tcolumn.reinitializeWidth();\r\n\r\n\t\t\t\t\twidthDiff = oldWidth - column.getWidth();\r\n\r\n\t\t\t\t\tif(widthDiff){\r\n\t\t\t\t\t\tcolumn.modules.vdomHoz.rightPos -= widthDiff;\r\n\t\t\t\t\t\tthis.colPositionAdjust(this.rightCol + 1, this.columns.length, widthDiff);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.rightCol++;\r\n\r\n\r\n\t\t\tif(this.rightCol >= (this.columns.length - 1)){\r\n\t\t\t\tthis.vDomPadRight = 0;\r\n\t\t\t}else{\r\n\t\t\t\tthis.vDomPadRight -= column.getWidth();\r\n\t\t\t}\r\n\r\n\t\t\tthis.element.style.paddingRight = this.vDomPadRight + \"px\";\r\n\r\n\r\n\r\n\t\t\tthis.addColRight();\r\n\t\t}\r\n\t}\r\n\r\n\taddColLeft(){\r\n\t\tvar column = this.columns[this.leftCol - 1],\r\n\t\trows;\r\n\r\n\t\tif(column && column.modules.vdomHoz.rightPos >= this.vDomScrollPosLeft){\r\n\t\t\tvar rows = this.table.rowManager.getVisibleRows();\r\n\r\n\t\t\trows.forEach((row) => {\r\n\t\t\t\tif(row.type !== \"group\"){\r\n\t\t\t\t\tvar cell = row.getCell(column);\r\n\t\t\t\t\trow.getElement().prepend(cell.getElement());\r\n\t\t\t\t\tcell.cellRendered();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(!this.leftCol){\r\n\t\t\t\tthis.vDomPadLeft = 0;\r\n\t\t\t}else{\r\n\t\t\t\tthis.vDomPadLeft -= column.getWidth();\r\n\t\t\t}\r\n\r\n\t\t\tthis.element.style.paddingLeft = this.vDomPadLeft + \"px\";\r\n\r\n\t\t\tthis.leftCol--;\r\n\r\n\t\t\tthis.addColLeft();\r\n\t\t}\r\n\t}\r\n\r\n\tremoveColRight(column){\r\n\t\tvar column = this.columns[this.rightCol],\r\n\t\trows;\r\n\r\n\t\tif(column && column.modules.vdomHoz.leftPos > this.vDomScrollPosRight){\r\n\t\t\trows = this.table.rowManager.getVisibleRows();\r\n\r\n\t\t\tcolumn.modules.vdomHoz.visible = false;\r\n\r\n\t\t\trows.forEach((row) => {\r\n\t\t\t\tif(row.type !== \"group\"){\r\n\t\t\t\t\tvar cell = row.getCell(column);\r\n\t\t\t\t\trow.getElement().removeChild(cell.getElement());\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.vDomPadRight += column.getWidth();\r\n\t\t\tthis.element.style.paddingRight = this.vDomPadRight + \"px\";\r\n\r\n\t\t\tthis.rightCol --;\r\n\r\n\t\t\tthis.removeColRight();\r\n\t\t}\r\n\t}\r\n\r\n\tremoveColLeft(){\r\n\t\tvar column = this.columns[this.leftCol],\r\n\t\trows;\r\n\r\n\t\tif(column && column.modules.vdomHoz.rightPos < this.vDomScrollPosLeft){\r\n\r\n\t\t\trows = this.table.rowManager.getVisibleRows();\r\n\r\n\t\t\trows.forEach((row) => {\r\n\t\t\t\tif(row.type !== \"group\"){\r\n\t\t\t\t\tvar cell = row.getCell(column);\r\n\t\t\t\t\trow.getElement().removeChild(cell.getElement());\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.vDomPadLeft += column.getWidth();\r\n\t\t\tthis.element.style.paddingLeft = this.vDomPadLeft + \"px\";\r\n\r\n\t\t\tthis.leftCol ++;\r\n\r\n\t\t\tthis.removeColLeft();\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeRow(row){\r\n\t\tif(row.type !== \"group\"){\r\n\t\t\trow.modules.vdomHoz = {\r\n\t\t\t\tleftCol:this.leftCol,\r\n\t\t\t\trightCol:this.rightCol,\r\n\t\t\t};\r\n\r\n\t\t\tfor(let i = this.leftCol; i <= this.rightCol; i++){\r\n\t\t\t\tlet column = this.columns[i];\r\n\r\n\t\t\t\tif(column && column.visible){\r\n\t\t\t\t\tlet cell = row.getCell(column);\r\n\r\n\t\t\t\t\trow.getElement().appendChild(cell.getElement());\r\n\t\t\t\t\tcell.cellRendered();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treinitializeRow(row, force){\r\n\t\tif(row.type !== \"group\"){\r\n\t\t\tif(force || !row.modules.vdomHoz || row.modules.vdomHoz.leftCol !== this.leftCol || row.modules.vdomHoz.rightCol !== this.rightCol){\r\n\t\t\t\tvar rowEl = row.getElement();\r\n\t\t\t\twhile(rowEl.firstChild) rowEl.removeChild(rowEl.firstChild);\r\n\r\n\t\t\t\tthis.initializeRow(row);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","'use strict';\r\n\r\nimport defaultOptions from './defaults/options.js';\r\n\r\n\r\nimport ColumnManager from './ColumnManager.js';\r\nimport RowManager from './RowManager.js';\r\nimport FooterManager from './FooterManager.js';\r\n\r\nimport TableRegistry from './TableRegistry.js';\r\nimport ModuleBinder from './ModuleBinder.js';\r\n\r\nimport VirtualDomHorizontal from './renderers/VirtualDomHorizontal.js';\r\n\r\nclass Tabulator {\r\n\r\n\tconstructor(element, options){\r\n\r\n\t\tthis.options = {};\r\n\r\n\t\tthis.columnManager = null; // hold Column Manager\r\n\t\tthis.rowManager = null; //hold Row Manager\r\n\t\tthis.footerManager = null; //holder Footer Manager\r\n\t\tthis.vdomHoz  = null; //holder horizontal virtual dom\r\n\r\n\t\tthis.browser = \"\"; //hold current browser type\r\n\t\tthis.browserSlow = false; //handle reduced functionality for slower browsers\r\n\t\tthis.browserMobile = false; //check if running on moble, prevent resize cancelling edit on keyboard appearence\r\n\t\tthis.rtl = false; //check if the table is in RTL mode\r\n\r\n\t\tthis.modules = {}; //hold all modules bound to this table\r\n\r\n\t\tif(this.initializeElement(element)){\r\n\t\t\tthis.initializeOptions(options || {});\r\n\t\t\tthis._create();\r\n\t\t}\r\n\r\n\t\tTableRegistry.register(this); //register table for inderdevice communication\r\n\t}\r\n\r\n\tinitializeOptions(options){\r\n\r\n\t\tvar defaults = Tabulator.defaultOptions;\r\n\r\n\t\t//warn user if option is not available\r\n\t\tif(options.invalidOptionWarnings !== false){\r\n\t\t\tfor (var key in options){\r\n\t\t\t\tif(typeof defaults[key] === \"undefined\"){\r\n\t\t\t\t\tconsole.warn(\"Invalid table constructor option:\", key)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//assign options to table\r\n\t\tfor (var key in defaults){\r\n\t\t\tif(key in options){\r\n\t\t\t\tthis.options[key] = options[key];\r\n\t\t\t}else{\r\n\t\t\t\tif(Array.isArray(defaults[key])){\r\n\t\t\t\t\tthis.options[key] = Object.assign([], defaults[key]);\r\n\t\t\t\t}else if(typeof defaults[key] === \"object\" && defaults[key] !== null){\r\n\t\t\t\t\tthis.options[key] = Object.assign({}, defaults[key]);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.options[key] = defaults[key];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeElement(element){\r\n\t\tif(typeof HTMLElement !== \"undefined\" && element instanceof HTMLElement){\r\n\t\t\tthis.element = element;\r\n\t\t\treturn true;\r\n\t\t}else if(typeof element === \"string\"){\r\n\t\t\tthis.element = document.querySelector(element);\r\n\r\n\t\t\tif(this.element){\r\n\t\t\t\treturn true;\r\n\t\t\t}else{\r\n\t\t\t\tconsole.error(\"Tabulator Creation Error - no element found matching selector: \", element);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tconsole.error(\"Tabulator Creation Error - Invalid element provided:\", element);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\trtlCheck(){\r\n\t\tvar style = window.getComputedStyle(this.element);\r\n\r\n\t\tswitch(this.options.textDirection){\r\n\t\t\tcase\"auto\":\r\n\t\t\tif(style.direction !== \"rtl\"){\r\n\t\t\t\tbreak;\r\n\t\t\t};\r\n\r\n\t\t\tcase \"rtl\":\r\n\t\t\tthis.element.classList.add(\"tabulator-rtl\");\r\n\t\t\tthis.rtl = true;\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"ltr\":\r\n\t\t\tthis.element.classList.add(\"tabulator-ltr\");\r\n\r\n\t\t\tdefault:\r\n\t\t\tthis.rtl = false;\r\n\t\t}\r\n\t}\r\n\r\n\t//convert depricated functionality to new functions\r\n\t_mapDepricatedFunctionality(){\r\n\t\t//map depricated persistance setup options\r\n\t\tif(this.options.persistentLayout || this.options.persistentSort || this.options.persistentFilter){\r\n\t\t\tif(!this.options.persistence){\r\n\t\t\t\tthis.options.persistence = {};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.options.dataEdited){\r\n\t\t\tconsole.warn(\"DEPRECATION WARNING - dataEdited option has been deprecated, please use the dataChanged option instead\");\r\n\t\t\tthis.options.dataChanged = this.options.dataEdited;\r\n\t\t}\r\n\r\n\t\tif(this.options.downloadDataFormatter){\r\n\t\t\tconsole.warn(\"DEPRECATION WARNING - downloadDataFormatter option has been deprecated\");\r\n\t\t}\r\n\r\n\t\tif(typeof this.options.clipboardCopyHeader !== \"undefined\"){\r\n\t\t\tthis.options.columnHeaders = this.options.clipboardCopyHeader;\r\n\t\t\tconsole.warn(\"DEPRECATION WARNING - clipboardCopyHeader option has been deprecated, please use the columnHeaders property on the clipboardCopyConfig option\");\r\n\t\t}\r\n\r\n\t\tif(this.options.printVisibleRows !== true){\r\n\t\t\tconsole.warn(\"printVisibleRows option is deprecated, you should now use the printRowRange option\");\r\n\r\n\t\t\tthis.options.persistence.printRowRange = \"active\";\r\n\t\t}\r\n\r\n\t\tif(this.options.printCopyStyle !== true){\r\n\t\t\tconsole.warn(\"printCopyStyle option is deprecated, you should now use the printStyled option\");\r\n\r\n\t\t\tthis.options.persistence.printStyled = this.options.printCopyStyle;\r\n\t\t}\r\n\r\n\t\tif(this.options.persistentLayout){\r\n\t\t\tconsole.warn(\"persistentLayout option is deprecated, you should now use the persistence option\");\r\n\r\n\t\t\tif(this.options.persistence !== true && typeof this.options.persistence.columns === \"undefined\"){\r\n\t\t\t\tthis.options.persistence.columns = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.options.persistentSort){\r\n\t\t\tconsole.warn(\"persistentSort option is deprecated, you should now use the persistence option\");\r\n\r\n\t\t\tif(this.options.persistence !== true  && typeof this.options.persistence.sort === \"undefined\"){\r\n\t\t\t\tthis.options.persistence.sort = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.options.persistentFilter){\r\n\t\t\tconsole.warn(\"persistentFilter option is deprecated, you should now use the persistence option\");\r\n\r\n\t\t\tif(this.options.persistence !== true  && typeof this.options.persistence.filter === \"undefined\"){\r\n\t\t\t\tthis.options.persistence.filter = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.options.columnVertAlign){\r\n\t\t\tconsole.warn(\"columnVertAlign option is deprecated, you should now use the columnHeaderVertAlign option\");\r\n\r\n\t\t\tthis.options.columnHeaderVertAlign = this.options.columnVertAlign;\r\n\t\t}\r\n\t}\r\n\r\n\t_clearSelection(){\r\n\r\n\t\tthis.element.classList.add(\"tabulator-block-select\");\r\n\r\n\t\tif (window.getSelection) {\r\n\t\t  if (window.getSelection().empty) {  // Chrome\r\n\t\t  \twindow.getSelection().empty();\r\n\t\t  } else if (window.getSelection().removeAllRanges) {  // Firefox\r\n\t\t  \twindow.getSelection().removeAllRanges();\r\n\t\t  }\r\n\t\t} else if (document.selection) {  // IE?\r\n\t\t\tdocument.selection.empty();\r\n\t\t}\r\n\r\n\t\tthis.element.classList.remove(\"tabulator-block-select\");\r\n\t}\r\n\r\n\t//concreate table\r\n\t_create(){\r\n\t\tthis._clearObjectPointers();\r\n\r\n\t\tthis._mapDepricatedFunctionality();\r\n\r\n\t\tthis.bindModules();\r\n\r\n\t\tthis.rtlCheck();\r\n\r\n\t\tif(this.element.tagName === \"TABLE\"){\r\n\t\t\tif(this.modExists(\"htmlTableImport\", true)){\r\n\t\t\t\tthis.modules.htmlTableImport.parseTable();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.columnManager = new ColumnManager(this);\r\n\t\tthis.rowManager = new RowManager(this);\r\n\t\tthis.footerManager = new FooterManager(this);\r\n\r\n\t\tthis.columnManager.setRowManager(this.rowManager);\r\n\t\tthis.rowManager.setColumnManager(this.columnManager);\r\n\r\n\t\tif(this.options.virtualDomHoz){\r\n\t\t\tthis.vdomHoz = new VirtualDomHorizontal(this);\r\n\t\t}\r\n\r\n\t\tthis._buildElement();\r\n\r\n\t\tthis._loadInitialData();\r\n\t}\r\n\r\n\t//clear pointers to objects in default config object\r\n\t_clearObjectPointers(){\r\n\t\tthis.options.columns = this.options.columns.slice(0);\r\n\r\n\t\tif(!this.options.reactiveData){\r\n\t\t\tthis.options.data = this.options.data.slice(0);\r\n\t\t}\r\n\t}\r\n\r\n\t//build tabulator element\r\n\t_buildElement(){\r\n\t\tvar element = this.element,\r\n\t\tmod = this.modules,\r\n\t\toptions = this.options;\r\n\r\n\t\toptions.tableBuilding.call(this);\r\n\r\n\t\telement.classList.add(\"tabulator\");\r\n\t\telement.setAttribute(\"role\", \"grid\");\r\n\r\n\t\t//empty element\r\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\r\n\r\n\t\t//set table height\r\n\t\tif(options.height){\r\n\t\t\toptions.height = isNaN(options.height) ? options.height : options.height + \"px\";\r\n\t\t\telement.style.height = options.height;\r\n\t\t}\r\n\r\n\t\t//set table min height\r\n\t\tif(options.minHeight !== false){\r\n\t\t\toptions.minHeight = isNaN(options.minHeight) ? options.minHeight : options.minHeight + \"px\";\r\n\t\t\telement.style.minHeight = options.minHeight;\r\n\t\t}\r\n\r\n\t\t//set table maxHeight\r\n\t\tif(options.maxHeight !== false){\r\n\t\t\toptions.maxHeight = isNaN(options.maxHeight) ? options.maxHeight : options.maxHeight + \"px\";\r\n\t\t\telement.style.maxHeight = options.maxHeight;\r\n\t\t}\r\n\r\n\t\tthis.columnManager.initialize();\r\n\t\tthis.rowManager.initialize();\r\n\r\n\t\tthis._detectBrowser();\r\n\r\n\t\tif(this.modExists(\"layout\", true)){\r\n\t\t\tmod.layout.initialize(options.layout);\r\n\t\t}\r\n\r\n\t\t//set localization\r\n\t\tmod.localize.initialize();\r\n\r\n\t\tif(options.headerFilterPlaceholder !== false){\r\n\t\t\tmod.localize.setHeaderFilterPlaceholder(options.headerFilterPlaceholder);\r\n\t\t}\r\n\r\n\t\tfor(let locale in options.langs){\r\n\t\t\tmod.localize.installLang(locale, options.langs[locale]);\r\n\t\t}\r\n\r\n\t\tmod.localize.setLocale(options.locale);\r\n\r\n\t\t//configure placeholder element\r\n\t\tif(typeof options.placeholder == \"string\"){\r\n\r\n\t\t\tvar el = document.createElement(\"div\");\r\n\t\t\tel.classList.add(\"tabulator-placeholder\");\r\n\r\n\t\t\tvar span = document.createElement(\"span\");\r\n\t\t\tspan.innerHTML = options.placeholder;\r\n\r\n\t\t\tel.appendChild(span);\r\n\r\n\t\t\toptions.placeholder = el;\r\n\t\t}\r\n\r\n\t\t//build table elements\r\n\t\telement.appendChild(this.columnManager.getElement());\r\n\t\telement.appendChild(this.rowManager.getElement());\r\n\r\n\t\tif(options.footerElement){\r\n\t\t\tthis.footerManager.activate();\r\n\t\t}\r\n\r\n\t\tif(options.persistence && this.modExists(\"persistence\", true)){\r\n\t\t\tmod.persistence.initialize();\r\n\t\t}\r\n\r\n\t\tif(options.movableRows && this.modExists(\"moveRow\")){\r\n\t\t\tmod.moveRow.initialize();\r\n\t\t}\r\n\r\n\t\tif(options.autoColumns && this.options.data){\r\n\t\t\tthis.columnManager.generateColumnsFromRowData(this.options.data);\r\n\t\t}\r\n\r\n\t\tif(this.modExists(\"columnCalcs\")){\r\n\t\t\tmod.columnCalcs.initialize();\r\n\t\t}\r\n\r\n\t\tthis.columnManager.setColumns(options.columns);\r\n\r\n\t\tif(options.dataTree && this.modExists(\"dataTree\", true)){\r\n\t\t\tmod.dataTree.initialize();\r\n\t\t}\r\n\r\n\t\tif(this.modExists(\"frozenRows\")){\r\n\t\t\tthis.modules.frozenRows.initialize();\r\n\t\t}\r\n\r\n\t\tif(((options.persistence && this.modExists(\"persistence\", true) && mod.persistence.config.sort) || options.initialSort) && this.modExists(\"sort\", true)){\r\n\t\t\tvar sorters = [];\r\n\r\n\t\t\tif(options.persistence && this.modExists(\"persistence\", true) && mod.persistence.config.sort){\r\n\t\t\t\tsorters = mod.persistence.load(\"sort\");\r\n\r\n\t\t\t\tif(sorters === false && options.initialSort){\r\n\t\t\t\t\tsorters = options.initialSort;\r\n\t\t\t\t}\r\n\t\t\t}else if(options.initialSort){\r\n\t\t\t\tsorters = options.initialSort;\r\n\t\t\t}\r\n\r\n\t\t\tmod.sort.setSort(sorters);\r\n\t\t}\r\n\r\n\t\tif(((options.persistence && this.modExists(\"persistence\", true) && mod.persistence.config.filter) || options.initialFilter) && this.modExists(\"filter\", true)){\r\n\t\t\tvar filters = [];\r\n\r\n\r\n\t\t\tif(options.persistence && this.modExists(\"persistence\", true) && mod.persistence.config.filter){\r\n\t\t\t\tfilters = mod.persistence.load(\"filter\");\r\n\r\n\t\t\t\tif(filters === false && options.initialFilter){\r\n\t\t\t\t\tfilters = options.initialFilter;\r\n\t\t\t\t}\r\n\t\t\t}else if(options.initialFilter){\r\n\t\t\t\tfilters = options.initialFilter;\r\n\t\t\t}\r\n\r\n\t\t\tmod.filter.setFilter(filters);\r\n\t\t}\r\n\r\n\t\tif(options.initialHeaderFilter && this.modExists(\"filter\", true)){\r\n\t\t\toptions.initialHeaderFilter.forEach((item) => {\r\n\r\n\t\t\t\tvar column = this.columnManager.findColumn(item.field);\r\n\r\n\t\t\t\tif(column){\r\n\t\t\t\t\tmod.filter.setHeaderFilterValue(column, item.value);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", item.field);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\r\n\t\tif(this.modExists(\"ajax\")){\r\n\t\t\tmod.ajax.initialize();\r\n\t\t}\r\n\r\n\t\tif(options.pagination && this.modExists(\"page\", true)){\r\n\t\t\tmod.page.initialize();\r\n\t\t}\r\n\r\n\t\tif(options.groupBy && this.modExists(\"groupRows\", true)){\r\n\t\t\tmod.groupRows.initialize();\r\n\t\t}\r\n\r\n\t\tif(this.modExists(\"keybindings\")){\r\n\t\t\tmod.keybindings.initialize();\r\n\t\t}\r\n\r\n\t\tif(this.modExists(\"selectRow\")){\r\n\t\t\tmod.selectRow.clearSelectionData(true);\r\n\t\t}\r\n\r\n\t\tif(options.autoResize && this.modExists(\"resizeTable\")){\r\n\t\t\tmod.resizeTable.initialize();\r\n\t\t}\r\n\r\n\t\tif(this.modExists(\"clipboard\")){\r\n\t\t\tmod.clipboard.initialize();\r\n\t\t}\r\n\r\n\t\tif(options.printAsHtml && this.modExists(\"print\")){\r\n\t\t\tmod.print.initialize();\r\n\t\t}\r\n\r\n\t\toptions.tableBuilt.call(this);\r\n\t}\r\n\r\n\t_loadInitialData(){\r\n\t\tif(this.options.pagination && this.modExists(\"page\")){\r\n\t\t\tthis.modules.page.reset(true, true);\r\n\r\n\t\t\tif(this.options.pagination == \"local\"){\r\n\t\t\t\tif(this.options.data.length){\r\n\t\t\t\t\tthis.rowManager.setData(this.options.data, false, true);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif((this.options.ajaxURL || this.options.ajaxURLGenerator) && this.modExists(\"ajax\")){\r\n\t\t\t\t\t\tthis.modules.ajax.loadData(false, true).then(()=>{}).catch(()=>{\r\n\t\t\t\t\t\t\tif(this.options.paginationInitialPage){\r\n\t\t\t\t\t\t\t\tthis.modules.page.setPage(this.options.paginationInitialPage);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.rowManager.setData(this.options.data, false, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this.options.paginationInitialPage){\r\n\t\t\t\t\tthis.modules.page.setPage(this.options.paginationInitialPage);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(this.options.ajaxURL){\r\n\t\t\t\t\tthis.modules.page.setPage(this.options.paginationInitialPage).then(()=>{}).catch(()=>{});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.rowManager.setData([], false, true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(this.options.data.length){\r\n\t\t\t\tthis.rowManager.setData(this.options.data);\r\n\t\t\t}else{\r\n\t\t\t\tif((this.options.ajaxURL || this.options.ajaxURLGenerator) && this.modExists(\"ajax\")){\r\n\t\t\t\t\tthis.modules.ajax.loadData(false, true).then(()=>{}).catch(()=>{});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.rowManager.setData(this.options.data, false, true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//deconstructor\r\n\tdestroy(){\r\n\t\tvar element = this.element;\r\n\r\n\t\tcomms(this); //deregister table from inderdevice communication\r\n\r\n\t\tif(this.options.reactiveData && this.modExists(\"reactiveData\", true)){\r\n\t\t\tthis.modules.reactiveData.unwatchData();\r\n\t\t}\r\n\r\n\t\t//clear row data\r\n\t\tthis.rowManager.rows.forEach(function(row){\r\n\t\t\trow.wipe();\r\n\t\t});\r\n\r\n\t\tthis.rowManager.rows = [];\r\n\t\tthis.rowManager.activeRows = [];\r\n\t\tthis.rowManager.displayRows = [];\r\n\r\n\t\t//clear event bindings\r\n\t\tif(this.options.autoResize && this.modExists(\"resizeTable\")){\r\n\t\t\tthis.modules.resizeTable.clearBindings();\r\n\t\t}\r\n\r\n\t\tif(this.modExists(\"keybindings\")){\r\n\t\t\tthis.modules.keybindings.clearBindings();\r\n\t\t}\r\n\r\n\t\t//clear DOM\r\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\r\n\t\telement.classList.remove(\"tabulator\");\r\n\t}\r\n\r\n\t_detectBrowser(){\r\n\t\tvar ua = navigator.userAgent||navigator.vendor||window.opera;\r\n\r\n\t\tif(ua.indexOf(\"Trident\") > -1){\r\n\t\t\tthis.browser = \"ie\";\r\n\t\t\tthis.browserSlow = true;\r\n\t\t}else if(ua.indexOf(\"Edge\") > -1){\r\n\t\t\tthis.browser = \"edge\";\r\n\t\t\tthis.browserSlow = true;\r\n\t\t}else if(ua.indexOf(\"Firefox\") > -1){\r\n\t\t\tthis.browser = \"firefox\";\r\n\t\t\tthis.browserSlow = false;\r\n\t\t}else{\r\n\t\t\tthis.browser = \"other\";\r\n\t\t\tthis.browserSlow = false;\r\n\t\t}\r\n\r\n\t\tthis.browserMobile = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(ua)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(ua.substr(0,4));\r\n\t}\r\n\r\n\t////////////////// Data Handling //////////////////\r\n\t//block table redrawing\r\n\tblockRedraw(){\r\n\t\treturn this.rowManager.blockRedraw();\r\n\t}\r\n\r\n\t//restore table redrawing\r\n\trestoreRedraw(){\r\n\t\treturn this.rowManager.restoreRedraw();\r\n\t}\r\n\r\n\t//local data from local file\r\n\tsetDataFromLocalFile(extensions){\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tvar input = document.createElement(\"input\");\r\n\t\t\tinput.type = \"file\";\r\n\t\t\tinput.accept = extensions || \".json,application/json\";\r\n\r\n\t\t\tinput.addEventListener(\"change\", (e) => {\r\n\t\t\t\tvar file = input.files[0],\r\n\t\t\t\treader = new FileReader(),\r\n\t\t\t\tdata;\r\n\r\n\t\t\t\treader.readAsText(file);\r\n\r\n\t\t\t\treader.onload = (e) => {\r\n\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tdata = JSON.parse(reader.result);\r\n\t\t\t\t\t} catch(e) {\r\n\t\t\t\t\t\tconsole.warn(\"File Load Error - File contents is invalid JSON\", e);\r\n\t\t\t\t\t\treject(e);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.setData(data)\r\n\t\t\t\t\t.then((data) => {\r\n\t\t\t\t\t\tresolve(data);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((err) => {\r\n\t\t\t\t\t\tresolve(err);\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\r\n\t\t\t\treader.onerror = (e) => {\r\n\t\t\t\t\tconsole.warn(\"File Load Error - Unable to read file\");\r\n\t\t\t\t\treject();\r\n\t\t\t\t};\r\n\t\t\t});\r\n\r\n\t\t\tinput.click();\r\n\t\t});\r\n\t}\r\n\r\n\t//load data\r\n\tsetData(data, params, config){\r\n\t\tif(this.modExists(\"ajax\")){\r\n\t\t\tthis.modules.ajax.blockActiveRequest();\r\n\t\t}\r\n\r\n\t\treturn this._setData(data, params, config, false, true);\r\n\t}\r\n\r\n\t_setData(data, params, config, inPosition, columnsChanged){\r\n\t\tif(typeof(data) === \"string\"){\r\n\t\t\tif (data.indexOf(\"{\") == 0 || data.indexOf(\"[\") == 0){\r\n\t\t\t\t//data is a json encoded string\r\n\t\t\t\treturn this.rowManager.setData(JSON.parse(data), inPosition, columnsChanged);\r\n\t\t\t}else{\r\n\r\n\t\t\t\tif(this.modExists(\"ajax\", true)){\r\n\t\t\t\t\tif(params){\r\n\t\t\t\t\t\tthis.modules.ajax.setParams(params);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(config){\r\n\t\t\t\t\t\tthis.modules.ajax.setConfig(config);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.modules.ajax.setUrl(data);\r\n\r\n\t\t\t\t\tif(this.options.pagination == \"remote\" && this.modExists(\"page\", true)){\r\n\t\t\t\t\t\tthis.modules.page.reset(true, true);\r\n\t\t\t\t\t\treturn this.modules.page.setPage(1);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t//assume data is url, make ajax call to url to get data\r\n\t\t\t\t\t\treturn this.modules.ajax.loadData(inPosition, columnsChanged);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(data){\r\n\t\t\t\t//asume data is already an object\r\n\t\t\t\treturn this.rowManager.setData(data, inPosition, columnsChanged);\r\n\t\t\t}else{\r\n\t\t\t\t//no data provided, check if ajaxURL is present;\r\n\t\t\t\tif(this.modExists(\"ajax\") && (this.modules.ajax.getUrl || this.options.ajaxURLGenerator)){\r\n\t\t\t\t\tif(this.options.pagination == \"remote\" && this.modExists(\"page\", true)){\r\n\t\t\t\t\t\tthis.modules.page.reset(true, true);\r\n\t\t\t\t\t\treturn this.modules.page.setPage(1);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn this.modules.ajax.loadData(inPosition, columnsChanged);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\t//empty data\r\n\t\t\t\t\treturn this.rowManager.setData([], inPosition, columnsChanged);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//clear data\r\n\tclearData(){\r\n\t\tif(this.modExists(\"ajax\")){\r\n\t\t\tthis.modules.ajax.blockActiveRequest();\r\n\t\t}\r\n\r\n\t\tthis.rowManager.clearData();\r\n\t}\r\n\r\n\t//get table data array\r\n\tgetData(active){\r\n\t\tif(active === true){\r\n\t\t\tconsole.warn(\"passing a boolean to the getData function is deprecated, you should now pass the string 'active'\");\r\n\t\t\tactive = \"active\";\r\n\t\t}\r\n\r\n\t\treturn this.rowManager.getData(active);\r\n\t}\r\n\r\n\t//get table data array count\r\n\tgetDataCount(active){\r\n\r\n\t\tif(active === true){\r\n\t\t\tconsole.warn(\"passing a boolean to the getDataCount function is deprecated, you should now pass the string 'active'\");\r\n\t\t\tactive = \"active\";\r\n\t\t}\r\n\r\n\t\treturn this.rowManager.getDataCount(active);\r\n\t}\r\n\r\n\t//search for specific row components\r\n\tsearchRows(field, type, value){\r\n\t\tif(this.modExists(\"filter\", true)){\r\n\t\t\treturn this.modules.filter.search(\"rows\", field, type, value);\r\n\t\t}\r\n\t}\r\n\r\n\t//search for specific data\r\n\tsearchData(field, type, value){\r\n\t\tif(this.modExists(\"filter\", true)){\r\n\t\t\treturn this.modules.filter.search(\"data\", field, type, value);\r\n\t\t}\r\n\t}\r\n\r\n\t//get table html\r\n\tgetHtml(visible, style, config){\r\n\t\tif(this.modExists(\"export\", true)){\r\n\t\t\treturn this.modules.export.getHtml(visible, style, config);\r\n\t\t}\r\n\t}\r\n\r\n\t//get print html\r\n\tprint(visible, style, config){\r\n\t\tif(this.modExists(\"print\", true)){\r\n\t\t\treturn this.modules.print.printFullscreen(visible, style, config);\r\n\t\t}\r\n\t}\r\n\r\n\t//retrieve Ajax URL\r\n\tgetAjaxUrl(){\r\n\t\tif(this.modExists(\"ajax\", true)){\r\n\t\t\treturn this.modules.ajax.getUrl();\r\n\t\t}\r\n\t}\r\n\r\n\t//replace data, keeping table in position with same sort\r\n\treplaceData(data, params, config){\r\n\t\tif(this.modExists(\"ajax\")){\r\n\t\t\tthis.modules.ajax.blockActiveRequest();\r\n\t\t}\r\n\r\n\t\treturn this._setData(data, params, config, true);\r\n\t}\r\n\r\n\t//update table data\r\n\tupdateData(data){\r\n\t\tvar responses = 0;\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif(this.modExists(\"ajax\")){\r\n\t\t\t\tthis.modules.ajax.blockActiveRequest();\r\n\t\t\t}\r\n\r\n\t\t\tif(typeof data === \"string\"){\r\n\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t}\r\n\r\n\t\t\tif(data){\r\n\t\t\t\tdata.forEach((item) => {\r\n\t\t\t\t\tvar row = this.rowManager.findRow(item[this.options.index]);\r\n\r\n\t\t\t\t\tif(row){\r\n\t\t\t\t\t\tresponses++;\r\n\r\n\t\t\t\t\t\trow.updateData(item)\r\n\t\t\t\t\t\t.then(()=>{\r\n\t\t\t\t\t\t\tresponses--;\r\n\r\n\t\t\t\t\t\t\tif(!responses){\r\n\t\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\r\n\t\t\t\treject(\"Update Error - No data provided\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\taddData(data, pos, index){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif(this.modExists(\"ajax\")){\r\n\t\t\t\tthis.modules.ajax.blockActiveRequest();\r\n\t\t\t}\r\n\r\n\t\t\tif(typeof data === \"string\"){\r\n\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t}\r\n\r\n\t\t\tif(data){\r\n\t\t\t\tthis.rowManager.addRows(data, pos, index)\r\n\t\t\t\t.then((rows) => {\r\n\t\t\t\t\tvar output = [];\r\n\r\n\t\t\t\t\trows.forEach(function(row){\r\n\t\t\t\t\t\toutput.push(row.getComponent());\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tresolve(output);\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\r\n\t\t\t\treject(\"Update Error - No data provided\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//update table data\r\n\tupdateOrAddData(data){\r\n\t\tvar rows = [],\r\n\t\tresponses = 0;\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif(this.modExists(\"ajax\")){\r\n\t\t\t\tthis.modules.ajax.blockActiveRequest();\r\n\t\t\t}\r\n\r\n\t\t\tif(typeof data === \"string\"){\r\n\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t}\r\n\r\n\t\t\tif(data){\r\n\t\t\t\tdata.forEach((item) => {\r\n\t\t\t\t\tvar row = this.rowManager.findRow(item[this.options.index]);\r\n\r\n\t\t\t\t\tresponses++;\r\n\r\n\t\t\t\t\tif(row){\r\n\t\t\t\t\t\trow.updateData(item)\r\n\t\t\t\t\t\t.then(()=>{\r\n\t\t\t\t\t\t\tresponses--;\r\n\t\t\t\t\t\t\trows.push(row.getComponent());\r\n\r\n\t\t\t\t\t\t\tif(!responses){\r\n\t\t\t\t\t\t\t\tresolve(rows);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.rowManager.addRows(item)\r\n\t\t\t\t\t\t.then((newRows)=>{\r\n\t\t\t\t\t\t\tresponses--;\r\n\t\t\t\t\t\t\trows.push(newRows[0].getComponent());\r\n\r\n\t\t\t\t\t\t\tif(!responses){\r\n\t\t\t\t\t\t\t\tresolve(rows);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\r\n\t\t\t\treject(\"Update Error - No data provided\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//get row object\r\n\tgetRow(index){\r\n\t\tvar row = this.rowManager.findRow(index);\r\n\r\n\t\tif(row){\r\n\t\t\treturn row.getComponent();\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Find Error - No matching row found:\", index);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t//get row object\r\n\tgetRowFromPosition(position, active){\r\n\t\tvar row = this.rowManager.getRowFromPosition(position, active);\r\n\r\n\t\tif(row){\r\n\t\t\treturn row.getComponent();\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Find Error - No matching row found:\", position);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t//delete row from table\r\n\tdeleteRow(index){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tvar count = 0,\r\n\t\t\tsuccessCount = 0,\r\n\t\t\tfoundRows = [];\r\n\r\n\t\t\tfunction doneCheck(){\r\n\t\t\t\tcount++;\r\n\r\n\t\t\t\tif(count == index.length){\r\n\t\t\t\t\tif(successCount){\r\n\t\t\t\t\t\tthis.rowManager.reRenderInPosition();\r\n\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(!Array.isArray(index)){\r\n\t\t\t\tindex = [index];\r\n\t\t\t}\r\n\r\n\t\t\t//find matching rows\r\n\t\t\tindex.forEach((item) =>{\r\n\t\t\t\tvar row = this.rowManager.findRow(item, true);\r\n\r\n\t\t\t\tif(row){\r\n\t\t\t\t\tfoundRows.push(row);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Delete Error - No matching row found:\", item);\r\n\t\t\t\t\treject(\"Delete Error - No matching row found\")\r\n\t\t\t\t\tdoneCheck();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t//sort rows into correct order to ensure smooth delete from table\r\n\t\t\tfoundRows.sort((a, b) => {\r\n\t\t\t\treturn this.rowManager.rows.indexOf(a) > this.rowManager.rows.indexOf(b) ? 1 : -1;\r\n\t\t\t});\r\n\r\n\t\t\tfoundRows.forEach((row) =>{\r\n\t\t\t\trow.delete()\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tsuccessCount++;\r\n\t\t\t\t\tdoneCheck();\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err) => {\r\n\t\t\t\t\tdoneCheck();\r\n\t\t\t\t\treject(err);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\t//add row to table\r\n\taddRow(data, pos, index){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif(typeof data === \"string\"){\r\n\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t}\r\n\r\n\t\t\tthis.rowManager.addRows(data, pos, index)\r\n\t\t\t.then((rows)=>{\r\n\t\t\t\t//recalc column calculations if present\r\n\t\t\t\tif(this.modExists(\"columnCalcs\")){\r\n\t\t\t\t\tthis.modules.columnCalcs.recalc(this.rowManager.activeRows);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tresolve(rows[0].getComponent());\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\t//update a row if it exitsts otherwise create it\r\n\tupdateOrAddRow(index, data){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tvar row = this.rowManager.findRow(index);\r\n\r\n\t\t\tif(typeof data === \"string\"){\r\n\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t}\r\n\r\n\t\t\tif(row){\r\n\t\t\t\trow.updateData(data)\r\n\t\t\t\t.then(()=>{\r\n\t\t\t\t\t//recalc column calculations if present\r\n\t\t\t\t\tif(this.modExists(\"columnCalcs\")){\r\n\t\t\t\t\t\tthis.modules.columnCalcs.recalc(this.rowManager.activeRows);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tresolve(row.getComponent());\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err)=>{\r\n\t\t\t\t\treject(err);\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\trow = this.rowManager.addRows(data)\r\n\t\t\t\t.then((rows)=>{\r\n\t\t\t\t\t//recalc column calculations if present\r\n\t\t\t\t\tif(this.modExists(\"columnCalcs\")){\r\n\t\t\t\t\t\tthis.modules.columnCalcs.recalc(this.rowManager.activeRows);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tresolve(rows[0].getComponent());\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err)=>{\r\n\t\t\t\t\treject(err);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//update row data\r\n\tupdateRow(index, data){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tvar row = this.rowManager.findRow(index);\r\n\r\n\t\t\tif(typeof data === \"string\"){\r\n\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t}\r\n\r\n\t\t\tif(row){\r\n\t\t\t\trow.updateData(data).then(()=>{\r\n\t\t\t\t\tresolve(row.getComponent());\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err)=>{\r\n\t\t\t\t\treject(err);\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Update Error - No matching row found:\", index);\r\n\t\t\t\treject(\"Update Error - No matching row found\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//scroll to row in DOM\r\n\tscrollToRow(index, position, ifVisible){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tvar row = this.rowManager.findRow(index);\r\n\r\n\t\t\tif(row){\r\n\t\t\t\tthis.rowManager.scrollToRow(row, position, ifVisible)\r\n\t\t\t\t.then(()=>{\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err)=>{\r\n\t\t\t\t\treject(err);\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Scroll Error - No matching row found:\", index);\r\n\t\t\t\treject(\"Scroll Error - No matching row found\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tmoveRow(from, to, after){\r\n\t\tvar fromRow = this.rowManager.findRow(from);\r\n\r\n\t\tif(fromRow){\r\n\t\t\tfromRow.moveToRow(to, after);\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Move Error - No matching row found:\", from);\r\n\t\t}\r\n\t}\r\n\r\n\tgetRows(active){\r\n\t\tif(active === true){\r\n\t\t\tconsole.warn(\"passing a boolean to the getRows function is deprecated, you should now pass the string 'active'\");\r\n\t\t\tactive = \"active\";\r\n\t\t}\r\n\r\n\t\treturn this.rowManager.getComponents(active);\r\n\t}\r\n\r\n\t//get position of row in table\r\n\tgetRowPosition(index, active){\r\n\t\tvar row = this.rowManager.findRow(index);\r\n\r\n\t\tif(row){\r\n\t\t\treturn this.rowManager.getRowPosition(row, active);\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Position Error - No matching row found:\", index);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t//copy table data to clipboard\r\n\tcopyToClipboard(selector){\r\n\t\tif(this.modExists(\"clipboard\", true)){\r\n\t\t\tthis.modules.clipboard.copy(selector);\r\n\t\t}\r\n\t}\r\n\r\n\t/////////////// Column Functions  ///////////////\r\n\tsetColumns(definition){\r\n\t\tthis.columnManager.setColumns(definition);\r\n\t}\r\n\r\n\tgetColumns(structured){\r\n\t\treturn this.columnManager.getComponents(structured);\r\n\t}\r\n\r\n\tgetColumn(field){\r\n\t\tvar col = this.columnManager.findColumn(field);\r\n\r\n\t\tif(col){\r\n\t\t\treturn col.getComponent();\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Find Error - No matching column found:\", field);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tgetColumnDefinitions(){\r\n\t\treturn this.columnManager.getDefinitionTree();\r\n\t}\r\n\r\n\tgetColumnLayout(){\r\n\t\tif(this.modExists(\"persistence\", true)){\r\n\t\t\treturn this.modules.persistence.parseColumns(this.columnManager.getColumns());\r\n\t\t}\r\n\t}\r\n\r\n\tsetColumnLayout(layout){\r\n\t\tif(this.modExists(\"persistence\", true)){\r\n\t\t\tthis.columnManager.setColumns(this.modules.persistence.mergeDefinition(this.options.columns, layout))\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tshowColumn(field){\r\n\t\tvar column = this.columnManager.findColumn(field);\r\n\r\n\t\tif(column){\r\n\t\t\tcolumn.show();\r\n\r\n\t\t\tif(this.options.responsiveLayout && this.modExists(\"responsiveLayout\", true)){\r\n\t\t\t\tthis.modules.responsiveLayout.update();\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Column Show Error - No matching column found:\", field);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\thideColumn(field){\r\n\t\tvar column = this.columnManager.findColumn(field);\r\n\r\n\t\tif(column){\r\n\t\t\tcolumn.hide();\r\n\r\n\t\t\tif(this.options.responsiveLayout && this.modExists(\"responsiveLayout\", true)){\r\n\t\t\t\tthis.modules.responsiveLayout.update();\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Column Hide Error - No matching column found:\", field);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\ttoggleColumn(field){\r\n\t\tvar column = this.columnManager.findColumn(field);\r\n\r\n\t\tif(column){\r\n\t\t\tif(column.visible){\r\n\t\t\t\tcolumn.hide();\r\n\t\t\t}else{\r\n\t\t\t\tcolumn.show();\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Column Visibility Toggle Error - No matching column found:\", field);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\taddColumn(definition, before, field){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tvar column = this.columnManager.findColumn(field);\r\n\r\n\t\t\tthis.columnManager.addColumn(definition, before, column)\r\n\t\t\t.then((column) => {\r\n\t\t\t\tresolve(column.getComponent());\r\n\t\t\t}).catch((err) => {\r\n\t\t\t\treject(err);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tdeleteColumn(field){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tvar column = this.columnManager.findColumn(field);\r\n\r\n\t\t\tif(column){\r\n\t\t\t\tcolumn.delete()\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\treject(err);\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Column Delete Error - No matching column found:\", field);\r\n\t\t\t\treject();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tupdateColumnDefinition(field, definition){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tvar column = this.columnManager.findColumn(field);\r\n\r\n\t\t\tif(column){\r\n\t\t\t\tcolumn.updateDefinition(definition)\r\n\t\t\t\t.then((col) => {\r\n\t\t\t\t\tresolve(col);\r\n\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\treject(err);\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Column Update Error - No matching column found:\", field);\r\n\t\t\t\treject();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tmoveColumn(from, to, after){\r\n\t\tvar fromColumn = this.columnManager.findColumn(from);\r\n\t\tvar toColumn = this.columnManager.findColumn(to);\r\n\r\n\t\tif(fromColumn){\r\n\t\t\tif(toColumn){\r\n\t\t\t\tthis.columnManager.moveColumn(fromColumn, toColumn, after)\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Move Error - No matching column found:\", toColumn);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Move Error - No matching column found:\", from);\r\n\t\t}\r\n\t}\r\n\r\n\t//scroll to column in DOM\r\n\tscrollToColumn(field, position, ifVisible){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tvar column = this.columnManager.findColumn(field);\r\n\r\n\t\t\tif(column){\r\n\t\t\t\tthis.columnManager.scrollToColumn(column, position, ifVisible)\r\n\t\t\t\t.then(()=>{\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err)=>{\r\n\t\t\t\t\treject(err);\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Scroll Error - No matching column found:\", field);\r\n\t\t\t\treject(\"Scroll Error - No matching column found\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//////////// Localization Functions  ////////////\r\n\tsetLocale(locale){\r\n\t\tthis.modules.localize.setLocale(locale);\r\n\t}\r\n\r\n\tgetLocale(){\r\n\t\treturn this.modules.localize.getLocale();\r\n\t}\r\n\r\n\tgetLang(locale){\r\n\t\treturn this.modules.localize.getLang(locale);\r\n\t}\r\n\r\n\t//////////// General Public Functions ////////////\r\n\t//redraw list without updating data\r\n\tredraw(force){\r\n\t\tthis.columnManager.redraw(force);\r\n\t\tthis.rowManager.redraw(force);\r\n\t}\r\n\r\n\tsetHeight(height){\r\n\r\n\t\tif(this.rowManager.renderMode !== \"classic\"){\r\n\t\t\tthis.options.height = isNaN(height) ? height : height + \"px\";\r\n\t\t\tthis.element.style.height = this.options.height;\r\n\t\t\tthis.rowManager.setRenderMode();\r\n\t\t\tthis.rowManager.redraw();\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"setHeight function is not available in classic render mode\");\r\n\t\t}\r\n\t}\r\n\r\n\t///////////////////// Sorting ////////////////////\r\n\tsetSort(sortList, dir){\r\n\t\tif(this.modExists(\"sort\", true)){\r\n\t\t\tthis.modules.sort.setSort(sortList, dir);\r\n\t\t\tthis.rowManager.sorterRefresh();\r\n\t\t}\r\n\t}\r\n\r\n\tgetSorters(){\r\n\t\tif(this.modExists(\"sort\", true)){\r\n\t\t\treturn this.modules.sort.getSort();\r\n\t\t}\r\n\t}\r\n\r\n\tclearSort(){\r\n\t\tif(this.modExists(\"sort\", true)){\r\n\t\t\tthis.modules.sort.clear();\r\n\t\t\tthis.rowManager.sorterRefresh();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t///////////////////// Filtering ////////////////////\r\n\r\n\t//set standard filters\r\n\tsetFilter(field, type, value, params){\r\n\t\tif(this.modExists(\"filter\", true)){\r\n\t\t\tthis.modules.filter.setFilter(field, type, value, params);\r\n\t\t\tthis.rowManager.filterRefresh();\r\n\t\t}\r\n\t}\r\n\r\n\t//set standard filters\r\n\trefreshFilter(){\r\n\t\tif(this.modExists(\"filter\", true)){\r\n\t\t\tthis.rowManager.filterRefresh();\r\n\t\t}\r\n\t}\r\n\r\n\t//add filter to array\r\n\taddFilter(field, type, value, params){\r\n\t\tif(this.modExists(\"filter\", true)){\r\n\t\t\tthis.modules.filter.addFilter(field, type, value, params);\r\n\t\t\tthis.rowManager.filterRefresh();\r\n\t\t}\r\n\t}\r\n\r\n\t//get all filters\r\n\tgetFilters(all){\r\n\t\tif(this.modExists(\"filter\", true)){\r\n\t\t\treturn this.modules.filter.getFilters(all);\r\n\t\t}\r\n\t}\r\n\r\n\tsetHeaderFilterFocus(field){\r\n\t\tif(this.modExists(\"filter\", true)){\r\n\t\t\tvar column = this.columnManager.findColumn(field);\r\n\r\n\t\t\tif(column){\r\n\t\t\t\tthis.modules.filter.setHeaderFilterFocus(column);\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Column Filter Focus Error - No matching column found:\", field);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetHeaderFilterValue(field) {\r\n\t\tif(this.modExists(\"filter\", true)){\r\n\t\t\tvar column = this.columnManager.findColumn(field);\r\n\r\n\t\t\tif(column){\r\n\t\t\t\treturn this.modules.filter.getHeaderFilterValue(column);\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", field);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsetHeaderFilterValue(field, value){\r\n\t\tif(this.modExists(\"filter\", true)){\r\n\t\t\tvar column = this.columnManager.findColumn(field);\r\n\r\n\t\t\tif(column){\r\n\t\t\t\tthis.modules.filter.setHeaderFilterValue(column, value);\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", field);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetHeaderFilters(){\r\n\t\tif(this.modExists(\"filter\", true)){\r\n\t\t\treturn this.modules.filter.getHeaderFilters();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t//remove filter from array\r\n\tremoveFilter(field, type, value){\r\n\t\tif(this.modExists(\"filter\", true)){\r\n\t\t\tthis.modules.filter.removeFilter(field, type, value);\r\n\t\t\tthis.rowManager.filterRefresh();\r\n\t\t}\r\n\t}\r\n\r\n\t//clear filters\r\n\tclearFilter(all){\r\n\t\tif(this.modExists(\"filter\", true)){\r\n\t\t\tthis.modules.filter.clearFilter(all);\r\n\t\t\tthis.rowManager.filterRefresh();\r\n\t\t}\r\n\t}\r\n\r\n\t//clear header filters\r\n\tclearHeaderFilter(){\r\n\t\tif(this.modExists(\"filter\", true)){\r\n\t\t\tthis.modules.filter.clearHeaderFilter();\r\n\t\t\tthis.rowManager.filterRefresh();\r\n\t\t}\r\n\t}\r\n\r\n\t///////////////////// select ////////////////////\r\n\tselectRow(rows){\r\n\t\tif(this.modExists(\"selectRow\", true)){\r\n\t\t\tif(rows === true){\r\n\t\t\t\tconsole.warn(\"passing a boolean to the selectRowselectRow function is deprecated, you should now pass the string 'active'\");\r\n\t\t\t\trows = \"active\";\r\n\t\t\t}\r\n\t\t\tthis.modules.selectRow.selectRows(rows);\r\n\t\t}\r\n\t}\r\n\r\n\tdeselectRow(rows){\r\n\t\tif(this.modExists(\"selectRow\", true)){\r\n\t\t\tthis.modules.selectRow.deselectRows(rows);\r\n\t\t}\r\n\t}\r\n\r\n\ttoggleSelectRow(row){\r\n\t\tif(this.modExists(\"selectRow\", true)){\r\n\t\t\tthis.modules.selectRow.toggleRow(row);\r\n\t\t}\r\n\t}\r\n\r\n\tgetSelectedRows(){\r\n\t\tif(this.modExists(\"selectRow\", true)){\r\n\t\t\treturn this.modules.selectRow.getSelectedRows();\r\n\t\t}\r\n\t}\r\n\r\n\tgetSelectedData(){\r\n\t\tif(this.modExists(\"selectRow\", true)){\r\n\t\t\treturn this.modules.selectRow.getSelectedData();\r\n\t\t}\r\n\t}\r\n\r\n\t///////////////////// validation  ////////////////////\r\n\tgetInvalidCells(){\r\n\t\tif(this.modExists(\"validate\", true)){\r\n\t\t\treturn this.modules.validate.getInvalidCells();\r\n\t\t}\r\n\t}\r\n\r\n\tclearCellValidation(cells){\r\n\r\n\t\tif(this.modExists(\"validate\", true)){\r\n\r\n\t\t\tif(!cells){\r\n\t\t\t\tcells = this.modules.validate.getInvalidCells();\r\n\t\t\t}\r\n\r\n\t\t\tif(!Array.isArray(cells)){\r\n\t\t\t\tcells = [cells];\r\n\t\t\t}\r\n\r\n\t\t\tcells.forEach((cell) => {\r\n\t\t\t\tthis.modules.validate.clearValidation(cell._getSelf());\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tvalidate(cells){\r\n\t\tvar output = [];\r\n\r\n\t\t//clear row data\r\n\t\tthis.rowManager.rows.forEach(function(row){\r\n\t\t\tvar valid = row.validate();\r\n\r\n\t\t\tif(valid !== true){\r\n\t\t\t\toutput = output.concat(valid);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output.length ? output : true;\r\n\t}\r\n\r\n\t//////////// Pagination Functions  ////////////\r\n\tsetMaxPage(max){\r\n\t\tif(this.options.pagination && this.modExists(\"page\")){\r\n\t\t\tthis.modules.page.setMaxPage(max);\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tsetPage(page){\r\n\t\tif(this.options.pagination && this.modExists(\"page\")){\r\n\t\t\treturn this.modules.page.setPage(page);\r\n\t\t}else{\r\n\t\t\treturn new Promise((resolve, reject) => { reject() });\r\n\t\t}\r\n\t}\r\n\r\n\tsetPageToRow(row){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif(this.options.pagination && this.modExists(\"page\")){\r\n\t\t\t\trow = this.rowManager.findRow(row);\r\n\r\n\t\t\t\tif(row){\r\n\t\t\t\t\tthis.modules.page.setPageToRow(row)\r\n\t\t\t\t\t.then(()=>{\r\n\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(()=>{\r\n\t\t\t\t\t\treject();\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\treject();\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\treject();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tsetPageSize(size){\r\n\t\tif(this.options.pagination && this.modExists(\"page\")){\r\n\t\t\tthis.modules.page.setPageSize(size);\r\n\t\t\tthis.modules.page.setPage(1).then(()=>{}).catch(()=>{});\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tgetPageSize(){\r\n\t\tif(this.options.pagination && this.modExists(\"page\", true)){\r\n\t\t\treturn this.modules.page.getPageSize();\r\n\t\t}\r\n\t}\r\n\r\n\tpreviousPage(){\r\n\t\tif(this.options.pagination && this.modExists(\"page\")){\r\n\t\t\tthis.modules.page.previousPage();\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tnextPage(){\r\n\t\tif(this.options.pagination && this.modExists(\"page\")){\r\n\t\t\tthis.modules.page.nextPage();\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tgetPage(){\r\n\t\tif(this.options.pagination && this.modExists(\"page\")){\r\n\t\t\treturn this.modules.page.getPage();\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tgetPageMax(){\r\n\t\tif(this.options.pagination && this.modExists(\"page\")){\r\n\t\t\treturn this.modules.page.getPageMax();\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t///////////////// Grouping Functions ///////////////\r\n\tsetGroupBy(groups){\r\n\t\tif(this.modExists(\"groupRows\", true)){\r\n\t\t\tthis.options.groupBy = groups;\r\n\t\t\tthis.modules.groupRows.initialize();\r\n\t\t\tthis.rowManager.refreshActiveData(\"display\");\r\n\r\n\t\t\tif(this.options.persistence && this.modExists(\"persistence\", true) && this.modules.persistence.config.group){\r\n\t\t\t\tthis.modules.persistence.save(\"group\");\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tsetGroupValues(groupValues){\r\n\t\tif(this.modExists(\"groupRows\", true)){\r\n\t\t\tthis.options.groupValues = groupValues;\r\n\t\t\tthis.modules.groupRows.initialize();\r\n\t\t\tthis.rowManager.refreshActiveData(\"display\");\r\n\r\n\t\t\tif(this.options.persistence && this.modExists(\"persistence\", true) && this.modules.persistence.config.group){\r\n\t\t\t\tthis.modules.persistence.save(\"group\");\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tsetGroupStartOpen(values){\r\n\t\tif(this.modExists(\"groupRows\", true)){\r\n\t\t\tthis.options.groupStartOpen = values;\r\n\t\t\tthis.modules.groupRows.initialize();\r\n\t\t\tif(this.options.groupBy){\r\n\t\t\t\tthis.rowManager.refreshActiveData(\"group\");\r\n\r\n\t\t\t\tif(this.options.persistence && this.modExists(\"persistence\", true) && this.modules.persistence.config.group){\r\n\t\t\t\t\tthis.modules.persistence.save(\"group\");\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Grouping Update - cant refresh view, no groups have been set\");\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tsetGroupHeader(values){\r\n\t\tif(this.modExists(\"groupRows\", true)){\r\n\t\t\tthis.options.groupHeader = values;\r\n\t\t\tthis.modules.groupRows.initialize();\r\n\t\t\tif(this.options.groupBy){\r\n\t\t\t\tthis.rowManager.refreshActiveData(\"group\");\r\n\r\n\t\t\t\tif(this.options.persistence && this.modExists(\"persistence\", true) && this.modules.persistence.config.group){\r\n\t\t\t\t\tthis.modules.persistence.save(\"group\");\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Grouping Update - cant refresh view, no groups have been set\");\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tgetGroups(values){\r\n\t\tif(this.modExists(\"groupRows\", true)){\r\n\t\t\treturn this.modules.groupRows.getGroups(true);\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t// get grouped table data in the same format as getData()\r\n\tgetGroupedData(){\r\n\t\tif (this.modExists(\"groupRows\", true)){\r\n\t\t\treturn this.options.groupBy ?\r\n\t\t\tthis.modules.groupRows.getGroupedData() : this.getData()\r\n\t\t}\r\n\t}\r\n\r\n\tgetEditedCells(){\r\n\t\tif(this.modExists(\"edit\", true)){\r\n\t\t\treturn this.modules.edit.getEditedCells();\r\n\t\t}\r\n\t}\r\n\r\n\tclearCellEdited(cells){\r\n\t\tif(this.modExists(\"edit\", true)){\r\n\r\n\t\t\tif(!cells){\r\n\t\t\t\tcells = this.modules.edit.getEditedCells();\r\n\t\t\t}\r\n\r\n\t\t\tif(!Array.isArray(cells)){\r\n\t\t\t\tcells = [cells];\r\n\t\t\t}\r\n\r\n\t\t\tcells.forEach((cell) => {\r\n\t\t\t\tthis.modules.edit.clearEdited(cell._getSelf());\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t///////////////// Column Calculation Functions ///////////////\r\n\tgetCalcResults(){\r\n\t\tif(this.modExists(\"columnCalcs\", true)){\r\n\t\t\treturn this.modules.columnCalcs.getResults();\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\trecalc(){\r\n\t\tif(this.modExists(\"columnCalcs\", true)){\r\n\t\t\tthis.modules.columnCalcs.recalcAll(this.rowManager.activeRows);\r\n\t\t}\r\n\t}\r\n\r\n\t/////////////// Navigation Management //////////////\r\n\tnavigatePrev(){\r\n\t\tvar cell = false;\r\n\r\n\t\tif(this.modExists(\"edit\", true)){\r\n\t\t\tcell = this.modules.edit.currentCell;\r\n\r\n\t\t\tif(cell){\r\n\t\t\t\treturn cell.nav().prev();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tnavigateNext(){\r\n\t\tvar cell = false;\r\n\r\n\t\tif(this.modExists(\"edit\", true)){\r\n\t\t\tcell = this.modules.edit.currentCell;\r\n\r\n\t\t\tif(cell){\r\n\t\t\t\treturn cell.nav().next();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tnavigateLeft(){\r\n\t\tvar cell = false;\r\n\r\n\t\tif(this.modExists(\"edit\", true)){\r\n\t\t\tcell = this.modules.edit.currentCell;\r\n\r\n\t\t\tif(cell){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\treturn cell.nav().left();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tnavigateRight(){\r\n\t\tvar cell = false;\r\n\r\n\t\tif(this.modExists(\"edit\", true)){\r\n\t\t\tcell = this.modules.edit.currentCell;\r\n\r\n\t\t\tif(cell){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\treturn cell.nav().right();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tnavigateUp(){\r\n\t\tvar cell = false;\r\n\r\n\t\tif(this.modExists(\"edit\", true)){\r\n\t\t\tcell = this.modules.edit.currentCell;\r\n\r\n\t\t\tif(cell){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\treturn cell.nav().up();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tnavigateDown(){\r\n\t\tvar cell = false;\r\n\r\n\t\tif(this.modExists(\"edit\", true)){\r\n\t\t\tcell = this.modules.edit.currentCell;\r\n\r\n\t\t\tif(cell){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\treturn cell.nav().down();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\t/////////////// History Management //////////////\r\n\tundo(){\r\n\t\tif(this.options.history && this.modExists(\"history\", true)){\r\n\t\t\treturn this.modules.history.undo();\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tredo(){\r\n\t\tif(this.options.history && this.modExists(\"history\", true)){\r\n\t\t\treturn this.modules.history.redo();\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tgetHistoryUndoSize(){\r\n\t\tif(this.options.history && this.modExists(\"history\", true)){\r\n\t\t\treturn this.modules.history.getHistoryUndoSize();\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tgetHistoryRedoSize(){\r\n\t\tif(this.options.history && this.modExists(\"history\", true)){\r\n\t\t\treturn this.modules.history.getHistoryRedoSize();\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tclearHistory(){\r\n\t\tif(this.options.history && this.modExists(\"history\", true)){\r\n\t\t\treturn this.modules.history.clear();\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t/////////////// Download Management //////////////\r\n\tdownload(type, filename, options, active){\r\n\t\tif(this.modExists(\"download\", true)){\r\n\t\t\tthis.modules.download.download(type, filename, options, active);\r\n\t\t}\r\n\t}\r\n\r\n\tdownloadToTab(type, filename, options, active){\r\n\t\tif(this.modExists(\"download\", true)){\r\n\t\t\tthis.modules.download.download(type, filename, options, active, true);\r\n\t\t}\r\n\t}\r\n\r\n\t/////////// Inter Table Communications ///////////\r\n\ttableComms(table, module, action, data){\r\n\t\tthis.modules.comms.receive(table, module, action, data);\r\n\t}\r\n\r\n\t////////////// Extension Management //////////////\r\n\tmodExists(plugin, required){\r\n\t\tif(this.modules[plugin]){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\tif(required){\r\n\t\t\t\tconsole.error(\"Tabulator Module Not Installed: \" + plugin);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n//default setup options\r\nTabulator.defaultOptions = defaultOptions;\r\n\r\n//bind modules and static functionality\r\nnew ModuleBinder(Tabulator);\r\n\r\nexport default Tabulator;","export default {}","import Module from '../../core/Module.js';\r\nimport Helpers from '../../core/Helpers.js';\r\n\r\nimport defautlAccessors from './defaults/accessors.js';\r\n\r\nclass Accessor extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.allowedTypes = [\"\", \"data\", \"download\", \"clipboard\", \"print\", \"htmlOutput\"] //list of accessor types\r\n\t}\r\n\r\n\t//initialize column accessor\r\n\tinitializeColumn(column){\r\n\t\tvar match = false,\r\n\t\tconfig = {};\r\n\r\n\t\tthis.allowedTypes.forEach(function(type){\r\n\t\t\tvar key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1)),\r\n\t\t\taccessor;\r\n\r\n\t\t\tif(column.definition[key]){\r\n\t\t\t\taccessor = this.lookupAccessor(column.definition[key]);\r\n\r\n\t\t\t\tif(accessor){\r\n\t\t\t\t\tmatch = true;\r\n\r\n\t\t\t\t\tconfig[key] = {\r\n\t\t\t\t\t\taccessor:accessor,\r\n\t\t\t\t\t\tparams: column.definition[key + \"Params\"] || {},\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(match){\r\n\t\t\tcolumn.modules.accessor = config;\r\n\t\t}\r\n\t}\r\n\r\n\tlookupAccessor(value){\r\n\t\tvar accessor = false;\r\n\r\n\t\t//set column accessor\r\n\t\tswitch(typeof value){\r\n\t\t\tcase \"string\":\r\n\t\t\tif(Accessor.accessors[value]){\r\n\t\t\t\taccessor = Accessor.accessors[value]\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Accessor Error - No such accessor found, ignoring: \", value);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\taccessor = value;\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn accessor;\r\n\t}\r\n\r\n\t//apply accessor to row\r\n\ttransformRow(row, type){\r\n\t\tvar key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1)),\r\n\t\trowComponent = row.getComponent();\r\n\r\n\t\t//clone data object with deep copy to isolate internal data from returned result\r\n\t\tvar data = Helpers.deepClone(row.data || {});\r\n\r\n\t\tthis.table.columnManager.traverse(function(column){\r\n\t\t\tvar value, accessor, params, colCompnent;\r\n\r\n\t\t\tif(column.modules.accessor){\r\n\r\n\t\t\t\taccessor = column.modules.accessor[key] || column.modules.accessor.accessor || false;\r\n\r\n\t\t\t\tif(accessor){\r\n\t\t\t\t\tvalue = column.getFieldValue(data);\r\n\r\n\t\t\t\t\tif(value != \"undefined\"){\r\n\t\t\t\t\t\tcolCompnent = column.getComponent();\r\n\t\t\t\t\t\tparams = typeof accessor.params === \"function\" ? accessor.params(value, data, type, colCompnent, rowComponent) : accessor.params;\r\n\t\t\t\t\t\tcolumn.setFieldValue(data, accessor.accessor(value, data, type, params, colCompnent, rowComponent));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn data;\r\n\t}\r\n}\r\n\r\n//load defaults\r\nAccessor.moduleName = \"accessor\";\r\nAccessor.accessors = defautlAccessors;\r\n\r\nexport default Accessor;","export default {\r\n\tmethod: \"GET\",\r\n};","export default function(url, config, params){\r\n\tif(url){\r\n\t\tif(params && Object.keys(params).length){\r\n\t\t\tif(!config.method || config.method.toLowerCase() == \"get\"){\r\n\t\t\t\tconfig.method = \"get\";\r\n\r\n\t\t\t\turl += (url.includes(\"?\") ? \"&\" : \"?\") + this.modules.ajax.serializeParams(params);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn url;\r\n};","export default function(url, config, params){\r\n\tvar contentType;\r\n\r\n\treturn new Promise((resolve, reject) => {\r\n\t\t//set url\r\n\t\turl = this.urlGenerator.call(this.table, url, config, params);\r\n\r\n\t\t//set body content if not GET request\r\n\t\tif(config.method.toUpperCase() != \"GET\"){\r\n\t\t\tcontentType = typeof this.table.options.ajaxContentType === \"object\" ?  this.table.options.ajaxContentType : this.contentTypeFormatters[this.table.options.ajaxContentType];\r\n\t\t\tif(contentType){\r\n\r\n\t\t\t\tfor(var key in contentType.headers){\r\n\t\t\t\t\tif(!config.headers){\r\n\t\t\t\t\t\tconfig.headers = {};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(typeof config.headers[key] === \"undefined\"){\r\n\t\t\t\t\t\tconfig.headers[key] = contentType.headers[key];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconfig.body = contentType.body.call(this, url, config, params);\r\n\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Ajax Error - Invalid ajaxContentType value:\", this.table.options.ajaxContentType);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(url){\r\n\t\t\t//configure headers\r\n\t\t\tif(typeof config.headers === \"undefined\"){\r\n\t\t\t\tconfig.headers = {};\r\n\t\t\t}\r\n\r\n\t\t\tif(typeof config.headers.Accept === \"undefined\"){\r\n\t\t\t\tconfig.headers.Accept = \"application/json\";\r\n\t\t\t}\r\n\r\n\t\t\tif(typeof config.headers[\"X-Requested-With\"] === \"undefined\"){\r\n\t\t\t\tconfig.headers[\"X-Requested-With\"] = \"XMLHttpRequest\";\r\n\t\t\t}\r\n\r\n\t\t\tif(typeof config.mode === \"undefined\"){\r\n\t\t\t\tconfig.mode = \"cors\";\r\n\t\t\t}\r\n\r\n\t\t\tif(config.mode == \"cors\"){\r\n\r\n\t\t\t\tif(typeof config.headers[\"Access-Control-Allow-Origin\"] === \"undefined\"){\r\n\t\t\t\t\tconfig.headers[\"Access-Control-Allow-Origin\"] = window.location.origin;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(typeof config.credentials === \"undefined\"){\r\n\t\t\t\t\tconfig.credentials = 'same-origin';\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(typeof config.credentials === \"undefined\"){\r\n\t\t\t\t\tconfig.credentials = 'include';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//send request\r\n\t\t\tfetch(url, config)\r\n\t\t\t.then((response)=>{\r\n\t\t\t\tif(response.ok) {\r\n\t\t\t\t\tresponse.json()\r\n\t\t\t\t\t.then((data)=>{\r\n\t\t\t\t\t\tresolve(data);\r\n\t\t\t\t\t}).catch((error)=>{\r\n\t\t\t\t\t\treject(error);\r\n\t\t\t\t\t\tconsole.warn(\"Ajax Load Error - Invalid JSON returned\", error);\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.error(\"Ajax Load Error - Connection Error: \" + response.status, response.statusText);\r\n\t\t\t\t\treject(response);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((error)=>{\r\n\t\t\t\tconsole.error(\"Ajax Load Error - Connection Error: \", error);\r\n\t\t\t\treject(error);\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Ajax Load Error - No URL Set\");\r\n\t\t\tresolve([]);\r\n\t\t}\r\n\t});\r\n};","export default {\r\n\t\"json\":{\r\n\t\theaders:{\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t},\r\n\t\tbody:function(url, config, params){\r\n\t\t\treturn JSON.stringify(params);\r\n\t\t},\r\n\t},\r\n\t\"form\":{\r\n\t\theaders:{\r\n\t\t},\r\n\t\tbody:function(url, config, params){\r\n\t\t\tvar output = this.generateParamsList(params),\r\n\t\t\tform = new FormData();\r\n\r\n\t\t\toutput.forEach(function(item){\r\n\t\t\t\tform.append(item.key, item.value);\r\n\t\t\t});\r\n\r\n\t\t\treturn form;\r\n\t\t},\r\n\t},\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport defaultConfig from './defaults/config.js';\r\nimport defaultURLGenerator from './defaults/urlGenerator.js';\r\nimport defaultLoaderPromise from './defaults/loaderPromise.js';\r\nimport defaultContentTypeFormatters from './defaults/contentTypeFormatters.js';\r\n\r\nclass Ajax extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.config = false; //hold config object for ajax request\r\n\t\tthis.url = \"\"; //request URL\r\n\t\tthis.urlGenerator = false;\r\n\t\tthis.params = false; //request parameters\r\n\r\n\t\tthis.loaderElement = this.createLoaderElement(); //loader message div\r\n\t\tthis.msgElement = this.createMsgElement(); //message element\r\n\t\tthis.loadingElement = false;\r\n\t\tthis.errorElement = false;\r\n\t\tthis.loaderPromise = false;\r\n\r\n\t\tthis.progressiveLoad = false;\r\n\t\tthis.loading = false;\r\n\r\n\t\tthis.requestOrder = 0; //prevent requests comming out of sequence if overridden by another load request\r\n\t}\r\n\r\n\t//initialize setup options\r\n\tinitialize(){\r\n\t\tvar template;\r\n\r\n\t\tthis.loaderElement.appendChild(this.msgElement);\r\n\r\n\t\tif(this.table.options.ajaxLoaderLoading){\r\n\t\t\tif(typeof this.table.options.ajaxLoaderLoading == \"string\"){\r\n\t\t\t\ttemplate = document.createElement('template');\r\n\t\t\t\ttemplate.innerHTML = this.table.options.ajaxLoaderLoading.trim();\r\n\t\t\t\tthis.loadingElement = template.content.firstChild;\r\n\t\t\t}else{\r\n\t\t\t\tthis.loadingElement = this.table.options.ajaxLoaderLoading;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.loaderPromise = this.table.options.ajaxRequestFunc || Ajax.defaultLoaderPromise;\r\n\r\n\t\tthis.urlGenerator = this.table.options.ajaxURLGenerator || Ajax.defaultURLGenerator;\r\n\r\n\t\tif(this.table.options.ajaxLoaderError){\r\n\t\t\tif(typeof this.table.options.ajaxLoaderError == \"string\"){\r\n\t\t\t\ttemplate = document.createElement('template');\r\n\t\t\t\ttemplate.innerHTML = this.table.options.ajaxLoaderError.trim();\r\n\t\t\t\tthis.errorElement = template.content.firstChild;\r\n\t\t\t}else{\r\n\t\t\t\tthis.errorElement = this.table.options.ajaxLoaderError;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.table.options.ajaxParams){\r\n\t\t\tthis.setParams(this.table.options.ajaxParams);\r\n\t\t}\r\n\r\n\t\tif(this.table.options.ajaxConfig){\r\n\t\t\tthis.setConfig(this.table.options.ajaxConfig);\r\n\t\t}\r\n\r\n\t\tif(this.table.options.ajaxURL){\r\n\t\t\tthis.setUrl(this.table.options.ajaxURL);\r\n\t\t}\r\n\r\n\t\tif(this.table.options.ajaxProgressiveLoad){\r\n\t\t\tif(this.table.options.pagination){\r\n\t\t\t\tthis.progressiveLoad = false;\r\n\t\t\t\tconsole.error(\"Progressive Load Error - Pagination and progressive load cannot be used at the same time\");\r\n\t\t\t}else{\r\n\t\t\t\tif(this.table.modExists(\"page\")){\r\n\t\t\t\t\tthis.progressiveLoad = this.table.options.ajaxProgressiveLoad;\r\n\t\t\t\t\tthis.table.modules.page.initializeProgressive(this.progressiveLoad);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.error(\"Pagination plugin is required for progressive ajax loading\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcreateLoaderElement(){\r\n\t\tvar el = document.createElement(\"div\");\r\n\t\tel.classList.add(\"tabulator-loader\");\r\n\t\treturn el;\r\n\t}\r\n\r\n\tcreateMsgElement(){\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tel.classList.add(\"tabulator-loader-msg\");\r\n\t\tel.setAttribute(\"role\", \"alert\");\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\t//set ajax params\r\n\tsetParams(params, update){\r\n\t\tif(update){\r\n\t\t\tthis.params = this.params || {};\r\n\r\n\t\t\tfor(let key in params){\r\n\t\t\t\tthis.params[key] = params[key];\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.params = params;\r\n\t\t}\r\n\t}\r\n\r\n\tgetParams(){\r\n\t\treturn this.params || {};\r\n\t}\r\n\r\n\t//load config object\r\n\tsetConfig(config){\r\n\t\tthis._loadDefaultConfig();\r\n\r\n\t\tif(typeof config == \"string\"){\r\n\t\t\tthis.config.method = config;\r\n\t\t}else{\r\n\t\t\tfor(let key in config){\r\n\t\t\t\tthis.config[key] = config[key];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//create config object from default\r\n\t_loadDefaultConfig(force){\r\n\t\tif(!this.config || force){\r\n\r\n\t\t\tthis.config = {};\r\n\r\n\t\t\t//load base config from defaults\r\n\t\t\tfor(let key in Ajax.defaultConfig){\r\n\t\t\t\tthis.config[key] = Ajax.defaultConfig[key];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//set request url\r\n\tsetUrl(url){\r\n\t\tthis.url = url;\r\n\t}\r\n\r\n\t//get request url\r\n\tgetUrl(){\r\n\t\treturn this.url;\r\n\t}\r\n\r\n\t//lstandard loading function\r\n\tloadData(inPosition, columnsChanged){\r\n\t\tif(this.progressiveLoad){\r\n\t\t\treturn this._loadDataProgressive();\r\n\t\t}else{\r\n\t\t\treturn this._loadDataStandard(inPosition, columnsChanged);\r\n\t\t}\r\n\t}\r\n\r\n\tnextPage(diff){\r\n\t\tvar margin;\r\n\r\n\t\tif(!this.loading){\r\n\r\n\t\t\tmargin = this.table.options.ajaxProgressiveLoadScrollMargin || (this.table.rowManager.getElement().clientHeight * 2);\r\n\r\n\t\t\tif(diff < margin){\r\n\t\t\t\tthis.table.modules.page.nextPage()\r\n\t\t\t\t.then(()=>{}).catch(()=>{});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tblockActiveRequest(){\r\n\t\tthis.requestOrder ++;\r\n\t}\r\n\r\n\t_loadDataProgressive(){\r\n\t\tthis.table.rowManager.setData([]);\r\n\t\treturn this.table.modules.page.setPage(1);\r\n\t}\r\n\r\n\t_loadDataStandard(inPosition, columnsChanged){\r\n\t\treturn new Promise((resolve, reject)=>{\r\n\t\t\tthis.sendRequest(inPosition)\r\n\t\t\t.then((data)=>{\r\n\t\t\t\tthis.table.rowManager.setData(data, inPosition, columnsChanged)\r\n\t\t\t\t.then(()=>{\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t})\r\n\t\t\t\t.catch((e)=>{\r\n\t\t\t\t\treject(e)\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.catch((e)=>{\r\n\t\t\t\treject(e)\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tgenerateParamsList(data, prefix){\r\n\t\tvar output = [];\r\n\r\n\t\tprefix = prefix || \"\";\r\n\r\n\t\tif(Array.isArray(data)){\r\n\t\t\tdata.forEach((item, i) => {\r\n\t\t\t\toutput = output.concat(this.generateParamsList(item, prefix ? prefix + \"[\" + i + \"]\" : i));\r\n\t\t\t});\r\n\t\t}else if (typeof data === \"object\"){\r\n\t\t\tfor (var key in data){\r\n\t\t\t\toutput = output.concat(this.generateParamsList(data[key], prefix ? prefix + \"[\" + key + \"]\" : key));\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\toutput.push({key:prefix, value:data});\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tserializeParams(params){\r\n\t\tvar output = this.generateParamsList(params),\r\n\t\tencoded = [];\r\n\r\n\t\toutput.forEach(function(item){\r\n\t\t\tencoded.push(encodeURIComponent(item.key) + \"=\" + encodeURIComponent(item.value));\r\n\t\t});\r\n\r\n\t\treturn encoded.join(\"&\");\r\n\t}\r\n\r\n\t//send ajax request\r\n\tsendRequest(silent){\r\n\t\tvar url = this.url,\r\n\t\trequestNo, esc, query;\r\n\r\n\t\tthis.requestOrder ++;\r\n\t\trequestNo = this.requestOrder;\r\n\r\n\t\tthis._loadDefaultConfig();\r\n\r\n\t\treturn new Promise((resolve, reject)=>{\r\n\t\t\tif(this.table.options.ajaxRequesting.call(this.table, this.url, this.params) !== false){\r\n\r\n\t\t\t\tthis.loading = true;\r\n\r\n\t\t\t\tif(!silent){\r\n\t\t\t\t\tthis.showLoader();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.loaderPromise(url, this.config, this.params).then((data)=>{\r\n\t\t\t\t\tif(requestNo === this.requestOrder){\r\n\t\t\t\t\t\tif(this.table.options.ajaxResponse){\r\n\t\t\t\t\t\t\tdata = this.table.options.ajaxResponse.call(this.table, this.url, this.params, data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tresolve(data);\r\n\r\n\t\t\t\t\t\tthis.hideLoader();\r\n\t\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tconsole.warn(\"Ajax Response Blocked - An active ajax request was blocked by an attempt to change table data while the request was being made\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t})\r\n\t\t\t\t.catch((error)=>{\r\n\t\t\t\t\tconsole.error(\"Ajax Load Error: \", error);\r\n\t\t\t\t\tthis.table.options.ajaxError.call(this.table, error);\r\n\r\n\t\t\t\t\tthis.showError();\r\n\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.hideLoader();\r\n\t\t\t\t\t}, 3000);\r\n\r\n\t\t\t\t\tthis.loading = false;\r\n\r\n\t\t\t\t\treject(error);\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\treject();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tshowLoader(){\r\n\t\tvar shouldLoad = typeof this.table.options.ajaxLoader === \"function\" ? this.table.options.ajaxLoader() : this.table.options.ajaxLoader;\r\n\r\n\t\tif(shouldLoad){\r\n\r\n\t\t\tthis.hideLoader();\r\n\r\n\t\t\twhile(this.msgElement.firstChild) this.msgElement.removeChild(this.msgElement.firstChild);\r\n\t\t\tthis.msgElement.classList.remove(\"tabulator-error\");\r\n\t\t\tthis.msgElement.classList.add(\"tabulator-loading\");\r\n\r\n\t\t\tif(this.loadingElement){\r\n\t\t\t\tthis.msgElement.appendChild(this.loadingElement);\r\n\t\t\t}else{\r\n\t\t\t\tthis.msgElement.innerHTML = this.table.modules.localize.getText(\"ajax|loading\");\r\n\t\t\t}\r\n\r\n\t\t\tthis.table.element.appendChild(this.loaderElement);\r\n\t\t}\r\n\t}\r\n\r\n\tshowError(){\r\n\t\tthis.hideLoader();\r\n\r\n\t\twhile(this.msgElement.firstChild) this.msgElement.removeChild(this.msgElement.firstChild);\r\n\t\tthis.msgElement.classList.remove(\"tabulator-loading\");\r\n\t\tthis.msgElement.classList.add(\"tabulator-error\");\r\n\r\n\t\tif(this.errorElement){\r\n\t\t\tthis.msgElement.appendChild(this.errorElement);\r\n\t\t}else{\r\n\t\t\tthis.msgElement.innerHTML = this.table.modules.localize.getText(\"ajax|error\");\r\n\t\t}\r\n\r\n\t\tthis.table.element.appendChild(this.loaderElement);\r\n\t}\r\n\r\n\thideLoader(){\r\n\t\tif(this.loaderElement.parentNode){\r\n\t\t\tthis.loaderElement.parentNode.removeChild(this.loaderElement);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nAjax.moduleName = \"ajax\";\r\n\r\n//load defaults\r\nAjax.defaultConfig = defaultConfig;\r\nAjax.defaultURLGenerator = defaultURLGenerator;\r\nAjax.defaultLoaderPromise = defaultLoaderPromise;\r\nAjax.contentTypeFormatters = defaultContentTypeFormatters;\r\n\r\nexport default Ajax;","export default {\r\n\treplace:function(rows){\r\n\t\treturn this.table.setData(rows);\r\n\t},\r\n\tupdate:function(rows){\r\n\t\treturn this.table.updateOrAddData(rows);\r\n\t},\r\n\tinsert:function(rows){\r\n\t\treturn this.table.addData(rows);\r\n\t},\r\n};","export default {\r\n\ttable:function(clipboard){\r\n\t\tvar data = [],\r\n\t\tsuccess = false,\r\n\t\theaderFindSuccess = true,\r\n\t\tcolumns = this.table.columnManager.columns,\r\n\t\tcolumnMap = [],\r\n\t\trows = [];\r\n\r\n\t\t//get data from clipboard into array of columns and rows.\r\n\t\tclipboard = clipboard.split(\"\\n\");\r\n\r\n\t\tclipboard.forEach(function(row){\r\n\t\t\tdata.push(row.split(\"\\t\"));\r\n\t\t});\r\n\r\n\t\tif(data.length && !(data.length === 1 && data[0].length < 2)){\r\n\t\t\tsuccess = true;\r\n\r\n\t\t\t//check if headers are present by title\r\n\t\t\tdata[0].forEach(function(value){\r\n\t\t\t\tvar column = columns.find(function(column){\r\n\t\t\t\t\treturn value && column.definition.title && value.trim() && column.definition.title.trim() === value.trim();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(column){\r\n\t\t\t\t\tcolumnMap.push(column);\r\n\t\t\t\t}else{\r\n\t\t\t\t\theaderFindSuccess = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t//check if column headers are present by field\r\n\t\t\tif(!headerFindSuccess){\r\n\t\t\t\theaderFindSuccess = true;\r\n\t\t\t\tcolumnMap = [];\r\n\r\n\t\t\t\tdata[0].forEach(function(value){\r\n\t\t\t\t\tvar column = columns.find(function(column){\r\n\t\t\t\t\t\treturn value && column.field && value.trim() && column.field.trim() === value.trim();\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif(column){\r\n\t\t\t\t\t\tcolumnMap.push(column);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\theaderFindSuccess = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(!headerFindSuccess){\r\n\t\t\t\t\tcolumnMap = this.table.columnManager.columnsByIndex;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//remove header row if found\r\n\t\t\tif(headerFindSuccess){\r\n\t\t\t\tdata.shift();\r\n\t\t\t}\r\n\r\n\t\t\tdata.forEach(function(item){\r\n\t\t\t\tvar row = {};\r\n\r\n\t\t\t\titem.forEach(function(value, i){\r\n\t\t\t\t\tif(columnMap[i]){\r\n\t\t\t\t\t\trow[columnMap[i].field] = value;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\trows.push(row);\r\n\t\t\t});\r\n\r\n\t\t\treturn rows;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport defaultPasteActions from './defaults/pasteActions.js';\r\nimport defaultPasteParsers from './defaults/pasteParsers.js';\r\n\r\nclass Clipboard extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.mode = true;\r\n\t\tthis.pasteParser = function(){};\r\n\t\tthis.pasteAction = function(){};\r\n\t\tthis.customSelection = false;\r\n\t\tthis.rowRange = false;\r\n\t\tthis.blocked = true; //block copy actions not originating from this command\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.mode = this.table.options.clipboard;\r\n\r\n\t\tthis.rowRange = this.table.options.clipboardCopyRowRange;\r\n\r\n\t\tif(this.mode === true || this.mode === \"copy\"){\r\n\t\t\tthis.table.element.addEventListener(\"copy\", (e) => {\r\n\t\t\t\tvar plain, html, list;\r\n\r\n\t\t\t\tif(!this.blocked){\r\n\t\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\tif(this.customSelection){\r\n\t\t\t\t\t\tplain = this.customSelection;\r\n\r\n\t\t\t\t\t\tif(this.table.options.clipboardCopyFormatter){\r\n\t\t\t\t\t\t\tplain = this.table.options.clipboardCopyFormatter(\"plain\", plain);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\r\n\t\t\t\t\t\tvar list = this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig, this.table.options.clipboardCopyStyled, this.rowRange, \"clipboard\");\r\n\r\n\t\t\t\t\t\thtml = this.table.modules.export.genereateHTMLTable(list);\r\n\t\t\t\t\t\tplain = html ? this.generatePlainContent(list) : \"\";\r\n\r\n\t\t\t\t\t\tif(this.table.options.clipboardCopyFormatter){\r\n\t\t\t\t\t\t\tplain = this.table.options.clipboardCopyFormatter(\"plain\", plain);\r\n\t\t\t\t\t\t\thtml = this.table.options.clipboardCopyFormatter(\"html\", html);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (window.clipboardData && window.clipboardData.setData) {\r\n\t\t\t\t\t\twindow.clipboardData.setData('Text', plain);\r\n\t\t\t\t\t} else if (e.clipboardData && e.clipboardData.setData) {\r\n\t\t\t\t\t\te.clipboardData.setData('text/plain', plain);\r\n\t\t\t\t\t\tif(html){\r\n\t\t\t\t\t\t\te.clipboardData.setData('text/html', html);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (e.originalEvent && e.originalEvent.clipboardData.setData) {\r\n\t\t\t\t\t\te.originalEvent.clipboardData.setData('text/plain', plain);\r\n\t\t\t\t\t\tif(html){\r\n\t\t\t\t\t\t\te.originalEvent.clipboardData.setData('text/html', html);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.table.options.clipboardCopied.call(this.table, plain, html);\r\n\r\n\t\t\t\t\tthis.reset();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(this.mode === true || this.mode === \"paste\"){\r\n\t\t\tthis.table.element.addEventListener(\"paste\", (e) => {\r\n\t\t\t\tthis.paste(e);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.setPasteParser(this.table.options.clipboardPasteParser);\r\n\t\tthis.setPasteAction(this.table.options.clipboardPasteAction);\r\n\t}\r\n\r\n\treset(){\r\n\t\tthis.blocked = true;\r\n\t\tthis.customSelection = false;\r\n\t}\r\n\r\n\tgeneratePlainContent (list) {\r\n\t\tvar output = [];\r\n\r\n\t\tlist.forEach((row) => {\r\n\t\t\tvar rowData = [];\r\n\r\n\t\t\trow.columns.forEach((col) => {\r\n\t\t\t\tvar value = \"\";\r\n\r\n\t\t\t\tif(col){\r\n\r\n\t\t\t\t\tif(row.type === \"group\"){\r\n\t\t\t\t\t\tcol.value = col.component.getKey();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(col.value === null){\r\n\t\t\t\t\t\tvalue = \"\";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tswitch(typeof col.value){\r\n\t\t\t\t\t\t\tcase \"object\":\r\n\t\t\t\t\t\t\tvalue = JSON.stringify(col.value);\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase \"undefined\":\r\n\t\t\t\t\t\t\tvalue = \"\";\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tvalue = col.value;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\trowData.push(value);\r\n\t\t\t});\r\n\r\n\t\t\toutput.push(rowData.join(\"\\t\"));\r\n\t\t});\r\n\r\n\t\treturn output.join(\"\\n\");\r\n\t}\r\n\r\n\tcopy (range, internal) {\r\n\t\tvar range, sel, textRange;\r\n\t\tthis.blocked = false;\r\n\t\tthis.customSelection = false;\r\n\r\n\t\tif (this.mode === true || this.mode === \"copy\") {\r\n\r\n\t\t\tthis.rowRange = range || this.table.options.clipboardCopyRowRange;\r\n\r\n\t\t\tif (typeof window.getSelection != \"undefined\" && typeof document.createRange != \"undefined\") {\r\n\t\t\t\trange = document.createRange();\r\n\t\t\t\trange.selectNodeContents(this.table.element);\r\n\t\t\t\tsel = window.getSelection();\r\n\r\n\t\t\t\tif (sel.toString() && internal) {\r\n\t\t\t\t\tthis.customSelection = sel.toString();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsel.removeAllRanges();\r\n\t\t\t\tsel.addRange(range);\r\n\t\t\t} else if (typeof document.selection != \"undefined\" && typeof document.body.createTextRange != \"undefined\") {\r\n\t\t\t\ttextRange = document.body.createTextRange();\r\n\t\t\t\ttextRange.moveToElementText(this.table.element);\r\n\t\t\t\ttextRange.select();\r\n\t\t\t}\r\n\r\n\t\t\tdocument.execCommand('copy');\r\n\r\n\t\t\tif (sel) {\r\n\t\t\t\tsel.removeAllRanges();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//PASTE EVENT HANDLING\r\n\tsetPasteAction(action){\r\n\r\n\t\tswitch(typeof action){\r\n\t\t\tcase \"string\":\r\n\t\t\tthis.pasteAction = Clipboard.pasteActions[action];\r\n\r\n\t\t\tif(!this.pasteAction){\r\n\t\t\t\tconsole.warn(\"Clipboard Error - No such paste action found:\", action);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\tthis.pasteAction = action;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tsetPasteParser(parser){\r\n\t\tswitch(typeof parser){\r\n\t\t\tcase \"string\":\r\n\t\t\tthis.pasteParser = Clipboard.pasteParsers[parser];\r\n\r\n\t\t\tif(!this.pasteParser){\r\n\t\t\t\tconsole.warn(\"Clipboard Error - No such paste parser found:\", parser);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\tthis.pasteParser = parser;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tpaste(e){\r\n\t\tvar data, rowData, rows;\r\n\r\n\t\tif(this.checkPaseOrigin(e)){\r\n\r\n\t\t\tdata = this.getPasteData(e);\r\n\r\n\t\t\trowData = this.pasteParser.call(this, data);\r\n\r\n\t\t\tif(rowData){\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tif(this.table.modExists(\"mutator\")){\r\n\t\t\t\t\trowData = this.mutateData(rowData);\r\n\t\t\t\t}\r\n\r\n\t\t\t\trows = this.pasteAction.call(this, rowData);\r\n\t\t\t\tthis.table.options.clipboardPasted.call(this.table, data, rowData, rows);\r\n\t\t\t}else{\r\n\t\t\t\tthis.table.options.clipboardPasteError.call(this.table, data);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tmutateData(data){\r\n\t\tvar output = [];\r\n\r\n\t\tif(Array.isArray(data)){\r\n\t\t\tdata.forEach((row) => {\r\n\t\t\t\toutput.push(this.table.modules.mutator.transformRow(row, \"clipboard\"));\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\toutput = data;\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\r\n\tcheckPaseOrigin(e){\r\n\t\tvar valid = true;\r\n\r\n\t\tif(e.target.tagName != \"DIV\" || this.table.modules.edit.currentCell){\r\n\t\t\tvalid = false;\r\n\t\t}\r\n\r\n\t\treturn valid;\r\n\t}\r\n\r\n\tgetPasteData(e){\r\n\t\tvar data;\r\n\r\n\t\tif (window.clipboardData && window.clipboardData.getData) {\r\n\t\t\tdata = window.clipboardData.getData('Text');\r\n\t\t} else if (e.clipboardData && e.clipboardData.getData) {\r\n\t\t\tdata = e.clipboardData.getData('text/plain');\r\n\t\t} else if (e.originalEvent && e.originalEvent.clipboardData.getData) {\r\n\t\t\tdata = e.originalEvent.clipboardData.getData('text/plain');\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n}\r\n\r\nClipboard.moduleName = \"clipboard\";\r\n\r\n//load defaults\r\nClipboard.pasteActions = defaultPasteActions;\r\nClipboard.pasteParsers = defaultPasteParsers;\r\n\r\nexport default Clipboard;","class CalcComponent{\r\n\tconstructor (row){\r\n\t\tthis._row = row;\r\n\t}\r\n\r\n\tgetData(transform){\r\n\t\treturn this._row.getData(transform);\r\n\t}\r\n\r\n\tgetElement(){\r\n\t\treturn this._row.getElement();\r\n\t}\r\n\r\n\tgetTable(){\r\n\t\treturn this._row.table;\r\n\t}\r\n\r\n\tgetCells(){\r\n\t\tvar cells = [];\r\n\r\n\t\tthis._row.getCells().forEach(function(cell){\r\n\t\t\tcells.push(cell.getComponent());\r\n\t\t});\r\n\r\n\t\treturn cells;\r\n\t}\r\n\r\n\tgetCell(column){\r\n\t\tvar cell = this._row.getCell(column);\r\n\t\treturn cell ? cell.getComponent() : false;\r\n\t}\r\n\r\n\t_getSelf(){\r\n\t\treturn this._row;\r\n\t}\r\n}\r\n\r\nexport default CalcComponent;","export default {\r\n\t\"avg\":function(values, data, calcParams){\r\n\t\tvar output = 0,\r\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : 2\r\n\r\n\t\tif(values.length){\r\n\t\t\toutput = values.reduce(function(sum, value){\r\n\t\t\t\treturn Number(sum) + Number(value);\r\n\t\t\t});\r\n\r\n\t\t\toutput = output / values.length;\r\n\r\n\t\t\toutput = precision !== false ? output.toFixed(precision) : output;\r\n\t\t}\r\n\r\n\t\treturn parseFloat(output).toString();\r\n\t},\r\n\t\"max\":function(values, data, calcParams){\r\n\t\tvar output = null,\r\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\r\n\r\n\t\tvalues.forEach(function(value){\r\n\r\n\t\t\tvalue = Number(value);\r\n\r\n\t\t\tif(value > output || output === null){\r\n\t\t\t\toutput = value;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output !== null ? (precision !== false ? output.toFixed(precision) : output) : \"\";\r\n\t},\r\n\t\"min\":function(values, data, calcParams){\r\n\t\tvar output = null,\r\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\r\n\r\n\t\tvalues.forEach(function(value){\r\n\r\n\t\t\tvalue = Number(value);\r\n\r\n\t\t\tif(value < output || output === null){\r\n\t\t\t\toutput = value;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output !== null ? (precision !== false ? output.toFixed(precision) : output) : \"\";\r\n\t},\r\n\t\"sum\":function(values, data, calcParams){\r\n\t\tvar output = 0,\r\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\r\n\r\n\t\tif(values.length){\r\n\t\t\tvalues.forEach(function(value){\r\n\t\t\t\tvalue = Number(value);\r\n\r\n\t\t\t\toutput += !isNaN(value) ? Number(value) : 0;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn precision !== false ? output.toFixed(precision) : output;\r\n\t},\r\n\t\"concat\":function(values, data, calcParams){\r\n\t\tvar output = 0;\r\n\r\n\t\tif(values.length){\r\n\t\t\toutput = values.reduce(function(sum, value){\r\n\t\t\t\treturn String(sum) + String(value);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t},\r\n\t\"count\":function(values, data, calcParams){\r\n\t\tvar output = 0;\r\n\r\n\t\tif(values.length){\r\n\t\t\tvalues.forEach(function(value){\r\n\t\t\t\tif(value){\r\n\t\t\t\t\toutput ++;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t},\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport CalcComponent from './CalcComponent.js';\r\n\r\nimport Cell from '../../core/cell/Cell.js';\r\nimport Column from '../../core/column/Column.js';\r\nimport Row from '../../core/row/Row.js';\r\n\r\nimport defaultCalculations from './defaults/calculations.js';\r\n\r\nclass ColumnCalcs extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.topCalcs = [];\r\n\t\tthis.botCalcs = [];\r\n\t\tthis.genColumn = false;\r\n\t\tthis.topElement = this.createElement();\r\n\t\tthis.botElement = this.createElement();\r\n\t\tthis.topRow = false;\r\n\t\tthis.botRow = false;\r\n\t\tthis.topInitialized = false;\r\n\t\tthis.botInitialized = false;\r\n\r\n\t\tthis.initialize();\r\n\t}\r\n\r\n\tcreateElement (){\r\n\t\tvar el = document.createElement(\"div\");\r\n\t\tel.classList.add(\"tabulator-calcs-holder\");\r\n\t\treturn el;\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.genColumn = new Column({field:\"value\"}, this);\r\n\t}\r\n\r\n\t//dummy functions to handle being mock column manager\r\n\tregisterColumnField(){};\r\n\r\n\t//initialize column calcs\r\n\tinitializeColumn(column){\r\n\t\tvar def = column.definition\r\n\r\n\t\tvar config = {\r\n\t\t\ttopCalcParams:def.topCalcParams || {},\r\n\t\t\tbotCalcParams:def.bottomCalcParams || {},\r\n\t\t};\r\n\r\n\t\tif(def.topCalc){\r\n\r\n\t\t\tswitch(typeof def.topCalc){\r\n\t\t\t\tcase \"string\":\r\n\t\t\t\tif(ColumnCalcs.calculations[def.topCalc]){\r\n\t\t\t\t\tconfig.topCalc = ColumnCalcs.calculations[def.topCalc]\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.topCalc);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"function\":\r\n\t\t\t\tconfig.topCalc = def.topCalc;\r\n\t\t\t\tbreak\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(config.topCalc){\r\n\t\t\t\tcolumn.modules.columnCalcs = config;\r\n\t\t\t\tthis.topCalcs.push(column);\r\n\r\n\t\t\t\tif(this.table.options.columnCalcs != \"group\"){\r\n\t\t\t\t\tthis.initializeTopRow();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif(def.bottomCalc){\r\n\t\t\tswitch(typeof def.bottomCalc){\r\n\t\t\t\tcase \"string\":\r\n\t\t\t\tif(ColumnCalcs.calculations[def.bottomCalc]){\r\n\t\t\t\t\tconfig.botCalc = ColumnCalcs.calculations[def.bottomCalc]\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.bottomCalc);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"function\":\r\n\t\t\t\tconfig.botCalc = def.bottomCalc;\r\n\t\t\t\tbreak\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(config.botCalc){\r\n\t\t\t\tcolumn.modules.columnCalcs = config;\r\n\t\t\t\tthis.botCalcs.push(column);\r\n\r\n\t\t\t\tif(this.table.options.columnCalcs != \"group\"){\r\n\t\t\t\t\tthis.initializeBottomRow();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tremoveCalcs(){\r\n\t\tvar changed = false;\r\n\r\n\t\tif(this.topInitialized){\r\n\t\t\tthis.topInitialized = false;\r\n\t\t\tthis.topElement.parentNode.removeChild(this.topElement);\r\n\t\t\tchanged = true;\r\n\t\t}\r\n\r\n\t\tif(this.botInitialized){\r\n\t\t\tthis.botInitialized = false;\r\n\t\t\tthis.table.footerManager.remove(this.botElement);\r\n\t\t\tchanged = true;\r\n\t\t}\r\n\r\n\t\tif(changed){\r\n\t\t\tthis.table.rowManager.adjustTableSize();\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeTopRow(){\r\n\t\tif(!this.topInitialized){\r\n\t\t\tthis.table.columnManager.getElement().insertBefore(this.topElement, this.table.columnManager.headersElement.nextSibling);\r\n\t\t\tthis.topInitialized = true;\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeBottomRow(){\r\n\t\tif(!this.botInitialized){\r\n\t\t\tthis.table.footerManager.prepend(this.botElement);\r\n\t\t\tthis.botInitialized = true;\r\n\t\t}\r\n\t}\r\n\r\n\tscrollHorizontal(left){\r\n\t\tif(this.botInitialized && this.botRow){\r\n\t\t\tthis.botRow.getElement().style.marginLeft = (-left) + \"px\";\r\n\t\t}\r\n\t}\r\n\r\n\trecalc(rows){\r\n\t\tvar data, row;\r\n\r\n\t\tif(this.topInitialized || this.botInitialized){\r\n\t\t\tdata = this.rowsToData(rows);\r\n\r\n\t\t\tif(this.topInitialized){\r\n\t\t\t\tif(this.topRow){\r\n\t\t\t\t\tthis.topRow.deleteCells();\r\n\t\t\t\t}\r\n\r\n\t\t\t\trow = this.generateRow(\"top\", this.rowsToData(rows))\r\n\t\t\t\tthis.topRow = row;\r\n\t\t\t\twhile(this.topElement.firstChild) this.topElement.removeChild(this.topElement.firstChild);\r\n\t\t\t\tthis.topElement.appendChild(row.getElement());\r\n\t\t\t\trow.initialize(true);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.botInitialized){\r\n\t\t\t\tif(this.botRow){\r\n\t\t\t\t\tthis.botRow.deleteCells();\r\n\t\t\t\t}\r\n\r\n\t\t\t\trow = this.generateRow(\"bottom\", this.rowsToData(rows))\r\n\t\t\t\tthis.botRow = row;\r\n\t\t\t\twhile(this.botElement.firstChild) this.botElement.removeChild(this.botElement.firstChild);\r\n\t\t\t\tthis.botElement.appendChild(row.getElement());\r\n\t\t\t\trow.initialize(true);\r\n\t\t\t}\r\n\r\n\t\t\tthis.table.rowManager.adjustTableSize();\r\n\r\n\t\t\t//set resizable handles\r\n\t\t\tif(this.table.modExists(\"frozenColumns\")){\r\n\t\t\t\tthis.table.modules.frozenColumns.layout();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\trecalcRowGroup(row){\r\n\t\tthis.recalcGroup(this.table.modules.groupRows.getRowGroup(row));\r\n\t}\r\n\r\n\trecalcAll(){\r\n\t\tif(this.topCalcs.length || this.botCalcs.length){\r\n\t\t\tif(this.table.options.columnCalcs !== \"group\"){\r\n\t\t\t\tthis.recalc(this.table.rowManager.activeRows);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.options.groupBy && this.table.options.columnCalcs !== \"table\"){\r\n\r\n\r\n\t\t\t\tvar groups = table.modules.groupRows.getChildGroups();\r\n\r\n\t\t\t\tgroups.forEach((group) => {\r\n\t\t\t\t\tthis.recalcGroup(group);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\trecalcGroup(group){\r\n\t\tvar data, rowData;\r\n\r\n\t\tif(group){\r\n\t\t\tif(group.calcs){\r\n\t\t\t\tif(group.calcs.bottom){\r\n\t\t\t\t\tdata = this.rowsToData(group.rows);\r\n\t\t\t\t\trowData = this.generateRowData(\"bottom\", data);\r\n\r\n\t\t\t\t\tgroup.calcs.bottom.updateData(rowData);\r\n\t\t\t\t\tgroup.calcs.bottom.reinitialize();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(group.calcs.top){\r\n\t\t\t\t\tdata = this.rowsToData(group.rows);\r\n\t\t\t\t\trowData = this.generateRowData(\"top\", data);\r\n\r\n\t\t\t\t\tgroup.calcs.top.updateData(rowData);\r\n\t\t\t\t\tgroup.calcs.top.reinitialize();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//generate top stats row\r\n\tgenerateTopRow(rows){\r\n\t\treturn this.generateRow(\"top\", this.rowsToData(rows));\r\n\t}\r\n\t//generate bottom stats row\r\n\tgenerateBottomRow(rows){\r\n\t\treturn this.generateRow(\"bottom\", this.rowsToData(rows));\r\n\t}\r\n\r\n\trowsToData(rows){\r\n\t\tvar data = [];\r\n\r\n\t\trows.forEach((row) => {\r\n\t\t\tdata.push(row.getData());\r\n\r\n\t\t\tif(this.table.options.dataTree && this.table.options.dataTreeChildColumnCalcs){\r\n\t\t\t\tif(row.modules.dataTree.open){\r\n\t\t\t\t\tvar children = this.rowsToData(this.table.modules.dataTree.getFilteredTreeChildren(row));\r\n\t\t\t\t\tdata = data.concat(children);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\t//generate stats row\r\n\tgenerateRow(pos, data){\r\n\t\tvar rowData = this.generateRowData(pos, data),\r\n\t\trow;\r\n\r\n\t\tif(this.table.modExists(\"mutator\")){\r\n\t\t\tthis.table.modules.mutator.disable();\r\n\t\t}\r\n\r\n\t\trow = new Row(rowData, this, \"calc\");\r\n\r\n\t\tif(this.table.modExists(\"mutator\")){\r\n\t\t\tthis.table.modules.mutator.enable();\r\n\t\t}\r\n\r\n\t\trow.getElement().classList.add(\"tabulator-calcs\", \"tabulator-calcs-\" + pos);\r\n\r\n\t\trow.component = false;\r\n\r\n\t\trow.getComponent = () => {\r\n\t\t\tif(!this.component){\r\n\t\t\t\tthis.component = new CalcComponent(this);\r\n\t\t\t}\r\n\r\n\t\t\treturn this.component;\r\n\t\t};\r\n\r\n\t\trow.generateCells = () => {\r\n\r\n\t\t\tvar cells = [];\r\n\r\n\t\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\r\n\r\n\t\t\t\t\t//set field name of mock column\r\n\t\t\t\t\tthis.genColumn.setField(column.getField());\r\n\t\t\t\t\tthis.genColumn.hozAlign = column.hozAlign;\r\n\r\n\t\t\t\t\tif(column.definition[pos + \"CalcFormatter\"] && this.table.modExists(\"format\")){\r\n\t\t\t\t\t\tthis.genColumn.modules.format = {\r\n\t\t\t\t\t\t\tformatter: this.table.modules.format.getFormatter(column.definition[pos + \"CalcFormatter\"]),\r\n\t\t\t\t\t\t\tparams: column.definition[pos + \"CalcFormatterParams\"] || {},\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.genColumn.modules.format = {\r\n\t\t\t\t\t\t\tformatter: this.table.modules.format.getFormatter(\"plaintext\"),\r\n\t\t\t\t\t\t\tparams:{}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//ensure css class defintion is replicated to calculation cell\r\n\t\t\t\t\tthis.genColumn.definition.cssClass = column.definition.cssClass;\r\n\r\n\t\t\t\t\t//generate cell and assign to correct column\r\n\t\t\t\t\tvar cell = new Cell(this.genColumn, row);\r\n\t\t\t\t\tcell.getElement();\r\n\t\t\t\t\tcell.column = column;\r\n\t\t\t\t\tcell.setWidth();\r\n\r\n\t\t\t\t\tcolumn.cells.push(cell);\r\n\t\t\t\t\tcells.push(cell);\r\n\r\n\t\t\t\t\tif(!column.visible){\r\n\t\t\t\t\t\tcell.hide();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\tthis.cells = cells;\r\n\t\t};\r\n\r\n\t\treturn row;\r\n\t}\r\n\r\n\t//generate stats row\r\n\tgenerateRowData(pos, data){\r\n\t\tvar rowData = {},\r\n\t\tcalcs = pos == \"top\" ? this.topCalcs : this.botCalcs,\r\n\t\ttype = pos == \"top\" ? \"topCalc\" : \"botCalc\",\r\n\t\tparams, paramKey;\r\n\r\n\t\tcalcs.forEach(function(column){\r\n\t\t\tvar values = [];\r\n\r\n\t\t\tif(column.modules.columnCalcs && column.modules.columnCalcs[type]){\r\n\t\t\t\tdata.forEach(function(item){\r\n\t\t\t\t\tvalues.push(column.getFieldValue(item));\r\n\t\t\t\t});\r\n\r\n\t\t\t\tparamKey = type + \"Params\";\r\n\t\t\t\tparams = typeof column.modules.columnCalcs[paramKey] === \"function\" ? column.modules.columnCalcs[paramKey](values, data) : column.modules.columnCalcs[paramKey];\r\n\r\n\t\t\t\tcolumn.setFieldValue(rowData, column.modules.columnCalcs[type](values, data, params));\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn rowData;\r\n\t}\r\n\r\n\thasTopCalcs(){\r\n\t\treturn\t!!(this.topCalcs.length);\r\n\t}\r\n\r\n\thasBottomCalcs(){\r\n\t\treturn\t!!(this.botCalcs.length);\r\n\t}\r\n\r\n\t//handle table redraw\r\n\tredraw(){\r\n\t\tif(this.topRow){\r\n\t\t\tthis.topRow.normalizeHeight(true);\r\n\t\t}\r\n\t\tif(this.botRow){\r\n\t\t\tthis.botRow.normalizeHeight(true);\r\n\t\t}\r\n\t}\r\n\r\n\t//return the calculated\r\n\tgetResults(){\r\n\t\tvar results = {},\r\n\t\tgroups;\r\n\r\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\r\n\t\t\tgroups = this.table.modules.groupRows.getGroups(true);\r\n\r\n\t\t\tgroups.forEach((group) => {\r\n\t\t\t\tresults[group.getKey()] = this.getGroupResults(group);\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tresults = {\r\n\t\t\t\ttop: this.topRow ? this.topRow.getData() : {},\r\n\t\t\t\tbottom: this.botRow ? this.botRow.getData() : {},\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn results;\r\n\t}\r\n\r\n\t//get results from a group\r\n\tgetGroupResults(group){\r\n\t\tvar groupObj = group._getSelf(),\r\n\t\tsubGroups = group.getSubGroups(),\r\n\t\tsubGroupResults = {},\r\n\t\tresults = {};\r\n\r\n\t\tsubGroups.forEach((subgroup) => {\r\n\t\t\tsubGroupResults[subgroup.getKey()] = this.getGroupResults(subgroup);\r\n\t\t});\r\n\r\n\t\tresults = {\r\n\t\t\ttop: groupObj.calcs.top ? groupObj.calcs.top.getData() : {},\r\n\t\t\tbottom: groupObj.calcs.bottom ? groupObj.calcs.bottom.getData() : {},\r\n\t\t\tgroups: subGroupResults,\r\n\t\t}\r\n\r\n\t\treturn results;\r\n\t}\r\n}\r\n\r\nColumnCalcs.moduleName = \"columnCalcs\";\r\n\r\n//load defaults\r\nColumnCalcs.calculations = defaultCalculations;\r\n\r\nexport default ColumnCalcs;","import Module from '../../core/Module.js';\r\n\r\nimport Row from '../../core/row/Row.js';\r\n\r\nclass DataTree extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.indent = 10;\r\n\t\tthis.field = \"\";\r\n\t\tthis.collapseEl = null;\r\n\t\tthis.expandEl = null;\r\n\t\tthis.branchEl = null;\r\n\t\tthis.elementField = false;\r\n\r\n\t\tthis.startOpen = function(){};\r\n\r\n\t\tthis.displayIndex = 0;\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tvar dummyEl = null,\r\n\t\tfirstCol = this.table.columnManager.getFirstVisibileColumn(),\r\n\t\toptions = this.table.options;\r\n\r\n\t\tthis.field = options.dataTreeChildField;\r\n\t\tthis.indent = options.dataTreeChildIndent;\r\n\t\tthis.elementField = options.dataTreeElementColumn || (firstCol ? firstCol.field : false);\r\n\r\n\t\tif(options.dataTreeBranchElement){\r\n\r\n\t\t\tif(options.dataTreeBranchElement === true){\r\n\t\t\t\tthis.branchEl = document.createElement(\"div\");\r\n\t\t\t\tthis.branchEl.classList.add(\"tabulator-data-tree-branch\");\r\n\t\t\t}else{\r\n\t\t\t\tif(typeof options.dataTreeBranchElement === \"string\"){\r\n\t\t\t\t\tdummyEl = document.createElement(\"div\");\r\n\t\t\t\t\tdummyEl.innerHTML = options.dataTreeBranchElement;\r\n\t\t\t\t\tthis.branchEl = dummyEl.firstChild;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.branchEl = options.dataTreeBranchElement;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(options.dataTreeCollapseElement){\r\n\t\t\tif(typeof options.dataTreeCollapseElement === \"string\"){\r\n\t\t\t\tdummyEl = document.createElement(\"div\");\r\n\t\t\t\tdummyEl.innerHTML = options.dataTreeCollapseElement;\r\n\t\t\t\tthis.collapseEl = dummyEl.firstChild;\r\n\t\t\t}else{\r\n\t\t\t\tthis.collapseEl = options.dataTreeCollapseElement;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.collapseEl = document.createElement(\"div\");\r\n\t\t\tthis.collapseEl.classList.add(\"tabulator-data-tree-control\");\r\n\t\t\tthis.collapseEl.tabIndex = 0;\r\n\t\t\tthis.collapseEl.innerHTML = \"<div class='tabulator-data-tree-control-collapse'></div>\";\r\n\t\t}\r\n\r\n\t\tif(options.dataTreeExpandElement){\r\n\t\t\tif(typeof options.dataTreeExpandElement === \"string\"){\r\n\t\t\t\tdummyEl = document.createElement(\"div\");\r\n\t\t\t\tdummyEl.innerHTML = options.dataTreeExpandElement;\r\n\t\t\t\tthis.expandEl = dummyEl.firstChild;\r\n\t\t\t}else{\r\n\t\t\t\tthis.expandEl = options.dataTreeExpandElement;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.expandEl = document.createElement(\"div\");\r\n\t\t\tthis.expandEl.classList.add(\"tabulator-data-tree-control\");\r\n\t\t\tthis.expandEl.tabIndex = 0;\r\n\t\t\tthis.expandEl.innerHTML = \"<div class='tabulator-data-tree-control-expand'></div>\";\r\n\t\t}\r\n\r\n\r\n\t\tswitch(typeof options.dataTreeStartExpanded){\r\n\t\t\tcase \"boolean\":\r\n\t\t\tthis.startOpen = function(row, index){\r\n\t\t\t\treturn options.dataTreeStartExpanded;\r\n\t\t\t};\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\tthis.startOpen = options.dataTreeStartExpanded;\r\n\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\tthis.startOpen = function(row, index){\r\n\t\t\t\treturn options.dataTreeStartExpanded[index];\r\n\t\t\t};\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeRow(row){\r\n\t\tvar childArray = row.getData()[this.field];\r\n\t\tvar isArray = Array.isArray(childArray);\r\n\r\n\t\tvar children = isArray || (!isArray && typeof childArray === \"object\" && childArray !== null);\r\n\r\n\t\tif(!children && row.modules.dataTree && row.modules.dataTree.branchEl){\r\n\t\t\trow.modules.dataTree.branchEl.parentNode.removeChild(row.modules.dataTree.branchEl);\r\n\t\t}\r\n\r\n\t\tif(!children && row.modules.dataTree && row.modules.dataTree.controlEl){\r\n\t\t\trow.modules.dataTree.controlEl.parentNode.removeChild(row.modules.dataTree.controlEl);\r\n\t\t}\r\n\r\n\t\trow.modules.dataTree = {\r\n\t\t\tindex: row.modules.dataTree ? row.modules.dataTree.index : 0,\r\n\t\t\topen: children ? (row.modules.dataTree ? row.modules.dataTree.open : this.startOpen(row.getComponent(), 0)) : false,\r\n\t\t\tcontrolEl: row.modules.dataTree && children ? row.modules.dataTree.controlEl : false,\r\n\t\t\tbranchEl: row.modules.dataTree && children ? row.modules.dataTree.branchEl : false,\r\n\t\t\tparent: row.modules.dataTree ? row.modules.dataTree.parent : false,\r\n\t\t\tchildren:children,\r\n\t\t};\r\n\t}\r\n\r\n\tlayoutRow(row){\r\n\t\tvar cell = this.elementField ? row.getCell(this.elementField) : row.getCells()[0],\r\n\t\tel = cell.getElement(),\r\n\t\tconfig = row.modules.dataTree;\r\n\r\n\t\tif(config.branchEl){\r\n\t\t\tif(config.branchEl.parentNode){\r\n\t\t\t\tconfig.branchEl.parentNode.removeChild(config.branchEl);\r\n\t\t\t}\r\n\t\t\tconfig.branchEl = false;\r\n\t\t}\r\n\r\n\t\tif(config.controlEl){\r\n\t\t\tif(config.controlEl.parentNode){\r\n\t\t\t\tconfig.controlEl.parentNode.removeChild(config.controlEl);\r\n\t\t\t}\r\n\t\t\tconfig.controlEl = false;\r\n\t\t}\r\n\r\n\t\tthis.generateControlElement(row, el);\r\n\r\n\t\trow.getElement().classList.add(\"tabulator-tree-level-\" + config.index);\r\n\r\n\t\tif(config.index){\r\n\t\t\tif(this.branchEl){\r\n\t\t\t\tconfig.branchEl = this.branchEl.cloneNode(true);\r\n\t\t\t\tel.insertBefore(config.branchEl, el.firstChild);\r\n\r\n\t\t\t\tif(this.table.rtl){\r\n\t\t\t\t\tconfig.branchEl.style.marginRight = (((config.branchEl.offsetWidth + config.branchEl.style.marginLeft) * (config.index - 1)) + (config.index * this.indent)) + \"px\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconfig.branchEl.style.marginLeft = (((config.branchEl.offsetWidth + config.branchEl.style.marginRight) * (config.index - 1)) + (config.index * this.indent)) + \"px\";\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\r\n\t\t\t\tif(this.table.rtl){\r\n\t\t\t\t\tel.style.paddingRight = parseInt(window.getComputedStyle(el, null).getPropertyValue('padding-right')) + (config.index * this.indent) + \"px\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tel.style.paddingLeft = parseInt(window.getComputedStyle(el, null).getPropertyValue('padding-left')) + (config.index * this.indent) + \"px\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgenerateControlElement(row, el){\r\n\t\tvar config = row.modules.dataTree,\r\n\t\tel = el || row.getCells()[0].getElement(),\r\n\t\toldControl = config.controlEl;\r\n\r\n\t\tif(config.children !== false){\r\n\r\n\t\t\tif(config.open){\r\n\t\t\t\tconfig.controlEl = this.collapseEl.cloneNode(true);\r\n\t\t\t\tconfig.controlEl.addEventListener(\"click\", (e) => {\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\tthis.collapseRow(row);\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tconfig.controlEl = this.expandEl.cloneNode(true);\r\n\t\t\t\tconfig.controlEl.addEventListener(\"click\", (e) => {\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\tthis.expandRow(row);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tconfig.controlEl.addEventListener(\"mousedown\", (e) => {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t});\r\n\r\n\t\t\tif(oldControl && oldControl.parentNode === el){\r\n\t\t\t\toldControl.parentNode.replaceChild(config.controlEl,oldControl);\r\n\t\t\t}else{\r\n\t\t\t\tel.insertBefore(config.controlEl, el.firstChild);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsetDisplayIndex (index) {\r\n\t\tthis.displayIndex = index;\r\n\t}\r\n\r\n\tgetDisplayIndex () {\r\n\t\treturn this.displayIndex;\r\n\t}\r\n\r\n\tgetRows(rows){\r\n\t\tvar output = [];\r\n\r\n\t\trows.forEach((row, i) => {\r\n\t\t\tvar config, children;\r\n\r\n\t\t\toutput.push(row);\r\n\r\n\t\t\tif(row instanceof Row){\r\n\r\n\t\t\t\trow.create();\r\n\r\n\t\t\t\tconfig = row.modules.dataTree.children;\r\n\r\n\t\t\t\tif(!config.index && config.children !== false){\r\n\t\t\t\t\tchildren = this.getChildren(row);\r\n\r\n\t\t\t\t\tchildren.forEach((child) => {\r\n\t\t\t\t\t\tchild.create();\r\n\t\t\t\t\t\toutput.push(child);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgetChildren(row, allChildren){\r\n\t\tvar config = row.modules.dataTree,\r\n\t\tchildren = [],\r\n\t\toutput = [];\r\n\r\n\t\tif(config.children !== false && (config.open || allChildren)){\r\n\t\t\tif(!Array.isArray(config.children)){\r\n\t\t\t\tconfig.children = this.generateChildren(row);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.modExists(\"filter\") && this.table.options.dataTreeFilter){\r\n\t\t\t\tchildren = this.table.modules.filter.filter(config.children);\r\n\t\t\t}else{\r\n\t\t\t\tchildren = config.children;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.modExists(\"sort\") && this.table.options.dataTreeSort){\r\n\t\t\t\tthis.table.modules.sort.sort(children);\r\n\t\t\t}\r\n\r\n\t\t\tchildren.forEach((child) => {\r\n\t\t\t\toutput.push(child);\r\n\r\n\t\t\t\tvar subChildren = this.getChildren(child);\r\n\r\n\t\t\t\tsubChildren.forEach((sub) => {\r\n\t\t\t\t\toutput.push(sub);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgenerateChildren(row){\r\n\t\tvar children = [];\r\n\r\n\t\tvar childArray = row.getData()[this.field];\r\n\r\n\t\tif(!Array.isArray(childArray)){\r\n\t\t\tchildArray = [childArray];\r\n\t\t}\r\n\r\n\t\tchildArray.forEach((childData) => {\r\n\t\t\tvar childRow = new Row(childData || {}, this.table.rowManager);\r\n\r\n\t\t\tchildRow.create();\r\n\r\n\t\t\tchildRow.modules.dataTree.index = row.modules.dataTree.index + 1;\r\n\t\t\tchildRow.modules.dataTree.parent = row;\r\n\r\n\t\t\tif(childRow.modules.dataTree.children){\r\n\t\t\t\tchildRow.modules.dataTree.open = this.startOpen(childRow.getComponent(), childRow.modules.dataTree.index);\r\n\t\t\t}\r\n\t\t\tchildren.push(childRow);\r\n\t\t});\r\n\r\n\t\treturn children;\r\n\t}\r\n\r\n\texpandRow(row, silent){\r\n\t\tvar config = row.modules.dataTree;\r\n\r\n\t\tif(config.children !== false){\r\n\t\t\tconfig.open = true;\r\n\r\n\t\t\trow.reinitialize();\r\n\r\n\t\t\tthis.table.rowManager.refreshActiveData(\"tree\", false, true);\r\n\r\n\t\t\tthis.table.options.dataTreeRowExpanded(row.getComponent(), row.modules.dataTree.index);\r\n\t\t}\r\n\t}\r\n\r\n\tcollapseRow(row){\r\n\t\tvar config = row.modules.dataTree;\r\n\r\n\t\tif(config.children !== false){\r\n\t\t\tconfig.open = false;\r\n\r\n\t\t\trow.reinitialize();\r\n\r\n\t\t\tthis.table.rowManager.refreshActiveData(\"tree\", false, true);\r\n\r\n\t\t\tthis.table.options.dataTreeRowCollapsed(row.getComponent(), row.modules.dataTree.index);\r\n\t\t}\r\n\t}\r\n\r\n\ttoggleRow(row){\r\n\t\tvar config = row.modules.dataTree;\r\n\r\n\t\tif(config.children !== false){\r\n\t\t\tif(config.open){\r\n\t\t\t\tthis.collapseRow(row);\r\n\t\t\t}else{\r\n\t\t\t\tthis.expandRow(row);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetTreeParent(row){\r\n\t\treturn row.modules.dataTree.parent ? row.modules.dataTree.parent.getComponent() : false;\r\n\t}\r\n\r\n\tgetFilteredTreeChildren(row){\r\n\t\tvar config = row.modules.dataTree,\r\n\t\toutput = [], children;\r\n\r\n\t\tif(config.children){\r\n\r\n\t\t\tif(!Array.isArray(config.children)){\r\n\t\t\t\tconfig.children = this.generateChildren(row);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.modExists(\"filter\") && this.table.options.dataTreeFilter){\r\n\t\t\t\tchildren = this.table.modules.filter.filter(config.children);\r\n\t\t\t}else{\r\n\t\t\t\tchildren = config.children;\r\n\t\t\t}\r\n\r\n\t\t\tchildren.forEach((childRow) => {\r\n\t\t\t\tif(childRow instanceof Row){\r\n\t\t\t\t\toutput.push(childRow);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\trowDelete(row){\r\n\t\tvar parent = row.modules.dataTree.parent,\r\n\t\tchildIndex;\r\n\r\n\t\tif(parent){\r\n\t\t\tchildIndex = this.findChildIndex(row, parent);\r\n\r\n\t\t\tif(childIndex !== false){\r\n\t\t\t\tparent.data[this.field].splice(childIndex, 1);\r\n\t\t\t}\r\n\r\n\t\t\tif(!parent.data[this.field].length){\r\n\t\t\t\tdelete parent.data[this.field];\r\n\t\t\t}\r\n\r\n\t\t\tthis.initializeRow(parent);\r\n\t\t\tthis.layoutRow(parent);\r\n\t\t}\r\n\r\n\t\tthis.table.rowManager.refreshActiveData(\"tree\", false, true);\r\n\t}\r\n\r\n\taddTreeChildRow(row, data, top, index){\r\n\t\tvar childIndex = false;\r\n\r\n\t\tif(typeof data === \"string\"){\r\n\t\t\tdata = JSON.parse(data);\r\n\t\t}\r\n\r\n\t\tif(!Array.isArray(row.data[this.field])){\r\n\t\t\trow.data[this.field] = [];\r\n\r\n\t\t\trow.modules.dataTree.open = this.startOpen(row.getComponent(), row.modules.dataTree.index);\r\n\t\t}\r\n\r\n\t\tif(typeof index !== \"undefined\"){\r\n\t\t\tchildIndex = this.findChildIndex(index, row);\r\n\r\n\t\t\tif(childIndex !== false){\r\n\t\t\t\trow.data[this.field].splice((top ? childIndex : childIndex + 1), 0, data);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(childIndex === false){\r\n\t\t\tif(top){\r\n\t\t\t\trow.data[this.field].unshift(data);\r\n\t\t\t}else{\r\n\t\t\t\trow.data[this.field].push(data);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.initializeRow(row);\r\n\t\tthis.layoutRow(row);\r\n\r\n\t\tthis.table.rowManager.refreshActiveData(\"tree\", false, true);\r\n\t}\r\n\r\n\tfindChildIndex(subject, parent){\r\n\t\tvar match = false;\r\n\r\n\t\tif(typeof subject == \"object\"){\r\n\r\n\t\t\tif(subject instanceof Row){\r\n\t\t\t\t//subject is row element\r\n\t\t\t\tmatch = subject.data;\r\n\t\t\t}else if(subject instanceof RowComponent){\r\n\t\t\t\t//subject is public row component\r\n\t\t\t\tmatch = subject._getSelf().data;\r\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement){\r\n\t\t\t\tif(parent.modules.dataTree){\r\n\t\t\t\t\tmatch = parent.modules.dataTree.children.find((childRow) => {\r\n\t\t\t\t\t\treturn childRow instanceof Row ? childRow.element === subject : false;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif(match){\r\n\t\t\t\t\t\tmatch = match.data;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}else if(typeof subject == \"undefined\" || subject === null){\r\n\t\t\tmatch = false\r\n\t\t}else{\r\n\t\t\t//subject should be treated as the index of the row\r\n\t\t\tmatch = parent.data[this.field].find((row) => {\r\n\t\t\t\treturn row.data[this.table.options.index] == subject;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(match){\r\n\r\n\t\t\tif(Array.isArray(parent.data[this.field])){\r\n\t\t\t\tmatch = parent.data[this.field].indexOf(match);\r\n\t\t\t}\r\n\r\n\t\t\tif(match == -1){\r\n\t\t\t\tmatch = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//catch all for any other type of input\r\n\r\n\t\treturn match;\r\n\t}\r\n\r\n\tgetTreeChildren(row, component, recurse){\r\n\t\tvar config = row.modules.dataTree,\r\n\t\toutput = [];\r\n\r\n\t\tif(config.children){\r\n\r\n\t\t\tif(!Array.isArray(config.children)){\r\n\t\t\t\tconfig.children = this.generateChildren(row);\r\n\t\t\t}\r\n\r\n\t\t\tconfig.children.forEach((childRow) => {\r\n\t\t\t\tif(childRow instanceof Row){\r\n\t\t\t\t\toutput.push(component ? childRow.getComponent() : childRow);\r\n\r\n\t\t\t\t\tif(recurse){\r\n\t\t\t\t\t\toutput = output.concat(this.getTreeChildren(childRow, component, recurse));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tcheckForRestyle(cell){\r\n\t\tif(!cell.row.cells.indexOf(cell)){\r\n\t\t\tcell.row.reinitialize();\r\n\t\t}\r\n\t}\r\n\r\n\tgetChildField(){\r\n\t\treturn this.field;\r\n\t}\r\n\r\n\tredrawNeeded(data){\r\n\t\treturn (this.field ? typeof data[this.field] !== \"undefined\" : false) || (this.elementField ? typeof data[this.elementField] !== \"undefined\" : false);\r\n\t}\r\n}\r\n\r\nDataTree.moduleName = \"dataTree\";\r\n\r\nexport default DataTree;","export default function(list, options, setFileContents){\r\n\tvar delimiter = options && options.delimiter ? options.delimiter : \",\",\r\n\tfileContents = [],\r\n\theaders = [];\r\n\r\n\tlist.forEach((row) => {\r\n\t\tvar item = [];\r\n\r\n\t\tswitch(row.type){\r\n\t\t\tcase \"group\":\r\n\t\t\tconsole.warn(\"Download Warning - CSV downloader cannot process row groups\");\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"calc\":\r\n\t\t\tconsole.warn(\"Download Warning - CSV downloader cannot process column calculations\");\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"header\":\r\n\t\t\trow.columns.forEach((col, i) => {\r\n\t\t\t\tif(col && col.depth === 1){\r\n\t\t\t\t\theaders[i] = typeof col.value == \"undefined\"  || col.value === null ? \"\" : ('\"' + String(col.value).split('\"').join('\"\"') + '\"');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"row\":\r\n\t\t\trow.columns.forEach((col) => {\r\n\r\n\t\t\t\tif(col){\r\n\r\n\t\t\t\t\tswitch(typeof col.value){\r\n\t\t\t\t\t\tcase \"object\":\r\n\t\t\t\t\t\tcol.value = JSON.stringify(col.value);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase \"undefined\":\r\n\t\t\t\t\t\tcase \"null\":\r\n\t\t\t\t\t\tcol.value = \"\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\titem.push('\"' + String(col.value).split('\"').join('\"\"') + '\"');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tfileContents.push(item.join(delimiter));\r\n\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n\r\n\tif(headers.length){\r\n\t\tfileContents.unshift(headers.join(delimiter));\r\n\t}\r\n\r\n\tfileContents = fileContents.join(\"\\n\");\r\n\r\n\tif(options.bom){\r\n\t\tfileContents = \"\\ufeff\" + fileContents;\r\n\t}\r\n\r\n\tsetFileContents(fileContents, \"text/csv\");\r\n};","export default function(list, options, setFileContents){\r\n\tvar fileContents = [];\r\n\r\n\tlist.forEach((row) => {\r\n\t\tvar item = {};\r\n\r\n\t\tswitch(row.type){\r\n\t\t\tcase \"header\":\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"group\":\r\n\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process row groups\");\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"calc\":\r\n\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process column calculations\");\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"row\":\r\n\t\t\trow.columns.forEach((col) => {\r\n\t\t\t\tif(col){\r\n\t\t\t\t\titem[col.component.getField()] = col.value;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tfileContents.push(item);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n\r\n\tfileContents = JSON.stringify(fileContents, null, '\\t');\r\n\r\n\tsetFileContents(fileContents, \"application/json\");\r\n};","export default function(list, options, setFileContents){\r\n\tvar header = [],\r\n\tbody = [],\r\n\tautoTableParams = {},\r\n\trowGroupStyles = options.rowGroupStyles || {\r\n\t\tfontStyle: \"bold\",\r\n\t\tfontSize: 12,\r\n\t\tcellPadding: 6,\r\n\t\tfillColor: 220,\r\n\t},\r\n\trowCalcStyles = options.rowCalcStyles || {\r\n\t\tfontStyle: \"bold\",\r\n\t\tfontSize: 10,\r\n\t\tcellPadding: 4,\r\n\t\tfillColor: 232,\r\n\t},\r\n\tjsPDFParams = options.jsPDF || {},\r\n\ttitle = options && options.title ? options.title : \"\";\r\n\r\n\tif(!jsPDFParams.orientation){\r\n\t\tjsPDFParams.orientation = options.orientation || \"landscape\";\r\n\t}\r\n\r\n\tif(!jsPDFParams.unit){\r\n\t\tjsPDFParams.unit = \"pt\";\r\n\t}\r\n\r\n\t//parse row list\r\n\tlist.forEach((row) => {\r\n\t\tvar item = {};\r\n\r\n\t\tswitch(row.type){\r\n\t\t\tcase \"header\":\r\n\t\t\theader.push(parseRow(row));\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"group\":\r\n\t\t\tbody.push(parseRow(row, rowGroupStyles));\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"calc\":\r\n\t\t\tbody.push(parseRow(row, rowCalcStyles));\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"row\":\r\n\t\t\tbody.push(parseRow(row));\r\n\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n\r\n\tfunction parseRow(row, styles){\r\n\t\tvar rowData = [];\r\n\r\n\t\trow.columns.forEach((col) =>{\r\n\t\t\tvar cell;\r\n\r\n\t\t\tif(col){\r\n\t\t\t\tswitch(typeof col.value){\r\n\t\t\t\t\tcase \"object\":\r\n\t\t\t\t\tcol.value = JSON.stringify(col.value);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase \"undefined\":\r\n\t\t\t\t\tcase \"null\":\r\n\t\t\t\t\tcol.value = \"\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcell = {\r\n\t\t\t\t\tcontent:col.value,\r\n\t\t\t\t\tcolSpan:col.width,\r\n\t\t\t\t\trowSpan:col.height,\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif(styles){\r\n\t\t\t\t\tcell.styles = styles;\r\n\t\t\t\t}\r\n\r\n\t\t\t\trowData.push(cell);\r\n\t\t\t}else{\r\n\t\t\t\trowData.push(\"\");\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn rowData;\r\n\t}\r\n\r\n\r\n\t//configure PDF\r\n\tvar doc = new jsPDF(jsPDFParams); //set document to landscape, better for most tables\r\n\r\n\tif(options && options.autoTable){\r\n\t\tif(typeof options.autoTable === \"function\"){\r\n\t\t\tautoTableParams = options.autoTable(doc) || {};\r\n\t\t}else{\r\n\t\t\tautoTableParams = options.autoTable;\r\n\t\t}\r\n\t}\r\n\r\n\tif(title){\r\n\t\tautoTableParams.addPageContent = function(data) {\r\n\t\t\tdoc.text(title, 40, 30);\r\n\t\t};\r\n\t}\r\n\r\n\tautoTableParams.head = header;\r\n\tautoTableParams.body = body;\r\n\r\n\tdoc.autoTable(autoTableParams);\r\n\r\n\tif(options && options.documentProcessing){\r\n\t\toptions.documentProcessing(doc);\r\n\t}\r\n\r\n\tsetFileContents(doc.output(\"arraybuffer\"), \"application/pdf\");\r\n};","export default function(list, options, setFileContents){\r\n\tvar self = this,\r\n\tsheetName = options.sheetName || \"Sheet1\",\r\n\tworkbook = XLSX.utils.book_new(),\r\n\toutput;\r\n\r\n\tworkbook.SheetNames = [];\r\n\tworkbook.Sheets = {};\r\n\r\n\tfunction generateSheet(){\r\n\t\tvar rows = [],\r\n\t\tmerges = [],\r\n\t\tworksheet = {},\r\n\t\trange = {s: {c:0, r:0}, e: {c:(list[0] ? list[0].columns.reduce((a, b) => a + (b && b.width ? b.width : 1), 0) : 0), r:list.length }};\r\n\r\n\t\t//parse row list\r\n\t\tlist.forEach((row, i) => {\r\n\t\t\tvar rowData = [];\r\n\r\n\t\t\trow.columns.forEach(function(col, j){\r\n\r\n\t\t\t\tif(col){\r\n\t\t\t\t\trowData.push(!(col.value instanceof Date) && typeof col.value === \"object\" ? JSON.stringify(col.value) : col.value);\r\n\r\n\t\t\t\t\tif(col.width > 1 || col.height > -1){\r\n\t\t\t\t\t\tmerges.push({s:{r:i,c:j},e:{r:i + col.height - 1,c:j + col.width - 1}});\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\trowData.push(\"\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\trows.push(rowData);\r\n\t\t});\r\n\r\n\r\n\t\t//convert rows to worksheet\r\n\t\tXLSX.utils.sheet_add_aoa(worksheet, rows);\r\n\r\n\t\tworksheet['!ref'] = XLSX.utils.encode_range(range);\r\n\r\n\t\tif(merges.length){\r\n\t\t\tworksheet[\"!merges\"] = merges;\r\n\t\t}\r\n\r\n\t\treturn worksheet;\r\n\t}\r\n\r\n\tif(options.sheetOnly){\r\n\t\tsetFileContents(generateSheet());\r\n\t\treturn;\r\n\t}\r\n\r\n\tif(options.sheets){\r\n\t\tfor(var sheet in options.sheets){\r\n\r\n\t\t\tif(options.sheets[sheet] === true){\r\n\t\t\t\tworkbook.SheetNames.push(sheet);\r\n\t\t\t\tworkbook.Sheets[sheet] = generateSheet();\r\n\t\t\t}else{\r\n\r\n\t\t\t\tworkbook.SheetNames.push(sheet);\r\n\r\n\t\t\t\tthis.modules.comms.send(options.sheets[sheet], \"download\", \"intercept\",{\r\n\t\t\t\t\ttype:\"xlsx\",\r\n\t\t\t\t\toptions:{sheetOnly:true},\r\n\t\t\t\t\tactive:self.active,\r\n\t\t\t\t\tintercept:function(data){\r\n\t\t\t\t\t\tworkbook.Sheets[sheet] = data;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}else{\r\n\t\tworkbook.SheetNames.push(sheetName);\r\n\t\tworkbook.Sheets[sheetName] = generateSheet();\r\n\t}\r\n\r\n\tif(options.documentProcessing){\r\n\t\tworkbook = options.documentProcessing(workbook);\r\n\t}\r\n\r\n\t//convert workbook to binary array\r\n\tfunction s2ab(s) {\r\n\t\tvar buf = new ArrayBuffer(s.length);\r\n\t\tvar view = new Uint8Array(buf);\r\n\t\tfor (var i=0; i!=s.length; ++i) view[i] = s.charCodeAt(i) & 0xFF;\r\n\t\t\treturn buf;\r\n\t}\r\n\r\n\toutput = XLSX.write(workbook, {bookType:'xlsx', bookSST:true, type: 'binary'});\r\n\r\n\tsetFileContents(s2ab(output), \"application/octet-stream\");\r\n};","export default function(list, options, setFileContents){\r\n\tif(this.modExists(\"export\", true)){\r\n\t\tsetFileContents(this.modules.export.genereateHTMLTable(list), \"text/html\");\r\n\t}\r\n};","import csv from './downloaders/csv.js';\r\nimport json from './downloaders/json.js';\r\nimport pdf from './downloaders/pdf.js';\r\nimport xlsx from './downloaders/xlsx.js';\r\nimport html from './downloaders/html.js';\r\n\r\nexport default {\r\n\tcsv:csv,\r\n\tjson:json,\r\n\tpdf:pdf,\r\n\txlsx:xlsx,\r\n\thtml:html,\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport defaultDownloaders from './defaults/downloaders.js';\r\n\r\nclass Download extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\t}\r\n\r\n\t//trigger file download\r\n\tdownload(type, filename, options, range, interceptCallback){\r\n\t\tvar downloadFunc = false;\r\n\r\n\t\tfunction buildLink(data, mime){\r\n\t\t\tif(interceptCallback){\r\n\t\t\t\tif(interceptCallback === true){\r\n\t\t\t\t\tthis.triggerDownload(data, mime, type, filename, true);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tinterceptCallback(data);\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tthis.triggerDownload(data, mime, type, filename);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(typeof type == \"function\"){\r\n\t\t\tdownloadFunc = type;\r\n\t\t}else{\r\n\t\t\tif(Download.downloaders[type]){\r\n\t\t\t\tdownloadFunc = Download.downloaders[type];\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Download Error - No such download type found: \", type);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(downloadFunc){\r\n\t\t\tvar list = this.generateExportList(range);\r\n\r\n\t\t\tdownloadFunc.call(this.table, list , options || {}, buildLink);\r\n\t\t}\r\n\t}\r\n\r\n\tgenerateExportList(range){\r\n\t\tvar list = this.table.modules.export.generateExportList(this.table.options.downloadConfig, false, range || this.table.options.downloadRowRange, \"download\");\r\n\r\n\t\t//assign group header formatter\r\n\t\tvar groupHeader = this.table.options.groupHeaderDownload;\r\n\r\n\t\tif(groupHeader && !Array.isArray(groupHeader)){\r\n\t\t\tgroupHeader = [groupHeader];\r\n\t\t}\r\n\r\n\t\tlist.forEach((row) => {\r\n\t\t\tvar group;\r\n\r\n\t\t\tif(row.type === \"group\"){\r\n\t\t\t\tgroup = row.columns[0];\r\n\r\n\t\t\t\tif(groupHeader && groupHeader[row.indent]){\r\n\t\t\t\t\tgroup.value = groupHeader[row.indent](group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn list;\r\n\t}\r\n\r\n\ttriggerDownload(data, mime, type, filename, newTab){\r\n\t\tvar element = document.createElement('a'),\r\n\t\tblob = new Blob([data],{type:mime}),\r\n\t\tfilename = filename || \"Tabulator.\" + (typeof type === \"function\" ? \"txt\" : type);\r\n\r\n\t\tblob = this.table.options.downloadReady.call(this.table, data, blob);\r\n\r\n\t\tif(blob){\r\n\r\n\t\t\tif(newTab){\r\n\t\t\t\twindow.open(window.URL.createObjectURL(blob));\r\n\t\t\t}else{\r\n\t\t\t\tif(navigator.msSaveOrOpenBlob){\r\n\t\t\t\t\tnavigator.msSaveOrOpenBlob(blob, filename);\r\n\t\t\t\t}else{\r\n\t\t\t\t\telement.setAttribute('href', window.URL.createObjectURL(blob));\r\n\r\n\t\t\t\t\t//set file title\r\n\t\t\t\t\telement.setAttribute('download', filename);\r\n\r\n\t\t\t\t\t//trigger download\r\n\t\t\t\t\telement.style.display = 'none';\r\n\t\t\t\t\tdocument.body.appendChild(element);\r\n\t\t\t\t\telement.click();\r\n\r\n\t\t\t\t\t//remove temporary link element\r\n\t\t\t\t\tdocument.body.removeChild(element);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif(this.table.options.downloadComplete){\r\n\t\t\t\tthis.table.options.downloadComplete();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcommsReceived(table, action, data){\r\n\t\tswitch(action){\r\n\t\t\tcase \"intercept\":\r\n\t\t\tthis.download(data.type, \"\", data.options, data.active, data.intercept);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nDownload.moduleName = \"download\";\r\n\r\n//load defaults\r\nDownload.downloaders = defaultDownloaders;\r\n\r\nexport default Download;","//input element\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n\t//create and style input\r\n\tvar cellValue = cell.getValue(),\r\n\tinput = document.createElement(\"input\");\r\n\r\n\tinput.setAttribute(\"type\", editorParams.search ? \"search\" : \"text\");\r\n\r\n\tinput.style.padding = \"4px\";\r\n\tinput.style.width = \"100%\";\r\n\tinput.style.boxSizing = \"border-box\";\r\n\r\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n\t\tfor (let key in editorParams.elementAttributes){\r\n\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\tkey = key.slice(1);\r\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n\t\t\t}else{\r\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinput.value = typeof cellValue !== \"undefined\" ? cellValue : \"\";\r\n\r\n\tonRendered(function(){\r\n\t\tinput.focus({preventScroll: true});\r\n\t\tinput.style.height = \"100%\";\r\n\t});\r\n\r\n\tfunction onChange(e){\r\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\") || input.value !== cellValue){\r\n\t\t\tif(success(input.value)){\r\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tcancel();\r\n\t\t}\r\n\t}\r\n\r\n\t//submit new value on blur or change\r\n\tinput.addEventListener(\"change\", onChange);\r\n\tinput.addEventListener(\"blur\", onChange);\r\n\r\n\t//submit new value on enter\r\n\tinput.addEventListener(\"keydown\", function(e){\r\n\t\tswitch(e.keyCode){\r\n\t\t\t// case 9:\r\n\t\t\tcase 13:\r\n\t\t\tonChange(e);\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 27:\r\n\t\t\tcancel();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 35:\r\n\t\t\tcase 36:\r\n\t\t\te.stopPropagation();\r\n\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n\r\n\tif(editorParams.mask){\r\n\t\tthis.table.modules.edit.maskInput(input, editorParams);\r\n\t}\r\n\r\n\treturn input;\r\n};","//resizable text area element\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n    var self = this,\r\n    cellValue = cell.getValue(),\r\n    vertNav = editorParams.verticalNavigation || \"hybrid\",\r\n    value = String(cellValue !== null && typeof cellValue !== \"undefined\"  ? cellValue : \"\"),\r\n    count = (value.match(/(?:\\r\\n|\\r|\\n)/g) || []).length + 1,\r\n    input = document.createElement(\"textarea\"),\r\n    scrollHeight = 0;\r\n\r\n    //create and style input\r\n    input.style.display = \"block\";\r\n    input.style.padding = \"2px\";\r\n    input.style.height = \"100%\";\r\n    input.style.width = \"100%\";\r\n    input.style.boxSizing = \"border-box\";\r\n    input.style.whiteSpace = \"pre-wrap\";\r\n    input.style.resize = \"none\";\r\n\r\n    if(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n        for (let key in editorParams.elementAttributes){\r\n            if(key.charAt(0) == \"+\"){\r\n                key = key.slice(1);\r\n                input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n            }else{\r\n                input.setAttribute(key, editorParams.elementAttributes[key]);\r\n            }\r\n        }\r\n    }\r\n\r\n    input.value = value;\r\n\r\n    onRendered(function(){\r\n        input.focus({preventScroll: true});\r\n        input.style.height = \"100%\";\r\n\r\n        input.scrollHeight;\r\n        input.style.height = input.scrollHeight + \"px\";\r\n        cell.getRow().normalizeHeight();\r\n    });\r\n\r\n    function onChange(e){\r\n\r\n        if(((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\") || input.value !== cellValue){\r\n\r\n            if(success(input.value)){\r\n                cellValue = input.value; //persist value if successfully validated incase editor is used as header filter\r\n            }\r\n\r\n            setTimeout(function(){\r\n                cell.getRow().normalizeHeight();\r\n            },300)\r\n        }else{\r\n            cancel();\r\n        }\r\n    }\r\n\r\n    //submit new value on blur or change\r\n    input.addEventListener(\"change\", onChange);\r\n    input.addEventListener(\"blur\", onChange);\r\n\r\n    input.addEventListener(\"keyup\", function(){\r\n\r\n        input.style.height = \"\";\r\n\r\n        var heightNow = input.scrollHeight;\r\n\r\n        input.style.height = heightNow + \"px\";\r\n\r\n        if(heightNow != scrollHeight){\r\n            scrollHeight = heightNow;\r\n            cell.getRow().normalizeHeight();\r\n        }\r\n    });\r\n\r\n    input.addEventListener(\"keydown\", function(e){\r\n\r\n        switch(e.keyCode){\r\n            case 27:\r\n            cancel();\r\n            break;\r\n\r\n            case 38: //up arrow\r\n            if(vertNav == \"editor\" || (vertNav == \"hybrid\" && input.selectionStart)){\r\n                e.stopImmediatePropagation();\r\n                e.stopPropagation();\r\n            }\r\n\r\n            break;\r\n\r\n            case 40: //down arrow\r\n            if(vertNav == \"editor\" || (vertNav == \"hybrid\" && input.selectionStart !== input.value.length)){\r\n                e.stopImmediatePropagation();\r\n                e.stopPropagation();\r\n            }\r\n            break;\r\n\r\n            case 35:\r\n            case 36:\r\n            e.stopPropagation();\r\n            break;\r\n        }\r\n    });\r\n\r\n    if(editorParams.mask){\r\n        this.table.modules.edit.maskInput(input, editorParams);\r\n    }\r\n\r\n    return input;\r\n};","//input element with type of number\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n\tvar cellValue = cell.getValue(),\r\n\tvertNav = editorParams.verticalNavigation || \"editor\",\r\n\tinput = document.createElement(\"input\");\r\n\r\n\tinput.setAttribute(\"type\", \"number\");\r\n\r\n\tif(typeof editorParams.max != \"undefined\"){\r\n\t\tinput.setAttribute(\"max\", editorParams.max);\r\n\t}\r\n\r\n\tif(typeof editorParams.min != \"undefined\"){\r\n\t\tinput.setAttribute(\"min\", editorParams.min);\r\n\t}\r\n\r\n\tif(typeof editorParams.step != \"undefined\"){\r\n\t\tinput.setAttribute(\"step\", editorParams.step);\r\n\t}\r\n\r\n\t//create and style input\r\n\tinput.style.padding = \"4px\";\r\n\tinput.style.width = \"100%\";\r\n\tinput.style.boxSizing = \"border-box\";\r\n\r\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n\t\tfor (let key in editorParams.elementAttributes){\r\n\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\tkey = key.slice(1);\r\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n\t\t\t}else{\r\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinput.value = cellValue;\r\n\r\n\tvar blurFunc = function(e){\r\n\t\tonChange();\r\n\t};\r\n\r\n\tonRendered(function () {\r\n\t\t//submit new value on blur\r\n\t\tinput.removeEventListener(\"blur\", blurFunc);\r\n\r\n\t\tinput.focus({preventScroll: true});\r\n\t\tinput.style.height = \"100%\";\r\n\r\n\t\t//submit new value on blur\r\n\t\tinput.addEventListener(\"blur\", blurFunc);\r\n\t});\r\n\r\n\tfunction onChange(){\r\n\t\tvar value = input.value;\r\n\r\n\t\tif(!isNaN(value) && value !==\"\"){\r\n\t\t\tvalue = Number(value);\r\n\t\t}\r\n\r\n\t\tif(value !== cellValue){\r\n\t\t\tif(success(value)){\r\n\t\t\t\tcellValue = value; //persist value if successfully validated incase editor is used as header filter\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tcancel();\r\n\t\t}\r\n\t}\r\n\r\n\t//submit new value on enter\r\n\tinput.addEventListener(\"keydown\", function(e){\r\n\t\tswitch(e.keyCode){\r\n\t\t\tcase 13:\r\n\t\t\t// case 9:\r\n\t\t\tonChange();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 27:\r\n\t\t\tcancel();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 38: //up arrow\r\n\t\t\tcase 40: //down arrow\r\n\t\t\tif(vertNav == \"editor\"){\r\n\t\t\t\te.stopImmediatePropagation();\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 35:\r\n\t\t\tcase 36:\r\n\t\t\te.stopPropagation();\r\n\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n\r\n\tif(editorParams.mask){\r\n\t\tthis.table.modules.edit.maskInput(input, editorParams);\r\n\t}\r\n\r\n\treturn input;\r\n};","//input element with type of number\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n\tvar cellValue = cell.getValue(),\r\n\tinput = document.createElement(\"input\");\r\n\r\n\tinput.setAttribute(\"type\", \"range\");\r\n\r\n\tif (typeof editorParams.max != \"undefined\") {\r\n\t\tinput.setAttribute(\"max\", editorParams.max);\r\n\t}\r\n\r\n\tif (typeof editorParams.min != \"undefined\") {\r\n\t\tinput.setAttribute(\"min\", editorParams.min);\r\n\t}\r\n\r\n\tif (typeof editorParams.step != \"undefined\") {\r\n\t\tinput.setAttribute(\"step\", editorParams.step);\r\n\t}\r\n\r\n\t//create and style input\r\n\tinput.style.padding = \"4px\";\r\n\tinput.style.width = \"100%\";\r\n\tinput.style.boxSizing = \"border-box\";\r\n\r\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n\t\tfor (let key in editorParams.elementAttributes){\r\n\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\tkey = key.slice(1);\r\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n\t\t\t}else{\r\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinput.value = cellValue;\r\n\r\n\tonRendered(function () {\r\n\t\tinput.focus({preventScroll: true});\r\n\t\tinput.style.height = \"100%\";\r\n\t});\r\n\r\n\tfunction onChange(){\r\n\t\tvar value = input.value;\r\n\r\n\t\tif(!isNaN(value) && value !==\"\"){\r\n\t\t\tvalue = Number(value);\r\n\t\t}\r\n\r\n\t\tif(value != cellValue){\r\n\t\t\tif(success(value)){\r\n\t\t\t\tcellValue = value; //persist value if successfully validated incase editor is used as header filter\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tcancel();\r\n\t\t}\r\n\t}\r\n\r\n\t//submit new value on blur\r\n\tinput.addEventListener(\"blur\", function(e){\r\n\t\tonChange();\r\n\t});\r\n\r\n\t//submit new value on enter\r\n\tinput.addEventListener(\"keydown\", function(e){\r\n\t\tswitch(e.keyCode){\r\n\t\t\tcase 13:\r\n\t\t\t// case 9:\r\n\t\t\tonChange();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 27:\r\n\t\t\tcancel();\r\n\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n\r\n\treturn input;\r\n};","import Helpers from '../../../../core/Helpers.js';\r\n\r\n//dropdown select editor\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n\tvar self = this,\r\n\tcellEl = cell.getElement(),\r\n\tinitialValue = cell.getValue(),\r\n\tvertNav = editorParams.verticalNavigation || \"editor\",\r\n\tinitialDisplayValue = typeof initialValue !== \"undefined\" || initialValue === null ? (Array.isArray(initialValue) ? initialValue : [initialValue]) : (typeof editorParams.defaultValue !== \"undefined\" ? editorParams.defaultValue : []),\r\n\tinput = document.createElement(\"input\"),\r\n\tlistEl = document.createElement(\"div\"),\r\n\tmultiselect = editorParams.multiselect,\r\n\tdataItems = [],\r\n\tcurrentItem = {},\r\n\tdisplayItems = [],\r\n\tcurrentItems = [],\r\n\tblurable = true,\r\n\tblockListShow = false,\r\n\tsearchWord = \"\",\r\n\tsearchWordTimeout = null;\r\n\r\n\tif(Array.isArray(editorParams) || (!Array.isArray(editorParams) && typeof editorParams === \"object\" && !editorParams.values)){\r\n\t\tconsole.warn(\"DEPRECATION WARNING - values for the select editor must now be passed into the values property of the editorParams object, not as the editorParams object\");\r\n\t\teditorParams = {values:editorParams};\r\n\t}\r\n\r\n\tfunction getUniqueColumnValues(field){\r\n\t\tvar output = {},\r\n\t\tdata = self.table.getData(),\r\n\t\tcolumn;\r\n\r\n\t\tif(field){\r\n\t\t\tcolumn = self.table.columnManager.getColumnByField(field);\r\n\t\t}else{\r\n\t\t\tcolumn = cell.getColumn()._getSelf();\r\n\t\t}\r\n\r\n\t\tif(column){\r\n\t\t\tdata.forEach(function(row){\r\n\t\t\t\tvar val = column.getFieldValue(row);\r\n\r\n\t\t\t\tif(val !== null && typeof val !== \"undefined\" && val !== \"\"){\r\n\t\t\t\t\toutput[val] = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"unable to find matching column to create select lookup list:\", field);\r\n\t\t}\r\n\r\n\t\treturn Object.keys(output);\r\n\t}\r\n\r\n\tfunction parseItems(inputValues, curentValues){\r\n\t\tvar dataList = [];\r\n\t\tvar displayList = [];\r\n\r\n\t\tfunction processComplexListItem(item){\r\n\t\t\tvar item = {\r\n\t\t\t\tlabel:item.label,\r\n\t\t\t\tvalue:item.value,\r\n\t\t\t\titemParams:item.itemParams,\r\n\t\t\t\telementAttributes: item.elementAttributes,\r\n\t\t\t\telement:false,\r\n\t\t\t};\r\n\r\n\t\t\t// if(item.value === curentValue || (!isNaN(parseFloat(item.value)) && !isNaN(parseFloat(item.value)) && parseFloat(item.value) === parseFloat(curentValue))){\r\n\t\t\t// \tsetCurrentItem(item);\r\n\t\t\t// }\r\n\r\n\t\t\tif(curentValues.indexOf(item.value) > -1){\r\n\t\t\t\tsetItem(item);\r\n\t\t\t}\r\n\r\n\t\t\tdataList.push(item);\r\n\t\t\tdisplayList.push(item);\r\n\r\n\t\t\treturn item;\r\n\t\t}\r\n\r\n\t\tif(typeof inputValues == \"function\"){\r\n\t\t\tinputValues = inputValues(cell);\r\n\t\t}\r\n\r\n\t\tif(Array.isArray(inputValues)){\r\n\t\t\tinputValues.forEach(function(value){\r\n\t\t\t\tvar item;\r\n\r\n\t\t\t\tif(typeof value === \"object\"){\r\n\r\n\t\t\t\t\tif(value.options){\r\n\t\t\t\t\t\titem = {\r\n\t\t\t\t\t\t\tlabel:value.label,\r\n\t\t\t\t\t\t\tgroup:true,\r\n\t\t\t\t\t\t\titemParams:value.itemParams,\r\n\t\t\t\t\t\t\telementAttributes:value.elementAttributes,\r\n\t\t\t\t\t\t\telement:false,\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tdisplayList.push(item);\r\n\r\n\t\t\t\t\t\tvalue.options.forEach(function(item){\r\n\t\t\t\t\t\t\tprocessComplexListItem(item);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tprocessComplexListItem(value);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}else{\r\n\r\n\t\t\t\t\titem = {\r\n\t\t\t\t\t\tlabel:value,\r\n\t\t\t\t\t\tvalue:value,\r\n\t\t\t\t\t\telement:false,\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t// if(item.value === curentValue || (!isNaN(parseFloat(item.value)) && !isNaN(parseFloat(item.value)) && parseFloat(item.value) === parseFloat(curentValue))){\r\n\t\t\t\t\t// \tsetCurrentItem(item);\r\n\t\t\t\t\t// }\r\n\r\n\t\t\t\t\tif(curentValues.indexOf(item.value) > -1){\r\n\t\t\t\t\t\tsetItem(item);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdataList.push(item);\r\n\t\t\t\t\tdisplayList.push(item);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tfor(var key in inputValues){\r\n\t\t\t\tvar item = {\r\n\t\t\t\t\tlabel:inputValues[key],\r\n\t\t\t\t\tvalue:key,\r\n\t\t\t\t\telement:false,\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// if(item.value === curentValue || (!isNaN(parseFloat(item.value)) && !isNaN(parseFloat(item.value)) && parseFloat(item.value) === parseFloat(curentValue))){\r\n\t\t\t\t// \tsetCurrentItem(item);\r\n\t\t\t\t// }\r\n\r\n\t\t\t\tif(curentValues.indexOf(item.value) > -1){\r\n\t\t\t\t\tsetItem(item);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdataList.push(item);\r\n\t\t\t\tdisplayList.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(editorParams.sortValuesList){\r\n\t\t\tdataList.sort((a, b) => {\r\n\t\t\t\treturn a.label < b.label ? -1 : (a.label > b.label ? 1 : 0);\r\n\t\t\t});\r\n\r\n\t\t\tdisplayList.sort((a, b) => {\r\n\t\t\t\treturn a.label < b.label ? -1 : (a.label > b.label ? 1 : 0);\r\n\t\t\t});\r\n\r\n\t\t\tif(editorParams.sortValuesList !== \"asc\"){\r\n\t\t\t\tdataList.reverse();\r\n\t\t\t\tdisplayList.reverse();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tdataItems = dataList;\r\n\t\tdisplayItems = displayList;\r\n\r\n\t\tfillList();\r\n\t}\r\n\r\n\tfunction fillList(){\r\n\t\twhile(listEl.firstChild) listEl.removeChild(listEl.firstChild);\r\n\r\n\t\tdisplayItems.forEach(function(item){\r\n\r\n\t\t\tvar el = item.element;\r\n\r\n\t\t\tif(!el){\r\n\t\t\t\tel = document.createElement(\"div\");\r\n\t\t\t\titem.label = editorParams.listItemFormatter ? editorParams.listItemFormatter(item.value, item.label, cell, el, item.itemParams) : item.label;\r\n\t\t\t\tif(item.group){\r\n\t\t\t\t\tel.classList.add(\"tabulator-edit-select-list-group\");\r\n\t\t\t\t\tel.tabIndex = 0;\r\n\t\t\t\t\tel.innerHTML = item.label === \"\" ? \"&nbsp;\" : item.label;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tel.classList.add(\"tabulator-edit-select-list-item\");\r\n\t\t\t\t\tel.tabIndex = 0;\r\n\t\t\t\t\tel.innerHTML = item.label === \"\" ? \"&nbsp;\" : item.label;\r\n\r\n\t\t\t\t\tel.addEventListener(\"click\", function(){\r\n\t\t\t\t\t\tblockListShow = true;\r\n\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tblockListShow = false;\r\n\t\t\t\t\t\t}, 10);\r\n\r\n\t\t\t\t\t\t// setCurrentItem(item);\r\n\t\t\t\t\t\t// chooseItem();\r\n\t\t\t\t\t\tif(multiselect){\r\n\t\t\t\t\t\t\ttoggleItem(item);\r\n\t\t\t\t\t\t\tinput.focus();\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tchooseItem(item);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// if(item === currentItem){\r\n\t\t\t\t\t// \tel.classList.add(\"active\");\r\n\t\t\t\t\t// }\r\n\r\n\t\t\t\t\tif(currentItems.indexOf(item) > -1){\r\n\t\t\t\t\t\tel.classList.add(\"active\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(item.elementAttributes && typeof item.elementAttributes == \"object\"){\r\n\t\t\t\t\tfor (let key in item.elementAttributes){\r\n\t\t\t\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\t\t\t\tkey = key.slice(1);\r\n\t\t\t\t\t\t\tel.setAttribute(key, input.getAttribute(key) + item.elementAttributes[\"+\" + key]);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tel.setAttribute(key, item.elementAttributes[key]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tel.addEventListener(\"mousedown\", function(){\r\n\t\t\t\t\tblurable = false;\r\n\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\tblurable = true;\r\n\t\t\t\t\t}, 10);\r\n\t\t\t\t});\r\n\r\n\t\t\t\titem.element = el;\r\n\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlistEl.appendChild(el);\r\n\t\t});\r\n\t}\r\n\r\n\r\n\tfunction setCurrentItem(item, active){\r\n\r\n\t\tif(!multiselect && currentItem && currentItem.element){\r\n\t\t\tcurrentItem.element.classList.remove(\"active\");\r\n\t\t}\r\n\r\n\t\tif(currentItem && currentItem.element){\r\n\t\t\tcurrentItem.element.classList.remove(\"focused\");\r\n\t\t}\r\n\r\n\t\tcurrentItem = item;\r\n\r\n\t\tif(item.element){\r\n\t\t\titem.element.classList.add(\"focused\");\r\n\t\t\tif(active){\r\n\t\t\t\titem.element.classList.add(\"active\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(item && item.element && item.element.scrollIntoView){\r\n\t\t\titem.element.scrollIntoView({behavior: 'smooth', block: 'nearest', inline: 'start'});\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t// function chooseItem(){\r\n\t// \thideList();\r\n\r\n\t// \tif(initialValue !== currentItem.value){\r\n\t// \t\tinitialValue = currentItem.value;\r\n\t// \t\tsuccess(currentItem.value);\r\n\t// \t}else{\r\n\t// \t\tcancel();\r\n\t// \t}\r\n\t// }\r\n\r\n\tfunction setItem(item) {\r\n\t\tvar index = currentItems.indexOf(item);\r\n\r\n\t\tif(index == -1){\r\n\t\t\tcurrentItems.push(item);\r\n\t\t\tsetCurrentItem(item, true);\r\n\t\t}\r\n\r\n\t\tfillInput();\r\n\t}\r\n\r\n\tfunction unsetItem(index) {\r\n\t\tvar item = currentItems[index];\r\n\r\n\t\tif(index > -1){\r\n\t\t\tcurrentItems.splice(index, 1);\r\n\t\t\tif(item.element){\r\n\t\t\t\titem.element.classList.remove(\"active\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction toggleItem(item) {\r\n\t\tif(!item){\r\n\t\t\titem = currentItem;\r\n\t\t}\r\n\r\n\t\tvar index = currentItems.indexOf(item);\r\n\r\n\t\tif(index > -1){\r\n\t\t\tunsetItem(index);\r\n\t\t}else{\r\n\t\t\tif(multiselect !== true && currentItems.length >= multiselect){\r\n\t\t\t\tunsetItem(0);\r\n\t\t\t}\r\n\r\n\t\t\tsetItem(item);\r\n\t\t}\r\n\r\n\t\tfillInput();\r\n\r\n\t}\r\n\r\n\tfunction chooseItem(item){\r\n\t\thideList();\r\n\r\n\t\tif(!item){\r\n\t\t\titem = currentItem;\r\n\t\t}\r\n\r\n\t\tif(item){\r\n\t\t\tinput.value = item.label;\r\n\t\t\tsuccess(item.value);\r\n\t\t}\r\n\r\n\t\tinitialDisplayValue = [item.value];\r\n\t}\r\n\r\n\r\n\tfunction chooseItems(silent){\r\n\t\tif(!silent){\r\n\t\t\thideList();\r\n\t\t}\r\n\r\n\t\tvar output = [];\r\n\r\n\t\tcurrentItems.forEach((item) => {\r\n\t\t\toutput.push(item.value);\r\n\t\t});\r\n\r\n\t\tinitialDisplayValue = output;\r\n\r\n\t\tsuccess(output);\r\n\t}\r\n\r\n\tfunction fillInput(){\r\n\t\tvar output = [];\r\n\r\n\t\tcurrentItems.forEach((item) => {\r\n\t\t\toutput.push(item.label);\r\n\t\t});\r\n\r\n\t\tinput.value = output.join(\", \");\r\n\r\n\t\tif(self.currentCell === false){\r\n\t\t\tchooseItems(true);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction unsetItems() {\r\n\r\n\t\tvar len = currentItems.length;\r\n\r\n\t\tfor(let i = 0; i < len; i++){\r\n\t\t\tunsetItem(0);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction cancelItem(){\r\n\t\thideList();\r\n\t\tcancel();\r\n\t}\r\n\r\n\tfunction showList(){\r\n\t\tcurrentItems = [];\r\n\r\n\t\tif(!listEl.parentNode){\r\n\t\t\tif(editorParams.values === true){\r\n\t\t\t\tparseItems(getUniqueColumnValues(), initialDisplayValue);\r\n\t\t\t}else if(typeof editorParams.values === \"string\"){\r\n\t\t\t\tparseItems(getUniqueColumnValues(editorParams.values), initialDisplayValue);\r\n\t\t\t}else{\r\n\t\t\t\tparseItems(editorParams.values || [], initialDisplayValue);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tvar offset = Helpers.elOffset(cellEl);\r\n\r\n\t\t\tlistEl.style.minWidth = cellEl.offsetWidth + \"px\";\r\n\r\n\t\t\tlistEl.style.top = (offset.top + cellEl.offsetHeight) + \"px\";\r\n\t\t\tlistEl.style.left = offset.left + \"px\";\r\n\r\n\r\n\t\t\tlistEl.addEventListener(\"mousedown\", function(e){\r\n\t\t\t\tblurable = false;\r\n\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tblurable = true;\r\n\t\t\t\t}, 10);\r\n\t\t\t});\r\n\r\n\t\t\tdocument.body.appendChild(listEl);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction hideList(){\r\n\t\tif(listEl.parentNode){\r\n\t\t\tlistEl.parentNode.removeChild(listEl);\r\n\t\t}\r\n\r\n\t\tremoveScrollListener();\r\n\t}\r\n\r\n\tfunction removeScrollListener() {\r\n\t\tself.table.rowManager.element.removeEventListener(\"scroll\", cancelItem);\r\n\t}\r\n\r\n\tfunction scrollTovalue(char){\r\n\r\n\t\tclearTimeout(searchWordTimeout);\r\n\r\n\t\tvar character = String.fromCharCode(event.keyCode).toLowerCase();\r\n\t\tsearchWord += character.toLowerCase();\r\n\r\n\t\tvar match = dataItems.find((item) => {\r\n\t\t\treturn typeof item.label !== \"undefined\" && item.label.toLowerCase().startsWith(searchWord);\r\n\t\t});\r\n\r\n\t\tif(match){\r\n\t\t\tsetCurrentItem(match, !multiselect);\r\n\t\t}\r\n\r\n\t\tsearchWordTimeout = setTimeout(() => {\r\n\t\t\tsearchWord = \"\";\r\n\t\t}, 800)\r\n\t}\r\n\r\n\t//style input\r\n\tinput.setAttribute(\"type\", \"text\");\r\n\r\n\tinput.style.padding = \"4px\";\r\n\tinput.style.width = \"100%\";\r\n\tinput.style.boxSizing = \"border-box\";\r\n\tinput.style.cursor = \"default\";\r\n\tinput.readOnly = (this.currentCell != false);\r\n\r\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n\t\tfor (let key in editorParams.elementAttributes){\r\n\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\tkey = key.slice(1);\r\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n\t\t\t}else{\r\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinput.value = typeof initialValue !== \"undefined\" || initialValue === null ? initialValue : \"\";\r\n\r\n\t// if(editorParams.values === true){\r\n\t// \tparseItems(getUniqueColumnValues(), initialValue);\r\n\t// }else if(typeof editorParams.values === \"string\"){\r\n\t// \tparseItems(getUniqueColumnValues(editorParams.values), initialValue);\r\n\t// }else{\r\n\t// \tparseItems(editorParams.values || [], initialValue);\r\n\t// }\r\n\r\n\tinput.addEventListener(\"search\", function(e){\r\n\t\tif(!input.value){\r\n\t\t\tunsetItems();\r\n\t\t\tchooseItems();\r\n\t\t}\r\n\t});\r\n\r\n\t//allow key based navigation\r\n\tinput.addEventListener(\"keydown\", function(e){\r\n\t\tvar index;\r\n\r\n\t\tswitch(e.keyCode){\r\n\t\t\tcase 38: //up arrow\r\n\t\t\tindex = dataItems.indexOf(currentItem);\r\n\r\n\t\t\tif(vertNav == \"editor\" || (vertNav == \"hybrid\" && index)){\r\n\t\t\t\te.stopImmediatePropagation();\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tif(index > 0){\r\n\t\t\t\t\tsetCurrentItem(dataItems[index - 1], !multiselect);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 40: //down arrow\r\n\t\t\tindex = dataItems.indexOf(currentItem);\r\n\r\n\t\t\tif(vertNav == \"editor\" || (vertNav == \"hybrid\" && index < dataItems.length - 1)){\r\n\t\t\t\te.stopImmediatePropagation();\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tif(index < dataItems.length - 1){\r\n\t\t\t\t\tif(index == -1){\r\n\t\t\t\t\t\tsetCurrentItem(dataItems[0], !multiselect);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tsetCurrentItem(dataItems[index + 1], !multiselect);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 37: //left arrow\r\n\t\t\tcase 39: //right arrow\r\n\t\t\te.stopImmediatePropagation();\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 13: //enter\r\n\t\t\t// chooseItem();\r\n\r\n\t\t\tif(multiselect){\r\n\t\t\t\ttoggleItem();\r\n\t\t\t}else{\r\n\t\t\t\tchooseItem();\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 27: //escape\r\n\t\t\tcancelItem();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 9: //tab\r\n\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\tif(self.currentCell === false){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\r\n\t\t\tif(e.keyCode >= 38 && e.keyCode <= 90){\r\n\t\t\t\tscrollTovalue(e.keyCode);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tinput.addEventListener(\"blur\", function(e){\r\n\t\tif(blurable){\r\n\t\t\tif(multiselect){\r\n\t\t\t\tchooseItems();\r\n\t\t\t}else{\r\n\t\t\t\tcancelItem();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tinput.addEventListener(\"focus\", function(e){\r\n\t\tif(!blockListShow){\r\n\t\t\tshowList();\r\n\t\t}\r\n\t});\r\n\r\n\t//style list element\r\n\tlistEl = document.createElement(\"div\");\r\n\tlistEl.classList.add(\"tabulator-edit-select-list\");\r\n\r\n\tonRendered(function(){\r\n\t\tinput.style.height = \"100%\";\r\n\t\tinput.focus({preventScroll: true});\r\n\t});\r\n\r\n\tsetTimeout(() => {\r\n\t\tthis.table.rowManager.element.addEventListener(\"scroll\", cancelItem);\r\n\t}, 10);\r\n\r\n\treturn input;\r\n};","import Helpers from '../../../../core/Helpers.js';\r\n\r\n//autocomplete\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n\tvar self = this,\r\n\tcellEl = cell.getElement(),\r\n\tinitialValue = cell.getValue(),\r\n\tvertNav = editorParams.verticalNavigation || \"editor\",\r\n\tinitialDisplayValue = typeof initialValue !== \"undefined\" || initialValue === null ? initialValue : (typeof editorParams.defaultValue !== \"undefined\" ? editorParams.defaultValue : \"\"),\r\n\tinput = document.createElement(\"input\"),\r\n\tlistEl = document.createElement(\"div\"),\r\n\tallItems = [],\r\n\tdisplayItems = [],\r\n\tvalues = [],\r\n\tcurrentItem = false,\r\n\tblurable = true,\r\n\tuniqueColumnValues = false;\r\n\r\n\t//style input\r\n\tinput.setAttribute(\"type\", \"search\");\r\n\r\n\tinput.style.padding = \"4px\";\r\n\tinput.style.width = \"100%\";\r\n\tinput.style.boxSizing = \"border-box\";\r\n\r\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n\t\tfor (let key in editorParams.elementAttributes){\r\n\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\tkey = key.slice(1);\r\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n\t\t\t}else{\r\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//style list element\r\n\tlistEl.classList.add(\"tabulator-edit-select-list\");\r\n\r\n\tlistEl.addEventListener(\"mousedown\", function(e){\r\n\t\tblurable = false;\r\n\r\n\t\tsetTimeout(function(){\r\n\t\t\tblurable = true;\r\n\t\t}, 10);\r\n\t});\r\n\r\n\r\n\tfunction genUniqueColumnValues(){\r\n\t\tif(editorParams.values === true){\r\n\t\t\tuniqueColumnValues = getUniqueColumnValues();\r\n\t\t}else if(typeof editorParams.values === \"string\"){\r\n\t\t\tuniqueColumnValues = getUniqueColumnValues(editorParams.values);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getUniqueColumnValues(field){\r\n\t\tvar output = {},\r\n\t\tdata = self.table.getData(),\r\n\t\tcolumn;\r\n\r\n\t\tif(field){\r\n\t\t\tcolumn = self.table.columnManager.getColumnByField(field);\r\n\t\t}else{\r\n\t\t\tcolumn = cell.getColumn()._getSelf();\r\n\t\t}\r\n\r\n\t\tif(column){\r\n\t\t\tdata.forEach(function(row){\r\n\t\t\t\tvar val = column.getFieldValue(row);\r\n\r\n\t\t\t\tif(val !== null && typeof val !== \"undefined\" && val !== \"\"){\r\n\t\t\t\t\toutput[val] = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(editorParams.sortValuesList){\r\n\t\t\t\tif(editorParams.sortValuesList == \"asc\"){\r\n\t\t\t\t\toutput = Object.keys(output).sort();\r\n\t\t\t\t}else{\r\n\t\t\t\t\toutput = Object.keys(output).sort().reverse();\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\toutput = Object.keys(output);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"unable to find matching column to create autocomplete lookup list:\", field);\r\n\t\t}\r\n\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tfunction filterList(term, intialLoad){\r\n\t\tvar matches = [],\r\n\t\tvalues, items, searchEl;\r\n\r\n\t\t//lookup base values list\r\n\t\tif(uniqueColumnValues){\r\n\t\t\tvalues = uniqueColumnValues;\r\n\t\t}else{\r\n\t\t\tvalues = editorParams.values || [];\r\n\t\t}\r\n\r\n\t\tif(editorParams.searchFunc){\r\n\t\t\tmatches = editorParams.searchFunc(term, values);\r\n\r\n\t\t\tif(matches instanceof Promise){\r\n\r\n\t\t\t\taddNotice(typeof editorParams.searchingPlaceholder !== \"undefined\" ? editorParams.searchingPlaceholder : \"Searching...\");\r\n\r\n\t\t\t\tmatches.then((result) => {\r\n\t\t\t\t\tfillListIfNotEmpty(parseItems(result), intialLoad);\r\n\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\tconsole.err(\"error in autocomplete search promise:\", err);\r\n\t\t\t\t});\r\n\r\n\t\t\t}else{\r\n\t\t\t\tfillListIfNotEmpty(parseItems(matches), intialLoad);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\titems = parseItems(values);\r\n\r\n\t\t\tif(term === \"\"){\r\n\t\t\t\tif(editorParams.showListOnEmpty){\r\n\t\t\t\t\tmatches = items;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\titems.forEach(function(item){\r\n\t\t\t\t\tif(item.value !== null || typeof item.value !== \"undefined\"){\r\n\t\t\t\t\t\tif(String(item.value).toLowerCase().indexOf(String(term).toLowerCase()) > -1 || String(item.title).toLowerCase().indexOf(String(term).toLowerCase()) > -1){\r\n\t\t\t\t\t\t\tmatches.push(item);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfillListIfNotEmpty(matches, intialLoad);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction addNotice(notice){\r\n\t\tvar searchEl = document.createElement(\"div\");\r\n\r\n\t\tclearList();\r\n\r\n\t\tif(notice !== false){\r\n\t\t\tsearchEl.classList.add(\"tabulator-edit-select-list-notice\");\r\n\t\t\tsearchEl.tabIndex = 0;\r\n\r\n\t\t\tif(notice instanceof Node){\r\n\t\t\t\tsearchEl.appendChild(notice);\r\n\t\t\t}else{\r\n\t\t\t\tsearchEl.innerHTML = notice;\r\n\t\t\t}\r\n\r\n\t\t\tlistEl.appendChild(searchEl);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction parseItems(inputValues){\r\n\t\tvar itemList = [];\r\n\r\n\t\tif(Array.isArray(inputValues)){\r\n\t\t\tinputValues.forEach(function(value){\r\n\r\n\t\t\t\tvar item = {};\r\n\r\n\t\t\t\tif(typeof value === \"object\"){\r\n\t\t\t\t\titem.title = editorParams.listItemFormatter ? editorParams.listItemFormatter(value.value, value.label) : value.label;\r\n\t\t\t\t\titem.value = value.value;\r\n\t\t\t\t}else{\r\n\t\t\t\t\titem.title = editorParams.listItemFormatter ? editorParams.listItemFormatter(value, value) : value;\r\n\t\t\t\t\titem.value = value;\r\n\t\t\t\t}\r\n\r\n\t\t\t\titemList.push(item);\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tfor(var key in inputValues){\r\n\t\t\t\tvar item = {\r\n\t\t\t\t\ttitle:editorParams.listItemFormatter ? editorParams.listItemFormatter(key, inputValues[key]) : inputValues[key],\r\n\t\t\t\t\tvalue:key,\r\n\t\t\t\t};\r\n\r\n\t\t\t\titemList.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn itemList;\r\n\t}\r\n\r\n\tfunction clearList(){\r\n\t\twhile(listEl.firstChild) listEl.removeChild(listEl.firstChild);\r\n\t}\r\n\r\n\tfunction fillListIfNotEmpty(items, intialLoad){\r\n\t\tif(items.length){\r\n\t\t\tfillList(items, intialLoad);\r\n\t\t}else{\r\n\t\t\tif(editorParams.emptyPlaceholder){\r\n\t\t\t\taddNotice(editorParams.emptyPlaceholder);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction fillList(items, intialLoad){\r\n\t\tvar current = false;\r\n\r\n\t\tclearList();\r\n\r\n\t\tdisplayItems = items;\r\n\r\n\t\tdisplayItems.forEach(function(item){\r\n\t\t\tvar el = item.element;\r\n\r\n\t\t\tif(!el){\r\n\t\t\t\tel = document.createElement(\"div\");\r\n\t\t\t\tel.classList.add(\"tabulator-edit-select-list-item\");\r\n\t\t\t\tel.tabIndex = 0;\r\n\t\t\t\tel.innerHTML = item.title;\r\n\r\n\t\t\t\tel.addEventListener(\"click\", function(e){\r\n\t\t\t\t\tsetCurrentItem(item);\r\n\t\t\t\t\tchooseItem();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tel.addEventListener(\"mousedown\", function(e){\r\n\t\t\t\t\tblurable = false;\r\n\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\tblurable = true;\r\n\t\t\t\t\t}, 10);\r\n\t\t\t\t});\r\n\r\n\t\t\t\titem.element = el;\r\n\r\n\t\t\t\tif(intialLoad && item.value == initialValue){\r\n\t\t\t\t\tinput.value = item.title;\r\n\t\t\t\t\titem.element.classList.add(\"active\");\r\n\t\t\t\t\tcurrent = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(item === currentItem){\r\n\t\t\t\t\titem.element.classList.add(\"active\");\r\n\t\t\t\t\tcurrent = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlistEl.appendChild(el);\r\n\t\t});\r\n\r\n\t\tif(!current){\r\n\t\t\tsetCurrentItem(false);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction chooseItem(){\r\n\t\thideList();\r\n\r\n\t\tif(currentItem){\r\n\t\t\tif(initialValue !== currentItem.value){\r\n\t\t\t\tinitialValue = currentItem.value;\r\n\t\t\t\tinput.value = currentItem.title;\r\n\t\t\t\tsuccess(currentItem.value);\r\n\t\t\t}else{\r\n\t\t\t\tcancel();\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(editorParams.freetext){\r\n\t\t\t\tinitialValue = input.value;\r\n\t\t\t\tsuccess(input.value);\r\n\t\t\t}else{\r\n\t\t\t\tif(editorParams.allowEmpty && input.value === \"\"){\r\n\t\t\t\t\tinitialValue = input.value;\r\n\t\t\t\t\tsuccess(input.value);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcancel();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction showList(){\r\n\t\tif(!listEl.parentNode){\r\n\r\n\t\t\tconsole.log(\"show\", initialDisplayValue)\r\n\t\t\twhile(listEl.firstChild) listEl.removeChild(listEl.firstChild);\r\n\r\n\t\t\tvar offset = Helpers.elOffset(cellEl);\r\n\r\n\t\t\tlistEl.style.minWidth = cellEl.offsetWidth + \"px\";\r\n\r\n\t\t\tlistEl.style.top = (offset.top + cellEl.offsetHeight) + \"px\";\r\n\t\t\tlistEl.style.left = offset.left + \"px\";\r\n\t\t\tdocument.body.appendChild(listEl);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction setCurrentItem(item, showInputValue){\r\n\t\tif(currentItem && currentItem.element){\r\n\t\t\tcurrentItem.element.classList.remove(\"active\");\r\n\t\t}\r\n\r\n\t\tcurrentItem = item;\r\n\r\n\t\tif(item && item.element){\r\n\t\t\titem.element.classList.add(\"active\");\r\n\t\t}\r\n\r\n\t\tif(item && item.element && item.element.scrollIntoView){\r\n\t\t\titem.element.scrollIntoView({behavior: 'smooth', block: 'nearest', inline: 'start'});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction hideList(){\r\n\t\tif(listEl.parentNode){\r\n\t\t\tlistEl.parentNode.removeChild(listEl);\r\n\t\t}\r\n\r\n\t\tremoveScrollListener();\r\n\t}\r\n\r\n\r\n\tfunction cancelItem(){\r\n\t\thideList();\r\n\t\tcancel();\r\n\t}\r\n\r\n\tfunction removeScrollListener() {\r\n\t\tself.table.rowManager.element.removeEventListener(\"scroll\", cancelItem);\r\n\t}\r\n\r\n\t//allow key based navigation\r\n\tinput.addEventListener(\"keydown\", function(e){\r\n\t\tvar index;\r\n\r\n\t\tswitch(e.keyCode){\r\n\t\t\tcase 38: //up arrow\r\n\t\t\tindex = displayItems.indexOf(currentItem);\r\n\r\n\t\t\tif(vertNav == \"editor\" || (vertNav == \"hybrid\" && index)){\r\n\t\t\t\te.stopImmediatePropagation();\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tif(index > 0){\r\n\t\t\t\t\tsetCurrentItem(displayItems[index - 1]);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tsetCurrentItem(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 40: //down arrow\r\n\r\n\t\t\tindex = displayItems.indexOf(currentItem);\r\n\r\n\t\t\tif(vertNav == \"editor\" || (vertNav == \"hybrid\" && index < displayItems.length - 1)){\r\n\r\n\t\t\t\te.stopImmediatePropagation();\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tif(index < displayItems.length - 1){\r\n\t\t\t\t\tif(index == -1){\r\n\t\t\t\t\t\tsetCurrentItem(displayItems[0]);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tsetCurrentItem(displayItems[index + 1]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\r\n\t\t\tcase 37: //left arrow\r\n\t\t\tcase 39: //right arrow\r\n\t\t\te.stopImmediatePropagation();\r\n\t\t\te.stopPropagation();\r\n\t\t\t// e.preventDefault();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 13: //enter\r\n\t\t\tchooseItem();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 27: //escape\r\n\t\t\tcancelItem();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 36: //home\r\n\t\t\tcase 35: //end\r\n\t\t\t//prevent table navigation while using input element\r\n\t\t\te.stopImmediatePropagation();\r\n\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n\r\n\tinput.addEventListener(\"keyup\", function(e){\r\n\r\n\t\tswitch(e.keyCode){\r\n\t\t\tcase 38: //up arrow\r\n\t\t\tcase 37: //left arrow\r\n\t\t\tcase 39: //up arrow\r\n\t\t\tcase 40: //right arrow\r\n\t\t\tcase 13: //enter\r\n\t\t\tcase 27: //escape\r\n\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\tfilterList(input.value);\r\n\t\t}\r\n\r\n\t});\r\n\r\n\tinput.addEventListener(\"search\", function(e){\r\n\t\tfilterList(input.value);\r\n\t});\r\n\r\n\tinput.addEventListener(\"blur\", function(e){\r\n\t\tif(blurable){\r\n\t\t\tchooseItem();\r\n\t\t}\r\n\t});\r\n\r\n\tinput.addEventListener(\"focus\", function(e){\r\n\t\tvar value = initialDisplayValue;\r\n\t\tgenUniqueColumnValues();\r\n\t\tshowList();\r\n\t\tinput.value = value;\r\n\t\tfilterList(value, true);\r\n\t});\r\n\r\n\r\n\tonRendered(function(){\r\n\t\tinput.style.height = \"100%\";\r\n\t\tinput.focus({preventScroll: true});\r\n\t});\r\n\r\n\tif(editorParams.mask){\r\n\t\tthis.table.modules.edit.maskInput(input, editorParams);\r\n\t}\r\n\r\n\tsetTimeout(() => {\r\n\t\tthis.table.rowManager.element.addEventListener(\"scroll\", cancelItem);\r\n\t}, 10);\r\n\r\n\tgenUniqueColumnValues();\r\n\tinput.value = initialDisplayValue;\r\n\tfilterList(initialDisplayValue, true);\r\n\r\n\treturn input;\r\n};","//star rating\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n\tvar self = this,\r\n\telement = cell.getElement(),\r\n\tvalue = cell.getValue(),\r\n\tmaxStars = element.getElementsByTagName(\"svg\").length || 5,\r\n\tsize = element.getElementsByTagName(\"svg\")[0] ? element.getElementsByTagName(\"svg\")[0].getAttribute(\"width\") : 14,\r\n\tstars = [],\r\n\tstarsHolder = document.createElement(\"div\"),\r\n\tstar = document.createElementNS('http://www.w3.org/2000/svg', \"svg\");\r\n\r\n\r\n\t//change star type\r\n\tfunction starChange(val){\r\n\t\tstars.forEach(function(star, i){\r\n\t\t\tif(i < val){\r\n\t\t\t\tif(self.table.browser == \"ie\"){\r\n\t\t\t\t\tstar.setAttribute(\"class\", \"tabulator-star-active\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tstar.classList.replace(\"tabulator-star-inactive\", \"tabulator-star-active\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstar.innerHTML = '<polygon fill=\"#488CE9\" stroke=\"#014AAE\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\r\n\t\t\t}else{\r\n\t\t\t\tif(self.table.browser == \"ie\"){\r\n\t\t\t\t\tstar.setAttribute(\"class\", \"tabulator-star-inactive\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tstar.classList.replace(\"tabulator-star-active\", \"tabulator-star-inactive\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstar.innerHTML = '<polygon fill=\"#010155\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//build stars\r\n\tfunction buildStar(i){\r\n\r\n\t\tvar starHolder =  document.createElement(\"span\");\r\n\t\tvar nextStar = star.cloneNode(true);\r\n\r\n\t\tstars.push(nextStar);\r\n\r\n\t\tstarHolder.addEventListener(\"mouseenter\", function(e){\r\n\t\t\te.stopPropagation();\r\n\t\t\te.stopImmediatePropagation();\r\n\t\t\tstarChange(i);\r\n\t\t});\r\n\r\n\t\tstarHolder.addEventListener(\"mousemove\", function(e){\r\n\t\t\te.stopPropagation();\r\n\t\t\te.stopImmediatePropagation();\r\n\t\t});\r\n\r\n\t\tstarHolder.addEventListener(\"click\", function(e){\r\n\t\t\te.stopPropagation();\r\n\t\t\te.stopImmediatePropagation();\r\n\t\t\tsuccess(i);\r\n\t\t\telement.blur();\r\n\t\t});\r\n\r\n\t\tstarHolder.appendChild(nextStar);\r\n\t\tstarsHolder.appendChild(starHolder);\r\n\r\n\t}\r\n\r\n\t//handle keyboard navigation value change\r\n\tfunction changeValue(val){\r\n\t\tvalue = val;\r\n\t\tstarChange(val);\r\n\t}\r\n\r\n\t//style cell\r\n\telement.style.whiteSpace = \"nowrap\";\r\n\telement.style.overflow = \"hidden\";\r\n\telement.style.textOverflow = \"ellipsis\";\r\n\r\n\t//style holding element\r\n\tstarsHolder.style.verticalAlign = \"middle\";\r\n\tstarsHolder.style.display = \"inline-block\";\r\n\tstarsHolder.style.padding = \"4px\";\r\n\r\n\t//style star\r\n\tstar.setAttribute(\"width\", size);\r\n\tstar.setAttribute(\"height\", size);\r\n\tstar.setAttribute(\"viewBox\", \"0 0 512 512\");\r\n\tstar.setAttribute(\"xml:space\", \"preserve\");\r\n\tstar.style.padding = \"0 1px\";\r\n\r\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n\t\tfor (let key in editorParams.elementAttributes){\r\n\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\tkey = key.slice(1);\r\n\t\t\t\tstarsHolder.setAttribute(key, starsHolder.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n\t\t\t}else{\r\n\t\t\t\tstarsHolder.setAttribute(key, editorParams.elementAttributes[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//create correct number of stars\r\n\tfor(var i=1;i<= maxStars;i++){\r\n\t\tbuildStar(i);\r\n\t}\r\n\r\n\t//ensure value does not exceed number of stars\r\n\tvalue = Math.min(parseInt(value), maxStars);\r\n\r\n\t// set initial styling of stars\r\n\tstarChange(value);\r\n\r\n\tstarsHolder.addEventListener(\"mousemove\", function(e){\r\n\t\tstarChange(0);\r\n\t});\r\n\r\n\tstarsHolder.addEventListener(\"click\", function(e){\r\n\t\tsuccess(0);\r\n\t});\r\n\r\n\telement.addEventListener(\"blur\", function(e){\r\n\t\tcancel();\r\n\t});\r\n\r\n\t//allow key based navigation\r\n\telement.addEventListener(\"keydown\", function(e){\r\n\t\tswitch(e.keyCode){\r\n\t\t\tcase 39: //right arrow\r\n\t\t\tchangeValue(value + 1);\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 37: //left arrow\r\n\t\t\tchangeValue(value - 1);\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 13: //enter\r\n\t\t\tsuccess(value);\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 27: //escape\r\n\t\t\tcancel();\r\n\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n\r\n\treturn starsHolder;\r\n};","//draggable progress bar\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n\tvar element = cell.getElement(),\r\n\tmax = typeof editorParams.max === \"undefined\" ? ( element.getElementsByTagName(\"div\")[0].getAttribute(\"max\") || 100) : editorParams.max,\r\n\tmin = typeof editorParams.min === \"undefined\" ? ( element.getElementsByTagName(\"div\")[0].getAttribute(\"min\") || 0) : editorParams.min,\r\n\tpercent = (max - min) / 100,\r\n\tvalue = cell.getValue() || 0,\r\n\thandle = document.createElement(\"div\"),\r\n\tbar = document.createElement(\"div\"),\r\n\tmouseDrag, mouseDragWidth;\r\n\r\n\t//set new value\r\n\tfunction updateValue(){\r\n\t\tvar style = window.getComputedStyle(element, null);\r\n\r\n\t\tvar calcVal = (percent * Math.round(bar.offsetWidth / ((element.clientWidth - parseInt(style.getPropertyValue(\"padding-left\")) - parseInt(style.getPropertyValue(\"padding-right\")))/100))) + min;\r\n\t\tsuccess(calcVal);\r\n\t\telement.setAttribute(\"aria-valuenow\", calcVal);\r\n\t\telement.setAttribute(\"aria-label\", value);\r\n\t}\r\n\r\n\t//style handle\r\n\thandle.style.position = \"absolute\";\r\n\thandle.style.right = \"0\";\r\n\thandle.style.top = \"0\";\r\n\thandle.style.bottom = \"0\";\r\n\thandle.style.width = \"5px\";\r\n\thandle.classList.add(\"tabulator-progress-handle\");\r\n\r\n\t//style bar\r\n\tbar.style.display = \"inline-block\";\r\n\tbar.style.position = \"relative\";\r\n\t// bar.style.top = \"8px\";\r\n\t// bar.style.bottom = \"8px\";\r\n\t// bar.style.left = \"4px\";\r\n\t// bar.style.marginRight = \"4px\";\r\n\tbar.style.height = \"100%\";\r\n\tbar.style.backgroundColor = \"#488CE9\";\r\n\tbar.style.maxWidth = \"100%\";\r\n\tbar.style.minWidth = \"0%\";\r\n\r\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n\t\tfor (let key in editorParams.elementAttributes){\r\n\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\tkey = key.slice(1);\r\n\t\t\t\tbar.setAttribute(key, bar.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n\t\t\t}else{\r\n\t\t\t\tbar.setAttribute(key, editorParams.elementAttributes[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//style cell\r\n\telement.style.padding = \"4px 4px\";\r\n\r\n\t//make sure value is in range\r\n\tvalue = Math.min(parseFloat(value), max);\r\n\tvalue = Math.max(parseFloat(value), min);\r\n\r\n\t//workout percentage\r\n\tvalue = Math.round((value - min) / percent);\r\n\t// bar.style.right = value + \"%\";\r\n\tbar.style.width = value + \"%\";\r\n\r\n\telement.setAttribute(\"aria-valuemin\", min);\r\n\telement.setAttribute(\"aria-valuemax\", max);\r\n\r\n\tbar.appendChild(handle);\r\n\r\n\thandle.addEventListener(\"mousedown\", function(e){\r\n\t\tmouseDrag = e.screenX;\r\n\t\tmouseDragWidth = bar.offsetWidth;\r\n\t});\r\n\r\n\thandle.addEventListener(\"mouseover\", function(){\r\n\t\thandle.style.cursor = \"ew-resize\";\r\n\t});\r\n\r\n\telement.addEventListener(\"mousemove\", function(e){\r\n\t\tif(mouseDrag){\r\n\t\t\tbar.style.width = (mouseDragWidth + e.screenX - mouseDrag) + \"px\";\r\n\t\t}\r\n\t});\r\n\r\n\telement.addEventListener(\"mouseup\", function(e){\r\n\t\tif(mouseDrag){\r\n\t\t\te.stopPropagation();\r\n\t\t\te.stopImmediatePropagation();\r\n\r\n\t\t\tmouseDrag = false;\r\n\t\t\tmouseDragWidth = false;\r\n\r\n\t\t\tupdateValue();\r\n\t\t}\r\n\t});\r\n\r\n\t//allow key based navigation\r\n\telement.addEventListener(\"keydown\", function(e){\r\n\t\tswitch(e.keyCode){\r\n\t\t\tcase 39: //right arrow\r\n\t\t\te.preventDefault();\r\n\t\t\tbar.style.width = (bar.clientWidth + element.clientWidth/100) + \"px\";\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 37: //left arrow\r\n\t\t\te.preventDefault();\r\n\t\t\tbar.style.width = (bar.clientWidth - element.clientWidth/100) + \"px\";\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 9: //tab\r\n\t\t\tcase 13: //enter\r\n\t\t\tupdateValue();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 27: //escape\r\n\t\t\tcancel();\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\t});\r\n\r\n\telement.addEventListener(\"blur\", function(){\r\n\t\tcancel();\r\n\t});\r\n\r\n\treturn bar;\r\n};","//checkbox\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n\tvar value = cell.getValue(),\r\n\tinput = document.createElement(\"input\"),\r\n\ttristate = editorParams.tristate,\r\n\tindetermValue = typeof editorParams.indeterminateValue === \"undefined\" ? null : editorParams.indeterminateValue,\r\n\tindetermState = false;\r\n\r\n\tinput.setAttribute(\"type\", \"checkbox\");\r\n\tinput.style.marginTop = \"5px\";\r\n\tinput.style.boxSizing = \"border-box\";\r\n\r\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n\t\tfor (let key in editorParams.elementAttributes){\r\n\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\tkey = key.slice(1);\r\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n\t\t\t}else{\r\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinput.value = value;\r\n\r\n\tif(tristate && (typeof value === \"undefined\" || value === indetermValue || value === \"\")){\r\n\t\tindetermState = true;\r\n\t\tinput.indeterminate = true;\r\n\t}\r\n\r\n\tif(this.table.browser != \"firefox\"){ //prevent blur issue on mac firefox\r\n\t\tonRendered(function(){\r\n\t\t\tinput.focus({preventScroll: true});\r\n\t\t});\r\n\t}\r\n\r\n\tinput.checked = value === true || value === \"true\" || value === \"True\" || value === 1;\r\n\r\n\tonRendered(function(){\r\n\t\tinput.focus();\r\n\t});\r\n\r\n\tfunction setValue(blur){\r\n\t\tif(tristate){\r\n\t\t\tif(!blur){\r\n\t\t\t\tif(input.checked && !indetermState){\r\n\t\t\t\t\tinput.checked = false;\r\n\t\t\t\t\tinput.indeterminate = true;\r\n\t\t\t\t\tindetermState = true;\r\n\t\t\t\t\treturn indetermValue;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tindetermState = false;\r\n\t\t\t\t\treturn input.checked;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(indetermState){\r\n\t\t\t\t\treturn indetermValue;\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn input.checked;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\treturn input.checked;\r\n\t\t}\r\n\t}\r\n\r\n\t//submit new value on blur\r\n\tinput.addEventListener(\"change\", function(e){\r\n\t\tsuccess(setValue());\r\n\t});\r\n\r\n\tinput.addEventListener(\"blur\", function(e){\r\n\t\tsuccess(setValue(true));\r\n\t});\r\n\r\n\t//submit new value on enter\r\n\tinput.addEventListener(\"keydown\", function(e){\r\n\t\tif(e.keyCode == 13){\r\n\t\t\tsuccess(setValue());\r\n\t\t}\r\n\t\tif(e.keyCode == 27){\r\n\t\t\tcancel();\r\n\t\t}\r\n\t});\r\n\r\n\treturn input;\r\n};","import input from './editors/input.js';\r\nimport textarea from './editors/textarea.js';\r\nimport number from './editors/number.js';\r\nimport range from './editors/range.js';\r\nimport select from './editors/select.js';\r\nimport autocomplete from './editors/autocomplete.js';\r\nimport star from './editors/star.js';\r\nimport progress from './editors/progress.js';\r\nimport tickCross from './editors/tickCross.js';\r\n\r\nexport default {\r\n\tinput:input,\r\n\ttextarea:textarea,\r\n    number:number,\r\n    range:range,\r\n\tselect:select,\r\n\tautocomplete:autocomplete,\r\n\tstar:star,\r\n\tprogress:progress,\r\n\ttickCross:tickCross,\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport defaultEditors from './defaults/editors.js';\r\n\r\nclass Edit extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.currentCell = false; //hold currently editing cell\r\n\t\tthis.mouseClick = false; //hold mousedown state to prevent click binding being overriden by editor opening\r\n\t\tthis.recursionBlock = false; //prevent focus recursion\r\n\t\tthis.invalidEdit = false;\r\n\t\tthis.editedCells = [];\r\n\t}\r\n\r\n\t//initialize column editor\r\n\tinitializeColumn(column){\r\n\t\tvar self = this,\r\n\t\tconfig = {\r\n\t\t\teditor:false,\r\n\t\t\tblocked:false,\r\n\t\t\tcheck:column.definition.editable,\r\n\t\t\tparams:column.definition.editorParams || {}\r\n\t\t};\r\n\r\n\t\t//set column editor\r\n\t\tswitch(typeof column.definition.editor){\r\n\t\t\tcase \"string\":\r\n\r\n\t\t\tif(column.definition.editor === \"tick\"){\r\n\t\t\t\tcolumn.definition.editor = \"tickCross\";\r\n\t\t\t\tconsole.warn(\"DEPRECATION WARNING - the tick editor has been deprecated, please use the tickCross editor\");\r\n\t\t\t}\r\n\r\n\t\t\tif(Edit.editors[column.definition.editor]){\r\n\t\t\t\tconfig.editor = Edit.editors[column.definition.editor];\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Editor Error - No such editor found: \", column.definition.editor);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\tconfig.editor = column.definition.editor;\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"boolean\":\r\n\r\n\t\t\tif(column.definition.editor === true){\r\n\r\n\t\t\t\tif(typeof column.definition.formatter !== \"function\"){\r\n\r\n\t\t\t\t\tif(column.definition.formatter === \"tick\"){\r\n\t\t\t\t\t\tcolumn.definition.formatter = \"tickCross\";\r\n\t\t\t\t\t\tconsole.warn(\"DEPRECATION WARNING - the tick editor has been deprecated, please use the tickCross editor\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(Edit.editors[column.definition.formatter]){\r\n\t\t\t\t\t\tconfig.editor = Edit.editors[column.definition.formatter];\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tconfig.editor = Edit.editors[\"input\"];\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Editor Error - Cannot auto lookup editor for a custom formatter: \", column.definition.formatter);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tif(config.editor){\r\n\t\t\tcolumn.modules.edit = config;\r\n\t\t}\r\n\t}\r\n\r\n\tgetCurrentCell(){\r\n\t\treturn this.currentCell ? this.currentCell.getComponent() : false;\r\n\t}\r\n\r\n\tclearEditor(cancel){\r\n\t\tvar cell = this.currentCell,\r\n\t\tcellEl;\r\n\r\n\t\tthis.invalidEdit = false;\r\n\r\n\t\tif(cell){\r\n\t\t\tthis.currentCell = false;\r\n\r\n\t\t\tcellEl = cell.getElement();\r\n\r\n\t\t\tif(cancel){\r\n\t\t\t\tcell.validate();\r\n\t\t\t}else{\r\n\t\t\t\tcellEl.classList.remove(\"tabulator-validation-fail\");\r\n\t\t\t}\r\n\r\n\t\t\tcellEl.classList.remove(\"tabulator-editing\");\r\n\t\t\twhile(cellEl.firstChild) cellEl.removeChild(cellEl.firstChild);\r\n\r\n\t\t\tcell.row.getElement().classList.remove(\"tabulator-row-editing\");\r\n\t\t}\r\n\t}\r\n\r\n\tcancelEdit(){\r\n\t\tif(this.currentCell){\r\n\t\t\tvar cell = this.currentCell;\r\n\t\t\tvar component = this.currentCell.getComponent();\r\n\r\n\t\t\tthis.clearEditor(true);\r\n\t\t\tcell.setValueActual(cell.getValue());\r\n\t\t\tcell.cellRendered();\r\n\r\n\t\t\tif(cell.column.definition.editor == \"textarea\" || cell.column.definition.variableHeight){\r\n\t\t\t\tcell.row.normalizeHeight(true);\r\n\t\t\t}\r\n\r\n\t\t\tif(cell.column.cellEvents.cellEditCancelled){\r\n\t\t\t\tcell.column.cellEvents.cellEditCancelled.call(this.table, component);\r\n\t\t\t}\r\n\r\n\t\t\tthis.table.options.cellEditCancelled.call(this.table, component);\r\n\t\t}\r\n\t}\r\n\r\n\t//return a formatted value for a cell\r\n\tbindEditor(cell){\r\n\t\tvar self = this,\r\n\t\telement = cell.getElement(true);\r\n\r\n\t\telement.setAttribute(\"tabindex\", 0);\r\n\r\n\t\telement.addEventListener(\"click\", function(e){\r\n\t\t\tif(!element.classList.contains(\"tabulator-editing\")){\r\n\t\t\t\telement.focus({preventScroll: true});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\telement.addEventListener(\"mousedown\", function(e){\r\n\t\t\tif (e.button === 2) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}else{\r\n\t\t\t\tself.mouseClick = true;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\telement.addEventListener(\"focus\", function(e){\r\n\t\t\tif(!self.recursionBlock){\r\n\t\t\t\tself.edit(cell, e, false);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tfocusCellNoEvent(cell, block){\r\n\t\tthis.recursionBlock = true;\r\n\r\n\t\tif(!(block && this.table.browser === \"ie\")){\r\n\t\t\tcell.getElement().focus({preventScroll: true});\r\n\t\t}\r\n\r\n\t\tthis.recursionBlock = false;\r\n\t}\r\n\r\n\teditCell(cell, forceEdit){\r\n\t\tthis.focusCellNoEvent(cell);\r\n\t\tthis.edit(cell, false, forceEdit);\r\n\t}\r\n\r\n\tfocusScrollAdjust(cell){\r\n\t\tif(this.table.rowManager.getRenderMode() == \"virtual\"){\r\n\t\t\tvar topEdge = this.table.rowManager.element.scrollTop,\r\n\t\t\tbottomEdge = this.table.rowManager.element.clientHeight + this.table.rowManager.element.scrollTop,\r\n\t\t\trowEl = cell.row.getElement(),\r\n\t\t\toffset = rowEl.offsetTop;\r\n\r\n\t\t\tif(rowEl.offsetTop < topEdge){\r\n\t\t\t\tthis.table.rowManager.element.scrollTop -= (topEdge - rowEl.offsetTop);\r\n\t\t\t}else{\r\n\t\t\t\tif(rowEl.offsetTop + rowEl.offsetHeight  > bottomEdge){\r\n\t\t\t\t\tthis.table.rowManager.element.scrollTop += (rowEl.offsetTop + rowEl.offsetHeight - bottomEdge);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar leftEdge = this.table.rowManager.element.scrollLeft,\r\n\t\t\trightEdge = this.table.rowManager.element.clientWidth + this.table.rowManager.element.scrollLeft,\r\n\t\t\tcellEl = cell.getElement(),\r\n\t\t\toffset = cellEl.offsetLeft;\r\n\r\n\t\t\tif(this.table.modExists(\"frozenColumns\")){\r\n\t\t\t\tleftEdge += parseInt(this.table.modules.frozenColumns.leftMargin);\r\n\t\t\t\trightEdge -= parseInt(this.table.modules.frozenColumns.rightMargin);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.options.virtualDomHoz){\r\n\t\t\t\tleftEdge -= parseInt(this.table.vdomHoz.vDomPadLeft);\r\n\t\t\t\trightEdge -= parseInt(this.table.vdomHoz.vDomPadLeft);\r\n\t\t\t}\r\n\r\n\t\t\tif(cellEl.offsetLeft < leftEdge){\r\n\r\n\t\t\t\tthis.table.rowManager.element.scrollLeft -= (leftEdge - cellEl.offsetLeft);\r\n\t\t\t}else{\r\n\t\t\t\tif(cellEl.offsetLeft + cellEl.offsetWidth  > rightEdge){\r\n\t\t\t\t\tthis.table.rowManager.element.scrollLeft += (cellEl.offsetLeft + cellEl.offsetWidth - rightEdge);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tedit(cell, e, forceEdit){\r\n\t\tvar self = this,\r\n\t\tallowEdit = true,\r\n\t\trendered = function(){},\r\n\t\telement = cell.getElement(),\r\n\t\tcellEditor, component, params;\r\n\r\n\t\t//prevent editing if another cell is refusing to leave focus (eg. validation fail)\r\n\t\tif(this.currentCell){\r\n\t\t\tif(!this.invalidEdit){\r\n\t\t\t\tthis.cancelEdit();\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//handle successfull value change\r\n\t\tfunction success(value){\r\n\t\t\tif(self.currentCell === cell){\r\n\t\t\t\tvar valid = true;\r\n\r\n\t\t\t\tif(cell.column.modules.validate && self.table.modExists(\"validate\") && self.table.options.validationMode != \"manual\"){\r\n\t\t\t\t\tvalid = self.table.modules.validate.validate(cell.column.modules.validate, cell, value);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(valid === true || self.table.options.validationMode === \"highlight\"){\r\n\t\t\t\t\tself.clearEditor();\r\n\r\n\r\n\t\t\t\t\tif(!cell.modules.edit){\r\n\t\t\t\t\t\tcell.modules.edit = {};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcell.modules.edit.edited = true;\r\n\r\n\t\t\t\t\tif(self.editedCells.indexOf(cell) == -1){\r\n\t\t\t\t\t\tself.editedCells.push(cell);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcell.setValue(value, true);\r\n\r\n\t\t\t\t\tif(self.table.options.dataTree && self.table.modExists(\"dataTree\")){\r\n\t\t\t\t\t\tself.table.modules.dataTree.checkForRestyle(cell);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(valid !== true){\r\n\t\t\t\t\t\telement.classList.add(\"tabulator-validation-fail\");\r\n\t\t\t\t\t\tself.table.options.validationFailed.call(self.table, cell.getComponent(), value, valid);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tself.invalidEdit = true;\r\n\t\t\t\t\telement.classList.add(\"tabulator-validation-fail\");\r\n\t\t\t\t\tself.focusCellNoEvent(cell, true);\r\n\t\t\t\t\trendered();\r\n\t\t\t\t\tself.table.options.validationFailed.call(self.table, cell.getComponent(), value, valid);\r\n\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\t// console.warn(\"Edit Success Error - cannot call success on a cell that is no longer being edited\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//handle aborted edit\r\n\t\tfunction cancel(){\r\n\t\t\tif(self.currentCell === cell){\r\n\t\t\t\tself.cancelEdit();\r\n\r\n\t\t\t\tif(self.table.options.dataTree && self.table.modExists(\"dataTree\")){\r\n\t\t\t\t\tself.table.modules.dataTree.checkForRestyle(cell);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\t// console.warn(\"Edit Success Error - cannot call cancel on a cell that is no longer being edited\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onRendered(callback){\r\n\t\t\trendered = callback;\r\n\t\t}\r\n\r\n\t\tif(!cell.column.modules.edit.blocked){\r\n\t\t\tif(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t}\r\n\r\n\t\t\tswitch(typeof cell.column.modules.edit.check){\r\n\t\t\t\tcase \"function\":\r\n\t\t\t\tallowEdit = cell.column.modules.edit.check(cell.getComponent());\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"boolean\":\r\n\t\t\t\tallowEdit = cell.column.modules.edit.check;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tif(allowEdit || forceEdit){\r\n\r\n\t\t\t\tself.cancelEdit();\r\n\r\n\t\t\t\tself.currentCell = cell;\r\n\r\n\t\t\t\tthis.focusScrollAdjust(cell);\r\n\r\n\t\t\t\tcomponent = cell.getComponent();\r\n\r\n\t\t\t\tif(this.mouseClick){\r\n\t\t\t\t\tthis.mouseClick = false;\r\n\r\n\t\t\t\t\tif(cell.column.cellEvents.cellClick){\r\n\t\t\t\t\t\tcell.column.cellEvents.cellClick.call(this.table, e, component);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(cell.column.cellEvents.cellEditing){\r\n\t\t\t\t\tcell.column.cellEvents.cellEditing.call(this.table, component);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tself.table.options.cellEditing.call(this.table, component);\r\n\r\n\t\t\t\tparams = typeof cell.column.modules.edit.params === \"function\" ? cell.column.modules.edit.params(component) : cell.column.modules.edit.params;\r\n\r\n\t\t\t\tcellEditor = cell.column.modules.edit.editor.call(self, component, onRendered, success, cancel, params);\r\n\r\n\t\t\t\t//if editor returned, add to DOM, if false, abort edit\r\n\t\t\t\tif(cellEditor !== false){\r\n\r\n\t\t\t\t\tif(cellEditor instanceof Node){\r\n\t\t\t\t\t\telement.classList.add(\"tabulator-editing\");\r\n\t\t\t\t\t\tcell.row.getElement().classList.add(\"tabulator-row-editing\");\r\n\t\t\t\t\t\twhile(element.firstChild) element.removeChild(element.firstChild);\r\n\t\t\t\t\t\telement.appendChild(cellEditor);\r\n\r\n\t\t\t\t\t\t//trigger onRendered Callback\r\n\t\t\t\t\t\trendered();\r\n\r\n\t\t\t\t\t\t//prevent editing from triggering rowClick event\r\n\t\t\t\t\t\tvar children = element.children;\r\n\r\n\t\t\t\t\t\tfor (var i = 0; i < children.length; i++) {\r\n\t\t\t\t\t\t\tchildren[i].addEventListener(\"click\", function(e){\r\n\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tconsole.warn(\"Edit Error - Editor should return an instance of Node, the editor returned:\", cellEditor);\r\n\t\t\t\t\t\telement.blur();\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}else{\r\n\t\t\t\t\telement.blur();\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn true;\r\n\t\t\t}else{\r\n\t\t\t\tthis.mouseClick = false;\r\n\t\t\t\telement.blur();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.mouseClick = false;\r\n\t\t\telement.blur();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tmaskInput(el, options){\r\n\t\tvar mask = options.mask,\r\n\t\tmaskLetter = typeof options.maskLetterChar !== \"undefined\" ? options.maskLetterChar : \"A\",\r\n\t\tmaskNumber = typeof options.maskNumberChar !== \"undefined\" ? options.maskNumberChar : \"9\",\r\n\t\tmaskWildcard = typeof options.maskWildcardChar !== \"undefined\" ? options.maskWildcardChar : \"*\",\r\n\t\tsuccess = false;\r\n\r\n\t\tfunction fillSymbols(index){\r\n\t\t\tvar symbol = mask[index];\r\n\t\t\tif(typeof symbol !== \"undefined\" && symbol !== maskWildcard && symbol !== maskLetter && symbol !== maskNumber){\r\n\t\t\t\tel.value = el.value + \"\" + symbol;\r\n\t\t\t\tfillSymbols(index+1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tel.addEventListener(\"keydown\", (e) => {\r\n\t\t\tvar index = el.value.length,\r\n\t\t\tchar = e.key;\r\n\r\n\t\t\tif(e.keyCode > 46){\r\n\t\t\t\tif(index >= mask.length){\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\tsuccess = false;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tswitch(mask[index]){\r\n\t\t\t\t\t\tcase maskLetter:\r\n\t\t\t\t\t\tif(char.toUpperCase() == char.toLowerCase()){\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\tsuccess = false;\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase maskNumber:\r\n\t\t\t\t\t\tif(isNaN(char)){\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\tsuccess = false;\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase maskWildcard:\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tif(char !== mask[index]){\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\tsuccess = false;\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsuccess = true;\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\t\t});\r\n\r\n\t\tel.addEventListener(\"keyup\", (e) => {\r\n\t\t\tif(e.keyCode > 46){\r\n\t\t\t\tif(options.maskAutoFill){\r\n\t\t\t\t\tfillSymbols(el.value.length);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\t\tif(!el.placeholder){\r\n\t\t\tel.placeholder = mask;\r\n\t\t}\r\n\r\n\t\tif(options.maskAutoFill){\r\n\t\t\tfillSymbols(el.value.length);\r\n\t\t}\r\n\t}\r\n\r\n\tgetEditedCells(){\r\n\t\tvar output = [];\r\n\r\n\t\tthis.editedCells.forEach((cell) => {\r\n\t\t\toutput.push(cell.getComponent());\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tclearEdited(cell){\r\n\t\tvar editIndex;\r\n\r\n\t\tif(cell.modules.edit && cell.modules.edit.edited){\r\n\t\t\tcell.modules.edit.edited = false;\r\n\r\n\t\t\tif(cell.modules.validate){\r\n\t\t\t\tcell.modules.validate.invalid = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\teditIndex = this.editedCells.indexOf(cell);\r\n\r\n\t\tif(editIndex > -1){\r\n\t\t\tthis.editedCells.splice(editIndex, 1);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nEdit.moduleName = \"edit\";\r\n\r\n//load defaults\r\nEdit.editors = defaultEditors;\r\n\r\n\r\nexport default Edit;","class ExportRow{\r\n\tconstructor(type, columns, component, indent){\r\n\t\tthis.type = type;\r\n\t\tthis.columns = columns;\r\n\t\tthis.component = component || false;\r\n\t\tthis.indent = indent || 0;\r\n\t}\r\n}\r\n\r\nexport default ExportRow;","class ExportColumn{\r\n\tconstructor(value, component, width, height, depth){\r\n\t\tthis.value = value;\r\n\t\tthis.component = component || false;\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\t\tthis.depth = depth;\r\n\t}\r\n}\r\n\r\nexport default ExportColumn;","import Module from '../../core/Module.js';\r\n\r\nimport ExportRow from './ExportRow.js';\r\nimport ExportColumn from './ExportColumn.js';\r\n\r\nclass Export extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.config = {};\r\n\t\tthis.cloneTableStyle = true;\r\n\t\tthis.colVisProp = \"\";\r\n\t}\r\n\r\n\tgenerateExportList(config, style, range, colVisProp){\r\n\t\tthis.cloneTableStyle = style;\r\n\t\tthis.config = config || {};\r\n\t\tthis.colVisProp = colVisProp;\r\n\r\n\t\tvar headers = this.config.columnHeaders !== false ? this.headersToExportRows(this.generateColumnGroupHeaders()) : [];\r\n\t\tvar body = this.bodyToExportRows(this.rowLookup(range));\r\n\r\n\t\treturn headers.concat(body);\r\n\t}\r\n\r\n\tgenereateTable(config, style, range, colVisProp){\r\n\t\tvar list = this.generateExportList(config, style, range, colVisProp);\r\n\r\n\t\treturn this.genereateTableElement(list);\r\n\t}\r\n\r\n\trowLookup(range){\r\n\t\tvar rows = [];\r\n\r\n\t\tif(typeof range == \"function\"){\r\n\t\t\trange.call(this.table).forEach((row) =>{\r\n\t\t\t\trow = this.table.rowManager.findRow(row);\r\n\r\n\t\t\t\tif(row){\r\n\t\t\t\t\trows.push(row);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tswitch(range){\r\n\t\t\t\tcase true:\r\n\t\t\t\tcase \"visible\":\r\n\t\t\t\trows = this.table.rowManager.getVisibleRows(true);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"all\":\r\n\t\t\t\trows = this.table.rowManager.rows;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"selected\":\r\n\t\t\t\trows = this.table.modules.selectRow.selectedRows;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"active\":\r\n\t\t\t\tdefault:\r\n\t\t\t\tif(this.table.options.pagination){\r\n\t\t\t\t\trows = this.table.rowManager.getDisplayRows(this.table.rowManager.displayRows.length - 2);\r\n\t\t\t\t}else{\r\n\t\t\t\t\trows = this.table.rowManager.getDisplayRows();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn Object.assign([], rows);\r\n\t}\r\n\r\n\tgenerateColumnGroupHeaders(){\r\n\t\tvar output = [];\r\n\r\n\t\tvar columns = this.config.columnGroups !== false ? this.table.columnManager.columns : this.table.columnManager.columnsByIndex;\r\n\r\n\t\tcolumns.forEach((column) => {\r\n\t\t\tvar colData = this.processColumnGroup(column);\r\n\r\n\t\t\tif(colData){\r\n\t\t\t\toutput.push(colData);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tprocessColumnGroup(column){\r\n\t\tvar subGroups = column.columns,\r\n\t\tmaxDepth = 0,\r\n\t\ttitle = column.definition[\"title\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))] || column.definition.title;\r\n\r\n\t\tvar groupData = {\r\n\t\t\ttitle:title,\r\n\t\t\tcolumn:column,\r\n\t\t\tdepth:1,\r\n\t\t};\r\n\r\n\t\tif(subGroups.length){\r\n\t\t\tgroupData.subGroups = [];\r\n\t\t\tgroupData.width = 0;\r\n\r\n\t\t\tsubGroups.forEach((subGroup) => {\r\n\t\t\t\tvar subGroupData = this.processColumnGroup(subGroup);\r\n\r\n\t\t\t\tif(subGroupData){\r\n\t\t\t\t\tgroupData.width += subGroupData.width;\r\n\t\t\t\t\tgroupData.subGroups.push(subGroupData);\r\n\r\n\t\t\t\t\tif(subGroupData.depth > maxDepth){\r\n\t\t\t\t\t\tmaxDepth = subGroupData.depth;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tgroupData.depth += maxDepth;\r\n\r\n\t\t\tif(!groupData.width){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(this.columnVisCheck(column)){\r\n\t\t\t\tgroupData.width = 1;\r\n\t\t\t}else{\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn groupData;\r\n\t}\r\n\r\n\tcolumnVisCheck(column){\r\n\t\treturn column.definition[this.colVisProp] !== false && (column.visible || (!column.visible && column.definition[this.colVisProp]));\r\n\t}\r\n\r\n\theadersToExportRows(columns){\r\n\t\tvar headers = [],\r\n\t\theaderDepth = 0,\r\n\t\texportRows = [];\r\n\r\n\t\tfunction parseColumnGroup(column, level){\r\n\r\n\t\t\tvar depth = headerDepth - level;\r\n\r\n\t\t\tif(typeof headers[level] === \"undefined\"){\r\n\t\t\t\theaders[level] = [];\r\n\t\t\t}\r\n\r\n\t\t\tcolumn.height = column.subGroups ? 1 : (depth - column.depth) + 1;\r\n\r\n\t\t\theaders[level].push(column);\r\n\r\n\t\t\tif(column.height > 1){\r\n\t\t\t\tfor(let i = 1; i < column.height; i ++){\r\n\r\n\t\t\t\t\tif(typeof headers[level + i] === \"undefined\"){\r\n\t\t\t\t\t\theaders[level + i] = [];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\theaders[level + i].push(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(column.width > 1){\r\n\t\t\t\tfor(let i = 1; i < column.width; i ++){\r\n\t\t\t\t\theaders[level].push(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(column.subGroups){\r\n\t\t\t\tcolumn.subGroups.forEach(function(subGroup){\r\n\t\t\t\t\tparseColumnGroup(subGroup, level+1);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//calculate maximum header debth\r\n\t\tcolumns.forEach(function(column){\r\n\t\t\tif(column.depth > headerDepth){\r\n\t\t\t\theaderDepth = column.depth;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tcolumns.forEach(function(column){\r\n\t\t\tparseColumnGroup(column,0);\r\n\t\t});\r\n\r\n\t\theaders.forEach((header) => {\r\n\t\t\tvar columns = [];\r\n\r\n\t\t\theader.forEach((col) => {\r\n\t\t\t\tif(col){\r\n\t\t\t\t\tcolumns.push(new ExportColumn(col.title, col.column.getComponent(), col.width, col.height, col.depth));\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcolumns.push(null);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\texportRows.push(new ExportRow(\"header\", columns));\r\n\t\t});\r\n\r\n\t\treturn exportRows;\r\n\t}\r\n\r\n\tbodyToExportRows(rows){\r\n\r\n\t\tvar columns = [];\r\n\t\tvar exportRows = [];\r\n\r\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\r\n\t\t\tif (this.columnVisCheck(column)) {\r\n\t\t\t\tcolumns.push(column.getComponent());\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(this.config.columnCalcs !== false && this.table.modExists(\"columnCalcs\")){\r\n\t\t\tif(this.table.modules.columnCalcs.topInitialized){\r\n\t\t\t\trows.unshift(this.table.modules.columnCalcs.topRow);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.modules.columnCalcs.botInitialized){\r\n\t\t\t\trows.push(this.table.modules.columnCalcs.botRow);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\trows = rows.filter((row) => {\r\n\t\t\tswitch(row.type){\r\n\t\t\t\tcase \"group\":\r\n\t\t\t\treturn this.config.rowGroups !== false;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"calc\":\r\n\t\t\t\treturn this.config.columnCalcs !== false;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"row\":\r\n\t\t\t\treturn !(this.table.options.dataTree && this.config.dataTree === false && row.modules.dataTree.parent);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\trows.forEach((row, i) => {\r\n\t\t\tvar rowData = row.getData(this.colVisProp);\r\n\t\t\tvar exportCols = [];\r\n\t\t\tvar indent = 0;\r\n\r\n\t\t\tswitch(row.type){\r\n\t\t\t\tcase \"group\":\r\n\t\t\t\tindent = row.level;\r\n\t\t\t\texportCols.push(new ExportColumn(row.key, row.getComponent(), columns.length, 1));\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"calc\" :\r\n\t\t\t\tcase \"row\" :\r\n\t\t\t\tcolumns.forEach((col) => {\r\n\t\t\t\t\texportCols.push(new ExportColumn(col._column.getFieldValue(rowData), col, 1, 1));\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(this.table.options.dataTree && this.config.dataTree !== false){\r\n\t\t\t\t\tindent = row.modules.dataTree.index;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\texportRows.push(new ExportRow(row.type, exportCols, row.getComponent(), indent));\r\n\t\t});\r\n\r\n\t\treturn exportRows;\r\n\t}\r\n\r\n\tgenereateTableElement(list){\r\n\t\tvar table = document.createElement(\"table\"),\r\n\t\theaderEl = document.createElement(\"thead\"),\r\n\t\tbodyEl = document.createElement(\"tbody\"),\r\n\t\tstyles = this.lookupTableStyles(),\r\n\t\trowFormatter = this.table.options[\"rowFormatter\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))],\r\n\t\tsetup = {};\r\n\r\n\t\tsetup.rowFormatter = rowFormatter !== null ? rowFormatter : this.table.options.rowFormatter;\r\n\r\n\t\tif(this.table.options.dataTree &&this.config.dataTree !== false && this.table.modExists(\"columnCalcs\")){\r\n\t\t\tsetup.treeElementField = this.table.modules.dataTree.elementField;\r\n\t\t}\r\n\r\n\t\t//assign group header formatter\r\n\t\tsetup.groupHeader = this.table.options[\"groupHeader\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))];\r\n\r\n\t\tif(setup.groupHeader && !Array.isArray(setup.groupHeader)){\r\n\t\t\tsetup.groupHeader = [setup.groupHeader];\r\n\t\t}\r\n\r\n\t\ttable.classList.add(\"tabulator-print-table\");\r\n\r\n\t\tthis.mapElementStyles(this.table.columnManager.getHeadersElement(), headerEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\r\n\r\n\r\n\t\tif(list.length > 1000){\r\n\t\t\tconsole.warn(\"It may take a long time to render an HTML table with more than 1000 rows\");\r\n\t\t}\r\n\r\n\t\tlist.forEach((row, i) => {\r\n\t\t\tswitch(row.type){\r\n\t\t\t\tcase \"header\":\r\n\t\t\t\theaderEl.appendChild(this.genereateHeaderElement(row, setup, styles));\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"group\":\r\n\t\t\t\tbodyEl.appendChild(this.genereateGroupElement(row, setup, styles));\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"calc\":\r\n\t\t\t\tbodyEl.appendChild(this.genereateCalcElement(row, setup, styles));\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"row\":\r\n\t\t\t\tlet rowEl = this.genereateRowElement(row, setup, styles);\r\n\t\t\t\tthis.mapElementStyles(((i % 2) && styles.evenRow) ? styles.evenRow : styles.oddRow, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\r\n\t\t\t\tbodyEl.appendChild(rowEl);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(headerEl.innerHTML){\r\n\t\t\ttable.appendChild(headerEl);\r\n\t\t}\r\n\r\n\t\ttable.appendChild(bodyEl);\r\n\r\n\r\n\t\tthis.mapElementStyles(this.table.element, table, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\"]);\r\n\t\treturn table;\r\n\t}\r\n\r\n\tlookupTableStyles(){\r\n\t\tvar styles = {};\r\n\r\n\t\t//lookup row styles\r\n\t\tif(this.cloneTableStyle && window.getComputedStyle){\r\n\t\t\tstyles.oddRow = this.table.element.querySelector(\".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)\");\r\n\t\t\tstyles.evenRow = this.table.element.querySelector(\".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)\");\r\n\t\t\tstyles.calcRow = this.table.element.querySelector(\".tabulator-row.tabulator-calcs\");\r\n\t\t\tstyles.firstRow = this.table.element.querySelector(\".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)\");\r\n\t\t\tstyles.firstGroup = this.table.element.getElementsByClassName(\"tabulator-group\")[0];\r\n\r\n\t\t\tif(styles.firstRow){\r\n\t\t\t\tstyles.styleCells = styles.firstRow.getElementsByClassName(\"tabulator-cell\");\r\n\t\t\t\tstyles.firstCell = styles.styleCells[0];\r\n\t\t\t\tstyles.lastCell = styles.styleCells[styles.styleCells.length - 1];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn styles;\r\n\t}\r\n\r\n\tgenereateHeaderElement(row, setup, styles){\r\n\t\tvar rowEl = document.createElement(\"tr\");\r\n\r\n\t\trow.columns.forEach((column) => {\r\n\t\t\tif(column){\r\n\t\t\t\tvar cellEl = document.createElement(\"th\");\r\n\t\t\t\tvar classNames = column.component._column.definition.cssClass ? column.component._column.definition.cssClass.split(\" \") : [];\r\n\r\n\t\t\t\tcellEl.colSpan = column.width;\r\n\t\t\t\tcellEl.rowSpan = column.height;\r\n\r\n\t\t\t\tcellEl.innerHTML = column.value;\r\n\r\n\t\t\t\tif(this.cloneTableStyle){\r\n\t\t\t\t\tcellEl.style.boxSizing = \"border-box\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tclassNames.forEach(function(className) {\r\n\t\t\t\t\tcellEl.classList.add(className);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.mapElementStyles(column.component.getElement(), cellEl, [\"text-align\", \"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\r\n\t\t\t\tthis.mapElementStyles(column.component._column.contentElement, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\r\n\r\n\t\t\t\tif(column.component._column.visible){\r\n\t\t\t\t\tthis.mapElementStyles(column.component.getElement(), cellEl, [\"width\"]);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(column.component._column.definition.width){\r\n\t\t\t\t\t\tcellEl.style.width = column.component._column.definition.width + \"px\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(column.component._column.parent){\r\n\t\t\t\t\tthis.mapElementStyles(column.component._column.parent.groupElement, cellEl, [\"border-top\"]);\r\n\t\t\t\t}\r\n\r\n\t\t\t\trowEl.appendChild(cellEl);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn rowEl;\r\n\t}\r\n\r\n\tgenereateGroupElement(row, setup, styles){\r\n\r\n\t\tvar rowEl = document.createElement(\"tr\"),\r\n\t\tcellEl = document.createElement(\"td\"),\r\n\t\tgroup = row.columns[0];\r\n\r\n\t\trowEl.classList.add(\"tabulator-print-table-row\");\r\n\r\n\t\tif(setup.groupHeader && setup.groupHeader[row.indent]){\r\n\t\t\tgroup.value = setup.groupHeader[row.indent](group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\r\n\t\t}else{\r\n\t\t\tif(setup.groupHeader === false){\r\n\t\t\t\tgroup.value = group.value;\r\n\t\t\t}else{\r\n\t\t\t\tgroup.value = row.component._group.generator(group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcellEl.colSpan = group.width;\r\n\t\tcellEl.innerHTML = group.value;\r\n\r\n\t\trowEl.classList.add(\"tabulator-print-table-group\");\r\n\t\trowEl.classList.add(\"tabulator-group-level-\" + row.indent);\r\n\r\n\t\tif(group.component.isVisible()){\r\n\t\t\trowEl.classList.add(\"tabulator-group-visible\");\r\n\t\t}\r\n\r\n\t\tthis.mapElementStyles(styles.firstGroup, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\r\n\t\tthis.mapElementStyles(styles.firstGroup, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\r\n\r\n\t\trowEl.appendChild(cellEl);\r\n\r\n\t\treturn rowEl;\r\n\t}\r\n\r\n\tgenereateCalcElement(row, setup, styles){\r\n\t\tvar rowEl = this.genereateRowElement(row, setup, styles);\r\n\r\n\t\trowEl.classList.add(\"tabulator-print-table-calcs\");\r\n\t\tthis.mapElementStyles(styles.calcRow, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\r\n\r\n\t\treturn rowEl;\r\n\t}\r\n\r\n\tgenereateRowElement(row, setup, styles){\r\n\t\tvar rowEl = document.createElement(\"tr\");\r\n\r\n\t\trowEl.classList.add(\"tabulator-print-table-row\");\r\n\r\n\t\trow.columns.forEach((col) => {\r\n\r\n\t\t\tif(col){\r\n\t\t\t\tvar cellEl = document.createElement(\"td\"),\r\n\t\t\t\tcolumn = col.component._column,\r\n\t\t\t\tvalue = col.value;\r\n\r\n\t\t\t\tvar cellWrapper = {\r\n\t\t\t\t\tmodules:{},\r\n\t\t\t\t\tgetValue:function(){\r\n\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetField:function(){\r\n\t\t\t\t\t\treturn column.definition.field;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetElement:function(){\r\n\t\t\t\t\t\treturn cellEl;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetColumn:function(){\r\n\t\t\t\t\t\treturn column.getComponent();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetData:function(){\r\n\t\t\t\t\t\treturn row.component.getData();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetRow:function(){\r\n\t\t\t\t\t\treturn row.component;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetComponent:function(){\r\n\t\t\t\t\t\treturn cellWrapper;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcolumn:column,\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar classNames = column.definition.cssClass ? column.definition.cssClass.split(\" \") : [];\r\n\r\n\t\t\t\tclassNames.forEach(function(className) {\r\n\t\t\t\t\tcellEl.classList.add(className);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(this.table.modExists(\"format\") && this.config.formatCells !== false){\r\n\t\t\t\t\tvalue = this.table.modules.format.formatExportValue(cellWrapper, this.colVisProp);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tswitch(typeof value){\r\n\t\t\t\t\t\tcase \"object\":\r\n\t\t\t\t\t\tvalue = JSON.stringify(value);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase \"undefined\":\r\n\t\t\t\t\t\tcase \"null\":\r\n\t\t\t\t\t\tvalue = \"\";\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tvalue = value;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(value instanceof Node){\r\n\t\t\t\t\tcellEl.appendChild(value);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcellEl.innerHTML = value;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(styles.firstCell){\r\n\t\t\t\t\tthis.mapElementStyles(styles.firstCell, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\", \"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\r\n\r\n\t\t\t\t\tif(column.definition.align){\r\n\t\t\t\t\t\tcellEl.style.textAlign = column.definition.align;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this.table.options.dataTree && this.config.dataTree !== false){\r\n\t\t\t\t\tif((setup.treeElementField && setup.treeElementField == column.field) || (!setup.treeElementField && i == 0)){\r\n\t\t\t\t\t\tif(row.component._row.modules.dataTree.controlEl){\r\n\t\t\t\t\t\t\tcellEl.insertBefore(row.component._row.modules.dataTree.controlEl.cloneNode(true), cellEl.firstChild);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(row.component._row.modules.dataTree.branchEl){\r\n\t\t\t\t\t\t\tcellEl.insertBefore(row.component._row.modules.dataTree.branchEl.cloneNode(true), cellEl.firstChild);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\trowEl.appendChild(cellEl);\r\n\r\n\t\t\t\tif(cellWrapper.modules.format && cellWrapper.modules.format.renderedCallback){\r\n\t\t\t\t\tcellWrapper.modules.format.renderedCallback();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(setup.rowFormatter && this.config.formatCells !== false){\r\n\t\t\t\t\tsetup.rowFormatter(row.component);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn rowEl;\r\n\t}\r\n\r\n\tgenereateHTMLTable(list){\r\n\t\tvar holder = document.createElement(\"div\");\r\n\r\n\t\tholder.appendChild(this.genereateTableElement(list));\r\n\r\n\t\treturn holder.innerHTML;\r\n\t}\r\n\r\n\tgetHtml(visible, style, config, colVisProp){\r\n\t\tvar list = this.generateExportList(config || this.table.options.htmlOutputConfig, style, visible, colVisProp || \"htmlOutput\");\r\n\r\n\t\treturn this.genereateHTMLTable(list);\r\n\t}\r\n\r\n\tmapElementStyles(from, to, props){\r\n\t\tif(this.cloneTableStyle && from && to){\r\n\r\n\t\t\tvar lookup = {\r\n\t\t\t\t\"background-color\" : \"backgroundColor\",\r\n\t\t\t\t\"color\" : \"fontColor\",\r\n\t\t\t\t\"width\" : \"width\",\r\n\t\t\t\t\"font-weight\" : \"fontWeight\",\r\n\t\t\t\t\"font-family\" : \"fontFamily\",\r\n\t\t\t\t\"font-size\" : \"fontSize\",\r\n\t\t\t\t\"text-align\" : \"textAlign\",\r\n\t\t\t\t\"border-top\" : \"borderTop\",\r\n\t\t\t\t\"border-left\" : \"borderLeft\",\r\n\t\t\t\t\"border-right\" : \"borderRight\",\r\n\t\t\t\t\"border-bottom\" : \"borderBottom\",\r\n\t\t\t\t\"padding-top\" : \"paddingTop\",\r\n\t\t\t\t\"padding-left\" : \"paddingLeft\",\r\n\t\t\t\t\"padding-right\" : \"paddingRight\",\r\n\t\t\t\t\"padding-bottom\" : \"paddingBottom\",\r\n\t\t\t};\r\n\r\n\t\t\tif(window.getComputedStyle){\r\n\t\t\t\tvar fromStyle = window.getComputedStyle(from);\r\n\r\n\t\t\t\tprops.forEach(function(prop){\r\n\t\t\t\t\tto.style[lookup[prop]] = fromStyle.getPropertyValue(prop);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nExport.moduleName = \"export\";\r\n\r\nexport default Export;\r\n","export default {\r\n\r\n\t//equal to\r\n\t\"=\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\treturn rowVal == filterVal ? true : false;\r\n\t},\r\n\r\n\t//less than\r\n\t\"<\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\treturn rowVal < filterVal ? true : false;\r\n\t},\r\n\r\n\t//less than or equal to\r\n\t\"<=\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\treturn rowVal <= filterVal ? true : false;\r\n\t},\r\n\r\n\t//greater than\r\n\t\">\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\treturn rowVal > filterVal ? true : false;\r\n\t},\r\n\r\n\t//greater than or equal to\r\n\t\">=\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\treturn rowVal >= filterVal ? true : false;\r\n\t},\r\n\r\n\t//not equal to\r\n\t\"!=\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\treturn rowVal != filterVal ? true : false;\r\n\t},\r\n\r\n\t\"regex\":function(filterVal, rowVal, rowData, filterParams){\r\n\r\n\t\tif(typeof filterVal == \"string\"){\r\n\t\t\tfilterVal = new RegExp(filterVal);\r\n\t\t}\r\n\r\n\t\treturn filterVal.test(rowVal);\r\n\t},\r\n\r\n\t//contains the string\r\n\t\"like\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\tif(filterVal === null || typeof filterVal === \"undefined\"){\r\n\t\t\treturn rowVal === filterVal ? true : false;\r\n\t\t}else{\r\n\t\t\tif(typeof rowVal !== 'undefined' && rowVal !== null){\r\n\t\t\t\treturn String(rowVal).toLowerCase().indexOf(filterVal.toLowerCase()) > -1;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t//contains the keywords\r\n\t\"keywords\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\tvar keywords = filterVal.toLowerCase().split(typeof filterParams.separator === \"undefined\" ? \" \" : filterParams.separator),\r\n\t\tvalue = String(rowVal === null || typeof rowVal === \"undefined\" ? \"\" : rowVal).toLowerCase(),\r\n\t\tmatches = [];\r\n\r\n\t\tkeywords.forEach((keyword) =>{\r\n\t\t\tif(value.includes(keyword)){\r\n\t\t\t\tmatches.push(true);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn filterParams.matchAll ? matches.length === keywords.length : !!matches.length;\r\n\t},\r\n\r\n\t//starts with the string\r\n\t\"starts\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\tif(filterVal === null || typeof filterVal === \"undefined\"){\r\n\t\t\treturn rowVal === filterVal ? true : false;\r\n\t\t}else{\r\n\t\t\tif(typeof rowVal !== 'undefined' && rowVal !== null){\r\n\t\t\t\treturn String(rowVal).toLowerCase().startsWith(filterVal.toLowerCase());\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t//ends with the string\r\n\t\"ends\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\tif(filterVal === null || typeof filterVal === \"undefined\"){\r\n\t\t\treturn rowVal === filterVal ? true : false;\r\n\t\t}else{\r\n\t\t\tif(typeof rowVal !== 'undefined' && rowVal !== null){\r\n\t\t\t\treturn String(rowVal).toLowerCase().endsWith(filterVal.toLowerCase());\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t//in array\r\n\t\"in\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\tif(Array.isArray(filterVal)){\r\n\t\t\treturn filterVal.length ? filterVal.indexOf(rowVal) > -1 : true;\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Filter Error - filter value is not an array:\", filterVal);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t},\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport defaultFilters from './defaults/filters.js';\r\n\r\nclass Filter extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.filterList = []; //hold filter list\r\n\t\tthis.headerFilters = {}; //hold column filters\r\n\t\tthis.headerFilterColumns = []; //hold columns that use header filters\r\n\r\n\t\tthis.prevHeaderFilterChangeCheck = \"\";\r\n\t\tthis.prevHeaderFilterChangeCheck = \"{}\";\r\n\r\n\t\tthis.changed = false; //has filtering changed since last render\r\n\t}\r\n\r\n\t//initialize column header filter\r\n\tinitializeColumn(column, value){\r\n\t\tvar self = this,\r\n\t\tfield = column.getField(),\r\n\t\tparams;\r\n\r\n\t\t//handle successfull value change\r\n\t\tfunction success(value){\r\n\t\t\tvar filterType = (column.modules.filter.tagType == \"input\" && column.modules.filter.attrType == \"text\") || column.modules.filter.tagType == \"textarea\" ? \"partial\" : \"match\",\r\n\t\t\ttype = \"\",\r\n\t\t\tfilterChangeCheck = \"\",\r\n\t\t\tfilterFunc;\r\n\r\n\t\t\tif(typeof column.modules.filter.prevSuccess === \"undefined\" || column.modules.filter.prevSuccess !== value){\r\n\r\n\t\t\t\tcolumn.modules.filter.prevSuccess = value;\r\n\r\n\t\t\t\tif(!column.modules.filter.emptyFunc(value)){\r\n\t\t\t\t\tcolumn.modules.filter.value = value;\r\n\r\n\t\t\t\t\tswitch(typeof column.definition.headerFilterFunc){\r\n\t\t\t\t\t\tcase \"string\":\r\n\t\t\t\t\t\tif(Filter.filters[column.definition.headerFilterFunc]){\r\n\t\t\t\t\t\t\ttype = column.definition.headerFilterFunc;\r\n\t\t\t\t\t\t\tfilterFunc = function(data){\r\n\t\t\t\t\t\t\t\tvar params = column.definition.headerFilterFuncParams || {};\r\n\t\t\t\t\t\t\t\tvar fieldVal = column.getFieldValue(data);\r\n\r\n\t\t\t\t\t\t\t\tparams = typeof params === \"function\" ? params(value, fieldVal, data) : params;\r\n\r\n\t\t\t\t\t\t\t\treturn Filter.filters[column.definition.headerFilterFunc](value, fieldVal, data, params);\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tconsole.warn(\"Header Filter Error - Matching filter function not found: \", column.definition.headerFilterFunc);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase \"function\":\r\n\t\t\t\t\t\tfilterFunc = function(data){\r\n\t\t\t\t\t\t\tvar params = column.definition.headerFilterFuncParams || {};\r\n\t\t\t\t\t\t\tvar fieldVal = column.getFieldValue(data);\r\n\r\n\t\t\t\t\t\t\tparams = typeof params === \"function\" ? params(value, fieldVal, data) : params;\r\n\r\n\t\t\t\t\t\t\treturn column.definition.headerFilterFunc(value, fieldVal, data, params);\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\ttype = filterFunc;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(!filterFunc){\r\n\t\t\t\t\t\tswitch(filterType){\r\n\t\t\t\t\t\t\tcase \"partial\":\r\n\t\t\t\t\t\t\tfilterFunc = function(data){\r\n\t\t\t\t\t\t\t\tvar colVal = column.getFieldValue(data);\r\n\r\n\t\t\t\t\t\t\t\tif(typeof colVal !== 'undefined' && colVal !== null){\r\n\t\t\t\t\t\t\t\t\treturn String(colVal).toLowerCase().indexOf(String(value).toLowerCase()) > -1;\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\ttype = \"like\";\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tfilterFunc = function(data){\r\n\t\t\t\t\t\t\t\treturn column.getFieldValue(data) == value;\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\ttype = \"=\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tself.headerFilters[field] = {value:value, func:filterFunc, type:type, params:params || {}};\r\n\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdelete self.headerFilters[field];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfilterChangeCheck = JSON.stringify(self.headerFilters);\r\n\r\n\t\t\t\tif(self.prevHeaderFilterChangeCheck !== filterChangeCheck){\r\n\t\t\t\t\tself.prevHeaderFilterChangeCheck = filterChangeCheck;\r\n\r\n\t\t\t\t\tself.changed = true;\r\n\t\t\t\t\tself.table.rowManager.filterRefresh();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tcolumn.modules.filter = {\r\n\t\t\tsuccess:success,\r\n\t\t\tattrType:false,\r\n\t\t\ttagType:false,\r\n\t\t\temptyFunc:false,\r\n\t\t};\r\n\r\n\t\tthis.generateHeaderFilterElement(column);\r\n\t}\r\n\r\n\tgenerateHeaderFilterElement(column, initialValue, reinitialize){\r\n\t\tvar self = this,\r\n\t\tsuccess = column.modules.filter.success,\r\n\t\tfield = column.getField(),\r\n\t\tfilterElement, editor, editorElement, cellWrapper, typingTimer, searchTrigger, params;\r\n\r\n\t\t//handle aborted edit\r\n\t\tfunction cancel(){}\r\n\r\n\t\tif(column.modules.filter.headerElement && column.modules.filter.headerElement.parentNode){\r\n\t\t\tcolumn.contentElement.removeChild(column.modules.filter.headerElement.parentNode);\r\n\t\t}\r\n\r\n\t\tif(field){\r\n\r\n\t\t\t//set empty value function\r\n\t\t\tcolumn.modules.filter.emptyFunc = column.definition.headerFilterEmptyCheck || function(value){\r\n\t\t\t\treturn !value && value !== \"0\" && value !== 0;\r\n\t\t\t};\r\n\r\n\t\t\tfilterElement = document.createElement(\"div\");\r\n\t\t\tfilterElement.classList.add(\"tabulator-header-filter\");\r\n\r\n\t\t\t//set column editor\r\n\t\t\tswitch(typeof column.definition.headerFilter){\r\n\t\t\t\tcase \"string\":\r\n\t\t\t\tif(self.table.modules.edit.editors[column.definition.headerFilter]){\r\n\t\t\t\t\teditor = self.table.modules.edit.editors[column.definition.headerFilter];\r\n\r\n\t\t\t\t\tif((column.definition.headerFilter === \"tick\" || column.definition.headerFilter === \"tickCross\") && !column.definition.headerFilterEmptyCheck){\r\n\t\t\t\t\t\tcolumn.modules.filter.emptyFunc = function(value){\r\n\t\t\t\t\t\t\treturn value !== true && value !== false;\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Filter Error - Cannot build header filter, No such editor found: \", column.definition.editor);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"function\":\r\n\t\t\t\teditor = column.definition.headerFilter;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"boolean\":\r\n\t\t\t\tif(column.modules.edit && column.modules.edit.editor){\r\n\t\t\t\t\teditor = column.modules.edit.editor;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(column.definition.formatter && self.table.modules.edit.editors[column.definition.formatter]){\r\n\t\t\t\t\t\teditor = self.table.modules.edit.editors[column.definition.formatter];\r\n\r\n\t\t\t\t\t\tif((column.definition.formatter === \"tick\" || column.definition.formatter === \"tickCross\") && !column.definition.headerFilterEmptyCheck){\r\n\t\t\t\t\t\t\tcolumn.modules.filter.emptyFunc = function(value){\r\n\t\t\t\t\t\t\t\treturn value !== true && value !== false;\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\teditor = self.table.modules.edit.editors[\"input\"];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tif(editor){\r\n\r\n\t\t\t\tcellWrapper = {\r\n\t\t\t\t\tgetValue:function(){\r\n\t\t\t\t\t\treturn typeof initialValue !== \"undefined\" ? initialValue : \"\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetField:function(){\r\n\t\t\t\t\t\treturn column.definition.field;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetElement:function(){\r\n\t\t\t\t\t\treturn filterElement;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetColumn:function(){\r\n\t\t\t\t\t\treturn column.getComponent();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetRow:function(){\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tnormalizeHeight:function(){\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tparams = column.definition.headerFilterParams || {};\r\n\r\n\t\t\t\tparams = typeof params === \"function\" ? params.call(self.table) : params;\r\n\r\n\t\t\t\teditorElement = editor.call(this.table.modules.edit, cellWrapper, function(){}, success, cancel, params);\r\n\r\n\t\t\t\tif(!editorElement){\r\n\t\t\t\t\tconsole.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor returned a value of false\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!(editorElement instanceof Node)){\r\n\t\t\t\t\tconsole.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor should return an instance of Node, the editor returned:\", editorElement);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//set Placeholder Text\r\n\t\t\t\tif(field){\r\n\t\t\t\t\tself.table.modules.localize.bind(\"headerFilters|columns|\" + column.definition.field, function(value){\r\n\t\t\t\t\t\teditorElement.setAttribute(\"placeholder\", typeof value !== \"undefined\" && value ? value : self.table.modules.localize.getText(\"headerFilters|default\"));\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tself.table.modules.localize.bind(\"headerFilters|default\", function(value){\r\n\t\t\t\t\t\teditorElement.setAttribute(\"placeholder\", typeof self.column.definition.headerFilterPlaceholder !== \"undefined\" && self.column.definition.headerFilterPlaceholder ? self.column.definition.headerFilterPlaceholder : value);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//focus on element on click\r\n\t\t\t\teditorElement.addEventListener(\"click\", function(e){\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\teditorElement.focus();\r\n\t\t\t\t});\r\n\r\n\t\t\t\teditorElement.addEventListener(\"focus\", (e) => {\r\n\t\t\t\t\tvar left = this.table.columnManager.element.scrollLeft;\r\n\r\n\t\t\t\t\tif(left !== this.table.rowManager.element.scrollLeft){\r\n\t\t\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\r\n\t\t\t\t\t\tthis.table.columnManager.scrollHorizontal(left);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t//live update filters as user types\r\n\t\t\t\ttypingTimer = false;\r\n\r\n\t\t\t\tsearchTrigger = function(e){\r\n\t\t\t\t\tif(typingTimer){\r\n\t\t\t\t\t\tclearTimeout(typingTimer);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttypingTimer = setTimeout(function(){\r\n\t\t\t\t\t\tsuccess(editorElement.value);\r\n\t\t\t\t\t},self.table.options.headerFilterLiveFilterDelay);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tcolumn.modules.filter.headerElement = editorElement;\r\n\t\t\t\tcolumn.modules.filter.attrType = editorElement.hasAttribute(\"type\") ? editorElement.getAttribute(\"type\").toLowerCase() : \"\" ;\r\n\t\t\t\tcolumn.modules.filter.tagType = editorElement.tagName.toLowerCase();\r\n\r\n\t\t\t\tif(column.definition.headerFilterLiveFilter !== false){\r\n\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\t!(\r\n\t\t\t\t\t\t\tcolumn.definition.headerFilter === 'autocomplete' ||\r\n\t\t\t\t\t\t\tcolumn.definition.headerFilter === 'tickCross' ||\r\n\t\t\t\t\t\t\t((column.definition.editor === 'autocomplete' ||\r\n\t\t\t\t\t\t\t\tcolumn.definition.editor === 'tickCross') &&\r\n\t\t\t\t\t\t\tcolumn.definition.headerFilter === true)\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\teditorElement.addEventListener(\"keyup\", searchTrigger);\r\n\t\t\t\t\teditorElement.addEventListener(\"search\", searchTrigger);\r\n\r\n\r\n\t\t\t\t\t//update number filtered columns on change\r\n\t\t\t\t\tif(column.modules.filter.attrType == \"number\"){\r\n\t\t\t\t\t\teditorElement.addEventListener(\"change\", function(e){\r\n\t\t\t\t\t\t\tsuccess(editorElement.value);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//change text inputs to search inputs to allow for clearing of field\r\n\t\t\t\t\tif(column.modules.filter.attrType == \"text\" && this.table.browser !== \"ie\"){\r\n\t\t\t\t\t\teditorElement.setAttribute(\"type\", \"search\");\r\n\t\t\t\t\t\t// editorElement.off(\"change blur\"); //prevent blur from triggering filter and preventing selection click\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t\t//prevent input and select elements from propegating click to column sorters etc\r\n\t\t\t\t\tif(column.modules.filter.tagType == \"input\" || column.modules.filter.tagType == \"select\" || column.modules.filter.tagType == \"textarea\"){\r\n\t\t\t\t\t\teditorElement.addEventListener(\"mousedown\",function(e){\r\n\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfilterElement.appendChild(editorElement);\r\n\r\n\t\t\t\tcolumn.contentElement.appendChild(filterElement);\r\n\r\n\t\t\t\tif(!reinitialize){\r\n\t\t\t\t\tself.headerFilterColumns.push(column);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Filter Error - Cannot add header filter, column has no field set:\", column.definition.title);\r\n\t\t}\r\n\t}\r\n\r\n\t//hide all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\r\n\thideHeaderFilterElements(){\r\n\t\tthis.headerFilterColumns.forEach(function(column){\r\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\r\n\t\t\t\tcolumn.modules.filter.headerElement.style.display = 'none';\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//show all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\r\n\tshowHeaderFilterElements(){\r\n\t\tthis.headerFilterColumns.forEach(function(column){\r\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\r\n\t\t\t\tcolumn.modules.filter.headerElement.style.display = '';\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//programatically set focus of header filter\r\n\tsetHeaderFilterFocus(column){\r\n\t\tif(column.modules.filter && column.modules.filter.headerElement){\r\n\t\t\tcolumn.modules.filter.headerElement.focus();\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Column Filter Focus Error - No header filter set on column:\", column.getField());\r\n\t\t}\r\n\t}\r\n\r\n\t//programmatically get value of header filter\r\n\tgetHeaderFilterValue(column){\r\n\t\tif(column.modules.filter && column.modules.filter.headerElement){\r\n\t\t\treturn column.modules.filter.headerElement.value;\r\n\t\t} else {\r\n\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\r\n\t\t}\r\n\t}\r\n\r\n\t//programatically set value of header filter\r\n\tsetHeaderFilterValue(column, value){\r\n\t\tif (column){\r\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\r\n\t\t\t\tthis.generateHeaderFilterElement(column, value, true);\r\n\t\t\t\tcolumn.modules.filter.success(value);\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treloadHeaderFilter(column){\r\n\t\tif (column){\r\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\r\n\t\t\t\tthis.generateHeaderFilterElement(column, column.modules.filter.value, true);\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//check if the filters has changed since last use\r\n\thasChanged(){\r\n\t\tvar changed = this.changed;\r\n\t\tthis.changed = false;\r\n\t\treturn changed;\r\n\t}\r\n\r\n\t//set standard filters\r\n\tsetFilter(field, type, value, params){\r\n\t\tvar self = this;\r\n\r\n\t\tself.filterList = [];\r\n\r\n\t\tif(!Array.isArray(field)){\r\n\t\t\tfield = [{field:field, type:type, value:value, params:params}];\r\n\t\t}\r\n\r\n\t\tself.addFilter(field);\r\n\t}\r\n\r\n\t//add filter to array\r\n\taddFilter(field, type, value, params){\r\n\t\tvar self = this;\r\n\r\n\t\tif(!Array.isArray(field)){\r\n\t\t\tfield = [{field:field, type:type, value:value, params:params}];\r\n\t\t}\r\n\r\n\t\tfield.forEach(function(filter){\r\n\r\n\t\t\tfilter = self.findFilter(filter);\r\n\r\n\t\t\tif(filter){\r\n\t\t\t\tself.filterList.push(filter);\r\n\r\n\t\t\t\tself.changed = true;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.filter){\r\n\t\t\tthis.table.modules.persistence.save(\"filter\");\r\n\t\t}\r\n\t}\r\n\r\n\tfindFilter(filter){\r\n\t\tvar self = this,\r\n\t\tcolumn;\r\n\r\n\t\tif(Array.isArray(filter)){\r\n\t\t\treturn this.findSubFilters(filter);\r\n\t\t}\r\n\r\n\t\tvar filterFunc = false;\r\n\r\n\t\tif(typeof filter.field == \"function\"){\r\n\t\t\tfilterFunc = function(data){\r\n\t\t\t\treturn filter.field(data, filter.type || {})// pass params to custom filter function\r\n\t\t\t};\r\n\t\t}else{\r\n\r\n\t\t\tif(Filter.filters[filter.type]){\r\n\r\n\t\t\t\tcolumn = self.table.columnManager.getColumnByField(filter.field);\r\n\r\n\t\t\t\tif(column){\r\n\t\t\t\t\tfilterFunc = function(data){\r\n\t\t\t\t\t\treturn Filter.filters[filter.type](filter.value, column.getFieldValue(data), data, filter.params || {});\r\n\t\t\t\t\t};\r\n\t\t\t\t}else{\r\n\t\t\t\t\tfilterFunc = function(data){\r\n\t\t\t\t\t\treturn Filter.filters[filter.type](filter.value, data[filter.field], data, filter.params || {});\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Filter Error - No such filter type found, ignoring: \", filter.type);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfilter.func = filterFunc;\r\n\r\n\t\treturn filter.func ? filter : false;\r\n\t}\r\n\r\n\tfindSubFilters(filters){\r\n\t\tvar self = this,\r\n\t\toutput = [];\r\n\r\n\t\tfilters.forEach(function(filter){\r\n\t\t\tfilter = self.findFilter(filter);\r\n\r\n\t\t\tif(filter){\r\n\t\t\t\toutput.push(filter);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output.length ? output : false;\r\n\t}\r\n\r\n\t//get all filters\r\n\tgetFilters(all, ajax){\r\n\t\tvar output = [];\r\n\r\n\t\tif(all){\r\n\t\t\toutput = this.getHeaderFilters();\r\n\t\t}\r\n\r\n\t\tif(ajax){\r\n\t\t\toutput.forEach(function(item){\r\n\t\t\t\tif(typeof item.type == \"function\"){\r\n\t\t\t\t\titem.type = \"function\";\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\toutput = output.concat(this.filtersToArray(this.filterList, ajax));\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\t//filter to Object\r\n\tfiltersToArray(filterList, ajax){\r\n\t\tvar output = [];\r\n\r\n\t\tfilterList.forEach((filter) => {\r\n\t\t\tvar item;\r\n\r\n\t\t\tif(Array.isArray(filter)){\r\n\t\t\t\toutput.push(this.filtersToArray(filter, ajax));\r\n\t\t\t}else{\r\n\t\t\t\titem = {field:filter.field, type:filter.type, value:filter.value}\r\n\r\n\t\t\t\tif(ajax){\r\n\t\t\t\t\tif(typeof item.type == \"function\"){\r\n\t\t\t\t\t\titem.type = \"function\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\toutput.push(item);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\t//get all filters\r\n\tgetHeaderFilters(){\r\n\t\tvar self = this,\r\n\t\toutput = [];\r\n\r\n\t\tfor(var key in this.headerFilters){\r\n\t\t\toutput.push({field:key, type:this.headerFilters[key].type, value:this.headerFilters[key].value});\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\t//remove filter from array\r\n\tremoveFilter(field, type, value){\r\n\t\tvar self = this;\r\n\r\n\t\tif(!Array.isArray(field)){\r\n\t\t\tfield = [{field:field, type:type, value:value}];\r\n\t\t}\r\n\r\n\t\tfield.forEach(function(filter){\r\n\t\t\tvar index = -1;\r\n\r\n\t\t\tif(typeof filter.field == \"object\"){\r\n\t\t\t\tindex = self.filterList.findIndex(function(element){\r\n\t\t\t\t\treturn filter === element;\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tindex = self.filterList.findIndex(function(element){\r\n\t\t\t\t\treturn filter.field === element.field && filter.type === element.type  && filter.value === element.value;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif(index > -1){\r\n\t\t\t\tself.filterList.splice(index, 1);\r\n\t\t\t\tself.changed = true;\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Filter Error - No matching filter type found, ignoring: \", filter.type);\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\tif(this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.filter){\r\n\t\t\tthis.table.modules.persistence.save(\"filter\");\r\n\t\t}\r\n\t}\r\n\r\n\t//clear filters\r\n\tclearFilter(all){\r\n\t\tthis.filterList = [];\r\n\r\n\t\tif(all){\r\n\t\t\tthis.clearHeaderFilter();\r\n\t\t}\r\n\r\n\t\tthis.changed = true;\r\n\r\n\t\tif(this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.filter){\r\n\t\t\tthis.table.modules.persistence.save(\"filter\");\r\n\t\t}\r\n\t}\r\n\r\n\t//clear header filters\r\n\tclearHeaderFilter(){\r\n\t\tvar self = this;\r\n\r\n\t\tthis.headerFilters = {};\r\n\t\tself.prevHeaderFilterChangeCheck = \"{}\";\r\n\r\n\t\tthis.headerFilterColumns.forEach(function(column){\r\n\t\t\tif(typeof column.modules.filter.value !== \"undefined\"){\r\n\t\t\t\tdelete column.modules.filter.value;\r\n\t\t\t}\r\n\t\t\tcolumn.modules.filter.prevSuccess = undefined;\r\n\t\t\tself.reloadHeaderFilter(column);\r\n\t\t});\r\n\r\n\t\tthis.changed = true;\r\n\t}\r\n\r\n\t//search data and return matching rows\r\n\tsearch (searchType, field, type, value){\r\n\t\tvar self = this,\r\n\t\tactiveRows = [],\r\n\t\tfilterList = [];\r\n\r\n\t\tif(!Array.isArray(field)){\r\n\t\t\tfield = [{field:field, type:type, value:value}];\r\n\t\t}\r\n\r\n\t\tfield.forEach(function(filter){\r\n\t\t\tfilter = self.findFilter(filter);\r\n\r\n\t\t\tif(filter){\r\n\t\t\t\tfilterList.push(filter);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.table.rowManager.rows.forEach(function(row){\r\n\t\t\tvar match = true;\r\n\r\n\t\t\tfilterList.forEach(function(filter){\r\n\t\t\t\tif(!self.filterRecurse(filter, row.getData())){\r\n\t\t\t\t\tmatch = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(match){\r\n\t\t\t\tactiveRows.push(searchType === \"data\" ? row.getData(\"data\") : row.getComponent());\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\treturn activeRows;\r\n\t}\r\n\r\n\t//filter row array\r\n\tfilter(rowList, filters){\r\n\t\tvar self = this,\r\n\t\tactiveRows = [],\r\n\t\tactiveRowComponents = [];\r\n\r\n\t\tif(self.table.options.dataFiltering){\r\n\t\t\tself.table.options.dataFiltering.call(self.table, self.getFilters());\r\n\t\t}\r\n\r\n\t\tif(!self.table.options.ajaxFiltering && (self.filterList.length || Object.keys(self.headerFilters).length)){\r\n\r\n\t\t\trowList.forEach(function(row){\r\n\t\t\t\tif(self.filterRow(row)){\r\n\t\t\t\t\tactiveRows.push(row);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t}else{\r\n\t\t\tactiveRows = rowList.slice(0);\r\n\t\t}\r\n\r\n\t\tif(self.table.options.dataFiltered){\r\n\r\n\t\t\tactiveRows.forEach(function(row){\r\n\t\t\t\tactiveRowComponents.push(row.getComponent());\r\n\t\t\t});\r\n\r\n\t\t\tself.table.options.dataFiltered.call(self.table, self.getFilters(), activeRowComponents);\r\n\t\t}\r\n\r\n\t\treturn activeRows;\r\n\t}\r\n\r\n\t//filter individual row\r\n\tfilterRow(row, filters){\r\n\t\tvar self = this,\r\n\t\tmatch = true,\r\n\t\tdata = row.getData();\r\n\r\n\t\tself.filterList.forEach(function(filter){\r\n\t\t\tif(!self.filterRecurse(filter, data)){\r\n\t\t\t\tmatch = false;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\t\tfor(var field in self.headerFilters){\r\n\t\t\tif(!self.headerFilters[field].func(data)){\r\n\t\t\t\tmatch = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn match;\r\n\t}\r\n\r\n\tfilterRecurse(filter, data){\r\n\t\tvar self = this,\r\n\t\tmatch = false;\r\n\r\n\t\tif(Array.isArray(filter)){\r\n\t\t\tfilter.forEach(function(subFilter){\r\n\t\t\t\tif(self.filterRecurse(subFilter, data)){\r\n\t\t\t\t\tmatch = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tmatch = filter.func(data);\r\n\t\t}\r\n\r\n\t\treturn match;\r\n\t}\r\n}\r\n\r\nFilter.moduleName = \"filter\";\r\n\r\n//load defaults\r\nFilter.filters = defaultFilters;\r\n\r\nexport default Filter;","export default function(cell, formatterParams, onRendered){\r\n\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\r\n};","export default function(cell, formatterParams, onRendered){\r\n\treturn cell.getValue();\r\n};","export default function(cell, formatterParams, onRendered){\r\n\tcell.getElement().style.whiteSpace = \"pre-wrap\";\r\n\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\r\n};","export default function(cell, formatterParams, onRendered){\r\n\tvar floatVal = parseFloat(cell.getValue()),\r\n\tnumber, integer, decimal, rgx;\r\n\r\n\tvar decimalSym = formatterParams.decimal || \".\";\r\n\tvar thousandSym = formatterParams.thousand || \",\";\r\n\tvar symbol = formatterParams.symbol || \"\";\r\n\tvar after = !!formatterParams.symbolAfter;\r\n\tvar precision = typeof formatterParams.precision !== \"undefined\" ? formatterParams.precision : 2;\r\n\r\n\tif(isNaN(floatVal)){\r\n\t\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\r\n\t}\r\n\r\n\tnumber = precision !== false ? floatVal.toFixed(precision) : floatVal;\r\n\tnumber = String(number).split(\".\");\r\n\r\n\tinteger = number[0];\r\n\tdecimal = number.length > 1 ? decimalSym + number[1] : \"\";\r\n\r\n\trgx = /(\\d+)(\\d{3})/;\r\n\r\n\twhile (rgx.test(integer)){\r\n\t\tinteger = integer.replace(rgx, \"$1\" + thousandSym + \"$2\");\r\n\t}\r\n\r\n\treturn after ? integer + decimal + symbol : symbol + integer + decimal;\r\n};","export default function(cell, formatterParams, onRendered){\r\n\tvar value = cell.getValue(),\r\n\turlPrefix = formatterParams.urlPrefix || \"\",\r\n\tdownload = formatterParams.download,\r\n\tlabel = value,\r\n\tel = document.createElement(\"a\"),\r\n\tdata;\r\n\r\n\tif(formatterParams.labelField){\r\n\t\tdata = cell.getData();\r\n\t\tlabel = data[formatterParams.labelField];\r\n\t}\r\n\r\n\tif(formatterParams.label){\r\n\t\tswitch(typeof formatterParams.label){\r\n\t\t\tcase \"string\":\r\n\t\t\tlabel = formatterParams.label;\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\tlabel = formatterParams.label(cell);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tif(label){\r\n\t\tif(formatterParams.urlField){\r\n\t\t\tdata = cell.getData();\r\n\t\t\tvalue = data[formatterParams.urlField];\r\n\t\t}\r\n\r\n\t\tif(formatterParams.url){\r\n\t\t\tswitch(typeof formatterParams.url){\r\n\t\t\t\tcase \"string\":\r\n\t\t\t\tvalue = formatterParams.url;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"function\":\r\n\t\t\t\tvalue = formatterParams.url(cell);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tel.setAttribute(\"href\", urlPrefix + value);\r\n\r\n\t\tif(formatterParams.target){\r\n\t\t\tel.setAttribute(\"target\", formatterParams.target);\r\n\t\t}\r\n\r\n\t\tif(formatterParams.download){\r\n\r\n\t\t\tif(typeof download == \"function\"){\r\n\t\t\t\tdownload = download(cell);\r\n\t\t\t}else{\r\n\t\t\t\tdownload = download === true ? \"\" : download;\r\n\t\t\t}\r\n\r\n\t\t\tel.setAttribute(\"download\", download);\r\n\t\t}\r\n\r\n\t\tel.innerHTML = this.emptyToSpace(this.sanitizeHTML(label));\r\n\r\n\t\treturn el;\r\n\t}else{\r\n\t\treturn \"&nbsp;\";\r\n\t}\r\n};","export default function(cell, formatterParams, onRendered){\r\n\tvar el = document.createElement(\"img\"),\r\n\tsrc = cell.getValue();\r\n\r\n\tif(formatterParams.urlPrefix){\r\n\t\tsrc = formatterParams.urlPrefix + cell.getValue();\r\n\t}\r\n\r\n\tif(formatterParams.urlSuffix){\r\n\t\tsrc = src + formatterParams.urlSuffix;\r\n\t}\r\n\r\n\tel.setAttribute(\"src\", src);\r\n\r\n\tswitch(typeof formatterParams.height){\r\n\t\tcase \"number\":\r\n\t\tel.style.height = formatterParams.height + \"px\";\r\n\t\tbreak;\r\n\r\n\t\tcase \"string\":\r\n\t\tel.style.height = formatterParams.height;\r\n\t\tbreak;\r\n\t}\r\n\r\n\tswitch(typeof formatterParams.width){\r\n\t\tcase \"number\":\r\n\t\tel.style.width = formatterParams.width + \"px\";\r\n\t\tbreak;\r\n\r\n\t\tcase \"string\":\r\n\t\tel.style.width = formatterParams.width;\r\n\t\tbreak;\r\n\t}\r\n\r\n\tel.addEventListener(\"load\", function(){\r\n\t\tcell.getRow().normalizeHeight();\r\n\t});\r\n\r\n\treturn el;\r\n};","export default function(cell, formatterParams, onRendered){\r\n\tvar value = cell.getValue(),\r\n\telement = cell.getElement(),\r\n\tempty = formatterParams.allowEmpty,\r\n\ttruthy = formatterParams.allowTruthy,\r\n\ttick = typeof formatterParams.tickElement !== \"undefined\" ? formatterParams.tickElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>',\r\n\tcross = typeof formatterParams.crossElement !== \"undefined\" ? formatterParams.crossElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\"  viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\r\n\r\n\tif((truthy && value) || (value === true || value === \"true\" || value === \"True\" || value === 1 || value === \"1\")){\r\n\t\telement.setAttribute(\"aria-checked\", true);\r\n\t\treturn tick || \"\";\r\n\t}else{\r\n\t\tif(empty && (value === \"null\" || value === \"\" || value === null || typeof value === \"undefined\")){\r\n\t\t\telement.setAttribute(\"aria-checked\", \"mixed\");\r\n\t\t\treturn \"\";\r\n\t\t}else{\r\n\t\t\telement.setAttribute(\"aria-checked\", false);\r\n\t\t\treturn cross || \"\";\r\n\t\t}\r\n\t}\r\n};","export default function(cell, formatterParams, onRendered){\r\n\tvar inputFormat = formatterParams.inputFormat || \"YYYY-MM-DD hh:mm:ss\";\r\n\tvar\toutputFormat = formatterParams.outputFormat || \"DD/MM/YYYY hh:mm:ss\";\r\n\tvar\tinvalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\r\n\tvar value = cell.getValue();\r\n\r\n\tvar newDatetime = moment(value, inputFormat);\r\n\r\n\tif(newDatetime.isValid()){\r\n\t\treturn formatterParams.timezone ? newDatetime.tz(formatterParams.timezone).format(outputFormat) : newDatetime.format(outputFormat);\r\n\t}else{\r\n\r\n\t\tif(invalid === true){\r\n\t\t\treturn value;\r\n\t\t}else if(typeof invalid === \"function\"){\r\n\t\t\treturn invalid(value);\r\n\t\t}else{\r\n\t\t\treturn invalid;\r\n\t\t}\r\n\t}\r\n};","export default function datetime(cell, formatterParams, onRendered) {\r\n\tvar inputFormat = formatterParams.inputFormat || \"YYYY-MM-DD hh:mm:ss\";\r\n\tvar invalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\r\n\tvar suffix = typeof formatterParams.suffix !== \"undefined\" ? formatterParams.suffix : false;\r\n\tvar unit = typeof formatterParams.unit !== \"undefined\" ? formatterParams.unit : undefined;\r\n\tvar humanize = typeof formatterParams.humanize !== \"undefined\" ? formatterParams.humanize : false;\r\n\tvar date = typeof formatterParams.date !== \"undefined\" ? formatterParams.date : moment();\r\n\tvar value = cell.getValue();\r\n\r\n\tvar newDatetime = moment(value, inputFormat);\r\n\r\n\tif (newDatetime.isValid()) {\r\n\t\tif(humanize){\r\n\t\t\treturn moment.duration(newDatetime.diff(date)).humanize(suffix);\r\n\t\t}else{\r\n\t\t\treturn newDatetime.diff(date, unit) + (suffix ? \" \" + suffix : \"\");\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\tif (invalid === true) {\r\n\t\t\treturn value;\r\n\t\t} else if (typeof invalid === \"function\") {\r\n\t\t\treturn invalid(value);\r\n\t\t} else {\r\n\t\t\treturn invalid;\r\n\t\t}\r\n\t}\r\n};","export default function (cell, formatterParams, onRendered) {\r\n\tvar value = cell.getValue();\r\n\r\n\tif (typeof formatterParams[value] === \"undefined\") {\r\n\t\tconsole.warn('Missing display value for ' + value);\r\n\t\treturn value;\r\n\t}\r\n\r\n\treturn formatterParams[value];\r\n};","export default function(cell, formatterParams, onRendered){\r\n\tvar value = cell.getValue(),\r\n\telement = cell.getElement(),\r\n\tmaxStars = formatterParams && formatterParams.stars ? formatterParams.stars : 5,\r\n\tstars = document.createElement(\"span\"),\r\n\tstar = document.createElementNS('http://www.w3.org/2000/svg', \"svg\"),\r\n\tstarActive = '<polygon fill=\"#FFEA00\" stroke=\"#C1AB60\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>',\r\n\tstarInactive = '<polygon fill=\"#D2D2D2\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\r\n\r\n\t//style stars holder\r\n\tstars.style.verticalAlign = \"middle\";\r\n\r\n\t//style star\r\n\tstar.setAttribute(\"width\", \"14\");\r\n\tstar.setAttribute(\"height\", \"14\");\r\n\tstar.setAttribute(\"viewBox\", \"0 0 512 512\");\r\n\tstar.setAttribute(\"xml:space\", \"preserve\");\r\n\tstar.style.padding = \"0 1px\";\r\n\r\n\tvalue = value && !isNaN(value) ? parseInt(value) : 0;\r\n\r\n\tvalue = Math.max(0, Math.min(value, maxStars));\r\n\r\n\tfor(var i=1;i<= maxStars;i++){\r\n\t\tvar nextStar = star.cloneNode(true);\r\n\t\tnextStar.innerHTML = i <= value ? starActive : starInactive;\r\n\r\n\t\tstars.appendChild(nextStar);\r\n\t}\r\n\r\n\telement.style.whiteSpace = \"nowrap\";\r\n\telement.style.overflow = \"hidden\";\r\n\telement.style.textOverflow = \"ellipsis\";\r\n\r\n\telement.setAttribute(\"aria-label\", value);\r\n\r\n\treturn stars;\r\n};","export default function(cell, formatterParams, onRendered){\r\n\tvar value = this.sanitizeHTML(cell.getValue()) || 0,\r\n\tel = document.createElement(\"span\"),\r\n\tmax = formatterParams && formatterParams.max ? formatterParams.max : 100,\r\n\tmin = formatterParams && formatterParams.min ? formatterParams.min : 0,\r\n\tcolors = formatterParams && typeof formatterParams.color !== \"undefined\" ? formatterParams.color : [\"red\", \"orange\", \"green\"],\r\n\tcolor = \"#666666\",\r\n\tpercent, percentValue;\r\n\r\n\tif(isNaN(value) || typeof cell.getValue() === \"undefined\"){\r\n\t\treturn;\r\n\t}\r\n\r\n\tel.classList.add(\"tabulator-traffic-light\");\r\n\r\n\t//make sure value is in range\r\n\tpercentValue = parseFloat(value) <= max ? parseFloat(value) : max;\r\n\tpercentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min;\r\n\r\n\t//workout percentage\r\n\tpercent = (max - min) / 100;\r\n\tpercentValue = Math.round((percentValue - min) / percent);\r\n\r\n\t//set color\r\n\tswitch(typeof colors){\r\n\t\tcase \"string\":\r\n\t\tcolor = colors;\r\n\t\tbreak;\r\n\t\tcase \"function\":\r\n\t\tcolor = colors(value);\r\n\t\tbreak;\r\n\t\tcase \"object\":\r\n\t\tif(Array.isArray(colors)){\r\n\t\t\tvar unit = 100 / colors.length;\r\n\t\t\tvar index = Math.floor(percentValue / unit);\r\n\r\n\t\t\tindex = Math.min(index, colors.length - 1);\r\n\t\t\tindex = Math.max(index, 0);\r\n\t\t\tcolor = colors[index];\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tel.style.backgroundColor = color;\r\n\r\n\treturn el;\r\n};","export default function(cell, formatterParams, onRendered){ //progress bar\r\n\tvar value = this.sanitizeHTML(cell.getValue()) || 0,\r\n\telement = cell.getElement(),\r\n\tmax = formatterParams && formatterParams.max ? formatterParams.max : 100,\r\n\tmin = formatterParams && formatterParams.min ? formatterParams.min : 0,\r\n\tlegendAlign = formatterParams && formatterParams.legendAlign ? formatterParams.legendAlign : \"center\",\r\n\tpercent, percentValue, color, legend, legendColor, top, left, right, bottom;\r\n\r\n\t//make sure value is in range\r\n\tpercentValue = parseFloat(value) <= max ? parseFloat(value) : max;\r\n\tpercentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min;\r\n\r\n\t//workout percentage\r\n\tpercent = (max - min) / 100;\r\n\tpercentValue = Math.round((percentValue - min) / percent);\r\n\r\n\t//set bar color\r\n\tswitch(typeof formatterParams.color){\r\n\t\tcase \"string\":\r\n\t\tcolor = formatterParams.color;\r\n\t\tbreak;\r\n\t\tcase \"function\":\r\n\t\tcolor = formatterParams.color(value);\r\n\t\tbreak;\r\n\t\tcase \"object\":\r\n\t\tif(Array.isArray(formatterParams.color)){\r\n\t\t\tvar unit = 100 / formatterParams.color.length;\r\n\t\t\tvar index = Math.floor(percentValue / unit);\r\n\r\n\t\t\tindex = Math.min(index, formatterParams.color.length - 1);\r\n\t\t\tindex = Math.max(index, 0);\r\n\t\t\tcolor = formatterParams.color[index];\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tdefault:\r\n\t\tcolor = \"#2DC214\";\r\n\t}\r\n\r\n\t//generate legend\r\n\tswitch(typeof formatterParams.legend){\r\n\t\tcase \"string\":\r\n\t\tlegend = formatterParams.legend;\r\n\t\tbreak;\r\n\t\tcase \"function\":\r\n\t\tlegend = formatterParams.legend(value);\r\n\t\tbreak;\r\n\t\tcase \"boolean\":\r\n\t\tlegend = value;\r\n\t\tbreak;\r\n\t\tdefault:\r\n\t\tlegend = false;\r\n\t}\r\n\r\n\t//set legend color\r\n\tswitch(typeof formatterParams.legendColor){\r\n\t\tcase \"string\":\r\n\t\tlegendColor = formatterParams.legendColor;\r\n\t\tbreak;\r\n\t\tcase \"function\":\r\n\t\tlegendColor = formatterParams.legendColor(value);\r\n\t\tbreak;\r\n\t\tcase \"object\":\r\n\t\tif(Array.isArray(formatterParams.legendColor)){\r\n\t\t\tvar unit = 100 / formatterParams.legendColor.length;\r\n\t\t\tvar index = Math.floor(percentValue / unit);\r\n\r\n\t\t\tindex = Math.min(index, formatterParams.legendColor.length - 1);\r\n\t\t\tindex = Math.max(index, 0);\r\n\t\t\tlegendColor = formatterParams.legendColor[index];\r\n\t\t}\r\n\t\tbreak;\r\n\t\tdefault:\r\n\t\tlegendColor = \"#000\";\r\n\t}\r\n\r\n\telement.style.minWidth = \"30px\";\r\n\telement.style.position = \"relative\";\r\n\r\n\telement.setAttribute(\"aria-label\", percentValue);\r\n\r\n\tvar barEl = document.createElement(\"div\");\r\n\tbarEl.style.display = \"inline-block\";\r\n\tbarEl.style.position = \"relative\";\r\n\tbarEl.style.width = percentValue + \"%\";\r\n\tbarEl.style.backgroundColor = color;\r\n\tbarEl.style.height = \"100%\";\r\n\r\n\tbarEl.setAttribute('data-max', max);\r\n\tbarEl.setAttribute('data-min', min);\r\n\r\n\r\n\tif(legend){\r\n\t\tvar legendEl = document.createElement(\"div\");\r\n\t\tlegendEl.style.position = \"absolute\";\r\n\t\tlegendEl.style.top = \"4px\";\r\n\t\tlegendEl.style.left = 0;\r\n\t\tlegendEl.style.textAlign = legendAlign;\r\n\t\tlegendEl.style.width = \"100%\";\r\n\t\tlegendEl.style.color = legendColor;\r\n\t\tlegendEl.innerHTML = legend;\r\n\t}\r\n\r\n\tonRendered(function(){\r\n\r\n\t\t//handle custom element needed if formatter is to be included in printed/downloaded output\r\n\t\tif(!(cell instanceof CellComponent)){\r\n\t\t\tvar holderEl = document.createElement(\"div\");\r\n\t\t\tholderEl.style.position = \"absolute\";\r\n\t\t\tholderEl.style.top = \"4px\";\r\n\t\t\tholderEl.style.bottom = \"4px\";\r\n\t\t\tholderEl.style.left = \"4px\";\r\n\t\t\tholderEl.style.right = \"4px\";\r\n\r\n\t\t\telement.appendChild(holderEl);\r\n\r\n\t\t\telement = holderEl;\r\n\t\t}\r\n\r\n\t\telement.appendChild(barEl);\r\n\r\n\t\tif(legend){\r\n\t\t\telement.appendChild(legendEl);\r\n\t\t}\r\n\t});\r\n\r\n\treturn \"\";\r\n};","export default function(cell, formatterParams, onRendered){\r\n\tcell.getElement().style.backgroundColor = this.sanitizeHTML(cell.getValue());\r\n\treturn \"\";\r\n};","export default function(cell, formatterParams, onRendered){\r\n\treturn '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>';\r\n};","export default function(cell, formatterParams, onRendered){\r\n\treturn '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\r\n};","export default function(cell, formatterParams, onRendered){\r\n\treturn this.table.rowManager.activeRows.indexOf(cell.getRow()._getSelf()) + 1;\r\n};","export default function(cell, formatterParams, onRendered){\r\n\tcell.getElement().classList.add(\"tabulator-row-handle\");\r\n\treturn \"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>\";\r\n};","export default function(cell, formatterParams, onRendered){\r\n\tvar open = false,\r\n\tel = document.createElement(\"div\"),\r\n\tconfig = cell.getRow()._row.modules.responsiveLayout;\r\n\r\n\tel.classList.add(\"tabulator-responsive-collapse-toggle\");\r\n\tel.innerHTML = \"<span class='tabulator-responsive-collapse-toggle-open'>+</span><span class='tabulator-responsive-collapse-toggle-close'>-</span>\";\r\n\r\n\tcell.getElement().classList.add(\"tabulator-row-handle\");\r\n\r\n\tfunction toggleList(isOpen){\r\n\t\tvar collapseEl = config.element;\r\n\r\n\t\tconfig.open = isOpen;\r\n\r\n\t\tif(collapseEl){\r\n\r\n\t\t\tif(config.open){\r\n\t\t\t\tel.classList.add(\"open\");\r\n\t\t\t\tcollapseEl.style.display = '';\r\n\t\t\t}else{\r\n\t\t\t\tel.classList.remove(\"open\");\r\n\t\t\t\tcollapseEl.style.display = 'none';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tel.addEventListener(\"click\", function(e){\r\n\t\te.stopImmediatePropagation();\r\n\t\ttoggleList(!config.open);\r\n\t});\r\n\r\n\ttoggleList(config.open);\r\n\r\n\treturn el;\r\n};","export default function(cell, formatterParams, onRendered){\r\n\tvar checkbox = document.createElement(\"input\");\r\n\r\n\tcheckbox.type = 'checkbox';\r\n\r\n\tif(this.table.modExists(\"selectRow\", true)){\r\n\r\n\t\tcheckbox.addEventListener(\"click\", (e) => {\r\n\t\t\te.stopPropagation();\r\n\t\t});\r\n\r\n\t\tif(typeof cell.getRow == 'function'){\r\n\t\t\tvar row = cell.getRow();\r\n\r\n\t\t\tif(row instanceof RowComponent){\r\n\r\n\t\t\t\tcheckbox.addEventListener(\"change\", (e) => {\r\n\t\t\t\t\trow.toggleSelect();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tcheckbox.checked = row.isSelected && row.isSelected();\r\n\t\t\t\tthis.table.modules.selectRow.registerRowSelectCheckbox(row, checkbox);\r\n\t\t\t}else{\r\n\t\t\t\tcheckbox = \"\";\r\n\t\t\t}\r\n\t\t}else {\r\n\t\t\tcheckbox.addEventListener(\"change\", (e) => {\r\n\t\t\t\tif(this.table.modules.selectRow.selectedRows.length){\r\n\t\t\t\t\tthis.table.deselectRow();\r\n\t\t\t\t}else {\r\n\t\t\t\t\tthis.table.selectRow(formatterParams.rowRange);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.table.modules.selectRow.registerHeaderSelectCheckbox(checkbox);\r\n\t\t}\r\n\t}\r\n\r\n\treturn checkbox;\r\n};","import plaintext from './formatters/plaintext.js';\r\nimport html from './formatters/html.js';\r\nimport textarea from './formatters/textarea.js';\r\nimport money from './formatters/money.js';\r\nimport link from './formatters/link.js';\r\nimport image from './formatters/image.js';\r\nimport tickCross from './formatters/tickCross.js';\r\nimport datetime from './formatters/datetime.js';\r\nimport datetimediff from './formatters/datetimediff.js';\r\nimport lookup from './formatters/lookup.js';\r\nimport star from './formatters/star.js';\r\nimport traffic from './formatters/traffic.js';\r\nimport progress from './formatters/progress.js';\r\nimport color from './formatters/color.js';\r\nimport buttonTick from './formatters/buttonTick.js';\r\nimport buttonCross from './formatters/buttonCross.js';\r\nimport rownum from './formatters/rownum.js';\r\nimport handle from './formatters/handle.js';\r\nimport responsiveCollapse from './formatters/responsiveCollapse.js';\r\nimport rowSelection from './formatters/rowSelection.js';\r\n\r\nexport default {\r\n\tplaintext:plaintext,\r\n\thtml:html,\r\n\ttextarea:textarea,\r\n\tmoney:money,\r\n\tlink:link,\r\n\timage:image,\r\n\ttickCross:tickCross,\r\n\tdatetime:datetime,\r\n\tdatetimediff:datetimediff,\r\n\tlookup:lookup,\r\n\tstar:star,\r\n\ttraffic:traffic,\r\n\tprogress:progress,\r\n\tcolor:color,\r\n\tbuttonTick:buttonTick,\r\n\tbuttonCross:buttonCross,\r\n\trownum:rownum,\r\n\thandle:handle,\r\n\tresponsiveCollapse:responsiveCollapse,\r\n\trowSelection:rowSelection,\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport defaultFormatters from './defaults/formatters.js';\r\n\r\nclass Format extends Module{\r\n\r\n\t//initialize column formatter\r\n\tinitializeColumn(column){\r\n\t\tcolumn.modules.format = this.lookupFormatter(column, \"\");\r\n\r\n\t\tif(typeof column.definition.formatterPrint !== \"undefined\"){\r\n\t\t\tcolumn.modules.format.print = this.lookupFormatter(column, \"Print\");\r\n\t\t}\r\n\r\n\t\tif(typeof column.definition.formatterClipboard !== \"undefined\"){\r\n\t\t\tcolumn.modules.format.clipboard = this.lookupFormatter(column, \"Clipboard\");\r\n\t\t}\r\n\r\n\t\tif(typeof column.definition.formatterHtmlOutput !== \"undefined\"){\r\n\t\t\tcolumn.modules.format.htmlOutput = this.lookupFormatter(column, \"HtmlOutput\");\r\n\t\t}\r\n\t}\r\n\r\n\tlookupFormatter(column, type){\r\n\t\tvar config = {params:column.definition[\"formatter\" + type + \"Params\"] || {}},\r\n\t\tformatter = column.definition[\"formatter\" + type];\r\n\r\n\t\t//set column formatter\r\n\t\tswitch(typeof formatter){\r\n\t\t\tcase \"string\":\r\n\r\n\t\t\tif(formatter === \"tick\"){\r\n\t\t\t\tformatter = \"tickCross\";\r\n\r\n\t\t\t\tif(typeof config.params.crossElement == \"undefined\"){\r\n\t\t\t\t\tconfig.params.crossElement = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconsole.warn(\"DEPRECATION WARNING - the tick formatter has been deprecated, please use the tickCross formatter with the crossElement param set to false\");\r\n\t\t\t}\r\n\r\n\t\t\tif(Format.formatters[formatter]){\r\n\t\t\t\tconfig.formatter = Format.formatters[formatter];\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Formatter Error - No such formatter found: \", formatter);\r\n\t\t\t\tconfig.formatter = Format.formatters.plaintext;\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\tconfig.formatter = formatter;\r\n\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\tconfig.formatter = Format.formatters.plaintext;\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn config;\r\n\t}\r\n\r\n\tcellRendered(cell){\r\n\t\tif(cell.modules.format && cell.modules.format.renderedCallback && !cell.modules.format.rendered){\r\n\t\t\tcell.modules.format.renderedCallback();\r\n\t\t\tcell.modules.format.rendered = true;\r\n\t\t}\r\n\t}\r\n\r\n\t//return a formatted value for a cell\r\n\tformatValue(cell){\r\n\t\tvar component = cell.getComponent(),\r\n\t\tparams = typeof cell.column.modules.format.params === \"function\" ? cell.column.modules.format.params(component) : cell.column.modules.format.params;\r\n\r\n\t\tfunction onRendered(callback){\r\n\t\t\tif(!cell.modules.format){\r\n\t\t\t\tcell.modules.format = {};\r\n\t\t\t}\r\n\r\n\t\t\tcell.modules.format.renderedCallback = callback;\r\n\t\t\tcell.modules.format.rendered = false;\r\n\t\t}\r\n\r\n\t\treturn cell.column.modules.format.formatter.call(this, component, params, onRendered);\r\n\t}\r\n\r\n\tformatExportValue(cell, type){\r\n\t\tvar formatter = cell.column.modules.format[type],\r\n\t\tparams;\r\n\r\n\t\tif(formatter){\r\n\t\t\tparams = typeof formatter.params === \"function\" ? formatter.params(component) : formatter.params;\r\n\r\n\t\t\tfunction onRendered(callback){\r\n\t\t\t\tif(!cell.modules.format){\r\n\t\t\t\t\tcell.modules.format = {};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcell.modules.format.renderedCallback = callback;\r\n\t\t\t\tcell.modules.format.rendered = false;\r\n\t\t\t}\r\n\r\n\t\t\treturn formatter.formatter.call(this, cell.getComponent(), params, onRendered);\r\n\r\n\t\t}else{\r\n\t\t\treturn this.formatValue(cell);\r\n\t\t}\r\n\t}\r\n\r\n\tsanitizeHTML(value){\r\n\t\tif(value){\r\n\t\t\tvar entityMap = {\r\n\t\t\t\t'&': '&amp;',\r\n\t\t\t\t'<': '&lt;',\r\n\t\t\t\t'>': '&gt;',\r\n\t\t\t\t'\"': '&quot;',\r\n\t\t\t\t\"'\": '&#39;',\r\n\t\t\t\t'/': '&#x2F;',\r\n\t\t\t\t'`': '&#x60;',\r\n\t\t\t\t'=': '&#x3D;'\r\n\t\t\t};\r\n\r\n\t\t\treturn String(value).replace(/[&<>\"'`=\\/]/g, function (s) {\r\n\t\t\t\treturn entityMap[s];\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\treturn value;\r\n\t\t}\r\n\t}\r\n\r\n\temptyToSpace(value){\r\n\t\treturn value === null || typeof value === \"undefined\" || value === \"\" ? \"&nbsp;\" : value;\r\n\t}\r\n\r\n\t//get formatter for cell\r\n\tgetFormatter(formatter){\r\n\t\tvar formatter;\r\n\r\n\t\tswitch(typeof formatter){\r\n\t\t\tcase \"string\":\r\n\t\t\tif(Format.formatters[formatter]){\r\n\t\t\t\tformatter = Format.formatters[formatter]\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Formatter Error - No such formatter found: \", formatter);\r\n\t\t\t\tformatter = Format.formatters.plaintext;\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\tformatter = formatter;\r\n\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\tformatter = Format.formatters.plaintext;\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn formatter;\r\n\t}\r\n}\r\n\r\nFormat.moduleName = \"format\";\r\n\r\n//load defaults\r\nFormat.formatters = defaultFormatters;\r\n\r\nexport default Format;","import Module from '../../core/Module.js';\r\n\r\nclass FrozenColumns extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.leftColumns = [];\r\n\t\tthis.rightColumns = [];\r\n\t\tthis.leftMargin = 0;\r\n\t\tthis.rightMargin = 0;\r\n\t\tthis.rightPadding = 0;\r\n\t\tthis.initializationMode = \"left\";\r\n\t\tthis.active = false;\r\n\t\tthis.scrollEndTimer = false;\r\n\t}\r\n\r\n\t//reset initial state\r\n\treset(){\r\n\t\tthis.initializationMode = \"left\";\r\n\t\tthis.leftColumns = [];\r\n\t\tthis.rightColumns = [];\r\n\t\tthis.leftMargin = 0;\r\n\t\tthis.rightMargin = 0;\r\n\t\tthis.rightMargin = 0;\r\n\t\tthis.active = false;\r\n\r\n\t\tthis.table.columnManager.headersElement.style.marginLeft = 0;\r\n\t\tthis.table.columnManager.element.style.paddingRight = 0;\r\n\t}\r\n\r\n\t//initialize specific column\r\n\tinitializeColumn(column){\r\n\t\tvar config = {margin:0, edge:false};\r\n\r\n\t\tif(!column.isGroup){\r\n\r\n\t\t\tif(this.frozenCheck(column)){\r\n\r\n\t\t\t\tconfig.position = this.initializationMode;\r\n\r\n\t\t\t\tif(this.initializationMode == \"left\"){\r\n\t\t\t\t\tthis.leftColumns.push(column);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.rightColumns.unshift(column);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.active = true;\r\n\r\n\t\t\t\tcolumn.modules.frozen = config;\r\n\t\t\t}else{\r\n\t\t\t\tthis.initializationMode = \"right\";\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfrozenCheck(column){\r\n\t\tvar frozen = false;\r\n\r\n\t\tif(column.parent.isGroup && column.definition.frozen){\r\n\t\t\tconsole.warn(\"Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups\");\r\n\t\t}\r\n\r\n\t\tif(column.parent.isGroup){\r\n\t\t\treturn this.frozenCheck(column.parent);\r\n\t\t}else{\r\n\t\t\treturn column.definition.frozen;\r\n\t\t}\r\n\r\n\t\treturn frozen;\r\n\t}\r\n\r\n\t//quick layout to smooth horizontal scrolling\r\n\tscrollHorizontal(){\r\n\t\tvar rows;\r\n\r\n\t\tif(this.active){\r\n\t\t\tclearTimeout(this.scrollEndTimer);\r\n\r\n\t\t\t//layout all rows after scroll is complete\r\n\t\t\tthis.scrollEndTimer = setTimeout(() => {\r\n\t\t\t\tthis.layout();\r\n\t\t\t}, 100);\r\n\r\n\t\t\trows = this.table.rowManager.getVisibleRows();\r\n\r\n\t\t\tthis.calcMargins();\r\n\r\n\t\t\tthis.layoutColumnPosition();\r\n\r\n\t\t\tthis.layoutCalcRows();\r\n\r\n\t\t\trows.forEach((row) => {\r\n\t\t\t\tif(row.type === \"row\"){\r\n\t\t\t\t\tthis.layoutRow(row);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.table.rowManager.tableElement.style.marginRight = this.rightMargin;\r\n\t\t}\r\n\t}\r\n\r\n\t//calculate margins for rows\r\n\tcalcMargins(){\r\n\t\tthis.leftMargin = this._calcSpace(this.leftColumns, this.leftColumns.length) + \"px\";\r\n\t\tthis.table.columnManager.headersElement.style.marginLeft = this.leftMargin;\r\n\r\n\t\tthis.rightMargin = this._calcSpace(this.rightColumns, this.rightColumns.length) + \"px\";\r\n\t\tthis.table.columnManager.element.style.paddingRight = this.rightMargin;\r\n\r\n\t\t//calculate right frozen columns\r\n\t\tthis.rightPadding = this.table.rowManager.element.clientWidth + this.table.columnManager.scrollLeft;\r\n\t}\r\n\r\n\t//layout calculation rows\r\n\tlayoutCalcRows(){\r\n\t\tif(this.table.modExists(\"columnCalcs\")){\r\n\t\t\tif(this.table.modules.columnCalcs.topInitialized && this.table.modules.columnCalcs.topRow){\r\n\t\t\t\tthis.layoutRow(this.table.modules.columnCalcs.topRow);\r\n\t\t\t}\r\n\t\t\tif(this.table.modules.columnCalcs.botInitialized && this.table.modules.columnCalcs.botRow){\r\n\t\t\t\tthis.layoutRow(this.table.modules.columnCalcs.botRow);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//calculate column positions and layout headers\r\n\tlayoutColumnPosition(allCells){\r\n\r\n\t\tvar leftParents = [];\r\n\r\n\t\tthis.leftColumns.forEach((column, i) => {\r\n\t\t\tcolumn.modules.frozen.margin = (this._calcSpace(this.leftColumns, i) + this.table.columnManager.scrollLeft) + \"px\";\r\n\r\n\t\t\tif(i == this.leftColumns.length - 1){\r\n\t\t\t\tcolumn.modules.frozen.edge = true;\r\n\t\t\t}else{\r\n\t\t\t\tcolumn.modules.frozen.edge = false;\r\n\t\t\t}\r\n\r\n\t\t\tif(column.parent.isGroup){\r\n\t\t\t\tvar parentEl = this.getColGroupParentElement(column);\r\n\t\t\t\tif(!leftParents.includes(parentEl)){\r\n\t\t\t\t\tthis.layoutElement(parentEl, column);\r\n\t\t\t\t\tleftParents.push(parentEl);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(column.modules.frozen.edge){\r\n\t\t\t\t\tparentEl.classList.add(\"tabulator-frozen-\" + column.modules.frozen.position);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.layoutElement(column.getElement(), column);\r\n\t\t\t}\r\n\r\n\t\t\tif(allCells){\r\n\t\t\t\tcolumn.cells.forEach((cell) => {\r\n\t\t\t\t\tthis.layoutElement(cell.getElement(true), column);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.rightColumns.forEach((column, i) => {\r\n\t\t\tcolumn.modules.frozen.margin = (this.rightPadding - this._calcSpace(this.rightColumns, i + 1)) + \"px\";\r\n\r\n\t\t\tif(i == this.rightColumns.length - 1){\r\n\t\t\t\tcolumn.modules.frozen.edge = true;\r\n\t\t\t}else{\r\n\t\t\t\tcolumn.modules.frozen.edge = false;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif(column.parent.isGroup){\r\n\t\t\t\tthis.layoutElement(this.getColGroupParentElement(column), column);\r\n\t\t\t}else{\r\n\t\t\t\tthis.layoutElement(column.getElement(), column);\r\n\t\t\t}\r\n\r\n\t\t\tif(allCells){\r\n\t\t\t\tcolumn.cells.forEach((cell) => {\r\n\t\t\t\t\tthis.layoutElement(cell.getElement(true), column);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tgetColGroupParentElement(column){\r\n\t\treturn column.parent.isGroup ? this.getColGroupParentElement(column.parent) : column.getElement();\r\n\t}\r\n\r\n\t//layout columns appropropriatly\r\n\tlayout(){\r\n\t\tvar rightMargin = 0;\r\n\r\n\t\tif(this.active){\r\n\r\n\t\t\t//calculate row padding\r\n\t\t\tthis.calcMargins();\r\n\r\n\t\t\tthis.table.rowManager.getDisplayRows().forEach((row) =>{\r\n\t\t\t\tif(row.type === \"row\"){\r\n\t\t\t\t\tthis.layoutRow(row);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.layoutCalcRows();\r\n\r\n\t\t\t//calculate left columns\r\n\t\t\tthis.layoutColumnPosition(true);\r\n\r\n\t\t\tthis.table.rowManager.tableElement.style.marginRight = this.rightMargin;\r\n\t\t}\r\n\t}\r\n\r\n\tlayoutRow(row){\r\n\t\tvar rowEl = row.getElement();\r\n\r\n\t\trowEl.style.paddingLeft = this.leftMargin;\r\n\r\n\t\tthis.leftColumns.forEach((column) => {\r\n\t\t\tvar cell = row.getCell(column);\r\n\r\n\t\t\tif(cell){\r\n\t\t\t\tthis.layoutElement(cell.getElement(true), column);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.rightColumns.forEach((column) => {\r\n\t\t\tvar cell = row.getCell(column);\r\n\r\n\t\t\tif(cell){\r\n\t\t\t\tthis.layoutElement(cell.getElement(true), column);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tlayoutElement(element, column){\r\n\r\n\t\tif(column.modules.frozen){\r\n\t\t\telement.style.position = \"absolute\";\r\n\t\t\telement.style.left = column.modules.frozen.margin;\r\n\r\n\t\t\telement.classList.add(\"tabulator-frozen\");\r\n\r\n\t\t\tif(column.modules.frozen.edge){\r\n\t\t\t\telement.classList.add(\"tabulator-frozen-\" + column.modules.frozen.position);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t_calcSpace(columns, index){\r\n\t\tvar width = 0;\r\n\r\n\t\tfor (let i = 0; i < index; i++){\r\n\t\t\tif(columns[i].visible){\r\n\t\t\t\twidth += columns[i].getWidth();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn width;\r\n\t}\r\n}\r\n\r\nFrozenColumns.moduleName = \"frozenColumns\";\r\n\r\nexport default FrozenColumns;","import Module from '../../core/Module.js';\r\n\r\nclass FrozenRows extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.topElement = document.createElement(\"div\");\r\n\t\tthis.rows = [];\r\n\t\tthis.displayIndex = 0; //index in display pipeline\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.rows = [];\r\n\r\n\t\tthis.topElement.classList.add(\"tabulator-frozen-rows-holder\");\r\n\r\n\t\t// this.table.columnManager.element.append(this.topElement);\r\n\t\tthis.table.columnManager.getElement().insertBefore(this.topElement, this.table.columnManager.headersElement.nextSibling);\r\n\t}\r\n\r\n\tsetDisplayIndex(index){\r\n\t\tthis.displayIndex = index;\r\n\t}\r\n\r\n\tgetDisplayIndex(){\r\n\t\treturn this.displayIndex;\r\n\t}\r\n\r\n\tisFrozen(){\r\n\t\treturn !!this.rows.length;\r\n\t}\r\n\r\n\t//filter frozen rows out of display data\r\n\tgetRows(rows){\r\n\t\tvar self = this,\r\n\t\tfrozen = [],\r\n\t\toutput = rows.slice(0);\r\n\r\n\t\tthis.rows.forEach(function(row){\r\n\t\t\tvar index = output.indexOf(row);\r\n\r\n\t\t\tif(index > -1){\r\n\t\t\t\toutput.splice(index, 1);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tfreezeRow(row){\r\n\t\tif(!row.modules.frozen){\r\n\t\t\trow.modules.frozen = true;\r\n\t\t\tthis.topElement.appendChild(row.getElement());\r\n\t\t\trow.initialize();\r\n\t\t\trow.normalizeHeight();\r\n\t\t\tthis.table.rowManager.adjustTableSize();\r\n\r\n\t\t\tthis.rows.push(row);\r\n\r\n\t\t\tthis.table.rowManager.refreshActiveData(\"display\");\r\n\r\n\t\t\tthis.styleRows();\r\n\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Freeze Error - Row is already frozen\");\r\n\t\t}\r\n\t}\r\n\r\n\tunfreezeRow(row){\r\n\t\tvar index = this.rows.indexOf(row);\r\n\r\n\t\tif(row.modules.frozen){\r\n\r\n\t\t\trow.modules.frozen = false;\r\n\r\n\t\t\tthis.detachRow(row);\r\n\r\n\t\t\tthis.table.rowManager.adjustTableSize();\r\n\r\n\t\t\tthis.table.rowManager.refreshActiveData(\"display\");\r\n\r\n\t\t\tif(this.rows.length){\r\n\t\t\t\tthis.styleRows();\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Freeze Error - Row is already unfrozen\");\r\n\t\t}\r\n\t}\r\n\r\n\tdetachRow(row){\r\n\t\tvar index = this.rows.indexOf(row);\r\n\r\n\t\tif(index > -1){\r\n\t\t\tvar rowEl = row.getElement();\r\n\t\t\trowEl.parentNode.removeChild(rowEl);\r\n\r\n\t\t\tthis.rows.splice(index, 1);\r\n\t\t}\r\n\t}\r\n\r\n\tstyleRows(row){\r\n\t\tthis.rows.forEach((row, i) => {\r\n\t\t\tthis.table.rowManager.styleRow(row, i);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nFrozenRows.moduleName = \"frozenRows\";\r\n\r\nexport default FrozenRows;","import Helpers from '../../core/Helpers.js';\r\n\r\n//Group functions\r\nclass Group{\r\n\r\n\tconstructor(groupManager, parent, level, key, field, generator, oldGroup){\r\n\t\tthis.groupManager = groupManager;\r\n\t\tthis.parent = parent;\r\n\t\tthis.key = key;\r\n\t\tthis.level = level;\r\n\t\tthis.field = field;\r\n\t\tthis.hasSubGroups = level < (groupManager.groupIDLookups.length - 1);\r\n\t\tthis.addRow = this.hasSubGroups ? this._addRowToGroup : this._addRow;\r\n\t\tthis.type = \"group\"; //type of element\r\n\t\tthis.old = oldGroup;\r\n\t\tthis.rows = [];\r\n\t\tthis.groups = [];\r\n\t\tthis.groupList = [];\r\n\t\tthis.generator = generator;\r\n\t\tthis.elementContents = false;\r\n\t\tthis.height = 0;\r\n\t\tthis.outerHeight = 0;\r\n\t\tthis.initialized = false;\r\n\t\tthis.calcs = {};\r\n\t\tthis.initialized = false;\r\n\t\tthis.modules = {};\r\n\t\tthis.arrowElement = false;\r\n\r\n\t\tthis.visible = oldGroup ? oldGroup.visible : (typeof groupManager.startOpen[level] !== \"undefined\" ? groupManager.startOpen[level] : groupManager.startOpen[0]);\r\n\r\n\t\tthis.component = null;\r\n\r\n\t\tthis.createElements();\r\n\t\tthis.addBindings();\r\n\r\n\t\tthis.createValueGroups();\r\n\t}\r\n\r\n\twipe(){\r\n\t\tif(this.groupList.length){\r\n\t\t\tthis.groupList.forEach(function(group){\r\n\t\t\t\tgroup.wipe();\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tthis.element = false;\r\n\t\t\tthis.arrowElement = false;\r\n\t\t\tthis.elementContents = false;\r\n\t\t}\r\n\t}\r\n\r\n\tcreateElements(){\r\n\t\tvar arrow = document.createElement(\"div\");\r\n\t\tarrow.classList.add(\"tabulator-arrow\");\r\n\r\n\t\tthis.element = document.createElement(\"div\");\r\n\t\tthis.element.classList.add(\"tabulator-row\");\r\n\t\tthis.element.classList.add(\"tabulator-group\");\r\n\t\tthis.element.classList.add(\"tabulator-group-level-\" + this.level);\r\n\t\tthis.element.setAttribute(\"role\", \"rowgroup\");\r\n\r\n\t\tthis.arrowElement = document.createElement(\"div\");\r\n\t\tthis.arrowElement.classList.add(\"tabulator-group-toggle\");\r\n\t\tthis.arrowElement.appendChild(arrow);\r\n\r\n\t\t//setup movable rows\r\n\t\tif(this.groupManager.table.options.movableRows !== false && this.groupManager.table.modExists(\"moveRow\")){\r\n\t\t\tthis.groupManager.table.modules.moveRow.initializeGroupHeader(this);\r\n\t\t}\r\n\t}\r\n\r\n\tcreateValueGroups(){\r\n\t\tvar level = this.level + 1;\r\n\t\tif(this.groupManager.allowedValues && this.groupManager.allowedValues[level]){\r\n\t\t\tthis.groupManager.allowedValues[level].forEach((value) => {\r\n\t\t\t\tthis._createGroup(value, level);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\taddBindings(){\r\n\t\tvar dblTap,\ttapHold, tap, toggleElement;\r\n\r\n\t\t//handle group click events\r\n\t\tif (this.groupManager.table.options.groupClick){\r\n\t\t\tthis.element.addEventListener(\"click\", (e) => {\r\n\t\t\t\tthis.groupManager.table.options.groupClick.call(this.groupManager.table, e, this.getComponent());\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.groupManager.table.options.groupDblClick){\r\n\t\t\tthis.element.addEventListener(\"dblclick\", (e) => {\r\n\t\t\t\tthis.groupManager.table.options.groupDblClick.call(this.groupManager.table, e, this.getComponent());\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.groupManager.table.options.groupContext){\r\n\t\t\tthis.element.addEventListener(\"contextmenu\", (e) => {\r\n\t\t\t\tthis.groupManager.table.options.groupContext.call(this.groupManager.table, e, this.getComponent());\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif ((this.groupManager.table.options.groupContextMenu || this.groupManager.table.options.groupClickMenu) && this.groupManager.table.modExists(\"menu\")){\r\n\t\t\tthis.groupManager.table.modules.menu.initializeGroup.call(this.groupManager.table.modules.menu, this);\r\n\t\t}\r\n\r\n\t\tif (this.groupManager.table.options.groupTap){\r\n\t\t\ttap = false;\r\n\r\n\t\t\tthis.element.addEventListener(\"touchstart\", (e) => {\r\n\t\t\t\ttap = true;\r\n\t\t\t}, {passive: true});\r\n\r\n\t\t\tthis.element.addEventListener(\"touchend\", (e) => {\r\n\t\t\t\tif(tap){\r\n\t\t\t\t\tthis.groupManager.table.options.groupTap(e, this.getComponent());\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttap = false;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.groupManager.table.options.groupDblTap){\r\n\t\t\tdblTap = null;\r\n\r\n\t\t\tthis.element.addEventListener(\"touchend\", (e) => {\r\n\t\t\t\tif(dblTap){\r\n\t\t\t\t\tclearTimeout(dblTap);\r\n\t\t\t\t\tdblTap = null;\r\n\r\n\t\t\t\t\tthis.groupManager.table.options.groupDblTap(e, this.getComponent());\r\n\t\t\t\t}else{\r\n\r\n\t\t\t\t\tdblTap = setTimeout(() => {\r\n\t\t\t\t\t\tclearTimeout(dblTap);\r\n\t\t\t\t\t\tdblTap = null;\r\n\t\t\t\t\t}, 300);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.groupManager.table.options.groupTapHold){\r\n\t\t\ttapHold = null;\r\n\r\n\t\t\tthis.element.addEventListener(\"touchstart\", (e) => {\r\n\t\t\t\tclearTimeout(tapHold);\r\n\r\n\t\t\t\ttapHold = setTimeout(() => {\r\n\t\t\t\t\tclearTimeout(tapHold);\r\n\t\t\t\t\ttapHold = null;\r\n\t\t\t\t\ttap = false;\r\n\t\t\t\t\tthis.groupManager.table.options.groupTapHold(e, this.getComponent());\r\n\t\t\t\t}, 1000);\r\n\r\n\t\t\t}, {passive: true});\r\n\r\n\t\t\tthis.element.addEventListener(\"touchend\", (e) => {\r\n\t\t\t\tclearTimeout(tapHold);\r\n\t\t\t\ttapHold = null;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(this.groupManager.table.options.groupToggleElement){\r\n\t\t\ttoggleElement = this.groupManager.table.options.groupToggleElement == \"arrow\" ? this.arrowElement : this.element;\r\n\r\n\t\t\ttoggleElement.addEventListener(\"click\", (e) => {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\te.stopImmediatePropagation();\r\n\t\t\t\tthis.toggleVisibility();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t_createGroup(groupID, level){\r\n\t\tvar groupKey = level + \"_\" + groupID;\r\n\t\tvar group = new Group(this.groupManager, this, level, groupID,  this.groupManager.groupIDLookups[level].field, this.groupManager.headerGenerator[level] || this.groupManager.headerGenerator[0], this.old ? this.old.groups[groupKey] : false);\r\n\r\n\t\tthis.groups[groupKey] = group;\r\n\t\tthis.groupList.push(group);\r\n\t}\r\n\r\n\t_addRowToGroup(row){\r\n\r\n\t\tvar level = this.level + 1;\r\n\r\n\t\tif(this.hasSubGroups){\r\n\t\t\tvar groupID = this.groupManager.groupIDLookups[level].func(row.getData()),\r\n\t\t\tgroupKey = level + \"_\" + groupID;\r\n\r\n\t\t\tif(this.groupManager.allowedValues && this.groupManager.allowedValues[level]){\r\n\t\t\t\tif(this.groups[groupKey]){\r\n\t\t\t\t\tthis.groups[groupKey].addRow(row);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(!this.groups[groupKey]){\r\n\t\t\t\t\tthis._createGroup(groupID, level);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.groups[groupKey].addRow(row);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t_addRow(row){\r\n\t\tthis.rows.push(row);\r\n\t\trow.modules.group = this;\r\n\t}\r\n\r\n\tinsertRow(row, to, after){\r\n\t\tvar data = this.conformRowData({});\r\n\r\n\t\trow.updateData(data);\r\n\r\n\t\tvar toIndex = this.rows.indexOf(to);\r\n\r\n\t\tif(toIndex > -1){\r\n\t\t\tif(after){\r\n\t\t\t\tthis.rows.splice(toIndex+1, 0, row);\r\n\t\t\t}else{\r\n\t\t\t\tthis.rows.splice(toIndex, 0, row);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(after){\r\n\t\t\t\tthis.rows.push(row);\r\n\t\t\t}else{\r\n\t\t\t\tthis.rows.unshift(row);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\trow.modules.group = this;\r\n\r\n\t\tthis.generateGroupHeaderContents();\r\n\r\n\t\tif(this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\"){\r\n\t\t\tthis.groupManager.table.modules.columnCalcs.recalcGroup(this);\r\n\t\t}\r\n\r\n\t\tthis.groupManager.updateGroupRows(true);\r\n\t}\r\n\r\n\tscrollHeader(left){\r\n\t\tthis.arrowElement.style.marginLeft = left;\r\n\r\n\t\tthis.groupList.forEach(function(child){\r\n\t\t\tchild.scrollHeader(left);\r\n\t\t});\r\n\t}\r\n\r\n\tgetRowIndex(row){}\r\n\r\n\t//update row data to match grouping contraints\r\n\tconformRowData(data){\r\n\t\tif(this.field){\r\n\t\t\tdata[this.field] = this.key;\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Data Conforming Error - Cannot conform row data to match new group as groupBy is a function\");\r\n\t\t}\r\n\r\n\t\tif(this.parent){\r\n\t\t\tdata = this.parent.conformRowData(data);\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\tremoveRow(row){\r\n\t\tvar index = this.rows.indexOf(row);\r\n\t\tvar el = row.getElement();\r\n\r\n\r\n\t\tif(index > -1){\r\n\t\t\tthis.rows.splice(index, 1);\r\n\t\t}\r\n\r\n\t\tif(!this.groupManager.table.options.groupValues && !this.rows.length){\r\n\t\t\tif(this.parent){\r\n\t\t\t\tthis.parent.removeGroup(this);\r\n\t\t\t}else{\r\n\t\t\t\tthis.groupManager.removeGroup(this);\r\n\t\t\t}\r\n\r\n\t\t\tthis.groupManager.updateGroupRows(true);\r\n\t\t}else{\r\n\r\n\t\t\tif(el.parentNode){\r\n\t\t\t\tel.parentNode.removeChild(el);\r\n\t\t\t}\r\n\r\n\t\t\tthis.generateGroupHeaderContents();\r\n\r\n\t\t\tif(this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\"){\r\n\t\t\t\tthis.groupManager.table.modules.columnCalcs.recalcGroup(this);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tremoveGroup(group){\r\n\t\tvar groupKey = group.level + \"_\" + group.key,\r\n\t\tindex;\r\n\r\n\t\tif(this.groups[groupKey]){\r\n\t\t\tdelete this.groups[groupKey];\r\n\r\n\t\t\tindex = this.groupList.indexOf(group);\r\n\r\n\t\t\tif(index > -1){\r\n\t\t\t\tthis.groupList.splice(index, 1);\r\n\t\t\t}\r\n\r\n\t\t\tif(!this.groupList.length){\r\n\t\t\t\tif(this.parent){\r\n\t\t\t\t\tthis.parent.removeGroup(this);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.groupManager.removeGroup(this);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetHeadersAndRows(noCalc){\r\n\t\tvar output = [];\r\n\r\n\t\toutput.push(this);\r\n\r\n\t\tthis._visSet();\r\n\r\n\t\tif(this.visible){\r\n\t\t\tif(this.groupList.length){\r\n\t\t\t\tthis.groupList.forEach(function(group){\r\n\t\t\t\t\toutput = output.concat(group.getHeadersAndRows(noCalc));\r\n\t\t\t\t});\r\n\r\n\t\t\t}else{\r\n\t\t\t\tif(!noCalc && this.groupManager.table.options.columnCalcs != \"table\" && this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasTopCalcs()){\r\n\t\t\t\t\tif(this.calcs.top){\r\n\t\t\t\t\t\tthis.calcs.top.detachElement();\r\n\t\t\t\t\t\tthis.calcs.top.deleteCells();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\r\n\t\t\t\t\toutput.push(this.calcs.top);\r\n\t\t\t\t}\r\n\r\n\t\t\t\toutput = output.concat(this.rows);\r\n\r\n\t\t\t\tif(!noCalc && this.groupManager.table.options.columnCalcs != \"table\" &&  this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasBottomCalcs()){\r\n\t\t\t\t\tif(this.calcs.bottom){\r\n\t\t\t\t\t\tthis.calcs.bottom.detachElement();\r\n\t\t\t\t\t\tthis.calcs.bottom.deleteCells();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\r\n\t\t\t\t\toutput.push(this.calcs.bottom);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(!this.groupList.length && this.groupManager.table.options.columnCalcs != \"table\"){\r\n\r\n\t\t\t\tif(this.groupManager.table.modExists(\"columnCalcs\")){\r\n\r\n\t\t\t\t\tif(!noCalc && this.groupManager.table.modules.columnCalcs.hasTopCalcs()){\r\n\t\t\t\t\t\tif(this.calcs.top){\r\n\t\t\t\t\t\t\tthis.calcs.top.detachElement();\r\n\t\t\t\t\t\t\tthis.calcs.top.deleteCells();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(this.groupManager.table.options.groupClosedShowCalcs){\r\n\t\t\t\t\t\t\tthis.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\r\n\t\t\t\t\t\t\toutput.push(this.calcs.top);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(!noCalc && this.groupManager.table.modules.columnCalcs.hasBottomCalcs()){\r\n\t\t\t\t\t\tif(this.calcs.bottom){\r\n\t\t\t\t\t\t\tthis.calcs.bottom.detachElement();\r\n\t\t\t\t\t\t\tthis.calcs.bottom.deleteCells();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(this.groupManager.table.options.groupClosedShowCalcs){\r\n\t\t\t\t\t\t\tthis.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\r\n\t\t\t\t\t\t\toutput.push(this.calcs.bottom);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgetData(visible, transform){\r\n\t\tvar output = [];\r\n\r\n\t\tthis._visSet();\r\n\r\n\t\tif(!visible || (visible && this.visible)){\r\n\t\t\tthis.rows.forEach((row) => {\r\n\t\t\t\toutput.push(row.getData(transform || \"data\"));\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgetRowCount(){\r\n\t\tvar count = 0;\r\n\r\n\t\tif(this.groupList.length){\r\n\t\t\tthis.groupList.forEach((group) => {\r\n\t\t\t\tcount += group.getRowCount();\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tcount = this.rows.length;\r\n\t\t}\r\n\t\treturn count;\r\n\t}\r\n\r\n\ttoggleVisibility(){\r\n\t\tif(this.visible){\r\n\t\t\tthis.hide();\r\n\t\t}else{\r\n\t\t\tthis.show();\r\n\t\t}\r\n\t}\r\n\r\n\thide(){\r\n\t\tthis.visible = false;\r\n\r\n\t\tif(this.groupManager.table.rowManager.getRenderMode() == \"classic\" && !this.groupManager.table.options.pagination){\r\n\r\n\t\t\tthis.element.classList.remove(\"tabulator-group-visible\");\r\n\r\n\t\t\tif(this.groupList.length){\r\n\t\t\t\tthis.groupList.forEach((group) => {\r\n\r\n\t\t\t\t\tvar rows = group.getHeadersAndRows();\r\n\r\n\t\t\t\t\trows.forEach((row) => {\r\n\t\t\t\t\t\trow.detachElement();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t}else{\r\n\t\t\t\tthis.rows.forEach((row) => {\r\n\t\t\t\t\tvar rowEl = row.getElement();\r\n\t\t\t\t\trowEl.parentNode.removeChild(rowEl);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tthis.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(), this.groupManager.getDisplayIndex());\r\n\r\n\t\t\tthis.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth();\r\n\r\n\t\t}else{\r\n\t\t\tthis.groupManager.updateGroupRows(true);\r\n\t\t}\r\n\r\n\t\tthis.groupManager.table.options.groupVisibilityChanged.call(this.table, this.getComponent(), false);\r\n\t}\r\n\r\n\tshow(){\r\n\t\tthis.visible = true;\r\n\r\n\t\tif(this.groupManager.table.rowManager.getRenderMode() == \"classic\" && !this.groupManager.table.options.pagination){\r\n\r\n\t\t\tthis.element.classList.add(\"tabulator-group-visible\");\r\n\r\n\t\t\tvar prev = this.getElement();\r\n\r\n\t\t\tif(this.groupList.length){\r\n\t\t\t\tthis.groupList.forEach((group) => {\r\n\t\t\t\t\tvar rows = group.getHeadersAndRows();\r\n\r\n\t\t\t\t\trows.forEach((row) => {\r\n\t\t\t\t\t\tvar rowEl = row.getElement();\r\n\t\t\t\t\t\tprev.parentNode.insertBefore(rowEl, prev.nextSibling);\r\n\t\t\t\t\t\trow.initialize();\r\n\t\t\t\t\t\tprev = rowEl;\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t}else{\r\n\t\t\t\tthis.rows.forEach((row) => {\r\n\t\t\t\t\tvar rowEl = row.getElement();\r\n\t\t\t\t\tprev.parentNode.insertBefore(rowEl, prev.nextSibling);\r\n\t\t\t\t\trow.initialize();\r\n\t\t\t\t\tprev = rowEl;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tthis.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(), this.groupManager.getDisplayIndex());\r\n\r\n\t\t\tthis.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth();\r\n\t\t}else{\r\n\t\t\tthis.groupManager.updateGroupRows(true);\r\n\t\t}\r\n\r\n\t\tthis.groupManager.table.options.groupVisibilityChanged.call(this.table, this.getComponent(), true);\r\n\t}\r\n\r\n\t_visSet(){\r\n\t\tvar data = [];\r\n\r\n\t\tif(typeof this.visible == \"function\"){\r\n\r\n\t\t\tthis.rows.forEach(function(row){\r\n\t\t\t\tdata.push(row.getData());\r\n\t\t\t});\r\n\r\n\t\t\tthis.visible = this.visible(this.key, this.getRowCount(), data, this.getComponent());\r\n\t\t}\r\n\t}\r\n\r\n\tgetRowGroup(row){\r\n\t\tvar match = false;\r\n\t\tif(this.groupList.length){\r\n\t\t\tthis.groupList.forEach(function(group){\r\n\t\t\t\tvar result = group.getRowGroup(row);\r\n\r\n\t\t\t\tif(result){\r\n\t\t\t\t\tmatch = result;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tif(this.rows.find(function(item){\r\n\t\t\t\treturn item === row;\r\n\t\t\t})){\r\n\t\t\t\tmatch = this;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn match;\r\n\t}\r\n\r\n\tgetSubGroups(component){\r\n\t\tvar output = [];\r\n\r\n\t\tthis.groupList.forEach(function(child){\r\n\t\t\toutput.push(component ? child.getComponent() : child);\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgetRows(compoment){\r\n\t\tvar output = [];\r\n\r\n\t\tthis.rows.forEach(function(row){\r\n\t\t\toutput.push(compoment ? row.getComponent() : row);\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgenerateGroupHeaderContents(){\r\n\t\tvar data = [];\r\n\r\n\t\tthis.rows.forEach(function(row){\r\n\t\t\tdata.push(row.getData());\r\n\t\t});\r\n\r\n\t\tthis.elementContents = this.generator(this.key, this.getRowCount(), data, this.getComponent());\r\n\r\n\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\r\n\r\n\t\tif(typeof this.elementContents === \"string\"){\r\n\t\t\tthis.element.innerHTML = this.elementContents;\r\n\t\t}else{\r\n\t\t\tthis.element.appendChild(this.elementContents);\r\n\t\t}\r\n\r\n\t\tthis.element.insertBefore(this.arrowElement, this.element.firstChild);\r\n\t}\r\n\r\n\tgetPath(path = []) {\r\n\t\tpath.unshift(this.key);\r\n\t\tif(this.parent) {\r\n\t\t\tthis.parent.getPath(path);\r\n\t\t}\r\n\t\treturn path;\r\n\t}\r\n\r\n\t////////////// Standard Row Functions //////////////\r\n\r\n\tgetElement(){\r\n\t\tthis.addBindingsd = false;\r\n\r\n\t\tthis._visSet();\r\n\r\n\t\tif(this.visible){\r\n\t\t\tthis.element.classList.add(\"tabulator-group-visible\");\r\n\t\t}else{\r\n\t\t\tthis.element.classList.remove(\"tabulator-group-visible\");\r\n\t\t}\r\n\r\n\t\tfor(var i = 0; i < this.element.childNodes.length; ++i){\r\n\t\t\tthis.element.childNodes[i].parentNode.removeChild(this.element.childNodes[i]);\r\n\t\t}\r\n\r\n\t\tthis.generateGroupHeaderContents();\r\n\r\n\t\t// this.addBindings();\r\n\r\n\t\treturn this.element;\r\n\t}\r\n\r\n\tdetachElement(){\r\n\t\tif (this.element && this.element.parentNode){\r\n\t\t\tthis.element.parentNode.removeChild(this.element);\r\n\t\t}\r\n\t}\r\n\r\n\t//normalize the height of elements in the row\r\n\tnormalizeHeight(){\r\n\t\tthis.setHeight(this.element.clientHeight);\r\n\t}\r\n\r\n\tinitialize(force){\r\n\t\tif(!this.initialized || force){\r\n\t\t\tthis.normalizeHeight();\r\n\t\t\tthis.initialized = true;\r\n\t\t}\r\n\t}\r\n\r\n\treinitialize(){\r\n\t\tthis.initialized = false;\r\n\t\tthis.height = 0;\r\n\r\n\t\tif(Helpers.elVisible(this.element)){\r\n\t\t\tthis.initialize(true);\r\n\t\t}\r\n\t}\r\n\r\n\tsetHeight(height){\r\n\t\tif(this.height != height){\r\n\t\t\tthis.height = height;\r\n\t\t\tthis.outerHeight = this.element.offsetHeight;\r\n\t\t}\r\n\t}\r\n\r\n\t//return rows outer height\r\n\tgetHeight(){\r\n\t\treturn this.outerHeight;\r\n\t}\r\n\r\n\tgetGroup(){\r\n\t\treturn this;\r\n\t}\r\n\r\n\treinitializeHeight(){}\r\n\r\n\tcalcHeight(){}\r\n\r\n\tsetCellHeight(){}\r\n\r\n\tclearCellHeight(){}\r\n\r\n\t//////////////// Object Generation /////////////////\r\n\tgetComponent(){\r\n\t\tif(!this.component){\r\n\t\t\tthis.component = new GroupComponent(this);\r\n\t\t}\r\n\r\n\t\treturn this.component;\r\n\t}\r\n}\r\n\r\nexport default Group;","import Module from '../../core/Module.js';\r\n\r\nimport GroupComponent from './GroupComponent.js';\r\nimport Group from './Group.js';\r\n\r\nclass GroupRows extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.groupIDLookups = false; //enable table grouping and set field to group by\r\n\t\tthis.startOpen = [function(){return false;}]; //starting state of group\r\n\t\tthis.headerGenerator = [function(){return \"\";}];\r\n\t\tthis.groupList = []; //ordered list of groups\r\n\t\tthis.allowedValues = false;\r\n\t\tthis.groups = {}; //hold row groups\r\n\t\tthis.displayIndex = 0; //index in display pipeline\r\n\t}\r\n\r\n\t//initialize group configuration\r\n\tinitialize(){\r\n\t\tvar groupBy = this.table.options.groupBy,\r\n\t\tstartOpen = this.table.options.groupStartOpen,\r\n\t\tgroupHeader = this.table.options.groupHeader;\r\n\r\n\t\tthis.allowedValues = this.table.options.groupValues;\r\n\r\n\t\tif(Array.isArray(groupBy) && Array.isArray(groupHeader) && groupBy.length > groupHeader.length){\r\n\t\t\tconsole.warn(\"Error creating group headers, groupHeader array is shorter than groupBy array\");\r\n\t\t}\r\n\r\n\t\tthis.headerGenerator = [function(){return \"\";}];\r\n\t\tthis.startOpen = [function(){return false;}]; //starting state of group\r\n\r\n\t\tthis.table.modules.localize.bind(\"groups|item\", (langValue, lang) => {\r\n\t\t\tthis.headerGenerator[0] = (value, count, data) => { //header layout function\r\n\t\t\t\treturn (typeof value === \"undefined\" ? \"\" : value) + \"<span>(\" + count + \" \" + ((count === 1) ? langValue : lang.groups.items) + \")</span>\";\r\n\t\t\t};\r\n\t\t});\r\n\r\n\t\tthis.groupIDLookups = [];\r\n\r\n\t\tif(Array.isArray(groupBy) || groupBy){\r\n\t\t\tif(this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"table\" && this.table.options.columnCalcs != \"both\"){\r\n\t\t\t\tthis.table.modules.columnCalcs.removeCalcs();\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"group\"){\r\n\r\n\t\t\t\tvar cols = this.table.columnManager.getRealColumns();\r\n\r\n\t\t\t\tcols.forEach((col) => {\r\n\t\t\t\t\tif(col.definition.topCalc){\r\n\t\t\t\t\t\tthis.table.modules.columnCalcs.initializeTopRow();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(col.definition.bottomCalc){\r\n\t\t\t\t\t\tthis.table.modules.columnCalcs.initializeBottomRow();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(!Array.isArray(groupBy)){\r\n\t\t\tgroupBy = [groupBy];\r\n\t\t}\r\n\r\n\t\tgroupBy.forEach((group, i) => {\r\n\t\t\tvar lookupFunc, column;\r\n\r\n\t\t\tif(typeof group == \"function\"){\r\n\t\t\t\tlookupFunc = group;\r\n\t\t\t}else{\r\n\t\t\t\tcolumn = this.table.columnManager.getColumnByField(group);\r\n\r\n\t\t\t\tif(column){\r\n\t\t\t\t\tlookupFunc = function(data){\r\n\t\t\t\t\t\treturn column.getFieldValue(data);\r\n\t\t\t\t\t};\r\n\t\t\t\t}else{\r\n\t\t\t\t\tlookupFunc = function(data){\r\n\t\t\t\t\t\treturn data[group];\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.groupIDLookups.push({\r\n\t\t\t\tfield: typeof group === \"function\" ? false : group,\r\n\t\t\t\tfunc:lookupFunc,\r\n\t\t\t\tvalues:this.allowedValues ? this.allowedValues[i] : false,\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tif(startOpen){\r\n\t\t\tif(!Array.isArray(startOpen)){\r\n\t\t\t\tstartOpen = [startOpen];\r\n\t\t\t}\r\n\r\n\t\t\tstartOpen.forEach((level) => {\r\n\t\t\t\tlevel = typeof level == \"function\" ? level : function(){return true;};\r\n\t\t\t});\r\n\r\n\t\t\tthis.startOpen = startOpen;\r\n\t\t}\r\n\r\n\t\tif(groupHeader){\r\n\t\t\tthis.headerGenerator = Array.isArray(groupHeader) ? groupHeader : [groupHeader];\r\n\t\t}\r\n\r\n\t\tthis.initialized = true;\r\n\t}\r\n\r\n\tsetDisplayIndex(index){\r\n\t\tthis.displayIndex = index;\r\n\t}\r\n\r\n\tgetDisplayIndex(){\r\n\t\treturn this.displayIndex;\r\n\t}\r\n\r\n\t//return appropriate rows with group headers\r\n\tgetRows(rows){\r\n\t\tif(this.groupIDLookups.length){\r\n\r\n\t\t\tthis.table.options.dataGrouping.call(this.table);\r\n\r\n\t\t\tthis.generateGroups(rows);\r\n\r\n\t\t\tif(this.table.options.dataGrouped){\r\n\t\t\t\tthis.table.options.dataGrouped.call(this.table, this.getGroups(true));\r\n\t\t\t}\r\n\r\n\t\t\treturn this.updateGroupRows();\r\n\r\n\t\t}else{\r\n\t\t\treturn rows.slice(0);\r\n\t\t}\r\n\t}\r\n\r\n\tgetGroups(compoment){\r\n\t\tvar groupComponents = [];\r\n\r\n\t\tthis.groupList.forEach(function(group){\r\n\t\t\tgroupComponents.push(compoment ? group.getComponent() : group);\r\n\t\t});\r\n\r\n\t\treturn groupComponents;\r\n\t}\r\n\r\n\tgetChildGroups(group){\r\n\t\tvar groupComponents = [];\r\n\r\n\t\tif(!group){\r\n\t\t\tgroup = this;\r\n\t\t}\r\n\r\n\t\tgroup.groupList.forEach((child) => {\r\n\t\t\tif(child.groupList.length){\r\n\t\t\t\tgroupComponents = groupComponents.concat(this.getChildGroups(child));\r\n\t\t\t}else{\r\n\t\t\t\tgroupComponents.push(child);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn groupComponents;\r\n\t}\r\n\r\n\twipe(){\r\n\t\tthis.groupList.forEach(function(group){\r\n\t\t\tgroup.wipe();\r\n\t\t});\r\n\t}\r\n\r\n\tpullGroupListData(groupList) {\r\n\t\tvar groupListData = [];\r\n\r\n\t\tgroupList.forEach((group) => {\r\n\t\t\tvar groupHeader = {};\r\n\t\t\tgroupHeader.level = 0;\r\n\t\t\tgroupHeader.rowCount = 0;\r\n\t\t\tgroupHeader.headerContent = \"\";\r\n\t\t\tvar childData = [];\r\n\r\n\t\t\tif (group.hasSubGroups) {\r\n\t\t\t\tchildData = this.pullGroupListData(group.groupList);\r\n\r\n\t\t\t\tgroupHeader.level = group.level;\r\n\t\t\t\tgroupHeader.rowCount = childData.length - group.groupList.length; // data length minus number of sub-headers\r\n\t\t\t\tgroupHeader.headerContent = group.generator(group.key, groupHeader.rowCount, group.rows, group);\r\n\r\n\t\t\t\tgroupListData.push(groupHeader);\r\n\t\t\t\tgroupListData = groupListData.concat(childData);\r\n\t\t\t}\r\n\r\n\t\t\telse {\r\n\t\t\t\tgroupHeader.level = group.level;\r\n\t\t\t\tgroupHeader.headerContent = group.generator(group.key, group.rows.length, group.rows, group);\r\n\t\t\t\tgroupHeader.rowCount = group.getRows().length;\r\n\r\n\t\t\t\tgroupListData.push(groupHeader);\r\n\r\n\t\t\t\tgroup.getRows().forEach((row) => {\r\n\t\t\t\t\tgroupListData.push(row.getData(\"data\"));\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn groupListData\r\n\t}\r\n\r\n\tgetGroupedData(){\r\n\r\n\t\treturn this.pullGroupListData(this.groupList);\r\n\t}\r\n\r\n\tgetRowGroup(row){\r\n\t\tvar match = false;\r\n\r\n\t\tthis.groupList.forEach((group) => {\r\n\t\t\tvar result = group.getRowGroup(row);\r\n\r\n\t\t\tif(result){\r\n\t\t\t\tmatch = result;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn match;\r\n\t}\r\n\r\n\tcountGroups(){\r\n\t\treturn this.groupList.length;\r\n\t}\r\n\r\n\tgenerateGroups(rows){\r\n\t\tvar oldGroups = this.groups;\r\n\r\n\t\tthis.groups = {};\r\n\t\tthis.groupList =[];\r\n\r\n\t\tif(this.allowedValues && this.allowedValues[0]){\r\n\t\t\tthis.allowedValues[0].forEach((value) => {\r\n\t\t\t\tthis.createGroup(value, 0, oldGroups);\r\n\t\t\t});\r\n\r\n\t\t\trows.forEach((row) => {\r\n\t\t\t\tthis.assignRowToExistingGroup(row, oldGroups);\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\trows.forEach((row) => {\r\n\t\t\t\tthis.assignRowToGroup(row, oldGroups);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcreateGroup(groupID, level, oldGroups){\r\n\t\tvar groupKey = level + \"_\" + groupID,\r\n\t\tgroup;\r\n\r\n\t\toldGroups = oldGroups || [];\r\n\r\n\t\tgroup = new Group(this, false, level, groupID, this.groupIDLookups[0].field, this.headerGenerator[0], oldGroups[groupKey]);\r\n\r\n\t\tthis.groups[groupKey] = group;\r\n\t\tthis.groupList.push(group);\r\n\t}\r\n\r\n\tassignRowToExistingGroup(row, oldGroups){\r\n\t\tvar groupID = this.groupIDLookups[0].func(row.getData()),\r\n\t\tgroupKey = \"0_\" + groupID;\r\n\r\n\t\tif(this.groups[groupKey]){\r\n\t\t\tthis.groups[groupKey].addRow(row);\r\n\t\t}\r\n\t}\r\n\r\n\tassignRowToGroup(row, oldGroups){\r\n\t\tvar groupID = this.groupIDLookups[0].func(row.getData()),\r\n\t\tnewGroupNeeded = !this.groups[\"0_\" + groupID];\r\n\r\n\t\tif(newGroupNeeded){\r\n\t\t\tthis.createGroup(groupID, 0, oldGroups);\r\n\t\t}\r\n\r\n\t\tthis.groups[\"0_\" + groupID].addRow(row);\r\n\r\n\t\treturn !newGroupNeeded;\r\n\t}\r\n\r\n\treassignRowToGroup(row){\r\n\t\tvar oldRowGroup = row.getGroup(),\r\n\t\t\toldGroupPath = oldRowGroup.getPath(),\r\n\t\t\tnewGroupPath = this.getExpectedPath(row),\r\n\t\t\tsamePath = true;\r\n\r\n\t\t// figure out if new group path is the same as old group path\r\n\t\tvar samePath = (oldGroupPath.length == newGroupPath.length) && oldGroupPath.every((element, index) => {\r\n\t\t\treturn element === newGroupPath[index];\r\n\t\t});\r\n\r\n\t\t// refresh if they new path and old path aren't the same (aka the row's groupings have changed)\r\n\t\tif(!samePath) {\r\n\t\t\toldRowGroup.removeRow(row);\r\n\t\t\tthis.assignRowToGroup(row, this.groups);\r\n\t\t\tthis.table.rowManager.refreshActiveData(\"group\", false, true);\r\n\t\t}\r\n\t}\r\n\r\n\tgetExpectedPath(row) {\r\n\t\tvar groupPath = [], rowData = row.getData();\r\n\r\n\t\tthis.groupIDLookups.forEach((groupId) => {\r\n\t\t\tgroupPath.push(groupId.func(rowData));\r\n\t\t});\r\n\r\n\t\treturn groupPath;\r\n\t}\r\n\r\n\tupdateGroupRows(force){\r\n\t\tvar output = [],\r\n\t\toldRowCount;\r\n\r\n\t\tthis.groupList.forEach((group) => {\r\n\t\t\toutput = output.concat(group.getHeadersAndRows());\r\n\t\t});\r\n\r\n\t\t//force update of table display\r\n\t\tif(force){\r\n\t\t\tvar displayIndex = this.table.rowManager.setDisplayRows(output, this.getDisplayIndex());\r\n\r\n\t\t\tif(displayIndex !== true){\r\n\t\t\t\tthis.setDisplayIndex(displayIndex);\r\n\t\t\t}\r\n\r\n\t\t\tthis.table.rowManager.refreshActiveData(\"group\", true, true);\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tscrollHeaders(left){\r\n\t\tif(this.table.options.virtualDomHoz){\r\n\t\t\tleft -= this.table.vdomHoz.vDomPadLeft;\r\n\t\t}\r\n\r\n\t\tleft = left + \"px\";\r\n\r\n\t\tthis.groupList.forEach((group) => {\r\n\t\t\tgroup.scrollHeader(left);\r\n\t\t});\r\n\t}\r\n\r\n\tremoveGroup(group){\r\n\t\tvar groupKey = group.level + \"_\" + group.key,\r\n\t\tindex;\r\n\r\n\t\tif(this.groups[groupKey]){\r\n\t\t\tdelete this.groups[groupKey];\r\n\r\n\t\t\tindex = this.groupList.indexOf(group);\r\n\r\n\t\t\tif(index > -1){\r\n\t\t\t\tthis.groupList.splice(index, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nGroupRows.moduleName = \"groupRows\";\r\n\r\nexport default GroupRows;","export default {\r\n\tcellEdit: function(action){\r\n\t\taction.component.setValueProcessData(action.data.oldValue);\r\n\t},\r\n\r\n\trowAdd: function(action){\r\n\t\taction.component.deleteActual();\r\n\t},\r\n\r\n\trowDelete: function(action){\r\n\t\tvar newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\r\n\r\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\r\n\t\t\tthis.table.modules.groupRows.updateGroupRows(true);\r\n\t\t}\r\n\r\n\t\tthis._rebindRow(action.component, newRow);\r\n\t},\r\n\r\n\trowMove: function(action){\r\n\t\tthis.table.rowManager.moveRowActual(action.component, this.table.rowManager.rows[action.data.posFrom], !action.data.after);\r\n\t\tthis.table.rowManager.redraw();\r\n\t},\r\n};","export default {\r\n\tcellEdit: function(action){\r\n\t\taction.component.setValueProcessData(action.data.newValue);\r\n\t},\r\n\r\n\trowAdd: function(action){\r\n\t\tvar newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\r\n\r\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\r\n\t\t\tthis.table.modules.groupRows.updateGroupRows(true);\r\n\t\t}\r\n\r\n\t\tthis._rebindRow(action.component, newRow);\r\n\t},\r\n\r\n\trowDelete:function(action){\r\n\t\taction.component.deleteActual();\r\n\t},\r\n\r\n\trowMove: function(action){\r\n\t\tthis.table.rowManager.moveRowActual(action.component, this.table.rowManager.rows[action.data.posTo], action.data.after);\r\n\t\tthis.table.rowManager.redraw();\r\n\t},\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport defaultUndoers from './defaults/undoers.js';\r\nimport defaultRedoers from './defaults/redoers.js';\r\n\r\nclass History extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.history = [];\r\n\t\tthis.index = -1;\r\n\t}\r\n\r\n\tclear(){\r\n\t\tthis.history = [];\r\n\t\tthis.index = -1;\r\n\t}\r\n\r\n\taction(type, component, data){\r\n\t\tthis.history = this.history.slice(0, this.index + 1);\r\n\r\n\t\tthis.history.push({\r\n\t\t\ttype:type,\r\n\t\t\tcomponent:component,\r\n\t\t\tdata:data,\r\n\t\t});\r\n\r\n\t\tthis.index ++;\r\n\t}\r\n\r\n\tgetHistoryUndoSize(){\r\n\t\treturn this.index + 1;\r\n\t}\r\n\r\n\tgetHistoryRedoSize(){\r\n\t\treturn this.history.length - (this.index + 1);\r\n\t}\r\n\r\n\tclearComponentHistory(component){\r\n\t\tvar index = this.history.findIndex(function(item){\r\n\t\t\treturn item.component === component;\r\n\t\t});\r\n\r\n\t\tif(index > -1){\r\n\t\t\tthis.history.splice(index, 1);\r\n\t \t\tif(index <= this.index){\r\n\t \t\t\tthis.index--;\r\n\t \t\t}\r\n\r\n\t \t\tthis.clearComponentHistory(component);\r\n\t\t}\r\n\t}\r\n\r\n\tundo(){\r\n\t\tif(this.index > -1){\r\n\t\t\tlet action = this.history[this.index];\r\n\r\n\t\t\tHistory.undoers[action.type].call(this, action);\r\n\r\n\t\t\tthis.index--;\r\n\r\n\t\t\tthis.table.options.historyUndo.call(this.table, action.type, action.component.getComponent(), action.data);\r\n\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"History Undo Error - No more history to undo\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tredo(){\r\n\t\tif(this.history.length-1 > this.index){\r\n\r\n\t\t\tthis.index++;\r\n\r\n\t\t\tlet action = this.history[this.index];\r\n\r\n\t\t\tHistory.redoers[action.type].call(this, action);\r\n\r\n\t\t\tthis.table.options.historyRedo.call(this.table, action.type, action.component.getComponent(), action.data);\r\n\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"History Redo Error - No more history to redo\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t//rebind rows to new element after deletion\r\n\t_rebindRow(oldRow, newRow){\r\n\t\tthis.history.forEach(function(action){\r\n\t\t\tif(action.component instanceof Row){\r\n\t\t\t\tif(action.component === oldRow){\r\n\t\t\t\t\taction.component = newRow;\r\n\t\t\t\t}\r\n\t\t\t}else if(action.component instanceof Cell){\r\n\t\t\t\tif(action.component.row === oldRow){\r\n\t\t\t\t\tvar field = action.component.column.getField();\r\n\r\n\t\t\t\t\tif(field){\r\n\t\t\t\t\t\taction.component = newRow.getCell(field);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nHistory.moduleName = \"history\";\r\n\r\n//load defaults\r\nHistory.undoers = defaultUndoers;\r\nHistory.redoers = defaultRedoers;\r\n\r\nexport default History;","import Module from '../../core/Module.js';\r\n\r\nclass HtmlTableImport extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.fieldIndex = [];\r\n\t\tthis.hasIndex = false;\r\n\t}\r\n\r\n\tparseTable(){\r\n\t\tvar element = this.table.element,\r\n\t\toptions = this.table.options,\r\n\t\tcolumns = options.columns,\r\n\t\theaders = element.getElementsByTagName(\"th\"),\r\n\t\trows = element.getElementsByTagName(\"tbody\")[0],\r\n\t\tdata = [],\r\n\t\tnewTable;\r\n\r\n\t\tthis.hasIndex = false;\r\n\r\n\t\tthis.table.options.htmlImporting.call(this.table);\r\n\r\n\t\trows = rows ? rows.getElementsByTagName(\"tr\") : [];\r\n\r\n\t\t//check for tablator inline options\r\n\t\tthis._extractOptions(element, options);\r\n\r\n\t\tif(headers.length){\r\n\t\t\tthis._extractHeaders(headers, rows);\r\n\t\t}else{\r\n\t\t\tthis._generateBlankHeaders(headers, rows);\r\n\t\t}\r\n\r\n\t\t//iterate through table rows and build data set\r\n\t\tfor(var index = 0; index < rows.length; index++){\r\n\t\t\tvar row = rows[index],\r\n\t\t\tcells = row.getElementsByTagName(\"td\"),\r\n\t\t\titem = {};\r\n\r\n\t\t\t//create index if the dont exist in table\r\n\t\t\tif(!this.hasIndex){\r\n\t\t\t\titem[options.index] = index;\r\n\t\t\t}\r\n\r\n\t\t\tfor(var i = 0; i < cells.length; i++){\r\n\t\t\t\tvar cell = cells[i];\r\n\t\t\t\tif(typeof this.fieldIndex[i] !== \"undefined\"){\r\n\t\t\t\t\titem[this.fieldIndex[i]] = cell.innerHTML;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//add row data to item\r\n\t\t\tdata.push(item);\r\n\t\t}\r\n\r\n\t\t//create new element\r\n\t\tvar newElement = document.createElement(\"div\");\r\n\r\n\t\t//transfer attributes to new element\r\n\t\tvar attributes = element.attributes;\r\n\r\n\t\t// loop through attributes and apply them on div\r\n\r\n\t\tfor(var i in attributes){\r\n\t\t\tif(typeof attributes[i] == \"object\"){\r\n\t\t\t\tnewElement.setAttribute(attributes[i].name, attributes[i].value);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// replace table with div element\r\n\t\telement.parentNode.replaceChild(newElement, element);\r\n\r\n\t\toptions.data = data;\r\n\r\n\t\tthis.table.options.htmlImported.call(this.table);\r\n\r\n\t\tthis.table.element = newElement;\r\n\t}\r\n\r\n\t//extract tabulator attribute options\r\n\t_extractOptions(element, options, defaultOptions){\r\n\t\tvar attributes = element.attributes;\r\n\t\tvar optionsArr = defaultOptions ? Object.assign([], defaultOptions) : Object.keys(options);\r\n\t\tvar optionsList = {};\r\n\r\n\t\toptionsArr.forEach((item) => {\r\n\t\t\toptionsList[item.toLowerCase()] = item;\r\n\t\t});\r\n\r\n\t\tfor(var index in attributes){\r\n\t\t\tvar attrib = attributes[index];\r\n\t\t\tvar name;\r\n\r\n\t\t\tif(attrib && typeof attrib == \"object\" && attrib.name && attrib.name.indexOf(\"tabulator-\") === 0){\r\n\t\t\t\tname = attrib.name.replace(\"tabulator-\", \"\");\r\n\r\n\t\t\t\tif(typeof optionsList[name] !== \"undefined\"){\r\n\t\t\t\t\toptions[optionsList[name]] = this._attribValue(attrib.value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//get value of attribute\r\n\t_attribValue(value){\r\n\t\tif(value === \"true\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tif(value === \"false\"){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t}\r\n\r\n\t//find column if it has already been defined\r\n\t_findCol(title){\r\n\t\tvar match = this.table.options.columns.find((column) => {\r\n\t\t\treturn column.title === title;\r\n\t\t});\r\n\r\n\t\treturn match || false;\r\n\t}\r\n\r\n\t//extract column from headers\r\n\t_extractHeaders(headers, rows){\r\n\t\tfor(var index = 0; index < headers.length; index++){\r\n\t\t\tvar header = headers[index],\r\n\t\t\texists = false,\r\n\t\t\tcol = this._findCol(header.textContent),\r\n\t\t\twidth, attributes;\r\n\r\n\t\t\tif(col){\r\n\t\t\t\texists = true;\r\n\t\t\t}else{\r\n\t\t\t\tcol = {title:header.textContent.trim()};\r\n\t\t\t}\r\n\r\n\t\t\tif(!col.field) {\r\n\t\t\t\tcol.field = header.textContent.trim().toLowerCase().replace(\" \", \"_\");\r\n\t\t\t}\r\n\r\n\t\t\twidth = header.getAttribute(\"width\");\r\n\r\n\t\t\tif(width && !col.width)\t{\r\n\t\t\t\tcol.width = width;\r\n\t\t\t}\r\n\r\n\t\t\t//check for tablator inline options\r\n\t\t\tattributes = header.attributes;\r\n\r\n\t\t\t// //check for tablator inline options\r\n\t\t\tthis._extractOptions(header, col, Column.prototype.defaultOptionList);\r\n\r\n\t\t\tthis.fieldIndex[index] = col.field;\r\n\r\n\t\t\tif(col.field == this.table.options.index){\r\n\t\t\t\tthis.hasIndex = true;\r\n\t\t\t}\r\n\r\n\t\t\tif(!exists){\r\n\t\t\t\tthis.table.options.columns.push(col);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\r\n\t//generate blank headers\r\n\t_generateBlankHeaders(headers, rows){\r\n\t\tfor(var index = 0; index < headers.length; index++){\r\n\t\t\tvar header = headers[index],\r\n\t\t\tcol = {title:\"\", field:\"col\" + index};\r\n\r\n\t\t\tthis.fieldIndex[index] = col.field;\r\n\r\n\t\t\tvar width = header.getAttribute(\"width\");\r\n\r\n\t\t\tif(width){\r\n\t\t\t\tcol.width = width;\r\n\t\t\t}\r\n\r\n\t\t\tthis.table.options.columns.push(col);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nHtmlTableImport.moduleName = \"htmlTableImport\";\r\n\r\nexport default HtmlTableImport;","export default {\r\n\tnavPrev:\"shift + 9\",\r\n\tnavNext:9,\r\n\tnavUp:38,\r\n\tnavDown:40,\r\n\tscrollPageUp:33,\r\n\tscrollPageDown:34,\r\n\tscrollToStart:36,\r\n\tscrollToEnd:35,\r\n\tundo:\"ctrl + 90\",\r\n\tredo:\"ctrl + 89\",\r\n\tcopyToClipboard:\"ctrl + 67\",\r\n};","export default {\r\n\tkeyBlock:function(e){\r\n\t\te.stopPropagation();\r\n\t\te.preventDefault();\r\n\t},\r\n\tscrollPageUp:function(e){\r\n\t\tvar rowManager = this.table.rowManager,\r\n\t\tnewPos = rowManager.scrollTop - rowManager.height,\r\n\t\tscrollMax = rowManager.element.scrollHeight;\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tif(rowManager.displayRowsCount){\r\n\t\t\tif(newPos >= 0){\r\n\t\t\t\trowManager.element.scrollTop = newPos;\r\n\t\t\t}else{\r\n\t\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[0]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.table.element.focus();\r\n\t},\r\n\tscrollPageDown:function(e){\r\n\t\tvar rowManager = this.table.rowManager,\r\n\t\tnewPos = rowManager.scrollTop + rowManager.height,\r\n\t\tscrollMax = rowManager.element.scrollHeight;\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tif(rowManager.displayRowsCount){\r\n\t\t\tif(newPos <= scrollMax){\r\n\t\t\t\trowManager.element.scrollTop = newPos;\r\n\t\t\t}else{\r\n\t\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.table.element.focus();\r\n\r\n\t},\r\n\tscrollToStart:function(e){\r\n\t\tvar rowManager = this.table.rowManager;\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tif(rowManager.displayRowsCount){\r\n\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[0]);\r\n\t\t}\r\n\r\n\t\tthis.table.element.focus();\r\n\t},\r\n\tscrollToEnd:function(e){\r\n\t\tvar rowManager = this.table.rowManager;\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tif(rowManager.displayRowsCount){\r\n\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\r\n\t\t}\r\n\r\n\t\tthis.table.element.focus();\r\n\t},\r\n\tnavPrev:function(e){\r\n\t\tvar cell = false;\r\n\r\n\t\tif(this.table.modExists(\"edit\")){\r\n\t\t\tcell = this.table.modules.edit.currentCell;\r\n\r\n\t\t\tif(cell){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tcell.nav().prev();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tnavNext:function(e){\r\n\t\tvar cell = false;\r\n\t\tvar newRow = this.table.options.tabEndNewRow;\r\n\t\tvar nav;\r\n\r\n\t\tif(this.table.modExists(\"edit\")){\r\n\t\t\tcell = this.table.modules.edit.currentCell;\r\n\r\n\t\t\tif(cell){\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tnav = cell.nav();\r\n\r\n\t\t\t\tif(!nav.next()){\r\n\t\t\t\t\tif(newRow){\r\n\r\n\t\t\t\t\t\tcell.getElement().firstChild.blur();\r\n\r\n\t\t\t\t\t\tif(newRow === true){\r\n\t\t\t\t\t\t\tnewRow = this.table.addRow({})\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tif(typeof newRow == \"function\"){\r\n\t\t\t\t\t\t\t\tnewRow = this.table.addRow(newRow(cell.row.getComponent()))\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tnewRow = this.table.addRow(Object.assign({}, newRow));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tnewRow.then(() => {\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\tnav.next();\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tnavLeft:function(e){\r\n\t\tvar cell = false;\r\n\r\n\t\tif(this.table.modExists(\"edit\")){\r\n\t\t\tcell = this.table.modules.edit.currentCell;\r\n\r\n\t\t\tif(cell){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tcell.nav().left();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tnavRight:function(e){\r\n\t\tvar cell = false;\r\n\r\n\t\tif(this.table.modExists(\"edit\")){\r\n\t\t\tcell = this.table.modules.edit.currentCell;\r\n\r\n\t\t\tif(cell){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tcell.nav().right();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tnavUp:function(e){\r\n\t\tvar cell = false;\r\n\r\n\t\tif(this.table.modExists(\"edit\")){\r\n\t\t\tcell = this.table.modules.edit.currentCell;\r\n\r\n\t\t\tif(cell){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tcell.nav().up();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tnavDown:function(e){\r\n\t\tvar cell = false;\r\n\r\n\t\tif(this.table.modExists(\"edit\")){\r\n\t\t\tcell = this.table.modules.edit.currentCell;\r\n\r\n\t\t\tif(cell){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tcell.nav().down();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tundo:function(e){\r\n\t\tvar cell = false;\r\n\t\tif(this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")){\r\n\r\n\t\t\tcell = this.table.modules.edit.currentCell;\r\n\r\n\t\t\tif(!cell){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tthis.table.modules.history.undo();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tredo:function(e){\r\n\t\tvar cell = false;\r\n\t\tif(this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")){\r\n\r\n\t\t\tcell = this.table.modules.edit.currentCell;\r\n\r\n\t\t\tif(!cell){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tthis.table.modules.history.redo();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tcopyToClipboard:function(e){\r\n\t\tif(!this.table.modules.edit.currentCell){\r\n\t\t\tif(this.table.modExists(\"clipboard\", true)){\r\n\t\t\t\tthis.table.modules.clipboard.copy(false, true);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport defaultBindings from './defaults/bindings.js';\r\nimport defaultActions from './defaults/actions.js';\r\n\r\nclass Keybindings extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.watchKeys = null;\r\n\t\tthis.pressedKeys = null;\r\n\t\tthis.keyupBinding = false;\r\n\t\tthis.keydownBinding = false;\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tvar bindings = this.table.options.keybindings,\r\n\t\tmergedBindings = {};\r\n\r\n\t\tthis.watchKeys = {};\r\n\t\tthis.pressedKeys = [];\r\n\r\n\t\tif(bindings !== false){\r\n\r\n\t\t\tfor(let key in Keybindings.bindings){\r\n\t\t\t\tmergedBindings[key] = Keybindings.bindings[key];\r\n\t\t\t}\r\n\r\n\t\t\tif(Object.keys(bindings).length){\r\n\r\n\t\t\t\tfor(let key in bindings){\r\n\t\t\t\t\tmergedBindings[key] = bindings[key];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.mapBindings(mergedBindings);\r\n\t\t\tthis.bindEvents();\r\n\t\t}\r\n\t}\r\n\r\n\tmapBindings(bindings){\r\n\t\tfor(let key in bindings){\r\n\t\t\tif(Keybindings.actions[key]){\r\n\t\t\t\tif(bindings[key]){\r\n\t\t\t\t\tif(typeof bindings[key] !== \"object\"){\r\n\t\t\t\t\t\tbindings[key] = [bindings[key]];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbindings[key].forEach((binding) => {\r\n\t\t\t\t\t\tthis.mapBinding(key, binding);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Key Binding Error - no such action:\", key);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tmapBinding(action, symbolsList){\r\n\t\tvar binding = {\r\n\t\t\taction: Keybindings.actions[action],\r\n\t\t\tkeys: [],\r\n\t\t\tctrl: false,\r\n\t\t\tshift: false,\r\n\t\t\tmeta: false,\r\n\t\t};\r\n\r\n\t\tvar symbols = symbolsList.toString().toLowerCase().split(\" \").join(\"\").split(\"+\");\r\n\r\n\t\tsymbols.forEach((symbol) => {\r\n\t\t\tswitch(symbol){\r\n\t\t\t\tcase \"ctrl\":\r\n\t\t\t\tbinding.ctrl = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"shift\":\r\n\t\t\t\tbinding.shift = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"meta\":\r\n\t\t\t\tbinding.meta = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\tsymbol = parseInt(symbol);\r\n\t\t\t\tbinding.keys.push(symbol);\r\n\r\n\t\t\t\tif(!this.watchKeys[symbol]){\r\n\t\t\t\t\tthis.watchKeys[symbol] = [];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.watchKeys[symbol].push(binding);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tbindEvents(){\r\n\t\tvar self = this;\r\n\r\n\t\tthis.keyupBinding = function(e){\r\n\t\t\tvar code = e.keyCode;\r\n\t\t\tvar bindings = self.watchKeys[code];\r\n\r\n\t\t\tif(bindings){\r\n\r\n\t\t\t\tself.pressedKeys.push(code);\r\n\r\n\t\t\t\tbindings.forEach(function(binding){\r\n\t\t\t\t\tself.checkBinding(e, binding);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.keydownBinding = function(e){\r\n\t\t\tvar code = e.keyCode;\r\n\t\t\tvar bindings = self.watchKeys[code];\r\n\r\n\t\t\tif(bindings){\r\n\r\n\t\t\t\tvar index = self.pressedKeys.indexOf(code);\r\n\r\n\t\t\t\tif(index > -1){\r\n\t\t\t\t\tself.pressedKeys.splice(index, 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.table.element.addEventListener(\"keydown\", this.keyupBinding);\r\n\r\n\t\tthis.table.element.addEventListener(\"keyup\", this.keydownBinding);\r\n\t}\r\n\r\n\tclearBindings(){\r\n\t\tif(this.keyupBinding){\r\n\t\t\tthis.table.element.removeEventListener(\"keydown\", this.keyupBinding);\r\n\t\t}\r\n\r\n\t\tif(this.keydownBinding){\r\n\t\t\tthis.table.element.removeEventListener(\"keyup\", this.keydownBinding);\r\n\t\t}\r\n\t}\r\n\r\n\tcheckBinding(e, binding){\r\n\t\tvar match = true;\r\n\r\n\t\tif(e.ctrlKey == binding.ctrl && e.shiftKey == binding.shift && e.metaKey == binding.meta){\r\n\t\t\tbinding.keys.forEach((key) => {\r\n\t\t\t\tvar index = this.pressedKeys.indexOf(key);\r\n\r\n\t\t\t\tif(index == -1){\r\n\t\t\t\t\tmatch = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(match){\r\n\t\t\t\tbinding.action.call(this, e);\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\nKeybindings.moduleName = \"keybindings\";\r\n\r\n//load defaults\r\nKeybindings.bindings = defaultBindings;\r\nKeybindings.actions = defaultActions;\r\n\r\nexport default Keybindings;","import Module from '../../core/Module.js';\r\nimport Helpers from '../../core/Helpers.js';\r\n\r\nclass Menu extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.menuElements = [];\r\n\t\tthis.blurEvent = this.hideMenu.bind(this);\r\n\t\tthis.escEvent = this.escMenu.bind(this);\r\n\t\tthis.nestedMenuBlock = false;\r\n\t\tthis.positionReversedX = false;\r\n\t}\r\n\r\n\tinitializeColumnHeader(column){\r\n\t\tvar headerMenuEl;\r\n\r\n\t\tif(column.definition.headerContextMenu){\r\n\t\t\tcolumn.getElement().addEventListener(\"contextmenu\", this.LoadMenuEvent.bind(this, column, column.definition.headerContextMenu));\r\n\t\t\tthis.tapHold(column, column.definition.headerContextMenu);\r\n\t\t}\r\n\r\n\t\t// if(column.definition.headerClickMenu){\r\n\t\t// \tcolumn.getElement().addEventListener(\"click\", this.LoadMenuEvent.bind(this, column, column.definition.headerClickMenu));\r\n\t\t// }\r\n\r\n\t\tif(column.definition.headerMenu){\r\n\r\n\t\t\theaderMenuEl = document.createElement(\"span\");\r\n\t\t\theaderMenuEl.classList.add(\"tabulator-header-menu-button\");\r\n\t\t\theaderMenuEl.innerHTML = \"&vellip;\";\r\n\r\n\t\t\theaderMenuEl.addEventListener(\"click\", (e) => {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tthis.LoadMenuEvent(column, column.definition.headerMenu, e);\r\n\t\t\t});\r\n\r\n\t\t\tcolumn.titleElement.insertBefore(headerMenuEl, column.titleElement.firstChild);\r\n\t\t}\r\n\t}\r\n\r\n\tLoadMenuEvent(component, menu, e){\r\n\t\tmenu = typeof menu == \"function\" ? menu.call(this.table, component.getComponent(), e) : menu;\r\n\r\n\t\t// if(component instanceof Cell){\r\n\t\t// \te.stopImmediatePropagation();\r\n\t\t// }\r\n\r\n\t\tthis.loadMenu(e, component, menu);\r\n\t}\r\n\r\n\ttapHold(component, menu){\r\n\t\tvar element = component.getElement(),\r\n\t\ttapHold = null,\r\n\t\tloaded = false;\r\n\r\n\t\telement.addEventListener(\"touchstart\", (e) => {\r\n\t\t\tclearTimeout(tapHold);\r\n\t\t\tloaded = false;\r\n\r\n\t\t\ttapHold = setTimeout(() => {\r\n\t\t\t\tclearTimeout(tapHold);\r\n\t\t\t\ttapHold = null;\r\n\t\t\t\tloaded = true;\r\n\r\n\t\t\t\tthis.LoadMenuEvent(component, menu, e);\r\n\t\t\t}, 1000);\r\n\r\n\t\t}, {passive: true});\r\n\r\n\t\telement.addEventListener(\"touchend\", (e) => {\r\n\t\t\tclearTimeout(tapHold);\r\n\t\t\ttapHold = null;\r\n\r\n\t\t\tif(loaded){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tinitializeCell(cell){\r\n\t\tif(cell.column.definition.contextMenu){\r\n\t\t\tcell.getElement(true).addEventListener(\"contextmenu\", this.LoadMenuEvent.bind(this, cell, cell.column.definition.contextMenu));\r\n\t\t\tthis.tapHold(cell, cell.column.definition.contextMenu);\r\n\t\t}\r\n\r\n\t\tif(cell.column.definition.clickMenu){\r\n\t\t\tcell.getElement(true).addEventListener(\"click\", this.LoadMenuEvent.bind(this, cell, cell.column.definition.clickMenu));\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeRow(row){\r\n\t\tif(this.table.options.rowContextMenu){\r\n\t\t\trow.getElement().addEventListener(\"contextmenu\", this.LoadMenuEvent.bind(this, row, this.table.options.rowContextMenu));\r\n\t\t\tthis.tapHold(row, this.table.options.rowContextMenu);\r\n\t\t}\r\n\r\n\t\tif(this.table.options.rowClickMenu){\r\n\t\t\trow.getElement().addEventListener(\"click\", this.LoadMenuEvent.bind(this, row, this.table.options.rowClickMenu));\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeGroup (group){\r\n\t\tif(this.table.options.groupContextMenu){\r\n\t\t\tgroup.getElement().addEventListener(\"contextmenu\", this.LoadMenuEvent.bind(this, group, this.table.options.groupContextMenu));\r\n\t\t\tthis.tapHold(group, this.table.options.groupContextMenu);\r\n\t\t}\r\n\r\n\t\tif(this.table.options.groupClickMenu){\r\n\t\t\tgroup.getElement().addEventListener(\"click\", this.LoadMenuEvent.bind(this, group, this.table.options.groupClickMenu));\r\n\t\t}\r\n\t}\r\n\r\n\tloadMenu(e, component, menu, parentEl){\r\n\r\n\t\tvar touch = !(e instanceof MouseEvent);\r\n\r\n\t\tvar menuEl = document.createElement(\"div\");\r\n\t\tmenuEl.classList.add(\"tabulator-menu\");\r\n\r\n\t\tif(!touch){\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\r\n\t\t//abort if no menu set\r\n\t\tif(!menu || !menu.length){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(!parentEl){\r\n\t\t\tif(this.nestedMenuBlock){\r\n\t\t\t\t//abort if child menu already open\r\n\t\t\t\tif(this.isOpen()){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.nestedMenuBlock = setTimeout(() => {\r\n\t\t\t\t\tthis.nestedMenuBlock = false;\r\n\t\t\t\t}, 100)\r\n\t\t\t}\r\n\r\n\t\t\tthis.hideMenu();\r\n\t\t\tthis.menuElements = [];\r\n\t\t}\r\n\r\n\t\tmenu.forEach((item) => {\r\n\t\t\tvar itemEl = document.createElement(\"div\"),\r\n\t\t\tlabel = item.label,\r\n\t\t\tdisabled = item.disabled;\r\n\r\n\t\t\tif(item.separator){\r\n\t\t\t\titemEl.classList.add(\"tabulator-menu-separator\");\r\n\t\t\t}else{\r\n\t\t\t\titemEl.classList.add(\"tabulator-menu-item\");\r\n\r\n\t\t\t\tif(typeof label == \"function\"){\r\n\t\t\t\t\tlabel = label.call(this.table, component.getComponent());\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(label instanceof Node){\r\n\t\t\t\t\titemEl.appendChild(label);\r\n\t\t\t\t}else{\r\n\t\t\t\t\titemEl.innerHTML = label;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(typeof disabled == \"function\"){\r\n\t\t\t\t\tdisabled = disabled.call(this.table, component.getComponent());\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(disabled){\r\n\t\t\t\t\titemEl.classList.add(\"tabulator-menu-item-disabled\");\r\n\t\t\t\t\titemEl.addEventListener(\"click\", (e) => {\r\n\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(item.menu && item.menu.length){\r\n\t\t\t\t\t\titemEl.addEventListener(\"click\", (e) => {\r\n\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\tthis.hideOldSubMenus(menuEl);\r\n\t\t\t\t\t\t\tthis.loadMenu(e, component, item.menu, itemEl);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(item.action){\r\n\t\t\t\t\t\t\titemEl.addEventListener(\"click\", (e) => {\r\n\t\t\t\t\t\t\t\titem.action(e, component.getComponent());\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(item.menu && item.menu.length){\r\n\t\t\t\t\titemEl.classList.add(\"tabulator-menu-item-submenu\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tmenuEl.appendChild(itemEl);\r\n\t\t});\r\n\r\n\t\tmenuEl.addEventListener(\"click\", (e) => {\r\n\t\t\tthis.hideMenu();\r\n\t\t});\r\n\r\n\t\tthis.menuElements.push(menuEl);\r\n\t\tthis.positionMenu(menuEl, parentEl, touch, e);\r\n\t}\r\n\r\n\thideOldSubMenus(menuEl){\r\n\t\tvar index = this.menuElements.indexOf(menuEl);\r\n\r\n\t\tif(index > -1){\r\n\t\t\tfor(let i = this.menuElements.length - 1; i > index; i--){\r\n\t\t\t\tvar el = this.menuElements[i];\r\n\r\n\t\t\t\tif(el.parentNode){\r\n\t\t\t\t\tel.parentNode.removeChild(el);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.menuElements.pop();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpositionMenu(element, parentEl, touch, e){\r\n\t\tvar docHeight = Math.max(document.body.offsetHeight, window.innerHeight),\r\n\t\tx, y, parentOffset;\r\n\r\n\t\tif(!parentEl){\r\n\t\t\tx = touch ? e.touches[0].pageX : e.pageX;\r\n\t\t\ty = touch ? e.touches[0].pageY : e.pageY;\r\n\r\n\t\t\tthis.positionReversedX = false;\r\n\t\t}else{\r\n\t\t\tparentOffset = Helpers.elOffset(parentEl);\r\n\t\t\tx = parentOffset.left + parentEl.offsetWidth;\r\n\t\t\ty = parentOffset.top - 1;\r\n\t\t}\r\n\r\n\t\telement.style.top = y + \"px\";\r\n\t\telement.style.left = x + \"px\";\r\n\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.table.rowManager.element.addEventListener(\"scroll\", this.blurEvent);\r\n\t\t\tdocument.body.addEventListener(\"click\", this.blurEvent);\r\n\t\t\tdocument.body.addEventListener(\"contextmenu\", this.blurEvent);\r\n\t\t\twindow.addEventListener(\"resize\", this.blurEvent);\r\n\t\t\tdocument.body.addEventListener(\"keydown\", this.escEvent);\r\n\t\t}, 100);\r\n\r\n\t\tdocument.body.appendChild(element);\r\n\r\n\t\t//move menu to start on bottom edge if it is too close to the edge of the screen\r\n\t\tif((y + element.offsetHeight) >= docHeight){\r\n\t\t\telement.style.top = \"\";\r\n\r\n\t\t\tif(parentEl){\r\n\t\t\t\telement.style.bottom = (docHeight - parentOffset.top - parentEl.offsetHeight - 1) + \"px\";\r\n\t\t\t}else{\r\n\t\t\t\telement.style.bottom = (docHeight - y) + \"px\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//move menu to start on right edge if it is too close to the edge of the screen\r\n\t\tif((x + element.offsetWidth) >= document.body.offsetWidth || this.positionReversedX){\r\n\t\t\telement.style.left = \"\";\r\n\r\n\t\t\tif(parentEl){\r\n\t\t\t\telement.style.right = (document.documentElement.offsetWidth - parentOffset.left) + \"px\";\r\n\t\t\t}else{\r\n\t\t\t\telement.style.right = (document.documentElement.offsetWidth - x) + \"px\";\r\n\t\t\t}\r\n\r\n\t\t\tthis.positionReversedX = true;\r\n\t\t}\r\n\t}\r\n\r\n\tisOpen(){\r\n\t\treturn !!this.menuElements.length;\r\n\t}\r\n\r\n\tescMenu(e){\r\n\t\tif(e.keyCode == 27){\r\n\t\t\tthis.hideMenu();\r\n\t\t}\r\n\t}\r\n\r\n\thideMenu(){\r\n\t\tthis.menuElements.forEach((menuEl) => {\r\n\t\t\tif(menuEl.parentNode){\r\n\t\t\t\tmenuEl.parentNode.removeChild(menuEl);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdocument.body.removeEventListener(\"keydown\", this.escEvent);\r\n\t\tdocument.body.removeEventListener(\"click\", this.blurEvent);\r\n\t\tdocument.body.removeEventListener(\"contextmenu\", this.blurEvent);\r\n\t\twindow.removeEventListener(\"resize\", this.blurEvent);\r\n\t\tthis.table.rowManager.element.removeEventListener(\"scroll\", this.blurEvent);\r\n\t}\r\n}\r\n\r\nMenu.moduleName = \"menu\";\r\n\r\nexport default Menu;","import Module from '../../core/Module.js';\r\nimport Helpers from '../../core/Helpers.js';\r\n\r\nclass MoveColumns extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.placeholderElement = this.createPlaceholderElement();\r\n\t\tthis.hoverElement = false; //floating column header element\r\n\t\tthis.checkTimeout = false; //click check timeout holder\r\n\t\tthis.checkPeriod = 250; //period to wait on mousedown to consider this a move and not a click\r\n\t\tthis.moving = false; //currently moving column\r\n\t\tthis.toCol = false; //destination column\r\n\t\tthis.toColAfter = false; //position of moving column relative to the desitnation column\r\n\t\tthis.startX = 0; //starting position within header element\r\n\t\tthis.autoScrollMargin = 40; //auto scroll on edge when within margin\r\n\t\tthis.autoScrollStep = 5; //auto scroll distance in pixels\r\n\t\tthis.autoScrollTimeout = false; //auto scroll timeout\r\n\t\tthis.touchMove = false;\r\n\r\n\t\tthis.moveHover = this.moveHover.bind(this);\r\n\t\tthis.endMove = this.endMove.bind(this);\r\n\t}\r\n\r\n\tcreatePlaceholderElement(){\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tel.classList.add(\"tabulator-col\");\r\n\t\tel.classList.add(\"tabulator-col-placeholder\");\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\tinitializeColumn(column){\r\n\t\tvar self = this,\r\n\t\tconfig = {},\r\n\t\tcolEl;\r\n\r\n\t\tif(!column.modules.frozen){\r\n\r\n\t\t\tcolEl = column.getElement();\r\n\r\n\t\t\tconfig.mousemove = function(e){\r\n\t\t\t\tif(column.parent === self.moving.parent){\r\n\t\t\t\t\tif((((self.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(colEl).left) + self.table.columnManager.element.scrollLeft) > (column.getWidth() / 2)){\r\n\t\t\t\t\t\tif(self.toCol !== column || !self.toColAfter){\r\n\t\t\t\t\t\t\tcolEl.parentNode.insertBefore(self.placeholderElement, colEl.nextSibling);\r\n\t\t\t\t\t\t\tself.moveColumn(column, true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(self.toCol !== column || self.toColAfter){\r\n\t\t\t\t\t\t\tcolEl.parentNode.insertBefore(self.placeholderElement, colEl);\r\n\t\t\t\t\t\t\tself.moveColumn(column, false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}.bind(self);\r\n\r\n\t\t\tcolEl.addEventListener(\"mousedown\", function(e){\r\n\t\t\t\tself.touchMove = false;\r\n\t\t\t\tif(e.which === 1){\r\n\t\t\t\t\tself.checkTimeout = setTimeout(function(){\r\n\t\t\t\t\t\tself.startMove(e, column);\r\n\t\t\t\t\t}, self.checkPeriod);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tcolEl.addEventListener(\"mouseup\", function(e){\r\n\t\t\t\tif(e.which === 1){\r\n\t\t\t\t\tif(self.checkTimeout){\r\n\t\t\t\t\t\tclearTimeout(self.checkTimeout);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tself.bindTouchEvents(column);\r\n\t\t}\r\n\r\n\t\tcolumn.modules.moveColumn = config;\r\n\t}\r\n\r\n\tbindTouchEvents(column){\r\n\t\tvar colEl = column.getElement(),\r\n\t\tstartXMove = false, //shifting center position of the cell\r\n\t\tdir = false,\r\n\t\tcurrentCol, nextCol, prevCol, nextColWidth, prevColWidth, nextColWidthLast, prevColWidthLast;\r\n\r\n\t\tcolEl.addEventListener(\"touchstart\", (e) => {\r\n\t\t\tthis.checkTimeout = setTimeout(() => {\r\n\t\t\t\tthis.touchMove = true;\r\n\t\t\t\tcurrentCol = column;\r\n\t\t\t\tnextCol = column.nextColumn();\r\n\t\t\t\tnextColWidth = nextCol ? nextCol.getWidth()/2 : 0;\r\n\t\t\t\tprevCol = column.prevColumn();\r\n\t\t\t\tprevColWidth = prevCol ? prevCol.getWidth()/2 : 0;\r\n\t\t\t\tnextColWidthLast = 0;\r\n\t\t\t\tprevColWidthLast = 0;\r\n\t\t\t\tstartXMove = false;\r\n\r\n\t\t\t\tthis.startMove(e, column);\r\n\t\t\t}, this.checkPeriod);\r\n\t\t}, {passive: true});\r\n\r\n\t\tcolEl.addEventListener(\"touchmove\", (e) => {\r\n\t\t\tvar halfCol, diff, moveToCol;\r\n\r\n\t\t\tif(this.moving){\r\n\t\t\t\tthis.moveHover(e);\r\n\r\n\t\t\t\tif(!startXMove){\r\n\t\t\t\t\tstartXMove = e.touches[0].pageX;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdiff = e.touches[0].pageX - startXMove;\r\n\r\n\t\t\t\tif(diff > 0){\r\n\t\t\t\t\tif(nextCol && diff - nextColWidthLast > nextColWidth){\r\n\t\t\t\t\t\tmoveToCol = nextCol;\r\n\r\n\t\t\t\t\t\tif(moveToCol !== column){\r\n\t\t\t\t\t\t\tstartXMove = e.touches[0].pageX;\r\n\t\t\t\t\t\t\tmoveToCol.getElement().parentNode.insertBefore(this.placeholderElement, moveToCol.getElement().nextSibling);\r\n\t\t\t\t\t\t\tthis.moveColumn(moveToCol, true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(prevCol && -diff - prevColWidthLast >  prevColWidth){\r\n\t\t\t\t\t\tmoveToCol = prevCol;\r\n\r\n\t\t\t\t\t\tif(moveToCol !== column){\r\n\t\t\t\t\t\t\tstartXMove = e.touches[0].pageX;\r\n\t\t\t\t\t\t\tmoveToCol.getElement().parentNode.insertBefore(this.placeholderElement, moveToCol.getElement());\r\n\t\t\t\t\t\t\tthis.moveColumn(moveToCol, false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(moveToCol){\r\n\t\t\t\t\tcurrentCol = moveToCol;\r\n\t\t\t\t\tnextCol = moveToCol.nextColumn();\r\n\t\t\t\t\tnextColWidthLast = nextColWidth;\r\n\t\t\t\t\tnextColWidth = nextCol ? nextCol.getWidth() / 2 : 0;\r\n\t\t\t\t\tprevCol = moveToCol.prevColumn();\r\n\t\t\t\t\tprevColWidthLast = prevColWidth;\r\n\t\t\t\t\tprevColWidth = prevCol ? prevCol.getWidth() / 2 : 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, {passive: true});\r\n\r\n\t\tcolEl.addEventListener(\"touchend\", (e) => {\r\n\t\t\tif(this.checkTimeout){\r\n\t\t\t\tclearTimeout(this.checkTimeout);\r\n\t\t\t}\r\n\t\t\tif(this.moving){\r\n\t\t\t\tthis.endMove(e);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tstartMove(e, column){\r\n\t\tvar element = column.getElement();\r\n\r\n\t\tthis.moving = column;\r\n\t\tthis.startX = (this.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(element).left;\r\n\r\n\t\tthis.table.element.classList.add(\"tabulator-block-select\");\r\n\r\n\t\t//create placeholder\r\n\t\tthis.placeholderElement.style.width = column.getWidth() + \"px\";\r\n\t\tthis.placeholderElement.style.height = column.getHeight() + \"px\";\r\n\r\n\t\telement.parentNode.insertBefore(this.placeholderElement, element);\r\n\t\telement.parentNode.removeChild(element);\r\n\r\n\t\t//create hover element\r\n\t\tthis.hoverElement = element.cloneNode(true);\r\n\t\tthis.hoverElement.classList.add(\"tabulator-moving\");\r\n\r\n\t\tthis.table.columnManager.getElement().appendChild(this.hoverElement);\r\n\r\n\t\tthis.hoverElement.style.left = \"0\";\r\n\t\tthis.hoverElement.style.bottom = \"0\";\r\n\r\n\t\tif(!this.touchMove){\r\n\t\t\tthis._bindMouseMove();\r\n\r\n\t\t\tdocument.body.addEventListener(\"mousemove\", this.moveHover);\r\n\t\t\tdocument.body.addEventListener(\"mouseup\", this.endMove);\r\n\t\t}\r\n\r\n\t\tthis.moveHover(e);\r\n\t}\r\n\r\n\t_bindMouseMove(){\r\n\t\tthis.table.columnManager.columnsByIndex.forEach(function(column){\r\n\t\t\tif(column.modules.moveColumn.mousemove){\r\n\t\t\t\tcolumn.getElement().addEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t_unbindMouseMove(){\r\n\t\tthis.table.columnManager.columnsByIndex.forEach(function(column){\r\n\t\t\tif(column.modules.moveColumn.mousemove){\r\n\t\t\t\tcolumn.getElement().removeEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tmoveColumn(column, after){\r\n\t\tvar movingCells = this.moving.getCells();\r\n\r\n\t\tthis.toCol = column;\r\n\t\tthis.toColAfter = after;\r\n\r\n\t\tif(after){\r\n\t\t\tcolumn.getCells().forEach(function(cell, i){\r\n\t\t\t\tvar cellEl = cell.getElement(true);\r\n\t\t\t\tcellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl.nextSibling);\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tcolumn.getCells().forEach(function(cell, i){\r\n\t\t\t\tvar cellEl = cell.getElement(true);\r\n\t\t\t\tcellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tendMove(e){\r\n\t\tif(e.which === 1 || this.touchMove){\r\n\t\t\tthis._unbindMouseMove();\r\n\r\n\t\t\tthis.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\r\n\t\t\tthis.placeholderElement.parentNode.removeChild(this.placeholderElement);\r\n\t\t\tthis.hoverElement.parentNode.removeChild(this.hoverElement);\r\n\r\n\t\t\tthis.table.element.classList.remove(\"tabulator-block-select\");\r\n\r\n\t\t\tif(this.toCol){\r\n\t\t\t\tthis.table.columnManager.moveColumnActual(this.moving, this.toCol, this.toColAfter);\r\n\t\t\t}\r\n\r\n\t\t\tthis.moving = false;\r\n\t\t\tthis.toCol = false;\r\n\t\t\tthis.toColAfter = false;\r\n\r\n\t\t\tif(!this.touchMove){\r\n\t\t\t\tdocument.body.removeEventListener(\"mousemove\", this.moveHover);\r\n\t\t\t\tdocument.body.removeEventListener(\"mouseup\", this.endMove);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tmoveHover(e){\r\n\t\tvar columnHolder = this.table.columnManager.getElement(),\r\n\t\tscrollLeft = columnHolder.scrollLeft,\r\n\t\txPos = ((this.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(columnHolder).left) + scrollLeft,\r\n\t\tscrollPos;\r\n\r\n\t\tthis.hoverElement.style.left = (xPos - this.startX) + \"px\";\r\n\r\n\t\tif(xPos - scrollLeft < this.autoScrollMargin){\r\n\t\t\tif(!this.autoScrollTimeout){\r\n\t\t\t\tthis.autoScrollTimeout = setTimeout(() => {\r\n\t\t\t\t\tscrollPos = Math.max(0,scrollLeft-5);\r\n\t\t\t\t\tthis.table.rowManager.getElement().scrollLeft = scrollPos;\r\n\t\t\t\t\tthis.autoScrollTimeout = false;\r\n\t\t\t\t}, 1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(scrollLeft + columnHolder.clientWidth - xPos < this.autoScrollMargin){\r\n\t\t\tif(!this.autoScrollTimeout){\r\n\t\t\t\tthis.autoScrollTimeout = setTimeout(() => {\r\n\t\t\t\t\tscrollPos = Math.min(columnHolder.clientWidth, scrollLeft+5);\r\n\t\t\t\t\tthis.table.rowManager.getElement().scrollLeft = scrollPos;\r\n\t\t\t\t\tthis.autoScrollTimeout = false;\r\n\t\t\t\t}, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nMoveColumns.moduleName = \"moveColumn\";\r\n\r\nexport default MoveColumns;\r\n","import Module from '../../core/Module.js';\r\nimport Helpers from '../../core/Helpers.js';\r\n\r\nclass MoveRows extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.placeholderElement = this.createPlaceholderElement();\r\n\t\tthis.hoverElement = false; //floating row header element\r\n\t\tthis.checkTimeout = false; //click check timeout holder\r\n\t\tthis.checkPeriod = 150; //period to wait on mousedown to consider this a move and not a click\r\n\t\tthis.moving = false; //currently moving row\r\n\t\tthis.toRow = false; //destination row\r\n\t\tthis.toRowAfter = false; //position of moving row relative to the desitnation row\r\n\t\tthis.hasHandle = false; //row has handle instead of fully movable row\r\n\t\tthis.startY = 0; //starting Y position within header element\r\n\t\tthis.startX = 0; //starting X position within header element\r\n\r\n\t\tthis.moveHover = this.moveHover.bind(this);\r\n\t\tthis.endMove = this.endMove.bind(this);\r\n\t\tthis.tableRowDropEvent = false;\r\n\r\n\t\tthis.touchMove = false;\r\n\r\n\t\tthis.connection = false;\r\n\t\tthis.connectionSelectorsTables = false;\r\n\t\tthis.connectionSelectorsElements = false;\r\n\t\tthis.connectionElements = [];\r\n\t\tthis.connections = [];\r\n\r\n\t\tthis.connectedTable = false;\r\n\t\tthis.connectedRow = false;\r\n\t}\r\n\r\n\tcreatePlaceholderElement(){\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tel.classList.add(\"tabulator-row\");\r\n\t\tel.classList.add(\"tabulator-row-placeholder\");\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\tinitialize(handle){\r\n\t\tthis.connectionSelectorsTables = this.table.options.movableRowsConnectedTables;\r\n\t\tthis.connectionSelectorsElements = this.table.options.movableRowsConnectedElements;\r\n\r\n\t\tthis.connection = this.connectionSelectorsTables || this.connectionSelectorsElements;\r\n\t}\r\n\r\n\tsetHandle(handle){\r\n\t\tthis.hasHandle = handle;\r\n\t}\r\n\r\n\tinitializeGroupHeader(group){\r\n\t\tvar self = this,\r\n\t\tconfig = {},\r\n\t\trowEl;\r\n\r\n\t\t//inter table drag drop\r\n\t\tconfig.mouseup = function(e){\r\n\t\t\tself.tableRowDrop(e, row);\r\n\t\t}.bind(self);\r\n\r\n\t\t//same table drag drop\r\n\t\tconfig.mousemove = function(e){\r\n\t\t\tif(((e.pageY - Helpers.elOffset(group.element).top) + self.table.rowManager.element.scrollTop) > (group.getHeight() / 2)){\r\n\t\t\t\tif(self.toRow !== group || !self.toRowAfter){\r\n\t\t\t\t\tvar rowEl = group.getElement();\r\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\r\n\t\t\t\t\tself.moveRow(group, true);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(self.toRow !== group || self.toRowAfter){\r\n\t\t\t\t\tvar rowEl = group.getElement();\r\n\t\t\t\t\tif(rowEl.previousSibling){\r\n\t\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\r\n\t\t\t\t\t\tself.moveRow(group, false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}.bind(self);\r\n\r\n\t\tgroup.modules.moveRow = config;\r\n\t}\r\n\r\n\tinitializeRow(row){\r\n\t\tvar self = this,\r\n\t\tconfig = {},\r\n\t\trowEl;\r\n\r\n\t\t//inter table drag drop\r\n\t\tconfig.mouseup = function(e){\r\n\t\t\tself.tableRowDrop(e, row);\r\n\t\t}.bind(self);\r\n\r\n\t\t//same table drag drop\r\n\t\tconfig.mousemove = function(e){\r\n\t\t\tvar rowEl = row.getElement();\r\n\r\n\t\t\tif(((e.pageY - Helpers.elOffset(rowEl).top) + self.table.rowManager.element.scrollTop) > (row.getHeight() / 2)){\r\n\t\t\t\tif(self.toRow !== row || !self.toRowAfter){\r\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\r\n\t\t\t\t\tself.moveRow(row, true);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(self.toRow !== row || self.toRowAfter){\r\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\r\n\t\t\t\t\tself.moveRow(row, false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}.bind(self);\r\n\r\n\r\n\t\tif(!this.hasHandle){\r\n\r\n\t\t\trowEl = row.getElement();\r\n\r\n\t\t\trowEl.addEventListener(\"mousedown\", function(e){\r\n\t\t\t\tif(e.which === 1){\r\n\t\t\t\t\tself.checkTimeout = setTimeout(function(){\r\n\t\t\t\t\t\tself.startMove(e, row);\r\n\t\t\t\t\t}, self.checkPeriod);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\trowEl.addEventListener(\"mouseup\", function(e){\r\n\t\t\t\tif(e.which === 1){\r\n\t\t\t\t\tif(self.checkTimeout){\r\n\t\t\t\t\t\tclearTimeout(self.checkTimeout);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.bindTouchEvents(row, row.getElement());\r\n\t\t}\r\n\r\n\t\trow.modules.moveRow = config;\r\n\t}\r\n\r\n\tinitializeCell(cell){\r\n\t\tvar self = this,\r\n\t\tcellEl = cell.getElement(true);\r\n\r\n\t\tcellEl.addEventListener(\"mousedown\", function(e){\r\n\t\t\tif(e.which === 1){\r\n\t\t\t\tself.checkTimeout = setTimeout(function(){\r\n\t\t\t\t\tself.startMove(e, cell.row);\r\n\t\t\t\t}, self.checkPeriod);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tcellEl.addEventListener(\"mouseup\", function(e){\r\n\t\t\tif(e.which === 1){\r\n\t\t\t\tif(self.checkTimeout){\r\n\t\t\t\t\tclearTimeout(self.checkTimeout);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.bindTouchEvents(cell.row, cellEl);\r\n\t}\r\n\r\n\tbindTouchEvents(row, element){\r\n\t\tvar startYMove = false, //shifting center position of the cell\r\n\t\tdir = false,\r\n\t\tcurrentRow, nextRow, prevRow, nextRowHeight, prevRowHeight, nextRowHeightLast, prevRowHeightLast;\r\n\r\n\t\telement.addEventListener(\"touchstart\", (e) => {\r\n\t\t\tthis.checkTimeout = setTimeout(() => {\r\n\t\t\t\tthis.touchMove = true;\r\n\t\t\t\tcurrentRow = row;\r\n\t\t\t\tnextRow = row.nextRow();\r\n\t\t\t\tnextRowHeight = nextRow ? nextRow.getHeight()/2 : 0;\r\n\t\t\t\tprevRow = row.prevRow();\r\n\t\t\t\tprevRowHeight = prevRow ? prevRow.getHeight()/2 : 0;\r\n\t\t\t\tnextRowHeightLast = 0;\r\n\t\t\t\tprevRowHeightLast = 0;\r\n\t\t\t\tstartYMove = false;\r\n\r\n\t\t\t\tthis.startMove(e, row);\r\n\t\t\t}, this.checkPeriod);\r\n\t\t}, {passive: true});\r\n\t\tthis.moving, this.toRow, this.toRowAfter\r\n\t\telement.addEventListener(\"touchmove\", (e) => {\r\n\r\n\t\t\tvar halfCol, diff, moveToRow;\r\n\r\n\t\t\tif(this.moving){\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tthis.moveHover(e);\r\n\r\n\t\t\t\tif(!startYMove){\r\n\t\t\t\t\tstartYMove = e.touches[0].pageY;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdiff = e.touches[0].pageY - startYMove;\r\n\r\n\t\t\t\tif(diff > 0){\r\n\t\t\t\t\tif(nextRow && diff - nextRowHeightLast > nextRowHeight){\r\n\t\t\t\t\t\tmoveToRow = nextRow;\r\n\r\n\t\t\t\t\t\tif(moveToRow !== row){\r\n\t\t\t\t\t\t\tstartYMove = e.touches[0].pageY\r\n\t\t\t\t\t\t\tmoveToRow.getElement().parentNode.insertBefore(this.placeholderElement, moveToRow.getElement().nextSibling);\r\n\t\t\t\t\t\t\tthis.moveRow(moveToRow, true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(prevRow && -diff - prevRowHeightLast >  prevRowHeight){\r\n\t\t\t\t\t\tmoveToRow = prevRow;\r\n\r\n\t\t\t\t\t\tif(moveToRow !== row){\r\n\t\t\t\t\t\t\tstartYMove = e.touches[0].pageY;\r\n\t\t\t\t\t\t\tmoveToRow.getElement().parentNode.insertBefore(this.placeholderElement, moveToRow.getElement());\r\n\t\t\t\t\t\t\tthis.moveRow(moveToRow, false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(moveToRow){\r\n\t\t\t\t\tcurrentRow = moveToRow;\r\n\t\t\t\t\tnextRow = moveToRow.nextRow();\r\n\t\t\t\t\tnextRowHeightLast = nextRowHeight;\r\n\t\t\t\t\tnextRowHeight = nextRow ? nextRow.getHeight() / 2 : 0;\r\n\t\t\t\t\tprevRow = moveToRow.prevRow();\r\n\t\t\t\t\tprevRowHeightLast = prevRowHeight;\r\n\t\t\t\t\tprevRowHeight = prevRow ? prevRow.getHeight() / 2 : 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\telement.addEventListener(\"touchend\", (e) => {\r\n\t\t\tif(this.checkTimeout){\r\n\t\t\t\tclearTimeout(this.checkTimeout);\r\n\t\t\t}\r\n\t\t\tif(this.moving){\r\n\t\t\t\tthis.endMove(e);\r\n\t\t\t\tthis.touchMove = false;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t_bindMouseMove(){\r\n\t\tthis.table.rowManager.getDisplayRows().forEach((row) => {\r\n\t\t\tif((row.type === \"row\" || row.type === \"group\") && row.modules.moveRow.mousemove){\r\n\t\t\t\trow.getElement().addEventListener(\"mousemove\", row.modules.moveRow.mousemove);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t_unbindMouseMove(){\r\n\t\tthis.table.rowManager.getDisplayRows().forEach((row) => {\r\n\t\t\tif((row.type === \"row\" || row.type === \"group\")  && row.modules.moveRow.mousemove){\r\n\t\t\t\trow.getElement().removeEventListener(\"mousemove\", row.modules.moveRow.mousemove);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tstartMove(e, row){\r\n\t\tvar element = row.getElement();\r\n\r\n\t\tthis.setStartPosition(e, row);\r\n\r\n\t\tthis.moving = row;\r\n\r\n\t\tthis.table.element.classList.add(\"tabulator-block-select\");\r\n\r\n\t\t//create placeholder\r\n\t\tthis.placeholderElement.style.width = row.getWidth() + \"px\";\r\n\t\tthis.placeholderElement.style.height = row.getHeight() + \"px\";\r\n\r\n\t\tif(!this.connection){\r\n\t\t\telement.parentNode.insertBefore(this.placeholderElement, element);\r\n\t\t\telement.parentNode.removeChild(element);\r\n\t\t}else{\r\n\t\t\tthis.table.element.classList.add(\"tabulator-movingrow-sending\");\r\n\t\t\tthis.connectToTables(row);\r\n\t\t}\r\n\r\n\t\t//create hover element\r\n\t\tthis.hoverElement = element.cloneNode(true);\r\n\t\tthis.hoverElement.classList.add(\"tabulator-moving\");\r\n\r\n\t\tif(this.connection){\r\n\t\t\tdocument.body.appendChild(this.hoverElement);\r\n\t\t\tthis.hoverElement.style.left = \"0\";\r\n\t\t\tthis.hoverElement.style.top = \"0\";\r\n\t\t\tthis.hoverElement.style.width = this.table.element.clientWidth + \"px\";\r\n\t\t\tthis.hoverElement.style.whiteSpace = \"nowrap\";\r\n\t\t\tthis.hoverElement.style.overflow = \"hidden\";\r\n\t\t\tthis.hoverElement.style.pointerEvents = \"none\";\r\n\t\t}else{\r\n\t\t\tthis.table.rowManager.getTableElement().appendChild(this.hoverElement);\r\n\r\n\t\t\tthis.hoverElement.style.left = \"0\";\r\n\t\t\tthis.hoverElement.style.top = \"0\";\r\n\r\n\t\t\tthis._bindMouseMove();\r\n\t\t}\r\n\r\n\t\tdocument.body.addEventListener(\"mousemove\", this.moveHover);\r\n\t\tdocument.body.addEventListener(\"mouseup\", this.endMove);\r\n\r\n\t\tthis.moveHover(e);\r\n\t}\r\n\r\n\tsetStartPosition(e, row){\r\n\t\tvar pageX = this.touchMove ? e.touches[0].pageX : e.pageX,\r\n\t\tpageY = this.touchMove ? e.touches[0].pageY : e.pageY,\r\n\t\telement, position;\r\n\r\n\t\telement = row.getElement();\r\n\t\tif(this.connection){\r\n\t\t\tposition = element.getBoundingClientRect();\r\n\r\n\t\t\tthis.startX = position.left - pageX + window.pageXOffset;\r\n\t\t\tthis.startY = position.top - pageY + window.pageYOffset;\r\n\t\t}else{\r\n\t\t\tthis.startY = (pageY - element.getBoundingClientRect().top);\r\n\t\t}\r\n\t}\r\n\r\n\tendMove(e){\r\n\t\tif(!e || e.which === 1 || this.touchMove){\r\n\t\t\tthis._unbindMouseMove();\r\n\r\n\t\t\tif(!this.connection){\r\n\t\t\t\tthis.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\r\n\t\t\t\tthis.placeholderElement.parentNode.removeChild(this.placeholderElement);\r\n\t\t\t}\r\n\r\n\t\t\tthis.hoverElement.parentNode.removeChild(this.hoverElement);\r\n\r\n\t\t\tthis.table.element.classList.remove(\"tabulator-block-select\");\r\n\r\n\t\t\tif(this.toRow){\r\n\t\t\t\tthis.table.rowManager.moveRow(this.moving, this.toRow, this.toRowAfter);\r\n\t\t\t}\r\n\r\n\t\t\tthis.moving = false;\r\n\t\t\tthis.toRow = false;\r\n\t\t\tthis.toRowAfter = false;\r\n\r\n\t\t\tdocument.body.removeEventListener(\"mousemove\", this.moveHover);\r\n\t\t\tdocument.body.removeEventListener(\"mouseup\", this.endMove);\r\n\r\n\t\t\tif(this.connection){\r\n\t\t\t\tthis.table.element.classList.remove(\"tabulator-movingrow-sending\");\r\n\t\t\t\tthis.disconnectFromTables();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tmoveRow(row, after){\r\n\t\tthis.toRow = row;\r\n\t\tthis.toRowAfter = after;\r\n\t}\r\n\r\n\tmoveHover(e){\r\n\t\tif(this.connection){\r\n\t\t\tthis.moveHoverConnections.call(this, e);\r\n\t\t}else{\r\n\t\t\tthis.moveHoverTable.call(this, e);\r\n\t\t}\r\n\t}\r\n\r\n\tmoveHoverTable(e){\r\n\t\tvar rowHolder = this.table.rowManager.getElement(),\r\n\t\tscrollTop = rowHolder.scrollTop,\r\n\t\tyPos = ((this.touchMove ? e.touches[0].pageY : e.pageY) - rowHolder.getBoundingClientRect().top) + scrollTop,\r\n\t\tscrollPos;\r\n\r\n\t\tthis.hoverElement.style.top = (yPos - this.startY) + \"px\";\r\n\t}\r\n\r\n\tmoveHoverConnections(e){\r\n\t\tthis.hoverElement.style.left = (this.startX + (this.touchMove ? e.touches[0].pageX : e.pageX)) + \"px\";\r\n\t\tthis.hoverElement.style.top = (this.startY + (this.touchMove ? e.touches[0].pageY : e.pageY)) + \"px\";\r\n\t}\r\n\r\n\telementRowDrop(e, element, row){\r\n\t\tif(this.table.options.movableRowsElementDrop){\r\n\t\t\tthis.table.options.movableRowsElementDrop(e, element, row ? row.getComponent() : false);\r\n\t\t}\r\n\t}\r\n\r\n\t//establish connection with other tables\r\n\tconnectToTables(row){\r\n\t\tvar connectionTables;\r\n\r\n\t\tif(this.connectionSelectorsTables){\r\n\t\t\tconnectionTables = this.table.modules.comms.getConnections(this.connectionSelectorsTables);\r\n\r\n\t\t\tthis.table.options.movableRowsSendingStart.call(this.table, connectionTables);\r\n\r\n\t\t\tthis.table.modules.comms.send(this.connectionSelectorsTables, \"moveRow\", \"connect\", {\r\n\t\t\t\trow:row,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(this.connectionSelectorsElements){\r\n\r\n\t\t\tthis.connectionElements = [];\r\n\r\n\t\t\tif(!Array.isArray(this.connectionSelectorsElements)){\r\n\t\t\t\tthis.connectionSelectorsElements = [this.connectionSelectorsElements];\r\n\t\t\t}\r\n\r\n\t\t\tthis.connectionSelectorsElements.forEach((query) => {\r\n\t\t\t\tif(typeof query === \"string\"){\r\n\t\t\t\t\tthis.connectionElements = this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(query)));\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.connectionElements.push(query);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.connectionElements.forEach((element) => {\r\n\t\t\t\tvar dropEvent = (e) => {\r\n\t\t\t\t\tthis.elementRowDrop(e, element, this.moving);\r\n\t\t\t\t};\r\n\r\n\t\t\t\telement.addEventListener(\"mouseup\", dropEvent);\r\n\t\t\t\telement.tabulatorElementDropEvent = dropEvent;\r\n\r\n\t\t\t\telement.classList.add(\"tabulator-movingrow-receiving\");\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t//disconnect from other tables\r\n\tdisconnectFromTables(){\r\n\t\tvar connectionTables;\r\n\r\n\t\tif(this.connectionSelectorsTables){\r\n\t\t\tconnectionTables = this.table.modules.comms.getConnections(this.connectionSelectorsTables);\r\n\r\n\t\t\tthis.table.options.movableRowsSendingStop.call(this.table, connectionTables);\r\n\r\n\t\t\tthis.table.modules.comms.send(this.connectionSelectorsTables, \"moveRow\", \"disconnect\");\r\n\t\t}\r\n\r\n\t\tthis.connectionElements.forEach((element) => {\r\n\t\t\telement.classList.remove(\"tabulator-movingrow-receiving\");\r\n\t\t\telement.removeEventListener(\"mouseup\", element.tabulatorElementDropEvent);\r\n\t\t\tdelete element.tabulatorElementDropEvent;\r\n\t\t});\r\n\t}\r\n\r\n\t//accept incomming connection\r\n\tconnect(table, row){\r\n\t\tif(!this.connectedTable){\r\n\t\t\tthis.connectedTable = table;\r\n\t\t\tthis.connectedRow = row;\r\n\r\n\t\t\tthis.table.element.classList.add(\"tabulator-movingrow-receiving\");\r\n\r\n\t\t\tthis.table.rowManager.getDisplayRows().forEach((row) => {\r\n\t\t\t\tif(row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup){\r\n\t\t\t\t\trow.getElement().addEventListener(\"mouseup\", row.modules.moveRow.mouseup);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.tableRowDropEvent = this.tableRowDrop.bind(this);\r\n\r\n\t\t\tthis.table.element.addEventListener(\"mouseup\", this.tableRowDropEvent);\r\n\r\n\t\t\tthis.table.options.movableRowsReceivingStart.call(this.table, row, table);\r\n\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Move Row Error - Table cannot accept connection, already connected to table:\", this.connectedTable);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t//close incomming connection\r\n\tdisconnect(table){\r\n\t\tif(table === this.connectedTable){\r\n\t\t\tthis.connectedTable = false;\r\n\t\t\tthis.connectedRow = false;\r\n\r\n\t\t\tthis.table.element.classList.remove(\"tabulator-movingrow-receiving\");\r\n\r\n\t\t\tthis.table.rowManager.getDisplayRows().forEach((row) =>{\r\n\t\t\t\tif(row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup){\r\n\t\t\t\t\trow.getElement().removeEventListener(\"mouseup\", row.modules.moveRow.mouseup);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.table.element.removeEventListener(\"mouseup\", this.tableRowDropEvent);\r\n\r\n\t\t\tthis.table.options.movableRowsReceivingStop.call(this.table, table);\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Move Row Error - trying to disconnect from non connected table\")\r\n\t\t}\r\n\t}\r\n\r\n\tdropComplete(table, row, success){\r\n\t\tvar sender = false;\r\n\r\n\t\tif(success){\r\n\r\n\t\t\tswitch(typeof this.table.options.movableRowsSender){\r\n\t\t\t\tcase \"string\":\r\n\t\t\t\tsender = this.senders[this.table.options.movableRowsSender];\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"function\":\r\n\t\t\t\tsender = this.table.options.movableRowsSender;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tif(sender){\r\n\t\t\t\tsender.call(this, this.moving.getComponent(), row ? row.getComponent() : undefined, table)\r\n\t\t\t}else{\r\n\t\t\t\tif(this.table.options.movableRowsSender){\r\n\t\t\t\t\tconsole.warn(\"Mover Row Error - no matching sender found:\", this.table.options.movableRowsSender);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.table.options.movableRowsSent.call(this.table, this.moving.getComponent(), row ? row.getComponent() : undefined, table);\r\n\r\n\t\t}else{\r\n\t\t\tthis.table.options.movableRowsSentFailed.call(this.table, this.moving.getComponent(), row ? row.getComponent() : undefined, table);\r\n\t\t}\r\n\r\n\t\tthis.endMove();\r\n\t}\r\n\r\n\ttableRowDrop(e, row){\r\n\t\tvar receiver = false,\r\n\t\tsuccess = false;\r\n\r\n\t\te.stopImmediatePropagation();\r\n\r\n\t\tswitch(typeof this.table.options.movableRowsReceiver){\r\n\t\t\tcase \"string\":\r\n\t\t\treceiver = this.receivers[this.table.options.movableRowsReceiver];\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\treceiver = this.table.options.movableRowsReceiver;\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tif(receiver){\r\n\t\t\tsuccess = receiver.call(this, this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable)\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Mover Row Error - no matching receiver found:\", this.table.options.movableRowsReceiver)\r\n\t\t}\r\n\r\n\t\tif(success){\r\n\t\t\tthis.table.options.movableRowsReceived.call(this.table, this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\r\n\t\t}else{\r\n\t\t\tthis.table.options.movableRowsReceivedFailed.call(this.table, this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\r\n\t\t}\r\n\r\n\t\tthis.table.modules.comms.send(this.connectedTable, \"moveRow\", \"dropcomplete\", {\r\n\t\t\trow:row,\r\n\t\t\tsuccess:success,\r\n\t\t});\r\n\t}\r\n\r\n\tcommsReceived(table, action, data){\r\n\t\tswitch(action){\r\n\t\t\tcase \"connect\":\r\n\t\t\treturn this.connect(table, data.row);\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"disconnect\":\r\n\t\t\treturn this.disconnect(table);\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"dropcomplete\":\r\n\t\t\treturn this.dropComplete(table, data.row, data.success);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nMoveRows.prototype.receivers = {\r\n\tinsert:function(fromRow, toRow, fromTable){\r\n\t\tthis.table.addRow(fromRow.getData(), undefined, toRow);\r\n\t\treturn true;\r\n\t},\r\n\r\n\tadd:function(fromRow, toRow, fromTable){\r\n\t\tthis.table.addRow(fromRow.getData());\r\n\t\treturn true;\r\n\t},\r\n\r\n\tupdate:function(fromRow, toRow, fromTable){\r\n\t\tif(toRow){\r\n\t\t\ttoRow.update(fromRow.getData());\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t},\r\n\r\n\treplace:function(fromRow, toRow, fromTable){\r\n\t\tif(toRow){\r\n\t\t\tthis.table.addRow(fromRow.getData(), undefined, toRow);\r\n\t\t\ttoRow.delete();\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t},\r\n};\r\n\r\nMoveRows.prototype.senders = {\r\n\tdelete:function(fromRow, toRow, toTable){\r\n\t\tfromRow.delete();\r\n\t}\r\n};\r\n\r\nMoveRows.moduleName = \"moveRow\";\r\n\r\nexport default MoveRows;","export default {};","import Module from '../../core/Module.js';\r\n\r\nimport defaultMutators from './defaults/mutators.js';\r\n\r\nclass Mutator extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.allowedTypes = [\"\", \"data\", \"edit\", \"clipboard\"]; //list of muatation types\r\n\t\tthis.enabled = true;\r\n\t}\r\n\r\n\t//initialize column mutator\r\n\tinitializeColumn(column){\r\n\t\tvar match = false,\r\n\t\tconfig = {};\r\n\r\n\t\tthis.allowedTypes.forEach((type) => {\r\n\t\t\tvar key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\r\n\t\t\tmutator;\r\n\r\n\t\t\tif(column.definition[key]){\r\n\t\t\t\tmutator = this.lookupMutator(column.definition[key]);\r\n\r\n\t\t\t\tif(mutator){\r\n\t\t\t\t\tmatch = true;\r\n\r\n\t\t\t\t\tconfig[key] = {\r\n\t\t\t\t\t\tmutator:mutator,\r\n\t\t\t\t\t\tparams: column.definition[key + \"Params\"] || {},\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(match){\r\n\t\t\tcolumn.modules.mutate = config;\r\n\t\t}\r\n\t}\r\n\r\n\tlookupMutator(value){\r\n\t\tvar mutator = false;\r\n\r\n\t\t//set column mutator\r\n\t\tswitch(typeof value){\r\n\t\t\tcase \"string\":\r\n\t\t\tif(Mutator.mutators[value]){\r\n\t\t\t\tmutator = Mutator.mutators[value];\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Mutator Error - No such mutator found, ignoring: \", value);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\tmutator = value;\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn mutator;\r\n\t}\r\n\r\n\t//apply mutator to row\r\n\ttransformRow(data, type, updatedData){\r\n\t\tvar key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\r\n\t\tvalue;\r\n\r\n\t\tif(this.enabled){\r\n\r\n\t\t\tthis.table.columnManager.traverse((column) => {\r\n\t\t\t\tvar mutator, params, component;\r\n\r\n\t\t\t\tif(column.modules.mutate){\r\n\t\t\t\t\tmutator = column.modules.mutate[key] || column.modules.mutate.mutator || false;\r\n\r\n\t\t\t\t\tif(mutator){\r\n\t\t\t\t\t\tvalue = column.getFieldValue(typeof updatedData !== \"undefined\" ? updatedData : data);\r\n\r\n\t\t\t\t\t\tif(type == \"data\" || typeof value !== \"undefined\"){\r\n\t\t\t\t\t\t\tcomponent = column.getComponent();\r\n\t\t\t\t\t\t\tparams = typeof mutator.params === \"function\" ? mutator.params(value, data, type, component) : mutator.params;\r\n\t\t\t\t\t\t\tcolumn.setFieldValue(data, mutator.mutator(value, data, type, params, component));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\t//apply mutator to new cell value\r\n\ttransformCell(cell, value){\r\n\t\tvar mutator = cell.column.modules.mutate.mutatorEdit || cell.column.modules.mutate.mutator || false,\r\n\t\ttempData = {};\r\n\r\n\t\tif(mutator){\r\n\t\t\ttempData = Object.assign(tempData, cell.row.getData());\r\n\t\t\tcell.column.setFieldValue(tempData, value);\r\n\t\t\treturn mutator.mutator(value, tempData, \"edit\", mutator.params, cell.getComponent());\r\n\t\t}else{\r\n\t\t\treturn value;\r\n\t\t}\r\n\t}\r\n\r\n\tenable(){\r\n\t\tthis.enabled = true;\r\n\t}\r\n\r\n\tdisable(){\r\n\t\tthis.enabled = false;\r\n\t}\r\n}\r\n\r\nMutator.moduleName = \"mutator\";\r\n\r\n//load defaults\r\nMutator.mutators = defaultMutators;\r\n\r\nexport default Mutator;","export default {\r\n\t\"page\":\"page\",\r\n\t\"size\":\"size\",\r\n\t\"sorters\":\"sorters\",\r\n\t\"filters\":\"filters\",\r\n};","export default {\r\n\t\"current_page\":\"current_page\",\r\n\t\"last_page\":\"last_page\",\r\n\t\"data\":\"data\",\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport Helpers from '../../core/Helpers.js';\r\n\r\nimport defaultDataSentNames from './defaults/dataSentNames.js';\r\nimport defaultDataReceivedNames from './defaults/dataReceivedNames.js';\r\n\r\nclass Page extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.mode = \"local\";\r\n\t\tthis.progressiveLoad = false;\r\n\r\n\t\tthis.size = 0;\r\n\t\tthis.page = 1;\r\n\t\tthis.count = 5;\r\n\t\tthis.max = 1;\r\n\r\n\t\tthis.displayIndex = 0; //index in display pipeline\r\n\r\n\t\tthis.initialLoad = true;\r\n\r\n\t\tthis.pageSizes = [];\r\n\r\n\t\tthis.dataReceivedNames = {};\r\n\t\tthis.dataSentNames = {};\r\n\r\n\t\tthis.createElements();\r\n\t}\r\n\r\n\tcreateElements(){\r\n\t\tvar button;\r\n\r\n\t\tthis.element = document.createElement(\"span\");\r\n\t\tthis.element.classList.add(\"tabulator-paginator\");\r\n\r\n\t\tthis.pagesElement = document.createElement(\"span\");\r\n\t\tthis.pagesElement.classList.add(\"tabulator-pages\");\r\n\r\n\t\tbutton = document.createElement(\"button\");\r\n\t\tbutton.classList.add(\"tabulator-page\");\r\n\t\tbutton.setAttribute(\"type\", \"button\");\r\n\t\tbutton.setAttribute(\"role\", \"button\");\r\n\t\tbutton.setAttribute(\"aria-label\", \"\");\r\n\t\tbutton.setAttribute(\"title\", \"\");\r\n\r\n\t\tthis.firstBut = button.cloneNode(true);\r\n\t\tthis.firstBut.setAttribute(\"data-page\", \"first\");\r\n\r\n\t\tthis.prevBut = button.cloneNode(true);\r\n\t\tthis.prevBut.setAttribute(\"data-page\", \"prev\");\r\n\r\n\t\tthis.nextBut = button.cloneNode(true);\r\n\t\tthis.nextBut.setAttribute(\"data-page\", \"next\");\r\n\r\n\t\tthis.lastBut = button.cloneNode(true);\r\n\t\tthis.lastBut.setAttribute(\"data-page\", \"last\");\r\n\r\n\t\tif(this.table.options.paginationSizeSelector){\r\n\t\t\tthis.pageSizeSelect = document.createElement(\"select\");\r\n\t\t\tthis.pageSizeSelect.classList.add(\"tabulator-page-size\");\r\n\t\t}\r\n\t}\r\n\r\n\tgeneratePageSizeSelectList(){\r\n\t\tvar pageSizes = [];\r\n\r\n\t\tif(this.pageSizeSelect){\r\n\r\n\t\t\tif(Array.isArray(this.table.options.paginationSizeSelector)){\r\n\t\t\t\tpageSizes = this.table.options.paginationSizeSelector;\r\n\t\t\t\tthis.pageSizes = pageSizes;\r\n\r\n\t\t\t\tif(this.pageSizes.indexOf(this.size) == -1){\r\n\t\t\t\t\tpageSizes.unshift(this.size);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\r\n\t\t\t\tif(this.pageSizes.indexOf(this.size) == -1){\r\n\t\t\t\t\tpageSizes = [];\r\n\r\n\t\t\t\t\tfor (let i = 1; i < 5; i++){\r\n\t\t\t\t\t\tpageSizes.push(this.size * i);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.pageSizes = pageSizes;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tpageSizes = this.pageSizes;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\twhile(this.pageSizeSelect.firstChild) this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);\r\n\r\n\t\t\tpageSizes.forEach((item) => {\r\n\t\t\t\tvar itemEl = document.createElement(\"option\");\r\n\t\t\t\titemEl.value = item;\r\n\r\n\t\t\t\tif(item === true){\r\n\t\t\t\t\tthis.table.modules.localize.bind(\"pagination|all\", function(value){\r\n\t\t\t\t\t\titemEl.innerHTML = value;\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\titemEl.innerHTML = item;\r\n\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\tthis.pageSizeSelect.appendChild(itemEl);\r\n\t\t\t});\r\n\r\n\t\t\tthis.pageSizeSelect.value = this.size;\r\n\t\t}\r\n\t}\r\n\r\n\t//setup pageination\r\n\tinitialize(hidden){\r\n\t\tvar pageSelectLabel, testElRow, testElCell;\r\n\r\n\t\t//update param names\r\n\t\tthis.dataSentNames = Object.assign({}, Page.defaultDataSentNames);\r\n\t\tthis.dataSentNames = Object.assign(this.dataSentNames, this.table.options.paginationDataSent);\r\n\r\n\t\tthis.dataReceivedNames = Object.assign({}, Page.defaultDataReceivedNames);\r\n\t\tthis.dataReceivedNames = Object.assign(this.dataReceivedNames, this.table.options.paginationDataReceived);\r\n\r\n\t\t//build pagination element\r\n\r\n\t\t//bind localizations\r\n\t\tthis.table.modules.localize.bind(\"pagination|first\", (value) => {\r\n\t\t\tthis.firstBut.innerHTML = value;\r\n\t\t});\r\n\r\n\t\tthis.table.modules.localize.bind(\"pagination|first_title\", (value) => {\r\n\t\t\tthis.firstBut.setAttribute(\"aria-label\", value);\r\n\t\t\tthis.firstBut.setAttribute(\"title\", value);\r\n\t\t});\r\n\r\n\t\tthis.table.modules.localize.bind(\"pagination|prev\", (value) => {\r\n\t\t\tthis.prevBut.innerHTML = value;\r\n\t\t});\r\n\r\n\t\tthis.table.modules.localize.bind(\"pagination|prev_title\", (value) => {\r\n\t\t\tthis.prevBut.setAttribute(\"aria-label\", value);\r\n\t\t\tthis.prevBut.setAttribute(\"title\", value);\r\n\t\t});\r\n\r\n\t\tthis.table.modules.localize.bind(\"pagination|next\", (value) => {\r\n\t\t\tthis.nextBut.innerHTML = value;\r\n\t\t});\r\n\r\n\t\tthis.table.modules.localize.bind(\"pagination|next_title\", (value) => {\r\n\t\t\tthis.nextBut.setAttribute(\"aria-label\", value);\r\n\t\t\tthis.nextBut.setAttribute(\"title\", value);\r\n\t\t});\r\n\r\n\t\tthis.table.modules.localize.bind(\"pagination|last\", (value) => {\r\n\t\t\tthis.lastBut.innerHTML = value;\r\n\t\t});\r\n\r\n\t\tthis.table.modules.localize.bind(\"pagination|last_title\", (value) => {\r\n\t\t\tthis.lastBut.setAttribute(\"aria-label\", value);\r\n\t\t\tthis.lastBut.setAttribute(\"title\", value);\r\n\t\t});\r\n\r\n\t\t//click bindings\r\n\t\tthis.firstBut.addEventListener(\"click\", () => {\r\n\t\t\tthis.setPage(1).then(()=>{}).catch(()=>{});\r\n\t\t});\r\n\r\n\t\tthis.prevBut.addEventListener(\"click\", () => {\r\n\t\t\tthis.previousPage().then(()=>{}).catch(()=>{});\r\n\t\t});\r\n\r\n\t\tthis.nextBut.addEventListener(\"click\", () => {\r\n\t\t\tthis.nextPage().then(()=>{}).catch(()=>{});\r\n\t\t});\r\n\r\n\t\tthis.lastBut.addEventListener(\"click\", () => {\r\n\t\t\tthis.setPage(this.max).then(()=>{}).catch(()=>{});\r\n\t\t});\r\n\r\n\t\tif(this.table.options.paginationElement){\r\n\t\t\tthis.element = this.table.options.paginationElement;\r\n\t\t}\r\n\r\n\t\tif(this.pageSizeSelect){\r\n\t\t\tpageSelectLabel = document.createElement(\"label\");\r\n\r\n\t\t\tthis.table.modules.localize.bind(\"pagination|page_size\", (value) => {\r\n\t\t\t\tthis.pageSizeSelect.setAttribute(\"aria-label\", value);\r\n\t\t\t\tthis.pageSizeSelect.setAttribute(\"title\", value);\r\n\t\t\t\tpageSelectLabel.innerHTML = value;\r\n\t\t\t});\r\n\r\n\t\t\tthis.element.appendChild(pageSelectLabel);\r\n\t\t\tthis.element.appendChild(this.pageSizeSelect);\r\n\r\n\t\t\tthis.pageSizeSelect.addEventListener(\"change\", (e) => {\r\n\t\t\t\tthis.setPageSize(this.pageSizeSelect.value == \"true\" ? true : this.pageSizeSelect.value);\r\n\t\t\t\tthis.setPage(1).then(()=>{}).catch(()=>{});\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t//append to DOM\r\n\t\tthis.element.appendChild(this.firstBut);\r\n\t\tthis.element.appendChild(this.prevBut);\r\n\t\tthis.element.appendChild(this.pagesElement);\r\n\t\tthis.element.appendChild(this.nextBut);\r\n\t\tthis.element.appendChild(this.lastBut);\r\n\r\n\t\tif(!this.table.options.paginationElement && !hidden){\r\n\t\t\tthis.table.footerManager.append(this.element, this);\r\n\t\t}\r\n\r\n\t\t//set default values\r\n\t\tthis.mode = this.table.options.pagination;\r\n\r\n\t\tif(this.table.options.paginationSize){\r\n\t\t\tthis.size = this.table.options.paginationSize;\r\n\t\t}else{\r\n\t\t\ttestElRow = document.createElement(\"div\");\r\n\t\t\ttestElRow.classList.add(\"tabulator-row\");\r\n\t\t\ttestElRow.style.visibility = hidden;\r\n\r\n\t\t\ttestElCell = document.createElement(\"div\");\r\n\t\t\ttestElCell.classList.add(\"tabulator-cell\");\r\n\t\t\ttestElCell.innerHTML = \"Page Row Test\";\r\n\r\n\t\t\ttestElRow.appendChild(testElCell);\r\n\r\n\t\t\tthis.table.rowManager.getTableElement().appendChild(testElRow);\r\n\r\n\t\t\tthis.size =  Math.floor(this.table.rowManager.getElement().clientHeight / testElRow.offsetHeight);\r\n\r\n\t\t\tthis.table.rowManager.getTableElement().removeChild(testElRow);\r\n\t\t}\r\n\r\n\t\t// this.page = this.table.options.paginationInitialPage || 1;\r\n\t\tthis.count = this.table.options.paginationButtonCount;\r\n\r\n\t\tthis.generatePageSizeSelectList();\r\n\t}\r\n\r\n\tinitializeProgressive(mode){\r\n\t\tthis.initialize(true);\r\n\t\tthis.mode = \"progressive_\" + mode;\r\n\t\tthis.progressiveLoad = true;\r\n\t}\r\n\r\n\tsetDisplayIndex(index){\r\n\t\tthis.displayIndex = index;\r\n\t}\r\n\r\n\tgetDisplayIndex(){\r\n\t\treturn this.displayIndex;\r\n\t}\r\n\r\n\t//calculate maximum page from number of rows\r\n\tsetMaxRows(rowCount){\r\n\t\tif(!rowCount){\r\n\t\t\tthis.max = 1;\r\n\t\t}else{\r\n\t\t\tthis.max = this.size === true ?  1 : Math.ceil(rowCount/this.size);\r\n\t\t}\r\n\r\n\t\tif(this.page > this.max){\r\n\t\t\tthis.page = this.max;\r\n\t\t}\r\n\t}\r\n\r\n\t//reset to first page without triggering action\r\n\treset(force, columnsChanged){\r\n\t\tif(this.mode == \"local\" || force){\r\n\t\t\tthis.page = 1;\r\n\t\t}\r\n\r\n\t\tif(columnsChanged){\r\n\t\t\tthis.initialLoad = true;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\t//set the maxmum page\r\n\tsetMaxPage(max){\r\n\r\n\t\tmax = parseInt(max);\r\n\r\n\t\tthis.max = max || 1;\r\n\r\n\t\tif(this.page > this.max){\r\n\t\t\tthis.page = this.max;\r\n\t\t\tthis.trigger();\r\n\t\t}\r\n\t}\r\n\r\n\t//set current page number\r\n\tsetPage(page){\r\n\t\tswitch(page){\r\n\t\t\tcase \"first\":\r\n\t\t\t\treturn this.setPage(1);\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"prev\":\r\n\t\t\t\treturn this.previousPage();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"next\":\r\n\t\t\t\treturn this.nextPage();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"last\":\r\n\t\t\t\treturn this.setPage(this.max);\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\r\n\t\t\tpage = parseInt(page);\r\n\r\n\t\t\tif((page > 0 && page <= this.max) || this.mode !== \"local\"){\r\n\t\t\t\tthis.page = page;\r\n\t\t\t\tthis.trigger()\r\n\t\t\t\t.then(()=>{\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t})\r\n\t\t\t\t.catch(()=>{\r\n\t\t\t\t\treject();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.page){\r\n\t\t\t\t\tthis.table.modules.persistence.save(\"page\");\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Pagination Error - Requested page is out of range of 1 - \" + this.max + \":\", page);\r\n\t\t\t\treject();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tsetPageToRow(row){\r\n\t\treturn new Promise((resolve, reject)=>{\r\n\r\n\t\t\tvar rows = this.table.rowManager.getDisplayRows(this.displayIndex - 1);\r\n\t\t\tvar index = rows.indexOf(row);\r\n\r\n\t\t\tif(index > -1){\r\n\t\t\t\tvar page = this.size === true ? 1 : Math.ceil((index + 1) / this.size);\r\n\r\n\t\t\t\tthis.setPage(page)\r\n\t\t\t\t.then(()=>{\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t})\r\n\t\t\t\t.catch(()=>{\r\n\t\t\t\t\treject();\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Pagination Error - Requested row is not visible\");\r\n\t\t\t\treject();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tsetPageSize(size){\r\n\t\tif(size !== true){\r\n\t\t\tsize = parseInt(size);\r\n\t\t}\r\n\r\n\t\tif(size > 0){\r\n\t\t\tthis.size = size;\r\n\t\t}\r\n\r\n\t\tif(this.pageSizeSelect){\r\n\t\t\t// this.pageSizeSelect.value = size;\r\n\t\t\tthis.generatePageSizeSelectList();\r\n\t\t}\r\n\r\n\t\tif(this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.page){\r\n\t\t\tthis.table.modules.persistence.save(\"page\");\r\n\t\t}\r\n\t}\r\n\r\n\t//setup the pagination buttons\r\n\t_setPageButtons(){\r\n\t\tlet leftSize = Math.floor((this.count-1) / 2);\r\n\t\tlet rightSize = Math.ceil((this.count-1) / 2);\r\n\t\tlet min = this.max - this.page + leftSize + 1 < this.count ? this.max-this.count+1: Math.max(this.page-leftSize,1);\r\n\t\tlet max = this.page <= rightSize? Math.min(this.count, this.max) :Math.min(this.page+rightSize, this.max);\r\n\r\n\t\twhile(this.pagesElement.firstChild) this.pagesElement.removeChild(this.pagesElement.firstChild);\r\n\r\n\t\tif(this.page == 1){\r\n\t\t\tthis.firstBut.disabled = true;\r\n\t\t\tthis.prevBut.disabled = true;\r\n\t\t}else{\r\n\t\t\tthis.firstBut.disabled = false;\r\n\t\t\tthis.prevBut.disabled = false;\r\n\t\t}\r\n\r\n\t\tif(this.page == this.max){\r\n\t\t\tthis.lastBut.disabled = true;\r\n\t\t\tthis.nextBut.disabled = true;\r\n\t\t}else{\r\n\t\t\tthis.lastBut.disabled = false;\r\n\t\t\tthis.nextBut.disabled = false;\r\n\t\t}\r\n\r\n\t\tfor(let i = min; i <= max; i++){\r\n\t\t\tif(i>0 && i <= this.max){\r\n\t\t\t\tthis.pagesElement.appendChild(this._generatePageButton(i));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.footerRedraw();\r\n\t}\r\n\r\n\t_generatePageButton(page){\r\n\t\tvar button = document.createElement(\"button\");\r\n\r\n\t\tbutton.classList.add(\"tabulator-page\");\r\n\t\tif(page == this.page){\r\n\t\t\tbutton.classList.add(\"active\");\r\n\t\t}\r\n\r\n\t\tbutton.setAttribute(\"type\", \"button\");\r\n\t\tbutton.setAttribute(\"role\", \"button\");\r\n\r\n\t\tthis.table.modules.localize.bind(\"pagination|page_title\", (value) => {\r\n\t\t\tbutton.setAttribute(\"aria-label\", value + \" \" + page);\r\n\t\t\tbutton.setAttribute(\"title\", value + \" \" + page);\r\n\t\t});\r\n\r\n\t\tbutton.setAttribute(\"data-page\", page);\r\n\t\tbutton.textContent = page;\r\n\r\n\t\tbutton.addEventListener(\"click\", (e) => {\r\n\t\t\tthis.setPage(page).then(()=>{}).catch(()=>{});\r\n\t\t});\r\n\r\n\t\treturn button;\r\n\t}\r\n\r\n\t//previous page\r\n\tpreviousPage(){\r\n\t\treturn new Promise((resolve, reject)=>{\r\n\t\t\tif(this.page > 1){\r\n\t\t\t\tthis.page--;\r\n\t\t\t\tthis.trigger()\r\n\t\t\t\t.then(()=>{\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t})\r\n\t\t\t\t.catch(()=>{\r\n\t\t\t\t\treject();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.page){\r\n\t\t\t\t\tthis.table.modules.persistence.save(\"page\");\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Pagination Error - Previous page would be less than page 1:\", 0);\r\n\t\t\t\treject()\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//next page\r\n\tnextPage(){\r\n\t\treturn new Promise((resolve, reject)=>{\r\n\t\t\tif(this.page < this.max){\r\n\t\t\t\tthis.page++;\r\n\t\t\t\tthis.trigger()\r\n\t\t\t\t.then(()=>{\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t})\r\n\t\t\t\t.catch(()=>{\r\n\t\t\t\t\treject();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.page){\r\n\t\t\t\t\tthis.table.modules.persistence.save(\"page\");\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tif(!this.progressiveLoad){\r\n\t\t\t\t\tconsole.warn(\"Pagination Error - Next page would be greater than maximum page of \" + this.max + \":\", this.max + 1);\r\n\t\t\t\t}\r\n\t\t\t\treject();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//return current page number\r\n\tgetPage(){\r\n\t\treturn this.page;\r\n\t}\r\n\r\n\t//return max page number\r\n\tgetPageMax(){\r\n\t\treturn this.max;\r\n\t}\r\n\r\n\tgetPageSize(size){\r\n\t\treturn this.size;\r\n\t}\r\n\r\n\tgetMode(){\r\n\t\treturn this.mode;\r\n\t}\r\n\r\n\t//return appropriate rows for current page\r\n\tgetRows(data){\r\n\t\tvar output, start, end;\r\n\r\n\t\tif(this.mode == \"local\"){\r\n\t\t\toutput = [];\r\n\r\n\t\t\tif(this.size === true){\r\n\t\t\t\tstart = 0;\r\n\t\t\t\tend = data.length;\r\n\t\t\t}else{\r\n\t\t\t\tstart = this.size * (this.page - 1);\r\n\t\t\t\tend = start + parseInt(this.size);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tthis._setPageButtons();\r\n\r\n\t\t\tfor(let i = start; i < end; i++){\r\n\t\t\t\tif(data[i]){\r\n\t\t\t\t\toutput.push(data[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn output;\r\n\t\t}else{\r\n\t\t\tthis._setPageButtons();\r\n\r\n\t\t\treturn data.slice(0);\r\n\t\t}\r\n\t}\r\n\r\n\ttrigger(){\r\n\t\tvar left;\r\n\r\n\t\treturn new Promise((resolve, reject)=>{\r\n\r\n\t\t\tswitch(this.mode){\r\n\t\t\t\tcase \"local\":\r\n\t\t\t\tleft = this.table.rowManager.scrollLeft;\r\n\r\n\t\t\t\tthis.table.rowManager.refreshActiveData(\"page\");\r\n\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\r\n\r\n\t\t\t\tthis.table.options.pageLoaded.call(this.table, this.getPage());\r\n\t\t\t\tresolve();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"remote\":\r\n\t\t\t\tcase \"progressive_load\":\r\n\t\t\t\tcase \"progressive_scroll\":\r\n\t\t\t\tthis.table.modules.ajax.blockActiveRequest();\r\n\t\t\t\tthis._getRemotePage()\r\n\t\t\t\t.then(()=>{\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t})\r\n\t\t\t\t.catch(()=>{\r\n\t\t\t\t\treject();\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\tconsole.warn(\"Pagination Error - no such pagination mode:\", this.mode);\r\n\t\t\t\treject();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t_getRemotePage(){\r\n\t\tvar oldParams, pageParams;\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\r\n\t\t\tif(!this.table.modExists(\"ajax\", true)){\r\n\t\t\t\treject();\r\n\t\t\t}\r\n\r\n\t\t\t//record old params and restore after request has been made\r\n\t\t\toldParams = Helpers.deepClone(this.table.modules.ajax.getParams() || {});\r\n\t\t\tpageParams = this.table.modules.ajax.getParams();\r\n\r\n\t\t\t//configure request params\r\n\t\t\tpageParams[this.dataSentNames.page] = this.page;\r\n\r\n\t\t\t//set page size if defined\r\n\t\t\tif(this.size){\r\n\t\t\t\tpageParams[this.dataSentNames.size] = this.size;\r\n\t\t\t}\r\n\r\n\t\t\t//set sort data if defined\r\n\t\t\tif(this.table.options.ajaxSorting && this.table.modExists(\"sort\")){\r\n\t\t\t\tlet sorters = this.table.modules.sort.getSort();\r\n\r\n\t\t\t\tsorters.forEach((item) => {\r\n\t\t\t\t\tdelete item.column;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tpageParams[this.dataSentNames.sorters] = sorters;\r\n\t\t\t}\r\n\r\n\t\t\t//set filter data if defined\r\n\t\t\tif(this.table.options.ajaxFiltering && this.table.modExists(\"filter\")){\r\n\t\t\t\tlet filters = this.table.modules.filter.getFilters(true, true);\r\n\t\t\t\tpageParams[this.dataSentNames.filters] = filters;\r\n\t\t\t}\r\n\r\n\t\t\tthis.table.modules.ajax.setParams(pageParams);\r\n\r\n\t\t\tthis.table.modules.ajax.sendRequest(this.progressiveLoad)\r\n\t\t\t.then((data)=>{\r\n\t\t\t\tthis._parseRemoteData(data);\r\n\t\t\t\tresolve();\r\n\t\t\t})\r\n\t\t\t.catch((e)=>{reject()});\r\n\r\n\t\t\tthis.table.modules.ajax.setParams(oldParams);\r\n\t\t});\r\n\t}\r\n\r\n\t_parseRemoteData(data){\r\n\t\tvar left, data, margin;\r\n\r\n\t\tif(typeof data[this.dataReceivedNames.last_page] === \"undefined\"){\r\n\t\t\tconsole.warn(\"Remote Pagination Error - Server response missing '\" + this.dataReceivedNames.last_page + \"' property\");\r\n\t\t}\r\n\r\n\t\tif(data[this.dataReceivedNames.data]){\r\n\t\t\tthis.max = parseInt(data[this.dataReceivedNames.last_page]) || 1;\r\n\r\n\t\t\tif(this.progressiveLoad){\r\n\t\t\t\tswitch(this.mode){\r\n\t\t\t\t\tcase \"progressive_load\":\r\n\r\n\t\t\t\t\tif(this.page == 1){\r\n\t\t\t\t\t\tthis.table.rowManager.setData(data[this.dataReceivedNames.data], false, this.initialLoad && this.page == 1)\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.table.rowManager.addRows(data[this.dataReceivedNames.data]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(this.page < this.max){\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.nextPage().then(()=>{}).catch(()=>{});\r\n\t\t\t\t\t\t}, this.table.options.ajaxProgressiveLoadDelay);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase \"progressive_scroll\":\r\n\t\t\t\t\tdata = this.table.rowManager.getData().concat(data[this.dataReceivedNames.data]);\r\n\r\n\t\t\t\t\tthis.table.rowManager.setData(data, true, this.initialLoad && this.page == 1);\r\n\r\n\t\t\t\t\tmargin = this.table.options.ajaxProgressiveLoadScrollMargin || (this.table.rowManager.element.clientHeight * 2);\r\n\r\n\t\t\t\t\tif(this.table.rowManager.element.scrollHeight <= (this.table.rowManager.element.clientHeight + margin)){\r\n\t\t\t\t\t\tthis.nextPage().then(()=>{}).catch(()=>{});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tleft = this.table.rowManager.scrollLeft;\r\n\r\n\t\t\t\tthis.table.rowManager.setData(data[this.dataReceivedNames.data], false, this.initialLoad && this.page == 1);\r\n\r\n\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\r\n\r\n\t\t\t\tthis.table.columnManager.scrollHorizontal(left);\r\n\r\n\t\t\t\tthis.table.options.pageLoaded.call(this.table, this.getPage());\r\n\t\t\t}\r\n\r\n\t\t\tthis.initialLoad = false;\r\n\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Remote Pagination Error - Server response missing '\" + this.dataReceivedNames.data + \"' property\");\r\n\t\t}\r\n\t}\r\n\r\n\t//handle the footer element being redrawn\r\n\tfooterRedraw(){\r\n\t\tvar footer = this.table.footerManager.element;\r\n\r\n\t\tif((Math.ceil(footer.clientWidth) - footer.scrollWidth) < 0){\r\n\t\t\tthis.pagesElement.style.display = 'none';\r\n\t\t}else{\r\n\t\t\tthis.pagesElement.style.display = '';\r\n\r\n\t\t\tif((Math.ceil(footer.clientWidth) - footer.scrollWidth) < 0){\r\n\t\t\t\tthis.pagesElement.style.display = 'none';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nPage.moduleName = \"page\";\r\n\r\n//load defaults\r\nPage.defaultDataSentNames = defaultDataSentNames;\r\nPage.defaultDataReceivedNames = defaultDataReceivedNames;\r\n\r\nexport default Page;","// read peristence information from storage\r\nexport default {\r\n\tlocal:function(id, type){\r\n\t\tvar data = localStorage.getItem(id + \"-\" + type);\r\n\r\n\t\treturn data ? JSON.parse(data) : false;\r\n\t},\r\n\tcookie:function(id, type){\r\n\t\tvar cookie = document.cookie,\r\n\t\tkey = id + \"-\" + type,\r\n\t\tcookiePos = cookie.indexOf(key + \"=\"),\r\n\t\tend, data;\r\n\r\n\t\t//if cookie exists, decode and load column data into tabulator\r\n\t\tif(cookiePos > -1){\r\n\t\t\tcookie = cookie.substr(cookiePos);\r\n\r\n\t\t\tend = cookie.indexOf(\";\");\r\n\r\n\t\t\tif(end > -1){\r\n\t\t\t\tcookie = cookie.substr(0, end);\r\n\t\t\t}\r\n\r\n\t\t\tdata = cookie.replace(key + \"=\", \"\");\r\n\t\t}\r\n\r\n\t\treturn data ? JSON.parse(data) : false;\r\n\t}\r\n};","//write persistence information to storage\r\nexport default {\r\n\tlocal:function(id, type, data){\r\n\t\tlocalStorage.setItem(id + \"-\" + type, JSON.stringify(data));\r\n\t},\r\n\tcookie:function(id, type, data){\r\n\t\tvar expireDate = new Date();\r\n\r\n\t\texpireDate.setDate(expireDate.getDate() + 10000);\r\n\r\n\t\tdocument.cookie = id + \"-\" + type + \"=\" + JSON.stringify(data) + \"; expires=\" + expireDate.toUTCString();\r\n\t}\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport defaultReaders from './defaults/readers.js';\r\nimport defaultWriters from './defaults/writers.js';\r\n\r\nclass Persistence extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.mode = \"\";\r\n\t\tthis.id = \"\";\r\n\t\t// this.persistProps = [\"field\", \"width\", \"visible\"];\r\n\t\tthis.defWatcherBlock = false;\r\n\t\tthis.config = {};\r\n\t\tthis.readFunc = false;\r\n\t\tthis.writeFunc = false;\r\n\t}\r\n\r\n\t// Test for whether localStorage is available for use.\r\n\tlocalStorageTest() {\r\n\t\tvar  testKey =  \"_tabulator_test\";\r\n\r\n\t\ttry {\r\n\t\t\twindow.localStorage.setItem( testKey, testKey);\r\n\t\t\twindow.localStorage.removeItem( testKey );\r\n\t\t\treturn true;\r\n\t\t} catch(e) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t//setup parameters\r\n\tinitialize(){\r\n\t\t//determine persistent layout storage type\r\n\t\tvar mode = this.table.options.persistenceMode,\r\n\t\tid = this.table.options.persistenceID,\r\n\t\tretreivedData;\r\n\r\n\t\tthis.mode = mode !== true ?  mode : (this.localStorageTest() ? \"local\" : \"cookie\");\r\n\r\n\t\tif(this.table.options.persistenceReaderFunc){\r\n\t\t\tif(typeof this.table.options.persistenceReaderFunc === \"function\"){\r\n\t\t\t\tthis.readFunc = this.table.options.persistenceReaderFunc;\r\n\t\t\t}else{\r\n\t\t\t\tif(Persistence.readers[this.table.options.persistenceReaderFunc]){\r\n\t\t\t\t\tthis.readFunc = Persistence.readers[this.table.options.persistenceReaderFunc];\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Persistence Read Error - invalid reader set\", this.table.options.persistenceReaderFunc);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(Persistence.readers[this.mode]){\r\n\t\t\t\tthis.readFunc = Persistence.readers[this.mode];\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Persistence Read Error - invalid reader set\", this.mode);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.table.options.persistenceWriterFunc){\r\n\t\t\tif(typeof this.table.options.persistenceWriterFunc === \"function\"){\r\n\t\t\t\tthis.writeFunc = this.table.options.persistenceWriterFunc;\r\n\t\t\t}else{\r\n\t\t\t\tif(Persistence.readers[this.table.options.persistenceWriterFunc]){\r\n\t\t\t\t\tthis.writeFunc = Persistence.readers[this.table.options.persistenceWriterFunc];\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Persistence Write Error - invalid reader set\", this.table.options.persistenceWriterFunc);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(Persistence.writers[this.mode]){\r\n\t\t\t\tthis.writeFunc = Persistence.writers[this.mode];\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Persistence Write Error - invalid writer set\", this.mode);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//set storage tag\r\n\t\tthis.id = \"tabulator-\" + (id || (this.table.element.getAttribute(\"id\") || \"\"));\r\n\r\n\t\tthis.config = {\r\n\t\t\tsort:this.table.options.persistence === true || this.table.options.persistence.sort,\r\n\t\t\tfilter:this.table.options.persistence === true || this.table.options.persistence.filter,\r\n\t\t\tgroup:this.table.options.persistence === true || this.table.options.persistence.group,\r\n\t\t\tpage:this.table.options.persistence === true || this.table.options.persistence.page,\r\n\t\t\tcolumns:this.table.options.persistence === true ? [\"title\", \"width\", \"visible\"] : this.table.options.persistence.columns,\r\n\t\t};\r\n\r\n\t\t//load pagination data if needed\r\n\t\tif(this.config.page){\r\n\t\t\tretreivedData = this.retreiveData(\"page\");\r\n\r\n\t\t\tif(retreivedData){\r\n\t\t\t\tif(typeof retreivedData.paginationSize !== \"undefined\" && (this.config.page === true || this.config.page.size)){\r\n\t\t\t\t\tthis.table.options.paginationSize = retreivedData.paginationSize;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(typeof retreivedData.paginationInitialPage !== \"undefined\" && (this.config.page === true || this.config.page.page)){\r\n\t\t\t\t\tthis.table.options.paginationInitialPage = retreivedData.paginationInitialPage;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//load group data if needed\r\n\t\tif(this.config.group){\r\n\t\t\tretreivedData = this.retreiveData(\"group\");\r\n\r\n\t\t\tif(retreivedData){\r\n\t\t\t\tif(typeof retreivedData.groupBy !== \"undefined\" && (this.config.group === true || this.config.group.groupBy)){\r\n\t\t\t\t\tthis.table.options.groupBy = retreivedData.groupBy;\r\n\t\t\t\t}\r\n\t\t\t\tif(typeof retreivedData.groupStartOpen !== \"undefined\" && (this.config.group === true || this.config.group.groupStartOpen)){\r\n\t\t\t\t\tthis.table.options.groupStartOpen = retreivedData.groupStartOpen;\r\n\t\t\t\t}\r\n\t\t\t\tif(typeof retreivedData.groupHeader !== \"undefined\" && (this.config.group === true || this.config.group.groupHeader)){\r\n\t\t\t\t\tthis.table.options.groupHeader = retreivedData.groupHeader;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.config.columns){\r\n\t\t\tthis.table.options.columns = this.load(\"columns\", this.table.options.columns);\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeColumn(column){\r\n\t\tvar def, keys;\r\n\r\n\t\tif(this.config.columns){\r\n\t\t\tthis.defWatcherBlock = true;\r\n\r\n\t\t\tdef = column.getDefinition();\r\n\r\n\t\t\tkeys = this.config.columns === true ? Object.keys(def) : this.config.columns;\r\n\r\n\t\t\tkeys.forEach((key)=>{\r\n\t\t\t\tvar props = Object.getOwnPropertyDescriptor(def, key);\r\n\t\t\t\tvar value = def[key];\r\n\t\t\t\tif(props){\r\n\t\t\t\t\tObject.defineProperty(def, key, {\r\n\t\t\t\t\t\tset: function(newValue){\r\n\t\t\t\t\t\t\tvalue = newValue;\r\n\r\n\t\t\t\t\t\t\tif(!this.defWatcherBlock){\r\n\t\t\t\t\t\t\t\tthis.save(\"columns\");\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif(props.set){\r\n\t\t\t\t\t\t\t\tprops.set(newValue);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tget:function(){\r\n\t\t\t\t\t\t\tif(props.get){\r\n\t\t\t\t\t\t\t\tprops.get();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.defWatcherBlock = false;\r\n\t\t}\r\n\t}\r\n\r\n\t//load saved definitions\r\n\tload(type, current){\r\n\t\tvar data = this.retreiveData(type);\r\n\r\n\t\tif(current){\r\n\t\t\tdata = data ? this.mergeDefinition(current, data) : current;\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\t//retreive data from memory\r\n\tretreiveData(type){\r\n\t\treturn this.readFunc ? this.readFunc(this.id, type) : false;\r\n\t}\r\n\r\n\t//merge old and new column definitions\r\n\tmergeDefinition(oldCols, newCols){\r\n\t\tvar output = [];\r\n\r\n\t\tnewCols = newCols || [];\r\n\r\n\t\tnewCols.forEach((column, to) => {\r\n\t\t\tvar from = this._findColumn(oldCols, column),\r\n\t\t\tkeys;\r\n\r\n\t\t\tif(from){\r\n\t\t\t\tif(this.config.columns === true || this.config.columns == undefined){\r\n\t\t\t\t\tkeys =  Object.keys(from);\r\n\t\t\t\t\tkeys.push(\"width\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tkeys = this.config.columns;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tkeys.forEach((key)=>{\r\n\t\t\t\t\tif(key !== \"columns\" && typeof column[key] !== \"undefined\"){\r\n\t\t\t\t\t\tfrom[key] = column[key];\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(from.columns){\r\n\t\t\t\t\tfrom.columns = this.mergeDefinition(from.columns, column.columns);\r\n\t\t\t\t}\r\n\r\n\t\t\t\toutput.push(from);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\toldCols.forEach((column, i) => {\r\n\t\t\tvar from = this._findColumn(newCols, column);\r\n\r\n\t\t\tif (!from) {\r\n\t\t\t\tif(output.length>i){\r\n\t\t\t\t\toutput.splice(i, 0, column);\r\n\t\t\t\t}else{\r\n\t\t\t\t\toutput.push(column);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\t//find matching columns\r\n\t_findColumn(columns, subject){\r\n\t\tvar type = subject.columns ? \"group\" : (subject.field ? \"field\" : \"object\");\r\n\r\n\t\treturn columns.find(function(col){\r\n\t\t\tswitch(type){\r\n\t\t\t\tcase \"group\":\r\n\t\t\t\treturn col.title === subject.title && col.columns.length === subject.columns.length;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"field\":\r\n\t\t\t\treturn col.field === subject.field;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"object\":\r\n\t\t\t\treturn col === subject;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//save data\r\n\tsave(type){\r\n\t\tvar data = {};\r\n\r\n\t\tswitch(type){\r\n\t\t\tcase \"columns\":\r\n\t\t\tdata = this.parseColumns(this.table.columnManager.getColumns())\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"filter\":\r\n\t\t\tdata = this.table.modules.filter.getFilters();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"sort\":\r\n\t\t\tdata = this.validateSorters(this.table.modules.sort.getSort());\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"group\":\r\n\t\t\tdata = this.getGroupConfig();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"page\":\r\n\t\t\tdata = this.getPageConfig();\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tif(this.writeFunc){\r\n\t\t\tthis.writeFunc(this.id, type, data);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//ensure sorters contain no function data\r\n\tvalidateSorters(data){\r\n\t\tdata.forEach(function(item){\r\n\t\t\titem.column = item.field;\r\n\t\t\tdelete item.field;\r\n\t\t});\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\tgetGroupConfig(){\r\n\t\tvar data = {};\r\n\r\n\t\tif(this.config.group){\r\n\t\t\tif(this.config.group === true || this.config.group.groupBy){\r\n\t\t\t\tdata.groupBy = this.table.options.groupBy;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.config.group === true || this.config.group.groupStartOpen){\r\n\t\t\t\tdata.groupStartOpen = this.table.options.groupStartOpen;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.config.group === true || this.config.group.groupHeader){\r\n\t\t\t\tdata.groupHeader = this.table.options.groupHeader;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\tgetPageConfig(){\r\n\t\tvar data = {};\r\n\r\n\t\tif(this.config.page){\r\n\t\t\tif(this.config.page === true || this.config.page.size){\r\n\t\t\t\tdata.paginationSize = this.table.modules.page.getPageSize();\r\n\t\t\t}\r\n\r\n\t\t\tif(this.config.page === true || this.config.page.page){\r\n\t\t\t\tdata.paginationInitialPage = this.table.modules.page.getPage();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\r\n\t//parse columns for data to store\r\n\tparseColumns(columns){\r\n\t\tvar definitions = [],\r\n\t\texcludedKeys = [\"headerContextMenu\", \"headerMenu\", \"contextMenu\", \"clickMenu\"];\r\n\r\n\t\tcolumns.forEach((column) => {\r\n\t\t\tvar defStore = {},\r\n\t\t\tcolDef = column.getDefinition(),\r\n\t\t\tkeys;\r\n\r\n\t\t\tif(column.isGroup){\r\n\t\t\t\tdefStore.title = colDef.title;\r\n\t\t\t\tdefStore.columns = this.parseColumns(column.getColumns());\r\n\t\t\t}else{\r\n\t\t\t\tdefStore.field = column.getField();\r\n\r\n\t\t\t\tif(this.config.columns === true || this.config.columns == undefined){\r\n\t\t\t\t\tkeys =  Object.keys(colDef);\r\n\t\t\t\t\tkeys.push(\"width\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tkeys = this.config.columns;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tkeys.forEach((key)=>{\r\n\t\t\t\t\tswitch(key){\r\n\t\t\t\t\t\tcase \"width\":\r\n\t\t\t\t\t\tdefStore.width = column.getWidth();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"visible\":\r\n\t\t\t\t\t\tdefStore.visible = column.visible;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tif(typeof colDef[key] !== \"function\" && excludedKeys.indexOf(key) === -1){\r\n\t\t\t\t\t\t\tdefStore[key] = colDef[key];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tdefinitions.push(defStore);\r\n\t\t});\r\n\r\n\t\treturn definitions;\r\n\t}\r\n}\r\n\r\nPersistence.moduleName = \"persistence\";\r\n\r\n//load defaults\r\nPersistence.readers = defaultReaders;\r\nPersistence.writers = defaultWriters;\r\n\r\nexport default Persistence;","import Module from '../../core/Module.js';\r\n\r\nclass Print extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.element = false;\r\n\t\tthis.manualBlock = false;\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\twindow.addEventListener(\"beforeprint\", this.replaceTable.bind(this));\r\n\t\twindow.addEventListener(\"afterprint\", this.cleanup.bind(this));\r\n\t}\r\n\r\n\treplaceTable(){\r\n\t\tif(!this.manualBlock){\r\n\t\t\tthis.element = document.createElement(\"div\");\r\n\t\t\tthis.element.classList.add(\"tabulator-print-table\");\r\n\r\n\t\t\tthis.element.appendChild(this.table.modules.export.genereateTable(this.table.options.printConfig, this.table.options.printStyled, this.table.options.printRowRange, \"print\"));\r\n\r\n\t\t\tthis.table.element.style.display = \"none\";\r\n\r\n\t\t\tthis.table.element.parentNode.insertBefore(this.element, this.table.element);\r\n\t\t}\r\n\t}\r\n\r\n\tcleanup(){\r\n\t\tdocument.body.classList.remove(\"tabulator-print-fullscreen-hide\");\r\n\r\n\t\tif(this.element && this.element.parentNode){\r\n\t\t\tthis.element.parentNode.removeChild(this.element);\r\n\t\t\tthis.table.element.style.display = \"\";\r\n\t\t}\r\n\t}\r\n\r\n\tprintFullscreen(visible, style, config){\r\n\t\tvar scrollX = window.scrollX,\r\n\t\tscrollY = window.scrollY,\r\n\t\theaderEl = document.createElement(\"div\"),\r\n\t\tfooterEl = document.createElement(\"div\"),\r\n\t\ttableEl = this.table.modules.export.genereateTable(typeof config != \"undefined\" ? config : this.table.options.printConfig, typeof style != \"undefined\" ? style : this.table.options.printStyled, visible, \"print\"),\r\n\t\theaderContent, footerContent;\r\n\r\n\t\tthis.manualBlock = true;\r\n\r\n\t\tthis.element = document.createElement(\"div\");\r\n\t\tthis.element.classList.add(\"tabulator-print-fullscreen\");\r\n\r\n\t\tif(this.table.options.printHeader){\r\n\t\t\theaderEl.classList.add(\"tabulator-print-header\");\r\n\r\n\t\t\theaderContent = typeof this.table.options.printHeader == \"function\" ? this.table.options.printHeader.call(this.table) : this.table.options.printHeader;\r\n\r\n\t\t\tif(typeof headerContent == \"string\"){\r\n\t\t\t\theaderEl.innerHTML = headerContent;\r\n\t\t\t}else{\r\n\t\t\t\theaderEl.appendChild(headerContent);\r\n\t\t\t}\r\n\r\n\t\t\tthis.element.appendChild(headerEl);\r\n\t\t}\r\n\r\n\t\tthis.element.appendChild(tableEl);\r\n\r\n\t\tif(this.table.options.printFooter){\r\n\t\t\tfooterEl.classList.add(\"tabulator-print-footer\");\r\n\r\n\t\t\tfooterContent = typeof this.table.options.printFooter == \"function\" ? this.table.options.printFooter.call(this.table) : this.table.options.printFooter;\r\n\r\n\r\n\t\t\tif(typeof footerContent == \"string\"){\r\n\t\t\t\tfooterEl.innerHTML = footerContent;\r\n\t\t\t}else{\r\n\t\t\t\tfooterEl.appendChild(footerContent);\r\n\t\t\t}\r\n\r\n\t\t\tthis.element.appendChild(footerEl);\r\n\t\t}\r\n\r\n\t\tdocument.body.classList.add(\"tabulator-print-fullscreen-hide\");\r\n\t\tdocument.body.appendChild(this.element);\r\n\r\n\t\tif(this.table.options.printFormatter){\r\n\t\t\tthis.table.options.printFormatter(this.element, tableEl);\r\n\t\t}\r\n\r\n\t\twindow.print();\r\n\r\n\t\tthis.cleanup();\r\n\r\n\t\twindow.scrollTo(scrollX, scrollY);\r\n\r\n\t\tthis.manualBlock = false;\r\n\t}\r\n}\r\n\r\nPrint.moduleName = \"print\";\r\n\r\nexport default Print;","import Module from '../../core/Module.js';\r\n\r\nclass ReactiveData extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.data = false;\r\n\t\tthis.blocked = false; //block reactivity while performing update\r\n\t\tthis.origFuncs = {}; // hold original data array functions to allow replacement after data is done with\r\n\t\tthis.currentVersion = 0;\r\n\t}\r\n\r\n\twatchData(data){\r\n\t\tvar self = this,\r\n\t\tpushFunc, version;\r\n\r\n\t\tthis.currentVersion ++;\r\n\r\n\t\tversion = this.currentVersion;\r\n\r\n\t\tself.unwatchData();\r\n\r\n\t\tself.data = data;\r\n\r\n\t\t//override array push function\r\n\t\tself.origFuncs.push = data.push;\r\n\r\n\t\tObject.defineProperty(self.data, \"push\", {\r\n\t\t\tenumerable: false,\r\n\t\t\tconfigurable: true,\r\n\t\t\tvalue: function () {\r\n\t\t\t\tvar args = Array.from(arguments);\r\n\r\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\r\n\t\t\t\t\targs.forEach(function (arg){\r\n\t\t\t\t\t\tself.table.rowManager.addRowActual(arg, false);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn self.origFuncs.push.apply(data, arguments);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t//override array unshift function\r\n\t\tself.origFuncs.unshift = data.unshift;\r\n\r\n\t\tObject.defineProperty(self.data, \"unshift\", {\r\n\t\t\tenumerable: false,\r\n\t\t\tconfigurable: true,\r\n\t\t\tvalue: function () {\r\n\t\t\t\tvar args = Array.from(arguments);\r\n\r\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\r\n\t\t\t\t\targs.forEach(function (arg){\r\n\t\t\t\t\t\tself.table.rowManager.addRowActual(arg, true);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn self.origFuncs.unshift.apply(data, arguments);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\t\t//override array shift function\r\n\t\tself.origFuncs.shift = data.shift;\r\n\r\n\t\tObject.defineProperty(self.data, \"shift\", {\r\n\t\t\tenumerable: false,\r\n\t\t\tconfigurable: true,\r\n\t\t\tvalue: function () {\r\n\t\t\t\tvar row;\r\n\r\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\r\n\t\t\t\t\tif(self.data.length){\r\n\t\t\t\t\t\trow = self.table.rowManager.getRowFromDataObject(self.data[0]);\r\n\r\n\t\t\t\t\t\tif(row){\r\n\t\t\t\t\t\t\trow.deleteActual();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn self.origFuncs.shift.call(data);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t//override array pop function\r\n\t\tself.origFuncs.pop = data.pop;\r\n\r\n\t\tObject.defineProperty(self.data, \"pop\", {\r\n\t\t\tenumerable: false,\r\n\t\t\tconfigurable: true,\r\n\t\t\tvalue: function () {\r\n\t\t\t\tvar row;\r\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\r\n\t\t\t\t\tif(self.data.length){\r\n\t\t\t\t\t\trow = self.table.rowManager.getRowFromDataObject(self.data[self.data.length - 1]);\r\n\r\n\t\t\t\t\t\tif(row){\r\n\t\t\t\t\t\t\trow.deleteActual();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn self.origFuncs.pop.call(data);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\t\t//override array splice function\r\n\t\tself.origFuncs.splice = data.splice;\r\n\r\n\t\tObject.defineProperty(self.data, \"splice\", {\r\n\t\t\tenumerable: false,\r\n\t\t\tconfigurable: true,\r\n\t\t\tvalue: function () {\r\n\t\t\t\tvar args = Array.from(arguments),\r\n\t\t\t\tstart = args[0] < 0 ? data.length + args[0] : args[0],\r\n\t\t\t\tend = args[1],\r\n\t\t\t\tnewRows = args[2] ? args.slice(2) : false,\r\n\t\t\t\tstartRow;\r\n\r\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\r\n\r\n\t\t\t\t\t//add new rows\r\n\t\t\t\t\tif(newRows){\r\n\t\t\t\t\t\tstartRow = data[start] ? self.table.rowManager.getRowFromDataObject(data[start]) : false;\r\n\r\n\t\t\t\t\t\tif(startRow){\r\n\t\t\t\t\t\t\tnewRows.forEach(function(rowData){\r\n\t\t\t\t\t\t\t\tself.table.rowManager.addRowActual(rowData, true, startRow, true);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tnewRows = newRows.slice().reverse();\r\n\r\n\t\t\t\t\t\t\tnewRows.forEach(function(rowData){\r\n\t\t\t\t\t\t\t\tself.table.rowManager.addRowActual(rowData, true, false, true);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//delete removed rows\r\n\t\t\t\t\tif(end !== 0){\r\n\t\t\t\t\t\tvar oldRows = data.slice(start, typeof args[1] === \"undefined\" ? args[1] : start + end);\r\n\r\n\t\t\t\t\t\toldRows.forEach(function(rowData, i){\r\n\t\t\t\t\t\t\tvar row = self.table.rowManager.getRowFromDataObject(rowData);\r\n\r\n\t\t\t\t\t\t\tif(row){\r\n\t\t\t\t\t\t\t\trow.deleteActual(i !== oldRows.length - 1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(newRows || end !== 0){\r\n\t\t\t\t\t\tself.table.rowManager.reRenderInPosition();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn self.origFuncs.splice.apply(data, arguments);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tunwatchData(){\r\n\t\tif(this.data !== false){\r\n\t\t\tfor(var key in this.origFuncs){\r\n\t\t\t\tObject.defineProperty(this.data, key, {\r\n\t\t\t\t\tenumerable: true,\r\n\t\t\t\t\tconfigurable:true,\r\n\t\t\t\t\twritable:true,\r\n\t\t\t\t\tvalue: this.origFuncs.key,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\twatchRow(row){\r\n\t\tvar data = row.getData();\r\n\r\n\t\tthis.blocked = true;\r\n\r\n\t\tfor(var key in data){\r\n\t\t\tthis.watchKey(row, data, key);\r\n\t\t}\r\n\r\n\t\tif(this.table.options.dataTree){\r\n\t\t\tthis.watchTreeChildren(row);\r\n\t\t}\r\n\r\n\t\tthis.blocked = false;\r\n\t}\r\n\r\n\twatchTreeChildren (row){\r\n\t\tvar self = this,\r\n\t\tchildField = row.getData()[this.table.options.dataTreeChildField],\r\n\t\torigFuncs = {};\r\n\r\n\t\tfunction rebuildTree(){\r\n\t\t\tself.table.modules.dataTree.initializeRow(row);\r\n\t\t\tself.table.modules.dataTree.layoutRow(row);\r\n\t\t\tself.table.rowManager.refreshActiveData(\"tree\", false, true);\r\n\t\t}\r\n\r\n\t\tif(childField){\r\n\r\n\t\t\torigFuncs.push = childField.push;\r\n\r\n\t\t\tObject.defineProperty(childField, \"push\", {\r\n\t\t\t\tenumerable: false,\r\n\t\t\t\tconfigurable: true,\r\n\t\t\t\tvalue: function value() {\r\n\t\t\t\t\tvar result = origFuncs.push.apply(childField, arguments);\r\n\r\n\t\t\t\t\trebuildTree();\r\n\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\torigFuncs.unshift = childField.unshift;\r\n\r\n\t\t\tObject.defineProperty(childField, \"unshift\", {\r\n\t\t\t\tenumerable: false,\r\n\t\t\t\tconfigurable: true,\r\n\t\t\t\tvalue: function value() {\r\n\t\t\t\t\tvar result =  origFuncs.unshift.apply(childField, arguments);\r\n\r\n\t\t\t\t\trebuildTree();\r\n\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\torigFuncs.shift = childField.shift;\r\n\r\n\t\t\tObject.defineProperty(childField, \"shift\", {\r\n\t\t\t\tenumerable: false,\r\n\t\t\t\tconfigurable: true,\r\n\t\t\t\tvalue: function value() {\r\n\t\t\t\t\tvar result =  origFuncs.shift.call(childField);\r\n\r\n\t\t\t\t\trebuildTree();\r\n\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\torigFuncs.pop = childField.pop;\r\n\r\n\t\t\tObject.defineProperty(childField, \"pop\", {\r\n\t\t\t\tenumerable: false,\r\n\t\t\t\tconfigurable: true,\r\n\t\t\t\tvalue: function value() {\r\n\t\t\t\t\tvar result =  origFuncs.pop.call(childField);\r\n\r\n\t\t\t\t\trebuildTree();\r\n\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\torigFuncs.splice = childField.splice;\r\n\r\n\t\t\tObject.defineProperty(childField, \"splice\", {\r\n\t\t\t\tenumerable: false,\r\n\t\t\t\tconfigurable: true,\r\n\t\t\t\tvalue: function value() {\r\n\t\t\t\t\tvar result =  origFuncs.splice.apply(childField, arguments);\r\n\r\n\t\t\t\t\trebuildTree();\r\n\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\twatchKey(row, data, key){\r\n\t\tvar self = this,\r\n\t\tprops = Object.getOwnPropertyDescriptor(data, key),\r\n\t\tvalue = data[key],\r\n\t\tversion = this.currentVersion;\r\n\r\n\t\tObject.defineProperty(data, key, {\r\n\t\t\tset: function(newValue){\r\n\t\t\t\tvalue = newValue;\r\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\r\n\t\t\t\t\tvar update = {};\r\n\t\t\t\t\tupdate[key] = newValue;\r\n\t\t\t\t\trow.updateData(update);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(props.set){\r\n\t\t\t\t\tprops.set(newValue);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tget:function(){\r\n\r\n\t\t\t\tif(props.get){\r\n\t\t\t\t\tprops.get();\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn value;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tunwatchRow(row){\r\n\t\tvar data = row.getData();\r\n\r\n\t\tfor(var key in data){\r\n\t\t\tObject.defineProperty(data, key, {\r\n\t\t\t\tvalue:data[key],\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tblock(){\r\n\t\tthis.blocked = true;\r\n\t}\r\n\r\n\tunblock(){\r\n\t\tthis.blocked = false;\r\n\t}\r\n}\r\n\r\nReactiveData.moduleName = \"reactiveData\";\r\n\r\nexport default ReactiveData;\r\n\r\n\r\n\r\n","import Module from '../../core/Module.js';\r\n\r\nclass ResizeColumns extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.startColumn = false;\r\n\t\tthis.startX = false;\r\n\t\tthis.startWidth = false;\r\n\t\tthis.handle = null;\r\n\t\tthis.prevHandle = null;\r\n\t}\r\n\r\n\tinitializeColumn(type, column, element){\r\n\t\tvar self = this,\r\n\t\tvariableHeight = false,\r\n\t\tmode = this.table.options.resizableColumns;\r\n\r\n\t\t//set column resize mode\r\n\t\tif(type === \"header\"){\r\n\t\t\tvariableHeight = column.definition.formatter == \"textarea\" || column.definition.variableHeight;\r\n\t\t\tcolumn.modules.resize = {variableHeight:variableHeight};\r\n\t\t}\r\n\r\n\t\tif(mode === true || mode == type){\r\n\r\n\t\t\tvar handle = document.createElement('div');\r\n\t\t\thandle.className = \"tabulator-col-resize-handle\";\r\n\r\n\r\n\t\t\tvar prevHandle = document.createElement('div');\r\n\t\t\tprevHandle.className = \"tabulator-col-resize-handle prev\";\r\n\r\n\t\t\thandle.addEventListener(\"click\", function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t});\r\n\r\n\t\t\tvar handleDown = function(e){\r\n\t\t\t\tvar nearestColumn = column.getLastColumn();\r\n\r\n\t\t\t\tif(nearestColumn && self._checkResizability(nearestColumn)){\r\n\t\t\t\t\tself.startColumn = column;\r\n\t\t\t\t\tself._mouseDown(e, nearestColumn, handle);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\thandle.addEventListener(\"mousedown\", handleDown);\r\n\t\t\thandle.addEventListener(\"touchstart\", handleDown, {passive: true});\r\n\r\n\t\t\t//reszie column on  double click\r\n\t\t\thandle.addEventListener(\"dblclick\", function(e){\r\n\t\t\t\tvar col = column.getLastColumn();\r\n\r\n\t\t\t\tif(col && self._checkResizability(col)){\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\tcol.reinitializeWidth(true);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\r\n\t\t\tprevHandle.addEventListener(\"click\", function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t});\r\n\r\n\t\t\tvar prevHandleDown = function(e){\r\n\t\t\t\tvar nearestColumn, colIndex, prevColumn;\r\n\r\n\t\t\t\tnearestColumn = column.getFirstColumn();\r\n\r\n\t\t\t\tif(nearestColumn){\r\n\t\t\t\t\tcolIndex = self.table.columnManager.findColumnIndex(nearestColumn);\r\n\t\t\t\t\tprevColumn = colIndex > 0 ? self.table.columnManager.getColumnByIndex(colIndex - 1) : false;\r\n\r\n\t\t\t\t\tif(prevColumn && self._checkResizability(prevColumn)){\r\n\t\t\t\t\t\tself.startColumn = column;\r\n\t\t\t\t\t\tself._mouseDown(e, prevColumn, prevHandle);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tprevHandle.addEventListener(\"mousedown\", prevHandleDown);\r\n\t\t\tprevHandle.addEventListener(\"touchstart\", prevHandleDown, {passive: true});\r\n\r\n\t\t\t//resize column on double click\r\n\t\t\tprevHandle.addEventListener(\"dblclick\", function(e){\r\n\t\t\t\tvar nearestColumn, colIndex, prevColumn;\r\n\r\n\t\t\t\tnearestColumn = column.getFirstColumn();\r\n\r\n\t\t\t\tif(nearestColumn){\r\n\t\t\t\t\tcolIndex = self.table.columnManager.findColumnIndex(nearestColumn);\r\n\t\t\t\t\tprevColumn = colIndex > 0 ? self.table.columnManager.getColumnByIndex(colIndex - 1) : false;\r\n\r\n\t\t\t\t\tif(prevColumn && self._checkResizability(prevColumn)){\r\n\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\tprevColumn.reinitializeWidth(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\telement.appendChild(handle);\r\n\t\t\telement.appendChild(prevHandle);\r\n\t\t}\r\n\t}\r\n\r\n\t_checkResizability(column){\r\n\t\treturn typeof column.definition.resizable != \"undefined\" ? column.definition.resizable : this.table.options.resizableColumns;\r\n\t}\r\n\r\n\t_mouseDown(e, column, handle){\r\n\t\tvar self = this;\r\n\r\n\t\tself.table.element.classList.add(\"tabulator-block-select\");\r\n\r\n\t\tfunction mouseMove(e){\r\n\t\t\t// self.table.columnManager.tempScrollBlock();\r\n\r\n\t\t\tif(self.table.rtl){\r\n\t\t\t\tcolumn.setWidth(self.startWidth - ((typeof e.screenX === \"undefined\" ? e.touches[0].screenX : e.screenX) - self.startX));\r\n\t\t\t}else{\r\n\t\t\t\tcolumn.setWidth(self.startWidth + ((typeof e.screenX === \"undefined\" ? e.touches[0].screenX : e.screenX) - self.startX));\r\n\t\t\t}\r\n\r\n\t\t\tif(self.table.options.virtualDomHoz){\r\n\t\t\t\tself.table.vdomHoz.reinitialize(true);\r\n\t\t\t}\r\n\r\n\t\t\tif(!self.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight){\r\n\t\t\t\tcolumn.checkCellHeights();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction mouseUp(e){\r\n\r\n\t\t\t//block editor from taking action while resizing is taking place\r\n\t\t\tif(self.startColumn.modules.edit){\r\n\t\t\t\tself.startColumn.modules.edit.blocked = false;\r\n\t\t\t}\r\n\r\n\t\t\tif(self.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight){\r\n\t\t\t\tcolumn.checkCellHeights();\r\n\t\t\t}\r\n\r\n\t\t\tdocument.body.removeEventListener(\"mouseup\", mouseUp);\r\n\t\t\tdocument.body.removeEventListener(\"mousemove\", mouseMove);\r\n\r\n\t\t\thandle.removeEventListener(\"touchmove\", mouseMove);\r\n\t\t\thandle.removeEventListener(\"touchend\", mouseUp);\r\n\r\n\t\t\tself.table.element.classList.remove(\"tabulator-block-select\");\r\n\r\n\t\t\tif(self.table.options.persistence && self.table.modExists(\"persistence\", true) && self.table.modules.persistence.config.columns){\r\n\t\t\t\tself.table.modules.persistence.save(\"columns\");\r\n\t\t\t}\r\n\r\n\t\t\tself.table.options.columnResized.call(self.table, column.getComponent());\r\n\t\t}\r\n\r\n\t\te.stopPropagation(); //prevent resize from interfereing with movable columns\r\n\r\n\t\t//block editor from taking action while resizing is taking place\r\n\t\tif(self.startColumn.modules.edit){\r\n\t\t\tself.startColumn.modules.edit.blocked = true;\r\n\t\t}\r\n\r\n\t\tself.startX = typeof e.screenX === \"undefined\" ? e.touches[0].screenX : e.screenX;\r\n\t\tself.startWidth = column.getWidth();\r\n\r\n\t\tdocument.body.addEventListener(\"mousemove\", mouseMove);\r\n\t\tdocument.body.addEventListener(\"mouseup\", mouseUp);\r\n\t\thandle.addEventListener(\"touchmove\", mouseMove, {passive: true});\r\n\t\thandle.addEventListener(\"touchend\", mouseUp);\r\n\t}\r\n}\r\n\r\nResizeColumns.moduleName = \"resizeColumns\";\r\n\r\nexport default ResizeColumns;","import Module from '../../core/Module.js';\r\n\r\nclass ResizeRows extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.startColumn = false;\r\n\t\tthis.startY = false;\r\n\t\tthis.startHeight = false;\r\n\t\tthis.handle = null;\r\n\t\tthis.prevHandle = null;\r\n\t}\r\n\r\n\tinitializeRow(row){\r\n\t\tvar self = this,\r\n\t\trowEl = row.getElement();\r\n\r\n\t\tvar handle = document.createElement('div');\r\n\t\thandle.className = \"tabulator-row-resize-handle\";\r\n\r\n\t\tvar prevHandle = document.createElement('div');\r\n\t\tprevHandle.className = \"tabulator-row-resize-handle prev\";\r\n\r\n\t\thandle.addEventListener(\"click\", function(e){\r\n\t\t\te.stopPropagation();\r\n\t\t});\r\n\r\n\t\tvar handleDown = function(e){\r\n\t\t\tself.startRow = row;\r\n\t\t\tself._mouseDown(e, row, handle);\r\n\t\t};\r\n\r\n\t\thandle.addEventListener(\"mousedown\", handleDown);\r\n\t\thandle.addEventListener(\"touchstart\", handleDown, {passive: true});\r\n\r\n\t\tprevHandle.addEventListener(\"click\", function(e){\r\n\t\t\te.stopPropagation();\r\n\t\t});\r\n\r\n\t\tvar prevHandleDown =  function(e){\r\n\t\t\tvar prevRow = self.table.rowManager.prevDisplayRow(row);\r\n\r\n\t\t\tif(prevRow){\r\n\t\t\t\tself.startRow = prevRow;\r\n\t\t\t\tself._mouseDown(e, prevRow, prevHandle);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tprevHandle.addEventListener(\"mousedown\",prevHandleDown);\r\n\t\tprevHandle.addEventListener(\"touchstart\",prevHandleDown, {passive: true});\r\n\r\n\t\trowEl.appendChild(handle);\r\n\t\trowEl.appendChild(prevHandle);\r\n\t}\r\n\r\n\t_mouseDown(e, row, handle){\r\n\t\tvar self = this;\r\n\r\n\t\tself.table.element.classList.add(\"tabulator-block-select\");\r\n\r\n\t\tfunction mouseMove(e){\r\n\t\t\trow.setHeight(self.startHeight + ((typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY) - self.startY));\r\n\t\t}\r\n\r\n\t\tfunction mouseUp(e){\r\n\r\n\t\t\t// //block editor from taking action while resizing is taking place\r\n\t\t\t// if(self.startColumn.modules.edit){\r\n\t\t\t// \tself.startColumn.modules.edit.blocked = false;\r\n\t\t\t// }\r\n\r\n\t\t\tdocument.body.removeEventListener(\"mouseup\", mouseMove);\r\n\t\t\tdocument.body.removeEventListener(\"mousemove\", mouseMove);\r\n\r\n\t\t\thandle.removeEventListener(\"touchmove\", mouseMove);\r\n\t\t\thandle.removeEventListener(\"touchend\", mouseUp);\r\n\r\n\t\t\tself.table.element.classList.remove(\"tabulator-block-select\");\r\n\r\n\t\t\tself.table.options.rowResized.call(this.table, row.getComponent());\r\n\t\t}\r\n\r\n\t\te.stopPropagation(); //prevent resize from interfereing with movable columns\r\n\r\n\t\t//block editor from taking action while resizing is taking place\r\n\t\t// if(self.startColumn.modules.edit){\r\n\t\t// \tself.startColumn.modules.edit.blocked = true;\r\n\t\t// }\r\n\r\n\t\tself.startY = typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY;\r\n\t\tself.startHeight = row.getHeight();\r\n\r\n\t\tdocument.body.addEventListener(\"mousemove\", mouseMove);\r\n\t\tdocument.body.addEventListener(\"mouseup\", mouseUp);\r\n\r\n\t\thandle.addEventListener(\"touchmove\", mouseMove, {passive: true});\r\n\t\thandle.addEventListener(\"touchend\", mouseUp);\r\n\t}\r\n}\r\n\r\nResizeRows.moduleName = \"resizeRows\";\r\n\r\nexport default ResizeRows;","import Module from '../../core/Module.js';\r\n\r\nclass ResizeTable extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.binding = false;\r\n\t\tthis.observer = false;\r\n\t\tthis.containerObserver = false;\r\n\r\n\t\tthis.tableHeight = 0;\r\n\t\tthis.tableWidth = 0;\r\n\t\tthis.containerHeight = 0;\r\n\t\tthis.containerWidth = 0;\r\n\r\n\t\tthis.autoResize = false;\r\n\t}\r\n\r\n\tinitialize(row){\r\n\t\tvar table = this.table,\r\n\t\ttableStyle;\r\n\r\n\t\tthis.tableHeight = table.element.clientHeight;\r\n\t\tthis.tableWidth = table.element.clientWidth;\r\n\r\n\t\tif(table.element.parentNode){\r\n\t\t\tthis.containerHeight = table.element.parentNode.clientHeight;\r\n\t\t\tthis.containerWidth = table.element.parentNode.clientWidth;\r\n\t\t}\r\n\r\n\t\tif(typeof ResizeObserver !== \"undefined\" && table.rowManager.getRenderMode() === \"virtual\"){\r\n\r\n\t\t\tthis.autoResize = true;\r\n\r\n\t\t\tthis.observer = new ResizeObserver((entry) => {\r\n\t\t\t\tif(!table.browserMobile || (table.browserMobile &&!table.modules.edit.currentCell)){\r\n\r\n\t\t\t\t\tvar nodeHeight = Math.floor(entry[0].contentRect.height);\r\n\t\t\t\t\tvar nodeWidth = Math.floor(entry[0].contentRect.width);\r\n\r\n\t\t\t\t\tif(this.tableHeight != nodeHeight || this.tableWidth != nodeWidth){\r\n\t\t\t\t\t\tthis.tableHeight = nodeHeight;\r\n\t\t\t\t\t\tthis.tableWidth = nodeWidth;\r\n\r\n\t\t\t\t\t\tif(table.element.parentNode){\r\n\t\t\t\t\t\t\tthis.containerHeight = table.element.parentNode.clientHeight;\r\n\t\t\t\t\t\t\tthis.containerWidth = table.element.parentNode.clientWidth;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(table.options.virtualDomHoz){\r\n\t\t\t\t\t\t\ttable.vdomHoz.reinitialize(true);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\ttable.redraw();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.observer.observe(table.element);\r\n\r\n\t\t\ttableStyle = window.getComputedStyle(table.element);\r\n\r\n\t\t\tif(this.table.element.parentNode && !this.table.rowManager.fixedHeight && (tableStyle.getPropertyValue(\"max-height\") || tableStyle.getPropertyValue(\"min-height\"))){\r\n\r\n\t\t\t\tthis.containerObserver = new ResizeObserver((entry) => {\r\n\t\t\t\t\tif(!table.browserMobile || (table.browserMobile &&!table.modules.edit.currentCell)){\r\n\r\n\t\t\t\t\t\tvar nodeHeight = Math.floor(entry[0].contentRect.height);\r\n\t\t\t\t\t\tvar nodeWidth = Math.floor(entry[0].contentRect.width);\r\n\r\n\t\t\t\t\t\tif(this.containerHeight != nodeHeight || this.containerWidth != nodeWidth){\r\n\t\t\t\t\t\t\tthis.containerHeight = nodeHeight;\r\n\t\t\t\t\t\t\tthis.containerWidth = nodeWidth;\r\n\t\t\t\t\t\t\tthis.tableHeight = table.element.clientHeight;\r\n\t\t\t\t\t\t\tthis.tableWidth = table.element.clientWidth;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(table.options.virtualDomHoz){\r\n\t\t\t\t\t\t\ttable.vdomHoz.reinitialize(true);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\ttable.redraw();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.containerObserver.observe(this.table.element.parentNode);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.binding = function(){\r\n\t\t\t\tif(!table.browserMobile || (table.browserMobile && !table.modules.edit.currentCell)){\r\n\t\t\t\t\tif(table.options.virtualDomHoz){\r\n\t\t\t\t\t\ttable.vdomHoz.reinitialize(true);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttable.redraw();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\twindow.addEventListener(\"resize\", this.binding);\r\n\t\t}\r\n\t}\r\n\r\n\tclearBindings(row){\r\n\t\tif(this.binding){\r\n\t\t\twindow.removeEventListener(\"resize\", this.binding);\r\n\t\t}\r\n\r\n\t\tif(this.observer){\r\n\t\t\tthis.observer.unobserve(this.table.element);\r\n\t\t}\r\n\r\n\t\tif(this.containerObserver){\r\n\t\t\tthis.containerObserver.unobserve(this.table.element.parentNode);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nResizeTable.moduleName = \"resizeTable\";\r\n\r\nexport default ResizeTable;","import Module from '../../core/Module.js';\r\n\r\nclass ResponsiveLayout extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.columns = [];\r\n\t\tthis.hiddenColumns = [];\r\n\t\tthis.mode = \"\";\r\n\t\tthis.index = 0;\r\n\t\tthis.collapseFormatter = [];\r\n\t\tthis.collapseStartOpen = true;\r\n\t\tthis.collapseHandleColumn = false;\r\n\t}\r\n\r\n\t//generate resposive columns list\r\n\tinitialize(){\r\n\t\tvar self = this,\r\n\t\tcolumns = [];\r\n\r\n\t\tthis.mode = this.table.options.responsiveLayout;\r\n\t\tthis.collapseFormatter = this.table.options.responsiveLayoutCollapseFormatter || this.formatCollapsedData;\r\n\t\tthis.collapseStartOpen = this.table.options.responsiveLayoutCollapseStartOpen;\r\n\t\tthis.hiddenColumns = [];\r\n\r\n\t\t//detemine level of responsivity for each column\r\n\t\tthis.table.columnManager.columnsByIndex.forEach(function(column, i){\r\n\t\t\tif(column.modules.responsive){\r\n\t\t\t\tif(column.modules.responsive.order && column.modules.responsive.visible){\r\n\t\t\t\t\tcolumn.modules.responsive.index = i;\r\n\t\t\t\t\tcolumns.push(column);\r\n\r\n\t\t\t\t\tif(!column.visible && self.mode === \"collapse\"){\r\n\t\t\t\t\t\tself.hiddenColumns.push(column);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t//sort list by responsivity\r\n\t\tcolumns = columns.reverse();\r\n\t\tcolumns = columns.sort(function(a, b){\r\n\t\t\tvar diff = b.modules.responsive.order - a.modules.responsive.order;\r\n\t\t\treturn diff || (b.modules.responsive.index - a.modules.responsive.index);\r\n\t\t});\r\n\r\n\t\tthis.columns = columns;\r\n\r\n\t\tif(this.mode === \"collapse\"){\r\n\t\t\tthis.generateCollapsedContent();\r\n\t\t}\r\n\r\n\t\t//assign collapse column\r\n\t\tfor (let col of this.table.columnManager.columnsByIndex){\r\n\t\t\tif(col.definition.formatter == \"responsiveCollapse\"){\r\n\t\t\t\tthis.collapseHandleColumn = col;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.collapseHandleColumn){\r\n\t\t\tif(this.hiddenColumns.length){\r\n\t\t\t\tthis.collapseHandleColumn.show();\r\n\t\t\t}else{\r\n\t\t\t\tthis.collapseHandleColumn.hide();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//define layout information\r\n\tinitializeColumn(column){\r\n\t\tvar def = column.getDefinition();\r\n\r\n\t\tcolumn.modules.responsive = {order: typeof def.responsive === \"undefined\" ? 1 : def.responsive, visible:def.visible === false ? false : true};\r\n\t}\r\n\r\n\tinitializeRow(row){\r\n\t\tvar el;\r\n\r\n\t\tif(row.type !== \"calc\"){\r\n\t\t\tel = document.createElement(\"div\");\r\n\t\t\tel.classList.add(\"tabulator-responsive-collapse\");\r\n\r\n\t\t\trow.modules.responsiveLayout = {\r\n\t\t\t\telement:el,\r\n\t\t\t\topen:this.collapseStartOpen,\r\n\t\t\t};\r\n\r\n\t\t\tif(!this.collapseStartOpen){\r\n\t\t\t\tel.style.display = 'none';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tlayoutRow(row){\r\n\t\tvar rowEl = row.getElement();\r\n\r\n\t\tif(row.modules.responsiveLayout){\r\n\t\t\trowEl.appendChild(row.modules.responsiveLayout.element);\r\n\t\t\tthis.generateCollapsedRowContent(row);\r\n\t\t}\r\n\t}\r\n\r\n\t//update column visibility\r\n\tupdateColumnVisibility(column, visible){\r\n\t\tvar index;\r\n\t\tif(column.modules.responsive){\r\n\t\t\tcolumn.modules.responsive.visible = visible;\r\n\t\t\tthis.initialize();\r\n\t\t}\r\n\t}\r\n\r\n\thideColumn(column){\r\n\t\tvar colCount = this.hiddenColumns.length;\r\n\r\n\t\tcolumn.hide(false, true);\r\n\r\n\t\tif(this.mode === \"collapse\"){\r\n\t\t\tthis.hiddenColumns.unshift(column);\r\n\t\t\tthis.generateCollapsedContent();\r\n\r\n\t\t\tif(this.collapseHandleColumn && !colCount){\r\n\t\t\t\tthis.collapseHandleColumn.show();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tshowColumn(column){\r\n\t\tvar index;\r\n\r\n\t\tcolumn.show(false, true);\r\n\t\t//set column width to prevent calculation loops on uninitialized columns\r\n\t\tcolumn.setWidth(column.getWidth());\r\n\r\n\t\tif(this.mode === \"collapse\"){\r\n\t\t\tindex = this.hiddenColumns.indexOf(column);\r\n\r\n\t\t\tif(index > -1){\r\n\t\t\t\tthis.hiddenColumns.splice(index, 1);\r\n\t\t\t}\r\n\r\n\t\t\tthis.generateCollapsedContent();\r\n\r\n\t\t\tif(this.collapseHandleColumn && !this.hiddenColumns.length){\r\n\t\t\t\tthis.collapseHandleColumn.hide();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//redraw columns to fit space\r\n\tupdate(){\r\n\t\tvar self = this,\r\n\t\tworking = true;\r\n\r\n\t\twhile(working){\r\n\r\n\t\t\tlet width = self.table.modules.layout.getMode() == \"fitColumns\" ? self.table.columnManager.getFlexBaseWidth() : self.table.columnManager.getWidth();\r\n\r\n\t\t\tlet diff = (self.table.options.headerVisible ? self.table.columnManager.element.clientWidth : self.table.element.clientWidth) - width;\r\n\r\n\t\t\tif(diff < 0){\r\n\t\t\t\t//table is too wide\r\n\t\t\t\tlet column = self.columns[self.index];\r\n\r\n\t\t\t\tif(column){\r\n\t\t\t\t\tself.hideColumn(column);\r\n\t\t\t\t\tself.index ++;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tworking = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\r\n\t\t\t\t//table has spare space\r\n\t\t\t\tlet column = self.columns[self.index -1];\r\n\r\n\t\t\t\tif(column){\r\n\t\t\t\t\tif(diff > 0){\r\n\t\t\t\t\t\tif(diff >= column.getWidth()){\r\n\t\t\t\t\t\t\tself.showColumn(column);\r\n\t\t\t\t\t\t\tself.index --;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tworking = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tworking = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tworking = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(!self.table.rowManager.activeRowsCount){\r\n\t\t\t\tself.table.rowManager.renderEmptyScroll();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgenerateCollapsedContent(){\r\n\t\tvar self = this,\r\n\t\trows = this.table.rowManager.getDisplayRows();\r\n\r\n\t\trows.forEach(function(row){\r\n\t\t\tself.generateCollapsedRowContent(row);\r\n\t\t});\r\n\t}\r\n\r\n\tgenerateCollapsedRowContent(row){\r\n\t\tvar el, contents;\r\n\r\n\t\tif(row.modules.responsiveLayout){\r\n\t\t\tel = row.modules.responsiveLayout.element;\r\n\r\n\t\t\twhile(el.firstChild) el.removeChild(el.firstChild);\r\n\r\n\t\t\tcontents = this.collapseFormatter(this.generateCollapsedRowData(row));\r\n\t\t\tif(contents){\r\n\t\t\t\tel.appendChild(contents);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgenerateCollapsedRowData(row){\r\n\t\tvar self = this,\r\n\t\tdata = row.getData(),\r\n\t\toutput = [],\r\n\t\tmockCellComponent;\r\n\r\n\t\tthis.hiddenColumns.forEach(function(column){\r\n\t\t\tvar value = column.getFieldValue(data);\r\n\r\n\t\t\tif(column.definition.title && column.field){\r\n\t\t\t\tif(column.modules.format && self.table.options.responsiveLayoutCollapseUseFormatters){\r\n\r\n\t\t\t\t\tmockCellComponent = {\r\n\t\t\t\t\t\tvalue:false,\r\n\t\t\t\t\t\tdata:{},\r\n\t\t\t\t\t\tgetValue:function(){\r\n\t\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetData:function(){\r\n\t\t\t\t\t\t\treturn data;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetElement:function(){\r\n\t\t\t\t\t\t\treturn document.createElement(\"div\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetRow:function(){\r\n\t\t\t\t\t\t\treturn row.getComponent();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetColumn:function(){\r\n\t\t\t\t\t\t\treturn column.getComponent();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\toutput.push({\r\n\t\t\t\t\t\tfield: column.field,\r\n\t\t\t\t\t\ttitle: column.definition.title,\r\n\t\t\t\t\t\tvalue: column.modules.format.formatter.call(self.table.modules.format, mockCellComponent, column.modules.format.params)\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\toutput.push({\r\n\t\t\t\t\t\tfield: column.field,\r\n\t\t\t\t\t\ttitle: column.definition.title,\r\n\t\t\t\t\t\tvalue: value\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tformatCollapsedData(data){\r\n\t\tvar list = document.createElement(\"table\");\r\n\r\n\t\tdata.forEach(function(item){\r\n\t\t\tvar row = document.createElement(\"tr\");\r\n\t\t\tvar titleData = document.createElement(\"td\");\r\n\t\t\tvar valueData = document.createElement(\"td\");\r\n\t\t\tvar node_content;\r\n\r\n\t\t\tvar titleHighlight = document.createElement(\"strong\");\r\n\t\t\ttitleData.appendChild(titleHighlight);\r\n\t\t\tthis.table.modules.localize.bind(\"columns|\" + item.field, function(text){\r\n\t\t\t\ttitleHighlight.innerText = text || item.title;\r\n\t\t\t});\r\n\r\n\t\t\tif(item.value instanceof Node){\r\n\t\t\t\tnode_content = document.createElement(\"div\");\r\n\t\t\t\tnode_content.appendChild(item.value);\r\n\t\t\t\tvalueData.appendChild(node_content);\r\n\t\t\t}else{\r\n\t\t\t\tvalueData.innerHTML = item.value;\r\n\t\t\t}\r\n\r\n\t\t\trow.appendChild(titleData);\r\n\t\t\trow.appendChild(valueData);\r\n\t\t\tlist.appendChild(row);\r\n\t\t}, this);\r\n\r\n\t\treturn Object.keys(data).length ? list : \"\";\r\n\t}\r\n}\r\n\r\nResponsiveLayout.moduleName = \"responsiveLayout\";\r\n\r\nexport default ResponsiveLayout;","import Module from '../../core/Module.js';\r\n\r\nclass SelectRow extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.selecting = false; //flag selecting in progress\r\n\t\tthis.lastClickedRow = false; //last clicked row\r\n\t\tthis.selectPrev = []; //hold previously selected element for drag drop selection\r\n\t\tthis.selectedRows = []; //hold selected rows\r\n\t\tthis.headerCheckboxElement = null; // hold header select element\r\n\t}\r\n\r\n\tclearSelectionData(silent){\r\n\t\tthis.selecting = false;\r\n\t\tthis.lastClickedRow = false;\r\n\t\tthis.selectPrev = [];\r\n\t\tthis.selectedRows = [];\r\n\r\n\t\tif(!silent){\r\n\t\t\tthis._rowSelectionChanged();\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeRow(row){\r\n\t\tvar self = this,\r\n\t\telement = row.getElement();\r\n\r\n\t\t// trigger end of row selection\r\n\t\tvar endSelect = function(){\r\n\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\tself.selecting = false;\r\n\t\t\t}, 50);\r\n\r\n\t\t\tdocument.body.removeEventListener(\"mouseup\", endSelect);\r\n\t\t};\r\n\r\n\t\trow.modules.select = {selected:false};\r\n\r\n\t\t//set row selection class\r\n\t\tif(self.table.options.selectableCheck.call(this.table, row.getComponent())){\r\n\t\t\telement.classList.add(\"tabulator-selectable\");\r\n\t\t\telement.classList.remove(\"tabulator-unselectable\");\r\n\r\n\t\t\tif(self.table.options.selectable && self.table.options.selectable != \"highlight\"){\r\n\t\t\t\tif(self.table.options.selectableRangeMode === \"click\"){\r\n\t\t\t\t\telement.addEventListener(\"click\", function(e){\r\n\t\t\t\t\t\tif(e.shiftKey){\r\n\t\t\t\t\t\t\tself.table._clearSelection();\r\n\t\t\t\t\t\t\tself.lastClickedRow = self.lastClickedRow || row;\r\n\r\n\t\t\t\t\t\t\tvar lastClickedRowIdx = self.table.rowManager.getDisplayRowIndex(self.lastClickedRow);\r\n\t\t\t\t\t\t\tvar rowIdx = self.table.rowManager.getDisplayRowIndex(row);\r\n\r\n\t\t\t\t\t\t\tvar fromRowIdx = lastClickedRowIdx <= rowIdx ? lastClickedRowIdx : rowIdx;\r\n\t\t\t\t\t\t\tvar toRowIdx = lastClickedRowIdx >= rowIdx ? lastClickedRowIdx : rowIdx;\r\n\r\n\t\t\t\t\t\t\tvar rows = self.table.rowManager.getDisplayRows().slice(0);\r\n\t\t\t\t\t\t\tvar toggledRows = rows.splice(fromRowIdx, toRowIdx - fromRowIdx + 1);\r\n\r\n\t\t\t\t\t\t\tif(e.ctrlKey || e.metaKey){\r\n\t\t\t\t\t\t\t\ttoggledRows.forEach(function(toggledRow){\r\n\t\t\t\t\t\t\t\t\tif(toggledRow !== self.lastClickedRow){\r\n\r\n\t\t\t\t\t\t\t\t\t\tif(self.table.options.selectable !== true && !self.isRowSelected(row)){\r\n\t\t\t\t\t\t\t\t\t\t\tif(self.selectedRows.length < self.table.options.selectable){\r\n\t\t\t\t\t\t\t\t\t\t\t\tself.toggleRow(toggledRow);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\tself.toggleRow(toggledRow);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tself.lastClickedRow = row;\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tself.deselectRows(undefined, true);\r\n\r\n\t\t\t\t\t\t\t\tif(self.table.options.selectable !== true){\r\n\t\t\t\t\t\t\t\t\tif(toggledRows.length > self.table.options.selectable){\r\n\t\t\t\t\t\t\t\t\t\ttoggledRows = toggledRows.slice(0, self.table.options.selectable)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tself.selectRows(toggledRows);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tself.table._clearSelection();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if(e.ctrlKey || e.metaKey){\r\n\t\t\t\t\t\t\tself.toggleRow(row);\r\n\t\t\t\t\t\t\tself.lastClickedRow = row;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tself.deselectRows(undefined, true);\r\n\t\t\t\t\t\t\tself.selectRows(row);\r\n\t\t\t\t\t\t\tself.lastClickedRow = row;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\telement.addEventListener(\"click\", function(e){\r\n\t\t\t\t\t\tif(!self.table.modExists(\"edit\") || !self.table.modules.edit.getCurrentCell()){\r\n\t\t\t\t\t\t\tself.table._clearSelection();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(!self.selecting){\r\n\t\t\t\t\t\t\tself.toggleRow(row);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\telement.addEventListener(\"mousedown\", function(e){\r\n\t\t\t\t\t\tif(e.shiftKey){\r\n\t\t\t\t\t\t\tself.table._clearSelection();\r\n\r\n\t\t\t\t\t\t\tself.selecting = true;\r\n\r\n\t\t\t\t\t\t\tself.selectPrev = [];\r\n\r\n\t\t\t\t\t\t\tdocument.body.addEventListener(\"mouseup\", endSelect);\r\n\t\t\t\t\t\t\tdocument.body.addEventListener(\"keyup\", endSelect);\r\n\r\n\t\t\t\t\t\t\tself.toggleRow(row);\r\n\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\telement.addEventListener(\"mouseenter\", function(e){\r\n\t\t\t\t\t\tif(self.selecting){\r\n\t\t\t\t\t\t\tself.table._clearSelection();\r\n\t\t\t\t\t\t\tself.toggleRow(row);\r\n\r\n\t\t\t\t\t\t\tif(self.selectPrev[1] == row){\r\n\t\t\t\t\t\t\t\tself.toggleRow(self.selectPrev[0]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\telement.addEventListener(\"mouseout\", function(e){\r\n\t\t\t\t\t\tif(self.selecting){\r\n\t\t\t\t\t\t\tself.table._clearSelection();\r\n\t\t\t\t\t\t\tself.selectPrev.unshift(row);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\telement.classList.add(\"tabulator-unselectable\");\r\n\t\t\telement.classList.remove(\"tabulator-selectable\");\r\n\t\t}\r\n\t}\r\n\r\n\t//toggle row selection\r\n\ttoggleRow(row){\r\n\t\tif(this.table.options.selectableCheck.call(this.table, row.getComponent())){\r\n\t\t\tif(row.modules.select && row.modules.select.selected){\r\n\t\t\t\tthis._deselectRow(row);\r\n\t\t\t}else{\r\n\t\t\t\tthis._selectRow(row);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//select a number of rows\r\n\tselectRows(rows){\r\n\t\tvar rowMatch;\r\n\r\n\t\tswitch(typeof rows){\r\n\t\t\tcase \"undefined\":\r\n\t\t\tthis.table.rowManager.rows.forEach((row) => {\r\n\t\t\t\tthis._selectRow(row, true, true);\r\n\t\t\t});\r\n\r\n\t\t\tthis._rowSelectionChanged();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"string\":\r\n\r\n\t\t\trowMatch = this.table.rowManager.findRow(rows);\r\n\r\n\t\t\tif(rowMatch){\r\n\t\t\t\tthis._selectRow(rowMatch, true, true);\r\n\t\t\t}else{\r\n\t\t\t\tthis.table.rowManager.getRows(rows).forEach((row) => {\r\n\t\t\t\t\tthis._selectRow(row, true, true);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tthis._rowSelectionChanged();\r\n\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\tif(Array.isArray(rows)){\r\n\t\t\t\trows.forEach((row) => {\r\n\t\t\t\t\tthis._selectRow(row, true, true);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis._rowSelectionChanged();\r\n\t\t\t}else{\r\n\t\t\t\tthis._selectRow(rows, false, true);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\t//select an individual row\r\n\t_selectRow(rowInfo, silent, force){\r\n\t\tvar index;\r\n\r\n\t\t//handle max row count\r\n\t\tif(!isNaN(this.table.options.selectable) && this.table.options.selectable !== true && !force){\r\n\t\t\tif(this.selectedRows.length >= this.table.options.selectable){\r\n\t\t\t\tif(this.table.options.selectableRollingSelection){\r\n\t\t\t\t\tthis._deselectRow(this.selectedRows[0]);\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar row = this.table.rowManager.findRow(rowInfo);\r\n\r\n\t\tif(row){\r\n\t\t\tif(this.selectedRows.indexOf(row) == -1){\r\n\t\t\t\trow.getElement().classList.add(\"tabulator-selected\");\r\n\t\t\t\tif(!row.modules.select){\r\n\t\t\t\t\trow.modules.select = {};\r\n\t\t\t\t}\r\n\r\n\t\t\t\trow.modules.select.selected = true;\r\n\t\t\t\tif(row.modules.select.checkboxEl){\r\n\t\t\t\t\trow.modules.select.checkboxEl.checked = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.selectedRows.push(row);\r\n\r\n\t\t\t\tif(this.table.options.dataTreeSelectPropagate){\r\n\t\t\t\t\tthis.childRowSelection(row, true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!silent){\r\n\t\t\t\t\tthis.table.options.rowSelected.call(this.table, row.getComponent());\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._rowSelectionChanged(silent);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(!silent){\r\n\t\t\t\tconsole.warn(\"Selection Error - No such row found, ignoring selection:\" + rowInfo);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tisRowSelected(row){\r\n\t\treturn this.selectedRows.indexOf(row) !== -1;\r\n\t}\r\n\r\n\t//deselect a number of rows\r\n\tdeselectRows(rows, silent){\r\n\t\tvar self = this,\r\n\t\trowCount;\r\n\r\n\t\tif(typeof rows == \"undefined\"){\r\n\r\n\t\t\trowCount = self.selectedRows.length;\r\n\r\n\t\t\tfor(let i = 0; i < rowCount; i++){\r\n\t\t\t\tself._deselectRow(self.selectedRows[0], true);\r\n\t\t\t}\r\n\r\n\t\t\tself._rowSelectionChanged(silent);\r\n\r\n\t\t}else{\r\n\t\t\tif(Array.isArray(rows)){\r\n\t\t\t\trows.forEach(function(row){\r\n\t\t\t\t\tself._deselectRow(row, true);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tself._rowSelectionChanged(silent);\r\n\t\t\t}else{\r\n\t\t\t\tself._deselectRow(rows, silent);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//deselect an individual row\r\n\t_deselectRow(rowInfo, silent){\r\n\t\tvar self = this,\r\n\t\trow = self.table.rowManager.findRow(rowInfo),\r\n\t\tindex;\r\n\r\n\t\tif(row){\r\n\t\t\tindex = self.selectedRows.findIndex(function(selectedRow){\r\n\t\t\t\treturn selectedRow == row;\r\n\t\t\t});\r\n\r\n\t\t\tif(index > -1){\r\n\r\n\t\t\t\trow.getElement().classList.remove(\"tabulator-selected\");\r\n\t\t\t\tif(!row.modules.select){\r\n\t\t\t\t\trow.modules.select = {};\r\n\t\t\t\t}\r\n\r\n\t\t\t\trow.modules.select.selected = false;\r\n\t\t\t\tif(row.modules.select.checkboxEl){\r\n\t\t\t\t\trow.modules.select.checkboxEl.checked = false;\r\n\t\t\t\t}\r\n\t\t\t\tself.selectedRows.splice(index, 1);\r\n\r\n\t\t\t\tif(this.table.options.dataTreeSelectPropagate){\r\n\t\t\t\t\tthis.childRowSelection(row, false);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!silent){\r\n\t\t\t\t\tself.table.options.rowDeselected.call(this.table, row.getComponent());\r\n\t\t\t\t}\r\n\r\n\t\t\t\tself._rowSelectionChanged(silent);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(!silent){\r\n\t\t\t\tconsole.warn(\"Deselection Error - No such row found, ignoring selection:\" + rowInfo);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetSelectedData(){\r\n\t\tvar data = [];\r\n\r\n\t\tthis.selectedRows.forEach(function(row){\r\n\t\t\tdata.push(row.getData());\r\n\t\t});\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\tgetSelectedRows(){\r\n\r\n\t\tvar rows = [];\r\n\r\n\t\tthis.selectedRows.forEach(function(row){\r\n\t\t\trows.push(row.getComponent());\r\n\t\t});\r\n\r\n\t\treturn rows;\r\n\t}\r\n\r\n\t_rowSelectionChanged(silent){\r\n\t\tif(this.headerCheckboxElement){\r\n\t\t\tif(this.selectedRows.length === 0){\r\n\t\t\t\tthis.headerCheckboxElement.checked = false;\r\n\t\t\t\tthis.headerCheckboxElement.indeterminate = false;\r\n\t\t\t} else if(this.table.rowManager.rows.length === this.selectedRows.length){\r\n\t\t\t\tthis.headerCheckboxElement.checked = true;\r\n\t\t\t\tthis.headerCheckboxElement.indeterminate = false;\r\n\t\t\t} else {\r\n\t\t\t\tthis.headerCheckboxElement.indeterminate = true;\r\n\t\t\t\tthis.headerCheckboxElement.checked = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(!silent){\r\n\t\t\tthis.table.options.rowSelectionChanged.call(this.table, this.getSelectedData(), this.getSelectedRows());\r\n\t\t}\r\n\t}\r\n\r\n\tregisterRowSelectCheckbox (row, element) {\r\n\t\tif(!row._row.modules.select){\r\n\t\t\trow._row.modules.select = {};\r\n\t\t}\r\n\r\n\t\trow._row.modules.select.checkboxEl = element;\r\n\t}\r\n\r\n\tregisterHeaderSelectCheckbox (element) {\r\n\t\tthis.headerCheckboxElement = element;\r\n\t}\r\n\r\n\tchildRowSelection(row, select){\r\n\t\tvar children = this.table.modules.dataTree.getChildren(row, true);\r\n\r\n\t\tif(select){\r\n\t\t\tfor(let child of children){\r\n\t\t\t\tthis._selectRow(child, true);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tfor(let child of children){\r\n\t\t\t\tthis._deselectRow(child, true);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nSelectRow.moduleName = \"selectRow\";\r\n\r\nexport default SelectRow;","//sort numbers\r\nexport default function(a, b, aRow, bRow, column, dir, params){\r\n\tvar alignEmptyValues = params.alignEmptyValues;\r\n\tvar decimal = params.decimalSeparator;\r\n\tvar thousand = params.thousandSeparator;\r\n\tvar emptyAlign = 0;\r\n\r\n\ta = String(a);\r\n\tb = String(b);\r\n\r\n\tif(thousand){\r\n\t\ta = a.split(thousand).join(\"\");\r\n\t\tb = b.split(thousand).join(\"\");\r\n\t}\r\n\r\n\tif(decimal){\r\n\t\ta = a.split(decimal).join(\".\");\r\n\t\tb = b.split(decimal).join(\".\");\r\n\t}\r\n\r\n\ta = parseFloat(a);\r\n\tb = parseFloat(b);\r\n\r\n\t//handle non numeric values\r\n\tif(isNaN(a)){\r\n\t\temptyAlign =  isNaN(b) ? 0 : -1;\r\n\t}else if(isNaN(b)){\r\n\t\temptyAlign =  1;\r\n\t}else{\r\n\t\t//compare valid values\r\n\t\treturn a - b;\r\n\t}\r\n\r\n\t//fix empty values in position\r\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\r\n\t\temptyAlign *= -1;\r\n\t}\r\n\r\n\treturn emptyAlign;\r\n};","//sort strings\r\nexport default function(a, b, aRow, bRow, column, dir, params){\r\n\tvar alignEmptyValues = params.alignEmptyValues;\r\n\tvar emptyAlign = 0;\r\n\tvar locale;\r\n\r\n\t//handle empty values\r\n\tif(!a){\r\n\t\temptyAlign =  !b ? 0 : -1;\r\n\t}else if(!b){\r\n\t\temptyAlign =  1;\r\n\t}else{\r\n\t\t//compare valid values\r\n\t\tswitch(typeof params.locale){\r\n\t\t\tcase \"boolean\":\r\n\t\t\tif(params.locale){\r\n\t\t\t\tlocale = this.table.modules.localize.getLocale();\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t\tcase \"string\":\r\n\t\t\tlocale = params.locale;\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn String(a).toLowerCase().localeCompare(String(b).toLowerCase(), locale);\r\n\t}\r\n\r\n\t//fix empty values in position\r\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\r\n\t\temptyAlign *= -1;\r\n\t}\r\n\r\n\treturn emptyAlign;\r\n};","//sort datetime\r\nexport default function(a, b, aRow, bRow, column, dir, params){\r\n\tvar format = params.format || \"DD/MM/YYYY HH:mm:ss\",\r\n\talignEmptyValues = params.alignEmptyValues,\r\n\temptyAlign = 0;\r\n\r\n\tif(typeof moment != \"undefined\"){\r\n\t\ta = moment(a, format);\r\n\t\tb = moment(b, format);\r\n\r\n\t\tif(!a.isValid()){\r\n\t\t\temptyAlign = !b.isValid() ? 0 : -1;\r\n\t\t}else if(!b.isValid()){\r\n\t\t\temptyAlign =  1;\r\n\t\t}else{\r\n\t\t\t//compare valid values\r\n\t\t\treturn a - b;\r\n\t\t}\r\n\r\n\t\t//fix empty values in position\r\n\t\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\r\n\t\t\temptyAlign *= -1;\r\n\t\t}\r\n\r\n\t\treturn emptyAlign;\r\n\r\n\t}else{\r\n\t\tconsole.error(\"Sort Error - 'datetime' sorter is dependant on moment.js\");\r\n\t}\r\n};","import datetime from './datetime.js';\r\n\r\n//sort date\r\nexport default function(a, b, aRow, bRow, column, dir, params){\r\n\tif(!params.format){\r\n\t\tparams.format = \"DD/MM/YYYY\";\r\n\t}\r\n\r\n\treturn datetime.call(this, a, b, aRow, bRow, column, dir, params);\r\n};","import datetime from './datetime.js';\r\n\r\n//sort times\r\nexport default function(a, b, aRow, bRow, column, dir, params){\r\n\tif(!params.format){\r\n\t\tparams.format = \"HH:mm\";\r\n\t}\r\n\r\n\treturn datetime.call(this, a, b, aRow, bRow, column, dir, params);\r\n};","//sort booleans\r\nexport default function(a, b, aRow, bRow, column, dir, params){\r\n\tvar el1 = a === true || a === \"true\" || a === \"True\" || a === 1 ? 1 : 0;\r\n\tvar el2 = b === true || b === \"true\" || b === \"True\" || b === 1 ? 1 : 0;\r\n\r\n\treturn el1 - el2;\r\n};","//sort if element contains any data\r\nexport default function(a, b, aRow, bRow, column, dir, params){\r\n\tvar el1 = 0;\r\n\tvar el2 = 0;\r\n\tvar type = params.type || \"length\";\r\n\tvar alignEmptyValues = params.alignEmptyValues;\r\n\tvar emptyAlign = 0;\r\n\r\n\tfunction calc(value){\r\n\r\n\t\tswitch(type){\r\n\t\t\tcase \"length\":\r\n\t\t\treturn value.length;\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"sum\":\r\n\t\t\treturn value.reduce(function(c, d){\r\n\t\t\t\treturn c + d;\r\n\t\t\t});\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"max\":\r\n\t\t\treturn Math.max.apply(null, value) ;\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"min\":\r\n\t\t\treturn Math.min.apply(null, value) ;\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"avg\":\r\n\t\t\treturn value.reduce(function(c, d){\r\n\t\t\t\treturn c + d;\r\n\t\t\t}) / value.length;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\t//handle non array values\r\n\tif(!Array.isArray(a)){\r\n\t\talignEmptyValues = !Array.isArray(b) ? 0 : -1;\r\n\t}else if(!Array.isArray(b)){\r\n\t\talignEmptyValues = 1;\r\n\t}else{\r\n\r\n\t\t//compare valid values\r\n\t\tel1 = a ? calc(a) : 0;\r\n\t\tel2 = b ? calc(b) : 0;\r\n\r\n\t\treturn el1 - el2;\r\n\t}\r\n\r\n\t//fix empty values in position\r\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\r\n\t\temptyAlign *= -1;\r\n\t}\r\n\r\n\treturn emptyAlign;\r\n};","//sort if element contains any data\r\nexport default function(a, b, aRow, bRow, column, dir, params){\r\n\tvar el1 = typeof a == \"undefined\" ? 0 : 1;\r\n\tvar el2 = typeof b == \"undefined\" ? 0 : 1;\r\n\r\n\treturn el1 - el2;\r\n};","//sort alpha numeric strings\r\nexport default function(as, bs, aRow, bRow, column, dir, params){\r\n\tvar a, b, a1, b1, i= 0, L, rx = /(\\d+)|(\\D+)/g, rd = /\\d/;\r\n\tvar alignEmptyValues = params.alignEmptyValues;\r\n\tvar emptyAlign = 0;\r\n\r\n\t//handle empty values\r\n\tif(!as && as!== 0){\r\n\t\temptyAlign =  !bs && bs!== 0 ? 0 : -1;\r\n\t}else if(!bs && bs!== 0){\r\n\t\temptyAlign =  1;\r\n\t}else{\r\n\r\n\t\tif(isFinite(as) && isFinite(bs)) return as - bs;\r\n\t\ta = String(as).toLowerCase();\r\n\t\tb = String(bs).toLowerCase();\r\n\t\tif(a === b) return 0;\r\n\t\tif(!(rd.test(a) && rd.test(b))) return a > b ? 1 : -1;\r\n\t\ta = a.match(rx);\r\n\t\tb = b.match(rx);\r\n\t\tL = a.length > b.length ? b.length : a.length;\r\n\t\twhile(i < L){\r\n\t\t\ta1= a[i];\r\n\t\t\tb1= b[i++];\r\n\t\t\tif(a1 !== b1){\r\n\t\t\t\tif(isFinite(a1) && isFinite(b1)){\r\n\t\t\t\t\tif(a1.charAt(0) === \"0\") a1 = \".\" + a1;\r\n\t\t\t\t\tif(b1.charAt(0) === \"0\") b1 = \".\" + b1;\r\n\t\t\t\t\treturn a1 - b1;\r\n\t\t\t\t}\r\n\t\t\t\telse return a1 > b1 ? 1 : -1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn a.length > b.length;\r\n\t}\r\n\r\n\t//fix empty values in position\r\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\r\n\t\temptyAlign *= -1;\r\n\t}\r\n\r\n\treturn emptyAlign;\r\n};","import number from './sorters/number.js';\r\nimport string from './sorters/string.js';\r\nimport date from './sorters/date.js';\r\nimport time from './sorters/time.js';\r\nimport datetime from './sorters/datetime.js';\r\nimport boolean from './sorters/boolean.js';\r\nimport array from './sorters/array.js';\r\nimport exists from './sorters/exists.js';\r\nimport alphanum from './sorters/alphanum.js';\r\n\r\nexport default {\r\n\tnumber:number,\r\n\tstring:string,\r\n\tdate:date,\r\n\ttime:time,\r\n\tdatetime:datetime,\r\n\tboolean:boolean,\r\n\tarray:array,\r\n\texists:exists,\r\n\talphanum:alphanum\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport defaultSorters from './defaults/sorters.js';\r\n\r\nclass Sort extends Module{\r\n\r\n\tconstructor(table){\r\n\t \tsuper(table);\r\n\r\n\t \tthis.sortList = []; //holder current sort\r\n\t \tthis.changed = false; //has the sort changed since last render\r\n\t}\r\n\r\n\t//initialize column header for sorting\r\n\tinitializeColumn(column, content){\r\n\t\tvar self = this,\r\n\t\tsorter = false,\r\n\t\tcolEl,\r\n\t\tarrowEl;\r\n\r\n\t\tswitch(typeof column.definition.sorter){\r\n\t\t\tcase \"string\":\r\n\t\t\tif(Sort.sorters[column.definition.sorter]){\r\n\t\t\t\tsorter = Sort.sorters[column.definition.sorter];\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Sort Error - No such sorter found: \", column.definition.sorter);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\tsorter = column.definition.sorter;\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tcolumn.modules.sort = {\r\n\t\t\tsorter:sorter, dir:\"none\",\r\n\t\t\tparams:column.definition.sorterParams || {},\r\n\t\t\tstartingDir:column.definition.headerSortStartingDir || \"asc\",\r\n\t\t\ttristate: typeof column.definition.headerSortTristate !== \"undefined\" ? column.definition.headerSortTristate : this.table.options.headerSortTristate,\r\n\t\t};\r\n\r\n\t\tif(typeof column.definition.headerSort === \"undefined\" ? (this.table.options.headerSort !== false) : column.definition.headerSort !== false){\r\n\r\n\t\t\tcolEl = column.getElement();\r\n\r\n\t\t\tcolEl.classList.add(\"tabulator-sortable\");\r\n\r\n\r\n\t\t\tarrowEl = document.createElement(\"div\");\r\n\t\t\tarrowEl.classList.add(\"tabulator-col-sorter\");\r\n\r\n\t\t\tif(typeof this.table.options.headerSortElement == \"object\"){\r\n\t\t\t\tarrowEl.appendChild(this.table.options.headerSortElement);\r\n\t\t\t}else{\r\n\t\t\t\tarrowEl.innerHTML = this.table.options.headerSortElement;\r\n\t\t\t}\r\n\r\n\t\t\t//create sorter arrow\r\n\t\t\tcontent.appendChild(arrowEl);\r\n\r\n\t\t\tcolumn.modules.sort.element = arrowEl;\r\n\r\n\t\t\t//sort on click\r\n\t\t\tcolEl.addEventListener(\"click\", function(e){\r\n\t\t\t\tvar dir = \"\",\r\n\t\t\t\tsorters=[],\r\n\t\t\t\tmatch = false;\r\n\r\n\t\t\t\tif(column.modules.sort){\r\n\t\t\t\t\tif(column.modules.sort.tristate){\r\n\t\t\t\t\t\tif(column.modules.sort.dir == \"none\"){\r\n\t\t\t\t\t\t\tdir = column.modules.sort.startingDir;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tif(column.modules.sort.dir == column.modules.sort.startingDir){\r\n\t\t\t\t\t\t\t\tdir = column.modules.sort.dir == \"asc\" ? \"desc\" : \"asc\";\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tdir = \"none\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tswitch(column.modules.sort.dir){\r\n\t\t\t\t\t\t\tcase \"asc\":\r\n\t\t\t\t\t\t\tdir = \"desc\";\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase \"desc\":\r\n\t\t\t\t\t\t\tdir = \"asc\";\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tdir = column.modules.sort.startingDir;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif (self.table.options.columnHeaderSortMulti && (e.shiftKey || e.ctrlKey)) {\r\n\t\t\t\t\t\tsorters = self.getSort();\r\n\r\n\t\t\t\t\t\tmatch = sorters.findIndex(function(sorter){\r\n\t\t\t\t\t\t\treturn sorter.field === column.getField();\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif(match > -1){\r\n\t\t\t\t\t\t\tsorters[match].dir = dir;\r\n\r\n\t\t\t\t\t\t\tif(match != sorters.length -1){\r\n\t\t\t\t\t\t\t\tmatch = sorters.splice(match, 1)[0];\r\n\t\t\t\t\t\t\t\tif(dir != \"none\"){\r\n\t\t\t\t\t\t\t\t\tsorters.push(match);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tif(dir != \"none\"){\r\n\t\t\t\t\t\t\t\tsorters.push({column:column, dir:dir});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t//add to existing sort\r\n\t\t\t\t\t\tself.setSort(sorters);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(dir == \"none\"){\r\n\t\t\t\t\t\t\tself.clear();\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t//sort by column only\r\n\t\t\t\t\t\t\tself.setSort(column, dir);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tself.table.rowManager.sorterRefresh(!self.sortList.length);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t//check if the sorters have changed since last use\r\n\thasChanged(){\r\n\t\tvar changed = this.changed;\r\n\t\tthis.changed = false;\r\n\t\treturn changed;\r\n\t}\r\n\r\n\t//return current sorters\r\n\tgetSort(){\r\n\t\tvar self = this,\r\n\t\tsorters = [];\r\n\r\n\t\tself.sortList.forEach(function(item){\r\n\t\t\tif(item.column){\r\n\t\t\t\tsorters.push({column:item.column.getComponent(), field:item.column.getField(), dir:item.dir});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn sorters;\r\n\t}\r\n\r\n\t//change sort list and trigger sort\r\n\tsetSort(sortList, dir){\r\n\t\tvar self = this,\r\n\t\tnewSortList = [];\r\n\r\n\t\tif(!Array.isArray(sortList)){\r\n\t\t\tsortList = [{column: sortList, dir:dir}];\r\n\t\t}\r\n\r\n\t\tsortList.forEach(function(item){\r\n\t\t\tvar column;\r\n\r\n\t\t\tcolumn = self.table.columnManager.findColumn(item.column);\r\n\r\n\t\t\tif(column){\r\n\t\t\t\titem.column = column;\r\n\t\t\t\tnewSortList.push(item);\r\n\t\t\t\tself.changed = true;\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Sort Warning - Sort field does not exist and is being ignored: \", item.column);\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\tself.sortList = newSortList;\r\n\r\n\t\tif(this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.sort){\r\n\t\t\tthis.table.modules.persistence.save(\"sort\");\r\n\t\t}\r\n\t}\r\n\r\n\t//clear sorters\r\n\tclear(){\r\n\t\tthis.setSort([]);\r\n\t}\r\n\r\n\t//find appropriate sorter for column\r\n\tfindSorter(column){\r\n\t\tvar row = this.table.rowManager.activeRows[0],\r\n\t\tsorter = \"string\",\r\n\t\tfield, value;\r\n\r\n\t\tif(row){\r\n\t\t\trow = row.getData();\r\n\t\t\tfield = column.getField();\r\n\r\n\t\t\tif(field){\r\n\r\n\t\t\t\tvalue = column.getFieldValue(row);\r\n\r\n\t\t\t\tswitch(typeof value){\r\n\t\t\t\t\tcase \"undefined\":\r\n\t\t\t\t\tsorter = \"string\";\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase \"boolean\":\r\n\t\t\t\t\tsorter = \"boolean\";\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\tif(!isNaN(value) && value !== \"\"){\r\n\t\t\t\t\t\tsorter = \"number\";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)){\r\n\t\t\t\t\t\t\tsorter = \"alphanum\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn Sort.sorters[sorter];\r\n\t}\r\n\r\n\t//work through sort list sorting data\r\n\tsort(data){\r\n\t\tvar self = this,\r\n\t\tsortList = this.table.options.sortOrderReverse ? self.sortList.slice().reverse() : self.sortList,\r\n\t\tsortListActual = [],\r\n\t\trowComponents = [],\r\n\t\tlastSort;\r\n\r\n\t\tif(self.table.options.dataSorting){\r\n\t\t\tself.table.options.dataSorting.call(self.table, self.getSort());\r\n\t\t}\r\n\r\n\t\tself.clearColumnHeaders();\r\n\r\n\t\tif(!self.table.options.ajaxSorting){\r\n\r\n\t\t\t//build list of valid sorters and trigger column specific callbacks before sort begins\r\n\t\t\tsortList.forEach(function(item, i){\r\n\t\t\t\tvar sortObj = item.column.modules.sort;\r\n\r\n\t\t\t\tif(item.column && sortObj){\r\n\r\n\t\t\t\t\t//if no sorter has been defined, take a guess\r\n\t\t\t\t\tif(!sortObj.sorter){\r\n\t\t\t\t\t\tsortObj.sorter = self.findSorter(item.column);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\titem.params = typeof sortObj.params === \"function\" ? sortObj.params(item.column.getComponent(), item.dir) : sortObj.params;\r\n\r\n\t\t\t\t\tsortListActual.push(item);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tself.setColumnHeader(item.column, item.dir);\r\n\t\t\t});\r\n\r\n\t\t\t//sort data\r\n\t\t\tif (sortListActual.length) {\r\n\t\t\t\tself._sortItems(data, sortListActual);\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\tsortList.forEach(function(item, i){\r\n\t\t\t\tself.setColumnHeader(item.column, item.dir);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(self.table.options.dataSorted){\r\n\t\t\tdata.forEach((row) => {\r\n\t\t\t\trowComponents.push(row.getComponent());\r\n\t\t\t});\r\n\r\n\t\t\tself.table.options.dataSorted.call(self.table, self.getSort(), rowComponents);\r\n\t\t}\r\n\t}\r\n\r\n\t//clear sort arrows on columns\r\n\tclearColumnHeaders(){\r\n\t\tthis.table.columnManager.getRealColumns().forEach(function(column){\r\n\t\t\tif(column.modules.sort){\r\n\t\t\t\tcolumn.modules.sort.dir = \"none\";\r\n\t\t\t\tcolumn.getElement().setAttribute(\"aria-sort\", \"none\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//set the column header sort direction\r\n\tsetColumnHeader(column, dir){\r\n\t\tcolumn.modules.sort.dir = dir;\r\n\t\tcolumn.getElement().setAttribute(\"aria-sort\", dir);\r\n\t}\r\n\r\n\t//sort each item in sort list\r\n\t_sortItems(data, sortList){\r\n\t\tvar sorterCount = sortList.length - 1;\r\n\r\n\t\tdata.sort((a, b) => {\r\n\t\t\tvar result;\r\n\r\n\t\t\tfor(var i = sorterCount; i>= 0; i--){\r\n\t\t\t\tlet sortItem = sortList[i];\r\n\r\n\t\t\t\tresult = this._sortRow(a, b, sortItem.column, sortItem.dir, sortItem.params);\r\n\r\n\t\t\t\tif(result !== 0){\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn result;\r\n\t\t});\r\n\t}\r\n\r\n\t//process individual rows for a sort function on active data\r\n\t_sortRow(a, b, column, dir, params){\r\n\t\tvar el1Comp, el2Comp, colComp;\r\n\r\n\t\t//switch elements depending on search direction\r\n\t\tvar el1 = dir == \"asc\" ? a : b;\r\n\t\tvar el2 = dir == \"asc\" ? b : a;\r\n\r\n\t\ta = column.getFieldValue(el1.getData());\r\n\t\tb = column.getFieldValue(el2.getData());\r\n\r\n\t\ta = typeof a !== \"undefined\" ? a : \"\";\r\n\t\tb = typeof b !== \"undefined\" ? b : \"\";\r\n\r\n\t\tel1Comp = el1.getComponent();\r\n\t\tel2Comp = el2.getComponent();\r\n\r\n\t\treturn column.modules.sort.sorter.call(this, a, b, el1Comp, el2Comp, column.getComponent(), dir, params);\r\n\t}\r\n}\r\n\r\nSort.moduleName = \"sort\";\r\n\r\n//load defaults\r\nSort.sorters = defaultSorters;\r\n\r\nexport default Sort;","export default {\r\n\t//is integer\r\n\tinteger: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tvalue = Number(value);\r\n\t\treturn typeof value === 'number' && isFinite(value) && Math.floor(value) === value;\r\n\t},\r\n\r\n\t//is float\r\n\tfloat: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tvalue = Number(value);\r\n\t\treturn typeof value === 'number' && isFinite(value) && value % 1 !== 0;\r\n\t},\r\n\r\n\t//must be a number\r\n\tnumeric: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn !isNaN(value);\r\n\t},\r\n\r\n\t//must be a string\r\n\tstring: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn isNaN(value);\r\n\t},\r\n\r\n\t//maximum value\r\n\tmax: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn parseFloat(value) <= parameters;\r\n\t},\r\n\r\n\t//minimum value\r\n\tmin: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn parseFloat(value) >= parameters;\r\n\t},\r\n\r\n\t//starts with  value\r\n\tstarts: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn String(value).toLowerCase().startsWith(String(parameters).toLowerCase());\r\n\t},\r\n\r\n\t//ends with  value\r\n\tends: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn String(value).toLowerCase().endsWith(String(parameters).toLowerCase());\r\n\t},\r\n\r\n\r\n\t//minimum string length\r\n\tminLength: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn String(value).length >= parameters;\r\n\t},\r\n\r\n\t//maximum string length\r\n\tmaxLength: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn String(value).length <= parameters;\r\n\t},\r\n\r\n\t//in provided value list\r\n\tin: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif(typeof parameters == \"string\"){\r\n\t\t\tparameters = parameters.split(\"|\");\r\n\t\t}\r\n\r\n\t\treturn value === \"\" || parameters.indexOf(value) > -1;\r\n\t},\r\n\r\n\t//must match provided regex\r\n\tregex: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tvar reg = new RegExp(parameters);\r\n\r\n\t\treturn reg.test(value);\r\n\t},\r\n\r\n\t//value must be unique in this column\r\n\tunique: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tvar unique = true;\r\n\r\n\t\tvar cellData = cell.getData();\r\n\t\tvar column = cell.getColumn()._getSelf();\r\n\r\n\t\tthis.table.rowManager.rows.forEach(function(row){\r\n\t\t\tvar data = row.getData();\r\n\r\n\t\t\tif(data !== cellData){\r\n\t\t\t\tif(value == column.getFieldValue(data)){\r\n\t\t\t\t\tunique = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn unique;\r\n\t},\r\n\r\n\t//must have a value\r\n\trequired:function(cell, value, parameters){\r\n\t\treturn value !== \"\" && value !== null && typeof value !== \"undefined\";\r\n\t},\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport defaultValidators from './defaults/validators.js';\r\n\r\nclass Validate extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.invalidCells = [];\r\n\t}\r\n\r\n\t//validate\r\n\tinitializeColumn(column){\r\n\t\tvar self = this,\r\n\t\tconfig = [],\r\n\t\tvalidator;\r\n\r\n\t\tif(column.definition.validator){\r\n\r\n\t\t\tif(Array.isArray(column.definition.validator)){\r\n\t\t\t\tcolumn.definition.validator.forEach(function(item){\r\n\t\t\t\t\tvalidator = self._extractValidator(item);\r\n\r\n\t\t\t\t\tif(validator){\r\n\t\t\t\t\t\tconfig.push(validator);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t}else{\r\n\t\t\t\tvalidator = this._extractValidator(column.definition.validator);\r\n\r\n\t\t\t\tif(validator){\r\n\t\t\t\t\tconfig.push(validator);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tcolumn.modules.validate = config.length ? config : false;\r\n\t\t}\r\n\t}\r\n\r\n\t_extractValidator(value){\r\n\t\tvar type, params, pos;\r\n\r\n\t\tswitch(typeof value){\r\n\t\t\tcase \"string\":\r\n\t\t\tpos = value.indexOf(':');\r\n\r\n\t\t\tif(pos > -1){\r\n\t\t\t\ttype = value.substring(0,pos);\r\n\t\t\t\tparams = value.substring(pos+1);\r\n\t\t\t}else{\r\n\t\t\t\ttype = value;\r\n\t\t\t}\r\n\r\n\t\t\treturn this._buildValidator(type, params);\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\treturn this._buildValidator(value);\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"object\":\r\n\t\t\treturn this._buildValidator(value.type, value.parameters);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\t_buildValidator(type, params){\r\n\r\n\t\tvar func = typeof type == \"function\" ? type : Validate.validators[type];\r\n\r\n\t\tif(!func){\r\n\t\t\tconsole.warn(\"Validator Setup Error - No matching validator found:\", type);\r\n\t\t\treturn false;\r\n\t\t}else{\r\n\t\t\treturn {\r\n\t\t\t\ttype:typeof type == \"function\" ? \"function\" : type,\r\n\t\t\t\tfunc:func,\r\n\t\t\t\tparams:params,\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\tvalidate(validators, cell, value){\r\n\t\tvar self = this,\r\n\t\tvalid = [],\r\n\t\tinvalidIndex = this.invalidCells.indexOf(cell);\r\n\r\n\t\tif(validators){\r\n\t\t\tvalidators.forEach(function(item){\r\n\t\t\t\tif(!item.func.call(self, cell.getComponent(), value, item.params)){\r\n\t\t\t\t\tvalid.push({\r\n\t\t\t\t\t\ttype:item.type,\r\n\t\t\t\t\t\tparameters:item.params\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tvalid = valid.length ? valid : true;\r\n\r\n\t\tif(!cell.modules.validate){\r\n\t\t\tcell.modules.validate = {};\r\n\t\t}\r\n\r\n\t\tif(valid === true){\r\n\t\t\tcell.modules.validate.invalid = false;\r\n\t\t\tcell.getElement().classList.remove(\"tabulator-validation-fail\");\r\n\r\n\t\t\tif(invalidIndex > -1){\r\n\t\t\t\tthis.invalidCells.splice(invalidIndex, 1);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tcell.modules.validate.invalid = true;\r\n\r\n\t\t\tif(this.table.options.validationMode !== \"manual\"){\r\n\t\t\t\tcell.getElement().classList.add(\"tabulator-validation-fail\");\r\n\t\t\t}\r\n\r\n\t\t\tif(invalidIndex == -1){\r\n\t\t\t\tthis.invalidCells.push(cell);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn valid;\r\n\t}\r\n\r\n\tgetInvalidCells(){\r\n\t\tvar output = [];\r\n\r\n\t\tthis.invalidCells.forEach((cell) => {\r\n\t\t\toutput.push(cell.getComponent());\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tclearValidation(cell){\r\n\t\tvar invalidIndex;\r\n\r\n\t\tif(cell.modules.validate && cell.modules.validate.invalid){\r\n\r\n\t\t\tcell.getElement().classList.remove(\"tabulator-validation-fail\");\r\n\t\t\tcell.modules.validate.invalid = false;\r\n\r\n\t\t\tinvalidIndex = this.invalidCells.indexOf(cell);\r\n\r\n\t\t\tif(invalidIndex > -1){\r\n\t\t\t\tthis.invalidCells.splice(invalidIndex, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nValidate.moduleName = \"validate\";\r\n\r\n//load defaults\r\nValidate.validators = defaultValidators;\r\n\r\nexport default Validate;","//tabulator with all modules installed\r\nimport {default as Tabulator} from './Tabulator.js';\r\nimport * as modules from '../core/modules/optional.js';\r\nimport ModuleBinder from './ModuleBinder.js';\r\n\r\nclass TabulatorFull extends Tabulator {};\r\n\r\n//bind modules and static functionality\r\nnew ModuleBinder(TabulatorFull, modules);\r\n\r\nexport default TabulatorFull;"],"names":["height","minHeight","maxHeight","layout","layoutColumnsOnNewData","columnMinWidth","columnMaxWidth","columnHeaderVertAlign","columnVertAlign","resizableColumns","resizableRows","autoResize","columns","cellHozAlign","cellVertAlign","headerHozAlign","data","autoColumns","autoColumnsDefinitions","reactiveData","nestedFieldSeparator","tooltips","tooltipsHeader","tooltipGenerationMode","initialSort","initialFilter","initialHeaderFilter","columnHeaderSortMulti","sortOrderReverse","headerSort","headerSortTristate","headerSortElement","footerElement","index","textDirection","keybindings","tabEndNewRow","invalidOptionWarnings","clipboard","clipboardCopyStyled","clipboardCopyConfig","clipboardCopyFormatter","clipboardCopyRowRange","clipboardPasteParser","clipboardPasteAction","clipboardCopied","clipboardPasted","clipboardPasteError","downloadDataFormatter","downloadReady","blob","downloadComplete","downloadConfig","downloadRowRange","dataTree","dataTreeFilter","dataTreeSort","dataTreeElementColumn","dataTreeBranchElement","dataTreeChildIndent","dataTreeChildField","dataTreeCollapseElement","dataTreeExpandElement","dataTreeStartExpanded","dataTreeRowExpanded","dataTreeRowCollapsed","dataTreeChildColumnCalcs","dataTreeSelectPropagate","printAsHtml","printFormatter","printHeader","printFooter","printCopyStyle","printStyled","printVisibleRows","printRowRange","printConfig","addRowPos","selectable","selectableRangeMode","selectableRollingSelection","selectablePersistence","selectableCheck","row","headerFilterLiveFilterDelay","headerFilterPlaceholder","headerVisible","history","locale","langs","virtualDom","virtualDomBuffer","virtualDomHoz","persistentLayout","persistentSort","persistentFilter","persistenceID","persistenceMode","persistenceReaderFunc","persistenceWriterFunc","persistence","responsiveLayout","responsiveLayoutCollapseStartOpen","responsiveLayoutCollapseUseFormatters","responsiveLayoutCollapseFormatter","pagination","paginationSize","paginationInitialPage","paginationButtonCount","paginationSizeSelector","paginationElement","paginationDataSent","paginationDataReceived","paginationAddRow","ajaxURL","ajaxURLGenerator","ajaxParams","ajaxConfig","ajaxContentType","ajaxRequestFunc","ajaxLoader","ajaxLoaderLoading","ajaxLoaderError","ajaxFiltering","ajaxSorting","ajaxProgressiveLoad","ajaxProgressiveLoadDelay","ajaxProgressiveLoadScrollMargin","groupBy","groupStartOpen","groupValues","groupUpdateOnCellEdit","groupHeader","groupHeaderPrint","groupHeaderClipboard","groupHeaderHtmlOutput","groupHeaderDownload","htmlOutputConfig","movableColumns","movableRows","movableRowsConnectedTables","movableRowsConnectedElements","movableRowsSender","movableRowsReceiver","movableRowsSendingStart","movableRowsSent","movableRowsSentFailed","movableRowsSendingStop","movableRowsReceivingStart","movableRowsReceived","movableRowsReceivedFailed","movableRowsReceivingStop","movableRowsElementDrop","scrollToRowPosition","scrollToRowIfVisible","scrollToColumnPosition","scrollToColumnIfVisible","rowFormatter","rowFormatterPrint","rowFormatterClipboard","rowFormatterHtmlOutput","placeholder","tableBuilding","tableBuilt","renderStarted","renderComplete","rowClick","rowDblClick","rowContext","rowTap","rowDblTap","rowTapHold","rowMouseEnter","rowMouseLeave","rowMouseOver","rowMouseOut","rowMouseMove","rowContextMenu","rowClickMenu","rowAdded","rowDeleted","rowMoved","rowUpdated","rowSelectionChanged","rowSelected","rowDeselected","rowResized","cellClick","cellDblClick","cellContext","cellTap","cellDblTap","cellTapHold","cellMouseEnter","cellMouseLeave","cellMouseOver","cellMouseOut","cellMouseMove","cellEditing","cellEdited","cellEditCancelled","columnMoved","columnResized","columnTitleChanged","columnVisibilityChanged","htmlImporting","htmlImported","dataLoading","dataLoaded","dataEdited","dataChanged","ajaxRequesting","ajaxResponse","ajaxError","dataFiltering","dataFiltered","dataSorting","dataSorted","groupToggleElement","groupClosedShowCalcs","dataGrouping","dataGrouped","groupVisibilityChanged","groupClick","groupDblClick","groupContext","groupContextMenu","groupClickMenu","groupTap","groupDblTap","groupTapHold","columnCalcs","pageLoaded","localized","validationMode","validationFailed","historyUndo","historyRedo","scrollHorizontal","scrollVertical","ColumnComponent","column","_column","type","getElement","getDefinition","getField","cells","forEach","cell","push","getComponent","console","warn","visible","isGroup","show","hide","output","length","parent","Column","table","columnManager","scrollToColumn","modExists","modules","filter","setHeaderFilterFocus","reloadHeaderFilter","getHeaderFilterValue","value","setHeaderFilterValue","to","after","toColumn","findColumn","moveColumn","nextCol","nextColumn","prevCol","prevColumn","updates","updateDefinition","getWidth","width","result","reinitializeWidth","setWidth","options","vdomHoz","reinitialize","validate","CellComponent","_cell","getValue","getOldValue","initialValue","getData","mutate","setValue","setValueActual","force","edit","cancelEdit","edited","clearEdited","invalid","clearValidation","nav","checkHeight","Cell","element","oldValue","minWidth","component","loaded","build","generateElement","_configureCell","getFieldValue","document","createElement","className","setAttribute","cellEvents","field","vertAligns","top","bottom","middle","hozAligns","left","right","center","style","textAlign","hozAlign","vertAlign","display","alignItems","justifyContent","definition","cssClass","classNames","split","classList","add","addEventListener","e","_generateTooltip","_bindClickEvents","_bindTouchEvents","_bindMouseEvents","bindEditor","rowHandle","moveRow","initializeCell","call","currentCell","preventDefault","selection","range","body","createTextRange","moveToElementText","select","window","getSelection","createRange","selectNode","removeAllRanges","addRange","dblTap","tapHold","tap","passive","clearTimeout","setTimeout","val","format","formatValue","innerHTML","Node","firstChild","removeChild","appendChild","cellRendered","tooltip","containerOnly","layoutElement","changed","setValueProcessData","action","newValue","groupRows","reassignRowToGroup","rowManager","mutator","transformCell","topCalc","bottomCalc","recalc","activeRows","recalcRowGroup","block","setFieldValue","unblock","_generateContents","resizeColumns","initializeColumn","contextMenu","clickMenu","menu","frozenColumns","widthStyled","offsetWidth","minWidthStyled","maxWidth","maxWidthStyled","reinitializeHeight","heightStyled","offsetHeight","editCell","editing","getCurrentCell","_getSelf","valid","redrawBlock","parentNode","clearComponentHistory","deleteCell","calcs","self","nextCell","getCellIndex","next","nextRow","nextDisplayRow","findNextEditableCell","prev","prevRow","prevDisplayRow","findPrevEditableCell","up","down","def","contentElement","titleHolderElement","titleElement","groupElement","createGroupElement","fieldStructure","titleFormatterRendered","setField","checkDefinition","widthFixed","_mapDepricatedFunctionality","i","newCol","attachColumn","checkColumnVisibility","registerColumnField","setHandle","_buildHeader","bindModuleColumns","el","Object","keys","key","defaultOptionList","indexOf","title","_getNestedData","_getFlatData","_setNestedData","_setFlatData","registerColumnPosition","reRegisterPosition","hideInHtml","htmlOutput","align","downloadTitle","titleDownload","headerTooltip","localize","bind","headerVertical","_bindEvents","_buildColumnHeaderContent","_buildGroupHeader","_buildColumnHeader","setTooltip","headerFilter","setHeaderFilterColumnPlaceholder","config","headerClick","headerDblClick","headerContext","headerTap","headerDblTap","headerTapHold","sort","headerContextMenu","headerClickMenu","headerMenu","initializeColumnHeader","editor","validator","accessor","classeNames","setMinWidth","parseInt","setMaxWidth","_buildColumnHeaderTitle","editableTitle","stopPropagation","focus","text","_formatColumnHeaderTitle","formatter","contents","params","mockCell","onRendered","titleFormatter","getFormatter","callback","titleFormatterParams","dataObj","structure","alignment","parentHeight","getGroupElement","clientHeight","getHeadersElement","paddingTop","verticalAlign","clearVerticalAlign","rowNumColumn","getFirstColumn","getLastColumn","getTopColumn","updateBranches","colDefs","silent","responsiveToggle","_verticalAlignHeaders","save","updateColumnVisibility","matchChildWidths","childWidth","child","splice","setWidthActual","isNaN","Math","floor","clientWidth","max","min","rows","heightInitialized","offsetParent","clearCellHeight","calcHeight","setCellHeight","Promise","resolve","reject","cellCount","deregisterColumn","findColumnIndex","_nextVisibleColumn","getColumnByIndex","_prevVisibleColumn","hideHeaderFilterElements","fitToData","showHeaderFilterElements","clearWidth","assign","addColumn","then","err","defaultOptions","Helpers","box","getBoundingClientRect","pageYOffset","documentElement","clientTop","pageXOffset","clientLeft","obj","clone","Array","isArray","Date","deepClone","ColumnManager","blockHozScrollEvent","headersElement","createHeadersElement","createHeaderElement","columnsByIndex","columnsByField","scrollLeft","insertBefore","manager","hozAdjust","scrollWidth","marginLeft","cols","definitions","sorter","col","match","find","setColumns","reset","_addColumn","_reIndexColumns","initialize","redraw","before","nextToColumn","colEl","parentIndex","nextEl","nextSibling","unshift","columnRendered","getHeight","adjustTableSize","subject","HTMLElement","root","matches","fieldRoot","findIndex","active","structured","from","moveColumnActual","_moveColumnInArray","getComponents","updateRows","fromIndex","toIndex","concat","getTreeChildren","position","ifVisible","offset","adjust","offsetLeft","generateCell","totalWidth","fixedWidth","scrollHeight","colWidth","getMode","elVisible","resetScroll","update","footerManager","RowComponent","_row","transform","getCells","getCell","getRowPosition","scrollToRow","page","setPageToRow","moveToRow","updateData","normalizeHeight","selectRow","selectRows","deselectRows","toggleRow","isRowSelected","frozenRows","freezeRow","unfreezeRow","collapseRow","expandRow","getTreeParent","pos","addTreeChildRow","getGroup","Row","manualHeight","outerHeight","initialized","created","setData","create","initializeRow","generateCells","deleteCells","layoutRow","resizeRows","reinitializeRow","children","setHeight","clearHeight","transformRow","watchRow","updatedData","tempData","newRowData","JSON","parse","attrname","getColumnsByFieldRoot","redrawNeeded","refreshActiveData","findCell","allowEdit","check","prevCell","toRow","findRow","moveRowActual","getRowIndex","deleteActual","blockRedraw","detatchModules","group","removeRow","deleteRow","rowDelete","_deselectRow","detachRow","RowManager","createHolderElement","tableElement","createTableElement","heightFixer","firstRender","renderMode","fixedHeight","activeRowsCount","displayRows","displayRowsCount","scrollTop","vDomRowHeight","vDomTop","vDomBottom","vDomScrollPosTop","vDomScrollPosBottom","vDomTopPad","vDomBottomPad","vDomMaxRenderChain","vDomWindowBuffer","vDomWindowMinTotalRows","vDomWindowMinMarginRows","vDomTopNewRows","vDomBottomNewRows","redrawBlockRestoreConfig","redrawBlockRederInPosition","setRenderMode","scrollHeaders","dir","ajax","nextPage","rowIndex","getDisplayRows","rowEl","rowTop","elOffset","abs","_virtualRenderFill","offsetTop","renderInPosition","columnsChanged","_setDataActual","reRenderInPosition","generateColumnsFromRowData","_wipeElements","clear","clearSelectionData","watchData","error","wipe","allIndex","activeIndex","setActiveRows","displayRowIterator","displayIndex","regenerateRowNumbers","updateGroupRows","addRowActual","findAddRowPos","reverse","item","addRow","dispRows","getPageSize","assignRowToGroup","_moveRowInArray","posFrom","posTo","Group","toGroup","fromGroup","insertRow","start","end","styleRow","findRowIndex","rowOnly","getDisplayRowIndex","list","getRows","sorters","getSort","paginationDataSentNames","filters","getFilters","setParams","sendRequest","setPage","loadData","_genRemoteRequest","loadOrignalData","progressiveLoad","stage","skipStage","cascadeOrder","slice","resetDisplayRows","isFrozen","getDisplayIndex","setDisplayIndex","getNextDisplayIndex","setDisplayRows","setMaxRows","dataChange","renderTable","viewable","topEdge","bottomEdge","topFound","topRow","bottomRow","getVisibleRows","selectedRows","getRenderMode","topOffset","diff","_simpleRender","renderEmptyScroll","_clearVirtualDom","checkClassicModeGroupHeaderWidth","onlyGroupHeaders","paddingBottom","visibility","remove","forceMove","holder","topPad","rowsHeight","topPadHeight","heightOccupied","ceil","rowHeight","vDomScrollHeight","countGroups","topDiff","bottomDiff","margin","_addTopRow","_removeBottomRow","_removeTopRow","_addBottomRow","topRowHeight","_quickNormalizeRowHeight","bottomRowHeight","initialHeight","otherHeight","external","resizeTable","tableWidth","browser","event","createEvent","initEvent","dispatchEvent","Event","FooterManager","links","_initialize","querySelector","activate","deactivate","link","footerRedraw","TableRegistry","tables","query","results","querySelectorAll","matchElement","Tabulator","lookupTable","Module","name","fitDataLayoutOverride","colsWidth","gap","lastCol","responsive","flexWidth","flexGrowUnits","flexColWidth","flexColumns","fixedShrinkColumns","flexShrinkUnits","overflowWidth","gapFill","calcWidth","scaleColumns","freeSpace","shrinkCols","oversizeCols","oversizeSpace","remainingSpace","nextColWidth","remainingFlexGrowUnits","changeUnits","undersizeCols","calcGrow","widthGrow","calcShrink","widthShrink","fitData","fitDataFill","fitDataGeneral","fitDataTable","fitDataStretch","fitColumns","Layout","mode","modes","moduleName","defaultModes","Localize","lang","bindings","langList","headerFilters","_setLangProp","values","desiredLocale","traverseLang","trans","path","prop","navigator","language","toLowerCase","prefix","_executeBindings","pathArray","_getLangElement","level","rootPath","getText","binding","defaultLangs","Comms","selectors","connections","connection","comms","con","module","getConnections","tableComms","commsReceived","ModuleBinder","tabulator","bindStaticFuctionality","bindModules","coreModules","moduleBindings","extendModule","property","source","prototype","registerModule","mod","registerModuleBinding","findTable","mods","VirtualDomHorizontal","holderEl","leftCol","rightCol","vDomScrollPosLeft","vDomScrollPosRight","vDomPadLeft","vDomPadRight","fitDataColAvg","compatabilityCheck","frozen","ok","rtl","scroll","change","collsWidth","colEnd","getGroups","old","colPos","leftPos","rightPos","paddingLeft","paddingRight","reinitChanged","renitializeRows","addColRight","removeColLeft","addColLeft","removeColRight","oldWidth","widthDiff","colPositionAdjust","prepend","browserSlow","browserMobile","initializeElement","initializeOptions","_create","register","defaults","getComputedStyle","direction","clipboardCopyHeader","columnHeaders","empty","_clearObjectPointers","rtlCheck","tagName","htmlTableImport","parseTable","setRowManager","setColumnManager","_buildElement","_loadInitialData","_detectBrowser","setHeaderFilterPlaceholder","installLang","setLocale","span","load","setSort","setFilter","print","unwatchData","clearBindings","ua","userAgent","vendor","opera","test","substr","restoreRedraw","extensions","input","accept","file","files","reader","FileReader","readAsText","onload","onerror","click","blockActiveRequest","_setData","inPosition","setConfig","setUrl","getUrl","clearData","getDataCount","search","getHtml","printFullscreen","responses","addRows","newRows","getRowFromPosition","count","successCount","foundRows","doneCheck","a","b","fromRow","selector","copy","getDefinitionTree","parseColumns","getColumns","mergeDefinition","fromColumn","getLocale","getLang","sortList","sorterRefresh","filterRefresh","addFilter","all","getHeaderFilters","removeFilter","clearFilter","clearHeaderFilter","getSelectedRows","getSelectedData","getInvalidCells","setMaxPage","size","setPageSize","previousPage","getPage","getPageMax","groups","getGroupedData","getEditedCells","getResults","recalcAll","undo","redo","getHistoryUndoSize","getHistoryRedoSize","filename","download","receive","plugin","required","Accessor","allowedTypes","charAt","toUpperCase","lookupAccessor","accessors","rowComponent","traverse","colCompnent","defautlAccessors","method","url","includes","serializeParams","contentType","urlGenerator","contentTypeFormatters","headers","Accept","location","origin","credentials","fetch","response","json","status","statusText","stringify","generateParamsList","form","FormData","append","Ajax","loaderElement","createLoaderElement","msgElement","createMsgElement","loadingElement","errorElement","loaderPromise","loading","requestOrder","template","trim","content","defaultLoaderPromise","defaultURLGenerator","initializeProgressive","_loadDefaultConfig","defaultConfig","_loadDataProgressive","_loadDataStandard","encoded","encodeURIComponent","join","requestNo","showLoader","hideLoader","showError","shouldLoad","defaultContentTypeFormatters","replace","updateOrAddData","insert","addData","headerFindSuccess","columnMap","shift","Clipboard","pasteParser","pasteAction","customSelection","rowRange","blocked","plain","html","generateExportList","genereateHTMLTable","generatePlainContent","clipboardData","originalEvent","paste","setPasteParser","setPasteAction","rowData","getKey","internal","sel","textRange","selectNodeContents","toString","execCommand","pasteActions","parser","pasteParsers","checkPaseOrigin","getPasteData","mutateData","target","defaultPasteActions","defaultPasteParsers","CalcComponent","calcParams","precision","reduce","sum","Number","toFixed","parseFloat","String","ColumnCalcs","topCalcs","botCalcs","genColumn","topElement","botElement","botRow","topInitialized","botInitialized","topCalcParams","botCalcParams","bottomCalcParams","calculations","initializeTopRow","botCalc","initializeBottomRow","rowsToData","generateRow","recalcGroup","getRowGroup","getChildGroups","generateRowData","open","getFilteredTreeChildren","disable","enable","paramKey","getGroupResults","groupObj","subGroups","getSubGroups","subGroupResults","subgroup","defaultCalculations","DataTree","indent","collapseEl","expandEl","branchEl","elementField","startOpen","dummyEl","firstCol","getFirstVisibileColumn","tabIndex","childArray","controlEl","generateControlElement","cloneNode","marginRight","getPropertyValue","oldControl","replaceChild","getChildren","allChildren","generateChildren","subChildren","sub","childData","childRow","childIndex","findChildIndex","recurse","setFileContents","delimiter","fileContents","depth","bom","header","autoTableParams","rowGroupStyles","fontStyle","fontSize","cellPadding","fillColor","rowCalcStyles","jsPDFParams","jsPDF","orientation","unit","parseRow","styles","colSpan","rowSpan","doc","autoTable","addPageContent","head","documentProcessing","sheetName","workbook","XLSX","utils","book_new","SheetNames","Sheets","generateSheet","merges","worksheet","s","c","r","j","sheet_add_aoa","encode_range","sheetOnly","sheets","sheet","send","intercept","s2ab","buf","ArrayBuffer","view","Uint8Array","charCodeAt","write","bookType","bookSST","csv","pdf","xlsx","Download","interceptCallback","downloadFunc","buildLink","mime","triggerDownload","downloaders","_group","getRowCount","newTab","Blob","URL","createObjectURL","msSaveOrOpenBlob","defaultDownloaders","success","cancel","editorParams","cellValue","padding","boxSizing","elementAttributes","getAttribute","preventScroll","onChange","keyCode","mask","maskInput","vertNav","verticalNavigation","whiteSpace","resize","getRow","heightNow","selectionStart","stopImmediatePropagation","step","blurFunc","removeEventListener","cellEl","initialDisplayValue","defaultValue","listEl","multiselect","dataItems","currentItem","displayItems","currentItems","blurable","blockListShow","searchWord","searchWordTimeout","getUniqueColumnValues","getColumnByField","getColumn","parseItems","inputValues","curentValues","dataList","displayList","processComplexListItem","label","itemParams","setItem","sortValuesList","fillList","listItemFormatter","toggleItem","chooseItem","setCurrentItem","scrollIntoView","behavior","inline","fillInput","unsetItem","hideList","chooseItems","unsetItems","len","cancelItem","showList","removeScrollListener","scrollTovalue","char","character","fromCharCode","startsWith","cursor","readOnly","uniqueColumnValues","genUniqueColumnValues","filterList","term","intialLoad","items","searchFunc","addNotice","searchingPlaceholder","fillListIfNotEmpty","showListOnEmpty","notice","searchEl","clearList","itemList","emptyPlaceholder","current","freetext","allowEmpty","log","showInputValue","maxStars","getElementsByTagName","stars","starsHolder","star","createElementNS","starChange","buildStar","starHolder","nextStar","blur","changeValue","overflow","textOverflow","percent","handle","bar","mouseDrag","mouseDragWidth","updateValue","calcVal","round","backgroundColor","screenX","tristate","indetermValue","indeterminateValue","indetermState","marginTop","indeterminate","checked","textarea","number","autocomplete","progress","tickCross","Edit","mouseClick","recursionBlock","invalidEdit","editedCells","editable","editors","clearEditor","variableHeight","contains","button","forceEdit","focusCellNoEvent","leftEdge","rightEdge","leftMargin","rightMargin","rendered","cellEditor","checkForRestyle","focusScrollAdjust","maskLetter","maskLetterChar","maskNumber","maskNumberChar","maskWildcard","maskWildcardChar","fillSymbols","symbol","maskAutoFill","editIndex","defaultEditors","ExportRow","ExportColumn","Export","cloneTableStyle","colVisProp","headersToExportRows","generateColumnGroupHeaders","bodyToExportRows","rowLookup","genereateTableElement","columnGroups","colData","processColumnGroup","maxDepth","groupData","subGroup","subGroupData","columnVisCheck","headerDepth","exportRows","parseColumnGroup","rowGroups","exportCols","headerEl","bodyEl","lookupTableStyles","setup","treeElementField","mapElementStyles","genereateHeaderElement","genereateGroupElement","genereateCalcElement","genereateRowElement","evenRow","oddRow","calcRow","firstRow","firstGroup","getElementsByClassName","styleCells","firstCell","lastCell","generator","isVisible","cellWrapper","formatCells","formatExportValue","renderedCallback","props","lookup","fromStyle","filterVal","rowVal","filterParams","RegExp","keywords","separator","keyword","matchAll","endsWith","Filter","headerFilterColumns","prevHeaderFilterChangeCheck","filterType","tagType","attrType","filterChangeCheck","filterFunc","prevSuccess","emptyFunc","headerFilterFunc","headerFilterFuncParams","fieldVal","colVal","func","generateHeaderFilterElement","filterElement","editorElement","typingTimer","searchTrigger","headerElement","headerFilterEmptyCheck","headerFilterParams","hasAttribute","headerFilterLiveFilter","findFilter","findSubFilters","filtersToArray","undefined","searchType","filterRecurse","rowList","activeRowComponents","filterRow","subFilter","defaultFilters","formatterParams","emptyToSpace","sanitizeHTML","floatVal","integer","decimal","rgx","decimalSym","thousandSym","thousand","symbolAfter","urlPrefix","labelField","urlField","src","urlSuffix","truthy","allowTruthy","tick","tickElement","cross","crossElement","inputFormat","outputFormat","invalidPlaceholder","newDatetime","moment","isValid","timezone","tz","datetime","suffix","humanize","date","duration","starActive","starInactive","colors","color","percentValue","legendAlign","legend","legendColor","barEl","legendEl","toggleList","isOpen","checkbox","toggleSelect","isSelected","registerRowSelectCheckbox","deselectRow","registerHeaderSelectCheckbox","plaintext","money","image","datetimediff","traffic","buttonTick","buttonCross","rownum","responsiveCollapse","rowSelection","Format","lookupFormatter","formatterPrint","formatterClipboard","formatterHtmlOutput","formatters","entityMap","defaultFormatters","FrozenColumns","leftColumns","rightColumns","rightPadding","initializationMode","scrollEndTimer","edge","frozenCheck","calcMargins","layoutColumnPosition","layoutCalcRows","_calcSpace","allCells","leftParents","parentEl","getColGroupParentElement","FrozenRows","styleRows","groupManager","oldGroup","hasSubGroups","groupIDLookups","_addRowToGroup","_addRow","groupList","elementContents","arrowElement","createElements","addBindings","createValueGroups","arrow","initializeGroupHeader","allowedValues","_createGroup","toggleElement","initializeGroup","toggleVisibility","groupID","groupKey","headerGenerator","conformRowData","generateGroupHeaderContents","scrollHeader","removeGroup","noCalc","_visSet","getHeadersAndRows","hasTopCalcs","detachElement","generateTopRow","hasBottomCalcs","generateBottomRow","compoment","getPath","addBindingsd","childNodes","GroupComponent","GroupRows","langValue","removeCalcs","getRealColumns","lookupFunc","generateGroups","groupComponents","groupListData","rowCount","headerContent","pullGroupListData","oldGroups","createGroup","assignRowToExistingGroup","newGroupNeeded","oldRowGroup","oldGroupPath","newGroupPath","getExpectedPath","samePath","every","groupPath","groupId","cellEdit","rowAdd","newRow","_rebindRow","rowMove","History","undoers","redoers","oldRow","defaultUndoers","defaultRedoers","HtmlTableImport","fieldIndex","hasIndex","_extractOptions","_extractHeaders","_generateBlankHeaders","newElement","attributes","optionsArr","optionsList","attrib","_attribValue","exists","_findCol","textContent","navPrev","navNext","navUp","navDown","scrollPageUp","scrollPageDown","scrollToStart","scrollToEnd","copyToClipboard","keyBlock","newPos","scrollMax","navLeft","navRight","Keybindings","watchKeys","pressedKeys","keyupBinding","keydownBinding","mergedBindings","mapBindings","bindEvents","actions","mapBinding","symbolsList","ctrl","meta","symbols","code","checkBinding","ctrlKey","shiftKey","metaKey","defaultBindings","defaultActions","Menu","menuElements","blurEvent","hideMenu","escEvent","escMenu","nestedMenuBlock","positionReversedX","headerMenuEl","LoadMenuEvent","loadMenu","touch","MouseEvent","menuEl","itemEl","disabled","hideOldSubMenus","positionMenu","pop","docHeight","innerHeight","x","y","parentOffset","touches","pageX","pageY","MoveColumns","placeholderElement","createPlaceholderElement","hoverElement","checkTimeout","checkPeriod","moving","toCol","toColAfter","startX","autoScrollMargin","autoScrollStep","autoScrollTimeout","touchMove","moveHover","endMove","mousemove","which","startMove","bindTouchEvents","startXMove","prevColWidth","nextColWidthLast","prevColWidthLast","moveToCol","_bindMouseMove","movingCells","_unbindMouseMove","columnHolder","xPos","scrollPos","MoveRows","toRowAfter","hasHandle","startY","tableRowDropEvent","connectionSelectorsTables","connectionSelectorsElements","connectionElements","connectedTable","connectedRow","mouseup","tableRowDrop","previousSibling","startYMove","nextRowHeight","prevRowHeight","nextRowHeightLast","prevRowHeightLast","setStartPosition","connectToTables","pointerEvents","getTableElement","disconnectFromTables","moveHoverConnections","moveHoverTable","rowHolder","yPos","connectionTables","dropEvent","elementRowDrop","tabulatorElementDropEvent","sender","senders","receiver","receivers","connect","disconnect","dropComplete","fromTable","toTable","Mutator","enabled","lookupMutator","mutators","mutatorEdit","defaultMutators","Page","initialLoad","pageSizes","dataReceivedNames","dataSentNames","pagesElement","firstBut","prevBut","nextBut","lastBut","pageSizeSelect","hidden","pageSelectLabel","testElRow","testElCell","defaultDataSentNames","defaultDataReceivedNames","generatePageSizeSelectList","trigger","leftSize","rightSize","_generatePageButton","_setPageButtons","_getRemotePage","oldParams","pageParams","getParams","_parseRemoteData","last_page","footer","local","id","localStorage","getItem","cookie","cookiePos","expireDate","setDate","getDate","toUTCString","Persistence","defWatcherBlock","readFunc","writeFunc","testKey","removeItem","retreivedData","localStorageTest","readers","writers","retreiveData","getOwnPropertyDescriptor","defineProperty","set","get","oldCols","newCols","_findColumn","validateSorters","getGroupConfig","getPageConfig","excludedKeys","defStore","colDef","defaultReaders","defaultWriters","Print","manualBlock","replaceTable","cleanup","genereateTable","scrollX","scrollY","footerEl","tableEl","footerContent","scrollTo","ReactiveData","origFuncs","currentVersion","version","enumerable","configurable","args","arguments","arg","apply","getRowFromDataObject","startRow","oldRows","writable","watchKey","watchTreeChildren","childField","rebuildTree","ResizeColumns","startColumn","startWidth","prevHandle","handleDown","nearestColumn","_checkResizability","_mouseDown","prevHandleDown","colIndex","resizable","mouseMove","checkCellHeights","mouseUp","ResizeRows","startHeight","screenY","ResizeTable","observer","containerObserver","tableHeight","containerHeight","containerWidth","tableStyle","ResizeObserver","entry","nodeHeight","contentRect","nodeWidth","observe","unobserve","ResponsiveLayout","hiddenColumns","collapseFormatter","collapseStartOpen","collapseHandleColumn","formatCollapsedData","order","generateCollapsedContent","generateCollapsedRowContent","colCount","working","getFlexBaseWidth","hideColumn","showColumn","generateCollapsedRowData","mockCellComponent","titleData","valueData","node_content","titleHighlight","innerText","SelectRow","selecting","lastClickedRow","selectPrev","headerCheckboxElement","_rowSelectionChanged","endSelect","selected","_clearSelection","lastClickedRowIdx","rowIdx","fromRowIdx","toRowIdx","toggledRows","toggledRow","_selectRow","rowMatch","rowInfo","checkboxEl","childRowSelection","selectedRow","aRow","bRow","alignEmptyValues","decimalSeparator","thousandSeparator","emptyAlign","localeCompare","el1","el2","calc","d","as","bs","a1","b1","L","rx","rd","isFinite","string","time","boolean","array","alphanum","Sort","arrowEl","sorterParams","startingDir","headerSortStartingDir","newSortList","sortListActual","rowComponents","clearColumnHeaders","sortObj","findSorter","setColumnHeader","_sortItems","sorterCount","sortItem","_sortRow","el1Comp","el2Comp","defaultSorters","parameters","numeric","starts","ends","minLength","maxLength","regex","reg","unique","cellData","Validate","invalidCells","_extractValidator","substring","_buildValidator","validators","invalidIndex","defaultValidators","TabulatorFull"],"mappings":"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"}