{"version":3,"file":"tabulator.js","sources":["../../src/js/core/defaults/options.js","../../src/js/core/column/ColumnComponent.js","../../src/js/core/column/defaults/options.js","../../src/js/core/cell/CellComponent.js","../../src/js/core/cell/Cell.js","../../src/js/core/column/Column.js","../../src/js/core/Helpers.js","../../src/js/core/ColumnManager.js","../../src/js/core/row/RowComponent.js","../../src/js/core/row/Row.js","../../src/js/core/RowManager.js","../../src/js/core/FooterManager.js","../../src/js/core/TableRegistry.js","../../src/js/core/Module.js","../../src/js/modules/Layout/defaults/modes/fitData.js","../../src/js/modules/Layout/defaults/modes/fitDataGeneral.js","../../src/js/modules/Layout/defaults/modes/fitDataStretch.js","../../src/js/modules/Layout/defaults/modes/fitColumns.js","../../src/js/modules/Layout/defaults/modes.js","../../src/js/modules/Layout/Layout.js","../../src/js/modules/Localize/defaults/langs.js","../../src/js/modules/Localize/Localize.js","../../src/js/modules/Comms/Comms.js","../../src/js/core/ModuleBinder.js","../../src/js/core/renderers/VirtualDomHorizontal.js","../../src/js/core/Tabulator.js","../../src/js/modules/Accessor/defaults/accessors.js","../../src/js/modules/Accessor/Accessor.js","../../src/js/modules/Ajax/defaults/config.js","../../src/js/modules/Ajax/defaults/urlGenerator.js","../../src/js/modules/Ajax/defaults/loaderPromise.js","../../src/js/modules/Ajax/defaults/contentTypeFormatters.js","../../src/js/modules/Ajax/Ajax.js","../../src/js/modules/Clipboard/defaults/pasteActions.js","../../src/js/modules/Clipboard/defaults/pasteParsers.js","../../src/js/modules/Clipboard/Clipboard.js","../../src/js/modules/ColumnCalcs/CalcComponent.js","../../src/js/modules/ColumnCalcs/defaults/calculations.js","../../src/js/modules/ColumnCalcs/ColumnCalcs.js","../../src/js/modules/DataTree/DataTree.js","../../src/js/modules/Download/defaults/downloaders/csv.js","../../src/js/modules/Download/defaults/downloaders/json.js","../../src/js/modules/Download/defaults/downloaders/pdf.js","../../src/js/modules/Download/defaults/downloaders/xlsx.js","../../src/js/modules/Download/defaults/downloaders/html.js","../../src/js/modules/Download/defaults/downloaders.js","../../src/js/modules/Download/Download.js","../../src/js/modules/Edit/defaults/editors/input.js","../../src/js/modules/Edit/defaults/editors/textarea.js","../../src/js/modules/Edit/defaults/editors/number.js","../../src/js/modules/Edit/defaults/editors/range.js","../../src/js/modules/Edit/defaults/editors/select.js","../../src/js/modules/Edit/defaults/editors/autocomplete.js","../../src/js/modules/Edit/defaults/editors/star.js","../../src/js/modules/Edit/defaults/editors/progress.js","../../src/js/modules/Edit/defaults/editors/tickCross.js","../../src/js/modules/Edit/defaults/editors.js","../../src/js/modules/Edit/Edit.js","../../src/js/modules/Export/ExportRow.js","../../src/js/modules/Export/ExportColumn.js","../../src/js/modules/Export/Export.js","../../src/js/modules/Filter/defaults/filters.js","../../src/js/modules/Filter/Filter.js","../../src/js/modules/Format/defaults/formatters/plaintext.js","../../src/js/modules/Format/defaults/formatters/html.js","../../src/js/modules/Format/defaults/formatters/textarea.js","../../src/js/modules/Format/defaults/formatters/money.js","../../src/js/modules/Format/defaults/formatters/link.js","../../src/js/modules/Format/defaults/formatters/image.js","../../src/js/modules/Format/defaults/formatters/tickCross.js","../../src/js/modules/Format/defaults/formatters/datetime.js","../../src/js/modules/Format/defaults/formatters/datetimediff.js","../../src/js/modules/Format/defaults/formatters/lookup.js","../../src/js/modules/Format/defaults/formatters/star.js","../../src/js/modules/Format/defaults/formatters/traffic.js","../../src/js/modules/Format/defaults/formatters/progress.js","../../src/js/modules/Format/defaults/formatters/color.js","../../src/js/modules/Format/defaults/formatters/buttonTick.js","../../src/js/modules/Format/defaults/formatters/buttonCross.js","../../src/js/modules/Format/defaults/formatters/rownum.js","../../src/js/modules/Format/defaults/formatters/handle.js","../../src/js/modules/Format/defaults/formatters/responsiveCollapse.js","../../src/js/modules/Format/defaults/formatters/rowSelection.js","../../src/js/modules/Format/defaults/formatters.js","../../src/js/modules/Format/Format.js","../../src/js/modules/FrozenColumns/FrozenColumns.js","../../src/js/modules/FrozenRows/FrozenRows.js","../../src/js/modules/GroupRows/Group.js","../../src/js/modules/GroupRows/GroupRows.js","../../src/js/modules/History/defaults/undoers.js","../../src/js/modules/History/defaults/redoers.js","../../src/js/modules/History/History.js","../../src/js/modules/HtmlTableImport/HtmlTableImport.js","../../src/js/modules/Keybindings/defaults/bindings.js","../../src/js/modules/Keybindings/defaults/actions.js","../../src/js/modules/Keybindings/Keybindings.js","../../src/js/modules/Menu/Menu.js","../../src/js/modules/MoveColumns/MoveColumns.js","../../src/js/modules/MoveRows/MoveRows.js","../../src/js/modules/Mutator/defaults/mutators.js","../../src/js/modules/Mutator/Mutator.js","../../src/js/modules/Page/defaults/dataSentNames.js","../../src/js/modules/Page/defaults/dataReceivedNames.js","../../src/js/modules/Page/Page.js","../../src/js/modules/Persistence/defaults/readers.js","../../src/js/modules/Persistence/defaults/writers.js","../../src/js/modules/Persistence/Persistence.js","../../src/js/modules/Print/Print.js","../../src/js/modules/ReactiveData/ReactiveData.js","../../src/js/modules/ResizeColumns/ResizeColumns.js","../../src/js/modules/ResizeRows/ResizeRows.js","../../src/js/modules/ResizeTable/ResizeTable.js","../../src/js/modules/ResponsiveLayout/ResponsiveLayout.js","../../src/js/modules/SelectRow/SelectRow.js","../../src/js/modules/Sort/defaults/sorters/number.js","../../src/js/modules/Sort/defaults/sorters/string.js","../../src/js/modules/Sort/defaults/sorters/datetime.js","../../src/js/modules/Sort/defaults/sorters/date.js","../../src/js/modules/Sort/defaults/sorters/time.js","../../src/js/modules/Sort/defaults/sorters/boolean.js","../../src/js/modules/Sort/defaults/sorters/array.js","../../src/js/modules/Sort/defaults/sorters/exists.js","../../src/js/modules/Sort/defaults/sorters/alphanum.js","../../src/js/modules/Sort/defaults/sorters.js","../../src/js/modules/Sort/Sort.js","../../src/js/modules/Validate/defaults/validators.js","../../src/js/modules/Validate/Validate.js","../../src/js/core/TabulatorFull.js"],"sourcesContent":["export default {\r\n\theight:false, //height of tabulator\r\n\tminHeight:false, //minimum height of tabulator\r\n\tmaxHeight:false, //maximum height of tabulator\r\n\r\n\tlayout:\"fitData\", ///layout type \"fitColumns\" | \"fitData\"\r\n\tlayoutColumnsOnNewData:false, //update column widths on setData\r\n\r\n\tcolumnMinWidth:40, //minimum global width for a column\r\n\tcolumnMaxWidth:false, //minimum global width for a column\r\n\tcolumnHeaderVertAlign:\"top\", //vertical alignment of column headers\r\n\r\n\tresizableColumns:true, //resizable columns\r\n\tresizableRows:false, //resizable rows\r\n\tautoResize:true, //auto resize table\r\n\r\n\tcolumns:[],//store for colum header info\r\n\tcolumnDefaults:false, //store column default props\r\n\r\n\tcellHozAlign:\"\", //horizontal align columns\r\n\tcellVertAlign:\"\", //vertical align columns\r\n\theaderHozAlign:\"\", //horizontal header alignment\r\n\r\n\tdata:[], //default starting data\r\n\r\n\tautoColumns:false, //build columns from data row structure\r\n\tautoColumnsDefinitions:false,\r\n\r\n\treactiveData:false, //enable data reactivity\r\n\r\n\tnestedFieldSeparator:\".\", //seperatpr for nested data\r\n\r\n\ttooltips: false, //Tool tip value\r\n\ttooltipsHeader: false, //Tool tip for headers\r\n\ttooltipGenerationMode:\"load\", //when to generate tooltips\r\n\r\n\tinitialSort:false, //initial sorting criteria\r\n\tinitialFilter:false, //initial filtering criteria\r\n\tinitialHeaderFilter:false, //initial header filtering criteria\r\n\r\n\tcolumnHeaderSortMulti: true, //multiple or single column sorting\r\n\r\n\tsortOrderReverse:false, //reverse internal sort ordering\r\n\r\n\theaderSort:true, //set default global header sort\r\n\theaderSortTristate:false, //set default tristate header sorting\r\n\theaderSortElement:\"<div class='tabulator-arrow'></div>\", //header sort element\r\n\r\n\tfooterElement:false, //hold footer element\r\n\r\n\tindex:\"id\", //filed for row index\r\n\r\n\ttextDirection:\"auto\",\r\n\r\n\tkeybindings:[], //array for keybindings\r\n\r\n\ttabEndNewRow:false, //create new row when tab to end of table\r\n\r\n\tinvalidOptionWarnings:true, //allow toggling of invalid option warnings\r\n\r\n\tclipboard:false, //enable clipboard\r\n\tclipboardCopyStyled:true, //formatted table data\r\n\tclipboardCopyConfig:false, //clipboard config\r\n\tclipboardCopyFormatter:false, //DEPRICATED - REMOVE in 5.0\r\n\tclipboardCopyRowRange:\"active\", //restrict clipboard to visible rows only\r\n\tclipboardPasteParser:\"table\", //convert pasted clipboard data to rows\r\n\tclipboardPasteAction:\"insert\", //how to insert pasted data into the table\r\n\r\n\tclipboardCopied:function(){}, //data has been copied to the clipboard\r\n\tclipboardPasted:function(){}, //data has been pasted into the table\r\n\tclipboardPasteError:function(){}, //data has not successfully been pasted into the table\r\n\r\n\tdownloadReady:function(data, blob){return blob;}, //function to manipulate download data\r\n\tdownloadComplete:false, //function to manipulate download data\r\n\tdownloadConfig:{},\t//download config\r\n\tdownloadRowRange:\"active\", //restrict download to active rows only\r\n\r\n\tdataTree:false, //enable data tree\r\n\tdataTreeFilter:true, //filter child rows\r\n\tdataTreeSort:true, //sort child rows\r\n\tdataTreeElementColumn:false,\r\n\tdataTreeBranchElement: true, //show data tree branch element\r\n\tdataTreeChildIndent:9, //data tree child indent in px\r\n\tdataTreeChildField:\"_children\", //data tre column field to look for child rows\r\n\tdataTreeCollapseElement:false, //data tree row collapse element\r\n\tdataTreeExpandElement:false, //data tree row expand element\r\n\tdataTreeStartExpanded:false,\r\n\tdataTreeRowExpanded:function(){}, //row has been expanded\r\n\tdataTreeRowCollapsed:function(){}, //row has been collapsed\r\n\tdataTreeChildColumnCalcs:false, //include visible data tree rows in column calculations\r\n\tdataTreeSelectPropagate:false, //seleccting a parent row selects its children\r\n\r\n\tprintAsHtml:false, //enable print as html\r\n\tprintFormatter:false, //printing page formatter\r\n\tprintHeader:false, //page header contents\r\n\tprintFooter:false, //page footer contents\r\n\tprintStyled:true, //enable print as html styling\r\n\tprintRowRange:\"visible\", //restrict print to visible rows only\r\n\tprintConfig:{}, //print config options\r\n\r\n\taddRowPos:\"bottom\", //position to insert blank rows, top|bottom\r\n\r\n\tselectable:\"highlight\", //highlight rows on hover\r\n\tselectableRangeMode: \"drag\", //highlight rows on hover\r\n\tselectableRollingSelection:true, //roll selection once maximum number of selectable rows is reached\r\n\tselectablePersistence:true, // maintain selection when table view is updated\r\n\tselectableCheck:function(data, row){return true;}, //check wheather row is selectable\r\n\r\n\theaderFilterLiveFilterDelay: 300, //delay before updating column after user types in header filter\r\n\theaderFilterPlaceholder: false, //placeholder text to display in header filters\r\n\r\n\theaderVisible:true, //hide header\r\n\r\n\thistory:false, //enable edit history\r\n\r\n\tlocale:false, //current system language\r\n\tlangs:{},\r\n\r\n\tvirtualDom:true, //enable DOM virtualization\r\n    virtualDomBuffer:0, // set virtual DOM buffer size\r\n\tvirtualDomHoz:false, //enable horizontal DOM virtualization\r\n\r\n\tpersistence:false,\r\n\tpersistenceID:\"\", //key for persistent storage\r\n\tpersistenceMode:true, //mode for storing persistence information\r\n\tpersistenceReaderFunc:false, //function for handling persistence data reading\r\n\tpersistenceWriterFunc:false, //function for handling persistence data writing\r\n\r\n\r\n\tresponsiveLayout:false, //responsive layout flags\r\n\tresponsiveLayoutCollapseStartOpen:true, //start showing collapsed data\r\n\tresponsiveLayoutCollapseUseFormatters:true, //responsive layout collapse formatter\r\n\tresponsiveLayoutCollapseFormatter:false, //responsive layout collapse formatter\r\n\r\n\tpagination:false, //set pagination type\r\n\tpaginationSize:false, //set number of rows to a page\r\n\tpaginationInitialPage:1, //initail page to show on load\r\n\tpaginationButtonCount: 5, // set count of page button\r\n\tpaginationSizeSelector:false, //add pagination size selector element\r\n\tpaginationElement:false, //element to hold pagination numbers\r\n\tpaginationDataSent:{}, //pagination data sent to the server\r\n\tpaginationDataReceived:{}, //pagination data received from the server\r\n\tpaginationAddRow: \"page\", //add rows on table or page\r\n\r\n\tajaxURL:false, //url for ajax loading\r\n\tajaxURLGenerator:false,\r\n\tajaxParams:{}, //params for ajax loading\r\n\tajaxConfig:\"get\", //ajax request type\r\n\tajaxContentType:\"form\", //ajax request type\r\n\tajaxRequestFunc:false, //promise function\r\n\tajaxLoader:true, //show loader\r\n\tajaxLoaderLoading:false, //loader element\r\n\tajaxLoaderError:false, //loader element\r\n\tajaxFiltering:false,\r\n\tajaxSorting:false,\r\n\tajaxProgressiveLoad:false, //progressive loading\r\n\tajaxProgressiveLoadDelay:0, //delay between requests\r\n\tajaxProgressiveLoadScrollMargin:0, //margin before scroll begins\r\n\r\n\tgroupBy:false, //enable table grouping and set field to group by\r\n\tgroupStartOpen:true, //starting state of group\r\n\tgroupValues:false,\r\n\tgroupUpdateOnCellEdit:false,\r\n\r\n\tgroupHeader:false, //header generation function\r\n\tgroupHeaderPrint:null,\r\n\tgroupHeaderClipboard:null,\r\n\tgroupHeaderHtmlOutput:null,\r\n\tgroupHeaderDownload:null,\r\n\r\n\thtmlOutputConfig:false, //html outypu config\r\n\r\n\tmovableColumns:false, //enable movable columns\r\n\r\n\tmovableRows:false, //enable movable rows\r\n\tmovableRowsConnectedTables:false, //tables for movable rows to be connected to\r\n\tmovableRowsConnectedElements:false, //other elements for movable rows to be connected to\r\n\tmovableRowsSender:false,\r\n\tmovableRowsReceiver:\"insert\",\r\n\tmovableRowsSendingStart:function(){},\r\n\tmovableRowsSent:function(){},\r\n\tmovableRowsSentFailed:function(){},\r\n\tmovableRowsSendingStop:function(){},\r\n\tmovableRowsReceivingStart:function(){},\r\n\tmovableRowsReceived:function(){},\r\n\tmovableRowsReceivedFailed:function(){},\r\n\tmovableRowsReceivingStop:function(){},\r\n\tmovableRowsElementDrop:function(){},\r\n\r\n\tscrollToRowPosition:\"top\",\r\n\tscrollToRowIfVisible:true,\r\n\r\n\tscrollToColumnPosition:\"left\",\r\n\tscrollToColumnIfVisible:true,\r\n\r\n\trowFormatter:false,\r\n\trowFormatterPrint:null,\r\n\trowFormatterClipboard:null,\r\n\trowFormatterHtmlOutput:null,\r\n\r\n\tplaceholder:false,\r\n\r\n\t//table building callbacks\r\n\ttableBuilding:function(){},\r\n\ttableBuilt:function(){},\r\n\r\n\t//render callbacks\r\n\trenderStarted:function(){},\r\n\trenderComplete:function(){},\r\n\r\n\t//row callbacks\r\n\trowClick:false,\r\n\trowDblClick:false,\r\n\trowContext:false,\r\n\trowTap:false,\r\n\trowDblTap:false,\r\n\trowTapHold:false,\r\n\trowMouseEnter:false,\r\n\trowMouseLeave:false,\r\n\trowMouseOver:false,\r\n\trowMouseOut:false,\r\n\trowMouseMove:false,\r\n\trowContextMenu:false,\r\n\trowClickMenu:false,\r\n\trowAdded:function(){},\r\n\trowDeleted:function(){},\r\n\trowMoved:function(){},\r\n\trowUpdated:function(){},\r\n\trowSelectionChanged:function(){},\r\n\trowSelected:function(){},\r\n\trowDeselected:function(){},\r\n\trowResized:function(){},\r\n\r\n\t//cell callbacks\r\n\t//row callbacks\r\n\tcellClick:false,\r\n\tcellDblClick:false,\r\n\tcellContext:false,\r\n\tcellTap:false,\r\n\tcellDblTap:false,\r\n\tcellTapHold:false,\r\n\tcellMouseEnter:false,\r\n\tcellMouseLeave:false,\r\n\tcellMouseOver:false,\r\n\tcellMouseOut:false,\r\n\tcellMouseMove:false,\r\n\tcellEditing:function(){},\r\n\tcellEdited:function(){},\r\n\tcellEditCancelled:function(){},\r\n\r\n\t//column callbacks\r\n\tcolumnMoved:false,\r\n\tcolumnResized:function(){},\r\n\tcolumnTitleChanged:function(){},\r\n\tcolumnVisibilityChanged:function(){},\r\n\r\n\t//HTML iport callbacks\r\n\thtmlImporting:function(){},\r\n\thtmlImported:function(){},\r\n\r\n\t//data callbacks\r\n\tdataLoading:function(){},\r\n\tdataLoaded:function(){},\r\n\tdataChanged:false,\r\n\r\n\t//ajax callbacks\r\n\tajaxRequesting:function(){},\r\n\tajaxResponse:false,\r\n\tajaxError:function(){},\r\n\r\n\t//filtering callbacks\r\n\tdataFiltering:false,\r\n\tdataFiltered:false,\r\n\r\n\t//sorting callbacks\r\n\tdataSorting:function(){},\r\n\tdataSorted:function(){},\r\n\r\n\t//grouping callbacks\r\n\tgroupToggleElement:\"arrow\",\r\n\tgroupClosedShowCalcs:false,\r\n\tdataGrouping:function(){},\r\n\tdataGrouped:false,\r\n\tgroupVisibilityChanged:function(){},\r\n\tgroupClick:false,\r\n\tgroupDblClick:false,\r\n\tgroupContext:false,\r\n\tgroupContextMenu:false,\r\n\tgroupClickMenu:false,\r\n\tgroupTap:false,\r\n\tgroupDblTap:false,\r\n\tgroupTapHold:false,\r\n\r\n\tcolumnCalcs:true,\r\n\r\n\t//pagination callbacks\r\n\tpageLoaded:function(){},\r\n\r\n\t//localization callbacks\r\n\tlocalized:function(){},\r\n\r\n\t//validation callbacks\r\n\tvalidationMode:\"blocking\",\r\n\tvalidationFailed:function(){},\r\n\r\n\t//history callbacks\r\n\thistoryUndo:function(){},\r\n\thistoryRedo:function(){},\r\n\r\n\t//scroll callbacks\r\n\tscrollHorizontal:function(){},\r\n\tscrollVertical:function(){},\r\n};","//public column object\r\nexport default class ColumnComponent {\r\n\tconstructor (column){\r\n\t\tthis._column = column;\r\n\t\tthis.type = \"ColumnComponent\";\r\n\t}\r\n\r\n\tgetElement(){\r\n\t\treturn this._column.getElement();\r\n\t}\r\n\r\n\tgetDefinition(){\r\n\t\treturn this._column.getDefinition();\r\n\t}\r\n\r\n\tgetField(){\r\n\t\treturn this._column.getField();\r\n\t}\r\n\r\n\tgetCells(){\r\n\t\tvar cells = [];\r\n\r\n\t\tthis._column.cells.forEach(function(cell){\r\n\t\t\tcells.push(cell.getComponent());\r\n\t\t});\r\n\r\n\t\treturn cells;\r\n\t}\r\n\r\n\tisVisible(){\r\n\t\treturn this._column.visible;\r\n\t}\r\n\r\n\tshow(){\r\n\t\tif(this._column.isGroup){\r\n\t\t\tthis._column.columns.forEach(function(column){\r\n\t\t\t\tcolumn.show();\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tthis._column.show();\r\n\t\t}\r\n\t}\r\n\r\n\thide(){\r\n\t\tif(this._column.isGroup){\r\n\t\t\tthis._column.columns.forEach(function(column){\r\n\t\t\t\tcolumn.hide();\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tthis._column.hide();\r\n\t\t}\r\n\t}\r\n\r\n\ttoggle(){\r\n\t\tif(this._column.visible){\r\n\t\t\tthis.hide();\r\n\t\t}else{\r\n\t\t\tthis.show();\r\n\t\t}\r\n\t}\r\n\r\n\tdelete(){\r\n\t\treturn this._column.delete();\r\n\t}\r\n\r\n\tgetSubColumns(){\r\n\t\tvar output = [];\r\n\r\n\t\tif(this._column.columns.length){\r\n\t\t\tthis._column.columns.forEach(function(column){\r\n\t\t\t\toutput.push(column.getComponent());\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgetParentColumn(){\r\n\t\treturn this._column.parent instanceof Column ? this._column.parent.getComponent() : false;\r\n\t}\r\n\r\n\t_getSelf(){\r\n\t\treturn this._column;\r\n\t}\r\n\r\n\tscrollTo(){\r\n\t\treturn this._column.table.columnManager.scrollToColumn(this._column);\r\n\t}\r\n\r\n\tgetTable(){\r\n\t\treturn this._column.table;\r\n\t}\r\n\r\n\theaderFilterFocus(){\r\n\t\tif(this._column.table.modExists(\"filter\", true)){\r\n\t\t\tthis._column.table.modules.filter.setHeaderFilterFocus(this._column);\r\n\t\t}\r\n\t}\r\n\r\n\treloadHeaderFilter(){\r\n\t\tif(this._column.table.modExists(\"filter\", true)){\r\n\t\t\tthis._column.table.modules.filter.reloadHeaderFilter(this._column);\r\n\t\t}\r\n\t}\r\n\r\n\tgetHeaderFilterValue(){\r\n\t\tif(this._column.table.modExists(\"filter\", true)){\r\n\t\t\treturn this._column.table.modules.filter.getHeaderFilterValue(this._column);\r\n\t\t}\r\n\t}\r\n\r\n\tsetHeaderFilterValue(value){\r\n\t\tif(this._column.table.modExists(\"filter\", true)){\r\n\t\t\tthis._column.table.modules.filter.setHeaderFilterValue(this._column, value);\r\n\t\t}\r\n\t}\r\n\r\n\tmove(to, after){\r\n\t\tvar toColumn = this._column.table.columnManager.findColumn(to);\r\n\r\n\t\tif(toColumn){\r\n\t\t\tthis._column.table.columnManager.moveColumn(this._column, toColumn, after)\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Move Error - No matching column found:\", toColumn);\r\n\t\t}\r\n\t}\r\n\r\n\tgetNextColumn(){\r\n\t\tvar nextCol = this._column.nextColumn();\r\n\r\n\t\treturn nextCol ? nextCol.getComponent() : false;\r\n\t}\r\n\r\n\tgetPrevColumn(){\r\n\t\tvar prevCol = this._column.prevColumn();\r\n\r\n\t\treturn prevCol ? prevCol.getComponent() : false;\r\n\t}\r\n\r\n\tupdateDefinition(updates){\r\n\t\treturn this._column.updateDefinition(updates);\r\n\t}\r\n\r\n\tgetWidth(){\r\n\t\treturn this._column.getWidth();\r\n\t}\r\n\r\n\tsetWidth(width){\r\n\t\tvar result;\r\n\r\n\t\tif(width === true){\r\n\t\t\tresult =  this._column.reinitializeWidth(true);\r\n\t\t}else{\r\n\t\t\tresult =  this._column.setWidth(width);\r\n\t\t}\r\n\r\n\t\tif(this._column.table.options.virtualDomHoz){\r\n\t\t\tthis._column.table.vdomHoz.reinitialize(true);\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tvalidate(){\r\n\t\treturn this._column.validate();\r\n\t}\r\n}","export default [\r\n\t\"title\",\r\n\t\"field\",\r\n\t\"columns\",\r\n\t\"visible\",\r\n\t\"hozAlign\",\r\n\t\"vertAlign\",\r\n\t\"width\",\r\n\t\"minWidth\",\r\n\t\"maxWidth\",\r\n\t\"widthGrow\",\r\n\t\"widthShrink\",\r\n\t\"resizable\",\r\n\t\"frozen\",\r\n\t\"responsive\",\r\n\t\"tooltip\",\r\n\t\"cssClass\",\r\n\t\"rowHandle\",\r\n\t\"print\",\r\n\t\"htmlOutput\",\r\n\t\"sorter\",\r\n\t\"sorterParams\",\r\n\t\"formatter\",\r\n\t\"formatterParams\",\r\n\t\"variableHeight\",\r\n\t\"editable\",\r\n\t\"editor\",\r\n\t\"editorParams\",\r\n\t\"validator\",\r\n\t\"mutator\",\r\n\t\"mutatorParams\",\r\n\t\"mutatorData\",\r\n\t\"mutatorDataParams\",\r\n\t\"mutatorEdit\",\r\n\t\"mutatorEditParams\",\r\n\t\"mutatorClipboard\",\r\n\t\"mutatorClipboardParams\",\r\n\t\"accessor\",\r\n\t\"accessorParams\",\r\n\t\"accessorData\",\r\n\t\"accessorDataParams\",\r\n\t\"accessorDownload\",\r\n\t\"accessorDownloadParams\",\r\n\t\"accessorClipboard\",\r\n\t\"accessorClipboardParams\",\r\n\t\"accessorPrint\",\r\n\t\"accessorPrintParams\",\r\n\t\"accessorHtmlOutput\",\r\n\t\"accessorHtmlOutputParams\",\r\n\t\"clipboard\",\r\n\t\"download\",\r\n\t\"topCalc\",\r\n\t\"topCalcParams\",\r\n\t\"topCalcFormatter\",\r\n\t\"topCalcFormatterParams\",\r\n\t\"bottomCalc\",\r\n\t\"bottomCalcParams\",\r\n\t\"bottomCalcFormatter\",\r\n\t\"bottomCalcFormatterParams\",\r\n\t\"cellClick\",\r\n\t\"cellDblClick\",\r\n\t\"cellContext\",\r\n\t\"cellTap\",\r\n\t\"cellDblTap\",\r\n\t\"cellTapHold\",\r\n\t\"cellMouseEnter\",\r\n\t\"cellMouseLeave\",\r\n\t\"cellMouseOver\",\r\n\t\"cellMouseOut\",\r\n\t\"cellMouseMove\",\r\n\t\"cellEditing\",\r\n\t\"cellEdited\",\r\n\t\"cellEditCancelled\",\r\n\t\"headerSort\",\r\n\t\"headerSortStartingDir\",\r\n\t\"headerSortTristate\",\r\n\t\"headerClick\",\r\n\t\"headerDblClick\",\r\n\t\"headerContext\",\r\n\t\"headerTap\",\r\n\t\"headerDblTap\",\r\n\t\"headerTapHold\",\r\n\t\"headerTooltip\",\r\n\t\"headerVertical\",\r\n\t\"headerHozAlign\",\r\n\t\"editableTitle\",\r\n\t\"titleFormatter\",\r\n\t\"titleFormatterParams\",\r\n\t\"headerFilter\",\r\n\t\"headerFilterPlaceholder\",\r\n\t\"headerFilterParams\",\r\n\t\"headerFilterEmptyCheck\",\r\n\t\"headerFilterFunc\",\r\n\t\"headerFilterFuncParams\",\r\n\t\"headerFilterLiveFilter\",\r\n\t\"print\",\r\n\t\"headerContextMenu\",\r\n\t\"headerMenu\",\r\n\t\"contextMenu\",\r\n\t// \"headerClickMenu\",\r\n\t\"clickMenu\",\r\n\t\"formatterPrint\",\r\n\t\"formatterPrintParams\",\r\n\t\"formatterClipboard\",\r\n\t\"formatterClipboardParams\",\r\n\t\"formatterHtmlOutput\",\r\n\t\"formatterHtmlOutputParams\",\r\n\t\"titlePrint\",\r\n\t\"titleClipboard\",\r\n\t\"titleHtmlOutput\",\r\n\t\"titleDownload\",\r\n];","//public cell object\r\nexport default class CellComponent {\r\n\r\n\tconstructor (cell){\r\n\t\tthis._cell = cell;\r\n\t}\r\n\r\n\tgetValue(){\r\n\t\treturn this._cell.getValue();\r\n\t}\r\n\r\n\tgetOldValue(){\r\n\t\treturn this._cell.getOldValue();\r\n\t}\r\n\r\n\tgetInitialValue(){\r\n\t\treturn this._cell.initialValue;\r\n\t}\r\n\r\n\tgetElement(){\r\n\t\treturn this._cell.getElement();\r\n\t}\r\n\r\n\tgetRow(){\r\n\t\treturn this._cell.row.getComponent();\r\n\t}\r\n\r\n\tgetData(){\r\n\t\treturn this._cell.row.getData();\r\n\t}\r\n\r\n\tgetField(){\r\n\t\treturn this._cell.column.getField();\r\n\t}\r\n\r\n\tgetColumn(){\r\n\t\treturn this._cell.column.getComponent();\r\n\t}\r\n\r\n\tsetValue(value, mutate){\r\n\t\tif(typeof mutate == \"undefined\"){\r\n\t\t\tmutate = true;\r\n\t\t}\r\n\r\n\t\tthis._cell.setValue(value, mutate);\r\n\t}\r\n\r\n\trestoreOldValue(){\r\n\t\tthis._cell.setValueActual(this._cell.getOldValue());\r\n\t}\r\n\r\n\trestoreInitialValue(){\r\n\t\tthis._cell.setValueActual(this._cell.initialValue);\r\n\t}\r\n\r\n\tedit(force){\r\n\t\treturn this._cell.edit(force);\r\n\t}\r\n\r\n\tcancelEdit(){\r\n\t\tthis._cell.cancelEdit();\r\n\t}\r\n\r\n\tisEdited(){\r\n\t\treturn !! this._cell.modules.edit && this._cell.modules.edit.edited;\r\n\t}\r\n\r\n\tclearEdited(){\r\n\t\tif(this._cell.table.modExists(\"edit\", true)){\r\n\t\t\tthis._cell.table.modules.edit.clearEdited(this._cell);\r\n\t\t}\r\n\t}\r\n\r\n\tisValid(){\r\n\t\treturn this._cell.modules.validate ? !this._cell.modules.validate.invalid : true;\r\n\t}\r\n\r\n\tvalidate(){\r\n\t\treturn this._cell.validate();\r\n\t}\r\n\r\n\tclearValidation(){\r\n\t\tif(this._cell.table.modExists(\"validate\", true)){\r\n\t\t\tthis._cell.table.modules.validate.clearValidation(this._cell);\r\n\t\t}\r\n\t}\r\n\r\n\tnav(){\r\n\t\treturn this._cell.nav();\r\n\t}\r\n\r\n\tcheckHeight(){\r\n\t\tthis._cell.checkHeight();\r\n\t}\r\n\r\n\tgetTable(){\r\n\t\treturn this._cell.table;\r\n\t}\r\n\r\n\t_getSelf(){\r\n\t\treturn this._cell;\r\n\t}\r\n}","import CellComponent from './CellComponent.js';\r\n\r\nexport default class Cell {\r\n\tconstructor(column, row){\r\n\t\tthis.table = column.table;\r\n\t\tthis.column = column;\r\n\t\tthis.row = row;\r\n\t\tthis.element = null;\r\n\t\tthis.value = null;\r\n\t\tthis.initialValue;\r\n\t\tthis.oldValue = null;\r\n\t\tthis.modules = {};\r\n\r\n\t\tthis.height = null;\r\n\t\tthis.width = null;\r\n\t\tthis.minWidth = null;\r\n\r\n\t\tthis.component = null;\r\n\r\n\t\tthis.loaded = false; //track if the cell has been added to the DOM yet\r\n\r\n\t\tthis.build();\r\n\t}\r\n\r\n\t//////////////// Setup Functions /////////////////\r\n\t//generate element\r\n\tbuild(){\r\n\t\tthis.generateElement();\r\n\r\n\t\tthis.setWidth();\r\n\r\n\t\tthis._configureCell();\r\n\r\n\t\tthis.setValueActual(this.column.getFieldValue(this.row.data));\r\n\r\n\t\tthis.initialValue = this.value;\r\n\t}\r\n\r\n\tgenerateElement(){\r\n\t\tthis.element = document.createElement('div');\r\n\t\tthis.element.className = \"tabulator-cell\";\r\n\t\tthis.element.setAttribute(\"role\", \"gridcell\");\r\n\t\tthis.element = this.element;\r\n\t}\r\n\r\n\t_configureCell(){\r\n\t\tvar cellEvents = this.column.cellEvents,\r\n\t\telement = this.element,\r\n\t\tfield = this.column.getField(),\r\n\t\tvertAligns = {\r\n\t\t\ttop:\"flex-start\",\r\n\t\t\tbottom:\"flex-end\",\r\n\t\t\tmiddle:\"center\",\r\n\t\t},\r\n\t\thozAligns = {\r\n\t\t\tleft:\"flex-start\",\r\n\t\t\tright:\"flex-end\",\r\n\t\t\tcenter:\"center\",\r\n\t\t};\r\n\r\n\t\t//set text alignment\r\n\t\telement.style.textAlign = this.column.hozAlign;\r\n\r\n\t\tif(this.column.vertAlign){\r\n\t\t\telement.style.display = \"inline-flex\";\r\n\r\n\t\t\telement.style.alignItems = vertAligns[this.column.vertAlign] || \"\";\r\n\r\n\t\t\tif(this.column.hozAlign){\r\n\t\t\t\telement.style.justifyContent = hozAligns[this.column.hozAlign] || \"\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(field){\r\n\t\t\telement.setAttribute(\"tabulator-field\", field);\r\n\t\t}\r\n\r\n\t\t//add class to cell if needed\r\n\t\tif(this.column.definition.cssClass){\r\n\t\t\tvar classNames = this.column.definition.cssClass.split(\" \")\r\n\t\t\tclassNames.forEach((className) => {\r\n\t\t\t\telement.classList.add(className)\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t//update tooltip on mouse enter\r\n\t\tif (this.table.options.tooltipGenerationMode === \"hover\"){\r\n\t\t\telement.addEventListener(\"mouseenter\", (e) => {\r\n\t\t\t\tthis._generateTooltip();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis._bindClickEvents(cellEvents);\r\n\r\n\t\tthis._bindTouchEvents(cellEvents);\r\n\r\n\t\tthis._bindMouseEvents(cellEvents);\r\n\r\n\t\tif(this.column.modules.edit){\r\n\t\t\tthis.table.modules.edit.bindEditor(this);\r\n\t\t}\r\n\r\n\t\tif(this.column.definition.rowHandle && this.table.options.movableRows !== false && this.table.modExists(\"moveRow\")){\r\n\t\t\tthis.table.modules.moveRow.initializeCell(this);\r\n\t\t}\r\n\r\n\t\t//hide cell if not visible\r\n\t\tif(!this.column.visible){\r\n\t\t\tthis.hide();\r\n\t\t}\r\n\t}\r\n\r\n\t_bindClickEvents(cellEvents){\r\n\t\tvar element = this.element;\r\n\r\n\t\t//set event bindings\r\n\t\tif (cellEvents.cellClick || this.table.options.cellClick){\r\n\t\t\telement.addEventListener(\"click\", (e) => {\r\n\t\t\t\tvar component = this.getComponent();\r\n\r\n\t\t\t\tif(cellEvents.cellClick){\r\n\t\t\t\t\tcellEvents.cellClick.call(this.table, e, component);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this.table.options.cellClick){\r\n\t\t\t\t\tthis.table.options.cellClick.call(this.table, e, component);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (cellEvents.cellDblClick || this.table.options.cellDblClick){\r\n\t\t\telement.addEventListener(\"dblclick\", (e) => {\r\n\t\t\t\tvar component = this.getComponent();\r\n\r\n\t\t\t\tif(cellEvents.cellDblClick){\r\n\t\t\t\t\tcellEvents.cellDblClick.call(this.table, e, component);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this.table.options.cellDblClick){\r\n\t\t\t\t\tthis.table.options.cellDblClick.call(this.table, e, component);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\telement.addEventListener(\"dblclick\", (e) => {\r\n\t\t\t\tif(this.table.modExists(\"edit\")){\r\n\t\t\t\t\tif (this.table.modules.edit.currentCell === this){\r\n\t\t\t\t\t\treturn; //prevent instant selection of editor content\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\ttry{\r\n\t\t\t\t\tif (document.selection) { // IE\r\n\t\t\t\t\t\tvar range = document.body.createTextRange();\r\n\t\t\t\t\t\trange.moveToElementText(this.element);\r\n\t\t\t\t\t\trange.select();\r\n\t\t\t\t\t} else if (window.getSelection) {\r\n\t\t\t\t\t\tvar range = document.createRange();\r\n\t\t\t\t\t\trange.selectNode(this.element);\r\n\t\t\t\t\t\twindow.getSelection().removeAllRanges();\r\n\t\t\t\t\t\twindow.getSelection().addRange(range);\r\n\t\t\t\t\t}\r\n\t\t\t\t}catch(e){}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (cellEvents.cellContext || this.table.options.cellContext){\r\n\t\t\telement.addEventListener(\"contextmenu\", (e) => {\r\n\t\t\t\tvar component = this.getComponent();\r\n\r\n\t\t\t\tif(cellEvents.cellContext){\r\n\t\t\t\t\tcellEvents.cellContext.call(this.table, e, component);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this.table.options.cellContext){\r\n\t\t\t\t\tthis.table.options.cellContext.call(this.table, e, component);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t_bindMouseEvents(cellEvents){\r\n\t\tvar element = this.element;\r\n\r\n\t\tif (cellEvents.cellMouseEnter || this.table.options.cellMouseEnter){\r\n\t\t\telement.addEventListener(\"mouseenter\", (e) => {\r\n\t\t\t\tvar component = this.getComponent();\r\n\r\n\t\t\t\tif(cellEvents.cellMouseEnter){\r\n\t\t\t\t\tcellEvents.cellMouseEnter.call(this.table, e, component);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this.table.options.cellMouseEnter){\r\n\t\t\t\t\tthis.table.options.cellMouseEnter.call(this.table, e, component);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (cellEvents.cellMouseLeave || this.table.options.cellMouseLeave){\r\n\t\t\telement.addEventListener(\"mouseleave\", (e) => {\r\n\t\t\t\tvar component = this.getComponent();\r\n\r\n\t\t\t\tif(cellEvents.cellMouseLeave){\r\n\t\t\t\t\tcellEvents.cellMouseLeave.call(this.table, e, component);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this.table.options.cellMouseLeave){\r\n\t\t\t\t\tthis.table.options.cellMouseLeave.call(this.table, e, component);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (cellEvents.cellMouseOver || this.table.options.cellMouseOver){\r\n\t\t\telement.addEventListener(\"mouseover\", (e) => {\r\n\t\t\t\tvar component = this.getComponent();\r\n\r\n\t\t\t\tif(cellEvents.cellMouseOver){\r\n\t\t\t\t\tcellEvents.cellMouseOver.call(this.table, e, component);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this.table.options.cellMouseOver){\r\n\t\t\t\t\tthis.table.options.cellMouseOver.call(this.table, e, component);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (cellEvents.cellMouseOut || this.table.options.cellMouseOut){\r\n\t\t\telement.addEventListener(\"mouseout\", (e) => {\r\n\t\t\t\tvar component = this.getComponent();\r\n\r\n\t\t\t\tif(cellEvents.cellMouseOut){\r\n\t\t\t\t\tcellEvents.cellMouseOut.call(this.table, e, component);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this.table.options.cellMouseOut){\r\n\t\t\t\t\tthis.table.options.cellMouseOut.call(this.table, e, component);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (cellEvents.cellMouseMove || this.table.options.cellMouseMove){\r\n\t\t\telement.addEventListener(\"mousemove\", (e) => {\r\n\t\t\t\tvar component = this.getComponent();\r\n\r\n\t\t\t\tif(cellEvents.cellMouseMove){\r\n\t\t\t\t\tcellEvents.cellMouseMove.call(this.table, e, component);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this.table.options.cellMouseMove){\r\n\t\t\t\t\tthis.table.options.cellMouseMove.call(this.table, e, component);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t_bindTouchEvents(cellEvents){\r\n\t\tvar element = this.element,\r\n\t\tdblTap,\ttapHold, tap;\r\n\r\n\t\tif (cellEvents.cellTap || this.table.options.cellTap){\r\n\t\t\ttap = false;\r\n\r\n\t\t\telement.addEventListener(\"touchstart\", (e) => {\r\n\t\t\t\ttap = true;\r\n\t\t\t}, {passive: true});\r\n\r\n\t\t\telement.addEventListener(\"touchend\", (e) => {\r\n\t\t\t\tif(tap){\r\n\t\t\t\t\tvar component = this.getComponent();\r\n\r\n\t\t\t\t\tif(cellEvents.cellTap){\r\n\t\t\t\t\t\tcellEvents.cellTap.call(this.table, e, component);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(this.table.options.cellTap){\r\n\t\t\t\t\t\tthis.table.options.cellTap.call(this.table, e, component);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttap = false;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (cellEvents.cellDblTap || this.table.options.cellDblTap){\r\n\t\t\tdblTap = null;\r\n\r\n\t\t\telement.addEventListener(\"touchend\", (e) => {\r\n\t\t\t\tif(dblTap){\r\n\t\t\t\t\tclearTimeout(dblTap);\r\n\t\t\t\t\tdblTap = null;\r\n\r\n\t\t\t\t\tvar component = this.getComponent();\r\n\r\n\t\t\t\t\tif(cellEvents.cellDblTap){\r\n\t\t\t\t\t\tcellEvents.cellDblTap.call(this.table, e, component);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(this.table.options.cellDblTap){\r\n\t\t\t\t\t\tthis.table.options.cellDblTap.call(this.table, e, component);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\r\n\t\t\t\t\tdblTap = setTimeout(() => {\r\n\t\t\t\t\t\tclearTimeout(dblTap);\r\n\t\t\t\t\t\tdblTap = null;\r\n\t\t\t\t\t}, 300);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (cellEvents.cellTapHold || this.table.options.cellTapHold){\r\n\t\t\ttapHold = null;\r\n\r\n\t\t\telement.addEventListener(\"touchstart\", (e) => {\r\n\t\t\t\tclearTimeout(tapHold);\r\n\r\n\t\t\t\ttapHold = setTimeout(() => {\r\n\t\t\t\t\tclearTimeout(tapHold);\r\n\t\t\t\t\ttapHold = null;\r\n\t\t\t\t\ttap = false;\r\n\t\t\t\t\tvar component = this.getComponent();\r\n\r\n\t\t\t\t\tif(cellEvents.cellTapHold){\r\n\t\t\t\t\t\tcellEvents.cellTapHold.call(this.table, e, component);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(this.table.options.cellTapHold){\r\n\t\t\t\t\t\tthis.table.options.cellTapHold.call(this.table, e, component);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 1000);\r\n\r\n\t\t\t}, {passive: true});\r\n\r\n\t\t\telement.addEventListener(\"touchend\", (e) => {\r\n\t\t\t\tclearTimeout(tapHold);\r\n\t\t\t\ttapHold = null;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t//generate cell contents\r\n\t_generateContents(){\r\n\t\tvar val;\r\n\r\n\t\tif(this.table.modExists(\"format\")){\r\n\t\t\tval = this.table.modules.format.formatValue(this);\r\n\t\t}else{\r\n\t\t\tval = this.element.innerHTML = this.value;\r\n\t\t}\r\n\r\n\t\tswitch(typeof val){\r\n\t\t\tcase \"object\":\r\n\t\t\tif(val instanceof Node){\r\n\r\n\t\t\t\t//clear previous cell contents\r\n\t\t\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\r\n\r\n\t\t\t\tthis.element.appendChild(val);\r\n\t\t\t}else{\r\n\t\t\t\tthis.element.innerHTML = \"\";\r\n\r\n\t\t\t\tif(val != null){\r\n\t\t\t\t\tconsole.warn(\"Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", val);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t\tcase \"undefined\":\r\n\t\t\tcase \"null\":\r\n\t\t\tthis.element.innerHTML = \"\";\r\n\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\tthis.element.innerHTML = val;\r\n\t\t}\r\n\t}\r\n\r\n\tcellRendered(){\r\n\t\tif(this.table.modExists(\"format\") && this.table.modules.format.cellRendered){\r\n\t\t\tthis.table.modules.format.cellRendered(this);\r\n\t\t}\r\n\t}\r\n\r\n\t//generate tooltip text\r\n\t_generateTooltip(){\r\n\t\tvar tooltip = this.column.tooltip;\r\n\r\n\t\tif(tooltip){\r\n\t\t\tif(tooltip === true){\r\n\t\t\t\ttooltip = this.value;\r\n\t\t\t}else if(typeof(tooltip) == \"function\"){\r\n\t\t\t\ttooltip = tooltip(this.getComponent());\r\n\r\n\t\t\t\tif(tooltip === false){\r\n\t\t\t\t\ttooltip = \"\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(typeof tooltip === \"undefined\"){\r\n\t\t\t\ttooltip = \"\";\r\n\t\t\t}\r\n\r\n\t\t\tthis.element.setAttribute(\"title\", tooltip);\r\n\t\t}else{\r\n\t\t\tthis.element.setAttribute(\"title\", \"\");\r\n\t\t}\r\n\t}\r\n\r\n\t//////////////////// Getters ////////////////////\r\n\tgetElement(containerOnly){\r\n\t\tif(!this.loaded){\r\n\t\t\tthis.loaded = true;\r\n\t\t\tif(!containerOnly){\r\n\t\t\t\tthis.layoutElement();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this.element;\r\n\t}\r\n\r\n\tgetValue(){\r\n\t\treturn this.value;\r\n\t}\r\n\r\n\tgetOldValue(){\r\n\t\treturn this.oldValue;\r\n\t}\r\n\r\n\t//////////////////// Actions ////////////////////\r\n\tsetValue(value, mutate){\r\n\t\tvar changed = this.setValueProcessData(value, mutate),\r\n\t\tcomponent;\r\n\r\n\t\tif(changed){\r\n\t\t\tif(this.table.options.history && this.table.modExists(\"history\")){\r\n\t\t\t\tthis.table.modules.history.action(\"cellEdit\", this, {oldValue:this.oldValue, newValue:this.value});\r\n\t\t\t}\r\n\r\n\t\t\tcomponent = this.getComponent();\r\n\r\n\t\t\tif(this.column.cellEvents.cellEdited){\r\n\t\t\t\tthis.column.cellEvents.cellEdited.call(this.table, component);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.options.groupUpdateOnCellEdit && this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\r\n\t\t\t\tthis.table.modules.groupRows.reassignRowToGroup(this.row);\r\n\t\t\t}\r\n\r\n\t\t\tthis.cellRendered();\r\n\r\n\t\t\tthis.table.options.cellEdited.call(this.table, component);\r\n\r\n\t\t\tif(this.table.options.dataChanged){\r\n\t\t\t\tthis.table.options.dataChanged.call(this.table, this.table.rowManager.getData());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsetValueProcessData(value, mutate){\r\n\t\tvar changed = false;\r\n\r\n\t\tif(this.value != value){\r\n\r\n\t\t\tchanged = true;\r\n\r\n\t\t\tif(mutate){\r\n\t\t\t\tif(this.column.modules.mutate){\r\n\t\t\t\t\tvalue = this.table.modules.mutator.transformCell(this, value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.setValueActual(value);\r\n\r\n\t\tif(changed && this.table.modExists(\"columnCalcs\")){\r\n\t\t\tif(this.column.definition.topCalc || this.column.definition.bottomCalc){\r\n\t\t\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\r\n\r\n\t\t\t\t\tif(this.table.options.columnCalcs == \"table\" || this.table.options.columnCalcs == \"both\"){\r\n\t\t\t\t\t\tthis.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(this.table.options.columnCalcs != \"table\"){\r\n\t\t\t\t\t\tthis.table.modules.columnCalcs.recalcRowGroup(this.row);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn changed;\r\n\t}\r\n\r\n\tsetValueActual(value){\r\n\t\tthis.oldValue = this.value;\r\n\r\n\t\tthis.value = value;\r\n\r\n\t\tif(this.table.options.reactiveData && this.table.modExists(\"reactiveData\")){\r\n\t\t\tthis.table.modules.reactiveData.block();\r\n\t\t}\r\n\r\n\t\tthis.column.setFieldValue(this.row.data, value);\r\n\r\n\t\tif(this.table.options.reactiveData && this.table.modExists(\"reactiveData\")){\r\n\t\t\tthis.table.modules.reactiveData.unblock();\r\n\t\t}\r\n\r\n\t\tif(this.loaded){\r\n\t\t\tthis.layoutElement();\r\n\t\t}\r\n\t}\r\n\r\n\tlayoutElement(){\r\n\t\tthis._generateContents();\r\n\t\tthis._generateTooltip();\r\n\r\n\t\t//set resizable handles\r\n\t\tif(this.table.options.resizableColumns && this.table.modExists(\"resizeColumns\") && this.row.type === \"row\"){\r\n\t\t\tthis.table.modules.resizeColumns.initializeColumn(\"cell\", this.column, this.element);\r\n\t\t}\r\n\r\n\r\n\t\tif((this.column.definition.contextMenu || this.column.definition.clickMenu) && this.table.modExists(\"menu\")){\r\n\t\t\tthis.table.modules.menu.initializeCell(this);\r\n\t\t}\r\n\r\n\t\t//handle frozen cells\r\n\t\tif(this.table.modExists(\"frozenColumns\")){\r\n\t\t\tthis.table.modules.frozenColumns.layoutElement(this.element, this.column);\r\n\t\t}\r\n\t}\r\n\r\n\tsetWidth(){\r\n\t\tthis.width = this.column.width;\r\n\t\tthis.element.style.width = this.column.widthStyled;\r\n\t}\r\n\r\n\tclearWidth(){\r\n\t\tthis.width = \"\";\r\n\t\tthis.element.style.width = \"\";\r\n\t}\r\n\r\n\tgetWidth(){\r\n\t\treturn this.width || this.element.offsetWidth;\r\n\t}\r\n\r\n\tsetMinWidth(){\r\n\t\tthis.minWidth = this.column.minWidth;\r\n\t\tthis.element.style.minWidth = this.column.minWidthStyled;\r\n\t}\r\n\r\n\tsetMaxWidth(){\r\n\t\tthis.maxWidth = this.column.maxWidth;\r\n\t\tthis.element.style.maxWidth = this.column.maxWidthStyled;\r\n\t}\r\n\r\n\tcheckHeight(){\r\n\t\t// var height = this.element.css(\"height\");\r\n\t\tthis.row.reinitializeHeight();\r\n\t}\r\n\r\n\tclearHeight(){\r\n\t\tthis.element.style.height = \"\";\r\n\t\tthis.height = null;\r\n\t}\r\n\r\n\tsetHeight(){\r\n\t\tthis.height = this.row.height;\r\n\t\tthis.element.style.height =  this.row.heightStyled;\r\n\t}\r\n\r\n\tgetHeight(){\r\n\t\treturn this.height || this.element.offsetHeight;\r\n\t}\r\n\r\n\tshow(){\r\n\t\tthis.element.style.display = this.column.vertAlign ? \"inline-flex\" : \"\";\r\n\t}\r\n\r\n\thide(){\r\n\t\tthis.element.style.display = \"none\";\r\n\t}\r\n\r\n\tedit(force){\r\n\t\tif(this.table.modExists(\"edit\", true)){\r\n\t\t\treturn this.table.modules.edit.editCell(this, force);\r\n\t\t}\r\n\t}\r\n\r\n\tcancelEdit(){\r\n\t\tif(this.table.modExists(\"edit\", true)){\r\n\t\t\tvar editing = this.table.modules.edit.getCurrentCell();\r\n\r\n\t\t\tif(editing && editing._getSelf() === this){\r\n\t\t\t\tthis.table.modules.edit.cancelEdit();\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Cancel Editor Error - This cell is not currently being edited \");\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tvalidate(){\r\n\t\tif(this.column.modules.validate && this.table.modExists(\"validate\", true)){\r\n\t\t\tvar valid = this.table.modules.validate.validate(this.column.modules.validate, this, this.getValue());\r\n\r\n\t\t\treturn valid === true;\r\n\t\t}else{\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\r\n\tdelete(){\r\n\t\tif(!this.table.rowManager.redrawBlock && this.element.parentNode){\r\n\t\t\tthis.element.parentNode.removeChild(this.element);\r\n\t\t}\r\n\r\n\t\tif(this.modules.validate && this.modules.validate.invalid){\r\n\t\t\tthis.table.modules.validate.clearValidation(this);\r\n\t\t}\r\n\r\n\t\tif(this.modules.edit && this.modules.edit.edited){\r\n\t\t\tthis.table.modules.edit.clearEdited(this);\r\n\t\t}\r\n\r\n\t\tif(this.table.options.history){\r\n\t\t\tthis.table.modules.history.clearComponentHistory(this);\r\n\t\t}\r\n\r\n\t\tthis.element = false;\r\n\t\tthis.column.deleteCell(this);\r\n\t\tthis.row.deleteCell(this);\r\n\t\tthis.calcs = {};\r\n\t}\r\n\r\n\t//////////////// Navigation /////////////////\r\n\tnav(){\r\n\t\tvar self = this,\r\n\t\tnextCell = false,\r\n\t\tindex = this.row.getCellIndex(this);\r\n\r\n\t\treturn {\r\n\t\t\tnext:function(){\r\n\t\t\t\tvar nextCell = this.right(),\r\n\t\t\t\tnextRow;\r\n\r\n\t\t\t\tif(!nextCell){\r\n\t\t\t\t\tnextRow = self.table.rowManager.nextDisplayRow(self.row, true);\r\n\r\n\t\t\t\t\tif(nextRow){\r\n\t\t\t\t\t\tnextCell = nextRow.findNextEditableCell(-1);\r\n\r\n\t\t\t\t\t\tif(nextCell){\r\n\t\t\t\t\t\t\tnextCell.edit();\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tprev:function(){\r\n\t\t\t\tvar nextCell = this.left(),\r\n\t\t\t\tprevRow;\r\n\r\n\t\t\t\tif(!nextCell){\r\n\t\t\t\t\tprevRow = self.table.rowManager.prevDisplayRow(self.row, true);\r\n\r\n\t\t\t\t\tif(prevRow){\r\n\t\t\t\t\t\tnextCell = prevRow.findPrevEditableCell(prevRow.cells.length);\r\n\r\n\t\t\t\t\t\tif(nextCell){\r\n\t\t\t\t\t\t\tnextCell.edit();\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tleft:function(){\r\n\r\n\t\t\t\tnextCell = self.row.findPrevEditableCell(index);\r\n\r\n\t\t\t\tif(nextCell){\r\n\t\t\t\t\tnextCell.edit();\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tright:function(){\r\n\t\t\t\tnextCell = self.row.findNextEditableCell(index);\r\n\r\n\t\t\t\tif(nextCell){\r\n\t\t\t\t\tnextCell.edit();\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tup:function(){\r\n\t\t\t\tvar nextRow = self.table.rowManager.prevDisplayRow(self.row, true);\r\n\r\n\t\t\t\tif(nextRow){\r\n\t\t\t\t\tnextRow.cells[index].edit();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdown:function(){\r\n\t\t\t\tvar nextRow = self.table.rowManager.nextDisplayRow(self.row, true);\r\n\r\n\t\t\t\tif(nextRow){\r\n\t\t\t\t\tnextRow.cells[index].edit();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t};\r\n\t}\r\n\r\n\tgetIndex(){\r\n\t\tthis.row.getCellIndex(this);\r\n\t}\r\n\r\n\t//////////////// Object Generation /////////////////\r\n\tgetComponent(){\r\n\t\tif(!this.component){\r\n\t\t\tthis.component = new CellComponent(this);\r\n\t\t}\r\n\r\n\t\treturn this.component;\r\n\t}\r\n}","import ColumnComponent from './ColumnComponent.js';\r\nimport defaultOptions from './defaults/options.js';\r\n\r\nimport Cell from '../cell/Cell.js';\r\n\r\nclass Column {\r\n\r\n\tconstructor(def, parent){\r\n\t\tthis.table = parent.table;\r\n\t\tthis.definition = def; //column definition\r\n\t\tthis.parent = parent; //hold parent object\r\n\t\tthis.type = \"column\"; //type of element\r\n\t\tthis.columns = []; //child columns\r\n\t\tthis.cells = []; //cells bound to this column\r\n\t\tthis.element = this.createElement(); //column header element\r\n\t\tthis.contentElement = false;\r\n\t\tthis.titleHolderElement = false;\r\n\t\tthis.titleElement = false;\r\n\t\tthis.groupElement = this.createGroupElement(); //column group holder element\r\n\t\tthis.isGroup = false;\r\n\t\tthis.tooltip = false; //hold column tooltip\r\n\t\tthis.hozAlign = \"\"; //horizontal text alignment\r\n\t\tthis.vertAlign = \"\"; //vert text alignment\r\n\r\n\t\t//multi dimensional filed handling\r\n\t\tthis.field =\"\";\r\n\t\tthis.fieldStructure = \"\";\r\n\t\tthis.getFieldValue = \"\";\r\n\t\tthis.setFieldValue = \"\";\r\n\r\n\t\tthis.titleFormatterRendered = false;\r\n\r\n\t\tthis.mapDefinitionDefaults();\r\n\r\n\t\tthis.setField(this.definition.field);\r\n\r\n\t\tif(this.table.options.invalidOptionWarnings){\r\n\t\t\tthis.checkDefinition();\r\n\t\t}\r\n\r\n\t\tthis.modules = {}; //hold module variables;\r\n\r\n\t\tthis.cellEvents = {\r\n\t\t\tcellClick:false,\r\n\t\t\tcellDblClick:false,\r\n\t\t\tcellContext:false,\r\n\t\t\tcellTap:false,\r\n\t\t\tcellDblTap:false,\r\n\t\t\tcellTapHold:false,\r\n\t\t\tcellMouseEnter:false,\r\n\t\t\tcellMouseLeave:false,\r\n\t\t\tcellMouseOver:false,\r\n\t\t\tcellMouseOut:false,\r\n\t\t\tcellMouseMove:false,\r\n\t\t};\r\n\r\n\t\tthis.width = null; //column width\r\n\t\tthis.widthStyled = \"\"; //column width prestyled to improve render efficiency\r\n\t\tthis.maxWidth = null; //column maximum width\r\n\t\tthis.maxWidthStyled = \"\"; //column maximum prestyled to improve render efficiency\r\n\t\tthis.minWidth = null; //column minimum width\r\n\t\tthis.minWidthStyled = \"\"; //column minimum prestyled to improve render efficiency\r\n\t\tthis.widthFixed = false; //user has specified a width for this column\r\n\r\n\t\tthis.visible = true; //default visible state\r\n\r\n\t\tthis.component = null;\r\n\r\n\t\tthis._mapDepricatedFunctionality();\r\n\r\n\t\t//initialize column\r\n\t\tif(def.columns){\r\n\r\n\t\t\tthis.isGroup = true;\r\n\r\n\t\t\tdef.columns.forEach((def, i) => {\r\n\t\t\t\tvar newCol = new Column(def, this);\r\n\t\t\t\tthis.attachColumn(newCol);\r\n\t\t\t});\r\n\r\n\t\t\tthis.checkColumnVisibility();\r\n\t\t}else{\r\n\t\t\tparent.registerColumnField(this);\r\n\t\t}\r\n\r\n\t\tif(def.rowHandle && this.table.options.movableRows !== false && this.table.modExists(\"moveRow\")){\r\n\t\t\tthis.table.modules.moveRow.setHandle(true);\r\n\t\t}\r\n\r\n\t\tthis._buildHeader();\r\n\r\n\t\tthis.bindModuleColumns();\r\n\t}\r\n\r\n\tcreateElement (){\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tel.classList.add(\"tabulator-col\");\r\n\t\tel.setAttribute(\"role\", \"columnheader\");\r\n\t\tel.setAttribute(\"aria-sort\", \"none\");\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\tcreateGroupElement (){\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tel.classList.add(\"tabulator-col-group-cols\");\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\tmapDefinitionDefaults(){\r\n\t\tvar defaults = this.table.options.columnDefaults;\r\n\r\n\t\tif(defaults){\r\n\t\t\tfor(let key in defaults){\r\n\t\t\t\tif(typeof this.definition[key] === \"undefined\"){\r\n\t\t\t\t\tthis.definition[key] = defaults[key];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcheckDefinition(){\r\n\t\tObject.keys(this.definition).forEach((key) => {\r\n\t\t\tif(Column.defaultOptionList.indexOf(key) === -1){\r\n\t\t\t\tconsole.warn(\"Invalid column definition option in '\" + (this.field || this.definition.title) + \"' column:\", key)\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tsetField(field){\r\n\t\tthis.field = field;\r\n\t\tthis.fieldStructure = field ? (this.table.options.nestedFieldSeparator ? field.split(this.table.options.nestedFieldSeparator) : [field]) : [];\r\n\t\tthis.getFieldValue = this.fieldStructure.length > 1 ? this._getNestedData : this._getFlatData;\r\n\t\tthis.setFieldValue = this.fieldStructure.length > 1 ? this._setNestedData : this._setFlatData;\r\n\t}\r\n\r\n\t//register column position with column manager\r\n\tregisterColumnPosition(column){\r\n\t\tthis.parent.registerColumnPosition(column);\r\n\t}\r\n\r\n\t//register column position with column manager\r\n\tregisterColumnField(column){\r\n\t\tthis.parent.registerColumnField(column);\r\n\t}\r\n\r\n\t//trigger position registration\r\n\treRegisterPosition(){\r\n\t\tif(this.isGroup){\r\n\t\t\tthis.columns.forEach(function(column){\r\n\t\t\t\tcolumn.reRegisterPosition();\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tthis.registerColumnPosition(this);\r\n\t\t}\r\n\t}\r\n\r\n\t_mapDepricatedFunctionality(){\r\n\t\t//all previously deprecated functionality removed in the 5.0 release\r\n\t}\r\n\r\n\tsetTooltip(){\r\n\t\tvar def = this.definition;\r\n\r\n\t\t//set header tooltips\r\n\t\tvar tooltip = def.headerTooltip || def.tooltip === false  ? def.headerTooltip : this.table.options.tooltipsHeader;\r\n\r\n\t\tif(tooltip){\r\n\t\t\tif(tooltip === true){\r\n\t\t\t\tif(def.field){\r\n\t\t\t\t\tthis.table.modules.localize.bind(\"columns|\" + def.field, (value) => {\r\n\t\t\t\t\t\tthis.element.setAttribute(\"title\", value || def.title);\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.element.setAttribute(\"title\", def.title);\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tif(typeof(tooltip) == \"function\"){\r\n\t\t\t\t\ttooltip = tooltip(this.getComponent());\r\n\r\n\t\t\t\t\tif(tooltip === false){\r\n\t\t\t\t\t\ttooltip = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.element.setAttribute(\"title\", tooltip);\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\tthis.element.setAttribute(\"title\", \"\");\r\n\t\t}\r\n\t}\r\n\r\n\t//build header element\r\n\t_buildHeader(){\r\n\t\tvar def = this.definition;\r\n\r\n\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\r\n\r\n\t\tif(def.headerVertical){\r\n\t\t\tthis.element.classList.add(\"tabulator-col-vertical\");\r\n\r\n\t\t\tif(def.headerVertical === \"flip\"){\r\n\t\t\t\tthis.element.classList.add(\"tabulator-col-vertical-flip\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.contentElement = this._bindEvents();\r\n\r\n\t\tthis.contentElement = this._buildColumnHeaderContent();\r\n\r\n\t\tthis.element.appendChild(this.contentElement);\r\n\r\n\t\tif(this.isGroup){\r\n\t\t\tthis._buildGroupHeader();\r\n\t\t}else{\r\n\t\t\tthis._buildColumnHeader();\r\n\t\t}\r\n\r\n\t\tthis.setTooltip();\r\n\r\n\t\t//set resizable handles\r\n\t\tif(this.table.options.resizableColumns && this.table.modExists(\"resizeColumns\")){\r\n\t\t\tthis.table.modules.resizeColumns.initializeColumn(\"header\", this, this.element);\r\n\t\t}\r\n\r\n\t\t//set resizable handles\r\n\t\tif(def.headerFilter && this.table.modExists(\"filter\") && this.table.modExists(\"edit\")){\r\n\t\t\tif(typeof def.headerFilterPlaceholder !== \"undefined\" && def.field){\r\n\t\t\t\tthis.table.modules.localize.setHeaderFilterColumnPlaceholder(def.field, def.headerFilterPlaceholder);\r\n\t\t\t}\r\n\r\n\t\t\tthis.table.modules.filter.initializeColumn(this);\r\n\t\t}\r\n\r\n\r\n\t\t//set resizable handles\r\n\t\tif(this.table.modExists(\"frozenColumns\")){\r\n\t\t\tthis.table.modules.frozenColumns.initializeColumn(this);\r\n\t\t}\r\n\r\n\t\t//set movable column\r\n\t\tif(this.table.options.movableColumns && !this.isGroup && this.table.modExists(\"moveColumn\")){\r\n\t\t\tthis.table.modules.moveColumn.initializeColumn(this);\r\n\t\t}\r\n\r\n\t\t//set calcs column\r\n\t\tif((def.topCalc || def.bottomCalc) && this.table.modExists(\"columnCalcs\")){\r\n\t\t\tthis.table.modules.columnCalcs.initializeColumn(this);\r\n\t\t}\r\n\r\n\t\t//handle persistence\r\n\t\tif(this.table.modExists(\"persistence\") && this.table.modules.persistence.config.columns){\r\n\t\t\tthis.table.modules.persistence.initializeColumn(this);\r\n\t\t}\r\n\r\n\r\n\t\t//update header tooltip on mouse enter\r\n\t\tthis.element.addEventListener(\"mouseenter\", (e) => {\r\n\t\t\tthis.setTooltip();\r\n\t\t});\r\n\t}\r\n\r\n\t_bindEvents(){\r\n\t\tvar def = this.definition,\r\n\t\tdblTap,\ttapHold, tap;\r\n\r\n\t\t//setup header click event bindings\r\n\t\tif(typeof(def.headerClick) == \"function\"){\r\n\t\t\tthis.element.addEventListener(\"click\", (e) => {def.headerClick(e, this.getComponent());});\r\n\t\t}\r\n\r\n\t\tif(typeof(def.headerDblClick) == \"function\"){\r\n\t\t\tthis.element.addEventListener(\"dblclick\", (e) => {def.headerDblClick(e, this.getComponent());});\r\n\t\t}\r\n\r\n\t\tif(typeof(def.headerContext) == \"function\"){\r\n\t\t\tthis.element.addEventListener(\"contextmenu\", (e) => {def.headerContext(e, this.getComponent());});\r\n\t\t}\r\n\r\n\t\t//setup header tap event bindings\r\n\t\tif(typeof(def.headerTap) == \"function\"){\r\n\t\t\ttap = false;\r\n\r\n\t\t\tthis.element.addEventListener(\"touchstart\", (e) => {\r\n\t\t\t\ttap = true;\r\n\t\t\t}, {passive: true});\r\n\r\n\t\t\tthis.element.addEventListener(\"touchend\", (e) => {\r\n\t\t\t\tif(tap){\r\n\t\t\t\t\tdef.headerTap(e, this.getComponent());\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttap = false;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(typeof(def.headerDblTap) == \"function\"){\r\n\t\t\tdblTap = null;\r\n\r\n\t\t\tthis.element.addEventListener(\"touchend\", (e) => {\r\n\r\n\t\t\t\tif(dblTap){\r\n\t\t\t\t\tclearTimeout(dblTap);\r\n\t\t\t\t\tdblTap = null;\r\n\r\n\t\t\t\t\tdef.headerDblTap(e, this.getComponent());\r\n\t\t\t\t}else{\r\n\r\n\t\t\t\t\tdblTap = setTimeout(() => {\r\n\t\t\t\t\t\tclearTimeout(dblTap);\r\n\t\t\t\t\t\tdblTap = null;\r\n\t\t\t\t\t}, 300);\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(typeof(def.headerTapHold) == \"function\"){\r\n\t\t\ttapHold = null;\r\n\r\n\t\t\tthis.element.addEventListener(\"touchstart\", (e) => {\r\n\t\t\t\tclearTimeout(tapHold);\r\n\r\n\t\t\t\ttapHold = setTimeout(function(){\r\n\t\t\t\t\tclearTimeout(tapHold);\r\n\t\t\t\t\ttapHold = null;\r\n\t\t\t\t\ttap = false;\r\n\t\t\t\t\tdef.headerTapHold(e, this.getComponent());\r\n\t\t\t\t}, 1000);\r\n\r\n\t\t\t}, {passive: true});\r\n\r\n\t\t\tthis.element.addEventListener(\"touchend\", (e) => {\r\n\t\t\t\tclearTimeout(tapHold);\r\n\t\t\t\ttapHold = null;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t//store column cell click event bindings\r\n\t\tif(typeof(def.cellClick) == \"function\"){\r\n\t\t\tthis.cellEvents.cellClick = def.cellClick;\r\n\t\t}\r\n\r\n\t\tif(typeof(def.cellDblClick) == \"function\"){\r\n\t\t\tthis.cellEvents.cellDblClick = def.cellDblClick;\r\n\t\t}\r\n\r\n\t\tif(typeof(def.cellContext) == \"function\"){\r\n\t\t\tthis.cellEvents.cellContext = def.cellContext;\r\n\t\t}\r\n\r\n\t\t//store column mouse event bindings\r\n\t\tif(typeof(def.cellMouseEnter) == \"function\"){\r\n\t\t\tthis.cellEvents.cellMouseEnter = def.cellMouseEnter;\r\n\t\t}\r\n\r\n\t\tif(typeof(def.cellMouseLeave) == \"function\"){\r\n\t\t\tthis.cellEvents.cellMouseLeave = def.cellMouseLeave;\r\n\t\t}\r\n\r\n\t\tif(typeof(def.cellMouseOver) == \"function\"){\r\n\t\t\tthis.cellEvents.cellMouseOver = def.cellMouseOver;\r\n\t\t}\r\n\r\n\t\tif(typeof(def.cellMouseOut) == \"function\"){\r\n\t\t\tthis.cellEvents.cellMouseOut = def.cellMouseOut;\r\n\t\t}\r\n\r\n\t\tif(typeof(def.cellMouseMove) == \"function\"){\r\n\t\t\tthis.cellEvents.cellMouseMove = def.cellMouseMove;\r\n\t\t}\r\n\r\n\t\t//setup column cell tap event bindings\r\n\t\tif(typeof(def.cellTap) == \"function\"){\r\n\t\t\tthis.cellEvents.cellTap = def.cellTap;\r\n\t\t}\r\n\r\n\t\tif(typeof(def.cellDblTap) == \"function\"){\r\n\t\t\tthis.cellEvents.cellDblTap = def.cellDblTap;\r\n\t\t}\r\n\r\n\t\tif(typeof(def.cellTapHold) == \"function\"){\r\n\t\t\tthis.cellEvents.cellTapHold = def.cellTapHold;\r\n\t\t}\r\n\r\n\t\t//setup column cell edit callbacks\r\n\t\tif(typeof(def.cellEdited) == \"function\"){\r\n\t\t\tthis.cellEvents.cellEdited = def.cellEdited;\r\n\t\t}\r\n\r\n\t\tif(typeof(def.cellEditing) == \"function\"){\r\n\t\t\tthis.cellEvents.cellEditing = def.cellEditing;\r\n\t\t}\r\n\r\n\t\tif(typeof(def.cellEditCancelled) == \"function\"){\r\n\t\t\tthis.cellEvents.cellEditCancelled = def.cellEditCancelled;\r\n\t\t}\r\n\t}\r\n\r\n\t//build header element for header\r\n\t_buildColumnHeader(){\r\n\t\tvar def = this.definition,\r\n\t\ttable = this.table,\r\n\t\tsortable;\r\n\r\n\t\t//set column sorter\r\n\t\tif(table.modExists(\"sort\")){\r\n\t\t\ttable.modules.sort.initializeColumn(this, this.titleHolderElement);\r\n\t\t}\r\n\r\n\t\t//set column header context menu\r\n\t\tif((def.headerContextMenu || def.headerClickMenu || def.headerMenu) && table.modExists(\"menu\")){\r\n\t\t\ttable.modules.menu.initializeColumnHeader(this);\r\n\t\t}\r\n\r\n\t\t//set column formatter\r\n\t\tif(table.modExists(\"format\")){\r\n\t\t\ttable.modules.format.initializeColumn(this);\r\n\t\t}\r\n\r\n\t\t//set column editor\r\n\t\tif(typeof def.editor != \"undefined\" && table.modExists(\"edit\")){\r\n\t\t\ttable.modules.edit.initializeColumn(this);\r\n\t\t}\r\n\r\n\t\t//set colum validator\r\n\t\tif(typeof def.validator != \"undefined\" && table.modExists(\"validate\")){\r\n\t\t\ttable.modules.validate.initializeColumn(this);\r\n\t\t}\r\n\r\n\r\n\t\t//set column mutator\r\n\t\tif(table.modExists(\"mutator\")){\r\n\t\t\ttable.modules.mutator.initializeColumn(this);\r\n\t\t}\r\n\r\n\t\t//set column accessor\r\n\t\tif(table.modExists(\"accessor\")){\r\n\t\t\ttable.modules.accessor.initializeColumn(this);\r\n\t\t}\r\n\r\n\t\t//set respoviveLayout\r\n\t\tif(typeof table.options.responsiveLayout && table.modExists(\"responsiveLayout\")){\r\n\t\t\ttable.modules.responsiveLayout.initializeColumn(this);\r\n\t\t}\r\n\r\n\t\t//set column visibility\r\n\t\tif(typeof def.visible != \"undefined\"){\r\n\t\t\tif(def.visible){\r\n\t\t\t\tthis.show(true);\r\n\t\t\t}else{\r\n\t\t\t\tthis.hide(true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//asign additional css classes to column header\r\n\t\tif(def.cssClass){\r\n\t\t\tvar classeNames = def.cssClass.split(\" \");\r\n\t\t\tclasseNames.forEach((className) => {\r\n\t\t\t\tthis.element.classList.add(className);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(def.field){\r\n\t\t\tthis.element.setAttribute(\"tabulator-field\", def.field);\r\n\t\t}\r\n\r\n\t\t//set min width if present\r\n\t\tthis.setMinWidth(typeof def.minWidth == \"undefined\" ? this.table.options.columnMinWidth : parseInt(def.minWidth));\r\n\r\n\t\tif(def.maxWidth || this.table.options.columnMaxWidth){\r\n\t\t\tif(def.maxWidth !== false){\r\n\t\t\t\tthis.setMaxWidth(typeof def.maxWidth == \"undefined\" ? this.table.options.columnMaxWidth : parseInt(def.maxWidth));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.reinitializeWidth();\r\n\r\n\t\t//set tooltip if present\r\n\t\tthis.tooltip = this.definition.tooltip || this.definition.tooltip === false ? this.definition.tooltip : this.table.options.tooltips;\r\n\r\n\t\t//set orizontal text alignment\r\n\t\tthis.hozAlign = typeof(this.definition.hozAlign) == \"undefined\" ? this.table.options.cellHozAlign : this.definition.hozAlign;\r\n\t\tthis.vertAlign = typeof(this.definition.vertAlign) == \"undefined\" ? this.table.options.cellVertAlign : this.definition.vertAlign;\r\n\r\n\t\tthis.titleElement.style.textAlign = this.definition.headerHozAlign || this.table.options.headerHozAlign;\r\n\t}\r\n\r\n\t_buildColumnHeaderContent(){\r\n\t\tvar def = this.definition,\r\n\t\ttable = this.table;\r\n\r\n\t\tvar contentElement = document.createElement(\"div\");\r\n\t\tcontentElement.classList.add(\"tabulator-col-content\");\r\n\r\n\t\tthis.titleHolderElement = document.createElement(\"div\");\r\n\t\tthis.titleHolderElement.classList.add(\"tabulator-col-title-holder\");\r\n\r\n\t\tcontentElement.appendChild(this.titleHolderElement);\r\n\r\n\t\tthis.titleElement = this._buildColumnHeaderTitle();\r\n\r\n\t\tthis.titleHolderElement.appendChild(this.titleElement);\r\n\r\n\t\treturn contentElement;\r\n\t}\r\n\r\n\t//build title element of column\r\n\t_buildColumnHeaderTitle(){\r\n\t\tvar def = this.definition,\r\n\t\ttable = this.table,\r\n\t\ttitle;\r\n\r\n\t\tvar titleHolderElement = document.createElement(\"div\");\r\n\t\ttitleHolderElement.classList.add(\"tabulator-col-title\");\r\n\r\n\t\tif(def.editableTitle){\r\n\t\t\tvar titleElement = document.createElement(\"input\");\r\n\t\t\ttitleElement.classList.add(\"tabulator-title-editor\");\r\n\r\n\t\t\ttitleElement.addEventListener(\"click\", (e) => {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\ttitleElement.focus();\r\n\t\t\t});\r\n\r\n\t\t\ttitleElement.addEventListener(\"change\", () => {\r\n\t\t\t\tdef.title = titleElement.value;\r\n\t\t\t\ttable.options.columnTitleChanged.call(this.table, this.getComponent());\r\n\t\t\t});\r\n\r\n\t\t\ttitleHolderElement.appendChild(titleElement);\r\n\r\n\t\t\tif(def.field){\r\n\t\t\t\ttable.modules.localize.bind(\"columns|\" + def.field, (text) => {\r\n\t\t\t\t\ttitleElement.value = text || (def.title || \"&nbsp;\");\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\ttitleElement.value  = def.title || \"&nbsp;\";\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\tif(def.field){\r\n\t\t\t\ttable.modules.localize.bind(\"columns|\" + def.field, (text) => {\r\n\t\t\t\t\tthis._formatColumnHeaderTitle(titleHolderElement, text || (def.title || \"&nbsp;\"));\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tthis._formatColumnHeaderTitle(titleHolderElement, def.title || \"&nbsp;\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn titleHolderElement;\r\n\t}\r\n\r\n\t_formatColumnHeaderTitle(el, title){\r\n\t\tvar formatter, contents, params, mockCell, onRendered;\r\n\r\n\t\tif(this.definition.titleFormatter && this.table.modExists(\"format\")){\r\n\r\n\t\t\tformatter = this.table.modules.format.getFormatter(this.definition.titleFormatter);\r\n\r\n\t\t\tonRendered = (callback) => {\r\n\t\t\t\tthis.titleFormatterRendered = callback;\r\n\t\t\t};\r\n\r\n\t\t\tmockCell = {\r\n\t\t\t\tgetValue:function(){\r\n\t\t\t\t\treturn title;\r\n\t\t\t\t},\r\n\t\t\t\tgetElement:function(){\r\n\t\t\t\t\treturn el;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tparams = this.definition.titleFormatterParams || {};\r\n\r\n\t\t\tparams = typeof params === \"function\" ? params() : params;\r\n\r\n\t\t\tcontents = formatter.call(this.table.modules.format, mockCell, params, onRendered);\r\n\r\n\t\t\tswitch(typeof contents){\r\n\t\t\t\tcase \"object\":\r\n\t\t\t\tif(contents instanceof Node){\r\n\t\t\t\t\tel.appendChild(contents);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tel.innerHTML = \"\";\r\n\t\t\t\t\tconsole.warn(\"Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", contents);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase \"undefined\":\r\n\t\t\t\tcase \"null\":\r\n\t\t\t\tel.innerHTML = \"\";\r\n\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\tel.innerHTML = contents;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tel.innerHTML = title;\r\n\t\t}\r\n\t}\r\n\r\n\t//build header element for column group\r\n\t_buildGroupHeader(){\r\n\t\tthis.element.classList.add(\"tabulator-col-group\");\r\n\t\tthis.element.setAttribute(\"role\", \"columngroup\");\r\n\t\tthis.element.setAttribute(\"aria-title\", this.definition.title);\r\n\r\n\t\t//asign additional css classes to column header\r\n\t\tif(this.definition.cssClass){\r\n\t\t\tvar classeNames = this.definition.cssClass.split(\" \");\r\n\t\t\tclasseNames.forEach((className) => {\r\n\t\t\t\tthis.element.classList.add(className);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t//set column header context menu\r\n\t\tif ((this.definition.headerContextMenu || this.definition.headerMenu) && this.table.modExists(\"menu\")) {\r\n\t\t\tthis.table.modules.menu.initializeColumnHeader(this);\r\n\t\t}\r\n\r\n\t\tthis.titleElement.style.textAlign = this.definition.headerHozAlign || this.table.options.headerHozAlign;\r\n\r\n\t\tthis.element.appendChild(this.groupElement);\r\n\t}\r\n\r\n\t//flat field lookup\r\n\t_getFlatData(data){\r\n\t\treturn data[this.field];\r\n\t}\r\n\r\n\t//nested field lookup\r\n\t_getNestedData(data){\r\n\t\tvar dataObj = data,\r\n\t\tstructure = this.fieldStructure,\r\n\t\tlength = structure.length,\r\n\t\toutput;\r\n\r\n\t\tfor(let i = 0; i < length; i++){\r\n\r\n\t\t\tdataObj = dataObj[structure[i]];\r\n\r\n\t\t\toutput = dataObj;\r\n\r\n\t\t\tif(!dataObj){\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\t//flat field set\r\n\t_setFlatData(data, value){\r\n\t\tif(this.field){\r\n\t\t\tdata[this.field] = value;\r\n\t\t}\r\n\t}\r\n\r\n\t//nested field set\r\n\t_setNestedData(data, value){\r\n\t\tvar dataObj = data,\r\n\t\tstructure = this.fieldStructure,\r\n\t\tlength = structure.length;\r\n\r\n\t\tfor(let i = 0; i < length; i++){\r\n\r\n\t\t\tif(i == length -1){\r\n\t\t\t\tdataObj[structure[i]] = value;\r\n\t\t\t}else{\r\n\t\t\t\tif(!dataObj[structure[i]]){\r\n\t\t\t\t\tif(typeof value !== \"undefined\"){\r\n\t\t\t\t\t\tdataObj[structure[i]] = {};\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdataObj = dataObj[structure[i]];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//attach column to this group\r\n\tattachColumn(column){\r\n\t\tif(this.groupElement){\r\n\t\t\tthis.columns.push(column);\r\n\t\t\tthis.groupElement.appendChild(column.getElement());\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Column Warning - Column being attached to another column instead of column group\");\r\n\t\t}\r\n\t}\r\n\r\n\t//vertically align header in column\r\n\tverticalAlign(alignment, height){\r\n\r\n\t\t//calculate height of column header and group holder element\r\n\t\tvar parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : (height || this.parent.getHeadersElement().clientHeight);\r\n\t\t// var parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : this.parent.getHeadersElement().clientHeight;\r\n\r\n\t\tthis.element.style.height = parentHeight + \"px\";\r\n\r\n\t\tif(this.isGroup){\r\n\t\t\tthis.groupElement.style.minHeight = (parentHeight - this.contentElement.offsetHeight) + \"px\";\r\n\t\t}\r\n\r\n\t\t//vertically align cell contents\r\n\t\tif(!this.isGroup && alignment !== \"top\"){\r\n\t\t\tif(alignment === \"bottom\"){\r\n\t\t\t\tthis.element.style.paddingTop = (this.element.clientHeight - this.contentElement.offsetHeight) + \"px\";\r\n\t\t\t}else{\r\n\t\t\t\tthis.element.style.paddingTop = ((this.element.clientHeight - this.contentElement.offsetHeight) / 2) + \"px\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.columns.forEach(function(column){\r\n\t\t\tcolumn.verticalAlign(alignment);\r\n\t\t});\r\n\t}\r\n\r\n\t//clear vertical alignmenet\r\n\tclearVerticalAlign(){\r\n\t\tthis.element.style.paddingTop = \"\";\r\n\t\tthis.element.style.height = \"\";\r\n\t\tthis.element.style.minHeight = \"\";\r\n\t\tthis.groupElement.style.minHeight = \"\";\r\n\r\n\t\tthis.columns.forEach(function(column){\r\n\t\t\tcolumn.clearVerticalAlign();\r\n\t\t});\r\n\t}\r\n\r\n\tbindModuleColumns (){\r\n\t\t//check if rownum formatter is being used on a column\r\n\t\tif(this.definition.formatter == \"rownum\"){\r\n\t\t\tthis.table.rowManager.rowNumColumn = this;\r\n\t\t}\r\n\t}\r\n\r\n\t//// Retreive Column Information ////\r\n\t//return column header element\r\n\tgetElement(){\r\n\t\treturn this.element;\r\n\t}\r\n\r\n\t//return colunm group element\r\n\tgetGroupElement(){\r\n\t\treturn this.groupElement;\r\n\t}\r\n\r\n\t//return field name\r\n\tgetField(){\r\n\t\treturn this.field;\r\n\t}\r\n\r\n\t//return the first column in a group\r\n\tgetFirstColumn(){\r\n\t\tif(!this.isGroup){\r\n\t\t\treturn this;\r\n\t\t}else{\r\n\t\t\tif(this.columns.length){\r\n\t\t\t\treturn this.columns[0].getFirstColumn();\r\n\t\t\t}else{\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//return the last column in a group\r\n\tgetLastColumn(){\r\n\t\tif(!this.isGroup){\r\n\t\t\treturn this;\r\n\t\t}else{\r\n\t\t\tif(this.columns.length){\r\n\t\t\t\treturn this.columns[this.columns.length -1].getLastColumn();\r\n\t\t\t}else{\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//return all columns in a group\r\n\tgetColumns(){\r\n\t\treturn this.columns;\r\n\t}\r\n\r\n\t//return all columns in a group\r\n\tgetCells(){\r\n\t\treturn this.cells;\r\n\t}\r\n\r\n\t//retreive the top column in a group of columns\r\n\tgetTopColumn(){\r\n\t\tif(this.parent.isGroup){\r\n\t\t\treturn this.parent.getTopColumn();\r\n\t\t}else{\r\n\t\t\treturn this;\r\n\t\t}\r\n\t}\r\n\r\n\t//return column definition object\r\n\tgetDefinition(updateBranches){\r\n\t\tvar colDefs = [];\r\n\r\n\t\tif(this.isGroup && updateBranches){\r\n\t\t\tthis.columns.forEach(function(column){\r\n\t\t\t\tcolDefs.push(column.getDefinition(true));\r\n\t\t\t});\r\n\r\n\t\t\tthis.definition.columns = colDefs;\r\n\t\t}\r\n\r\n\t\treturn this.definition;\r\n\t}\r\n\r\n\t//////////////////// Actions ////////////////////\r\n\tcheckColumnVisibility(){\r\n\t\tvar visible = false;\r\n\r\n\t\tthis.columns.forEach(function(column){\r\n\t\t\tif(column.visible){\r\n\t\t\t\tvisible = true;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(visible){\r\n\t\t\tthis.show();\r\n\t\t\tthis.parent.table.options.columnVisibilityChanged.call(this.table, this.getComponent(), false);\r\n\t\t}else{\r\n\t\t\tthis.hide();\r\n\t\t}\r\n\t}\r\n\r\n\t//show column\r\n\tshow(silent, responsiveToggle){\r\n\t\tif(!this.visible){\r\n\t\t\tthis.visible = true;\r\n\r\n\t\t\tthis.element.style.display = \"\";\r\n\r\n\t\t\tif(this.parent.isGroup){\r\n\t\t\t\tthis.parent.checkColumnVisibility();\r\n\t\t\t}\r\n\r\n\t\t\tthis.cells.forEach(function(cell){\r\n\t\t\t\tcell.show();\r\n\t\t\t});\r\n\r\n\t\t\tif(!this.isGroup && this.width === null){\r\n\t\t\t\tthis.reinitializeWidth();\r\n\t\t\t}\r\n\r\n\t\t\tthis.table.columnManager._verticalAlignHeaders();\r\n\r\n\t\t\tif(this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.columns){\r\n\t\t\t\tthis.table.modules.persistence.save(\"columns\");\r\n\t\t\t}\r\n\r\n\t\t\tif(!responsiveToggle && this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\r\n\t\t\t\tthis.table.modules.responsiveLayout.updateColumnVisibility(this, this.visible);\r\n\t\t\t}\r\n\r\n\t\t\tif(!silent){\r\n\t\t\t\tthis.table.options.columnVisibilityChanged.call(this.table, this.getComponent(), true);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.parent.isGroup){\r\n\t\t\t\tthis.parent.matchChildWidths();\r\n\t\t\t}\r\n\r\n\t\t\tif(!this.silent && this.table.options.virtualDomHoz){\r\n\t\t\t\tthis.table.vdomHoz.reinitialize();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//hide column\r\n\thide(silent, responsiveToggle){\r\n\t\tif(this.visible){\r\n\t\t\tthis.visible = false;\r\n\r\n\t\t\tthis.element.style.display = \"none\";\r\n\r\n\t\t\tthis.table.columnManager._verticalAlignHeaders();\r\n\r\n\t\t\tif(this.parent.isGroup){\r\n\t\t\t\tthis.parent.checkColumnVisibility();\r\n\t\t\t}\r\n\r\n\t\t\tthis.cells.forEach(function(cell){\r\n\t\t\t\tcell.hide();\r\n\t\t\t});\r\n\r\n\t\t\tif(this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.columns){\r\n\t\t\t\tthis.table.modules.persistence.save(\"columns\");\r\n\t\t\t}\r\n\r\n\t\t\tif(!responsiveToggle && this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\r\n\t\t\t\tthis.table.modules.responsiveLayout.updateColumnVisibility(this, this.visible);\r\n\t\t\t}\r\n\r\n\t\t\tif(!silent){\r\n\t\t\t\tthis.table.options.columnVisibilityChanged.call(this.table, this.getComponent(), false);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.parent.isGroup){\r\n\t\t\t\tthis.parent.matchChildWidths();\r\n\t\t\t}\r\n\r\n\t\t\tif(!this.silent && this.table.options.virtualDomHoz){\r\n\t\t\t\tthis.table.vdomHoz.reinitialize();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tmatchChildWidths(){\r\n\t\tvar childWidth = 0;\r\n\r\n\t\tif(this.contentElement && this.columns.length){\r\n\t\t\tthis.columns.forEach(function(column){\r\n\t\t\t\tif(column.visible){\r\n\t\t\t\t\tchildWidth += column.getWidth();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.contentElement.style.maxWidth = (childWidth - 1) + \"px\";\r\n\r\n\t\t\tif(this.parent.isGroup){\r\n\t\t\t\tthis.parent.matchChildWidths();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tremoveChild(child){\r\n\t\tvar index = this.columns.indexOf(child);\r\n\r\n\t\tif(index > -1){\r\n\t\t\tthis.columns.splice(index, 1);\r\n\t\t}\r\n\r\n\t\tif(!this.columns.length){\r\n\t\t\tthis.delete();\r\n\t\t}\r\n\t}\r\n\r\n\tsetWidth(width){\r\n\t\tthis.widthFixed = true;\r\n\t\tthis.setWidthActual(width);\r\n\t}\r\n\r\n\tsetWidthActual(width){\r\n\t\tif(isNaN(width)){\r\n\t\t\twidth = Math.floor((this.table.element.clientWidth/100) * parseInt(width));\r\n\t\t}\r\n\r\n\t\twidth = Math.max(this.minWidth, width);\r\n\r\n\t\tif(this.maxWidth){\r\n\t\t\twidth = Math.min(this.maxWidth, width);\r\n\t\t}\r\n\r\n\t\tthis.width = width;\r\n\t\tthis.widthStyled = width ? width + \"px\" : \"\";\r\n\r\n\t\tthis.element.style.width = this.widthStyled;\r\n\r\n\t\tif(!this.isGroup){\r\n\t\t\tthis.cells.forEach(function(cell){\r\n\t\t\t\tcell.setWidth();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(this.parent.isGroup){\r\n\t\t\tthis.parent.matchChildWidths();\r\n\t\t}\r\n\r\n\t\t//set resizable handles\r\n\t\tif(this.table.modExists(\"frozenColumns\")){\r\n\t\t\tthis.table.modules.frozenColumns.layout();\r\n\t\t}\r\n\t}\r\n\r\n\tcheckCellHeights(){\r\n\t\tvar rows = [];\r\n\r\n\t\tthis.cells.forEach(function(cell){\r\n\t\t\tif(cell.row.heightInitialized){\r\n\t\t\t\tif(cell.row.getElement().offsetParent !== null){\r\n\t\t\t\t\trows.push(cell.row);\r\n\t\t\t\t\tcell.row.clearCellHeight();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcell.row.heightInitialized = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\trows.forEach(function(row){\r\n\t\t\trow.calcHeight();\r\n\t\t});\r\n\r\n\t\trows.forEach(function(row){\r\n\t\t\trow.setCellHeight();\r\n\t\t});\r\n\t}\r\n\r\n\tgetWidth(){\r\n\t\tvar width = 0;\r\n\r\n\t\tif(this.isGroup){\r\n\t\t\tthis.columns.forEach(function(column){\r\n\t\t\t\tif(column.visible){\r\n\t\t\t\t\twidth += column.getWidth();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\twidth = this.width;\r\n\t\t}\r\n\r\n\t\treturn width;\r\n\t}\r\n\r\n\tgetHeight(){\r\n\t\treturn this.element.offsetHeight;\r\n\t}\r\n\r\n\tsetMinWidth(minWidth){\r\n\t\tthis.minWidth = minWidth;\r\n\t\tthis.minWidthStyled = minWidth ? minWidth + \"px\" : \"\";\r\n\r\n\t\tthis.element.style.minWidth = this.minWidthStyled;\r\n\r\n\t\tthis.cells.forEach(function(cell){\r\n\t\t\tcell.setMinWidth();\r\n\t\t});\r\n\t}\r\n\r\n\tsetMaxWidth(maxWidth){\r\n\t\tthis.maxWidth = maxWidth;\r\n\t\tthis.maxWidthStyled = maxWidth ? maxWidth + \"px\" : \"\";\r\n\r\n\t\tthis.element.style.maxWidth = this.maxWidthStyled;\r\n\r\n\t\tthis.cells.forEach(function(cell){\r\n\t\t\tcell.setMaxWidth();\r\n\t\t});\r\n\t}\r\n\r\n\tdelete(){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tvar index;\r\n\r\n\t\t\tif(this.isGroup){\r\n\t\t\t\tthis.columns.forEach(function(column){\r\n\t\t\t\t\tcolumn.delete();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t//cancel edit if column is currently being edited\r\n\t\t\tif(this.table.modExists(\"edit\")){\r\n\t\t\t\tif(this.table.modules.edit.currentCell.column === this){\r\n\t\t\t\t\tthis.table.modules.edit.cancelEdit();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar cellCount = this.cells.length;\r\n\r\n\t\t\tfor(let i = 0; i < cellCount; i++){\r\n\t\t\t\tthis.cells[0].delete();\r\n\t\t\t}\r\n\r\n\t\t\tif(this.element.parentNode){\r\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\r\n\t\t\t}\r\n\r\n\t\t\tthis.element = false;\r\n\t\t\tthis.contentElement = false;\r\n\t\t\tthis.titleElement = false;\r\n\t\t\tthis.groupElement = false;\r\n\r\n\t\t\tif(this.parent.isGroup){\r\n\t\t\t\tthis.parent.removeChild(this);\r\n\t\t\t}\r\n\r\n\t\t\tthis.table.columnManager.deregisterColumn(this);\r\n\r\n\t\t\tif(this.table.options.virtualDomHoz){\r\n\t\t\t\tthis.table.vdomHoz.reinitialize(true);\r\n\t\t\t}\r\n\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\r\n\tcolumnRendered(){\r\n\t\tif(this.titleFormatterRendered){\r\n\t\t\tthis.titleFormatterRendered();\r\n\t\t}\r\n\t}\r\n\r\n\tvalidate(){\r\n\t\tvar invalid = [];\r\n\r\n\t\tthis.cells.forEach(function(cell){\r\n\t\t\tif(!cell.validate()){\r\n\t\t\t\tinvalid.push(cell.getComponent());\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn invalid.length ? invalid : true;\r\n\t}\r\n\r\n\t//////////////// Cell Management /////////////////\r\n\t//generate cell for this column\r\n\tgenerateCell(row){\r\n\t\tvar cell = new Cell(this, row);\r\n\r\n\t\tthis.cells.push(cell);\r\n\r\n\t\treturn cell;\r\n\t}\r\n\r\n\tnextColumn(){\r\n\t\tvar index = this.table.columnManager.findColumnIndex(this);\r\n\t\treturn index > -1 ? this._nextVisibleColumn(index + 1) : false;\r\n\t}\r\n\r\n\t_nextVisibleColumn(index){\r\n\t\tvar column = this.table.columnManager.getColumnByIndex(index);\r\n\t\treturn !column || column.visible ? column : this._nextVisibleColumn(index + 1);\r\n\t}\r\n\r\n\tprevColumn(){\r\n\t\tvar index = this.table.columnManager.findColumnIndex(this);\r\n\t\treturn index > -1 ? this._prevVisibleColumn(index - 1) : false;\r\n\t}\r\n\r\n\t_prevVisibleColumn(index){\r\n\t\tvar column = this.table.columnManager.getColumnByIndex(index);\r\n\t\treturn !column || column.visible ? column : this._prevVisibleColumn(index - 1);\r\n\t}\r\n\r\n\treinitializeWidth(force){\r\n\t\tthis.widthFixed = false;\r\n\r\n\t\t//set width if present\r\n\t\tif(typeof this.definition.width !== \"undefined\" && !force){\r\n\t\t\tthis.setWidth(this.definition.width);\r\n\t\t}\r\n\r\n\t\t//hide header filters to prevent them altering column width\r\n\t\tif(this.table.modExists(\"filter\")){\r\n\t\t\tthis.table.modules.filter.hideHeaderFilterElements();\r\n\t\t}\r\n\r\n\t\tthis.fitToData();\r\n\r\n\t\t//show header filters again after layout is complete\r\n\t\tif(this.table.modExists(\"filter\")){\r\n\t\t\tthis.table.modules.filter.showHeaderFilterElements();\r\n\t\t}\r\n\t}\r\n\r\n\t//set column width to maximum cell width\r\n\tfitToData(){\r\n\t\tif(!this.widthFixed){\r\n\t\t\tthis.element.style.width = \"\";\r\n\r\n\t\t\tthis.cells.forEach((cell) => {\r\n\t\t\t\tcell.clearWidth();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tvar maxWidth = this.element.offsetWidth;\r\n\r\n\t\tif(!this.width || !this.widthFixed){\r\n\t\t\tthis.cells.forEach((cell) => {\r\n\t\t\t\tvar width = cell.getWidth();\r\n\r\n\t\t\t\tif(width > maxWidth){\r\n\t\t\t\t\tmaxWidth = width;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(maxWidth){\r\n\t\t\t\tthis.setWidthActual(maxWidth + 1);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tupdateDefinition(updates){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tvar definition;\r\n\r\n\t\t\tif(!this.isGroup){\r\n\t\t\t\tif(!this.parent.isGroup){\r\n\t\t\t\t\tdefinition = Object.assign({}, this.getDefinition());\r\n\t\t\t\t\tdefinition = Object.assign(definition, updates);\r\n\r\n\t\t\t\t\tthis.table.columnManager.addColumn(definition, false, this)\r\n\t\t\t\t\t.then((column) => {\r\n\r\n\t\t\t\t\t\tif(definition.field == this.field){\r\n\t\t\t\t\t\t\tthis.field = false; //cleair field name to prevent deletion of duplicate column from arrays\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis.delete()\r\n\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\tresolve(column.getComponent());\r\n\t\t\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\t\t\treject(err);\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\t\treject(err);\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Column Update Error - The updateDefinition function is only available on ungrouped columns\");\r\n\t\t\t\t\treject(\"Column Update Error - The updateDefinition function is only available on columns, not column groups\");\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Column Update Error - The updateDefinition function is only available on ungrouped columns\");\r\n\t\t\t\treject(\"Column Update Error - The updateDefinition function is only available on columns, not column groups\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tdeleteCell(cell){\r\n\t\tvar index = this.cells.indexOf(cell);\r\n\r\n\t\tif(index > -1){\r\n\t\t\tthis.cells.splice(index, 1);\r\n\t\t}\r\n\t}\r\n\r\n\t//////////////// Object Generation /////////////////\r\n\tgetComponent(){\r\n\t\tif(!this.component){\r\n\t\t\tthis.component = new ColumnComponent(this);\r\n\t\t}\r\n\r\n\t\treturn this.component;\r\n\t}\r\n}\r\n\r\nColumn.defaultOptionList = defaultOptions;\r\n\r\nexport default Column;","export default class Helpers{\r\n\r\n\tstatic elVisible(el){\r\n\t\treturn !(el.offsetWidth <= 0 && el.offsetHeight <= 0);\r\n\t}\r\n\r\n\tstatic elOffset(el){\r\n\t\tvar box = el.getBoundingClientRect();\r\n\r\n\t\treturn {\r\n\t\t\ttop: box.top + window.pageYOffset - document.documentElement.clientTop,\r\n\t\t\tleft: box.left + window.pageXOffset - document.documentElement.clientLeft\r\n\t\t};\r\n\t}\r\n\r\n\tstatic deepClone(obj){\r\n\t\tvar clone = Object.assign(Array.isArray(obj) ? [] : {}, obj);\r\n\r\n\t\tfor(var i in obj) {\r\n\t\t\tif(obj[i] != null && typeof(obj[i])  === \"object\"){\r\n\t\t\t\tif (obj[i] instanceof Date) {\r\n\t\t\t\t\tclone[i] = new Date(obj[i]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tclone[i] = this.deepClone(obj[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn clone;\r\n\t}\r\n}","import Column from './column/Column.js';\r\nimport Helpers from './Helpers.js';\r\n\r\nexport default class ColumnManager {\r\n\r\n\tconstructor (table){\r\n\t\tthis.table = table; //hold parent table\r\n\t\tthis.blockHozScrollEvent = false;\r\n\t\tthis.headersElement = this.createHeadersElement();\r\n\t\tthis.element = this.createHeaderElement(); //containing element\r\n\t\tthis.rowManager = null; //hold row manager object\r\n\t\tthis.columns = []; // column definition object\r\n\t\tthis.columnsByIndex = []; //columns by index\r\n\t\tthis.columnsByField = {}; //columns by field\r\n\t\tthis.scrollLeft = 0;\r\n\r\n\t\tthis.element.insertBefore(this.headersElement, this.element.firstChild);\r\n\t}\r\n\r\n\t////////////// Setup Functions /////////////////\r\n\r\n\tcreateHeadersElement (){\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tel.classList.add(\"tabulator-headers\");\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\tcreateHeaderElement (){\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tel.classList.add(\"tabulator-header\");\r\n\r\n\t\tif(!this.table.options.headerVisible){\r\n\t\t\tel.classList.add(\"tabulator-header-hidden\");\r\n\t\t}\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\tinitialize (){\r\n\t\t//scroll body along with header\r\n\t\t// this.element.addEventListener(\"scroll\", (e) => {\r\n\t\t// \tif(!this.blockHozScrollEvent){\r\n\t\t// \t\tthis.table.rowManager.scrollHorizontal(this.element.scrollLeft);\r\n\t\t// \t}\r\n\t\t// });\r\n\t}\r\n\r\n\t//link to row manager\r\n\tsetRowManager(manager){\r\n\t\tthis.rowManager = manager;\r\n\t}\r\n\r\n\t//return containing element\r\n\tgetElement(){\r\n\t\treturn this.element;\r\n\t}\r\n\r\n\t//return header containing element\r\n\tgetHeadersElement(){\r\n\t\treturn this.headersElement;\r\n\t}\r\n\r\n\t//scroll horizontally to match table body\r\n\tscrollHorizontal(left){\r\n\t\tvar hozAdjust = 0,\r\n\t\tscrollWidth = this.element.scrollWidth - this.table.element.clientWidth;\r\n\r\n\t\t// this.tempScrollBlock();\r\n\t\tthis.element.scrollLeft = left;\r\n\r\n\t\t//adjust for vertical scrollbar moving table when present\r\n\t\tif(left > scrollWidth){\r\n\t\t\thozAdjust = left - scrollWidth;\r\n\t\t\tthis.element.style.marginLeft = (-(hozAdjust)) + \"px\";\r\n\t\t}else{\r\n\t\t\tthis.element.style.marginLeft = 0;\r\n\t\t}\r\n\r\n\t\t//keep frozen columns fixed in position\r\n\t\t//this._calcFrozenColumnsPos(hozAdjust + 3);\r\n\r\n\t\tthis.scrollLeft = left;\r\n\r\n\t\tif(this.table.modExists(\"frozenColumns\")){\r\n\t\t\tthis.table.modules.frozenColumns.scrollHorizontal();\r\n\t\t}\r\n\t}\r\n\r\n\t///////////// Column Setup Functions /////////////\r\n\tgenerateColumnsFromRowData(data){\r\n\t\tvar cols = [],\r\n\t\tdefinitions = this.table.options.autoColumnsDefinitions,\r\n\t\trow, sorter;\r\n\r\n\t\tif(data && data.length){\r\n\r\n\t\t\trow = data[0];\r\n\r\n\t\t\tfor(var key in row){\r\n\t\t\t\tlet col = {\r\n\t\t\t\t\tfield:key,\r\n\t\t\t\t\ttitle:key,\r\n\t\t\t\t};\r\n\r\n\t\t\t\tlet value = row[key];\r\n\r\n\t\t\t\tswitch(typeof value){\r\n\t\t\t\t\tcase \"undefined\":\r\n\t\t\t\t\tsorter = \"string\";\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase \"boolean\":\r\n\t\t\t\t\tsorter = \"boolean\";\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase \"object\":\r\n\t\t\t\t\tif(Array.isArray(value)){\r\n\t\t\t\t\t\tsorter = \"array\";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tsorter = \"string\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\tif(!isNaN(value) && value !== \"\"){\r\n\t\t\t\t\t\tsorter = \"number\";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)){\r\n\t\t\t\t\t\t\tsorter = \"alphanum\";\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tsorter = \"string\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcol.sorter = sorter;\r\n\r\n\t\t\t\tcols.push(col);\r\n\t\t\t}\r\n\r\n\t\t\tif(definitions){\r\n\r\n\t\t\t\tswitch(typeof definitions){\r\n\t\t\t\t\tcase \"function\":\r\n\t\t\t\t\t\tthis.table.options.columns = definitions.call(this.table, cols);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase \"object\":\r\n\t\t\t\t\t\tif(Array.isArray(definitions)){\r\n\t\t\t\t\t\t\tcols.forEach((col) => {\r\n\t\t\t\t\t\t\t\tvar match = definitions.find((def) => {\r\n\t\t\t\t\t\t\t\t\treturn def.field === col.field;\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\tif(match){\r\n\t\t\t\t\t\t\t\t\tObject.assign(col, match);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tcols.forEach((col) => {\r\n\t\t\t\t\t\t\t\tif(definitions[col.field]){\r\n\t\t\t\t\t\t\t\t\tObject.assign(col, definitions[col.field]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis.table.options.columns = cols;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.table.options.columns = cols;\r\n\t\t\t}\r\n\r\n\t\t\tthis.setColumns(this.table.options.columns);\r\n\t\t}\r\n\t}\r\n\r\n\tsetColumns(cols, row){\r\n\t\twhile(this.headersElement.firstChild) this.headersElement.removeChild(this.headersElement.firstChild);\r\n\r\n\t\tthis.columns = [];\r\n\t\tthis.columnsByIndex = [];\r\n\t\tthis.columnsByField = {};\r\n\r\n\t\t//reset frozen columns\r\n\t\tif(this.table.modExists(\"frozenColumns\")){\r\n\t\t\tthis.table.modules.frozenColumns.reset();\r\n\t\t}\r\n\r\n\t\tcols.forEach((def, i) => {\r\n\t\t\tthis._addColumn(def);\r\n\t\t});\r\n\r\n\t\tthis._reIndexColumns();\r\n\r\n\t\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\r\n\t\t\tthis.table.modules.responsiveLayout.initialize();\r\n\t\t}\r\n\r\n\t\tif(this.table.options.virtualDomHoz){\r\n\t\t\tthis.table.vdomHoz.reinitialize(false, true);\r\n\t\t}\r\n\r\n\t\tthis.redraw(true);\r\n\t}\r\n\r\n\t_addColumn(definition, before, nextToColumn){\r\n\t\tvar column = new Column(definition, this),\r\n\t\tcolEl = column.getElement(),\r\n\t\tindex = nextToColumn ? this.findColumnIndex(nextToColumn) : nextToColumn;\r\n\r\n\t\tif(nextToColumn && index > -1){\r\n\r\n\t\t\tvar parentIndex = this.columns.indexOf(nextToColumn.getTopColumn());\r\n\t\t\tvar nextEl = nextToColumn.getElement();\r\n\r\n\t\t\tif(before){\r\n\t\t\t\tthis.columns.splice(parentIndex, 0, column);\r\n\t\t\t\tnextEl.parentNode.insertBefore(colEl, nextEl);\r\n\t\t\t}else{\r\n\t\t\t\tthis.columns.splice(parentIndex + 1, 0, column);\r\n\t\t\t\tnextEl.parentNode.insertBefore(colEl, nextEl.nextSibling);\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\tif(before){\r\n\t\t\t\tthis.columns.unshift(column);\r\n\t\t\t\tthis.headersElement.insertBefore(column.getElement(), this.headersElement.firstChild);\r\n\t\t\t}else{\r\n\t\t\t\tthis.columns.push(column);\r\n\t\t\t\tthis.headersElement.appendChild(column.getElement());\r\n\t\t\t}\r\n\r\n\t\t\tcolumn.columnRendered();\r\n\t\t}\r\n\r\n\t\treturn column;\r\n\t}\r\n\r\n\tregisterColumnField(col){\r\n\t\tif(col.definition.field){\r\n\t\t\tthis.columnsByField[col.definition.field] = col;\r\n\t\t}\r\n\t}\r\n\r\n\tregisterColumnPosition(col){\r\n\t\tthis.columnsByIndex.push(col);\r\n\t}\r\n\r\n\t_reIndexColumns(){\r\n\t\tthis.columnsByIndex = [];\r\n\r\n\t\tthis.columns.forEach(function(column){\r\n\t\t\tcolumn.reRegisterPosition();\r\n\t\t});\r\n\t}\r\n\r\n\t//ensure column headers take up the correct amount of space in column groups\r\n\t_verticalAlignHeaders(){\r\n\t\tvar minHeight = 0;\r\n\r\n\t\tthis.columns.forEach((column) => {\r\n\t\t\tvar height;\r\n\r\n\t\t\tcolumn.clearVerticalAlign();\r\n\r\n\t\t\theight = column.getHeight();\r\n\r\n\t\t\tif(height > minHeight){\r\n\t\t\t\tminHeight = height;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.columns.forEach((column) => {\r\n\t\t\tcolumn.verticalAlign(this.table.options.columnHeaderVertAlign, minHeight);\r\n\t\t});\r\n\r\n\t\tthis.rowManager.adjustTableSize();\r\n\t}\r\n\r\n\t//////////////// Column Details /////////////////\r\n\tfindColumn(subject){\r\n\t\tif(typeof subject == \"object\"){\r\n\r\n\t\t\tif(subject instanceof Column){\r\n\t\t\t\t//subject is column element\r\n\t\t\t\treturn subject;\r\n\t\t\t}else if(subject instanceof ColumnComponent){\r\n\t\t\t\t//subject is public column component\r\n\t\t\t\treturn subject._getSelf() || false;\r\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement){\r\n\t\t\t\t//subject is a HTML element of the column header\r\n\t\t\t\tlet match = this.columns.find((column) => {\r\n\t\t\t\t\treturn column.element === subject;\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn match || false;\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\t//subject should be treated as the field name of the column\r\n\t\t\treturn this.columnsByField[subject] || false;\r\n\t\t}\r\n\r\n\t\t//catch all for any other type of input\r\n\t\treturn false;\r\n\t}\r\n\r\n\tgetColumnByField(field){\r\n\t\treturn this.columnsByField[field];\r\n\t}\r\n\r\n\tgetColumnsByFieldRoot(root){\r\n\t\tvar matches = [];\r\n\r\n\t\tObject.keys(this.columnsByField).forEach((field) => {\r\n\t\t\tvar fieldRoot = field.split(\".\")[0];\r\n\t\t\tif(fieldRoot === root){\r\n\t\t\t\tmatches.push(this.columnsByField[field]);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn matches;\r\n\t}\r\n\r\n\tgetColumnByIndex(index){\r\n\t\treturn this.columnsByIndex[index];\r\n\t}\r\n\r\n\tgetFirstVisibileColumn(index){\r\n\t\tvar index = this.columnsByIndex.findIndex((col) => {\r\n\t\t\treturn col.visible;\r\n\t\t});\r\n\r\n\t\treturn index > -1 ? this.columnsByIndex[index] : false;\r\n\t}\r\n\r\n\tgetColumns(){\r\n\t\treturn this.columns;\r\n\t}\r\n\r\n\tfindColumnIndex(column){\r\n\t\treturn this.columnsByIndex.findIndex((col) => {\r\n\t\t\treturn column === col;\r\n\t\t});\r\n\t}\r\n\r\n\t//return all columns that are not groups\r\n\tgetRealColumns(){\r\n\t\treturn this.columnsByIndex;\r\n\t}\r\n\r\n\t//travers across columns and call action\r\n\ttraverse(callback){\r\n\t\tthis.columnsByIndex.forEach((column,i) =>{\r\n\t\t\tcallback(column, i);\r\n\t\t});\r\n\t}\r\n\r\n\t//get defintions of actual columns\r\n\tgetDefinitions(active){\r\n\t\tvar output = [];\r\n\r\n\t\tthis.columnsByIndex.forEach((column) => {\r\n\t\t\tif(!active || (active && column.visible)){\r\n\t\t\t\toutput.push(column.getDefinition());\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\t//get full nested definition tree\r\n\tgetDefinitionTree(){\r\n\t\tvar output = [];\r\n\r\n\t\tthis.columns.forEach((column) => {\r\n\t\t\toutput.push(column.getDefinition(true));\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgetComponents(structured){\r\n\t\tvar output = [],\r\n\t\tcolumns = structured ? this.columns : this.columnsByIndex;\r\n\r\n\t\tcolumns.forEach((column) => {\r\n\t\t\toutput.push(column.getComponent());\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgetWidth(){\r\n\t\tvar width = 0;\r\n\r\n\t\tthis.columnsByIndex.forEach((column) => {\r\n\t\t\tif(column.visible){\r\n\t\t\t\twidth += column.getWidth();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn width;\r\n\t}\r\n\r\n\tmoveColumn(from, to, after){\r\n\t\tthis.moveColumnActual(from, to, after);\r\n\r\n\t\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\r\n\t\t\tthis.table.modules.responsiveLayout.initialize();\r\n\t\t}\r\n\r\n\t\tif(this.table.modExists(\"columnCalcs\")){\r\n\t\t\tthis.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\r\n\t\t}\r\n\r\n\t\tto.element.parentNode.insertBefore(from.element, to.element);\r\n\r\n\t\tif(after){\r\n\t\t\tto.element.parentNode.insertBefore(to.element, from.element);\r\n\t\t}\r\n\r\n\t\tthis._verticalAlignHeaders();\r\n\r\n\t\tthis.table.rowManager.reinitialize();\r\n\t}\r\n\r\n\tmoveColumnActual(from, to, after){\r\n\r\n\t\tif(from.parent.isGroup){\r\n\t\t\tthis._moveColumnInArray(from.parent.columns, from, to, after);\r\n\t\t}else{\r\n\t\t\tthis._moveColumnInArray(this.columns, from, to, after);\r\n\t\t}\r\n\r\n\t\tthis._moveColumnInArray(this.columnsByIndex, from, to, after, true);\r\n\r\n\t\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\r\n\t\t\tthis.table.modules.responsiveLayout.initialize();\r\n\t\t}\r\n\r\n\t\tif(this.table.options.virtualDomHoz){\r\n\t\t\tthis.table.vdomHoz.reinitialize(true);\r\n\t\t}\r\n\r\n\t\tif(this.table.options.columnMoved){\r\n\t\t\tthis.table.options.columnMoved.call(this.table, from.getComponent(), this.table.columnManager.getComponents());\r\n\t\t}\r\n\r\n\t\tif(this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.columns){\r\n\t\t\tthis.table.modules.persistence.save(\"columns\");\r\n\t\t}\r\n\t}\r\n\r\n\t_moveColumnInArray(columns, from, to, after, updateRows){\r\n\t\tvar\tfromIndex = columns.indexOf(from),\r\n\t\ttoIndex, rows = [];\r\n\r\n\t\tif (fromIndex > -1) {\r\n\r\n\t\t\tcolumns.splice(fromIndex, 1);\r\n\r\n\t\t\ttoIndex = columns.indexOf(to);\r\n\r\n\t\t\tif (toIndex > -1) {\r\n\r\n\t\t\t\tif(after){\r\n\t\t\t\t\ttoIndex = toIndex+1;\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\ttoIndex = fromIndex;\r\n\t\t\t}\r\n\r\n\t\t\tcolumns.splice(toIndex, 0, from);\r\n\r\n\t\t\tif(updateRows){\r\n\r\n\t\t\t\tif(this.table.options.dataTree && this.table.modExists(\"dataTree\", true)){\r\n\t\t\t\t\tthis.table.rowManager.rows.forEach((row) => {\r\n\t\t\t\t\t\trows = rows.concat(this.table.modules.dataTree.getTreeChildren(row, false, true));\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\trows = rows.concat(this.table.rowManager.rows);\r\n\r\n\t\t\t\trows.forEach(function(row){\r\n\t\t\t\t\tif(row.cells.length){\r\n\t\t\t\t\t\tvar cell = row.cells.splice(fromIndex, 1)[0];\r\n\t\t\t\t\t\trow.cells.splice(toIndex, 0, cell);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tscrollToColumn(column, position, ifVisible){\r\n\t\tvar left = 0,\r\n\t\toffset = 0,\r\n\t\tadjust = 0,\r\n\t\tcolEl = column.getElement();\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\r\n\t\t\tif(typeof position === \"undefined\"){\r\n\t\t\t\tposition = this.table.options.scrollToColumnPosition;\r\n\t\t\t}\r\n\r\n\t\t\tif(typeof ifVisible === \"undefined\"){\r\n\t\t\t\tifVisible = this.table.options.scrollToColumnIfVisible;\r\n\t\t\t}\r\n\r\n\t\t\tif(column.visible){\r\n\r\n\t\t\t\t//align to correct position\r\n\t\t\t\tswitch(position){\r\n\t\t\t\t\tcase \"middle\":\r\n\t\t\t\t\tcase \"center\":\r\n\t\t\t\t\tadjust = -this.element.clientWidth / 2;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase \"right\":\r\n\t\t\t\t\tadjust = colEl.clientWidth - this.headersElement.clientWidth;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//check column visibility\r\n\t\t\t\tif(!ifVisible){\r\n\r\n\t\t\t\t\toffset = colEl.offsetLeft;\r\n\r\n\t\t\t\t\tif(offset > 0 && offset + colEl.offsetWidth < this.element.clientWidth){\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//calculate scroll position\r\n\t\t\t\tleft = colEl.offsetLeft + adjust;\r\n\r\n\t\t\t\tleft = Math.max(Math.min(left, this.table.rowManager.element.scrollWidth - this.table.rowManager.element.clientWidth),0);\r\n\r\n\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\r\n\t\t\t\tthis.scrollHorizontal(left);\r\n\r\n\t\t\t\tresolve();\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Scroll Error - Column not visible\");\r\n\t\t\t\treject(\"Scroll Error - Column not visible\");\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t}\r\n\r\n\t//////////////// Cell Management /////////////////\r\n\tgenerateCells(row){\r\n\t\tvar cells = [];\r\n\r\n\t\tthis.columnsByIndex.forEach((column) => {\r\n\t\t\tcells.push(column.generateCell(row));\r\n\t\t});\r\n\r\n\t\treturn cells;\r\n\t}\r\n\r\n\t//////////////// Column Management /////////////////\r\n\tgetFlexBaseWidth(){\r\n\t\tvar totalWidth = this.table.element.clientWidth, //table element width\r\n\t\tfixedWidth = 0;\r\n\r\n\t\t//adjust for vertical scrollbar if present\r\n\t\tif(this.rowManager.element.scrollHeight > this.rowManager.element.clientHeight){\r\n\t\t\ttotalWidth -= this.rowManager.element.offsetWidth - this.rowManager.element.clientWidth;\r\n\t\t}\r\n\r\n\t\tthis.columnsByIndex.forEach(function(column){\r\n\t\t\tvar width, minWidth, colWidth;\r\n\r\n\t\t\tif(column.visible){\r\n\r\n\t\t\t\twidth = column.definition.width || 0;\r\n\r\n\t\t\t\tminWidth = typeof column.minWidth == \"undefined\" ? this.table.options.columnMinWidth : parseInt(column.minWidth);\r\n\r\n\t\t\t\tif(typeof(width) == \"string\"){\r\n\t\t\t\t\tif(width.indexOf(\"%\") > -1){\r\n\t\t\t\t\t\tcolWidth = (totalWidth / 100) * parseInt(width) ;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tcolWidth = parseInt(width);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcolWidth = width;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfixedWidth += colWidth > minWidth ? colWidth : minWidth;\r\n\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn fixedWidth;\r\n\t}\r\n\r\n\taddColumn(definition, before, nextToColumn){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tvar column = this._addColumn(definition, before, nextToColumn);\r\n\r\n\t\t\tthis._reIndexColumns();\r\n\r\n\t\t\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\r\n\t\t\t\tthis.table.modules.responsiveLayout.initialize();\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.modExists(\"columnCalcs\")){\r\n\t\t\t\tthis.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\r\n\t\t\t}\r\n\r\n\t\t\tthis.redraw(true);\r\n\r\n\t\t\tif(this.table.modules.layout.getMode() != \"fitColumns\"){\r\n\t\t\t\tcolumn.reinitializeWidth();\r\n\t\t\t}\r\n\r\n\t\t\tthis._verticalAlignHeaders();\r\n\r\n\t\t\tthis.table.rowManager.reinitialize();\r\n\r\n\t\t\tif(this.table.options.virtualDomHoz){\r\n\t\t\t\tthis.table.vdomHoz.reinitialize();\r\n\t\t\t}\r\n\r\n\t\t\tresolve(column);\r\n\t\t});\r\n\t}\r\n\r\n\t//remove column from system\r\n\tderegisterColumn(column){\r\n\t\tvar field = column.getField(),\r\n\t\tindex;\r\n\r\n\t\t//remove from field list\r\n\t\tif(field){\r\n\t\t\tdelete this.columnsByField[field];\r\n\t\t}\r\n\r\n\t\t//remove from index list\r\n\t\tindex = this.columnsByIndex.indexOf(column);\r\n\r\n\t\tif(index > -1){\r\n\t\t\tthis.columnsByIndex.splice(index, 1);\r\n\t\t}\r\n\r\n\t\t//remove from column list\r\n\t\tindex = this.columns.indexOf(column);\r\n\r\n\t\tif(index > -1){\r\n\t\t\tthis.columns.splice(index, 1);\r\n\t\t}\r\n\r\n\t\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\r\n\t\t\tthis.table.modules.responsiveLayout.initialize();\r\n\t\t}\r\n\r\n\t\tthis._verticalAlignHeaders();\r\n\r\n\t\tthis.redraw();\r\n\t}\r\n\r\n\t//redraw columns\r\n\tredraw(force){\r\n\t\tif(force){\r\n\t\t\tif(Helpers.elVisible(this.element)){\r\n\t\t\t\tthis._verticalAlignHeaders();\r\n\t\t\t}\r\n\r\n\t\t\tthis.table.rowManager.resetScroll();\r\n\t\t\tthis.table.rowManager.reinitialize();\r\n\t\t}\r\n\r\n\t\tif([\"fitColumns\", \"fitDataStretch\"].indexOf(this.table.modules.layout.getMode()) > -1){\r\n\t\t\tthis.table.modules.layout.layout();\r\n\t\t}else{\r\n\t\t\tif(force){\r\n\t\t\t\tthis.table.modules.layout.layout();\r\n\t\t\t}else{\r\n\t\t\t\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\r\n\t\t\t\t\tthis.table.modules.responsiveLayout.update();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.table.modExists(\"frozenColumns\")){\r\n\t\t\tthis.table.modules.frozenColumns.layout();\r\n\t\t}\r\n\r\n\t\tif(this.table.modExists(\"columnCalcs\")){\r\n\t\t\tthis.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\r\n\t\t}\r\n\r\n\t\tif(force){\r\n\t\t\tif(this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.columns){\r\n\t\t\t\tthis.table.modules.persistence.save(\"columns\");\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.modExists(\"columnCalcs\")){\r\n\t\t\t\tthis.table.modules.columnCalcs.redraw();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.table.footerManager.redraw();\r\n\t}\r\n}","//public row object\r\nexport default class RowComponent {\r\n\r\n\tconstructor (row){\r\n\t\tthis._row = row;\r\n\t}\r\n\r\n\tgetData(transform){\r\n\t\treturn this._row.getData(transform);\r\n\t}\r\n\r\n\tgetElement(){\r\n\t\treturn this._row.getElement();\r\n\t}\r\n\r\n\tgetCells(){\r\n\t\tvar cells = [];\r\n\r\n\t\tthis._row.getCells().forEach(function(cell){\r\n\t\t\tcells.push(cell.getComponent());\r\n\t\t});\r\n\r\n\t\treturn cells;\r\n\t}\r\n\r\n\tgetCell(column){\r\n\t\tvar cell = this._row.getCell(column);\r\n\t\treturn cell ? cell.getComponent() : false;\r\n\t}\r\n\r\n\tgetIndex(){\r\n\t\treturn this._row.getData(\"data\")[this._row.table.options.index];\r\n\t}\r\n\r\n\tgetPosition(active){\r\n\t\treturn this._row.table.rowManager.getRowPosition(this._row, active);\r\n\t}\r\n\r\n\tdelete(){\r\n\t\treturn this._row.delete();\r\n\t}\r\n\r\n\tscrollTo(){\r\n\t\treturn this._row.table.rowManager.scrollToRow(this._row);\r\n\t}\r\n\r\n\tpageTo(){\r\n\t\tif(this._row.table.modExists(\"page\", true)){\r\n\t\t\treturn this._row.table.modules.page.setPageToRow(this._row);\r\n\t\t}\r\n\t}\r\n\r\n\tmove(to, after){\r\n\t\tthis._row.moveToRow(to, after);\r\n\t}\r\n\r\n\tupdate(data){\r\n\t\treturn this._row.updateData(data);\r\n\t}\r\n\r\n\tnormalizeHeight(){\r\n\t\tthis._row.normalizeHeight(true);\r\n\t}\r\n\r\n\tselect(){\r\n\t\tthis._row.table.modules.selectRow.selectRows(this._row);\r\n\t}\r\n\r\n\tdeselect(){\r\n\t\tthis._row.table.modules.selectRow.deselectRows(this._row);\r\n\t}\r\n\r\n\ttoggleSelect(){\r\n\t\tthis._row.table.modules.selectRow.toggleRow(this._row);\r\n\t}\r\n\r\n\tisSelected(){\r\n\t\treturn this._row.table.modules.selectRow.isRowSelected(this._row);\r\n\t}\r\n\r\n\t_getSelf(){\r\n\t\treturn this._row;\r\n\t}\r\n\r\n\tvalidate(){\r\n\t\treturn this._row.validate();\r\n\t}\r\n\r\n\tfreeze(){\r\n\t\tif(this._row.table.modExists(\"frozenRows\", true)){\r\n\t\t\tthis._row.table.modules.frozenRows.freezeRow(this._row);\r\n\t\t}\r\n\t}\r\n\r\n\tunfreeze(){\r\n\t\tif(this._row.table.modExists(\"frozenRows\", true)){\r\n\t\t\tthis._row.table.modules.frozenRows.unfreezeRow(this._row);\r\n\t\t}\r\n\t}\r\n\r\n\tisFrozen(){\r\n\t\tif(this._row.table.modExists(\"frozenRows\", true)){\r\n\t\t\tvar index = this._row.table.modules.frozenRows.rows.indexOf(this._row);\r\n\t\t\treturn index > -1;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\ttreeCollapse(){\r\n\t\tif(this._row.table.modExists(\"dataTree\", true)){\r\n\t\t\tthis._row.table.modules.dataTree.collapseRow(this._row);\r\n\t\t}\r\n\t}\r\n\r\n\ttreeExpand(){\r\n\t\tif(this._row.table.modExists(\"dataTree\", true)){\r\n\t\t\tthis._row.table.modules.dataTree.expandRow(this._row);\r\n\t\t}\r\n\t}\r\n\r\n\ttreeToggle(){\r\n\t\tif(this._row.table.modExists(\"dataTree\", true)){\r\n\t\t\tthis._row.table.modules.dataTree.toggleRow(this._row);\r\n\t\t}\r\n\t}\r\n\r\n\tgetTreeParent(){\r\n\t\tif(this._row.table.modExists(\"dataTree\", true)){\r\n\t\t\treturn this._row.table.modules.dataTree.getTreeParent(this._row);\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tgetTreeChildren(){\r\n\t\tif(this._row.table.modExists(\"dataTree\", true)){\r\n\t\t\treturn this._row.table.modules.dataTree.getTreeChildren(this._row, true);\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\taddTreeChild(data, pos, index){\r\n\t\tif(this._row.table.modExists(\"dataTree\", true)){\r\n\t\t\treturn this._row.table.modules.dataTree.addTreeChildRow(this._row, data, pos, index);\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\treformat(){\r\n\t\treturn this._row.reinitialize();\r\n\t}\r\n\r\n\tgetGroup(){\r\n\t\treturn this._row.getGroup().getComponent();\r\n\t}\r\n\r\n\tgetTable(){\r\n\t\treturn this._row.table;\r\n\t}\r\n\r\n\tgetNextRow(){\r\n\t\tvar row = this._row.nextRow();\r\n\t\treturn row ? row.getComponent() : row;\r\n\t}\r\n\r\n\tgetPrevRow(){\r\n\t\tvar row = this._row.prevRow();\r\n\t\treturn row ? row.getComponent() : row;\r\n\t}\r\n}","import RowComponent from './RowComponent.js';\r\nimport Helpers from '../Helpers.js';\r\n\r\nexport default class Row {\r\n\tconstructor (data, parent, type = \"row\"){\r\n\t\tthis.table = parent.table;\r\n\t\tthis.parent = parent;\r\n\t\tthis.data = {};\r\n\t\tthis.type = type; //type of element\r\n\t\tthis.element = false;\r\n\t\tthis.modules = {}; //hold module variables;\r\n\t\tthis.cells = [];\r\n\t\tthis.height = 0; //hold element height\r\n\t\tthis.heightStyled = \"\"; //hold element height prestyled to improve render efficiency\r\n\t\tthis.manualHeight = false; //user has manually set row height\r\n\t\tthis.outerHeight = 0; //holde lements outer height\r\n\t\tthis.initialized = false; //element has been rendered\r\n\t\tthis.heightInitialized = false; //element has resized cells to fit\r\n\r\n\t\tthis.component = null;\r\n\r\n\t\tthis.created = false;\r\n\r\n\t\tthis.setData(data);\r\n\t}\r\n\r\n\tcreate(){\r\n\t\tif(!this.created){\r\n\t\t\tthis.created = true;\r\n\t\t\tthis.generateElement();\r\n\t\t}\r\n\t}\r\n\r\n\tcreateElement (){\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tel.classList.add(\"tabulator-row\");\r\n\t\tel.setAttribute(\"role\", \"row\");\r\n\r\n\t\tthis.element = el;\r\n\t}\r\n\r\n\tgetElement(){\r\n\t\tthis.create();\r\n\t\treturn this.element;\r\n\t}\r\n\r\n\tdetachElement(){\r\n\t\tif (this.element && this.element.parentNode){\r\n\t\t\tthis.element.parentNode.removeChild(this.element);\r\n\t\t}\r\n\t}\r\n\r\n\tgenerateElement(){\r\n\t\tvar dblTap,\ttapHold, tap;\r\n\r\n\t\tthis.createElement();\r\n\r\n\t\t//set row selection characteristics\r\n\t\tif(this.table.options.selectable !== false && this.table.modExists(\"selectRow\")){\r\n\t\t\tthis.table.modules.selectRow.initializeRow(this);\r\n\t\t}\r\n\r\n\t\t//setup movable rows\r\n\t\tif(this.table.options.movableRows !== false && this.table.modExists(\"moveRow\")){\r\n\t\t\tthis.table.modules.moveRow.initializeRow(this);\r\n\t\t}\r\n\r\n\t\t//setup data tree\r\n\t\tif(this.table.options.dataTree !== false && this.table.modExists(\"dataTree\")){\r\n\t\t\tthis.table.modules.dataTree.initializeRow(this);\r\n\t\t}\r\n\r\n\t\t//setup column colapse container\r\n\t\tif(this.table.options.responsiveLayout === \"collapse\" && this.table.modExists(\"responsiveLayout\")){\r\n\t\t\tthis.table.modules.responsiveLayout.initializeRow(this);\r\n\t\t}\r\n\r\n\t\t//set column menu\r\n\t\tif((this.table.options.rowContextMenu || this.table.options.rowClickMenu) && this.table.modExists(\"menu\")){\r\n\t\t\tthis.table.modules.menu.initializeRow(this);\r\n\t\t}\r\n\r\n\t\t//handle row click events\r\n\t\tif (this.table.options.rowClick){\r\n\t\t\tthis.element.addEventListener(\"click\", (e) => {\r\n\t\t\t\tthis.table.options.rowClick(e, this.getComponent());\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.table.options.rowDblClick){\r\n\t\t\tthis.element.addEventListener(\"dblclick\", (e) => {\r\n\t\t\t\tthis.table.options.rowDblClick(e, this.getComponent());\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.table.options.rowContext){\r\n\t\t\tthis.element.addEventListener(\"contextmenu\", (e) => {\r\n\t\t\t\tthis.table.options.rowContext(e, this.getComponent());\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t//handle mouse events\r\n\t\tif (this.table.options.rowMouseEnter){\r\n\t\t\tthis.element.addEventListener(\"mouseenter\", (e) => {\r\n\t\t\t\tthis.table.options.rowMouseEnter(e, this.getComponent());\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.table.options.rowMouseLeave){\r\n\t\t\tthis.element.addEventListener(\"mouseleave\", (e) => {\r\n\t\t\t\tthis.table.options.rowMouseLeave(e, this.getComponent());\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.table.options.rowMouseOver){\r\n\t\t\tthis.element.addEventListener(\"mouseover\", (e) => {\r\n\t\t\t\tthis.table.options.rowMouseOver(e, this.getComponent());\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.table.options.rowMouseOut){\r\n\t\t\tthis.element.addEventListener(\"mouseout\", (e) => {\r\n\t\t\t\tthis.table.options.rowMouseOut(e, this.getComponent());\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.table.options.rowMouseMove){\r\n\t\t\tthis.element.addEventListener(\"mousemove\", (e) => {\r\n\t\t\t\tthis.table.options.rowMouseMove(e, this.getComponent());\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.table.options.rowTap){\r\n\r\n\t\t\ttap = false;\r\n\r\n\t\t\tthis.element.addEventListener(\"touchstart\", (e) => {\r\n\t\t\t\ttap = true;\r\n\t\t\t}, {passive: true});\r\n\r\n\t\t\tthis.element.addEventListener(\"touchend\", (e) => {\r\n\t\t\t\tif(tap){\r\n\t\t\t\t\tthis.table.options.rowTap(e, this.getComponent());\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttap = false;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.table.options.rowDblTap){\r\n\r\n\t\t\tdblTap = null;\r\n\r\n\t\t\tthis.element.addEventListener(\"touchend\", (e) => {\r\n\t\t\t\tif(dblTap){\r\n\t\t\t\t\tclearTimeout(dblTap);\r\n\t\t\t\t\tdblTap = null;\r\n\r\n\t\t\t\t\tthis.table.options.rowDblTap(e, this.getComponent());\r\n\t\t\t\t}else{\r\n\r\n\t\t\t\t\tdblTap = setTimeout(() => {\r\n\t\t\t\t\t\tclearTimeout(dblTap);\r\n\t\t\t\t\t\tdblTap = null;\r\n\t\t\t\t\t}, 300);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.table.options.rowTapHold){\r\n\r\n\t\t\ttapHold = null;\r\n\r\n\t\t\tthis.element.addEventListener(\"touchstart\", (e) => {\r\n\t\t\t\tclearTimeout(tapHold);\r\n\r\n\t\t\t\ttapHold = setTimeout(() => {\r\n\t\t\t\t\tclearTimeout(tapHold);\r\n\t\t\t\t\ttapHold = null;\r\n\t\t\t\t\ttap = false;\r\n\t\t\t\t\tthis.table.options.rowTapHold(e, this.getComponent());\r\n\t\t\t\t}, 1000);\r\n\r\n\t\t\t}, {passive: true});\r\n\r\n\t\t\tthis.element.addEventListener(\"touchend\", (e) => {\r\n\t\t\t\tclearTimeout(tapHold);\r\n\t\t\t\ttapHold = null;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tgenerateCells(){\r\n\t\tthis.cells = this.table.columnManager.generateCells(this);\r\n\t}\r\n\r\n\t//functions to setup on first render\r\n\tinitialize(force){\r\n\t\tthis.create();\r\n\r\n\t\tif(!this.initialized || force){\r\n\r\n\t\t\tthis.deleteCells();\r\n\r\n\t\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\r\n\r\n\t\t\t//handle frozen cells\r\n\t\t\tif(this.table.modExists(\"frozenColumns\")){\r\n\t\t\t\tthis.table.modules.frozenColumns.layoutRow(this);\r\n\t\t\t}\r\n\r\n\t\t\tthis.generateCells();\r\n\r\n\t\t\tif(this.table.options.virtualDomHoz && this.table.vdomHoz.initialized){\r\n\t\t\t\tthis.table.vdomHoz.initializeRow(this);\r\n\t\t\t}else{\r\n\t\t\t\tthis.cells.forEach((cell) => {\r\n\t\t\t\t\tthis.element.appendChild(cell.getElement());\r\n\t\t\t\t\tcell.cellRendered();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif(force){\r\n\t\t\t\tthis.normalizeHeight();\r\n\t\t\t}\r\n\r\n\t\t\t//setup movable rows\r\n\t\t\tif(this.table.options.dataTree && this.table.modExists(\"dataTree\")){\r\n\t\t\t\tthis.table.modules.dataTree.layoutRow(this);\r\n\t\t\t}\r\n\r\n\t\t\t//setup column colapse container\r\n\t\t\tif(this.table.options.responsiveLayout === \"collapse\" && this.table.modExists(\"responsiveLayout\")){\r\n\t\t\t\tthis.table.modules.responsiveLayout.layoutRow(this);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.options.rowFormatter){\r\n\t\t\t\tthis.table.options.rowFormatter(this.getComponent());\r\n\t\t\t}\r\n\r\n\t\t\t//set resizable handles\r\n\t\t\tif(this.table.options.resizableRows && this.table.modExists(\"resizeRows\")){\r\n\t\t\t\tthis.table.modules.resizeRows.initializeRow(this);\r\n\t\t\t}\r\n\r\n\t\t\tthis.initialized = true;\r\n\t\t}else{\r\n\t\t\tif(this.table.options.virtualDomHoz){\r\n\t\t\t\tthis.table.vdomHoz.reinitializeRow(this);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treinitializeHeight(){\r\n\t\tthis.heightInitialized = false;\r\n\r\n\t\tif(this.element && this.element.offsetParent !== null){\r\n\t\t\tthis.normalizeHeight(true);\r\n\t\t}\r\n\t}\r\n\r\n\treinitialize(children){\r\n\t\tthis.initialized = false;\r\n\t\tthis.heightInitialized = false;\r\n\r\n\t\tif(!this.manualHeight){\r\n\t\t\tthis.height = 0;\r\n\t\t\tthis.heightStyled = \"\";\r\n\t\t}\r\n\r\n\t\tif(this.element && this.element.offsetParent !== null){\r\n\t\t\tthis.initialize(true);\r\n\t\t}\r\n\r\n\t\tif(this.table.options.dataTree && this.table.modExists(\"dataTree\", true)){\r\n\t\t\tthis.table.modules.dataTree.getTreeChildren(this, false, true).forEach(function(child){\r\n\t\t\t\tchild.reinitialize(true);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t//get heights when doing bulk row style calcs in virtual DOM\r\n\tcalcHeight(force){\r\n\r\n\t\tvar maxHeight = 0,\r\n\t\tminHeight = this.table.options.resizableRows ? this.element.clientHeight : 0;\r\n\r\n\t\tthis.cells.forEach(function(cell){\r\n\t\t\tvar height = cell.getHeight();\r\n\t\t\tif(height > maxHeight){\r\n\t\t\t\tmaxHeight = height;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(force){\r\n\t\t\tthis.height = Math.max(maxHeight, minHeight);\r\n\t\t}else{\r\n\t\t\tthis.height = this.manualHeight ? this.height : Math.max(maxHeight, minHeight);\r\n\t\t}\r\n\r\n\t\tthis.heightStyled = this.height ? this.height + \"px\" : \"\";\r\n\t\tthis.outerHeight = this.element.offsetHeight;\r\n\t}\r\n\r\n\t//set of cells\r\n\tsetCellHeight(){\r\n\t\tthis.cells.forEach(function(cell){\r\n\t\t\tcell.setHeight();\r\n\t\t});\r\n\r\n\t\tthis.heightInitialized = true;\r\n\t}\r\n\r\n\tclearCellHeight(){\r\n\t\tthis.cells.forEach(function(cell){\r\n\t\t\tcell.clearHeight();\r\n\t\t});\r\n\t}\r\n\r\n\t//normalize the height of elements in the row\r\n\tnormalizeHeight(force){\r\n\r\n\t\tif(force){\r\n\t\t\tthis.clearCellHeight();\r\n\t\t}\r\n\r\n\t\tthis.calcHeight(force);\r\n\r\n\t\tthis.setCellHeight();\r\n\t}\r\n\r\n\t//set height of rows\r\n\tsetHeight(height, force){\r\n\t\tif(this.height != height || force){\r\n\r\n\t\t\tthis.manualHeight = true;\r\n\r\n\t\t\tthis.height = height;\r\n\t\t\tthis.heightStyled = height ? height + \"px\" : \"\";\r\n\r\n\t\t\tthis.setCellHeight();\r\n\r\n\t\t\t// this.outerHeight = this.element.outerHeight();\r\n\t\t\tthis.outerHeight = this.element.offsetHeight;\r\n\t\t}\r\n\t}\r\n\r\n\t//return rows outer height\r\n\tgetHeight(){\r\n\t\treturn this.outerHeight;\r\n\t}\r\n\r\n\t//return rows outer Width\r\n\tgetWidth(){\r\n\t\treturn this.element.offsetWidth;\r\n\t}\r\n\r\n\t//////////////// Cell Management /////////////////\r\n\tdeleteCell(cell){\r\n\t\tvar index = this.cells.indexOf(cell);\r\n\r\n\t\tif(index > -1){\r\n\t\t\tthis.cells.splice(index, 1);\r\n\t\t}\r\n\t}\r\n\r\n\t//////////////// Data Management /////////////////\r\n\tsetData(data){\r\n\t\tif(this.table.modExists(\"mutator\")){\r\n\t\t\tdata = this.table.modules.mutator.transformRow(data, \"data\");\r\n\t\t}\r\n\r\n\t\tthis.data = data;\r\n\r\n\t\tif(this.table.options.reactiveData && this.table.modExists(\"reactiveData\", true)){\r\n\t\t\tthis.table.modules.reactiveData.watchRow(this);\r\n\t\t}\r\n\t}\r\n\r\n\t//update the rows data\r\n\tupdateData(updatedData){\r\n\t\tvar visible = this.element && Helpers.elVisible(this.element),\r\n\t\ttempData = {},\r\n\t\tnewRowData;\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\r\n\t\t\tif(typeof updatedData === \"string\"){\r\n\t\t\t\tupdatedData = JSON.parse(updatedData);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.options.reactiveData && this.table.modExists(\"reactiveData\", true)){\r\n\t\t\t\tthis.table.modules.reactiveData.block();\r\n\t\t\t}\r\n\r\n\t\t\t//mutate incomming data if needed\r\n\t\t\tif(this.table.modExists(\"mutator\")){\r\n\r\n\t\t\t\ttempData = Object.assign(tempData, this.data);\r\n\t\t\t\ttempData = Object.assign(tempData, updatedData);\r\n\r\n\t\t\t\tnewRowData = this.table.modules.mutator.transformRow(tempData, \"data\", updatedData);\r\n\t\t\t}else{\r\n\t\t\t\tnewRowData = updatedData;\r\n\t\t\t}\r\n\r\n\t\t\t//set data\r\n\t\t\tfor (var attrname in newRowData) {\r\n\t\t\t\tthis.data[attrname] = newRowData[attrname];\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.options.reactiveData && this.table.modExists(\"reactiveData\", true)){\r\n\t\t\t\tthis.table.modules.reactiveData.unblock();\r\n\t\t\t}\r\n\r\n\t\t\t//update affected cells only\r\n\t\t\tfor (var attrname in updatedData) {\r\n\r\n\t\t\t\tlet columns = this.table.columnManager.getColumnsByFieldRoot(attrname);\r\n\r\n\t\t\t\tcolumns.forEach((column) => {\r\n\t\t\t\t\tlet cell = this.getCell(column.getField());\r\n\r\n\t\t\t\t\tif(cell){\r\n\t\t\t\t\t\tlet value = column.getFieldValue(newRowData);\r\n\t\t\t\t\t\tif(cell.getValue() != value){\r\n\t\t\t\t\t\t\tcell.setValueProcessData(value);\r\n\r\n\t\t\t\t\t\t\tif(visible){\r\n\t\t\t\t\t\t\t\tcell.cellRendered();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.options.groupUpdateOnCellEdit && this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\r\n\t\t\t\tthis.table.modules.groupRows.reassignRowToGroup(this.row);\r\n\t\t\t}\r\n\r\n\t\t\t//Partial reinitialization if visible\r\n\t\t\tif(visible){\r\n\t\t\t\tthis.normalizeHeight(true);\r\n\r\n\t\t\t\tif(this.table.options.rowFormatter){\r\n\t\t\t\t\tthis.table.options.rowFormatter(this.getComponent());\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.initialized = false;\r\n\t\t\t\tthis.height = 0;\r\n\t\t\t\tthis.heightStyled = \"\";\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.options.dataTree !== false && this.table.modExists(\"dataTree\") && this.table.modules.dataTree.redrawNeeded(updatedData)){\r\n\t\t\t\tthis.table.modules.dataTree.initializeRow(this);\r\n\r\n\t\t\t\tif(visible){\r\n\t\t\t\t\tthis.table.modules.dataTree.layoutRow(this);\r\n\t\t\t\t\tthis.table.rowManager.refreshActiveData(\"tree\", false, true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\t//this.reinitialize();\r\n\r\n\t\t\tthis.table.options.rowUpdated.call(this.table, this.getComponent());\r\n\r\n\t\t\tif(this.table.options.dataChanged){\r\n\t\t\t\tthis.table.options.dataChanged.call(this.table, this.table.rowManager.getData());\r\n\t\t\t}\r\n\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\r\n\tgetData(transform){\r\n\t\tif(transform){\r\n\t\t\tif(this.table.modExists(\"accessor\")){\r\n\t\t\t\treturn this.table.modules.accessor.transformRow(this, transform);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this.data;\r\n\t}\r\n\r\n\tgetCell(column){\r\n\t\tvar match = false;\r\n\r\n\t\tcolumn = this.table.columnManager.findColumn(column);\r\n\r\n\t\tmatch = this.cells.find(function(cell){\r\n\t\t\treturn cell.column === column;\r\n\t\t});\r\n\r\n\t\treturn match;\r\n\t}\r\n\r\n\tgetCellIndex(findCell){\r\n\t\treturn this.cells.findIndex(function(cell){\r\n\t\t\treturn cell === findCell;\r\n\t\t});\r\n\t}\r\n\r\n\tfindNextEditableCell(index){\r\n\t\tvar nextCell = false;\r\n\r\n\t\tif(index < this.cells.length-1){\r\n\t\t\tfor(var i = index+1; i < this.cells.length; i++){\r\n\t\t\t\tlet cell = this.cells[i];\r\n\r\n\t\t\t\tif(cell.column.modules.edit && Helpers.elVisible(cell.getElement())){\r\n\t\t\t\t\tlet allowEdit = true;\r\n\r\n\t\t\t\t\tif(typeof cell.column.modules.edit.check == \"function\"){\r\n\t\t\t\t\t\tallowEdit = cell.column.modules.edit.check(cell.getComponent());\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(allowEdit){\r\n\t\t\t\t\t\tnextCell = cell;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn nextCell;\r\n\t}\r\n\r\n\tfindPrevEditableCell(index){\r\n\t\tvar prevCell = false;\r\n\r\n\t\tif(index > 0){\r\n\t\t\tfor(var i = index-1; i >= 0; i--){\r\n\t\t\t\tlet cell = this.cells[i],\r\n\t\t\t\tallowEdit = true;\r\n\r\n\t\t\t\tif(cell.column.modules.edit && Helpers.elVisible(cell.getElement())){\r\n\t\t\t\t\tif(typeof cell.column.modules.edit.check == \"function\"){\r\n\t\t\t\t\t\tallowEdit = cell.column.modules.edit.check(cell.getComponent());\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(allowEdit){\r\n\t\t\t\t\t\tprevCell = cell;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn prevCell;\r\n\t}\r\n\r\n\tgetCells(){\r\n\t\treturn this.cells;\r\n\t}\r\n\r\n\tnextRow(){\r\n\t\tvar row = this.table.rowManager.nextDisplayRow(this, true);\r\n\t\treturn row || false;\r\n\t}\r\n\r\n\tprevRow(){\r\n\t\tvar row = this.table.rowManager.prevDisplayRow(this, true);\r\n\t\treturn row || false;\r\n\t}\r\n\r\n\tmoveToRow(to, before){\r\n\t\tvar toRow = this.table.rowManager.findRow(to);\r\n\r\n\t\tif(toRow){\r\n\t\t\tthis.table.rowManager.moveRowActual(this, toRow, !before);\r\n\t\t\tthis.table.rowManager.refreshActiveData(\"display\", false, true);\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Move Error - No matching row found:\", to);\r\n\t\t}\r\n\t}\r\n\r\n\tvalidate(){\r\n\t\tvar invalid = [];\r\n\r\n\t\tthis.cells.forEach(function(cell){\r\n\t\t\tif(!cell.validate()){\r\n\t\t\t\tinvalid.push(cell.getComponent());\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn invalid.length ? invalid : true;\r\n\t}\r\n\r\n\t///////////////////// Actions  /////////////////////\r\n\tdelete(){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tvar index, rows;\r\n\r\n\t\t\tif(this.table.options.history && this.table.modExists(\"history\")){\r\n\r\n\t\t\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\r\n\t\t\t\t\trows = this.getGroup().rows\r\n\t\t\t\t\tindex = rows.indexOf(this);\r\n\r\n\t\t\t\t\tif(index){\r\n\t\t\t\t\t\tindex = rows[index-1];\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tindex = this.table.rowManager.getRowIndex(this);\r\n\r\n\t\t\t\t\tif(index){\r\n\t\t\t\t\t\tindex = this.table.rowManager.rows[index-1];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.table.modules.history.action(\"rowDelete\", this, {data:this.getData(), pos:!index, index:index});\r\n\t\t\t}\r\n\r\n\t\t\tthis.deleteActual();\r\n\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\r\n\tdeleteActual(blockRedraw){\r\n\t\tvar index = this.table.rowManager.getRowIndex(this);\r\n\r\n\t\tthis.detatchModules();\r\n\r\n\t\t// if(this.table.options.dataTree && this.table.modExists(\"dataTree\")){\r\n\t\t// \tthis.table.modules.dataTree.collapseRow(this, true);\r\n\t\t// }\r\n\r\n\t\t//remove any reactive data watchers from row object\r\n\t\tif(this.table.options.reactiveData && this.table.modExists(\"reactiveData\", true)){\r\n\t\t\t// this.table.modules.reactiveData.unwatchRow(this);\r\n\t\t}\r\n\r\n\t\t//remove from group\r\n\t\tif(this.modules.group){\r\n\t\t\tthis.modules.group.removeRow(this);\r\n\t\t}\r\n\r\n\t\tthis.table.rowManager.deleteRow(this, blockRedraw);\r\n\r\n\t\tthis.deleteCells();\r\n\r\n\t\tthis.initialized = false;\r\n\t\tthis.heightInitialized = false;\r\n\t\tthis.element = false;\r\n\r\n\t\tif(this.table.options.dataTree && this.table.modExists(\"dataTree\", true)){\r\n\t\t\tthis.table.modules.dataTree.rowDelete(this);\r\n\t\t}\r\n\r\n\t\t//recalc column calculations if present\r\n\t\tif(this.table.modExists(\"columnCalcs\")){\r\n\t\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\r\n\t\t\t\tthis.table.modules.columnCalcs.recalcRowGroup(this);\r\n\t\t\t}else{\r\n\t\t\t\tthis.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdetatchModules(){\r\n\t\t//deselect row if it is selected\r\n\t\tif(this.table.modExists(\"selectRow\")){\r\n\t\t\tthis.table.modules.selectRow._deselectRow(this, true);\r\n\t\t}\r\n\r\n\t\t//cancel edit if row is currently being edited\r\n\t\tif(this.table.modExists(\"edit\")){\r\n\t\t\tif(this.table.modules.edit.currentCell.row === this){\r\n\t\t\t\tthis.table.modules.edit.cancelEdit();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.table.modExists(\"frozenRows\")){\r\n\t\t\tthis.table.modules.frozenRows.detachRow(this);\r\n\t\t}\r\n\t}\r\n\r\n\tdeleteCells(){\r\n\t\tvar cellCount = this.cells.length;\r\n\r\n\t\tfor(let i = 0; i < cellCount; i++){\r\n\t\t\tthis.cells[0].delete();\r\n\t\t}\r\n\t}\r\n\r\n\twipe(){\r\n\t\tthis.detatchModules();\r\n\t\tthis.deleteCells();\r\n\r\n\t\tif(this.element){\r\n\t\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\r\n\r\n\t\t\tif(this.element.parentNode){\r\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.element = false;\r\n\t\tthis.modules = {};\r\n\t}\r\n\r\n\tgetGroup(){\r\n\t\treturn this.modules.group || false;\r\n\t}\r\n\r\n\t//////////////// Object Generation /////////////////\r\n\tgetComponent(){\r\n\t\tif(!this.component){\r\n\t\t\tthis.component = new RowComponent(this);\r\n\t\t}\r\n\r\n\t\treturn this.component;\r\n\t}\r\n}","import Row from './row/Row.js';\r\nimport Helpers from './Helpers.js';\r\n\r\nexport default class RowManager {\r\n\r\n\tconstructor(table){\r\n\t\tthis.table = table;\r\n\t\tthis.element = this.createHolderElement(); //containing element\r\n\t\tthis.tableElement = this.createTableElement(); //table element\r\n\t\tthis.heightFixer = this.createTableElement(); //table element\r\n\t\tthis.columnManager = null; //hold column manager object\r\n\t\tthis.height = 0; //hold height of table element\r\n\r\n\t\tthis.firstRender = false; //handle first render\r\n\t\tthis.renderMode = \"virtual\"; //current rendering mode\r\n\t\tthis.fixedHeight = false; //current rendering mode\r\n\r\n\t\tthis.rows = []; //hold row data objects\r\n\t\tthis.activeRows = []; //rows currently available to on display in the table\r\n\t\tthis.activeRowsCount = 0; //count of active rows\r\n\r\n\t\tthis.displayRows = []; //rows currently on display in the table\r\n\t\tthis.displayRowsCount = 0; //count of display rows\r\n\r\n\t\tthis.scrollTop = 0;\r\n\t\tthis.scrollLeft = 0;\r\n\r\n\t\tthis.vDomRowHeight = 20; //approximation of row heights for padding\r\n\r\n\t\tthis.vDomTop = 0; //hold position for first rendered row in the virtual DOM\r\n\t\tthis.vDomBottom = 0; //hold possition for last rendered row in the virtual DOM\r\n\r\n\t\tthis.vDomScrollPosTop = 0; //last scroll position of the vDom top;\r\n\t\tthis.vDomScrollPosBottom = 0; //last scroll position of the vDom bottom;\r\n\r\n\t\tthis.vDomTopPad = 0; //hold value of padding for top of virtual DOM\r\n\t\tthis.vDomBottomPad = 0; //hold value of padding for bottom of virtual DOM\r\n\r\n\t\tthis.vDomMaxRenderChain = 90; //the maximum number of dom elements that can be rendered in 1 go\r\n\r\n\t\tthis.vDomWindowBuffer = 0; //window row buffer before removing elements, to smooth scrolling\r\n\r\n\t\tthis.vDomWindowMinTotalRows = 20; //minimum number of rows to be generated in virtual dom (prevent buffering issues on tables with tall rows)\r\n\t\tthis.vDomWindowMinMarginRows = 5; //minimum number of rows to be generated in virtual dom margin\r\n\r\n\t\tthis.vDomTopNewRows = []; //rows to normalize after appending to optimize render speed\r\n\t\tthis.vDomBottomNewRows = []; //rows to normalize after appending to optimize render speed\r\n\r\n\t\tthis.rowNumColumn = false; //hold column component for row number column\r\n\r\n\t\tthis.redrawBlock = false; //prevent redraws to allow multiple data manipulations becore continuing\r\n\t\tthis.redrawBlockRestoreConfig = false; //store latest redraw function calls for when redraw is needed\r\n\t\tthis.redrawBlockRederInPosition = false; //store latest redraw function calls for when redraw is needed\r\n\t}\r\n\r\n\t//////////////// Setup Functions /////////////////\r\n\r\n\tcreateHolderElement (){\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tel.classList.add(\"tabulator-tableHolder\");\r\n\t\tel.setAttribute(\"tabindex\", 0);\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\tcreateTableElement (){\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tel.classList.add(\"tabulator-table\");\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\t//return containing element\r\n\tgetElement(){\r\n\t\treturn this.element;\r\n\t}\r\n\r\n\t//return table element\r\n\tgetTableElement(){\r\n\t\treturn this.tableElement;\r\n\t}\r\n\r\n\t//return position of row in table\r\n\tgetRowPosition(row, active){\r\n\t\tif(active){\r\n\t\t\treturn this.activeRows.indexOf(row);\r\n\t\t}else{\r\n\t\t\treturn this.rows.indexOf(row);\r\n\t\t}\r\n\t}\r\n\r\n\t//link to column manager\r\n\tsetColumnManager(manager){\r\n\t\tthis.columnManager = manager;\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.setRenderMode();\r\n\r\n\t\t//initialize manager\r\n\t\tthis.element.appendChild(this.tableElement);\r\n\r\n\t\tthis.firstRender = true;\r\n\r\n\t\t//scroll header along with table body\r\n\t\tthis.element.addEventListener(\"scroll\", () => {\r\n\t\t\tvar left = this.element.scrollLeft;\r\n\r\n\t\t\t//handle horizontal scrolling\r\n\t\t\tif(this.scrollLeft != left){\r\n\t\t\t\tthis.columnManager.scrollHorizontal(left);\r\n\r\n\t\t\t\tif(this.table.options.groupBy){\r\n\t\t\t\t\tthis.table.modules.groupRows.scrollHeaders(left);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this.table.modExists(\"columnCalcs\")){\r\n\t\t\t\t\tthis.table.modules.columnCalcs.scrollHorizontal(left);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.table.options.scrollHorizontal(left);\r\n\t\t\t}\r\n\r\n\t\t\tthis.scrollLeft = left;\r\n\t\t});\r\n\r\n\t\t//handle virtual dom scrolling\r\n\t\tif(this.renderMode === \"virtual\"){\r\n\t\t\tthis.element.addEventListener(\"scroll\", () => {\r\n\t\t\t\tvar top = this.element.scrollTop;\r\n\t\t\t\tvar dir = this.scrollTop > top;\r\n\r\n\t\t\t\t//handle verical scrolling\r\n\t\t\t\tif(this.scrollTop != top){\r\n\t\t\t\t\tthis.scrollTop = top;\r\n\t\t\t\t\tthis.scrollVertical(dir);\r\n\r\n\t\t\t\t\tif(this.table.options.ajaxProgressiveLoad == \"scroll\"){\r\n\t\t\t\t\t\tthis.table.modules.ajax.nextPage(this.element.scrollHeight - this.element.clientHeight - top);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.table.options.scrollVertical(top);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.scrollTop = top;\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t////////////////// Row Manipulation //////////////////\r\n\tfindRow(subject){\r\n\t\tif(typeof subject == \"object\"){\r\n\t\t\tif(subject instanceof Row){\r\n\t\t\t\t//subject is row element\r\n\t\t\t\treturn subject;\r\n\t\t\t}else if(subject instanceof RowComponent){\r\n\t\t\t\t//subject is public row component\r\n\t\t\t\treturn subject._getSelf() || false;\r\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement){\r\n\t\t\t\t//subject is a HTML element of the row\r\n\t\t\t\tlet match = this.rows.find((row) => {\r\n\t\t\t\t\treturn row.getElement() === subject;\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn match || false;\r\n\t\t\t}\r\n\t\t}else if(typeof subject == \"undefined\" || subject === null){\r\n\t\t\treturn false;\r\n\t\t}else{\r\n\t\t\t//subject should be treated as the index of the row\r\n\t\t\tlet match = this.rows.find((row) => {\r\n\t\t\t\treturn row.data[this.table.options.index] == subject;\r\n\t\t\t});\r\n\r\n\t\t\treturn match || false;\r\n\t\t}\r\n\r\n\t\t//catch all for any other type of input\r\n\t\treturn false;\r\n\t}\r\n\r\n\tgetRowFromDataObject(data){\r\n\t\tvar match = this.rows.find((row) => {\r\n\t\t\treturn row.data === data;\r\n\t\t});\r\n\r\n\t\treturn match || false;\r\n\t}\r\n\r\n\tgetRowFromPosition(position, active){\r\n\t\tif(active){\r\n\t\t\treturn this.activeRows[position];\r\n\t\t}else{\r\n\t\t\treturn this.rows[position];\r\n\t\t}\r\n\t}\r\n\r\n\tscrollToRow(row, position, ifVisible){\r\n\t\tvar rowIndex = this.getDisplayRows().indexOf(row),\r\n\t\trowEl = row.getElement(),\r\n\t\trowTop,\r\n\t\toffset = 0;\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif(rowIndex > -1){\r\n\r\n\t\t\t\tif(typeof position === \"undefined\"){\r\n\t\t\t\t\tposition = this.table.options.scrollToRowPosition;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(typeof ifVisible === \"undefined\"){\r\n\t\t\t\t\tifVisible = this.table.options.scrollToRowIfVisible;\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif(position === \"nearest\"){\r\n\t\t\t\t\tswitch(this.renderMode){\r\n\t\t\t\t\t\tcase\"classic\":\r\n\t\t\t\t\t\trowTop = Helpers.elOffset(rowEl).top;\r\n\t\t\t\t\t\tposition = Math.abs(this.element.scrollTop - rowTop) > Math.abs(this.element.scrollTop + this.element.clientHeight - rowTop) ? \"bottom\" : \"top\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase\"virtual\":\r\n\t\t\t\t\t\tposition = Math.abs(this.vDomTop - rowIndex) > Math.abs(this.vDomBottom - rowIndex) ? \"bottom\" : \"top\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//check row visibility\r\n\t\t\t\tif(!ifVisible){\r\n\t\t\t\t\tif(Helpers.elVisible(rowEl)){\r\n\t\t\t\t\t\toffset = Helpers.elOffset(rowEl).top - Helpers.elOffset(this.element).top;\r\n\r\n\t\t\t\t\t\tif(offset > 0 && offset < this.element.clientHeight - rowEl.offsetHeight){\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//scroll to row\r\n\t\t\t\tswitch(this.renderMode){\r\n\t\t\t\t\tcase\"classic\":\r\n\t\t\t\t\tthis.element.scrollTop = Helpers.elOffset(rowEl).top - Helpers.elOffset(this.element).top + this.element.scrollTop;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase\"virtual\":\r\n\t\t\t\t\tthis._virtualRenderFill(rowIndex, true);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//align to correct position\r\n\t\t\t\tswitch(position){\r\n\t\t\t\t\tcase \"middle\":\r\n\t\t\t\t\tcase \"center\":\r\n\r\n\t\t\t\t\tif(this.element.scrollHeight - this.element.scrollTop == this.element.clientHeight){\r\n\t\t\t\t\t\tthis.element.scrollTop = this.element.scrollTop + (rowEl.offsetTop - this.element.scrollTop) - ((this.element.scrollHeight - rowEl.offsetTop) / 2);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.element.scrollTop = this.element.scrollTop - (this.element.clientHeight / 2);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase \"bottom\":\r\n\r\n\t\t\t\t\tif(this.element.scrollHeight - this.element.scrollTop == this.element.clientHeight){\r\n\t\t\t\t\t\tthis.element.scrollTop = this.element.scrollTop - (this.element.scrollHeight - rowEl.offsetTop) + rowEl.offsetHeight;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.element.scrollTop = this.element.scrollTop - this.element.clientHeight + rowEl.offsetHeight;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tresolve();\r\n\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Scroll Error - Row not visible\");\r\n\t\t\t\treject(\"Scroll Error - Row not visible\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t////////////////// Data Handling //////////////////\r\n\tsetData(data, renderInPosition, columnsChanged){\r\n\t\treturn new Promise((resolve, reject)=>{\r\n\t\t\tif(renderInPosition && this.getDisplayRows().length){\r\n\t\t\t\tif(this.table.options.pagination){\r\n\t\t\t\t\tthis._setDataActual(data, true);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.reRenderInPosition(() => {\r\n\t\t\t\t\t\tthis._setDataActual(data);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(this.table.options.autoColumns && columnsChanged){\r\n\t\t\t\t\tthis.table.columnManager.generateColumnsFromRowData(data);\r\n\t\t\t\t}\r\n\t\t\t\tthis.resetScroll();\r\n\r\n\t\t\t\tthis._setDataActual(data);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\r\n\t_setDataActual(data, renderInPosition){\r\n\t\tthis.table.options.dataLoading.call(this.table, data);\r\n\r\n\t\tthis._wipeElements();\r\n\r\n\t\tif(this.table.options.history && this.table.modExists(\"history\")){\r\n\t\t\tthis.table.modules.history.clear();\r\n\t\t}\r\n\r\n\t\tif(Array.isArray(data)){\r\n\r\n\t\t\tif(this.table.modExists(\"selectRow\")){\r\n\t\t\t\tthis.table.modules.selectRow.clearSelectionData();\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.options.reactiveData && this.table.modExists(\"reactiveData\", true)){\r\n\t\t\t\tthis.table.modules.reactiveData.watchData(data);\r\n\t\t\t}\r\n\r\n\t\t\tdata.forEach((def, i) => {\r\n\t\t\t\tif(def && typeof def === \"object\"){\r\n\t\t\t\t\tvar row = new Row(def, this);\r\n\t\t\t\t\tthis.rows.push(row);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Data Loading Warning - Invalid row data detected and ignored, expecting object but received:\", def);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.refreshActiveData(false, false, renderInPosition);\r\n\r\n\t\t\tthis.table.options.dataLoaded.call(this.table, data);\r\n\t\t}else{\r\n\t\t\tconsole.error(\"Data Loading Error - Unable to process data due to invalid data type \\nExpecting: array \\nReceived: \", typeof data, \"\\nData:     \", data);\r\n\t\t}\r\n\t}\r\n\r\n\t_wipeElements(){\r\n\t\tthis.rows.forEach((row) => {\r\n\t\t\trow.wipe();\r\n\t\t});\r\n\r\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\r\n\t\t\tthis.table.modules.groupRows.wipe();\r\n\t\t}\r\n\r\n\t\tthis.rows = [];\r\n\t\tthis.activeRows = [];\r\n\t\tthis.activeRowsCount = 0;\r\n\t\tthis.displayRows = [];\r\n\t\tthis.displayRowsCount = 0;\r\n\r\n\t\tthis.adjustTableSize();\r\n\t}\r\n\r\n\tdeleteRow(row, blockRedraw){\r\n\t\tvar allIndex = this.rows.indexOf(row),\r\n\t\tactiveIndex = this.activeRows.indexOf(row);\r\n\r\n\t\tif(activeIndex > -1){\r\n\t\t\tthis.activeRows.splice(activeIndex, 1);\r\n\t\t}\r\n\r\n\t\tif(allIndex > -1){\r\n\t\t\tthis.rows.splice(allIndex, 1);\r\n\t\t}\r\n\r\n\t\tthis.setActiveRows(this.activeRows);\r\n\r\n\t\tthis.displayRowIterator((rows) => {\r\n\t\t\tvar displayIndex = rows.indexOf(row);\r\n\r\n\t\t\tif(displayIndex > -1){\r\n\t\t\t\trows.splice(displayIndex, 1);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(!blockRedraw){\r\n\t\t\tthis.reRenderInPosition();\r\n\t\t}\r\n\r\n\t\tthis.regenerateRowNumbers();\r\n\r\n\t\tthis.table.options.rowDeleted.call(this.table, row.getComponent());\r\n\r\n\t\tif(this.table.options.dataChanged){\r\n\t\t\tthis.table.options.dataChanged.call(this.table, this.getData());\r\n\t\t}\r\n\r\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\r\n\t\t\tthis.table.modules.groupRows.updateGroupRows(true);\r\n\t\t}else if(this.table.options.pagination && this.table.modExists(\"page\")){\r\n\t\t\tthis.refreshActiveData(false, false, true);\r\n\t\t}else{\r\n\t\t\tif(this.table.options.pagination && this.table.modExists(\"page\")){\r\n\t\t\t\tthis.refreshActiveData(\"page\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\taddRow(data, pos, index, blockRedraw){\r\n\t\tvar row = this.addRowActual(data, pos, index, blockRedraw);\r\n\r\n\t\tif(this.table.options.history && this.table.modExists(\"history\")){\r\n\t\t\tthis.table.modules.history.action(\"rowAdd\", row, {data:data, pos:pos, index:index});\r\n\t\t}\r\n\r\n\t\treturn row;\r\n\t}\r\n\r\n\t//add multiple rows\r\n\taddRows(data, pos, index){\r\n\t\tvar length = 0,\r\n\t\trows = [];\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tpos = this.findAddRowPos(pos);\r\n\r\n\t\t\tif(!Array.isArray(data)){\r\n\t\t\t\tdata = [data];\r\n\t\t\t}\r\n\r\n\t\t\tlength = data.length - 1;\r\n\r\n\t\t\tif((typeof index == \"undefined\" && pos) || (typeof index !== \"undefined\" && !pos)){\r\n\t\t\t\tdata.reverse();\r\n\t\t\t}\r\n\r\n\t\t\tdata.forEach((item, i) => {\r\n\t\t\t\tvar row = this.addRow(item, pos, index, true);\r\n\t\t\t\trows.push(row);\r\n\t\t\t});\r\n\r\n\t\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\r\n\t\t\t\tthis.table.modules.groupRows.updateGroupRows(true);\r\n\t\t\t}else if(this.table.options.pagination && this.table.modExists(\"page\")){\r\n\t\t\t\tthis.refreshActiveData(false, false, true);\r\n\t\t\t}else{\r\n\t\t\t\tthis.reRenderInPosition();\r\n\t\t\t}\r\n\r\n\t\t\t//recalc column calculations if present\r\n\t\t\tif(this.table.modExists(\"columnCalcs\")){\r\n\t\t\t\tthis.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\r\n\t\t\t}\r\n\r\n\t\t\tthis.regenerateRowNumbers();\r\n\t\t\tresolve(rows);\r\n\t\t});\r\n\t}\r\n\r\n\tfindAddRowPos(pos){\r\n\t\tif(typeof pos === \"undefined\"){\r\n\t\t\tpos = this.table.options.addRowPos;\r\n\t\t}\r\n\r\n\t\tif(pos === \"pos\"){\r\n\t\t\tpos = true;\r\n\t\t}\r\n\r\n\t\tif(pos === \"bottom\"){\r\n\t\t\tpos = false;\r\n\t\t}\r\n\r\n\t\treturn pos;\r\n\t}\r\n\r\n\taddRowActual(data, pos, index, blockRedraw){\r\n\t\tvar row = data instanceof Row ? data : new Row(data || {}, this),\r\n\t\ttop = this.findAddRowPos(pos),\r\n\t\tallIndex = -1,\r\n\t\tactiveIndex, dispRows;\r\n\r\n\t\tif(!index && this.table.options.pagination && this.table.options.paginationAddRow == \"page\"){\r\n\t\t\tdispRows = this.getDisplayRows();\r\n\r\n\t\t\tif(top){\r\n\t\t\t\tif(dispRows.length){\r\n\t\t\t\t\tindex = dispRows[0];\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(this.activeRows.length){\r\n\t\t\t\t\t\tindex = this.activeRows[this.activeRows.length-1];\r\n\t\t\t\t\t\ttop = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(dispRows.length){\r\n\t\t\t\t\tindex = dispRows[dispRows.length - 1];\r\n\t\t\t\t\ttop = dispRows.length < this.table.modules.page.getPageSize() ? false : true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(typeof index !== \"undefined\"){\r\n\t\t\tindex = this.findRow(index);\r\n\t\t}\r\n\r\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\r\n\t\t\tthis.table.modules.groupRows.assignRowToGroup(row);\r\n\r\n\t\t\tvar groupRows = row.getGroup().rows;\r\n\r\n\t\t\tif(groupRows.length > 1){\r\n\r\n\t\t\t\tif(!index || (index && groupRows.indexOf(index) == -1)){\r\n\t\t\t\t\tif(top){\r\n\t\t\t\t\t\tif(groupRows[0] !== row){\r\n\t\t\t\t\t\t\tindex = groupRows[0];\r\n\t\t\t\t\t\t\tthis._moveRowInArray(row.getGroup().rows, row, index, !top);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(groupRows[groupRows.length -1] !== row){\r\n\t\t\t\t\t\t\tindex = groupRows[groupRows.length -1];\r\n\t\t\t\t\t\t\tthis._moveRowInArray(row.getGroup().rows, row, index, !top);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis._moveRowInArray(row.getGroup().rows, row, index, !top);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(index){\r\n\t\t\tallIndex = this.rows.indexOf(index);\r\n\t\t}\r\n\r\n\t\tif(index && allIndex > -1){\r\n\t\t\tactiveIndex = this.activeRows.indexOf(index);\r\n\r\n\t\t\tthis.displayRowIterator(function(rows){\r\n\t\t\t\tvar displayIndex = rows.indexOf(index);\r\n\r\n\t\t\t\tif(displayIndex > -1){\r\n\t\t\t\t\trows.splice((top ? displayIndex : displayIndex + 1), 0, row);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(activeIndex > -1){\r\n\t\t\t\tthis.activeRows.splice((top ? activeIndex : activeIndex + 1), 0, row);\r\n\t\t\t}\r\n\r\n\t\t\tthis.rows.splice((top ? allIndex : allIndex + 1), 0, row);\r\n\r\n\t\t}else{\r\n\r\n\t\t\tif(top){\r\n\r\n\t\t\t\tthis.displayRowIterator(function(rows){\r\n\t\t\t\t\trows.unshift(row);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.activeRows.unshift(row);\r\n\t\t\t\tthis.rows.unshift(row);\r\n\t\t\t}else{\r\n\t\t\t\tthis.displayRowIterator(function(rows){\r\n\t\t\t\t\trows.push(row);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.activeRows.push(row);\r\n\t\t\t\tthis.rows.push(row);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.setActiveRows(this.activeRows);\r\n\r\n\t\tthis.table.options.rowAdded.call(this.table, row.getComponent());\r\n\r\n\t\tif(this.table.options.dataChanged){\r\n\t\t\tthis.table.options.dataChanged.call(this.table, this.getData());\r\n\t\t}\r\n\r\n\t\tif(!blockRedraw){\r\n\t\t\tthis.reRenderInPosition();\r\n\t\t}\r\n\r\n\t\treturn row;\r\n\t}\r\n\r\n\tmoveRow(from, to, after){\r\n\t\tif(this.table.options.history && this.table.modExists(\"history\")){\r\n\t\t\tthis.table.modules.history.action(\"rowMove\", from, {posFrom:this.getRowPosition(from), posTo:this.getRowPosition(to), to:to, after:after});\r\n\t\t}\r\n\r\n\t\tthis.moveRowActual(from, to, after);\r\n\r\n\t\tthis.regenerateRowNumbers();\r\n\r\n\t\tthis.table.options.rowMoved.call(this.table, from.getComponent());\r\n\t}\r\n\r\n\tmoveRowActual(from, to, after){\r\n\t\tthis._moveRowInArray(this.rows, from, to, after);\r\n\t\tthis._moveRowInArray(this.activeRows, from, to, after);\r\n\r\n\t\tthis.displayRowIterator((rows) => {\r\n\t\t\tthis._moveRowInArray(rows, from, to, after);\r\n\t\t});\r\n\r\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\r\n\r\n\t\t\tif(!after && to instanceof Group){\r\n\t\t\t\tto = this.table.rowManager.prevDisplayRow(from) || to;\r\n\t\t\t}\r\n\r\n\t\t\tvar toGroup = to.getGroup();\r\n\t\t\tvar fromGroup = from.getGroup();\r\n\r\n\t\t\tif(toGroup === fromGroup){\r\n\t\t\t\tthis._moveRowInArray(toGroup.rows, from, to, after);\r\n\t\t\t}else{\r\n\t\t\t\tif(fromGroup){\r\n\t\t\t\t\tfromGroup.removeRow(from);\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttoGroup.insertRow(from, to, after);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t_moveRowInArray(rows, from, to, after){\r\n\t\tvar\tfromIndex, toIndex, start, end;\r\n\r\n\t\tif(from !== to){\r\n\r\n\t\t\tfromIndex = rows.indexOf(from);\r\n\r\n\t\t\tif (fromIndex > -1) {\r\n\r\n\t\t\t\trows.splice(fromIndex, 1);\r\n\r\n\t\t\t\ttoIndex = rows.indexOf(to);\r\n\r\n\t\t\t\tif (toIndex > -1) {\r\n\r\n\t\t\t\t\tif(after){\r\n\t\t\t\t\t\trows.splice(toIndex+1, 0, from);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\trows.splice(toIndex, 0, from);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}else{\r\n\t\t\t\t\trows.splice(fromIndex, 0, from);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//restyle rows\r\n\t\t\tif(rows === this.getDisplayRows()){\r\n\r\n\t\t\t\tstart = fromIndex < toIndex ? fromIndex : toIndex;\r\n\t\t\t\tend = toIndex > fromIndex ? toIndex : fromIndex +1;\r\n\r\n\t\t\t\tfor(let i = start; i <= end; i++){\r\n\t\t\t\t\tif(rows[i]){\r\n\t\t\t\t\t\tthis.styleRow(rows[i], i);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tclearData(){\r\n\t\tthis.setData([]);\r\n\t}\r\n\r\n\tgetRowIndex(row){\r\n\t\treturn this.findRowIndex(row, this.rows);\r\n\t}\r\n\r\n\tgetDisplayRowIndex(row){\r\n\t\tvar index = this.getDisplayRows().indexOf(row);\r\n\t\treturn index > -1 ? index : false;\r\n\t}\r\n\r\n\tnextDisplayRow(row, rowOnly){\r\n\t\tvar index = this.getDisplayRowIndex(row),\r\n\t\tnextRow = false;\r\n\r\n\r\n\t\tif(index !== false && index < this.displayRowsCount -1){\r\n\t\t\tnextRow = this.getDisplayRows()[index+1];\r\n\t\t}\r\n\r\n\t\tif(nextRow && (!(nextRow instanceof Row) || nextRow.type != \"row\")){\r\n\t\t\treturn this.nextDisplayRow(nextRow, rowOnly);\r\n\t\t}\r\n\r\n\t\treturn nextRow;\r\n\t}\r\n\r\n\tprevDisplayRow(row, rowOnly){\r\n\t\tvar index = this.getDisplayRowIndex(row),\r\n\t\tprevRow = false;\r\n\r\n\t\tif(index){\r\n\t\t\tprevRow = this.getDisplayRows()[index-1];\r\n\t\t}\r\n\r\n\t\tif(rowOnly && prevRow && (!(prevRow instanceof Row) || prevRow.type != \"row\")){\r\n\t\t\treturn this.prevDisplayRow(prevRow, rowOnly);\r\n\t\t}\r\n\r\n\t\treturn prevRow;\r\n\t}\r\n\r\n\tfindRowIndex(row, list){\r\n\t\tvar rowIndex;\r\n\r\n\t\trow = this.findRow(row);\r\n\r\n\t\tif(row){\r\n\t\t\trowIndex = list.indexOf(row);\r\n\r\n\t\t\tif(rowIndex > -1){\r\n\t\t\t\treturn rowIndex;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tgetData(active, transform){\r\n\t\tvar output = [],\r\n\t\trows = this.getRows(active);\r\n\r\n\t\trows.forEach(function(row){\r\n\t\t\tif(row.type == \"row\"){\r\n\t\t\t\toutput.push(row.getData(transform || \"data\"));\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgetComponents(active){\r\n\t\tvar\toutput = [],\r\n\t\trows = this.getRows(active);\r\n\r\n\t\trows.forEach(function(row){\r\n\t\t\toutput.push(row.getComponent());\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgetDataCount(active){\r\n\t\tvar rows = this.getRows(active);\r\n\r\n\t\treturn rows.length;\r\n\t}\r\n\r\n\t_genRemoteRequest(){\r\n\t\tvar table = this.table,\r\n\t\toptions = table.options,\r\n\t\tparams = {};\r\n\r\n\t\tif(table.modExists(\"page\")){\r\n\t\t\t//set sort data if defined\r\n\t\t\tif(options.ajaxSorting){\r\n\t\t\t\tlet sorters = this.table.modules.sort.getSort();\r\n\r\n\t\t\t\tsorters.forEach(function(item){\r\n\t\t\t\t\tdelete item.column;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tparams[this.table.modules.page.paginationDataSentNames.sorters] = sorters;\r\n\t\t\t}\r\n\r\n\t\t\t//set filter data if defined\r\n\t\t\tif(options.ajaxFiltering){\r\n\t\t\t\tlet filters = this.table.modules.filter.getFilters(true, true);\r\n\r\n\t\t\t\tparams[this.table.modules.page.paginationDataSentNames.filters] = filters;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tthis.table.modules.ajax.setParams(params, true);\r\n\t\t}\r\n\r\n\t\ttable.modules.ajax.sendRequest()\r\n\t\t.then((data)=>{\r\n\t\t\tthis._setDataActual(data, true);\r\n\t\t})\r\n\t\t.catch((e)=>{});\r\n\t}\r\n\r\n\t//choose the path to refresh data after a filter update\r\n\tfilterRefresh(){\r\n\t\tvar table = this.table,\r\n\t\toptions = table.options,\r\n\t\tleft = this.scrollLeft;\r\n\r\n\t\tif(options.ajaxFiltering){\r\n\t\t\tif(options.pagination == \"remote\" && table.modExists(\"page\")){\r\n\t\t\t\ttable.modules.page.reset(true);\r\n\t\t\t\ttable.modules.page.setPage(1).then(()=>{}).catch(()=>{});\r\n\t\t\t}else if(options.ajaxProgressiveLoad){\r\n\t\t\t\ttable.modules.ajax.loadData().then(()=>{}).catch(()=>{});\r\n\t\t\t}else{\r\n\t\t\t\t//assume data is url, make ajax call to url to get data\r\n\t\t\t\tthis._genRemoteRequest();\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.refreshActiveData(\"filter\");\r\n\t\t}\r\n\r\n\t\tthis.scrollHorizontal(left);\r\n\t}\r\n\r\n\t//choose the path to refresh data after a sorter update\r\n\tsorterRefresh(loadOrignalData){\r\n\t\tvar table = this.table,\r\n\t\toptions = this.table.options,\r\n\t\tleft = this.scrollLeft;\r\n\r\n\t\tif(options.ajaxSorting){\r\n\t\t\tif((options.pagination == \"remote\" || options.progressiveLoad) && table.modExists(\"page\")){\r\n\t\t\t\ttable.modules.page.reset(true);\r\n\t\t\t\ttable.modules.page.setPage(1).then(()=>{}).catch(()=>{});\r\n\t\t\t}else if(options.ajaxProgressiveLoad){\r\n\t\t\t\ttable.modules.ajax.loadData().then(()=>{}).catch(()=>{});\r\n\t\t\t}else{\r\n\t\t\t\t//assume data is url, make ajax call to url to get data\r\n\t\t\t\tthis._genRemoteRequest();\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.refreshActiveData(loadOrignalData ? \"filter\" : \"sort\");\r\n\t\t}\r\n\r\n\t\tthis.scrollHorizontal(left);\r\n\t}\r\n\r\n\tscrollHorizontal(left){\r\n\t\tthis.scrollLeft = left;\r\n\t\tthis.element.scrollLeft = left;\r\n\r\n\t\tif(this.table.options.groupBy){\r\n\t\t\tthis.table.modules.groupRows.scrollHeaders(left);\r\n\t\t}\r\n\r\n\t\tif(this.table.modExists(\"columnCalcs\")){\r\n\t\t\tthis.table.modules.columnCalcs.scrollHorizontal(left);\r\n\t\t}\r\n\t}\r\n\r\n\t//set active data set\r\n\trefreshActiveData(stage, skipStage, renderInPosition){\r\n\t\tvar table = this.table,\r\n\t\tcascadeOrder = [\"all\", \"filter\", \"sort\", \"display\", \"freeze\", \"group\", \"tree\", \"page\"],\r\n\t\tdisplayIndex;\r\n\r\n\t\tif(this.redrawBlock){\r\n\r\n\t\t\tif(!this.redrawBlockRestoreConfig || (cascadeOrder.indexOf(stage) < cascadeOrder.indexOf(this.redrawBlockRestoreConfig.stage))){\r\n\t\t\t\tthis.redrawBlockRestoreConfig = {\r\n\t\t\t\t\tstage: stage,\r\n\t\t\t\t\tskipStage: skipStage,\r\n\t\t\t\t\trenderInPosition: renderInPosition,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\t\t}else{\r\n\r\n\t\t\tif(this.table.modExists(\"edit\")){\r\n\t\t\t\tthis.table.modules.edit.cancelEdit();\r\n\t\t\t}\r\n\r\n\t\t\tif(!stage){\r\n\t\t\t\tstage = \"all\";\r\n\t\t\t}\r\n\r\n\t\t\tif(table.options.selectable && !table.options.selectablePersistence && table.modExists(\"selectRow\")){\r\n\t\t\t\ttable.modules.selectRow.deselectRows();\r\n\t\t\t}\r\n\r\n\t\t\t//cascade through data refresh stages\r\n\t\t\tswitch(stage){\r\n\t\t\t\tcase \"all\":\r\n\r\n\t\t\t\tcase \"filter\":\r\n\t\t\t\tif(!skipStage){\r\n\t\t\t\t\tif(table.modExists(\"filter\")){\r\n\t\t\t\t\t\tthis.setActiveRows(table.modules.filter.filter(this.rows));\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.setActiveRows(this.rows.slice(0));\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tskipStage = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcase \"sort\":\r\n\t\t\t\tif(!skipStage){\r\n\t\t\t\t\tif(table.modExists(\"sort\")){\r\n\t\t\t\t\t\ttable.modules.sort.sort(this.activeRows);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tskipStage = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//regenerate row numbers for row number formatter if in use\r\n\t\t\t\tthis.regenerateRowNumbers();\r\n\r\n\t\t\t\t//generic stage to allow for pipeline trigger after the data manipulation stage\r\n\t\t\t\tcase \"display\":\r\n\t\t\t\tthis.resetDisplayRows();\r\n\r\n\t\t\t\tcase \"freeze\":\r\n\t\t\t\tif(!skipStage){\r\n\t\t\t\t\tif(this.table.modExists(\"frozenRows\")){\r\n\t\t\t\t\t\tif(table.modules.frozenRows.isFrozen()){\r\n\t\t\t\t\t\t\tif(!table.modules.frozenRows.getDisplayIndex()){\r\n\t\t\t\t\t\t\t\ttable.modules.frozenRows.setDisplayIndex(this.getNextDisplayIndex());\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tdisplayIndex = table.modules.frozenRows.getDisplayIndex();\r\n\r\n\t\t\t\t\t\t\tdisplayIndex = this.setDisplayRows(table.modules.frozenRows.getRows(this.getDisplayRows(displayIndex - 1)), displayIndex);\r\n\r\n\t\t\t\t\t\t\tif(displayIndex !== true){\r\n\t\t\t\t\t\t\t\ttable.modules.frozenRows.setDisplayIndex(displayIndex);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tskipStage = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcase \"group\":\r\n\t\t\t\tif(!skipStage){\r\n\t\t\t\t\tif(table.options.groupBy && table.modExists(\"groupRows\")){\r\n\r\n\t\t\t\t\t\tif(!table.modules.groupRows.getDisplayIndex()){\r\n\t\t\t\t\t\t\ttable.modules.groupRows.setDisplayIndex(this.getNextDisplayIndex());\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tdisplayIndex = table.modules.groupRows.getDisplayIndex();\r\n\r\n\t\t\t\t\t\tdisplayIndex = this.setDisplayRows(table.modules.groupRows.getRows(this.getDisplayRows(displayIndex - 1)), displayIndex);\r\n\r\n\t\t\t\t\t\tif(displayIndex !== true){\r\n\t\t\t\t\t\t\ttable.modules.groupRows.setDisplayIndex(displayIndex);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tskipStage = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcase \"tree\":\r\n\r\n\t\t\t\tif(!skipStage){\r\n\t\t\t\t\tif(table.options.dataTree && table.modExists(\"dataTree\")){\r\n\t\t\t\t\t\tif(!table.modules.dataTree.getDisplayIndex()){\r\n\t\t\t\t\t\t\ttable.modules.dataTree.setDisplayIndex(this.getNextDisplayIndex());\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tdisplayIndex = table.modules.dataTree.getDisplayIndex();\r\n\r\n\t\t\t\t\t\tdisplayIndex = this.setDisplayRows(table.modules.dataTree.getRows(this.getDisplayRows(displayIndex - 1)), displayIndex);\r\n\r\n\t\t\t\t\t\tif(displayIndex !== true){\r\n\t\t\t\t\t\t\ttable.modules.dataTree.setDisplayIndex(displayIndex);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tskipStage = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(table.options.pagination && table.modExists(\"page\") && !renderInPosition){\r\n\t\t\t\t\tif(table.modules.page.getMode() == \"local\"){\r\n\t\t\t\t\t\ttable.modules.page.reset();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcase \"page\":\r\n\t\t\t\tif(!skipStage){\r\n\t\t\t\t\tif(table.options.pagination && table.modExists(\"page\")){\r\n\r\n\t\t\t\t\t\tif(!table.modules.page.getDisplayIndex()){\r\n\t\t\t\t\t\t\ttable.modules.page.setDisplayIndex(this.getNextDisplayIndex());\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tdisplayIndex = table.modules.page.getDisplayIndex();\r\n\r\n\t\t\t\t\t\tif(table.modules.page.getMode() == \"local\"){\r\n\t\t\t\t\t\t\ttable.modules.page.setMaxRows(this.getDisplayRows(displayIndex - 1).length);\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\tdisplayIndex = this.setDisplayRows(table.modules.page.getRows(this.getDisplayRows(displayIndex - 1)), displayIndex);\r\n\r\n\t\t\t\t\t\tif(displayIndex !== true){\r\n\t\t\t\t\t\t\ttable.modules.page.setDisplayIndex(displayIndex);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tskipStage = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif(Helpers.elVisible(this.element)){\r\n\t\t\t\tif(renderInPosition){\r\n\t\t\t\t\tthis.reRenderInPosition();\r\n\t\t\t\t}else{\r\n\r\n\t\t\t\t\tif(stage === \"all\" && this.table.options.virtualDomHoz){\r\n\t\t\t\t\t\tthis.table.vdomHoz.dataChange();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.renderTable();\r\n\r\n\t\t\t\t\tif(table.options.layoutColumnsOnNewData){\r\n\t\t\t\t\t\tthis.table.columnManager.redraw(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(table.modExists(\"columnCalcs\")){\r\n\t\t\t\ttable.modules.columnCalcs.recalc(this.activeRows);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//regenerate row numbers for row number formatter if in use\r\n\tregenerateRowNumbers(){\r\n\t\tif(this.rowNumColumn){\r\n\t\t\tthis.activeRows.forEach((row) => {\r\n\t\t\t\tvar cell = row.getCell(this.rowNumColumn);\r\n\r\n\t\t\t\tif(cell){\r\n\t\t\t\t\tcell._generateContents();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tsetActiveRows(activeRows){\r\n\t\tthis.activeRows = activeRows;\r\n\t\tthis.activeRowsCount = this.activeRows.length;\r\n\t}\r\n\r\n\t//reset display rows array\r\n\tresetDisplayRows(){\r\n\t\tthis.displayRows = [];\r\n\r\n\t\tthis.displayRows.push(this.activeRows.slice(0));\r\n\r\n\t\tthis.displayRowsCount = this.displayRows[0].length;\r\n\r\n\t\tif(this.table.modExists(\"frozenRows\")){\r\n\t\t\tthis.table.modules.frozenRows.setDisplayIndex(0);\r\n\t\t}\r\n\r\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\r\n\t\t\tthis.table.modules.groupRows.setDisplayIndex(0);\r\n\t\t}\r\n\r\n\t\tif(this.table.options.pagination && this.table.modExists(\"page\")){\r\n\t\t\tthis.table.modules.page.setDisplayIndex(0);\r\n\t\t}\r\n\t}\r\n\r\n\tgetNextDisplayIndex(){\r\n\t\treturn this.displayRows.length;\r\n\t}\r\n\r\n\t//set display row pipeline data\r\n\tsetDisplayRows(displayRows, index){\r\n\r\n\t\tvar output = true;\r\n\r\n\t\tif(index && typeof this.displayRows[index] != \"undefined\"){\r\n\t\t\tthis.displayRows[index] = displayRows;\r\n\t\t\toutput = true;\r\n\t\t}else{\r\n\t\t\tthis.displayRows.push(displayRows)\r\n\t\t\toutput = index = this.displayRows.length -1;\r\n\t\t}\r\n\r\n\t\tif(index == this.displayRows.length -1){\r\n\t\t\tthis.displayRowsCount = this.displayRows[this.displayRows.length -1].length;\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgetDisplayRows(index){\r\n\t\tif(typeof index == \"undefined\"){\r\n\t\t\treturn this.displayRows.length ? this.displayRows[this.displayRows.length -1] : [];\r\n\t\t}else{\r\n\t\t\treturn this.displayRows[index] || [];\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgetVisibleRows(viewable){\r\n\t\tvar topEdge = this.element.scrollTop,\r\n\t\tbottomEdge = this.element.clientHeight + topEdge,\r\n\t\ttopFound = false,\r\n\t\ttopRow = 0,\r\n\t\tbottomRow = 0,\r\n\t\trows = this.getDisplayRows();\r\n\r\n\t\tif(viewable){\r\n\r\n\t\t\tthis.getDisplayRows();\r\n\t\t\tfor(var i = this.vDomTop; i <= this.vDomBottom; i++){\r\n\t\t\t\tif(rows[i]){\r\n\t\t\t\t\tif(!topFound){\r\n\t\t\t\t\t\tif((topEdge - rows[i].getElement().offsetTop) >= 0){\r\n\t\t\t\t\t\t\ttopRow = i;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\ttopFound = true;\r\n\r\n\t\t\t\t\t\t\tif(bottomEdge - rows[i].getElement().offsetTop >= 0){\r\n\t\t\t\t\t\t\t\tbottomRow = i;\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(bottomEdge - rows[i].getElement().offsetTop >= 0){\r\n\t\t\t\t\t\t\tbottomRow = i;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\ttopRow = this.vDomTop;\r\n\t\t\tbottomRow = this.vDomBottom;\r\n\t\t}\r\n\r\n\t\treturn rows.slice(topRow, bottomRow + 1);\r\n\t}\r\n\r\n\t//repeat action accross display rows\r\n\tdisplayRowIterator(callback){\r\n\t\tthis.displayRows.forEach(callback);\r\n\r\n\t\tthis.displayRowsCount = this.displayRows[this.displayRows.length -1].length;\r\n\t}\r\n\r\n\t//return only actual rows (not group headers etc)\r\n\tgetRows(active){\r\n\t\tvar rows;\r\n\r\n\t\tswitch(active){\r\n\t\t\tcase \"active\":\r\n\t\t\trows = this.activeRows;\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"display\":\r\n\t\t\trows = this.table.rowManager.getDisplayRows();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"visible\":\r\n\t\t\trows = this.getVisibleRows(true);\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"selected\":\r\n\t\t\trows = this.table.modules.selectRow.selectedRows;\r\n\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\trows = this.rows;\r\n\t\t}\r\n\r\n\t\treturn rows;\r\n\t}\r\n\r\n\t///////////////// Table Rendering /////////////////\r\n\t//trigger rerender of table in current position\r\n\treRenderInPosition(callback){\r\n\t\tif(this.getRenderMode() == \"virtual\"){\r\n\r\n\t\t\tif(this.redrawBlock){\r\n\t\t\t\tif(callback){\r\n\t\t\t\t\tcallback();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.redrawBlockRederInPosition = true;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tvar scrollTop = this.element.scrollTop;\r\n\t\t\t\tvar topRow = false;\r\n\t\t\t\tvar topOffset = false;\r\n\r\n\t\t\t\tvar left = this.scrollLeft;\r\n\r\n\t\t\t\tvar rows = this.getDisplayRows();\r\n\r\n\t\t\t\tfor(var i = this.vDomTop; i <= this.vDomBottom; i++){\r\n\r\n\t\t\t\t\tif(rows[i]){\r\n\t\t\t\t\t\tvar diff = scrollTop - rows[i].getElement().offsetTop;\r\n\r\n\t\t\t\t\t\tif(topOffset === false || Math.abs(diff) < topOffset){\r\n\t\t\t\t\t\t\ttopOffset = diff;\r\n\t\t\t\t\t\t\ttopRow = i;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(callback){\r\n\t\t\t\t\tcallback();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._virtualRenderFill((topRow === false ? this.displayRowsCount - 1 : topRow), true, topOffset || 0);\r\n\r\n\t\t\t\tthis.scrollHorizontal(left);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.renderTable();\r\n\r\n\t\t\tif(callback){\r\n\t\t\t\tcallback();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsetRenderMode(){\r\n\r\n\t\tif(this.table.options.virtualDom){\r\n\r\n\t\t\tthis.renderMode = \"virtual\";\r\n\r\n\t\t\tif((this.table.element.clientHeight || this.table.options.height)){\r\n\t\t\t\tthis.fixedHeight = true;\r\n\t\t\t}else{\r\n\t\t\t\tthis.fixedHeight = false;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.renderMode = \"classic\";\r\n\t\t}\r\n\t}\r\n\r\n\tgetRenderMode(){\r\n\t\treturn this.renderMode;\r\n\t}\r\n\r\n\trenderTable(){\r\n\r\n\t\tthis.table.options.renderStarted.call(this.table);\r\n\r\n\t\tthis.element.scrollTop = 0;\r\n\r\n\t\tswitch(this.renderMode){\r\n\t\t\tcase \"classic\":\r\n\t\t\tthis._simpleRender();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"virtual\":\r\n\t\t\tthis._virtualRenderFill();\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tif(this.firstRender){\r\n\t\t\tif(this.displayRowsCount){\r\n\t\t\t\tthis.firstRender = false;\r\n\t\t\t\tthis.table.modules.layout.layout();\r\n\t\t\t}else{\r\n\t\t\t\tthis.renderEmptyScroll();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.table.modExists(\"frozenColumns\")){\r\n\t\t\tthis.table.modules.frozenColumns.layout();\r\n\t\t}\r\n\r\n\t\tif(!this.displayRowsCount){\r\n\t\t\tif(this.table.options.placeholder){\r\n\r\n\t\t\t\tthis.table.options.placeholder.setAttribute(\"tabulator-render-mode\", this.renderMode);\r\n\r\n\t\t\t\tthis.getElement().appendChild(this.table.options.placeholder);\r\n\t\t\t\tthis.table.options.placeholder.style.width = this.table.columnManager.getWidth() + \"px\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.table.options.renderComplete.call(this.table);\r\n\t}\r\n\r\n\t//simple render on heightless table\r\n\t_simpleRender(){\r\n\t\tthis._clearVirtualDom();\r\n\r\n\t\tif(this.displayRowsCount){\r\n\t\t\tthis.checkClassicModeGroupHeaderWidth();\r\n\t\t}else{\r\n\t\t\tthis.renderEmptyScroll();\r\n\t\t}\r\n\t}\r\n\r\n\tcheckClassicModeGroupHeaderWidth(){\r\n\t\tvar element = this.tableElement,\r\n\t\tonlyGroupHeaders = true;\r\n\r\n\t\tthis.getDisplayRows().forEach((row, index) => {\r\n\t\t\tthis.styleRow(row, index);\r\n\t\t\telement.appendChild(row.getElement());\r\n\t\t\trow.initialize(true);\r\n\r\n\t\t\tif(row.type !== \"group\"){\r\n\t\t\t\tonlyGroupHeaders = false;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(onlyGroupHeaders){\r\n\t\t\telement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\r\n\t\t}else{\r\n\t\t\telement.style.minWidth = \"\";\r\n\t\t}\r\n\t}\r\n\r\n\t//show scrollbars on empty table div\r\n\trenderEmptyScroll(){\r\n\t\tif(this.table.options.placeholder){\r\n\t\t\tthis.tableElement.style.display = \"none\";\r\n\t\t}else{\r\n\t\t\tthis.tableElement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\r\n\t\t\t// this.tableElement.style.minHeight = \"1px\";\r\n\t\t\t// this.tableElement.style.visibility = \"hidden\";\r\n\t\t}\r\n\t}\r\n\r\n\t_clearVirtualDom(){\r\n\t\tvar element = this.tableElement;\r\n\r\n\t\tif(this.table.options.placeholder && this.table.options.placeholder.parentNode){\r\n\t\t\tthis.table.options.placeholder.parentNode.removeChild(this.table.options.placeholder);\r\n\t\t}\r\n\r\n\t\t// element.children.detach();\r\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\r\n\r\n\t\telement.style.paddingTop = \"\";\r\n\t\telement.style.paddingBottom = \"\";\r\n\t\telement.style.minWidth = \"\";\r\n\t\telement.style.minHeight = \"\";\r\n\t\telement.style.display = \"\";\r\n\t\telement.style.visibility = \"\";\r\n\r\n\t\tthis.scrollTop = 0;\r\n\t\tthis.scrollLeft = 0;\r\n\t\tthis.vDomTop = 0;\r\n\t\tthis.vDomBottom = 0;\r\n\t\tthis.vDomTopPad = 0;\r\n\t\tthis.vDomBottomPad = 0;\r\n\t}\r\n\r\n\tstyleRow(row, index){\r\n\t\tvar rowEl = row.getElement();\r\n\r\n\t\tif(index % 2){\r\n\t\t\trowEl.classList.add(\"tabulator-row-even\");\r\n\t\t\trowEl.classList.remove(\"tabulator-row-odd\");\r\n\t\t}else{\r\n\t\t\trowEl.classList.add(\"tabulator-row-odd\");\r\n\t\t\trowEl.classList.remove(\"tabulator-row-even\");\r\n\t\t}\r\n\t}\r\n\r\n\t//full virtual render\r\n\t_virtualRenderFill(position, forceMove, offset){\r\n\t\tvar\telement = this.tableElement,\r\n\t\tholder = this.element,\r\n\t\ttopPad = 0,\r\n\t\trowsHeight = 0,\r\n\t\ttopPadHeight = 0,\r\n\t\ti = 0,\r\n\t\tonlyGroupHeaders = true,\r\n\t\trows = this.getDisplayRows();\r\n\r\n\t\tposition = position || 0;\r\n\r\n\t\toffset = offset || 0;\r\n\r\n\t\tif(!position){\r\n\t\t\tthis._clearVirtualDom();\r\n\t\t}else{\r\n\t\t\twhile(element.firstChild) element.removeChild(element.firstChild);\r\n\r\n\t\t\t//check if position is too close to bottom of table\r\n\t\t\tlet heightOccupied  = (this.displayRowsCount - position + 1) * this.vDomRowHeight;\r\n\r\n\t\t\tif(heightOccupied  < this.height){\r\n\t\t\t\tposition -= Math.ceil((this.height - heightOccupied ) / this.vDomRowHeight);\r\n\r\n\t\t\t\tif(position < 0){\r\n\t\t\t\t\tposition = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//calculate initial pad\r\n\t\t\ttopPad = Math.min(Math.max(Math.floor(this.vDomWindowBuffer / this.vDomRowHeight),  this.vDomWindowMinMarginRows), position);\r\n\t\t\tposition -= topPad;\r\n\t\t}\r\n\r\n\t\tif(this.displayRowsCount && Helpers.elVisible(this.element)){\r\n\t\t\tthis.vDomTop = position;\r\n\r\n\t\t\tthis.vDomBottom = position -1;\r\n\r\n\t\t\twhile ((rowsHeight <= this.height + this.vDomWindowBuffer || i < this.vDomWindowMinTotalRows) && this.vDomBottom < this.displayRowsCount -1){\r\n\t\t\t\tvar index = this.vDomBottom + 1,\r\n\t\t\t\trow = rows[index],\r\n\t\t\t\trowHeight = 0;\r\n\r\n\t\t\t\tthis.styleRow(row, index);\r\n\r\n\t\t\t\telement.appendChild(row.getElement());\r\n\r\n\t\t\t\trow.initialize();\r\n\r\n\t\t\t\tif(!row.heightInitialized){\r\n\t\t\t\t\trow.normalizeHeight(true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\trowHeight = row.getHeight();\r\n\r\n\t\t\t\tif(i < topPad){\r\n\t\t\t\t\ttopPadHeight += rowHeight;\r\n\t\t\t\t}else{\r\n\t\t\t\t\trowsHeight += rowHeight;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(rowHeight > this.vDomWindowBuffer){\r\n\t\t\t\t\tthis.vDomWindowBuffer = rowHeight * 2;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(row.type !== \"group\"){\r\n\t\t\t\t\tonlyGroupHeaders = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.vDomBottom ++;\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\r\n\t\t\tif(!position){\r\n\t\t\t\tthis.vDomTopPad = 0;\r\n\t\t\t\t//adjust rowheight to match average of rendered elements\r\n\t\t\t\tthis.vDomRowHeight = Math.floor((rowsHeight + topPadHeight) / i);\r\n\t\t\t\tthis.vDomBottomPad = this.vDomRowHeight * (this.displayRowsCount - this.vDomBottom -1);\r\n\r\n\t\t\t\tthis.vDomScrollHeight = topPadHeight + rowsHeight + this.vDomBottomPad - this.height;\r\n\t\t\t}else{\r\n\t\t\t\tthis.vDomTopPad = !forceMove ? this.scrollTop - topPadHeight : (this.vDomRowHeight * this.vDomTop) + offset;\r\n\t\t\t\tthis.vDomBottomPad = this.vDomBottom == this.displayRowsCount-1 ? 0 : Math.max(this.vDomScrollHeight - this.vDomTopPad - rowsHeight - topPadHeight, 0);\r\n\t\t\t}\r\n\r\n\t\t\telement.style.paddingTop = this.vDomTopPad + \"px\";\r\n\t\t\telement.style.paddingBottom = this.vDomBottomPad + \"px\";\r\n\r\n\t\t\tif(forceMove){\r\n\t\t\t\tthis.scrollTop = this.vDomTopPad + (topPadHeight) + offset - (this.element.scrollWidth > this.element.clientWidth ? this.element.offsetHeight - this.element.clientHeight : 0);\r\n\t\t\t}\r\n\r\n\t\t\tthis.scrollTop = Math.min(this.scrollTop, this.element.scrollHeight - this.height);\r\n\r\n\t\t\t//adjust for horizontal scrollbar if present (and not at top of table)\r\n\t\t\tif(this.element.scrollWidth > this.element.offsetWidth && forceMove){\r\n\t\t\t\tthis.scrollTop += this.element.offsetHeight - this.element.clientHeight;\r\n\t\t\t}\r\n\r\n\t\t\tthis.vDomScrollPosTop = this.scrollTop;\r\n\t\t\tthis.vDomScrollPosBottom = this.scrollTop;\r\n\r\n\t\t\tholder.scrollTop = this.scrollTop;\r\n\r\n\t\t\telement.style.minWidth = onlyGroupHeaders ? this.table.columnManager.getWidth() + \"px\" : \"\";\r\n\r\n\t\t\tif(this.table.options.groupBy){\r\n\t\t\t\tif(this.table.modules.layout.getMode() != \"fitDataFill\" && this.displayRowsCount == this.table.modules.groupRows.countGroups()){\r\n\t\t\t\t\tthis.tableElement.style.minWidth = this.table.columnManager.getWidth();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.renderEmptyScroll();\r\n\t\t}\r\n\r\n\t\tif(!this.fixedHeight){\r\n\t\t\tthis.adjustTableSize();\r\n\t\t}\r\n\t}\r\n\r\n\t//handle vertical scrolling\r\n\tscrollVertical(dir){\r\n\t\tvar topDiff = this.scrollTop - this.vDomScrollPosTop;\r\n\t\tvar bottomDiff = this.scrollTop - this.vDomScrollPosBottom;\r\n\t\tvar margin = this.vDomWindowBuffer * 2;\r\n\r\n\t\tif(-topDiff > margin || bottomDiff > margin){\r\n\t\t\t//if big scroll redraw table;\r\n\t\t\tvar left = this.scrollLeft;\r\n\t\t\tthis._virtualRenderFill(Math.floor((this.element.scrollTop / this.element.scrollHeight) * this.displayRowsCount));\r\n\t\t\tthis.scrollHorizontal(left);\r\n\t\t}else{\r\n\r\n\t\t\tif(dir){\r\n\t\t\t\t//scrolling up\r\n\t\t\t\tif(topDiff < 0){\r\n\r\n\t\t\t\t\tthis._addTopRow(-topDiff);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(bottomDiff < 0){\r\n\r\n\t\t\t\t\t//hide bottom row if needed\r\n\t\t\t\t\tif(this.vDomScrollHeight - this.scrollTop > this.vDomWindowBuffer){\r\n\t\t\t\t\t\tthis._removeBottomRow(-bottomDiff);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.vDomScrollPosBottom = this.scrollTop;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\t//scrolling down\r\n\t\t\t\tif(topDiff >= 0){\r\n\r\n\t\t\t\t\t//hide top row if needed\r\n\t\t\t\t\tif(this.scrollTop > this.vDomWindowBuffer){\r\n\r\n\t\t\t\t\t\tthis._removeTopRow(topDiff);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.vDomScrollPosTop = this.scrollTop;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(bottomDiff >= 0){\r\n\r\n\t\t\t\t\tthis._addBottomRow(bottomDiff);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t_addTopRow(topDiff, i=0){\r\n\t\tvar table = this.tableElement,\r\n\t\trows = this.getDisplayRows();\r\n\r\n\t\tif(this.vDomTop){\r\n\t\t\tlet index = this.vDomTop -1,\r\n\t\t\ttopRow = rows[index],\r\n\t\t\ttopRowHeight = topRow.getHeight() || this.vDomRowHeight;\r\n\r\n\t\t\t//hide top row if needed\r\n\t\t\tif(topDiff >= topRowHeight){\r\n\t\t\t\tthis.styleRow(topRow, index);\r\n\t\t\t\ttable.insertBefore(topRow.getElement(), table.firstChild);\r\n\t\t\t\tif(!topRow.initialized || !topRow.heightInitialized){\r\n\t\t\t\t\tthis.vDomTopNewRows.push(topRow);\r\n\r\n\t\t\t\t\tif(!topRow.heightInitialized){\r\n\t\t\t\t\t\ttopRow.clearCellHeight();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttopRow.initialize();\r\n\r\n\t\t\t\tthis.vDomTopPad -= topRowHeight;\r\n\r\n\t\t\t\tif(this.vDomTopPad < 0){\r\n\t\t\t\t\tthis.vDomTopPad = index * this.vDomRowHeight;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!index){\r\n\t\t\t\t\tthis.vDomTopPad = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttable.style.paddingTop = this.vDomTopPad + \"px\";\r\n\t\t\t\tthis.vDomScrollPosTop -= topRowHeight;\r\n\t\t\t\tthis.vDomTop--;\r\n\t\t\t}\r\n\r\n\t\t\ttopDiff = -(this.scrollTop - this.vDomScrollPosTop);\r\n\r\n\t\t\tif(topRow.getHeight() > this.vDomWindowBuffer){\r\n\t\t\t\tthis.vDomWindowBuffer = topRow.getHeight() * 2;\r\n\t\t\t}\r\n\r\n\t\t\tif(i < this.vDomMaxRenderChain && this.vDomTop && topDiff >= (rows[this.vDomTop -1].getHeight() || this.vDomRowHeight)){\r\n\t\t\t\tthis._addTopRow(topDiff, i+1);\r\n\t\t\t}else{\r\n\t\t\t\tthis._quickNormalizeRowHeight(this.vDomTopNewRows);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t_removeTopRow(topDiff){\r\n\t\tvar table = this.tableElement,\r\n\t\ttopRow = this.getDisplayRows()[this.vDomTop],\r\n\t\ttopRowHeight = topRow.getHeight() || this.vDomRowHeight;\r\n\r\n\t\tif(topDiff >= topRowHeight){\r\n\r\n\t\t\tvar rowEl = topRow.getElement();\r\n\t\t\trowEl.parentNode.removeChild(rowEl);\r\n\r\n\t\t\tthis.vDomTopPad += topRowHeight;\r\n\t\t\ttable.style.paddingTop = this.vDomTopPad + \"px\";\r\n\t\t\tthis.vDomScrollPosTop += this.vDomTop ? topRowHeight : topRowHeight + this.vDomWindowBuffer;\r\n\t\t\tthis.vDomTop++;\r\n\r\n\t\t\ttopDiff = this.scrollTop - this.vDomScrollPosTop;\r\n\r\n\t\t\tthis._removeTopRow(topDiff);\r\n\t\t}\r\n\t}\r\n\r\n\t_addBottomRow(bottomDiff, i=0){\r\n\t\tvar table = this.tableElement,\r\n\t\trows = this.getDisplayRows();\r\n\r\n\t\tif(this.vDomBottom < this.displayRowsCount -1){\r\n\t\t\tlet index = this.vDomBottom + 1,\r\n\t\t\tbottomRow = rows[index],\r\n\t\t\tbottomRowHeight = bottomRow.getHeight() || this.vDomRowHeight;\r\n\r\n\t\t\t//hide bottom row if needed\r\n\t\t\tif(bottomDiff >= bottomRowHeight){\r\n\t\t\t\tthis.styleRow(bottomRow, index);\r\n\t\t\t\ttable.appendChild(bottomRow.getElement());\r\n\r\n\t\t\t\tif(!bottomRow.initialized || !bottomRow.heightInitialized){\r\n\t\t\t\t\tthis.vDomBottomNewRows.push(bottomRow);\r\n\r\n\t\t\t\t\tif(!bottomRow.heightInitialized){\r\n\t\t\t\t\t\tbottomRow.clearCellHeight();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbottomRow.initialize();\r\n\r\n\t\t\t\tthis.vDomBottomPad -= bottomRowHeight;\r\n\r\n\t\t\t\tif(this.vDomBottomPad < 0 || index == this.displayRowsCount -1){\r\n\t\t\t\t\tthis.vDomBottomPad = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttable.style.paddingBottom = this.vDomBottomPad + \"px\";\r\n\t\t\t\tthis.vDomScrollPosBottom += bottomRowHeight;\r\n\t\t\t\tthis.vDomBottom++;\r\n\t\t\t}\r\n\r\n\t\t\tbottomDiff = this.scrollTop - this.vDomScrollPosBottom;\r\n\r\n\t\t\tif(bottomRow.getHeight() > this.vDomWindowBuffer){\r\n\t\t\t\tthis.vDomWindowBuffer = bottomRow.getHeight() * 2;\r\n\t\t\t}\r\n\r\n\t\t\tif(i < this.vDomMaxRenderChain && this.vDomBottom < this.displayRowsCount -1 && bottomDiff >= (rows[this.vDomBottom + 1].getHeight() || this.vDomRowHeight)){\r\n\t\t\t\tthis._addBottomRow(bottomDiff, i+1);\r\n\t\t\t}else{\r\n\t\t\t\tthis._quickNormalizeRowHeight(this.vDomBottomNewRows);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t_removeBottomRow(bottomDiff){\r\n\t\tvar table = this.tableElement,\r\n\t\tbottomRow = this.getDisplayRows()[this.vDomBottom],\r\n\t\tbottomRowHeight = bottomRow.getHeight() || this.vDomRowHeight;\r\n\r\n\t\tif(bottomDiff >= bottomRowHeight){\r\n\r\n\t\t\tvar rowEl = bottomRow.getElement();\r\n\r\n\t\t\tif(rowEl.parentNode){\r\n\t\t\t\trowEl.parentNode.removeChild(rowEl);\r\n\t\t\t}\r\n\r\n\t\t\tthis.vDomBottomPad += bottomRowHeight;\r\n\r\n\t\t\tif(this.vDomBottomPad < 0){\r\n\t\t\t\tthis.vDomBottomPad = 0;\r\n\t\t\t}\r\n\r\n\t\t\ttable.style.paddingBottom = this.vDomBottomPad + \"px\";\r\n\t\t\tthis.vDomScrollPosBottom -= bottomRowHeight;\r\n\t\t\tthis.vDomBottom--;\r\n\r\n\t\t\tbottomDiff = -(this.scrollTop - this.vDomScrollPosBottom);\r\n\r\n\t\t\tthis._removeBottomRow(bottomDiff);\r\n\t\t}\r\n\t}\r\n\r\n\t_quickNormalizeRowHeight(rows){\r\n\t\trows.forEach(function(row){\r\n\t\t\trow.calcHeight();\r\n\t\t});\r\n\r\n\t\trows.forEach(function(row){\r\n\t\t\trow.setCellHeight();\r\n\t\t});\r\n\r\n\t\trows.length = 0;\r\n\t}\r\n\r\n\t//normalize height of active rows\r\n\tnormalizeHeight(){\r\n\t\tthis.activeRows.forEach(function(row){\r\n\t\t\trow.normalizeHeight();\r\n\t\t});\r\n\t}\r\n\r\n\t//adjust the height of the table holder to fit in the Tabulator element\r\n\tadjustTableSize(){\r\n\t\tvar initialHeight = this.element.clientHeight,\r\n\t\tmodExists;\r\n\r\n\t\tif(this.renderMode === \"virtual\"){\r\n\r\n\t\t\tlet otherHeight =  Math.floor(this.columnManager.getElement().getBoundingClientRect().height + (this.table.footerManager && this.table.footerManager.active && !this.table.footerManager.external ? this.table.footerManager.getElement().getBoundingClientRect().height : 0));\r\n\r\n\t\t\tif(this.fixedHeight){\r\n\t\t\t\tthis.element.style.minHeight = \"calc(100% - \" + otherHeight + \"px)\";\r\n\t\t\t\tthis.element.style.height = \"calc(100% - \" + otherHeight + \"px)\";\r\n\t\t\t\tthis.element.style.maxHeight = \"calc(100% - \" + otherHeight + \"px)\";\r\n\t\t\t}else{\r\n\t\t\t\tthis.element.style.height = \"\";\r\n\t\t\t\tthis.element.style.height = (this.table.element.clientHeight - otherHeight) + \"px\";\r\n\t\t\t\tthis.element.scrollTop = this.scrollTop;\r\n\t\t\t}\r\n\r\n\t\t\tthis.height = this.element.clientHeight;\r\n\t\t\tthis.vDomWindowBuffer = this.table.options.virtualDomBuffer || this.height;\r\n\r\n\t\t\t//check if the table has changed size when dealing with variable height tables\r\n\t\t\tif(!this.fixedHeight && initialHeight != this.element.clientHeight){\r\n\t\t\t\tmodExists = this.table.modExists(\"resizeTable\");\r\n\r\n\t\t\t\tif((modExists && !this.table.modules.resizeTable.autoResize) || !modExists){\r\n\t\t\t\t\tthis.redraw();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\r\n\t//renitialize all rows\r\n\treinitialize(){\r\n\t\tthis.rows.forEach(function(row){\r\n\t\t\trow.reinitialize(true);\r\n\t\t});\r\n\t}\r\n\r\n\t//prevent table from being redrawn\r\n\tblockRedraw (){\r\n\t\tthis.redrawBlock = true;\r\n\t\tthis.redrawBlockRestoreConfig = false;\r\n\t}\r\n\r\n\t//restore table redrawing\r\n\trestoreRedraw (){\r\n\t\tthis.redrawBlock = false;\r\n\r\n\t\tif(this.redrawBlockRestoreConfig){\r\n\t\t\tthis.refreshActiveData(this.redrawBlockRestoreConfig.stage, this.redrawBlockRestoreConfig.skipStage, this.redrawBlockRestoreConfig.renderInPosition)\r\n\r\n\t\t\tthis.redrawBlockRestoreConfig = false;\r\n\t\t}else{\r\n\t\t\tif(this.redrawBlockRederInPosition){\r\n\t\t\t\tthis.reRenderInPosition();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.redrawBlockRederInPosition = false;\r\n\t}\r\n\r\n\t//redraw table\r\n\tredraw (force){\r\n\t\tvar pos = 0,\r\n\t\tleft = this.scrollLeft;\r\n\r\n\t\tthis.adjustTableSize();\r\n\r\n\t\tthis.table.tableWidth = this.table.element.clientWidth;\r\n\r\n\t\tif(!force){\r\n\t\t\tif(this.renderMode == \"classic\"){\r\n\r\n\t\t\t\tif(this.table.options.groupBy){\r\n\t\t\t\t\tthis.refreshActiveData(\"group\", false, false);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis._simpleRender();\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tthis.reRenderInPosition();\r\n\t\t\t\tthis.scrollHorizontal(left);\r\n\t\t\t}\r\n\r\n\t\t\tif(!this.displayRowsCount){\r\n\t\t\t\tif(this.table.options.placeholder){\r\n\t\t\t\t\tthis.getElement().appendChild(this.table.options.placeholder);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\tthis.renderTable();\r\n\t\t}\r\n\t}\r\n\r\n\tresetScroll(){\r\n\t\tthis.element.scrollLeft = 0;\r\n\t\tthis.element.scrollTop = 0;\r\n\r\n\t\tif(this.table.browser === \"ie\"){\r\n\t\t\tvar event = document.createEvent(\"Event\");\r\n\t\t\tevent.initEvent(\"scroll\", false, true);\r\n\t\t\tthis.element.dispatchEvent(event);\r\n\t\t}else{\r\n\t\t\tthis.element.dispatchEvent(new Event('scroll'));\r\n\t\t}\r\n\t}\r\n}","export default class FooterManager {\r\n\r\n\tconstructor(table){\r\n\t\tthis.table = table;\r\n\t\tthis.active = false;\r\n\t\tthis.element = this.createElement(); //containing element\r\n\t\tthis.external = false;\r\n\t\tthis.links = [];\r\n\r\n\t\tthis._initialize();\r\n\t}\r\n\r\n\tcreateElement (){\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tel.classList.add(\"tabulator-footer\");\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\t_initialize(element){\r\n\t\tif(this.table.options.footerElement){\r\n\r\n\t\t\tswitch(typeof this.table.options.footerElement){\r\n\t\t\t\tcase \"string\":\r\n\t\t\t\tif(this.table.options.footerElement[0] === \"<\"){\r\n\t\t\t\t\tthis.element.innerHTML = this.table.options.footerElement;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.external = true;\r\n\t\t\t\t\tthis.element = document.querySelector(this.table.options.footerElement);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\tthis.element = this.table.options.footerElement;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetElement(){\r\n\t\treturn this.element;\r\n\t}\r\n\r\n\tappend(element, parent){\r\n\t\tthis.activate(parent);\r\n\r\n\t\tthis.element.appendChild(element);\r\n\t\tthis.table.rowManager.adjustTableSize();\r\n\t}\r\n\r\n\tprepend(element, parent){\r\n\t\tthis.activate(parent);\r\n\r\n\t\tthis.element.insertBefore(element, this.element.firstChild);\r\n\t\tthis.table.rowManager.adjustTableSize();\r\n\t}\r\n\r\n\tremove(element){\r\n\t\telement.parentNode.removeChild(element);\r\n\t\tthis.deactivate();\r\n\t}\r\n\r\n\tdeactivate(force){\r\n\t\tif(!this.element.firstChild || force){\r\n\t\t\tif(!this.external){\r\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\r\n\t\t\t}\r\n\t\t\tthis.active = false;\r\n\t\t}\r\n\t}\r\n\r\n\tactivate(parent){\r\n\t\tif(!this.active){\r\n\t\t\tthis.active = true;\r\n\t\t\tif(!this.external){\r\n\t\t\t\tthis.table.element.appendChild(this.getElement());\r\n\t\t\t\tthis.table.element.style.display = '';\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(parent){\r\n\t\t\tthis.links.push(parent);\r\n\t\t}\r\n\t}\r\n\r\n\tredraw(){\r\n\t\tthis.links.forEach(function(link){\r\n\t\t\tlink.footerRedraw();\r\n\t\t});\r\n\t}\r\n}","import Tabulator from './Tabulator.js';\r\n\r\nclass TableRegistry {\r\n\r\n\tstatic register(table){\r\n\t\tTableRegistry.tables.push(table);\r\n\t}\r\n\r\n\tstatic deregister(table){\r\n\t\tvar index = TableRegistry.tables.indexOf(table);\r\n\r\n\t\tif(index > -1){\r\n\t\t\tTableRegistry.tables.splice(index, 1);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic lookupTable(query, silent){\r\n\t\tvar results = [],\r\n\t\tmatches, match;\r\n\r\n\t\tif(typeof query === \"string\"){\r\n\t\t\tmatches = document.querySelectorAll(query);\r\n\r\n\t\t\tif(matches.length){\r\n\t\t\t\tfor(var i = 0; i < matches.length; i++){\r\n\t\t\t\t\tmatch = TableRegistry.matchElement(matches[i]);\r\n\r\n\t\t\t\t\tif(match){\r\n\t\t\t\t\t\tresults.push(match);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}else if((typeof HTMLElement !== \"undefined\" && query instanceof HTMLElement) || query instanceof Tabulator){\r\n\t\t\tmatch = TableRegistry.matchElement(query);\r\n\r\n\t\t\tif(match){\r\n\t\t\t\tresults.push(match);\r\n\t\t\t}\r\n\t\t}else if(Array.isArray(query)){\r\n\t\t\tquery.forEach(function(item){\r\n\t\t\t\tresults = results.concat(TableRegistry.lookupTable(item));\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tif(!silent){\r\n\t\t\t\tconsole.warn(\"Table Connection Error - Invalid Selector\", query);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn results;\r\n\t}\r\n\r\n\tstatic matchElement(element){\r\n\t\treturn TableRegistry.tables.find(function(table){\r\n\t\t\treturn element instanceof Tabulator ? table === element : table.element === element;\r\n\t\t});\r\n\t}\r\n}\r\n\r\nTableRegistry.tables = [];\r\n\r\nexport default TableRegistry;","class Module{\r\n\r\n\tconstructor(table, name){\r\n\t\tthis.table = table;\r\n\t}\r\n\r\n\tregister(){\r\n\t}\r\n}\r\n\r\nexport default Module;","//resize columns to fit data they contain\r\nexport default function(columns){\r\n\tif(this.table.options.virtualDomHoz){\r\n\t\tthis.table.vdomHoz.fitDataLayoutOverride();\r\n\t}else{\r\n\t\tcolumns.forEach(function(column){\r\n\t\t\tcolumn.reinitializeWidth();\r\n\t\t});\r\n\t}\r\n\r\n\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\r\n\t\tthis.table.modules.responsiveLayout.update();\r\n\t}\r\n};","//resize columns to fit data they contain and stretch row to fill table, also used for fitDataTable\r\nexport default function(columns){\r\n\tcolumns.forEach(function(column){\r\n\t\tcolumn.reinitializeWidth();\r\n\t});\r\n\r\n\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\r\n\t\tthis.table.modules.responsiveLayout.update();\r\n\t}\r\n};","//resize columns to fit data the contain and stretch last column to fill table\r\nexport default function(columns){\r\n\tvar colsWidth = 0,\r\n\ttableWidth = this.table.rowManager.element.clientWidth,\r\n\tgap = 0,\r\n\tlastCol = false;\r\n\r\n\tcolumns.forEach((column, i) => {\r\n\t\tif(!column.widthFixed){\r\n\t\t\tcolumn.reinitializeWidth();\r\n\t\t}\r\n\r\n\t\tif(this.table.options.responsiveLayout ? column.modules.responsive.visible : column.visible){\r\n\t\t\tlastCol = column;\r\n\t\t}\r\n\r\n\t\tif(column.visible){\r\n\t\t\tcolsWidth += column.getWidth();\r\n\t\t}\r\n\t});\r\n\r\n\tif(lastCol){\r\n\t\tgap = tableWidth - colsWidth + lastCol.getWidth();\r\n\r\n\t\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\r\n\t\t\tlastCol.setWidth(0);\r\n\t\t\tthis.table.modules.responsiveLayout.update();\r\n\t\t}\r\n\r\n\t\tif(gap > 0){\r\n\t\t\tlastCol.setWidth(gap);\r\n\t\t}else{\r\n\t\t\tlastCol.reinitializeWidth();\r\n\t\t}\r\n\t}else{\r\n\t\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\r\n\t\t\tthis.table.modules.responsiveLayout.update();\r\n\t\t}\r\n\t}\r\n};","//resize columns to fit\r\nexport default function(columns){\r\n\tvar totalWidth = this.table.element.clientWidth; //table element width\r\n\tvar fixedWidth = 0; //total width of columns with a defined width\r\n\tvar flexWidth = 0; //total width available to flexible columns\r\n\tvar flexGrowUnits = 0; //total number of widthGrow blocks accross all columns\r\n\tvar flexColWidth = 0; //desired width of flexible columns\r\n\tvar flexColumns = []; //array of flexible width columns\r\n\tvar fixedShrinkColumns = []; //array of fixed width columns that can shrink\r\n\tvar flexShrinkUnits = 0; //total number of widthShrink blocks accross all columns\r\n\tvar overflowWidth = 0; //horizontal overflow width\r\n\tvar gapFill=0; //number of pixels to be added to final column to close and half pixel gaps\r\n\r\n\tfunction calcWidth(width){\r\n\t\tvar colWidth;\r\n\r\n\t\tif(typeof(width) == \"string\"){\r\n\t\t\tif(width.indexOf(\"%\") > -1){\r\n\t\t\t\tcolWidth = (totalWidth / 100) * parseInt(width);\r\n\t\t\t}else{\r\n\t\t\t\tcolWidth = parseInt(width);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tcolWidth = width;\r\n\t\t}\r\n\r\n\t\treturn colWidth;\r\n\t}\r\n\r\n\t//ensure columns resize to take up the correct amount of space\r\n\tfunction scaleColumns(columns, freeSpace, colWidth, shrinkCols){\r\n\r\n\t\tvar oversizeCols = [],\r\n\t\toversizeSpace = 0,\r\n\t\tremainingSpace = 0,\r\n\t\tnextColWidth = 0,\r\n\t\tremainingFlexGrowUnits = flexGrowUnits,\r\n\t\tgap = 0,\r\n\t\tchangeUnits = 0,\r\n\t\tundersizeCols = [];\r\n\r\n\t\tfunction calcGrow(col){\r\n\t\t\treturn (colWidth * (col.column.definition.widthGrow || 1));\r\n\t\t}\r\n\r\n\t\tfunction calcShrink(col){\r\n\t\t\treturn  (calcWidth(col.width) - (colWidth * (col.column.definition.widthShrink || 0)))\r\n\t\t}\r\n\r\n\t\tcolumns.forEach(function(col, i){\r\n\t\t\tvar width = shrinkCols ? calcShrink(col) : calcGrow(col);\r\n\t\t\tif(col.column.minWidth >= width){\r\n\t\t\t\toversizeCols.push(col);\r\n\t\t\t}else{\r\n\t\t\t\tif(col.column.maxWidth && col.column.maxWidth < width){\r\n\t\t\t\t\tcol.width = col.column.maxWidth;\r\n\t\t\t\t\tfreeSpace -= col.column.maxWidth;\r\n\r\n\t\t\t\t\tremainingFlexGrowUnits -= shrinkCols ? (col.column.definition.widthShrink || 1) : (col.column.definition.widthGrow || 1);\r\n\r\n\t\t\t\t\tif(remainingFlexGrowUnits){\r\n\t\t\t\t\t\tcolWidth = Math.floor(freeSpace/remainingFlexGrowUnits);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tundersizeCols.push(col);\r\n\t\t\t\t\tchangeUnits += shrinkCols ? (col.column.definition.widthShrink || 1) : (col.column.definition.widthGrow || 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(oversizeCols.length){\r\n\t\t\toversizeCols.forEach(function(col){\r\n\t\t\t\toversizeSpace += shrinkCols ?  col.width - col.column.minWidth : col.column.minWidth;\r\n\t\t\t\tcol.width = col.column.minWidth;\r\n\t\t\t});\r\n\r\n\t\t\tremainingSpace = freeSpace - oversizeSpace;\r\n\r\n\t\t\tnextColWidth = changeUnits ? Math.floor(remainingSpace/changeUnits) : remainingSpace;\r\n\r\n\t\t\tgap = remainingSpace - (nextColWidth * changeUnits);\r\n\r\n\t\t\tgap += scaleColumns(undersizeCols, remainingSpace, nextColWidth, shrinkCols);\r\n\t\t}else{\r\n\t\t\tgap = changeUnits ? freeSpace - (Math.floor(freeSpace/changeUnits) * changeUnits) : freeSpace;\r\n\r\n\t\t\tundersizeCols.forEach(function(column){\r\n\t\t\t\tcolumn.width = shrinkCols ? calcShrink(column) : calcGrow(column);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn gap;\r\n\t}\r\n\r\n\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\r\n\t\tthis.table.modules.responsiveLayout.update();\r\n\t}\r\n\r\n\t//adjust for vertical scrollbar if present\r\n\tif(this.table.rowManager.element.scrollHeight > this.table.rowManager.element.clientHeight){\r\n\t\ttotalWidth -= this.table.rowManager.element.offsetWidth - this.table.rowManager.element.clientWidth;\r\n\t}\r\n\r\n\tcolumns.forEach(function(column){\r\n\t\tvar width, minWidth, colWidth;\r\n\r\n\t\tif(column.visible){\r\n\r\n\t\t\twidth = column.definition.width;\r\n\t\t\tminWidth =  parseInt(column.minWidth);\r\n\r\n\t\t\tif(width){\r\n\r\n\t\t\t\tcolWidth = calcWidth(width);\r\n\r\n\t\t\t\tfixedWidth += colWidth > minWidth ? colWidth : minWidth;\r\n\r\n\t\t\t\tif(column.definition.widthShrink){\r\n\t\t\t\t\tfixedShrinkColumns.push({\r\n\t\t\t\t\t\tcolumn:column,\r\n\t\t\t\t\t\twidth:colWidth > minWidth ? colWidth : minWidth\r\n\t\t\t\t\t});\r\n\t\t\t\t\tflexShrinkUnits += column.definition.widthShrink;\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tflexColumns.push({\r\n\t\t\t\t\tcolumn:column,\r\n\t\t\t\t\twidth:0,\r\n\t\t\t\t});\r\n\t\t\t\tflexGrowUnits += column.definition.widthGrow || 1;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t//calculate available space\r\n\tflexWidth = totalWidth - fixedWidth;\r\n\r\n\t//calculate correct column size\r\n\tflexColWidth = Math.floor(flexWidth / flexGrowUnits)\r\n\r\n\t//generate column widths\r\n\tvar gapFill = scaleColumns(flexColumns, flexWidth, flexColWidth, false);\r\n\r\n\t//increase width of last column to account for rounding errors\r\n\tif(flexColumns.length && gapFill > 0){\r\n\t\tflexColumns[flexColumns.length-1].width += + gapFill;\r\n\t}\r\n\r\n\t//caculate space for columns to be shrunk into\r\n\tflexColumns.forEach(function(col){\r\n\t\tflexWidth -= col.width;\r\n\t});\r\n\r\n\toverflowWidth = Math.abs(gapFill) + flexWidth;\r\n\r\n\t//shrink oversize columns if there is no available space\r\n\tif(overflowWidth > 0 && flexShrinkUnits){\r\n\t\tgapFill = scaleColumns(fixedShrinkColumns, overflowWidth, Math.floor(overflowWidth / flexShrinkUnits), true);\r\n\t}\r\n\r\n\t//decrease width of last column to account for rounding errors\r\n\tif(fixedShrinkColumns.length){\r\n\t\tfixedShrinkColumns[fixedShrinkColumns.length-1].width -= gapFill;\r\n\t}\r\n\r\n\tflexColumns.forEach(function(col){\r\n\t\tcol.column.setWidth(col.width);\r\n\t});\r\n\r\n\tfixedShrinkColumns.forEach(function(col){\r\n\t\tcol.column.setWidth(col.width);\r\n\t});\r\n};","import fitData from './modes/fitData.js';\r\nimport fitDataGeneral from './modes/fitDataGeneral.js';\r\nimport fitDataStretch from './modes/fitDataStretch.js';\r\nimport fitColumns from './modes/fitColumns.js';\r\n\r\nexport default {\r\n\tfitData:fitData,\r\n\tfitDataFill:fitDataGeneral,\r\n\tfitDataTable:fitDataGeneral,\r\n\tfitDataStretch:fitDataStretch,\r\n\tfitColumns:fitColumns ,\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport defaultModes from './defaults/modes.js';\r\n\r\nclass Layout extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table, \"layout\");\r\n\r\n\t\tthis.mode = null;\r\n\t}\r\n\r\n\t//initialize layout system\r\n\tinitialize(layout){\r\n\t\tif(Layout.modes[layout]){\r\n\t\t\tthis.mode = layout;\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Layout Error - invalid mode set, defaulting to 'fitData' : \" + layout);\r\n\t\t\tthis.mode = 'fitData';\r\n\t\t}\r\n\r\n\t\tthis.table.element.setAttribute(\"tabulator-layout\", this.mode);\r\n\t}\r\n\r\n\tgetMode(){\r\n\t\treturn this.mode;\r\n\t}\r\n\r\n\t//trigger table layout\r\n\tlayout(){\r\n\t\tLayout.modes[this.mode].call(this, this.table.columnManager.columnsByIndex);\r\n\r\n\t\tif(this.mode.indexOf(\"fitData\") === 0 && this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.columns){\r\n\t\t\tthis.table.modules.persistence.save(\"columns\");\r\n\t\t}\r\n\t}\r\n}\r\n\r\nLayout.moduleName = \"layout\";\r\n\r\n//load defaults\r\nLayout.modes = defaultModes;\r\n\r\nexport default Layout;","export default {\r\n\t\"default\":{ //hold default locale text\r\n\t\t\"groups\":{\r\n\t\t\t\"item\":\"item\",\r\n\t\t\t\"items\":\"items\",\r\n\t\t},\r\n\t\t\"columns\":{\r\n\t\t},\r\n\t\t\"ajax\":{\r\n\t\t\t\"loading\":\"Loading\",\r\n\t\t\t\"error\":\"Error\",\r\n\t\t},\r\n\t\t\"pagination\":{\r\n\t\t\t\"page_size\":\"Page Size\",\r\n\t\t\t\"page_title\":\"Show Page\",\r\n\t\t\t\"first\":\"First\",\r\n\t\t\t\"first_title\":\"First Page\",\r\n\t\t\t\"last\":\"Last\",\r\n\t\t\t\"last_title\":\"Last Page\",\r\n\t\t\t\"prev\":\"Prev\",\r\n\t\t\t\"prev_title\":\"Prev Page\",\r\n\t\t\t\"next\":\"Next\",\r\n\t\t\t\"next_title\":\"Next Page\",\r\n\t\t\t\"all\":\"All\",\r\n\t\t},\r\n\t\t\"headerFilters\":{\r\n\t\t\t\"default\":\"filter column...\",\r\n\t\t\t\"columns\":{}\r\n\t\t}\r\n\t},\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport Helpers from '../../core/Helpers.js';\r\n\r\nimport defaultLangs from './defaults/langs.js';\r\n\r\nclass Localize extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.locale = \"default\"; //current locale\r\n\t\tthis.lang = false; //current language\r\n\t\tthis.bindings = {}; //update events to call when locale is changed\r\n\t\tthis.langList = {};\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.langList = Helpers.deepClone(Localize.langs);\r\n\t}\r\n\r\n\t//set header placehoder\r\n\tsetHeaderFilterPlaceholder(placeholder){\r\n\t\tthis.langList.default.headerFilters.default = placeholder;\r\n\t}\r\n\r\n\t//set header filter placeholder by column\r\n\tsetHeaderFilterColumnPlaceholder(column, placeholder){\r\n\t\tthis.langList.default.headerFilters.columns[column] = placeholder;\r\n\r\n\t\tif(this.lang && !this.lang.headerFilters.columns[column]){\r\n\t\t\tthis.lang.headerFilters.columns[column] = placeholder;\r\n\t\t}\r\n\t}\r\n\r\n\t//setup a lang description object\r\n\tinstallLang(locale, lang){\r\n\t\tif(this.langList[locale]){\r\n\t\t\tthis._setLangProp(this.langList[locale], lang);\r\n\t\t}else{\r\n\t\t\tthis.langList[locale] = lang;\r\n\t\t}\r\n\t}\r\n\r\n\t_setLangProp(lang, values){\r\n\t\tfor(let key in values){\r\n\t\t\tif(lang[key] && typeof lang[key] == \"object\"){\r\n\t\t\t\tthis._setLangProp(lang[key], values[key])\r\n\t\t\t}else{\r\n\t\t\t\tlang[key] = values[key];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//set current locale\r\n\tsetLocale(desiredLocale){\r\n\t\tdesiredLocale = desiredLocale || \"default\";\r\n\r\n\t\t//fill in any matching languge values\r\n\t\tfunction traverseLang(trans, path){\r\n\t\t\tfor(var prop in trans){\r\n\t\t\t\tif(typeof trans[prop] == \"object\"){\r\n\t\t\t\t\tif(!path[prop]){\r\n\t\t\t\t\t\tpath[prop] = {};\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttraverseLang(trans[prop], path[prop]);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tpath[prop] = trans[prop];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//determing correct locale to load\r\n\t\tif(desiredLocale === true && navigator.language){\r\n\t\t\t//get local from system\r\n\t\t\tdesiredLocale = navigator.language.toLowerCase();\r\n\t\t}\r\n\r\n\t\tif(desiredLocale){\r\n\t\t\t//if locale is not set, check for matching top level locale else use default\r\n\t\t\tif(!this.langList[desiredLocale]){\r\n\t\t\t\tlet prefix = desiredLocale.split(\"-\")[0];\r\n\r\n\t\t\t\tif(this.langList[prefix]){\r\n\t\t\t\t\tconsole.warn(\"Localization Error - Exact matching locale not found, using closest match: \", desiredLocale, prefix);\r\n\t\t\t\t\tdesiredLocale = prefix;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Localization Error - Matching locale not found, using default: \", desiredLocale);\r\n\t\t\t\t\tdesiredLocale = \"default\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.locale = desiredLocale;\r\n\r\n\t\t//load default lang template\r\n\t\tthis.lang = Helpers.deepClone(this.langList.default || {});\r\n\r\n\t\tif(desiredLocale != \"default\"){\r\n\t\t\ttraverseLang(this.langList[desiredLocale], this.lang);\r\n\t\t}\r\n\r\n\t\tthis.table.options.localized.call(this.table, this.locale, this.lang);\r\n\r\n\t\tthis._executeBindings();\r\n\t}\r\n\r\n\t//get current locale\r\n\tgetLocale(locale){\r\n\t\treturn this.locale;\r\n\t}\r\n\r\n\t//get lang object for given local or current if none provided\r\n\tgetLang(locale){\r\n\t\treturn locale ? this.langList[locale] : this.lang;\r\n\t}\r\n\r\n\t//get text for current locale\r\n\tgetText(path, value){\r\n\t\tvar path = value ? path + \"|\" + value : path,\r\n\t\tpathArray = path.split(\"|\"),\r\n\t\ttext = this._getLangElement(pathArray, this.locale);\r\n\r\n\t\t// if(text === false){\r\n\t\t// \tconsole.warn(\"Localization Error - Matching localized text not found for given path: \", path);\r\n\t\t// }\r\n\r\n\t\treturn text || \"\";\r\n\t}\r\n\r\n\t//traverse langs object and find localized copy\r\n\t_getLangElement(path, locale){\r\n\t\tvar root = this.lang;\r\n\r\n\t\tpath.forEach(function(level){\r\n\t\t\tvar rootPath;\r\n\r\n\t\t\tif(root){\r\n\t\t\t\trootPath = root[level];\r\n\r\n\t\t\t\tif(typeof rootPath != \"undefined\"){\r\n\t\t\t\t\troot = rootPath;\r\n\t\t\t\t}else{\r\n\t\t\t\t\troot = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn root;\r\n\t}\r\n\r\n\t//set update binding\r\n\tbind(path, callback){\r\n\t\tif(!this.bindings[path]){\r\n\t\t\tthis.bindings[path] = [];\r\n\t\t}\r\n\r\n\t\tthis.bindings[path].push(callback);\r\n\r\n\t\tcallback(this.getText(path), this.lang);\r\n\t}\r\n\r\n\t//itterate through bindings and trigger updates\r\n\t_executeBindings(){\r\n\t\tfor(let path in this.bindings){\r\n\t\t\tthis.bindings[path].forEach((binding) => {\r\n\t\t\t\tbinding(this.getText(path), this.lang);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\nLocalize.moduleName = \"localize\";\r\n\r\n//load defaults\r\nLocalize.langs = defaultLangs;\r\n\r\nexport default Localize;","import Module from '../../core/Module.js';\r\nimport TableRegistry from '../../core/TableRegistry.js';\r\n\r\nclass Comms extends Module{\r\n\r\n\tgetConnections(selectors){\r\n\t\tvar connections = [],\r\n\t\tconnection;\r\n\r\n\t\tconnection = Tabulator.comms.lookupTable(selectors);\r\n\r\n\t\tconnection.forEach((con) =>{\r\n\t\t\tif(this.table !== con){\r\n\t\t\t\tconnections.push(con);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn connections;\r\n\t}\r\n\r\n\tsend(selectors, module, action, data){\r\n\t\tvar connections = this.getConnections(selectors);\r\n\r\n\t\tconnections.forEach((connection) => {\r\n\t\t\tconnection.tableComms(this.table.element, module, action, data);\r\n\t\t});\r\n\r\n\t\tif(!connections.length && selectors){\r\n\t\t\tconsole.warn(\"Table Connection Error - No tables matching selector found\", selectors);\r\n\t\t}\r\n\t}\r\n\r\n\treceive(table, module, action, data){\r\n\t\tif(this.table.modExists(module)){\r\n\t\t\treturn this.table.modules[module].commsReceived(table, action, data);\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Inter-table Comms Error - no such module:\", module);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nComms.moduleName = \"comms\";\r\n\r\nexport default Comms;","import * as coreModules from './modules/core.js';\r\nimport TableRegistry from './TableRegistry.js';\r\n\r\nexport default class ModuleBinder {\r\n\r\n\tconstructor(tabulator, modules){\r\n\t\tthis.bindStaticFuctionality(tabulator);\r\n\t\tthis.bindModules(tabulator, coreModules);\r\n\r\n\t\tif(modules){\r\n\t\t\tthis.bindModules(tabulator, modules);\r\n\t\t}\r\n\t}\r\n\r\n\tbindStaticFuctionality(tabulator){\r\n\r\n\t\ttabulator.moduleBindings = {};\r\n\r\n\t\ttabulator.extendModule = function(name, property, values){\r\n\t\t\tif(tabulator.moduleBindings[name]){\r\n\t\t\t\tvar source = tabulator.moduleBindings[name].prototype[property];\r\n\r\n\t\t\t\tif(source){\r\n\t\t\t\t\tif(typeof values == \"object\"){\r\n\t\t\t\t\t\tfor(let key in values){\r\n\t\t\t\t\t\t\tsource[key] = values[key];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tconsole.warn(\"Module Error - Invalid value type, it must be an object\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Module Error - property does not exist:\", property);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Module Error - module does not exist:\", name);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\ttabulator.registerModule = function(modules){\r\n\t\t\tif(!Array.isArray(modules)){\r\n\t\t\t\tmodules = [modules];\r\n\t\t\t}\r\n\r\n\t\t\tmodules.forEach((mod) => {\r\n\t\t\t\ttabulator.registerModuleBinding(mod)\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\ttabulator.registerModuleBinding = function(mod){\r\n\t\t\ttabulator.moduleBindings[mod.moduleName] = mod;\r\n\t\t};\r\n\r\n\t\ttabulator.findTable = function(query){\r\n\t\t\tvar results = TableRegistry.lookupTable(query, true);\r\n\t\t\treturn Array.isArray(results) && !results.length ? false : results;\r\n\t\t}\r\n\r\n\t\t//ensure that module are bound to instantiated function\r\n\t\ttabulator.prototype.bindModules = function(){\r\n\t\t\tthis.modules = {};\r\n\r\n\t\t\tfor(var name in tabulator.moduleBindings){\r\n\t\t\t\tthis.modules[name] = new tabulator.moduleBindings[name](this);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tbindModules(tabulator, modules){\r\n\t\tvar mods = Object.values(modules);\r\n\r\n\t\ttabulator.registerModule(mods);\r\n\t}\r\n}","export default class VirtualDomHorizontal {\r\n\tconstructor(table){\r\n\t\tthis.table = table;\r\n\r\n\t\tthis.element = this.table.rowManager.tableElement;\r\n\t\tthis.holderEl = this.table.rowManager.element;\r\n\r\n\t\tthis.leftCol = 0;\r\n\t\tthis.rightCol = 0;\r\n\t\tthis.scrollLeft = 0;\r\n\r\n\t\tthis.vDomScrollPosLeft = 0;\r\n\t\tthis.vDomScrollPosRight = 0;\r\n\r\n\t\tthis.vDomPadLeft = 0;\r\n\t\tthis.vDomPadRight = 0;\r\n\r\n\t\tthis.fitDataColAvg = 0;\r\n\r\n\t\tthis.window = 200; //pixel margin to make column visible before it is shown on screen\r\n\r\n\t\tthis.initialized = false;\r\n\r\n\t\tthis.columns = [];\r\n\r\n\t\tif(this.compatabilityCheck()){\r\n\t\t\tthis.initialize();\r\n\t\t}\r\n\t}\r\n\r\n\tcompatabilityCheck(){\r\n\t\tvar options = this.table.options,\r\n\t\tfrozen = false,\r\n\t\tok = true;\r\n\r\n\t\tif(options.layout == \"fitDataTable\"){\r\n\t\t\tconsole.warn(\"Horizontal Vitrual DOM is not compatible with fitDataTable layout mode\");\r\n\t\t\tok = false;\r\n\t\t}\r\n\r\n\t\tif(options.responsiveLayout){\r\n\t\t\tconsole.warn(\"Horizontal Vitrual DOM is not compatible with responsive columns\");\r\n\t\t\tok = false;\r\n\t\t}\r\n\r\n\t\tif(this.table.rtl){\r\n\t\t\tconsole.warn(\"Horizontal Vitrual DOM is not currently compatible with RTL text direction\");\r\n\t\t\tok = false;\r\n\t\t}\r\n\r\n\t\tif(options.columns){\r\n\t\t\tfrozen = options.columns.find((col) => {\r\n\t\t\t\treturn col.frozen;\r\n\t\t\t});\r\n\r\n\t\t\tif(frozen){\r\n\t\t\t\tconsole.warn(\"Horizontal Vitrual DOM is not compatible with frozen columns\");\r\n\t\t\t\tok = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(!ok){\r\n\t\t\toptions.virtualDomHoz = false;\r\n\t\t}\r\n\r\n\t\treturn ok;\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.holderEl.addEventListener(\"scroll\", () => {\r\n\t\t\tvar left = this.holderEl.scrollLeft;\r\n\r\n\t\t\tif(this.scrollLeft != left){\r\n\t\t\t\tthis.scrollLeft = left;\r\n\t\t\t\tthis.scroll(left - (this.vDomScrollPosLeft + this.window));\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tdeinitialize(){\r\n\t\tthis.initialized = false;\r\n\t}\r\n\r\n\tclear(){\r\n\t\tthis.columns = [];\r\n\r\n\t\tthis.leftCol = -1;\r\n\t\tthis.rightCol = 0;\r\n\r\n\t\tthis.vDomScrollPosLeft = 0;\r\n\t\tthis.vDomScrollPosRight = 0;\r\n\t\tthis.vDomPadLeft = 0;\r\n\t\tthis.vDomPadRight = 0;\r\n\t}\r\n\r\n\tdataChange(){\r\n\t\tvar change = false,\r\n\t\tcollsWidth = 0,\r\n\t\tcolEnd = 0,\r\n\t\tgroup, row, rowEl;\r\n\r\n\t\tif(this.table.options.layout === \"fitData\"){\r\n\t\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\r\n\t\t\t\tif(!column.definition.width && column.visible){\r\n\t\t\t\t\tchange = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(change){\r\n\t\t\t\tif(change && this.table.rowManager.getDisplayRows().length){\r\n\r\n\t\t\t\t\tthis.vDomScrollPosRight = this.scrollLeft + this.holderEl.clientWidth + this.window;\r\n\r\n\t\t\t\t\tif(this.table.options.groupBy){\r\n\t\t\t\t\t\tgroup = this.table.modules.groupRows.getGroups(false)[0];\r\n\r\n\t\t\t\t\t\trow = group.getRows(false)[0];\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\trow = this.table.rowManager.getDisplayRows()[0];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(row){\r\n\r\n\t\t\t\t\t\trowEl = row.getElement();\r\n\r\n\t\t\t\t\t\trow.generateCells();\r\n\r\n\t\t\t\t\t\tthis.element.appendChild(rowEl);\r\n\r\n\t\t\t\t\t\tfor(var colEnd = 0; colEnd < row.cells.length; colEnd++){\r\n\t\t\t\t\t\t\tlet cell = row.cells[colEnd];\r\n\t\t\t\t\t\t\trowEl.appendChild(cell.getElement());\r\n\r\n\t\t\t\t\t\t\tcell.column.reinitializeWidth();\r\n\r\n\t\t\t\t\t\t\tcollsWidth += cell.column.getWidth();\r\n\r\n\t\t\t\t\t\t\tif(collsWidth > this.vDomScrollPosRight){\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\trowEl.parentNode.removeChild(rowEl);\r\n\r\n\t\t\t\t\t\tthis.fitDataColAvg = Math.floor(collsWidth / (colEnd + 1));\r\n\r\n\t\t\t\t\t\tfor(colEnd; colEnd < this.table.columnManager.columnsByIndex.length; colEnd++){\r\n\t\t\t\t\t\t\tthis.table.columnManager.columnsByIndex[colEnd].setWidth(this.fitDataColAvg);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis.reinitialize(false, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(this.table.options.layout === \"fitColumns\"){\r\n\t\t\t\tthis.table.modules.layout.layout();\r\n\t\t\t\tthis.table.vdomHoz.reinitialize(false, true);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfitDataLayoutOverride(){\r\n\t\tfor(let i = this.leftCol; i <= this.rightCol; i++){\r\n\t\t\tthis.columns[i].reinitializeWidth();\r\n\t\t}\r\n\t}\r\n\r\n\treinitialize(update, blockRedraw){\r\n\t\tvar old = {\r\n\t\t\tcols:this.columns,\r\n\t\t\tleftCol:this.leftCol,\r\n\t\t\trightCol:this.rightCol,\r\n\t\t};\r\n\r\n\t\tif(update && !this.initialized){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.clear();\r\n\r\n\t\tthis.scrollLeft = this.holderEl.scrollLeft;\r\n\r\n\t\tthis.vDomScrollPosLeft = this.scrollLeft - this.window;\r\n\t\tthis.vDomScrollPosRight = this.scrollLeft + this.holderEl.clientWidth + this.window;\r\n\r\n\t\tvar colPos = 0;\r\n\r\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\r\n\t\t\tvar config = {};\r\n\r\n\t\t\tif(column.visible){\r\n\t\t\t\tvar width = column.getWidth();\r\n\r\n\t\t\t\tconfig.leftPos = colPos;\r\n\t\t\t\tconfig.rightPos = colPos + width;\r\n\r\n\t\t\t\tconfig.width = width;\r\n\r\n\t\t\t\tif (_this18.table.options.layout === \"fitData\") {\r\n\r\n\t\t\t\t    config.fitDataCheck = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif((colPos + width > this.vDomScrollPosLeft) && (colPos < this.vDomScrollPosRight)){\r\n\t        \t\t//column is visible\r\n\r\n\t        \t\tif(this.leftCol == -1){\r\n\t        \t\t\tthis.leftCol = this.columns.length;\r\n\t        \t\t\tthis.vDomPadLeft = colPos;\r\n\t        \t\t}\r\n\r\n\t        \t\tthis.rightCol = this.columns.length;\r\n\t        \t}else{\r\n\t        \t\t// column is hidden\r\n\t        \t\tif(this.leftCol !== -1){\r\n\t        \t\t\tthis.vDomPadRight += width;\r\n\t        \t\t}\r\n\t        \t}\r\n\r\n\t        \tthis.columns.push(column);\r\n\r\n\t        \tcolumn.modules.vdomHoz = config;\r\n\r\n\t        \tcolPos += width;\r\n\t        }\r\n\t    });\r\n\r\n\t\tthis.element.style.paddingLeft = this.vDomPadLeft + \"px\";\r\n\t\tthis.element.style.paddingRight = this.vDomPadRight + \"px\";\r\n\r\n\t\tthis.initialized = true;\r\n\r\n\t\tif(!blockRedraw){\r\n\t\t\tif(!update || this.reinitChanged(old)){\r\n\t\t\t\tthis.renitializeRows();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.holderEl.scrollLeft = this.scrollLeft;\r\n\t}\r\n\r\n\treinitChanged(old){\r\n\t\tvar match = true;\r\n\r\n\t\tif(old.cols.length !== this.columns.length || old.leftCol !== this.leftCol || old.rightCol !== this.rightCol){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\told.cols.forEach((col, i) => {\r\n\t\t\tif(col !== this.columns[i]){\r\n\t\t\t\tmatch = false;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn !match;\r\n\t}\r\n\r\n\trenitializeRows(){\r\n\t\tvar rows = this.table.rowManager.getVisibleRows();\r\n\t\trows.forEach((row) => {\r\n\t\t\tthis.reinitializeRow(row, true);\r\n\t\t});\r\n\t}\r\n\r\n\tscroll(diff){\r\n\t\tthis.vDomScrollPosLeft += diff;\r\n\t\tthis.vDomScrollPosRight += diff;\r\n\r\n\t\tif(diff > (this.holderEl.clientWidth * .8)){\r\n\t\t\tthis.reinitialize();\r\n\t\t}else{\r\n\t\t\tif(diff > 0){\r\n\t\t\t\t//scroll right\r\n\t\t\t\tthis.addColRight();\r\n\t\t\t\tthis.removeColLeft();\r\n\t\t\t}else{\r\n\t\t\t\t//scroll left\r\n\t\t\t\tthis.addColLeft();\r\n\t\t\t\tthis.removeColRight();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcolPositionAdjust (start, end, diff){\r\n\t\tfor(let i = start; i < end; i++){\r\n\t\t\tlet column = this.columns[i];\r\n\r\n\t\t\tcolumn.modules.vdomHoz.leftPos += diff;\r\n\t\t\tcolumn.modules.vdomHoz.rightPos += diff;\r\n\t\t}\r\n\t}\r\n\r\n\taddColRight(){\r\n\t\tvar column = this.columns[this.rightCol + 1],\r\n\t\trows, newWidth, widthDiff;\r\n\r\n\t\tif(column && column.modules.vdomHoz.leftPos <= this.vDomScrollPosRight){\r\n\r\n\t\t\trows = this.table.rowManager.getVisibleRows();\r\n\r\n\t\t\trows.forEach((row) => {\r\n\t\t\t\tif(row.type !== \"group\"){\r\n\t\t\t\t\tvar cell = row.getCell(column);\r\n\t\t\t\t\trow.getElement().appendChild(cell.getElement());\r\n\t\t\t\t\tcell.cellRendered();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.fitDataColActualWidthCheck(column);\r\n\r\n\t\t\tthis.rightCol++;\r\n\r\n\t\t\tif(this.rightCol >= (this.columns.length - 1)){\r\n\t\t\t\tthis.vDomPadRight = 0;\r\n\t\t\t}else{\r\n\t\t\t\tthis.vDomPadRight -= column.getWidth();\r\n\t\t\t}\r\n\r\n\t\t\tthis.element.style.paddingRight = this.vDomPadRight + \"px\";\r\n\r\n\t\t\tthis.addColRight();\r\n\t\t}\r\n\t}\r\n\r\n\taddColLeft(){\r\n\t\tvar column = this.columns[this.leftCol - 1],\r\n\t\trows;\r\n\r\n\t\tif(column && column.modules.vdomHoz.rightPos >= this.vDomScrollPosLeft){\r\n\t\t\tvar rows = this.table.rowManager.getVisibleRows();\r\n\r\n\t\t\trows.forEach((row) => {\r\n\t\t\t\tif(row.type !== \"group\"){\r\n\t\t\t\t\tvar cell = row.getCell(column);\r\n\t\t\t\t\trow.getElement().prepend(cell.getElement());\r\n\t\t\t\t\tcell.cellRendered();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.fitDataColActualWidthCheck(column);\r\n\r\n\t\t\tif(!this.leftCol){\r\n\t\t\t\tthis.vDomPadLeft = 0;\r\n\t\t\t}else{\r\n\t\t\t\tthis.vDomPadLeft -= column.getWidth();\r\n\t\t\t}\r\n\r\n\t\t\tthis.element.style.paddingLeft = this.vDomPadLeft + \"px\";\r\n\r\n\t\t\tthis.leftCol--;\r\n\r\n\t\t\tthis.addColLeft();\r\n\t\t}\r\n\t}\r\n\r\n\tremoveColRight(column){\r\n\t\tvar column = this.columns[this.rightCol],\r\n\t\trows;\r\n\r\n\t\tif(column && column.modules.vdomHoz.leftPos > this.vDomScrollPosRight){\r\n\t\t\trows = this.table.rowManager.getVisibleRows();\r\n\r\n\t\t\tcolumn.modules.vdomHoz.visible = false;\r\n\r\n\t\t\trows.forEach((row) => {\r\n\t\t\t\tif(row.type !== \"group\"){\r\n\t\t\t\t\tvar cell = row.getCell(column);\r\n\t\t\t\t\trow.getElement().removeChild(cell.getElement());\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.vDomPadRight += column.getWidth();\r\n\t\t\tthis.element.style.paddingRight = this.vDomPadRight + \"px\";\r\n\r\n\t\t\tthis.rightCol --;\r\n\r\n\t\t\tthis.removeColRight();\r\n\t\t}\r\n\t}\r\n\r\n\tremoveColLeft(){\r\n\t\tvar column = this.columns[this.leftCol],\r\n\t\trows;\r\n\r\n\t\tif(column && column.modules.vdomHoz.rightPos < this.vDomScrollPosLeft){\r\n\r\n\t\t\trows = this.table.rowManager.getVisibleRows();\r\n\r\n\t\t\trows.forEach((row) => {\r\n\t\t\t\tif(row.type !== \"group\"){\r\n\t\t\t\t\tvar cell = row.getCell(column);\r\n\t\t\t\t\trow.getElement().removeChild(cell.getElement());\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.vDomPadLeft += column.getWidth();\r\n\t\t\tthis.element.style.paddingLeft = this.vDomPadLeft + \"px\";\r\n\r\n\t\t\tthis.leftCol ++;\r\n\r\n\t\t\tthis.removeColLeft();\r\n\t\t}\r\n\t}\r\n\r\n\tfitDataColActualWidthCheck(column){\r\n\t    var newWidth, widthDiff;\r\n\r\n\t    if(column.modules.vdomHoz.fitDataCheck){\r\n\t        column.reinitializeWidth();\r\n\r\n\t        newWidth = column.getWidth();\r\n\t        widthDiff = newWidth - column.modules.vdomHoz.width;\r\n\r\n\t        if(widthDiff){\r\n\t            column.modules.vdomHoz.rightPos += widthDiff;\r\n\t            column.modules.vdomHoz.width = newWidth;\r\n\t            this.colPositionAdjust(this.rightCol + 2, this.columns.length, widthDiff);\r\n\t        }\r\n\r\n\t        column.modules.vdomHoz.fitDataCheck = false;\r\n\t    }\r\n\t};\r\n\r\n\tinitializeRow(row){\r\n\t\tif(row.type !== \"group\"){\r\n\t\t\trow.modules.vdomHoz = {\r\n\t\t\t\tleftCol:this.leftCol,\r\n\t\t\t\trightCol:this.rightCol,\r\n\t\t\t};\r\n\r\n\t\t\tfor(let i = this.leftCol; i <= this.rightCol; i++){\r\n\t\t\t\tlet column = this.columns[i];\r\n\r\n\t\t\t\tif(column && column.visible){\r\n\t\t\t\t\tlet cell = row.getCell(column);\r\n\r\n\t\t\t\t\trow.getElement().appendChild(cell.getElement());\r\n\t\t\t\t\tcell.cellRendered();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treinitializeRow(row, force){\r\n\t\tif(row.type !== \"group\"){\r\n\t\t\tif(force || !row.modules.vdomHoz || row.modules.vdomHoz.leftCol !== this.leftCol || row.modules.vdomHoz.rightCol !== this.rightCol){\r\n\t\t\t\tvar rowEl = row.getElement();\r\n\t\t\t\twhile(rowEl.firstChild) rowEl.removeChild(rowEl.firstChild);\r\n\r\n\t\t\t\tthis.initializeRow(row);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","'use strict';\r\n\r\nimport defaultOptions from './defaults/options.js';\r\n\r\n\r\nimport ColumnManager from './ColumnManager.js';\r\nimport RowManager from './RowManager.js';\r\nimport FooterManager from './FooterManager.js';\r\n\r\nimport TableRegistry from './TableRegistry.js';\r\nimport ModuleBinder from './ModuleBinder.js';\r\n\r\nimport VirtualDomHorizontal from './renderers/VirtualDomHorizontal.js';\r\n\r\nclass Tabulator {\r\n\r\n\tconstructor(element, options){\r\n\r\n\t\tthis.options = {};\r\n\r\n\t\tthis.columnManager = null; // hold Column Manager\r\n\t\tthis.rowManager = null; //hold Row Manager\r\n\t\tthis.footerManager = null; //holder Footer Manager\r\n\t\tthis.vdomHoz  = null; //holder horizontal virtual dom\r\n\r\n\t\tthis.browser = \"\"; //hold current browser type\r\n\t\tthis.browserSlow = false; //handle reduced functionality for slower browsers\r\n\t\tthis.browserMobile = false; //check if running on moble, prevent resize cancelling edit on keyboard appearence\r\n\t\tthis.rtl = false; //check if the table is in RTL mode\r\n\r\n\t\tthis.modules = {}; //hold all modules bound to this table\r\n\r\n\t\tif(this.initializeElement(element)){\r\n\t\t\tthis.initializeOptions(options || {});\r\n\t\t\tthis._create();\r\n\t\t}\r\n\r\n\t\tTableRegistry.register(this); //register table for inderdevice communication\r\n\t}\r\n\r\n\tinitializeOptions(options){\r\n\r\n\t\tvar defaults = Tabulator.defaultOptions;\r\n\r\n\t\t//warn user if option is not available\r\n\t\tif(options.invalidOptionWarnings !== false){\r\n\t\t\tfor (var key in options){\r\n\t\t\t\tif(typeof defaults[key] === \"undefined\"){\r\n\t\t\t\t\tconsole.warn(\"Invalid table constructor option:\", key)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//assign options to table\r\n\t\tfor (var key in defaults){\r\n\t\t\tif(key in options){\r\n\t\t\t\tthis.options[key] = options[key];\r\n\t\t\t}else{\r\n\t\t\t\tif(Array.isArray(defaults[key])){\r\n\t\t\t\t\tthis.options[key] = Object.assign([], defaults[key]);\r\n\t\t\t\t}else if(typeof defaults[key] === \"object\" && defaults[key] !== null){\r\n\t\t\t\t\tthis.options[key] = Object.assign({}, defaults[key]);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.options[key] = defaults[key];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeElement(element){\r\n\t\tif(typeof HTMLElement !== \"undefined\" && element instanceof HTMLElement){\r\n\t\t\tthis.element = element;\r\n\t\t\treturn true;\r\n\t\t}else if(typeof element === \"string\"){\r\n\t\t\tthis.element = document.querySelector(element);\r\n\r\n\t\t\tif(this.element){\r\n\t\t\t\treturn true;\r\n\t\t\t}else{\r\n\t\t\t\tconsole.error(\"Tabulator Creation Error - no element found matching selector: \", element);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tconsole.error(\"Tabulator Creation Error - Invalid element provided:\", element);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\trtlCheck(){\r\n\t\tvar style = window.getComputedStyle(this.element);\r\n\r\n\t\tswitch(this.options.textDirection){\r\n\t\t\tcase\"auto\":\r\n\t\t\tif(style.direction !== \"rtl\"){\r\n\t\t\t\tbreak;\r\n\t\t\t};\r\n\r\n\t\t\tcase \"rtl\":\r\n\t\t\tthis.element.classList.add(\"tabulator-rtl\");\r\n\t\t\tthis.rtl = true;\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"ltr\":\r\n\t\t\tthis.element.classList.add(\"tabulator-ltr\");\r\n\r\n\t\t\tdefault:\r\n\t\t\tthis.rtl = false;\r\n\t\t}\r\n\t}\r\n\r\n\t//convert depricated functionality to new functions\r\n\t_mapDepricatedFunctionality(){\r\n\t\t//all previously deprecated functionality removed in the 5.0 release\r\n\t}\r\n\r\n\t_clearSelection(){\r\n\r\n\t\tthis.element.classList.add(\"tabulator-block-select\");\r\n\r\n\t\tif (window.getSelection) {\r\n\t\t  if (window.getSelection().empty) {  // Chrome\r\n\t\t  \twindow.getSelection().empty();\r\n\t\t  } else if (window.getSelection().removeAllRanges) {  // Firefox\r\n\t\t  \twindow.getSelection().removeAllRanges();\r\n\t\t  }\r\n\t\t} else if (document.selection) {  // IE?\r\n\t\t\tdocument.selection.empty();\r\n\t\t}\r\n\r\n\t\tthis.element.classList.remove(\"tabulator-block-select\");\r\n\t}\r\n\r\n\t//concreate table\r\n\t_create(){\r\n\t\tthis._clearObjectPointers();\r\n\r\n\t\tthis._mapDepricatedFunctionality();\r\n\r\n\t\tthis.bindModules();\r\n\r\n\t\tthis.rtlCheck();\r\n\r\n\t\tif(this.element.tagName === \"TABLE\"){\r\n\t\t\tif(this.modExists(\"htmlTableImport\", true)){\r\n\t\t\t\tthis.modules.htmlTableImport.parseTable();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.columnManager = new ColumnManager(this);\r\n\t\tthis.rowManager = new RowManager(this);\r\n\t\tthis.footerManager = new FooterManager(this);\r\n\r\n\t\tthis.columnManager.setRowManager(this.rowManager);\r\n\t\tthis.rowManager.setColumnManager(this.columnManager);\r\n\r\n\t\tif(this.options.virtualDomHoz){\r\n\t\t\tthis.vdomHoz = new VirtualDomHorizontal(this);\r\n\t\t}\r\n\r\n\t\tthis._buildElement();\r\n\r\n\t\tthis._loadInitialData();\r\n\t}\r\n\r\n\t//clear pointers to objects in default config object\r\n\t_clearObjectPointers(){\r\n\t\tthis.options.columns = this.options.columns.slice(0);\r\n\r\n\t\tif(!this.options.reactiveData){\r\n\t\t\tthis.options.data = this.options.data.slice(0);\r\n\t\t}\r\n\t}\r\n\r\n\t//build tabulator element\r\n\t_buildElement(){\r\n\t\tvar element = this.element,\r\n\t\tmod = this.modules,\r\n\t\toptions = this.options;\r\n\r\n\t\toptions.tableBuilding.call(this);\r\n\r\n\t\telement.classList.add(\"tabulator\");\r\n\t\telement.setAttribute(\"role\", \"grid\");\r\n\r\n\t\t//empty element\r\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\r\n\r\n\t\t//set table height\r\n\t\tif(options.height){\r\n\t\t\toptions.height = isNaN(options.height) ? options.height : options.height + \"px\";\r\n\t\t\telement.style.height = options.height;\r\n\t\t}\r\n\r\n\t\t//set table min height\r\n\t\tif(options.minHeight !== false){\r\n\t\t\toptions.minHeight = isNaN(options.minHeight) ? options.minHeight : options.minHeight + \"px\";\r\n\t\t\telement.style.minHeight = options.minHeight;\r\n\t\t}\r\n\r\n\t\t//set table maxHeight\r\n\t\tif(options.maxHeight !== false){\r\n\t\t\toptions.maxHeight = isNaN(options.maxHeight) ? options.maxHeight : options.maxHeight + \"px\";\r\n\t\t\telement.style.maxHeight = options.maxHeight;\r\n\t\t}\r\n\r\n\t\tthis.columnManager.initialize();\r\n\t\tthis.rowManager.initialize();\r\n\r\n\t\tthis._detectBrowser();\r\n\r\n\t\tif(this.modExists(\"layout\", true)){\r\n\t\t\tmod.layout.initialize(options.layout);\r\n\t\t}\r\n\r\n\t\t//set localization\r\n\t\tmod.localize.initialize();\r\n\r\n\t\tif(options.headerFilterPlaceholder !== false){\r\n\t\t\tmod.localize.setHeaderFilterPlaceholder(options.headerFilterPlaceholder);\r\n\t\t}\r\n\r\n\t\tfor(let locale in options.langs){\r\n\t\t\tmod.localize.installLang(locale, options.langs[locale]);\r\n\t\t}\r\n\r\n\t\tmod.localize.setLocale(options.locale);\r\n\r\n\t\t//configure placeholder element\r\n\t\tif(typeof options.placeholder == \"string\"){\r\n\r\n\t\t\tvar el = document.createElement(\"div\");\r\n\t\t\tel.classList.add(\"tabulator-placeholder\");\r\n\r\n\t\t\tvar span = document.createElement(\"span\");\r\n\t\t\tspan.innerHTML = options.placeholder;\r\n\r\n\t\t\tel.appendChild(span);\r\n\r\n\t\t\toptions.placeholder = el;\r\n\t\t}\r\n\r\n\t\t//build table elements\r\n\t\telement.appendChild(this.columnManager.getElement());\r\n\t\telement.appendChild(this.rowManager.getElement());\r\n\r\n\t\tif(options.footerElement){\r\n\t\t\tthis.footerManager.activate();\r\n\t\t}\r\n\r\n\t\tif(options.persistence && this.modExists(\"persistence\", true)){\r\n\t\t\tmod.persistence.initialize();\r\n\t\t}\r\n\r\n\t\tif(options.movableRows && this.modExists(\"moveRow\")){\r\n\t\t\tmod.moveRow.initialize();\r\n\t\t}\r\n\r\n\t\tif(options.autoColumns && this.options.data){\r\n\t\t\tthis.columnManager.generateColumnsFromRowData(this.options.data);\r\n\t\t}\r\n\r\n\t\tif(this.modExists(\"columnCalcs\")){\r\n\t\t\tmod.columnCalcs.initialize();\r\n\t\t}\r\n\r\n\t\tthis.columnManager.setColumns(options.columns);\r\n\r\n\t\tif(options.dataTree && this.modExists(\"dataTree\", true)){\r\n\t\t\tmod.dataTree.initialize();\r\n\t\t}\r\n\r\n\t\tif(this.modExists(\"frozenRows\")){\r\n\t\t\tthis.modules.frozenRows.initialize();\r\n\t\t}\r\n\r\n\t\tif(((options.persistence && this.modExists(\"persistence\", true) && mod.persistence.config.sort) || options.initialSort) && this.modExists(\"sort\", true)){\r\n\t\t\tvar sorters = [];\r\n\r\n\t\t\tif(options.persistence && this.modExists(\"persistence\", true) && mod.persistence.config.sort){\r\n\t\t\t\tsorters = mod.persistence.load(\"sort\");\r\n\r\n\t\t\t\tif(sorters === false && options.initialSort){\r\n\t\t\t\t\tsorters = options.initialSort;\r\n\t\t\t\t}\r\n\t\t\t}else if(options.initialSort){\r\n\t\t\t\tsorters = options.initialSort;\r\n\t\t\t}\r\n\r\n\t\t\tmod.sort.setSort(sorters);\r\n\t\t}\r\n\r\n\t\tif(((options.persistence && this.modExists(\"persistence\", true) && mod.persistence.config.filter) || options.initialFilter) && this.modExists(\"filter\", true)){\r\n\t\t\tvar filters = [];\r\n\r\n\r\n\t\t\tif(options.persistence && this.modExists(\"persistence\", true) && mod.persistence.config.filter){\r\n\t\t\t\tfilters = mod.persistence.load(\"filter\");\r\n\r\n\t\t\t\tif(filters === false && options.initialFilter){\r\n\t\t\t\t\tfilters = options.initialFilter;\r\n\t\t\t\t}\r\n\t\t\t}else if(options.initialFilter){\r\n\t\t\t\tfilters = options.initialFilter;\r\n\t\t\t}\r\n\r\n\t\t\tmod.filter.setFilter(filters);\r\n\t\t}\r\n\r\n\t\tif(options.initialHeaderFilter && this.modExists(\"filter\", true)){\r\n\t\t\toptions.initialHeaderFilter.forEach((item) => {\r\n\r\n\t\t\t\tvar column = this.columnManager.findColumn(item.field);\r\n\r\n\t\t\t\tif(column){\r\n\t\t\t\t\tmod.filter.setHeaderFilterValue(column, item.value);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", item.field);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\r\n\t\tif(this.modExists(\"ajax\")){\r\n\t\t\tmod.ajax.initialize();\r\n\t\t}\r\n\r\n\t\tif(options.pagination && this.modExists(\"page\", true)){\r\n\t\t\tmod.page.initialize();\r\n\t\t}\r\n\r\n\t\tif(options.groupBy && this.modExists(\"groupRows\", true)){\r\n\t\t\tmod.groupRows.initialize();\r\n\t\t}\r\n\r\n\t\tif(this.modExists(\"keybindings\")){\r\n\t\t\tmod.keybindings.initialize();\r\n\t\t}\r\n\r\n\t\tif(this.modExists(\"selectRow\")){\r\n\t\t\tmod.selectRow.clearSelectionData(true);\r\n\t\t}\r\n\r\n\t\tif(options.autoResize && this.modExists(\"resizeTable\")){\r\n\t\t\tmod.resizeTable.initialize();\r\n\t\t}\r\n\r\n\t\tif(this.modExists(\"clipboard\")){\r\n\t\t\tmod.clipboard.initialize();\r\n\t\t}\r\n\r\n\t\tif(options.printAsHtml && this.modExists(\"print\")){\r\n\t\t\tmod.print.initialize();\r\n\t\t}\r\n\r\n\t\toptions.tableBuilt.call(this);\r\n\t}\r\n\r\n\t_loadInitialData(){\r\n\t\tif(this.options.pagination && this.modExists(\"page\")){\r\n\t\t\tthis.modules.page.reset(true, true);\r\n\r\n\t\t\tif(this.options.pagination == \"local\"){\r\n\t\t\t\tif(this.options.data.length){\r\n\t\t\t\t\tthis.rowManager.setData(this.options.data, false, true);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif((this.options.ajaxURL || this.options.ajaxURLGenerator) && this.modExists(\"ajax\")){\r\n\t\t\t\t\t\tthis.modules.ajax.loadData(false, true).then(()=>{}).catch(()=>{\r\n\t\t\t\t\t\t\tif(this.options.paginationInitialPage){\r\n\t\t\t\t\t\t\t\tthis.modules.page.setPage(this.options.paginationInitialPage);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.rowManager.setData(this.options.data, false, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this.options.paginationInitialPage){\r\n\t\t\t\t\tthis.modules.page.setPage(this.options.paginationInitialPage);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(this.options.ajaxURL){\r\n\t\t\t\t\tthis.modules.page.setPage(this.options.paginationInitialPage).then(()=>{}).catch(()=>{});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.rowManager.setData([], false, true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(this.options.data.length){\r\n\t\t\t\tthis.rowManager.setData(this.options.data);\r\n\t\t\t}else{\r\n\t\t\t\tif((this.options.ajaxURL || this.options.ajaxURLGenerator) && this.modExists(\"ajax\")){\r\n\t\t\t\t\tthis.modules.ajax.loadData(false, true).then(()=>{}).catch(()=>{});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.rowManager.setData(this.options.data, false, true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//deconstructor\r\n\tdestroy(){\r\n\t\tvar element = this.element;\r\n\r\n\t\tcomms(this); //deregister table from inderdevice communication\r\n\r\n\t\tif(this.options.reactiveData && this.modExists(\"reactiveData\", true)){\r\n\t\t\tthis.modules.reactiveData.unwatchData();\r\n\t\t}\r\n\r\n\t\t//clear row data\r\n\t\tthis.rowManager.rows.forEach(function(row){\r\n\t\t\trow.wipe();\r\n\t\t});\r\n\r\n\t\tthis.rowManager.rows = [];\r\n\t\tthis.rowManager.activeRows = [];\r\n\t\tthis.rowManager.displayRows = [];\r\n\r\n\t\t//clear event bindings\r\n\t\tif(this.options.autoResize && this.modExists(\"resizeTable\")){\r\n\t\t\tthis.modules.resizeTable.clearBindings();\r\n\t\t}\r\n\r\n\t\tif(this.modExists(\"keybindings\")){\r\n\t\t\tthis.modules.keybindings.clearBindings();\r\n\t\t}\r\n\r\n\t\t//clear DOM\r\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\r\n\t\telement.classList.remove(\"tabulator\");\r\n\t}\r\n\r\n\t_detectBrowser(){\r\n\t\tvar ua = navigator.userAgent||navigator.vendor||window.opera;\r\n\r\n\t\tif(ua.indexOf(\"Trident\") > -1){\r\n\t\t\tthis.browser = \"ie\";\r\n\t\t\tthis.browserSlow = true;\r\n\t\t}else if(ua.indexOf(\"Edge\") > -1){\r\n\t\t\tthis.browser = \"edge\";\r\n\t\t\tthis.browserSlow = true;\r\n\t\t}else if(ua.indexOf(\"Firefox\") > -1){\r\n\t\t\tthis.browser = \"firefox\";\r\n\t\t\tthis.browserSlow = false;\r\n\t\t}else{\r\n\t\t\tthis.browser = \"other\";\r\n\t\t\tthis.browserSlow = false;\r\n\t\t}\r\n\r\n\t\tthis.browserMobile = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(ua)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(ua.substr(0,4));\r\n\t}\r\n\r\n\t////////////////// Data Handling //////////////////\r\n\t//block table redrawing\r\n\tblockRedraw(){\r\n\t\treturn this.rowManager.blockRedraw();\r\n\t}\r\n\r\n\t//restore table redrawing\r\n\trestoreRedraw(){\r\n\t\treturn this.rowManager.restoreRedraw();\r\n\t}\r\n\r\n\t//local data from local file\r\n\tsetDataFromLocalFile(extensions){\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tvar input = document.createElement(\"input\");\r\n\t\t\tinput.type = \"file\";\r\n\t\t\tinput.accept = extensions || \".json,application/json\";\r\n\r\n\t\t\tinput.addEventListener(\"change\", (e) => {\r\n\t\t\t\tvar file = input.files[0],\r\n\t\t\t\treader = new FileReader(),\r\n\t\t\t\tdata;\r\n\r\n\t\t\t\treader.readAsText(file);\r\n\r\n\t\t\t\treader.onload = (e) => {\r\n\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tdata = JSON.parse(reader.result);\r\n\t\t\t\t\t} catch(e) {\r\n\t\t\t\t\t\tconsole.warn(\"File Load Error - File contents is invalid JSON\", e);\r\n\t\t\t\t\t\treject(e);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.setData(data)\r\n\t\t\t\t\t.then((data) => {\r\n\t\t\t\t\t\tresolve(data);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((err) => {\r\n\t\t\t\t\t\tresolve(err);\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\r\n\t\t\t\treader.onerror = (e) => {\r\n\t\t\t\t\tconsole.warn(\"File Load Error - Unable to read file\");\r\n\t\t\t\t\treject();\r\n\t\t\t\t};\r\n\t\t\t});\r\n\r\n\t\t\tinput.click();\r\n\t\t});\r\n\t}\r\n\r\n\t//load data\r\n\tsetData(data, params, config){\r\n\t\tif(this.modExists(\"ajax\")){\r\n\t\t\tthis.modules.ajax.blockActiveRequest();\r\n\t\t}\r\n\r\n\t\treturn this._setData(data, params, config, false, true);\r\n\t}\r\n\r\n\t_setData(data, params, config, inPosition, columnsChanged){\r\n\t\tif(typeof(data) === \"string\"){\r\n\t\t\tif (data.indexOf(\"{\") == 0 || data.indexOf(\"[\") == 0){\r\n\t\t\t\t//data is a json encoded string\r\n\t\t\t\treturn this.rowManager.setData(JSON.parse(data), inPosition, columnsChanged);\r\n\t\t\t}else{\r\n\r\n\t\t\t\tif(this.modExists(\"ajax\", true)){\r\n\t\t\t\t\tif(params){\r\n\t\t\t\t\t\tthis.modules.ajax.setParams(params);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(config){\r\n\t\t\t\t\t\tthis.modules.ajax.setConfig(config);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.modules.ajax.setUrl(data);\r\n\r\n\t\t\t\t\tif(this.options.pagination == \"remote\" && this.modExists(\"page\", true)){\r\n\t\t\t\t\t\tthis.modules.page.reset(true, true);\r\n\t\t\t\t\t\treturn this.modules.page.setPage(1);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t//assume data is url, make ajax call to url to get data\r\n\t\t\t\t\t\treturn this.modules.ajax.loadData(inPosition, columnsChanged);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(data){\r\n\t\t\t\t//asume data is already an object\r\n\t\t\t\treturn this.rowManager.setData(data, inPosition, columnsChanged);\r\n\t\t\t}else{\r\n\t\t\t\t//no data provided, check if ajaxURL is present;\r\n\t\t\t\tif(this.modExists(\"ajax\") && (this.modules.ajax.getUrl || this.options.ajaxURLGenerator)){\r\n\t\t\t\t\tif(this.options.pagination == \"remote\" && this.modExists(\"page\", true)){\r\n\t\t\t\t\t\tthis.modules.page.reset(true, true);\r\n\t\t\t\t\t\treturn this.modules.page.setPage(1);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn this.modules.ajax.loadData(inPosition, columnsChanged);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\t//empty data\r\n\t\t\t\t\treturn this.rowManager.setData([], inPosition, columnsChanged);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//clear data\r\n\tclearData(){\r\n\t\tif(this.modExists(\"ajax\")){\r\n\t\t\tthis.modules.ajax.blockActiveRequest();\r\n\t\t}\r\n\r\n\t\tthis.rowManager.clearData();\r\n\t}\r\n\r\n\t//get table data array\r\n\tgetData(active){\r\n\t\treturn this.rowManager.getData(active);\r\n\t}\r\n\r\n\t//get table data array count\r\n\tgetDataCount(active){\r\n\t\treturn this.rowManager.getDataCount(active);\r\n\t}\r\n\r\n\t//search for specific row components\r\n\tsearchRows(field, type, value){\r\n\t\tif(this.modExists(\"filter\", true)){\r\n\t\t\treturn this.modules.filter.search(\"rows\", field, type, value);\r\n\t\t}\r\n\t}\r\n\r\n\t//search for specific data\r\n\tsearchData(field, type, value){\r\n\t\tif(this.modExists(\"filter\", true)){\r\n\t\t\treturn this.modules.filter.search(\"data\", field, type, value);\r\n\t\t}\r\n\t}\r\n\r\n\t//get table html\r\n\tgetHtml(visible, style, config){\r\n\t\tif(this.modExists(\"export\", true)){\r\n\t\t\treturn this.modules.export.getHtml(visible, style, config);\r\n\t\t}\r\n\t}\r\n\r\n\t//get print html\r\n\tprint(visible, style, config){\r\n\t\tif(this.modExists(\"print\", true)){\r\n\t\t\treturn this.modules.print.printFullscreen(visible, style, config);\r\n\t\t}\r\n\t}\r\n\r\n\t//retrieve Ajax URL\r\n\tgetAjaxUrl(){\r\n\t\tif(this.modExists(\"ajax\", true)){\r\n\t\t\treturn this.modules.ajax.getUrl();\r\n\t\t}\r\n\t}\r\n\r\n\t//replace data, keeping table in position with same sort\r\n\treplaceData(data, params, config){\r\n\t\tif(this.modExists(\"ajax\")){\r\n\t\t\tthis.modules.ajax.blockActiveRequest();\r\n\t\t}\r\n\r\n\t\treturn this._setData(data, params, config, true);\r\n\t}\r\n\r\n\t//update table data\r\n\tupdateData(data){\r\n\t\tvar responses = 0;\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif(this.modExists(\"ajax\")){\r\n\t\t\t\tthis.modules.ajax.blockActiveRequest();\r\n\t\t\t}\r\n\r\n\t\t\tif(typeof data === \"string\"){\r\n\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t}\r\n\r\n\t\t\tif(data){\r\n\t\t\t\tdata.forEach((item) => {\r\n\t\t\t\t\tvar row = this.rowManager.findRow(item[this.options.index]);\r\n\r\n\t\t\t\t\tif(row){\r\n\t\t\t\t\t\tresponses++;\r\n\r\n\t\t\t\t\t\trow.updateData(item)\r\n\t\t\t\t\t\t.then(()=>{\r\n\t\t\t\t\t\t\tresponses--;\r\n\r\n\t\t\t\t\t\t\tif(!responses){\r\n\t\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\r\n\t\t\t\treject(\"Update Error - No data provided\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\taddData(data, pos, index){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif(this.modExists(\"ajax\")){\r\n\t\t\t\tthis.modules.ajax.blockActiveRequest();\r\n\t\t\t}\r\n\r\n\t\t\tif(typeof data === \"string\"){\r\n\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t}\r\n\r\n\t\t\tif(data){\r\n\t\t\t\tthis.rowManager.addRows(data, pos, index)\r\n\t\t\t\t.then((rows) => {\r\n\t\t\t\t\tvar output = [];\r\n\r\n\t\t\t\t\trows.forEach(function(row){\r\n\t\t\t\t\t\toutput.push(row.getComponent());\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tresolve(output);\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\r\n\t\t\t\treject(\"Update Error - No data provided\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//update table data\r\n\tupdateOrAddData(data){\r\n\t\tvar rows = [],\r\n\t\tresponses = 0;\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif(this.modExists(\"ajax\")){\r\n\t\t\t\tthis.modules.ajax.blockActiveRequest();\r\n\t\t\t}\r\n\r\n\t\t\tif(typeof data === \"string\"){\r\n\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t}\r\n\r\n\t\t\tif(data){\r\n\t\t\t\tdata.forEach((item) => {\r\n\t\t\t\t\tvar row = this.rowManager.findRow(item[this.options.index]);\r\n\r\n\t\t\t\t\tresponses++;\r\n\r\n\t\t\t\t\tif(row){\r\n\t\t\t\t\t\trow.updateData(item)\r\n\t\t\t\t\t\t.then(()=>{\r\n\t\t\t\t\t\t\tresponses--;\r\n\t\t\t\t\t\t\trows.push(row.getComponent());\r\n\r\n\t\t\t\t\t\t\tif(!responses){\r\n\t\t\t\t\t\t\t\tresolve(rows);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.rowManager.addRows(item)\r\n\t\t\t\t\t\t.then((newRows)=>{\r\n\t\t\t\t\t\t\tresponses--;\r\n\t\t\t\t\t\t\trows.push(newRows[0].getComponent());\r\n\r\n\t\t\t\t\t\t\tif(!responses){\r\n\t\t\t\t\t\t\t\tresolve(rows);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\r\n\t\t\t\treject(\"Update Error - No data provided\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//get row object\r\n\tgetRow(index){\r\n\t\tvar row = this.rowManager.findRow(index);\r\n\r\n\t\tif(row){\r\n\t\t\treturn row.getComponent();\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Find Error - No matching row found:\", index);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t//get row object\r\n\tgetRowFromPosition(position, active){\r\n\t\tvar row = this.rowManager.getRowFromPosition(position, active);\r\n\r\n\t\tif(row){\r\n\t\t\treturn row.getComponent();\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Find Error - No matching row found:\", position);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t//delete row from table\r\n\tdeleteRow(index){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tvar count = 0,\r\n\t\t\tsuccessCount = 0,\r\n\t\t\tfoundRows = [];\r\n\r\n\t\t\tfunction doneCheck(){\r\n\t\t\t\tcount++;\r\n\r\n\t\t\t\tif(count == index.length){\r\n\t\t\t\t\tif(successCount){\r\n\t\t\t\t\t\tthis.rowManager.reRenderInPosition();\r\n\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(!Array.isArray(index)){\r\n\t\t\t\tindex = [index];\r\n\t\t\t}\r\n\r\n\t\t\t//find matching rows\r\n\t\t\tindex.forEach((item) =>{\r\n\t\t\t\tvar row = this.rowManager.findRow(item, true);\r\n\r\n\t\t\t\tif(row){\r\n\t\t\t\t\tfoundRows.push(row);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Delete Error - No matching row found:\", item);\r\n\t\t\t\t\treject(\"Delete Error - No matching row found\")\r\n\t\t\t\t\tdoneCheck();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t//sort rows into correct order to ensure smooth delete from table\r\n\t\t\tfoundRows.sort((a, b) => {\r\n\t\t\t\treturn this.rowManager.rows.indexOf(a) > this.rowManager.rows.indexOf(b) ? 1 : -1;\r\n\t\t\t});\r\n\r\n\t\t\tfoundRows.forEach((row) =>{\r\n\t\t\t\trow.delete()\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tsuccessCount++;\r\n\t\t\t\t\tdoneCheck();\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err) => {\r\n\t\t\t\t\tdoneCheck();\r\n\t\t\t\t\treject(err);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\t//add row to table\r\n\taddRow(data, pos, index){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif(typeof data === \"string\"){\r\n\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t}\r\n\r\n\t\t\tthis.rowManager.addRows(data, pos, index)\r\n\t\t\t.then((rows)=>{\r\n\t\t\t\t//recalc column calculations if present\r\n\t\t\t\tif(this.modExists(\"columnCalcs\")){\r\n\t\t\t\t\tthis.modules.columnCalcs.recalc(this.rowManager.activeRows);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tresolve(rows[0].getComponent());\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\t//update a row if it exitsts otherwise create it\r\n\tupdateOrAddRow(index, data){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tvar row = this.rowManager.findRow(index);\r\n\r\n\t\t\tif(typeof data === \"string\"){\r\n\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t}\r\n\r\n\t\t\tif(row){\r\n\t\t\t\trow.updateData(data)\r\n\t\t\t\t.then(()=>{\r\n\t\t\t\t\t//recalc column calculations if present\r\n\t\t\t\t\tif(this.modExists(\"columnCalcs\")){\r\n\t\t\t\t\t\tthis.modules.columnCalcs.recalc(this.rowManager.activeRows);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tresolve(row.getComponent());\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err)=>{\r\n\t\t\t\t\treject(err);\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\trow = this.rowManager.addRows(data)\r\n\t\t\t\t.then((rows)=>{\r\n\t\t\t\t\t//recalc column calculations if present\r\n\t\t\t\t\tif(this.modExists(\"columnCalcs\")){\r\n\t\t\t\t\t\tthis.modules.columnCalcs.recalc(this.rowManager.activeRows);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tresolve(rows[0].getComponent());\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err)=>{\r\n\t\t\t\t\treject(err);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//update row data\r\n\tupdateRow(index, data){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tvar row = this.rowManager.findRow(index);\r\n\r\n\t\t\tif(typeof data === \"string\"){\r\n\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t}\r\n\r\n\t\t\tif(row){\r\n\t\t\t\trow.updateData(data).then(()=>{\r\n\t\t\t\t\tresolve(row.getComponent());\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err)=>{\r\n\t\t\t\t\treject(err);\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Update Error - No matching row found:\", index);\r\n\t\t\t\treject(\"Update Error - No matching row found\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//scroll to row in DOM\r\n\tscrollToRow(index, position, ifVisible){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tvar row = this.rowManager.findRow(index);\r\n\r\n\t\t\tif(row){\r\n\t\t\t\tthis.rowManager.scrollToRow(row, position, ifVisible)\r\n\t\t\t\t.then(()=>{\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err)=>{\r\n\t\t\t\t\treject(err);\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Scroll Error - No matching row found:\", index);\r\n\t\t\t\treject(\"Scroll Error - No matching row found\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tmoveRow(from, to, after){\r\n\t\tvar fromRow = this.rowManager.findRow(from);\r\n\r\n\t\tif(fromRow){\r\n\t\t\tfromRow.moveToRow(to, after);\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Move Error - No matching row found:\", from);\r\n\t\t}\r\n\t}\r\n\r\n\tgetRows(active){\r\n\t\treturn this.rowManager.getComponents(active);\r\n\t}\r\n\r\n\t//get position of row in table\r\n\tgetRowPosition(index, active){\r\n\t\tvar row = this.rowManager.findRow(index);\r\n\r\n\t\tif(row){\r\n\t\t\treturn this.rowManager.getRowPosition(row, active);\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Position Error - No matching row found:\", index);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t//copy table data to clipboard\r\n\tcopyToClipboard(selector){\r\n\t\tif(this.modExists(\"clipboard\", true)){\r\n\t\t\tthis.modules.clipboard.copy(selector);\r\n\t\t}\r\n\t}\r\n\r\n\t/////////////// Column Functions  ///////////////\r\n\tsetColumns(definition){\r\n\t\tthis.columnManager.setColumns(definition);\r\n\t}\r\n\r\n\tgetColumns(structured){\r\n\t\treturn this.columnManager.getComponents(structured);\r\n\t}\r\n\r\n\tgetColumn(field){\r\n\t\tvar col = this.columnManager.findColumn(field);\r\n\r\n\t\tif(col){\r\n\t\t\treturn col.getComponent();\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Find Error - No matching column found:\", field);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tgetColumnDefinitions(){\r\n\t\treturn this.columnManager.getDefinitionTree();\r\n\t}\r\n\r\n\tgetColumnLayout(){\r\n\t\tif(this.modExists(\"persistence\", true)){\r\n\t\t\treturn this.modules.persistence.parseColumns(this.columnManager.getColumns());\r\n\t\t}\r\n\t}\r\n\r\n\tsetColumnLayout(layout){\r\n\t\tif(this.modExists(\"persistence\", true)){\r\n\t\t\tthis.columnManager.setColumns(this.modules.persistence.mergeDefinition(this.options.columns, layout))\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tshowColumn(field){\r\n\t\tvar column = this.columnManager.findColumn(field);\r\n\r\n\t\tif(column){\r\n\t\t\tcolumn.show();\r\n\r\n\t\t\tif(this.options.responsiveLayout && this.modExists(\"responsiveLayout\", true)){\r\n\t\t\t\tthis.modules.responsiveLayout.update();\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Column Show Error - No matching column found:\", field);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\thideColumn(field){\r\n\t\tvar column = this.columnManager.findColumn(field);\r\n\r\n\t\tif(column){\r\n\t\t\tcolumn.hide();\r\n\r\n\t\t\tif(this.options.responsiveLayout && this.modExists(\"responsiveLayout\", true)){\r\n\t\t\t\tthis.modules.responsiveLayout.update();\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Column Hide Error - No matching column found:\", field);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\ttoggleColumn(field){\r\n\t\tvar column = this.columnManager.findColumn(field);\r\n\r\n\t\tif(column){\r\n\t\t\tif(column.visible){\r\n\t\t\t\tcolumn.hide();\r\n\t\t\t}else{\r\n\t\t\t\tcolumn.show();\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Column Visibility Toggle Error - No matching column found:\", field);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\taddColumn(definition, before, field){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tvar column = this.columnManager.findColumn(field);\r\n\r\n\t\t\tthis.columnManager.addColumn(definition, before, column)\r\n\t\t\t.then((column) => {\r\n\t\t\t\tresolve(column.getComponent());\r\n\t\t\t}).catch((err) => {\r\n\t\t\t\treject(err);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tdeleteColumn(field){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tvar column = this.columnManager.findColumn(field);\r\n\r\n\t\t\tif(column){\r\n\t\t\t\tcolumn.delete()\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\treject(err);\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Column Delete Error - No matching column found:\", field);\r\n\t\t\t\treject();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tupdateColumnDefinition(field, definition){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tvar column = this.columnManager.findColumn(field);\r\n\r\n\t\t\tif(column){\r\n\t\t\t\tcolumn.updateDefinition(definition)\r\n\t\t\t\t.then((col) => {\r\n\t\t\t\t\tresolve(col);\r\n\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\treject(err);\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Column Update Error - No matching column found:\", field);\r\n\t\t\t\treject();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tmoveColumn(from, to, after){\r\n\t\tvar fromColumn = this.columnManager.findColumn(from);\r\n\t\tvar toColumn = this.columnManager.findColumn(to);\r\n\r\n\t\tif(fromColumn){\r\n\t\t\tif(toColumn){\r\n\t\t\t\tthis.columnManager.moveColumn(fromColumn, toColumn, after)\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Move Error - No matching column found:\", toColumn);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Move Error - No matching column found:\", from);\r\n\t\t}\r\n\t}\r\n\r\n\t//scroll to column in DOM\r\n\tscrollToColumn(field, position, ifVisible){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tvar column = this.columnManager.findColumn(field);\r\n\r\n\t\t\tif(column){\r\n\t\t\t\tthis.columnManager.scrollToColumn(column, position, ifVisible)\r\n\t\t\t\t.then(()=>{\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err)=>{\r\n\t\t\t\t\treject(err);\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Scroll Error - No matching column found:\", field);\r\n\t\t\t\treject(\"Scroll Error - No matching column found\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//////////// Localization Functions  ////////////\r\n\tsetLocale(locale){\r\n\t\tthis.modules.localize.setLocale(locale);\r\n\t}\r\n\r\n\tgetLocale(){\r\n\t\treturn this.modules.localize.getLocale();\r\n\t}\r\n\r\n\tgetLang(locale){\r\n\t\treturn this.modules.localize.getLang(locale);\r\n\t}\r\n\r\n\t//////////// General Public Functions ////////////\r\n\t//redraw list without updating data\r\n\tredraw(force){\r\n\t\tthis.columnManager.redraw(force);\r\n\t\tthis.rowManager.redraw(force);\r\n\t}\r\n\r\n\tsetHeight(height){\r\n\r\n\t\tif(this.rowManager.renderMode !== \"classic\"){\r\n\t\t\tthis.options.height = isNaN(height) ? height : height + \"px\";\r\n\t\t\tthis.element.style.height = this.options.height;\r\n\t\t\tthis.rowManager.setRenderMode();\r\n\t\t\tthis.rowManager.redraw();\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"setHeight function is not available in classic render mode\");\r\n\t\t}\r\n\t}\r\n\r\n\t///////////////////// Sorting ////////////////////\r\n\tsetSort(sortList, dir){\r\n\t\tif(this.modExists(\"sort\", true)){\r\n\t\t\tthis.modules.sort.setSort(sortList, dir);\r\n\t\t\tthis.rowManager.sorterRefresh();\r\n\t\t}\r\n\t}\r\n\r\n\tgetSorters(){\r\n\t\tif(this.modExists(\"sort\", true)){\r\n\t\t\treturn this.modules.sort.getSort();\r\n\t\t}\r\n\t}\r\n\r\n\tclearSort(){\r\n\t\tif(this.modExists(\"sort\", true)){\r\n\t\t\tthis.modules.sort.clear();\r\n\t\t\tthis.rowManager.sorterRefresh();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t///////////////////// Filtering ////////////////////\r\n\r\n\t//set standard filters\r\n\tsetFilter(field, type, value, params){\r\n\t\tif(this.modExists(\"filter\", true)){\r\n\t\t\tthis.modules.filter.setFilter(field, type, value, params);\r\n\t\t\tthis.rowManager.filterRefresh();\r\n\t\t}\r\n\t}\r\n\r\n\t//set standard filters\r\n\trefreshFilter(){\r\n\t\tif(this.modExists(\"filter\", true)){\r\n\t\t\tthis.rowManager.filterRefresh();\r\n\t\t}\r\n\t}\r\n\r\n\t//add filter to array\r\n\taddFilter(field, type, value, params){\r\n\t\tif(this.modExists(\"filter\", true)){\r\n\t\t\tthis.modules.filter.addFilter(field, type, value, params);\r\n\t\t\tthis.rowManager.filterRefresh();\r\n\t\t}\r\n\t}\r\n\r\n\t//get all filters\r\n\tgetFilters(all){\r\n\t\tif(this.modExists(\"filter\", true)){\r\n\t\t\treturn this.modules.filter.getFilters(all);\r\n\t\t}\r\n\t}\r\n\r\n\tsetHeaderFilterFocus(field){\r\n\t\tif(this.modExists(\"filter\", true)){\r\n\t\t\tvar column = this.columnManager.findColumn(field);\r\n\r\n\t\t\tif(column){\r\n\t\t\t\tthis.modules.filter.setHeaderFilterFocus(column);\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Column Filter Focus Error - No matching column found:\", field);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetHeaderFilterValue(field) {\r\n\t\tif(this.modExists(\"filter\", true)){\r\n\t\t\tvar column = this.columnManager.findColumn(field);\r\n\r\n\t\t\tif(column){\r\n\t\t\t\treturn this.modules.filter.getHeaderFilterValue(column);\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", field);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsetHeaderFilterValue(field, value){\r\n\t\tif(this.modExists(\"filter\", true)){\r\n\t\t\tvar column = this.columnManager.findColumn(field);\r\n\r\n\t\t\tif(column){\r\n\t\t\t\tthis.modules.filter.setHeaderFilterValue(column, value);\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", field);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetHeaderFilters(){\r\n\t\tif(this.modExists(\"filter\", true)){\r\n\t\t\treturn this.modules.filter.getHeaderFilters();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t//remove filter from array\r\n\tremoveFilter(field, type, value){\r\n\t\tif(this.modExists(\"filter\", true)){\r\n\t\t\tthis.modules.filter.removeFilter(field, type, value);\r\n\t\t\tthis.rowManager.filterRefresh();\r\n\t\t}\r\n\t}\r\n\r\n\t//clear filters\r\n\tclearFilter(all){\r\n\t\tif(this.modExists(\"filter\", true)){\r\n\t\t\tthis.modules.filter.clearFilter(all);\r\n\t\t\tthis.rowManager.filterRefresh();\r\n\t\t}\r\n\t}\r\n\r\n\t//clear header filters\r\n\tclearHeaderFilter(){\r\n\t\tif(this.modExists(\"filter\", true)){\r\n\t\t\tthis.modules.filter.clearHeaderFilter();\r\n\t\t\tthis.rowManager.filterRefresh();\r\n\t\t}\r\n\t}\r\n\r\n\t///////////////////// select ////////////////////\r\n\tselectRow(rows){\r\n\t\tif(this.modExists(\"selectRow\", true)){\r\n\t\t\tthis.modules.selectRow.selectRows(rows);\r\n\t\t}\r\n\t}\r\n\r\n\tdeselectRow(rows){\r\n\t\tif(this.modExists(\"selectRow\", true)){\r\n\t\t\tthis.modules.selectRow.deselectRows(rows);\r\n\t\t}\r\n\t}\r\n\r\n\ttoggleSelectRow(row){\r\n\t\tif(this.modExists(\"selectRow\", true)){\r\n\t\t\tthis.modules.selectRow.toggleRow(row);\r\n\t\t}\r\n\t}\r\n\r\n\tgetSelectedRows(){\r\n\t\tif(this.modExists(\"selectRow\", true)){\r\n\t\t\treturn this.modules.selectRow.getSelectedRows();\r\n\t\t}\r\n\t}\r\n\r\n\tgetSelectedData(){\r\n\t\tif(this.modExists(\"selectRow\", true)){\r\n\t\t\treturn this.modules.selectRow.getSelectedData();\r\n\t\t}\r\n\t}\r\n\r\n\t///////////////////// validation  ////////////////////\r\n\tgetInvalidCells(){\r\n\t\tif(this.modExists(\"validate\", true)){\r\n\t\t\treturn this.modules.validate.getInvalidCells();\r\n\t\t}\r\n\t}\r\n\r\n\tclearCellValidation(cells){\r\n\r\n\t\tif(this.modExists(\"validate\", true)){\r\n\r\n\t\t\tif(!cells){\r\n\t\t\t\tcells = this.modules.validate.getInvalidCells();\r\n\t\t\t}\r\n\r\n\t\t\tif(!Array.isArray(cells)){\r\n\t\t\t\tcells = [cells];\r\n\t\t\t}\r\n\r\n\t\t\tcells.forEach((cell) => {\r\n\t\t\t\tthis.modules.validate.clearValidation(cell._getSelf());\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tvalidate(cells){\r\n\t\tvar output = [];\r\n\r\n\t\t//clear row data\r\n\t\tthis.rowManager.rows.forEach(function(row){\r\n\t\t\tvar valid = row.validate();\r\n\r\n\t\t\tif(valid !== true){\r\n\t\t\t\toutput = output.concat(valid);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output.length ? output : true;\r\n\t}\r\n\r\n\t//////////// Pagination Functions  ////////////\r\n\tsetMaxPage(max){\r\n\t\tif(this.options.pagination && this.modExists(\"page\")){\r\n\t\t\tthis.modules.page.setMaxPage(max);\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tsetPage(page){\r\n\t\tif(this.options.pagination && this.modExists(\"page\")){\r\n\t\t\treturn this.modules.page.setPage(page);\r\n\t\t}else{\r\n\t\t\treturn new Promise((resolve, reject) => { reject() });\r\n\t\t}\r\n\t}\r\n\r\n\tsetPageToRow(row){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif(this.options.pagination && this.modExists(\"page\")){\r\n\t\t\t\trow = this.rowManager.findRow(row);\r\n\r\n\t\t\t\tif(row){\r\n\t\t\t\t\tthis.modules.page.setPageToRow(row)\r\n\t\t\t\t\t.then(()=>{\r\n\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(()=>{\r\n\t\t\t\t\t\treject();\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\treject();\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\treject();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tsetPageSize(size){\r\n\t\tif(this.options.pagination && this.modExists(\"page\")){\r\n\t\t\tthis.modules.page.setPageSize(size);\r\n\t\t\tthis.modules.page.setPage(1).then(()=>{}).catch(()=>{});\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tgetPageSize(){\r\n\t\tif(this.options.pagination && this.modExists(\"page\", true)){\r\n\t\t\treturn this.modules.page.getPageSize();\r\n\t\t}\r\n\t}\r\n\r\n\tpreviousPage(){\r\n\t\tif(this.options.pagination && this.modExists(\"page\")){\r\n\t\t\tthis.modules.page.previousPage();\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tnextPage(){\r\n\t\tif(this.options.pagination && this.modExists(\"page\")){\r\n\t\t\tthis.modules.page.nextPage();\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tgetPage(){\r\n\t\tif(this.options.pagination && this.modExists(\"page\")){\r\n\t\t\treturn this.modules.page.getPage();\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tgetPageMax(){\r\n\t\tif(this.options.pagination && this.modExists(\"page\")){\r\n\t\t\treturn this.modules.page.getPageMax();\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t///////////////// Grouping Functions ///////////////\r\n\tsetGroupBy(groups){\r\n\t\tif(this.modExists(\"groupRows\", true)){\r\n\t\t\tthis.options.groupBy = groups;\r\n\t\t\tthis.modules.groupRows.initialize();\r\n\t\t\tthis.rowManager.refreshActiveData(\"display\");\r\n\r\n\t\t\tif(this.options.persistence && this.modExists(\"persistence\", true) && this.modules.persistence.config.group){\r\n\t\t\t\tthis.modules.persistence.save(\"group\");\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tsetGroupValues(groupValues){\r\n\t\tif(this.modExists(\"groupRows\", true)){\r\n\t\t\tthis.options.groupValues = groupValues;\r\n\t\t\tthis.modules.groupRows.initialize();\r\n\t\t\tthis.rowManager.refreshActiveData(\"display\");\r\n\r\n\t\t\tif(this.options.persistence && this.modExists(\"persistence\", true) && this.modules.persistence.config.group){\r\n\t\t\t\tthis.modules.persistence.save(\"group\");\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tsetGroupStartOpen(values){\r\n\t\tif(this.modExists(\"groupRows\", true)){\r\n\t\t\tthis.options.groupStartOpen = values;\r\n\t\t\tthis.modules.groupRows.initialize();\r\n\t\t\tif(this.options.groupBy){\r\n\t\t\t\tthis.rowManager.refreshActiveData(\"group\");\r\n\r\n\t\t\t\tif(this.options.persistence && this.modExists(\"persistence\", true) && this.modules.persistence.config.group){\r\n\t\t\t\t\tthis.modules.persistence.save(\"group\");\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Grouping Update - cant refresh view, no groups have been set\");\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tsetGroupHeader(values){\r\n\t\tif(this.modExists(\"groupRows\", true)){\r\n\t\t\tthis.options.groupHeader = values;\r\n\t\t\tthis.modules.groupRows.initialize();\r\n\t\t\tif(this.options.groupBy){\r\n\t\t\t\tthis.rowManager.refreshActiveData(\"group\");\r\n\r\n\t\t\t\tif(this.options.persistence && this.modExists(\"persistence\", true) && this.modules.persistence.config.group){\r\n\t\t\t\t\tthis.modules.persistence.save(\"group\");\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Grouping Update - cant refresh view, no groups have been set\");\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tgetGroups(values){\r\n\t\tif(this.modExists(\"groupRows\", true)){\r\n\t\t\treturn this.modules.groupRows.getGroups(true);\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t// get grouped table data in the same format as getData()\r\n\tgetGroupedData(){\r\n\t\tif (this.modExists(\"groupRows\", true)){\r\n\t\t\treturn this.options.groupBy ?\r\n\t\t\tthis.modules.groupRows.getGroupedData() : this.getData()\r\n\t\t}\r\n\t}\r\n\r\n\tgetEditedCells(){\r\n\t\tif(this.modExists(\"edit\", true)){\r\n\t\t\treturn this.modules.edit.getEditedCells();\r\n\t\t}\r\n\t}\r\n\r\n\tclearCellEdited(cells){\r\n\t\tif(this.modExists(\"edit\", true)){\r\n\r\n\t\t\tif(!cells){\r\n\t\t\t\tcells = this.modules.edit.getEditedCells();\r\n\t\t\t}\r\n\r\n\t\t\tif(!Array.isArray(cells)){\r\n\t\t\t\tcells = [cells];\r\n\t\t\t}\r\n\r\n\t\t\tcells.forEach((cell) => {\r\n\t\t\t\tthis.modules.edit.clearEdited(cell._getSelf());\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t///////////////// Column Calculation Functions ///////////////\r\n\tgetCalcResults(){\r\n\t\tif(this.modExists(\"columnCalcs\", true)){\r\n\t\t\treturn this.modules.columnCalcs.getResults();\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\trecalc(){\r\n\t\tif(this.modExists(\"columnCalcs\", true)){\r\n\t\t\tthis.modules.columnCalcs.recalcAll(this.rowManager.activeRows);\r\n\t\t}\r\n\t}\r\n\r\n\t/////////////// Navigation Management //////////////\r\n\tnavigatePrev(){\r\n\t\tvar cell = false;\r\n\r\n\t\tif(this.modExists(\"edit\", true)){\r\n\t\t\tcell = this.modules.edit.currentCell;\r\n\r\n\t\t\tif(cell){\r\n\t\t\t\treturn cell.nav().prev();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tnavigateNext(){\r\n\t\tvar cell = false;\r\n\r\n\t\tif(this.modExists(\"edit\", true)){\r\n\t\t\tcell = this.modules.edit.currentCell;\r\n\r\n\t\t\tif(cell){\r\n\t\t\t\treturn cell.nav().next();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tnavigateLeft(){\r\n\t\tvar cell = false;\r\n\r\n\t\tif(this.modExists(\"edit\", true)){\r\n\t\t\tcell = this.modules.edit.currentCell;\r\n\r\n\t\t\tif(cell){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\treturn cell.nav().left();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tnavigateRight(){\r\n\t\tvar cell = false;\r\n\r\n\t\tif(this.modExists(\"edit\", true)){\r\n\t\t\tcell = this.modules.edit.currentCell;\r\n\r\n\t\t\tif(cell){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\treturn cell.nav().right();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tnavigateUp(){\r\n\t\tvar cell = false;\r\n\r\n\t\tif(this.modExists(\"edit\", true)){\r\n\t\t\tcell = this.modules.edit.currentCell;\r\n\r\n\t\t\tif(cell){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\treturn cell.nav().up();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tnavigateDown(){\r\n\t\tvar cell = false;\r\n\r\n\t\tif(this.modExists(\"edit\", true)){\r\n\t\t\tcell = this.modules.edit.currentCell;\r\n\r\n\t\t\tif(cell){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\treturn cell.nav().down();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\t/////////////// History Management //////////////\r\n\tundo(){\r\n\t\tif(this.options.history && this.modExists(\"history\", true)){\r\n\t\t\treturn this.modules.history.undo();\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tredo(){\r\n\t\tif(this.options.history && this.modExists(\"history\", true)){\r\n\t\t\treturn this.modules.history.redo();\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tgetHistoryUndoSize(){\r\n\t\tif(this.options.history && this.modExists(\"history\", true)){\r\n\t\t\treturn this.modules.history.getHistoryUndoSize();\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tgetHistoryRedoSize(){\r\n\t\tif(this.options.history && this.modExists(\"history\", true)){\r\n\t\t\treturn this.modules.history.getHistoryRedoSize();\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tclearHistory(){\r\n\t\tif(this.options.history && this.modExists(\"history\", true)){\r\n\t\t\treturn this.modules.history.clear();\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t/////////////// Download Management //////////////\r\n\tdownload(type, filename, options, active){\r\n\t\tif(this.modExists(\"download\", true)){\r\n\t\t\tthis.modules.download.download(type, filename, options, active);\r\n\t\t}\r\n\t}\r\n\r\n\tdownloadToTab(type, filename, options, active){\r\n\t\tif(this.modExists(\"download\", true)){\r\n\t\t\tthis.modules.download.download(type, filename, options, active, true);\r\n\t\t}\r\n\t}\r\n\r\n\t/////////// Inter Table Communications ///////////\r\n\ttableComms(table, module, action, data){\r\n\t\tthis.modules.comms.receive(table, module, action, data);\r\n\t}\r\n\r\n\t////////////// Extension Management //////////////\r\n\tmodExists(plugin, required){\r\n\t\tif(this.modules[plugin]){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\tif(required){\r\n\t\t\t\tconsole.error(\"Tabulator Module Not Installed: \" + plugin);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n//default setup options\r\nTabulator.defaultOptions = defaultOptions;\r\n\r\n//bind modules and static functionality\r\nnew ModuleBinder(Tabulator);\r\n\r\nexport default Tabulator;","export default {}","import Module from '../../core/Module.js';\r\nimport Helpers from '../../core/Helpers.js';\r\n\r\nimport defautlAccessors from './defaults/accessors.js';\r\n\r\nclass Accessor extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.allowedTypes = [\"\", \"data\", \"download\", \"clipboard\", \"print\", \"htmlOutput\"] //list of accessor types\r\n\t}\r\n\r\n\t//initialize column accessor\r\n\tinitializeColumn(column){\r\n\t\tvar match = false,\r\n\t\tconfig = {};\r\n\r\n\t\tthis.allowedTypes.forEach(function(type){\r\n\t\t\tvar key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1)),\r\n\t\t\taccessor;\r\n\r\n\t\t\tif(column.definition[key]){\r\n\t\t\t\taccessor = this.lookupAccessor(column.definition[key]);\r\n\r\n\t\t\t\tif(accessor){\r\n\t\t\t\t\tmatch = true;\r\n\r\n\t\t\t\t\tconfig[key] = {\r\n\t\t\t\t\t\taccessor:accessor,\r\n\t\t\t\t\t\tparams: column.definition[key + \"Params\"] || {},\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(match){\r\n\t\t\tcolumn.modules.accessor = config;\r\n\t\t}\r\n\t}\r\n\r\n\tlookupAccessor(value){\r\n\t\tvar accessor = false;\r\n\r\n\t\t//set column accessor\r\n\t\tswitch(typeof value){\r\n\t\t\tcase \"string\":\r\n\t\t\tif(Accessor.accessors[value]){\r\n\t\t\t\taccessor = Accessor.accessors[value]\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Accessor Error - No such accessor found, ignoring: \", value);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\taccessor = value;\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn accessor;\r\n\t}\r\n\r\n\t//apply accessor to row\r\n\ttransformRow(row, type){\r\n\t\tvar key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1)),\r\n\t\trowComponent = row.getComponent();\r\n\r\n\t\t//clone data object with deep copy to isolate internal data from returned result\r\n\t\tvar data = Helpers.deepClone(row.data || {});\r\n\r\n\t\tthis.table.columnManager.traverse(function(column){\r\n\t\t\tvar value, accessor, params, colCompnent;\r\n\r\n\t\t\tif(column.modules.accessor){\r\n\r\n\t\t\t\taccessor = column.modules.accessor[key] || column.modules.accessor.accessor || false;\r\n\r\n\t\t\t\tif(accessor){\r\n\t\t\t\t\tvalue = column.getFieldValue(data);\r\n\r\n\t\t\t\t\tif(value != \"undefined\"){\r\n\t\t\t\t\t\tcolCompnent = column.getComponent();\r\n\t\t\t\t\t\tparams = typeof accessor.params === \"function\" ? accessor.params(value, data, type, colCompnent, rowComponent) : accessor.params;\r\n\t\t\t\t\t\tcolumn.setFieldValue(data, accessor.accessor(value, data, type, params, colCompnent, rowComponent));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn data;\r\n\t}\r\n}\r\n\r\n//load defaults\r\nAccessor.moduleName = \"accessor\";\r\nAccessor.accessors = defautlAccessors;\r\n\r\nexport default Accessor;","export default {\r\n\tmethod: \"GET\",\r\n};","export default function(url, config, params){\r\n\tif(url){\r\n\t\tif(params && Object.keys(params).length){\r\n\t\t\tif(!config.method || config.method.toLowerCase() == \"get\"){\r\n\t\t\t\tconfig.method = \"get\";\r\n\r\n\t\t\t\turl += (url.includes(\"?\") ? \"&\" : \"?\") + this.modules.ajax.serializeParams(params);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn url;\r\n};","export default function(url, config, params){\r\n\tvar contentType;\r\n\r\n\treturn new Promise((resolve, reject) => {\r\n\t\t//set url\r\n\t\turl = this.urlGenerator.call(this.table, url, config, params);\r\n\r\n\t\t//set body content if not GET request\r\n\t\tif(config.method.toUpperCase() != \"GET\"){\r\n\t\t\tcontentType = typeof this.table.options.ajaxContentType === \"object\" ?  this.table.options.ajaxContentType : this.contentTypeFormatters[this.table.options.ajaxContentType];\r\n\t\t\tif(contentType){\r\n\r\n\t\t\t\tfor(var key in contentType.headers){\r\n\t\t\t\t\tif(!config.headers){\r\n\t\t\t\t\t\tconfig.headers = {};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(typeof config.headers[key] === \"undefined\"){\r\n\t\t\t\t\t\tconfig.headers[key] = contentType.headers[key];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconfig.body = contentType.body.call(this, url, config, params);\r\n\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Ajax Error - Invalid ajaxContentType value:\", this.table.options.ajaxContentType);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(url){\r\n\t\t\t//configure headers\r\n\t\t\tif(typeof config.headers === \"undefined\"){\r\n\t\t\t\tconfig.headers = {};\r\n\t\t\t}\r\n\r\n\t\t\tif(typeof config.headers.Accept === \"undefined\"){\r\n\t\t\t\tconfig.headers.Accept = \"application/json\";\r\n\t\t\t}\r\n\r\n\t\t\tif(typeof config.headers[\"X-Requested-With\"] === \"undefined\"){\r\n\t\t\t\tconfig.headers[\"X-Requested-With\"] = \"XMLHttpRequest\";\r\n\t\t\t}\r\n\r\n\t\t\tif(typeof config.mode === \"undefined\"){\r\n\t\t\t\tconfig.mode = \"cors\";\r\n\t\t\t}\r\n\r\n\t\t\tif(config.mode == \"cors\"){\r\n\r\n\t\t\t\tif(typeof config.headers[\"Access-Control-Allow-Origin\"] === \"undefined\"){\r\n\t\t\t\t\tconfig.headers[\"Access-Control-Allow-Origin\"] = window.location.origin;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(typeof config.credentials === \"undefined\"){\r\n\t\t\t\t\tconfig.credentials = 'same-origin';\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(typeof config.credentials === \"undefined\"){\r\n\t\t\t\t\tconfig.credentials = 'include';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//send request\r\n\t\t\tfetch(url, config)\r\n\t\t\t.then((response)=>{\r\n\t\t\t\tif(response.ok) {\r\n\t\t\t\t\tresponse.json()\r\n\t\t\t\t\t.then((data)=>{\r\n\t\t\t\t\t\tresolve(data);\r\n\t\t\t\t\t}).catch((error)=>{\r\n\t\t\t\t\t\treject(error);\r\n\t\t\t\t\t\tconsole.warn(\"Ajax Load Error - Invalid JSON returned\", error);\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.error(\"Ajax Load Error - Connection Error: \" + response.status, response.statusText);\r\n\t\t\t\t\treject(response);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((error)=>{\r\n\t\t\t\tconsole.error(\"Ajax Load Error - Connection Error: \", error);\r\n\t\t\t\treject(error);\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Ajax Load Error - No URL Set\");\r\n\t\t\tresolve([]);\r\n\t\t}\r\n\t});\r\n};","export default {\r\n\t\"json\":{\r\n\t\theaders:{\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t},\r\n\t\tbody:function(url, config, params){\r\n\t\t\treturn JSON.stringify(params);\r\n\t\t},\r\n\t},\r\n\t\"form\":{\r\n\t\theaders:{\r\n\t\t},\r\n\t\tbody:function(url, config, params){\r\n\t\t\tvar output = this.generateParamsList(params),\r\n\t\t\tform = new FormData();\r\n\r\n\t\t\toutput.forEach(function(item){\r\n\t\t\t\tform.append(item.key, item.value);\r\n\t\t\t});\r\n\r\n\t\t\treturn form;\r\n\t\t},\r\n\t},\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport defaultConfig from './defaults/config.js';\r\nimport defaultURLGenerator from './defaults/urlGenerator.js';\r\nimport defaultLoaderPromise from './defaults/loaderPromise.js';\r\nimport defaultContentTypeFormatters from './defaults/contentTypeFormatters.js';\r\n\r\nclass Ajax extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.config = false; //hold config object for ajax request\r\n\t\tthis.url = \"\"; //request URL\r\n\t\tthis.urlGenerator = false;\r\n\t\tthis.params = false; //request parameters\r\n\r\n\t\tthis.loaderElement = this.createLoaderElement(); //loader message div\r\n\t\tthis.msgElement = this.createMsgElement(); //message element\r\n\t\tthis.loadingElement = false;\r\n\t\tthis.errorElement = false;\r\n\t\tthis.loaderPromise = false;\r\n\r\n\t\tthis.progressiveLoad = false;\r\n\t\tthis.loading = false;\r\n\r\n\t\tthis.requestOrder = 0; //prevent requests comming out of sequence if overridden by another load request\r\n\t}\r\n\r\n\t//initialize setup options\r\n\tinitialize(){\r\n\t\tvar template;\r\n\r\n\t\tthis.loaderElement.appendChild(this.msgElement);\r\n\r\n\t\tif(this.table.options.ajaxLoaderLoading){\r\n\t\t\tif(typeof this.table.options.ajaxLoaderLoading == \"string\"){\r\n\t\t\t\ttemplate = document.createElement('template');\r\n\t\t\t\ttemplate.innerHTML = this.table.options.ajaxLoaderLoading.trim();\r\n\t\t\t\tthis.loadingElement = template.content.firstChild;\r\n\t\t\t}else{\r\n\t\t\t\tthis.loadingElement = this.table.options.ajaxLoaderLoading;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.loaderPromise = this.table.options.ajaxRequestFunc || Ajax.defaultLoaderPromise;\r\n\r\n\t\tthis.urlGenerator = this.table.options.ajaxURLGenerator || Ajax.defaultURLGenerator;\r\n\r\n\t\tif(this.table.options.ajaxLoaderError){\r\n\t\t\tif(typeof this.table.options.ajaxLoaderError == \"string\"){\r\n\t\t\t\ttemplate = document.createElement('template');\r\n\t\t\t\ttemplate.innerHTML = this.table.options.ajaxLoaderError.trim();\r\n\t\t\t\tthis.errorElement = template.content.firstChild;\r\n\t\t\t}else{\r\n\t\t\t\tthis.errorElement = this.table.options.ajaxLoaderError;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.table.options.ajaxParams){\r\n\t\t\tthis.setParams(this.table.options.ajaxParams);\r\n\t\t}\r\n\r\n\t\tif(this.table.options.ajaxConfig){\r\n\t\t\tthis.setConfig(this.table.options.ajaxConfig);\r\n\t\t}\r\n\r\n\t\tif(this.table.options.ajaxURL){\r\n\t\t\tthis.setUrl(this.table.options.ajaxURL);\r\n\t\t}\r\n\r\n\t\tif(this.table.options.ajaxProgressiveLoad){\r\n\t\t\tif(this.table.options.pagination){\r\n\t\t\t\tthis.progressiveLoad = false;\r\n\t\t\t\tconsole.error(\"Progressive Load Error - Pagination and progressive load cannot be used at the same time\");\r\n\t\t\t}else{\r\n\t\t\t\tif(this.table.modExists(\"page\")){\r\n\t\t\t\t\tthis.progressiveLoad = this.table.options.ajaxProgressiveLoad;\r\n\t\t\t\t\tthis.table.modules.page.initializeProgressive(this.progressiveLoad);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.error(\"Pagination plugin is required for progressive ajax loading\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcreateLoaderElement(){\r\n\t\tvar el = document.createElement(\"div\");\r\n\t\tel.classList.add(\"tabulator-loader\");\r\n\t\treturn el;\r\n\t}\r\n\r\n\tcreateMsgElement(){\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tel.classList.add(\"tabulator-loader-msg\");\r\n\t\tel.setAttribute(\"role\", \"alert\");\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\t//set ajax params\r\n\tsetParams(params, update){\r\n\t\tif(update){\r\n\t\t\tthis.params = this.params || {};\r\n\r\n\t\t\tfor(let key in params){\r\n\t\t\t\tthis.params[key] = params[key];\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.params = params;\r\n\t\t}\r\n\t}\r\n\r\n\tgetParams(){\r\n\t\treturn this.params || {};\r\n\t}\r\n\r\n\t//load config object\r\n\tsetConfig(config){\r\n\t\tthis._loadDefaultConfig();\r\n\r\n\t\tif(typeof config == \"string\"){\r\n\t\t\tthis.config.method = config;\r\n\t\t}else{\r\n\t\t\tfor(let key in config){\r\n\t\t\t\tthis.config[key] = config[key];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//create config object from default\r\n\t_loadDefaultConfig(force){\r\n\t\tif(!this.config || force){\r\n\r\n\t\t\tthis.config = {};\r\n\r\n\t\t\t//load base config from defaults\r\n\t\t\tfor(let key in Ajax.defaultConfig){\r\n\t\t\t\tthis.config[key] = Ajax.defaultConfig[key];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//set request url\r\n\tsetUrl(url){\r\n\t\tthis.url = url;\r\n\t}\r\n\r\n\t//get request url\r\n\tgetUrl(){\r\n\t\treturn this.url;\r\n\t}\r\n\r\n\t//lstandard loading function\r\n\tloadData(inPosition, columnsChanged){\r\n\t\tif(this.progressiveLoad){\r\n\t\t\treturn this._loadDataProgressive();\r\n\t\t}else{\r\n\t\t\treturn this._loadDataStandard(inPosition, columnsChanged);\r\n\t\t}\r\n\t}\r\n\r\n\tnextPage(diff){\r\n\t\tvar margin;\r\n\r\n\t\tif(!this.loading){\r\n\r\n\t\t\tmargin = this.table.options.ajaxProgressiveLoadScrollMargin || (this.table.rowManager.getElement().clientHeight * 2);\r\n\r\n\t\t\tif(diff < margin){\r\n\t\t\t\tthis.table.modules.page.nextPage()\r\n\t\t\t\t.then(()=>{}).catch(()=>{});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tblockActiveRequest(){\r\n\t\tthis.requestOrder ++;\r\n\t}\r\n\r\n\t_loadDataProgressive(){\r\n\t\tthis.table.rowManager.setData([]);\r\n\t\treturn this.table.modules.page.setPage(1);\r\n\t}\r\n\r\n\t_loadDataStandard(inPosition, columnsChanged){\r\n\t\treturn new Promise((resolve, reject)=>{\r\n\t\t\tthis.sendRequest(inPosition)\r\n\t\t\t.then((data)=>{\r\n\t\t\t\tthis.table.rowManager.setData(data, inPosition, columnsChanged)\r\n\t\t\t\t.then(()=>{\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t})\r\n\t\t\t\t.catch((e)=>{\r\n\t\t\t\t\treject(e)\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.catch((e)=>{\r\n\t\t\t\treject(e)\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tgenerateParamsList(data, prefix){\r\n\t\tvar output = [];\r\n\r\n\t\tprefix = prefix || \"\";\r\n\r\n\t\tif(Array.isArray(data)){\r\n\t\t\tdata.forEach((item, i) => {\r\n\t\t\t\toutput = output.concat(this.generateParamsList(item, prefix ? prefix + \"[\" + i + \"]\" : i));\r\n\t\t\t});\r\n\t\t}else if (typeof data === \"object\"){\r\n\t\t\tfor (var key in data){\r\n\t\t\t\toutput = output.concat(this.generateParamsList(data[key], prefix ? prefix + \"[\" + key + \"]\" : key));\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\toutput.push({key:prefix, value:data});\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tserializeParams(params){\r\n\t\tvar output = this.generateParamsList(params),\r\n\t\tencoded = [];\r\n\r\n\t\toutput.forEach(function(item){\r\n\t\t\tencoded.push(encodeURIComponent(item.key) + \"=\" + encodeURIComponent(item.value));\r\n\t\t});\r\n\r\n\t\treturn encoded.join(\"&\");\r\n\t}\r\n\r\n\t//send ajax request\r\n\tsendRequest(silent){\r\n\t\tvar url = this.url,\r\n\t\trequestNo, esc, query;\r\n\r\n\t\tthis.requestOrder ++;\r\n\t\trequestNo = this.requestOrder;\r\n\r\n\t\tthis._loadDefaultConfig();\r\n\r\n\t\treturn new Promise((resolve, reject)=>{\r\n\t\t\tif(this.table.options.ajaxRequesting.call(this.table, this.url, this.params) !== false){\r\n\r\n\t\t\t\tthis.loading = true;\r\n\r\n\t\t\t\tif(!silent){\r\n\t\t\t\t\tthis.showLoader();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.loaderPromise(url, this.config, this.params).then((data)=>{\r\n\t\t\t\t\tif(requestNo === this.requestOrder){\r\n\t\t\t\t\t\tif(this.table.options.ajaxResponse){\r\n\t\t\t\t\t\t\tdata = this.table.options.ajaxResponse.call(this.table, this.url, this.params, data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tresolve(data);\r\n\r\n\t\t\t\t\t\tthis.hideLoader();\r\n\t\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tconsole.warn(\"Ajax Response Blocked - An active ajax request was blocked by an attempt to change table data while the request was being made\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t})\r\n\t\t\t\t.catch((error)=>{\r\n\t\t\t\t\tconsole.error(\"Ajax Load Error: \", error);\r\n\t\t\t\t\tthis.table.options.ajaxError.call(this.table, error);\r\n\r\n\t\t\t\t\tthis.showError();\r\n\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.hideLoader();\r\n\t\t\t\t\t}, 3000);\r\n\r\n\t\t\t\t\tthis.loading = false;\r\n\r\n\t\t\t\t\treject(error);\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\treject();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tshowLoader(){\r\n\t\tvar shouldLoad = typeof this.table.options.ajaxLoader === \"function\" ? this.table.options.ajaxLoader() : this.table.options.ajaxLoader;\r\n\r\n\t\tif(shouldLoad){\r\n\r\n\t\t\tthis.hideLoader();\r\n\r\n\t\t\twhile(this.msgElement.firstChild) this.msgElement.removeChild(this.msgElement.firstChild);\r\n\t\t\tthis.msgElement.classList.remove(\"tabulator-error\");\r\n\t\t\tthis.msgElement.classList.add(\"tabulator-loading\");\r\n\r\n\t\t\tif(this.loadingElement){\r\n\t\t\t\tthis.msgElement.appendChild(this.loadingElement);\r\n\t\t\t}else{\r\n\t\t\t\tthis.msgElement.innerHTML = this.table.modules.localize.getText(\"ajax|loading\");\r\n\t\t\t}\r\n\r\n\t\t\tthis.table.element.appendChild(this.loaderElement);\r\n\t\t}\r\n\t}\r\n\r\n\tshowError(){\r\n\t\tthis.hideLoader();\r\n\r\n\t\twhile(this.msgElement.firstChild) this.msgElement.removeChild(this.msgElement.firstChild);\r\n\t\tthis.msgElement.classList.remove(\"tabulator-loading\");\r\n\t\tthis.msgElement.classList.add(\"tabulator-error\");\r\n\r\n\t\tif(this.errorElement){\r\n\t\t\tthis.msgElement.appendChild(this.errorElement);\r\n\t\t}else{\r\n\t\t\tthis.msgElement.innerHTML = this.table.modules.localize.getText(\"ajax|error\");\r\n\t\t}\r\n\r\n\t\tthis.table.element.appendChild(this.loaderElement);\r\n\t}\r\n\r\n\thideLoader(){\r\n\t\tif(this.loaderElement.parentNode){\r\n\t\t\tthis.loaderElement.parentNode.removeChild(this.loaderElement);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nAjax.moduleName = \"ajax\";\r\n\r\n//load defaults\r\nAjax.defaultConfig = defaultConfig;\r\nAjax.defaultURLGenerator = defaultURLGenerator;\r\nAjax.defaultLoaderPromise = defaultLoaderPromise;\r\nAjax.contentTypeFormatters = defaultContentTypeFormatters;\r\n\r\nexport default Ajax;","export default {\r\n\treplace:function(rows){\r\n\t\treturn this.table.setData(rows);\r\n\t},\r\n\tupdate:function(rows){\r\n\t\treturn this.table.updateOrAddData(rows);\r\n\t},\r\n\tinsert:function(rows){\r\n\t\treturn this.table.addData(rows);\r\n\t},\r\n};","export default {\r\n\ttable:function(clipboard){\r\n\t\tvar data = [],\r\n\t\tsuccess = false,\r\n\t\theaderFindSuccess = true,\r\n\t\tcolumns = this.table.columnManager.columns,\r\n\t\tcolumnMap = [],\r\n\t\trows = [];\r\n\r\n\t\t//get data from clipboard into array of columns and rows.\r\n\t\tclipboard = clipboard.split(\"\\n\");\r\n\r\n\t\tclipboard.forEach(function(row){\r\n\t\t\tdata.push(row.split(\"\\t\"));\r\n\t\t});\r\n\r\n\t\tif(data.length && !(data.length === 1 && data[0].length < 2)){\r\n\t\t\tsuccess = true;\r\n\r\n\t\t\t//check if headers are present by title\r\n\t\t\tdata[0].forEach(function(value){\r\n\t\t\t\tvar column = columns.find(function(column){\r\n\t\t\t\t\treturn value && column.definition.title && value.trim() && column.definition.title.trim() === value.trim();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(column){\r\n\t\t\t\t\tcolumnMap.push(column);\r\n\t\t\t\t}else{\r\n\t\t\t\t\theaderFindSuccess = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t//check if column headers are present by field\r\n\t\t\tif(!headerFindSuccess){\r\n\t\t\t\theaderFindSuccess = true;\r\n\t\t\t\tcolumnMap = [];\r\n\r\n\t\t\t\tdata[0].forEach(function(value){\r\n\t\t\t\t\tvar column = columns.find(function(column){\r\n\t\t\t\t\t\treturn value && column.field && value.trim() && column.field.trim() === value.trim();\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif(column){\r\n\t\t\t\t\t\tcolumnMap.push(column);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\theaderFindSuccess = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(!headerFindSuccess){\r\n\t\t\t\t\tcolumnMap = this.table.columnManager.columnsByIndex;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//remove header row if found\r\n\t\t\tif(headerFindSuccess){\r\n\t\t\t\tdata.shift();\r\n\t\t\t}\r\n\r\n\t\t\tdata.forEach(function(item){\r\n\t\t\t\tvar row = {};\r\n\r\n\t\t\t\titem.forEach(function(value, i){\r\n\t\t\t\t\tif(columnMap[i]){\r\n\t\t\t\t\t\trow[columnMap[i].field] = value;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\trows.push(row);\r\n\t\t\t});\r\n\r\n\t\t\treturn rows;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport defaultPasteActions from './defaults/pasteActions.js';\r\nimport defaultPasteParsers from './defaults/pasteParsers.js';\r\n\r\nclass Clipboard extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.mode = true;\r\n\t\tthis.pasteParser = function(){};\r\n\t\tthis.pasteAction = function(){};\r\n\t\tthis.customSelection = false;\r\n\t\tthis.rowRange = false;\r\n\t\tthis.blocked = true; //block copy actions not originating from this command\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.mode = this.table.options.clipboard;\r\n\r\n\t\tthis.rowRange = this.table.options.clipboardCopyRowRange;\r\n\r\n\t\tif(this.mode === true || this.mode === \"copy\"){\r\n\t\t\tthis.table.element.addEventListener(\"copy\", (e) => {\r\n\t\t\t\tvar plain, html, list;\r\n\r\n\t\t\t\tif(!this.blocked){\r\n\t\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\tif(this.customSelection){\r\n\t\t\t\t\t\tplain = this.customSelection;\r\n\r\n\t\t\t\t\t\tif(this.table.options.clipboardCopyFormatter){\r\n\t\t\t\t\t\t\tplain = this.table.options.clipboardCopyFormatter(\"plain\", plain);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\r\n\t\t\t\t\t\tvar list = this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig, this.table.options.clipboardCopyStyled, this.rowRange, \"clipboard\");\r\n\r\n\t\t\t\t\t\thtml = this.table.modules.export.genereateHTMLTable(list);\r\n\t\t\t\t\t\tplain = html ? this.generatePlainContent(list) : \"\";\r\n\r\n\t\t\t\t\t\tif(this.table.options.clipboardCopyFormatter){\r\n\t\t\t\t\t\t\tplain = this.table.options.clipboardCopyFormatter(\"plain\", plain);\r\n\t\t\t\t\t\t\thtml = this.table.options.clipboardCopyFormatter(\"html\", html);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (window.clipboardData && window.clipboardData.setData) {\r\n\t\t\t\t\t\twindow.clipboardData.setData('Text', plain);\r\n\t\t\t\t\t} else if (e.clipboardData && e.clipboardData.setData) {\r\n\t\t\t\t\t\te.clipboardData.setData('text/plain', plain);\r\n\t\t\t\t\t\tif(html){\r\n\t\t\t\t\t\t\te.clipboardData.setData('text/html', html);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (e.originalEvent && e.originalEvent.clipboardData.setData) {\r\n\t\t\t\t\t\te.originalEvent.clipboardData.setData('text/plain', plain);\r\n\t\t\t\t\t\tif(html){\r\n\t\t\t\t\t\t\te.originalEvent.clipboardData.setData('text/html', html);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.table.options.clipboardCopied.call(this.table, plain, html);\r\n\r\n\t\t\t\t\tthis.reset();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(this.mode === true || this.mode === \"paste\"){\r\n\t\t\tthis.table.element.addEventListener(\"paste\", (e) => {\r\n\t\t\t\tthis.paste(e);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.setPasteParser(this.table.options.clipboardPasteParser);\r\n\t\tthis.setPasteAction(this.table.options.clipboardPasteAction);\r\n\t}\r\n\r\n\treset(){\r\n\t\tthis.blocked = true;\r\n\t\tthis.customSelection = false;\r\n\t}\r\n\r\n\tgeneratePlainContent (list) {\r\n\t\tvar output = [];\r\n\r\n\t\tlist.forEach((row) => {\r\n\t\t\tvar rowData = [];\r\n\r\n\t\t\trow.columns.forEach((col) => {\r\n\t\t\t\tvar value = \"\";\r\n\r\n\t\t\t\tif(col){\r\n\r\n\t\t\t\t\tif(row.type === \"group\"){\r\n\t\t\t\t\t\tcol.value = col.component.getKey();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(col.value === null){\r\n\t\t\t\t\t\tvalue = \"\";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tswitch(typeof col.value){\r\n\t\t\t\t\t\t\tcase \"object\":\r\n\t\t\t\t\t\t\tvalue = JSON.stringify(col.value);\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase \"undefined\":\r\n\t\t\t\t\t\t\tvalue = \"\";\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tvalue = col.value;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\trowData.push(value);\r\n\t\t\t});\r\n\r\n\t\t\toutput.push(rowData.join(\"\\t\"));\r\n\t\t});\r\n\r\n\t\treturn output.join(\"\\n\");\r\n\t}\r\n\r\n\tcopy (range, internal) {\r\n\t\tvar range, sel, textRange;\r\n\t\tthis.blocked = false;\r\n\t\tthis.customSelection = false;\r\n\r\n\t\tif (this.mode === true || this.mode === \"copy\") {\r\n\r\n\t\t\tthis.rowRange = range || this.table.options.clipboardCopyRowRange;\r\n\r\n\t\t\tif (typeof window.getSelection != \"undefined\" && typeof document.createRange != \"undefined\") {\r\n\t\t\t\trange = document.createRange();\r\n\t\t\t\trange.selectNodeContents(this.table.element);\r\n\t\t\t\tsel = window.getSelection();\r\n\r\n\t\t\t\tif (sel.toString() && internal) {\r\n\t\t\t\t\tthis.customSelection = sel.toString();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsel.removeAllRanges();\r\n\t\t\t\tsel.addRange(range);\r\n\t\t\t} else if (typeof document.selection != \"undefined\" && typeof document.body.createTextRange != \"undefined\") {\r\n\t\t\t\ttextRange = document.body.createTextRange();\r\n\t\t\t\ttextRange.moveToElementText(this.table.element);\r\n\t\t\t\ttextRange.select();\r\n\t\t\t}\r\n\r\n\t\t\tdocument.execCommand('copy');\r\n\r\n\t\t\tif (sel) {\r\n\t\t\t\tsel.removeAllRanges();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//PASTE EVENT HANDLING\r\n\tsetPasteAction(action){\r\n\r\n\t\tswitch(typeof action){\r\n\t\t\tcase \"string\":\r\n\t\t\tthis.pasteAction = Clipboard.pasteActions[action];\r\n\r\n\t\t\tif(!this.pasteAction){\r\n\t\t\t\tconsole.warn(\"Clipboard Error - No such paste action found:\", action);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\tthis.pasteAction = action;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tsetPasteParser(parser){\r\n\t\tswitch(typeof parser){\r\n\t\t\tcase \"string\":\r\n\t\t\tthis.pasteParser = Clipboard.pasteParsers[parser];\r\n\r\n\t\t\tif(!this.pasteParser){\r\n\t\t\t\tconsole.warn(\"Clipboard Error - No such paste parser found:\", parser);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\tthis.pasteParser = parser;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tpaste(e){\r\n\t\tvar data, rowData, rows;\r\n\r\n\t\tif(this.checkPaseOrigin(e)){\r\n\r\n\t\t\tdata = this.getPasteData(e);\r\n\r\n\t\t\trowData = this.pasteParser.call(this, data);\r\n\r\n\t\t\tif(rowData){\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tif(this.table.modExists(\"mutator\")){\r\n\t\t\t\t\trowData = this.mutateData(rowData);\r\n\t\t\t\t}\r\n\r\n\t\t\t\trows = this.pasteAction.call(this, rowData);\r\n\t\t\t\tthis.table.options.clipboardPasted.call(this.table, data, rowData, rows);\r\n\t\t\t}else{\r\n\t\t\t\tthis.table.options.clipboardPasteError.call(this.table, data);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tmutateData(data){\r\n\t\tvar output = [];\r\n\r\n\t\tif(Array.isArray(data)){\r\n\t\t\tdata.forEach((row) => {\r\n\t\t\t\toutput.push(this.table.modules.mutator.transformRow(row, \"clipboard\"));\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\toutput = data;\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\r\n\tcheckPaseOrigin(e){\r\n\t\tvar valid = true;\r\n\r\n\t\tif(e.target.tagName != \"DIV\" || this.table.modules.edit.currentCell){\r\n\t\t\tvalid = false;\r\n\t\t}\r\n\r\n\t\treturn valid;\r\n\t}\r\n\r\n\tgetPasteData(e){\r\n\t\tvar data;\r\n\r\n\t\tif (window.clipboardData && window.clipboardData.getData) {\r\n\t\t\tdata = window.clipboardData.getData('Text');\r\n\t\t} else if (e.clipboardData && e.clipboardData.getData) {\r\n\t\t\tdata = e.clipboardData.getData('text/plain');\r\n\t\t} else if (e.originalEvent && e.originalEvent.clipboardData.getData) {\r\n\t\t\tdata = e.originalEvent.clipboardData.getData('text/plain');\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n}\r\n\r\nClipboard.moduleName = \"clipboard\";\r\n\r\n//load defaults\r\nClipboard.pasteActions = defaultPasteActions;\r\nClipboard.pasteParsers = defaultPasteParsers;\r\n\r\nexport default Clipboard;","class CalcComponent{\r\n\tconstructor (row){\r\n\t\tthis._row = row;\r\n\t}\r\n\r\n\tgetData(transform){\r\n\t\treturn this._row.getData(transform);\r\n\t}\r\n\r\n\tgetElement(){\r\n\t\treturn this._row.getElement();\r\n\t}\r\n\r\n\tgetTable(){\r\n\t\treturn this._row.table;\r\n\t}\r\n\r\n\tgetCells(){\r\n\t\tvar cells = [];\r\n\r\n\t\tthis._row.getCells().forEach(function(cell){\r\n\t\t\tcells.push(cell.getComponent());\r\n\t\t});\r\n\r\n\t\treturn cells;\r\n\t}\r\n\r\n\tgetCell(column){\r\n\t\tvar cell = this._row.getCell(column);\r\n\t\treturn cell ? cell.getComponent() : false;\r\n\t}\r\n\r\n\t_getSelf(){\r\n\t\treturn this._row;\r\n\t}\r\n}\r\n\r\nexport default CalcComponent;","export default {\r\n\t\"avg\":function(values, data, calcParams){\r\n\t\tvar output = 0,\r\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : 2\r\n\r\n\t\tif(values.length){\r\n\t\t\toutput = values.reduce(function(sum, value){\r\n\t\t\t\treturn Number(sum) + Number(value);\r\n\t\t\t});\r\n\r\n\t\t\toutput = output / values.length;\r\n\r\n\t\t\toutput = precision !== false ? output.toFixed(precision) : output;\r\n\t\t}\r\n\r\n\t\treturn parseFloat(output).toString();\r\n\t},\r\n\t\"max\":function(values, data, calcParams){\r\n\t\tvar output = null,\r\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\r\n\r\n\t\tvalues.forEach(function(value){\r\n\r\n\t\t\tvalue = Number(value);\r\n\r\n\t\t\tif(value > output || output === null){\r\n\t\t\t\toutput = value;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output !== null ? (precision !== false ? output.toFixed(precision) : output) : \"\";\r\n\t},\r\n\t\"min\":function(values, data, calcParams){\r\n\t\tvar output = null,\r\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\r\n\r\n\t\tvalues.forEach(function(value){\r\n\r\n\t\t\tvalue = Number(value);\r\n\r\n\t\t\tif(value < output || output === null){\r\n\t\t\t\toutput = value;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output !== null ? (precision !== false ? output.toFixed(precision) : output) : \"\";\r\n\t},\r\n\t\"sum\":function(values, data, calcParams){\r\n\t\tvar output = 0,\r\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\r\n\r\n\t\tif(values.length){\r\n\t\t\tvalues.forEach(function(value){\r\n\t\t\t\tvalue = Number(value);\r\n\r\n\t\t\t\toutput += !isNaN(value) ? Number(value) : 0;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn precision !== false ? output.toFixed(precision) : output;\r\n\t},\r\n\t\"concat\":function(values, data, calcParams){\r\n\t\tvar output = 0;\r\n\r\n\t\tif(values.length){\r\n\t\t\toutput = values.reduce(function(sum, value){\r\n\t\t\t\treturn String(sum) + String(value);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t},\r\n\t\"count\":function(values, data, calcParams){\r\n\t\tvar output = 0;\r\n\r\n\t\tif(values.length){\r\n\t\t\tvalues.forEach(function(value){\r\n\t\t\t\tif(value){\r\n\t\t\t\t\toutput ++;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t},\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport CalcComponent from './CalcComponent.js';\r\n\r\nimport Cell from '../../core/cell/Cell.js';\r\nimport Column from '../../core/column/Column.js';\r\nimport Row from '../../core/row/Row.js';\r\n\r\nimport defaultCalculations from './defaults/calculations.js';\r\n\r\nclass ColumnCalcs extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.topCalcs = [];\r\n\t\tthis.botCalcs = [];\r\n\t\tthis.genColumn = false;\r\n\t\tthis.topElement = this.createElement();\r\n\t\tthis.botElement = this.createElement();\r\n\t\tthis.topRow = false;\r\n\t\tthis.botRow = false;\r\n\t\tthis.topInitialized = false;\r\n\t\tthis.botInitialized = false;\r\n\r\n\t\tthis.initialize();\r\n\t}\r\n\r\n\tcreateElement (){\r\n\t\tvar el = document.createElement(\"div\");\r\n\t\tel.classList.add(\"tabulator-calcs-holder\");\r\n\t\treturn el;\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.genColumn = new Column({field:\"value\"}, this);\r\n\t}\r\n\r\n\t//dummy functions to handle being mock column manager\r\n\tregisterColumnField(){};\r\n\r\n\t//initialize column calcs\r\n\tinitializeColumn(column){\r\n\t\tvar def = column.definition\r\n\r\n\t\tvar config = {\r\n\t\t\ttopCalcParams:def.topCalcParams || {},\r\n\t\t\tbotCalcParams:def.bottomCalcParams || {},\r\n\t\t};\r\n\r\n\t\tif(def.topCalc){\r\n\r\n\t\t\tswitch(typeof def.topCalc){\r\n\t\t\t\tcase \"string\":\r\n\t\t\t\tif(ColumnCalcs.calculations[def.topCalc]){\r\n\t\t\t\t\tconfig.topCalc = ColumnCalcs.calculations[def.topCalc]\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.topCalc);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"function\":\r\n\t\t\t\tconfig.topCalc = def.topCalc;\r\n\t\t\t\tbreak\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(config.topCalc){\r\n\t\t\t\tcolumn.modules.columnCalcs = config;\r\n\t\t\t\tthis.topCalcs.push(column);\r\n\r\n\t\t\t\tif(this.table.options.columnCalcs != \"group\"){\r\n\t\t\t\t\tthis.initializeTopRow();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif(def.bottomCalc){\r\n\t\t\tswitch(typeof def.bottomCalc){\r\n\t\t\t\tcase \"string\":\r\n\t\t\t\tif(ColumnCalcs.calculations[def.bottomCalc]){\r\n\t\t\t\t\tconfig.botCalc = ColumnCalcs.calculations[def.bottomCalc]\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.bottomCalc);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"function\":\r\n\t\t\t\tconfig.botCalc = def.bottomCalc;\r\n\t\t\t\tbreak\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(config.botCalc){\r\n\t\t\t\tcolumn.modules.columnCalcs = config;\r\n\t\t\t\tthis.botCalcs.push(column);\r\n\r\n\t\t\t\tif(this.table.options.columnCalcs != \"group\"){\r\n\t\t\t\t\tthis.initializeBottomRow();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tremoveCalcs(){\r\n\t\tvar changed = false;\r\n\r\n\t\tif(this.topInitialized){\r\n\t\t\tthis.topInitialized = false;\r\n\t\t\tthis.topElement.parentNode.removeChild(this.topElement);\r\n\t\t\tchanged = true;\r\n\t\t}\r\n\r\n\t\tif(this.botInitialized){\r\n\t\t\tthis.botInitialized = false;\r\n\t\t\tthis.table.footerManager.remove(this.botElement);\r\n\t\t\tchanged = true;\r\n\t\t}\r\n\r\n\t\tif(changed){\r\n\t\t\tthis.table.rowManager.adjustTableSize();\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeTopRow(){\r\n\t\tif(!this.topInitialized){\r\n\t\t\tthis.table.columnManager.getElement().insertBefore(this.topElement, this.table.columnManager.headersElement.nextSibling);\r\n\t\t\tthis.topInitialized = true;\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeBottomRow(){\r\n\t\tif(!this.botInitialized){\r\n\t\t\tthis.table.footerManager.prepend(this.botElement);\r\n\t\t\tthis.botInitialized = true;\r\n\t\t}\r\n\t}\r\n\r\n\tscrollHorizontal(left){\r\n\t\tif(this.botInitialized && this.botRow){\r\n\t\t\tthis.botRow.getElement().style.marginLeft = (-left) + \"px\";\r\n\t\t}\r\n\t}\r\n\r\n\trecalc(rows){\r\n\t\tvar data, row;\r\n\r\n\t\tif(this.topInitialized || this.botInitialized){\r\n\t\t\tdata = this.rowsToData(rows);\r\n\r\n\t\t\tif(this.topInitialized){\r\n\t\t\t\tif(this.topRow){\r\n\t\t\t\t\tthis.topRow.deleteCells();\r\n\t\t\t\t}\r\n\r\n\t\t\t\trow = this.generateRow(\"top\", this.rowsToData(rows))\r\n\t\t\t\tthis.topRow = row;\r\n\t\t\t\twhile(this.topElement.firstChild) this.topElement.removeChild(this.topElement.firstChild);\r\n\t\t\t\tthis.topElement.appendChild(row.getElement());\r\n\t\t\t\trow.initialize(true);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.botInitialized){\r\n\t\t\t\tif(this.botRow){\r\n\t\t\t\t\tthis.botRow.deleteCells();\r\n\t\t\t\t}\r\n\r\n\t\t\t\trow = this.generateRow(\"bottom\", this.rowsToData(rows))\r\n\t\t\t\tthis.botRow = row;\r\n\t\t\t\twhile(this.botElement.firstChild) this.botElement.removeChild(this.botElement.firstChild);\r\n\t\t\t\tthis.botElement.appendChild(row.getElement());\r\n\t\t\t\trow.initialize(true);\r\n\t\t\t}\r\n\r\n\t\t\tthis.table.rowManager.adjustTableSize();\r\n\r\n\t\t\t//set resizable handles\r\n\t\t\tif(this.table.modExists(\"frozenColumns\")){\r\n\t\t\t\tthis.table.modules.frozenColumns.layout();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\trecalcRowGroup(row){\r\n\t\tthis.recalcGroup(this.table.modules.groupRows.getRowGroup(row));\r\n\t}\r\n\r\n\trecalcAll(){\r\n\t\tif(this.topCalcs.length || this.botCalcs.length){\r\n\t\t\tif(this.table.options.columnCalcs !== \"group\"){\r\n\t\t\t\tthis.recalc(this.table.rowManager.activeRows);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.options.groupBy && this.table.options.columnCalcs !== \"table\"){\r\n\r\n\r\n\t\t\t\tvar groups = table.modules.groupRows.getChildGroups();\r\n\r\n\t\t\t\tgroups.forEach((group) => {\r\n\t\t\t\t\tthis.recalcGroup(group);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\trecalcGroup(group){\r\n\t\tvar data, rowData;\r\n\r\n\t\tif(group){\r\n\t\t\tif(group.calcs){\r\n\t\t\t\tif(group.calcs.bottom){\r\n\t\t\t\t\tdata = this.rowsToData(group.rows);\r\n\t\t\t\t\trowData = this.generateRowData(\"bottom\", data);\r\n\r\n\t\t\t\t\tgroup.calcs.bottom.updateData(rowData);\r\n\t\t\t\t\tgroup.calcs.bottom.reinitialize();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(group.calcs.top){\r\n\t\t\t\t\tdata = this.rowsToData(group.rows);\r\n\t\t\t\t\trowData = this.generateRowData(\"top\", data);\r\n\r\n\t\t\t\t\tgroup.calcs.top.updateData(rowData);\r\n\t\t\t\t\tgroup.calcs.top.reinitialize();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//generate top stats row\r\n\tgenerateTopRow(rows){\r\n\t\treturn this.generateRow(\"top\", this.rowsToData(rows));\r\n\t}\r\n\t//generate bottom stats row\r\n\tgenerateBottomRow(rows){\r\n\t\treturn this.generateRow(\"bottom\", this.rowsToData(rows));\r\n\t}\r\n\r\n\trowsToData(rows){\r\n\t\tvar data = [];\r\n\r\n\t\trows.forEach((row) => {\r\n\t\t\tdata.push(row.getData());\r\n\r\n\t\t\tif(this.table.options.dataTree && this.table.options.dataTreeChildColumnCalcs){\r\n\t\t\t\tif(row.modules.dataTree.open){\r\n\t\t\t\t\tvar children = this.rowsToData(this.table.modules.dataTree.getFilteredTreeChildren(row));\r\n\t\t\t\t\tdata = data.concat(children);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\t//generate stats row\r\n\tgenerateRow(pos, data){\r\n\t\tvar rowData = this.generateRowData(pos, data),\r\n\t\trow;\r\n\r\n\t\tif(this.table.modExists(\"mutator\")){\r\n\t\t\tthis.table.modules.mutator.disable();\r\n\t\t}\r\n\r\n\t\trow = new Row(rowData, this, \"calc\");\r\n\r\n\t\tif(this.table.modExists(\"mutator\")){\r\n\t\t\tthis.table.modules.mutator.enable();\r\n\t\t}\r\n\r\n\t\trow.getElement().classList.add(\"tabulator-calcs\", \"tabulator-calcs-\" + pos);\r\n\r\n\t\trow.component = false;\r\n\r\n\t\trow.getComponent = () => {\r\n\t\t\tif(!this.component){\r\n\t\t\t\tthis.component = new CalcComponent(this);\r\n\t\t\t}\r\n\r\n\t\t\treturn this.component;\r\n\t\t};\r\n\r\n\t\trow.generateCells = () => {\r\n\r\n\t\t\tvar cells = [];\r\n\r\n\t\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\r\n\r\n\t\t\t\t\t//set field name of mock column\r\n\t\t\t\t\tthis.genColumn.setField(column.getField());\r\n\t\t\t\t\tthis.genColumn.hozAlign = column.hozAlign;\r\n\r\n\t\t\t\t\tif(column.definition[pos + \"CalcFormatter\"] && this.table.modExists(\"format\")){\r\n\t\t\t\t\t\tthis.genColumn.modules.format = {\r\n\t\t\t\t\t\t\tformatter: this.table.modules.format.getFormatter(column.definition[pos + \"CalcFormatter\"]),\r\n\t\t\t\t\t\t\tparams: column.definition[pos + \"CalcFormatterParams\"] || {},\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.genColumn.modules.format = {\r\n\t\t\t\t\t\t\tformatter: this.table.modules.format.getFormatter(\"plaintext\"),\r\n\t\t\t\t\t\t\tparams:{}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//ensure css class defintion is replicated to calculation cell\r\n\t\t\t\t\tthis.genColumn.definition.cssClass = column.definition.cssClass;\r\n\r\n\t\t\t\t\t//generate cell and assign to correct column\r\n\t\t\t\t\tvar cell = new Cell(this.genColumn, row);\r\n\t\t\t\t\tcell.getElement();\r\n\t\t\t\t\tcell.column = column;\r\n\t\t\t\t\tcell.setWidth();\r\n\r\n\t\t\t\t\tcolumn.cells.push(cell);\r\n\t\t\t\t\tcells.push(cell);\r\n\r\n\t\t\t\t\tif(!column.visible){\r\n\t\t\t\t\t\tcell.hide();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\tthis.cells = cells;\r\n\t\t};\r\n\r\n\t\treturn row;\r\n\t}\r\n\r\n\t//generate stats row\r\n\tgenerateRowData(pos, data){\r\n\t\tvar rowData = {},\r\n\t\tcalcs = pos == \"top\" ? this.topCalcs : this.botCalcs,\r\n\t\ttype = pos == \"top\" ? \"topCalc\" : \"botCalc\",\r\n\t\tparams, paramKey;\r\n\r\n\t\tcalcs.forEach(function(column){\r\n\t\t\tvar values = [];\r\n\r\n\t\t\tif(column.modules.columnCalcs && column.modules.columnCalcs[type]){\r\n\t\t\t\tdata.forEach(function(item){\r\n\t\t\t\t\tvalues.push(column.getFieldValue(item));\r\n\t\t\t\t});\r\n\r\n\t\t\t\tparamKey = type + \"Params\";\r\n\t\t\t\tparams = typeof column.modules.columnCalcs[paramKey] === \"function\" ? column.modules.columnCalcs[paramKey](values, data) : column.modules.columnCalcs[paramKey];\r\n\r\n\t\t\t\tcolumn.setFieldValue(rowData, column.modules.columnCalcs[type](values, data, params));\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn rowData;\r\n\t}\r\n\r\n\thasTopCalcs(){\r\n\t\treturn\t!!(this.topCalcs.length);\r\n\t}\r\n\r\n\thasBottomCalcs(){\r\n\t\treturn\t!!(this.botCalcs.length);\r\n\t}\r\n\r\n\t//handle table redraw\r\n\tredraw(){\r\n\t\tif(this.topRow){\r\n\t\t\tthis.topRow.normalizeHeight(true);\r\n\t\t}\r\n\t\tif(this.botRow){\r\n\t\t\tthis.botRow.normalizeHeight(true);\r\n\t\t}\r\n\t}\r\n\r\n\t//return the calculated\r\n\tgetResults(){\r\n\t\tvar results = {},\r\n\t\tgroups;\r\n\r\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\r\n\t\t\tgroups = this.table.modules.groupRows.getGroups(true);\r\n\r\n\t\t\tgroups.forEach((group) => {\r\n\t\t\t\tresults[group.getKey()] = this.getGroupResults(group);\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tresults = {\r\n\t\t\t\ttop: this.topRow ? this.topRow.getData() : {},\r\n\t\t\t\tbottom: this.botRow ? this.botRow.getData() : {},\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn results;\r\n\t}\r\n\r\n\t//get results from a group\r\n\tgetGroupResults(group){\r\n\t\tvar groupObj = group._getSelf(),\r\n\t\tsubGroups = group.getSubGroups(),\r\n\t\tsubGroupResults = {},\r\n\t\tresults = {};\r\n\r\n\t\tsubGroups.forEach((subgroup) => {\r\n\t\t\tsubGroupResults[subgroup.getKey()] = this.getGroupResults(subgroup);\r\n\t\t});\r\n\r\n\t\tresults = {\r\n\t\t\ttop: groupObj.calcs.top ? groupObj.calcs.top.getData() : {},\r\n\t\t\tbottom: groupObj.calcs.bottom ? groupObj.calcs.bottom.getData() : {},\r\n\t\t\tgroups: subGroupResults,\r\n\t\t}\r\n\r\n\t\treturn results;\r\n\t}\r\n}\r\n\r\nColumnCalcs.moduleName = \"columnCalcs\";\r\n\r\n//load defaults\r\nColumnCalcs.calculations = defaultCalculations;\r\n\r\nexport default ColumnCalcs;","import Module from '../../core/Module.js';\r\n\r\nimport Row from '../../core/row/Row.js';\r\n\r\nclass DataTree extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.indent = 10;\r\n\t\tthis.field = \"\";\r\n\t\tthis.collapseEl = null;\r\n\t\tthis.expandEl = null;\r\n\t\tthis.branchEl = null;\r\n\t\tthis.elementField = false;\r\n\r\n\t\tthis.startOpen = function(){};\r\n\r\n\t\tthis.displayIndex = 0;\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tvar dummyEl = null,\r\n\t\tfirstCol = this.table.columnManager.getFirstVisibileColumn(),\r\n\t\toptions = this.table.options;\r\n\r\n\t\tthis.field = options.dataTreeChildField;\r\n\t\tthis.indent = options.dataTreeChildIndent;\r\n\t\tthis.elementField = options.dataTreeElementColumn || (firstCol ? firstCol.field : false);\r\n\r\n\t\tif(options.dataTreeBranchElement){\r\n\r\n\t\t\tif(options.dataTreeBranchElement === true){\r\n\t\t\t\tthis.branchEl = document.createElement(\"div\");\r\n\t\t\t\tthis.branchEl.classList.add(\"tabulator-data-tree-branch\");\r\n\t\t\t}else{\r\n\t\t\t\tif(typeof options.dataTreeBranchElement === \"string\"){\r\n\t\t\t\t\tdummyEl = document.createElement(\"div\");\r\n\t\t\t\t\tdummyEl.innerHTML = options.dataTreeBranchElement;\r\n\t\t\t\t\tthis.branchEl = dummyEl.firstChild;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.branchEl = options.dataTreeBranchElement;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(options.dataTreeCollapseElement){\r\n\t\t\tif(typeof options.dataTreeCollapseElement === \"string\"){\r\n\t\t\t\tdummyEl = document.createElement(\"div\");\r\n\t\t\t\tdummyEl.innerHTML = options.dataTreeCollapseElement;\r\n\t\t\t\tthis.collapseEl = dummyEl.firstChild;\r\n\t\t\t}else{\r\n\t\t\t\tthis.collapseEl = options.dataTreeCollapseElement;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.collapseEl = document.createElement(\"div\");\r\n\t\t\tthis.collapseEl.classList.add(\"tabulator-data-tree-control\");\r\n\t\t\tthis.collapseEl.tabIndex = 0;\r\n\t\t\tthis.collapseEl.innerHTML = \"<div class='tabulator-data-tree-control-collapse'></div>\";\r\n\t\t}\r\n\r\n\t\tif(options.dataTreeExpandElement){\r\n\t\t\tif(typeof options.dataTreeExpandElement === \"string\"){\r\n\t\t\t\tdummyEl = document.createElement(\"div\");\r\n\t\t\t\tdummyEl.innerHTML = options.dataTreeExpandElement;\r\n\t\t\t\tthis.expandEl = dummyEl.firstChild;\r\n\t\t\t}else{\r\n\t\t\t\tthis.expandEl = options.dataTreeExpandElement;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.expandEl = document.createElement(\"div\");\r\n\t\t\tthis.expandEl.classList.add(\"tabulator-data-tree-control\");\r\n\t\t\tthis.expandEl.tabIndex = 0;\r\n\t\t\tthis.expandEl.innerHTML = \"<div class='tabulator-data-tree-control-expand'></div>\";\r\n\t\t}\r\n\r\n\r\n\t\tswitch(typeof options.dataTreeStartExpanded){\r\n\t\t\tcase \"boolean\":\r\n\t\t\tthis.startOpen = function(row, index){\r\n\t\t\t\treturn options.dataTreeStartExpanded;\r\n\t\t\t};\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\tthis.startOpen = options.dataTreeStartExpanded;\r\n\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\tthis.startOpen = function(row, index){\r\n\t\t\t\treturn options.dataTreeStartExpanded[index];\r\n\t\t\t};\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeRow(row){\r\n\t\tvar childArray = row.getData()[this.field];\r\n\t\tvar isArray = Array.isArray(childArray);\r\n\r\n\t\tvar children = isArray || (!isArray && typeof childArray === \"object\" && childArray !== null);\r\n\r\n\t\tif(!children && row.modules.dataTree && row.modules.dataTree.branchEl){\r\n\t\t\trow.modules.dataTree.branchEl.parentNode.removeChild(row.modules.dataTree.branchEl);\r\n\t\t}\r\n\r\n\t\tif(!children && row.modules.dataTree && row.modules.dataTree.controlEl){\r\n\t\t\trow.modules.dataTree.controlEl.parentNode.removeChild(row.modules.dataTree.controlEl);\r\n\t\t}\r\n\r\n\t\trow.modules.dataTree = {\r\n\t\t\tindex: row.modules.dataTree ? row.modules.dataTree.index : 0,\r\n\t\t\topen: children ? (row.modules.dataTree ? row.modules.dataTree.open : this.startOpen(row.getComponent(), 0)) : false,\r\n\t\t\tcontrolEl: row.modules.dataTree && children ? row.modules.dataTree.controlEl : false,\r\n\t\t\tbranchEl: row.modules.dataTree && children ? row.modules.dataTree.branchEl : false,\r\n\t\t\tparent: row.modules.dataTree ? row.modules.dataTree.parent : false,\r\n\t\t\tchildren:children,\r\n\t\t};\r\n\t}\r\n\r\n\tlayoutRow(row){\r\n\t\tvar cell = this.elementField ? row.getCell(this.elementField) : row.getCells()[0],\r\n\t\tel = cell.getElement(),\r\n\t\tconfig = row.modules.dataTree;\r\n\r\n\t\tif(config.branchEl){\r\n\t\t\tif(config.branchEl.parentNode){\r\n\t\t\t\tconfig.branchEl.parentNode.removeChild(config.branchEl);\r\n\t\t\t}\r\n\t\t\tconfig.branchEl = false;\r\n\t\t}\r\n\r\n\t\tif(config.controlEl){\r\n\t\t\tif(config.controlEl.parentNode){\r\n\t\t\t\tconfig.controlEl.parentNode.removeChild(config.controlEl);\r\n\t\t\t}\r\n\t\t\tconfig.controlEl = false;\r\n\t\t}\r\n\r\n\t\tthis.generateControlElement(row, el);\r\n\r\n\t\trow.getElement().classList.add(\"tabulator-tree-level-\" + config.index);\r\n\r\n\t\tif(config.index){\r\n\t\t\tif(this.branchEl){\r\n\t\t\t\tconfig.branchEl = this.branchEl.cloneNode(true);\r\n\t\t\t\tel.insertBefore(config.branchEl, el.firstChild);\r\n\r\n\t\t\t\tif(this.table.rtl){\r\n\t\t\t\t\tconfig.branchEl.style.marginRight = (((config.branchEl.offsetWidth + config.branchEl.style.marginLeft) * (config.index - 1)) + (config.index * this.indent)) + \"px\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconfig.branchEl.style.marginLeft = (((config.branchEl.offsetWidth + config.branchEl.style.marginRight) * (config.index - 1)) + (config.index * this.indent)) + \"px\";\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\r\n\t\t\t\tif(this.table.rtl){\r\n\t\t\t\t\tel.style.paddingRight = parseInt(window.getComputedStyle(el, null).getPropertyValue('padding-right')) + (config.index * this.indent) + \"px\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tel.style.paddingLeft = parseInt(window.getComputedStyle(el, null).getPropertyValue('padding-left')) + (config.index * this.indent) + \"px\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgenerateControlElement(row, el){\r\n\t\tvar config = row.modules.dataTree,\r\n\t\tel = el || row.getCells()[0].getElement(),\r\n\t\toldControl = config.controlEl;\r\n\r\n\t\tif(config.children !== false){\r\n\r\n\t\t\tif(config.open){\r\n\t\t\t\tconfig.controlEl = this.collapseEl.cloneNode(true);\r\n\t\t\t\tconfig.controlEl.addEventListener(\"click\", (e) => {\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\tthis.collapseRow(row);\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tconfig.controlEl = this.expandEl.cloneNode(true);\r\n\t\t\t\tconfig.controlEl.addEventListener(\"click\", (e) => {\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\tthis.expandRow(row);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tconfig.controlEl.addEventListener(\"mousedown\", (e) => {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t});\r\n\r\n\t\t\tif(oldControl && oldControl.parentNode === el){\r\n\t\t\t\toldControl.parentNode.replaceChild(config.controlEl,oldControl);\r\n\t\t\t}else{\r\n\t\t\t\tel.insertBefore(config.controlEl, el.firstChild);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsetDisplayIndex (index) {\r\n\t\tthis.displayIndex = index;\r\n\t}\r\n\r\n\tgetDisplayIndex () {\r\n\t\treturn this.displayIndex;\r\n\t}\r\n\r\n\tgetRows(rows){\r\n\t\tvar output = [];\r\n\r\n\t\trows.forEach((row, i) => {\r\n\t\t\tvar config, children;\r\n\r\n\t\t\toutput.push(row);\r\n\r\n\t\t\tif(row instanceof Row){\r\n\r\n\t\t\t\trow.create();\r\n\r\n\t\t\t\tconfig = row.modules.dataTree.children;\r\n\r\n\t\t\t\tif(!config.index && config.children !== false){\r\n\t\t\t\t\tchildren = this.getChildren(row);\r\n\r\n\t\t\t\t\tchildren.forEach((child) => {\r\n\t\t\t\t\t\tchild.create();\r\n\t\t\t\t\t\toutput.push(child);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgetChildren(row, allChildren){\r\n\t\tvar config = row.modules.dataTree,\r\n\t\tchildren = [],\r\n\t\toutput = [];\r\n\r\n\t\tif(config.children !== false && (config.open || allChildren)){\r\n\t\t\tif(!Array.isArray(config.children)){\r\n\t\t\t\tconfig.children = this.generateChildren(row);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.modExists(\"filter\") && this.table.options.dataTreeFilter){\r\n\t\t\t\tchildren = this.table.modules.filter.filter(config.children);\r\n\t\t\t}else{\r\n\t\t\t\tchildren = config.children;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.modExists(\"sort\") && this.table.options.dataTreeSort){\r\n\t\t\t\tthis.table.modules.sort.sort(children);\r\n\t\t\t}\r\n\r\n\t\t\tchildren.forEach((child) => {\r\n\t\t\t\toutput.push(child);\r\n\r\n\t\t\t\tvar subChildren = this.getChildren(child);\r\n\r\n\t\t\t\tsubChildren.forEach((sub) => {\r\n\t\t\t\t\toutput.push(sub);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgenerateChildren(row){\r\n\t\tvar children = [];\r\n\r\n\t\tvar childArray = row.getData()[this.field];\r\n\r\n\t\tif(!Array.isArray(childArray)){\r\n\t\t\tchildArray = [childArray];\r\n\t\t}\r\n\r\n\t\tchildArray.forEach((childData) => {\r\n\t\t\tvar childRow = new Row(childData || {}, this.table.rowManager);\r\n\r\n\t\t\tchildRow.create();\r\n\r\n\t\t\tchildRow.modules.dataTree.index = row.modules.dataTree.index + 1;\r\n\t\t\tchildRow.modules.dataTree.parent = row;\r\n\r\n\t\t\tif(childRow.modules.dataTree.children){\r\n\t\t\t\tchildRow.modules.dataTree.open = this.startOpen(childRow.getComponent(), childRow.modules.dataTree.index);\r\n\t\t\t}\r\n\t\t\tchildren.push(childRow);\r\n\t\t});\r\n\r\n\t\treturn children;\r\n\t}\r\n\r\n\texpandRow(row, silent){\r\n\t\tvar config = row.modules.dataTree;\r\n\r\n\t\tif(config.children !== false){\r\n\t\t\tconfig.open = true;\r\n\r\n\t\t\trow.reinitialize();\r\n\r\n\t\t\tthis.table.rowManager.refreshActiveData(\"tree\", false, true);\r\n\r\n\t\t\tthis.table.options.dataTreeRowExpanded(row.getComponent(), row.modules.dataTree.index);\r\n\t\t}\r\n\t}\r\n\r\n\tcollapseRow(row){\r\n\t\tvar config = row.modules.dataTree;\r\n\r\n\t\tif(config.children !== false){\r\n\t\t\tconfig.open = false;\r\n\r\n\t\t\trow.reinitialize();\r\n\r\n\t\t\tthis.table.rowManager.refreshActiveData(\"tree\", false, true);\r\n\r\n\t\t\tthis.table.options.dataTreeRowCollapsed(row.getComponent(), row.modules.dataTree.index);\r\n\t\t}\r\n\t}\r\n\r\n\ttoggleRow(row){\r\n\t\tvar config = row.modules.dataTree;\r\n\r\n\t\tif(config.children !== false){\r\n\t\t\tif(config.open){\r\n\t\t\t\tthis.collapseRow(row);\r\n\t\t\t}else{\r\n\t\t\t\tthis.expandRow(row);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetTreeParent(row){\r\n\t\treturn row.modules.dataTree.parent ? row.modules.dataTree.parent.getComponent() : false;\r\n\t}\r\n\r\n\tgetFilteredTreeChildren(row){\r\n\t\tvar config = row.modules.dataTree,\r\n\t\toutput = [], children;\r\n\r\n\t\tif(config.children){\r\n\r\n\t\t\tif(!Array.isArray(config.children)){\r\n\t\t\t\tconfig.children = this.generateChildren(row);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.modExists(\"filter\") && this.table.options.dataTreeFilter){\r\n\t\t\t\tchildren = this.table.modules.filter.filter(config.children);\r\n\t\t\t}else{\r\n\t\t\t\tchildren = config.children;\r\n\t\t\t}\r\n\r\n\t\t\tchildren.forEach((childRow) => {\r\n\t\t\t\tif(childRow instanceof Row){\r\n\t\t\t\t\toutput.push(childRow);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\trowDelete(row){\r\n\t\tvar parent = row.modules.dataTree.parent,\r\n\t\tchildIndex;\r\n\r\n\t\tif(parent){\r\n\t\t\tchildIndex = this.findChildIndex(row, parent);\r\n\r\n\t\t\tif(childIndex !== false){\r\n\t\t\t\tparent.data[this.field].splice(childIndex, 1);\r\n\t\t\t}\r\n\r\n\t\t\tif(!parent.data[this.field].length){\r\n\t\t\t\tdelete parent.data[this.field];\r\n\t\t\t}\r\n\r\n\t\t\tthis.initializeRow(parent);\r\n\t\t\tthis.layoutRow(parent);\r\n\t\t}\r\n\r\n\t\tthis.table.rowManager.refreshActiveData(\"tree\", false, true);\r\n\t}\r\n\r\n\taddTreeChildRow(row, data, top, index){\r\n\t\tvar childIndex = false;\r\n\r\n\t\tif(typeof data === \"string\"){\r\n\t\t\tdata = JSON.parse(data);\r\n\t\t}\r\n\r\n\t\tif(!Array.isArray(row.data[this.field])){\r\n\t\t\trow.data[this.field] = [];\r\n\r\n\t\t\trow.modules.dataTree.open = this.startOpen(row.getComponent(), row.modules.dataTree.index);\r\n\t\t}\r\n\r\n\t\tif(typeof index !== \"undefined\"){\r\n\t\t\tchildIndex = this.findChildIndex(index, row);\r\n\r\n\t\t\tif(childIndex !== false){\r\n\t\t\t\trow.data[this.field].splice((top ? childIndex : childIndex + 1), 0, data);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(childIndex === false){\r\n\t\t\tif(top){\r\n\t\t\t\trow.data[this.field].unshift(data);\r\n\t\t\t}else{\r\n\t\t\t\trow.data[this.field].push(data);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.initializeRow(row);\r\n\t\tthis.layoutRow(row);\r\n\r\n\t\tthis.table.rowManager.refreshActiveData(\"tree\", false, true);\r\n\t}\r\n\r\n\tfindChildIndex(subject, parent){\r\n\t\tvar match = false;\r\n\r\n\t\tif(typeof subject == \"object\"){\r\n\r\n\t\t\tif(subject instanceof Row){\r\n\t\t\t\t//subject is row element\r\n\t\t\t\tmatch = subject.data;\r\n\t\t\t}else if(subject instanceof RowComponent){\r\n\t\t\t\t//subject is public row component\r\n\t\t\t\tmatch = subject._getSelf().data;\r\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement){\r\n\t\t\t\tif(parent.modules.dataTree){\r\n\t\t\t\t\tmatch = parent.modules.dataTree.children.find((childRow) => {\r\n\t\t\t\t\t\treturn childRow instanceof Row ? childRow.element === subject : false;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif(match){\r\n\t\t\t\t\t\tmatch = match.data;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}else if(typeof subject == \"undefined\" || subject === null){\r\n\t\t\tmatch = false\r\n\t\t}else{\r\n\t\t\t//subject should be treated as the index of the row\r\n\t\t\tmatch = parent.data[this.field].find((row) => {\r\n\t\t\t\treturn row.data[this.table.options.index] == subject;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(match){\r\n\r\n\t\t\tif(Array.isArray(parent.data[this.field])){\r\n\t\t\t\tmatch = parent.data[this.field].indexOf(match);\r\n\t\t\t}\r\n\r\n\t\t\tif(match == -1){\r\n\t\t\t\tmatch = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//catch all for any other type of input\r\n\r\n\t\treturn match;\r\n\t}\r\n\r\n\tgetTreeChildren(row, component, recurse){\r\n\t\tvar config = row.modules.dataTree,\r\n\t\toutput = [];\r\n\r\n\t\tif(config.children){\r\n\r\n\t\t\tif(!Array.isArray(config.children)){\r\n\t\t\t\tconfig.children = this.generateChildren(row);\r\n\t\t\t}\r\n\r\n\t\t\tconfig.children.forEach((childRow) => {\r\n\t\t\t\tif(childRow instanceof Row){\r\n\t\t\t\t\toutput.push(component ? childRow.getComponent() : childRow);\r\n\r\n\t\t\t\t\tif(recurse){\r\n\t\t\t\t\t\toutput = output.concat(this.getTreeChildren(childRow, component, recurse));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tcheckForRestyle(cell){\r\n\t\tif(!cell.row.cells.indexOf(cell)){\r\n\t\t\tcell.row.reinitialize();\r\n\t\t}\r\n\t}\r\n\r\n\tgetChildField(){\r\n\t\treturn this.field;\r\n\t}\r\n\r\n\tredrawNeeded(data){\r\n\t\treturn (this.field ? typeof data[this.field] !== \"undefined\" : false) || (this.elementField ? typeof data[this.elementField] !== \"undefined\" : false);\r\n\t}\r\n}\r\n\r\nDataTree.moduleName = \"dataTree\";\r\n\r\nexport default DataTree;","export default function(list, options, setFileContents){\r\n\tvar delimiter = options && options.delimiter ? options.delimiter : \",\",\r\n\tfileContents = [],\r\n\theaders = [];\r\n\r\n\tlist.forEach((row) => {\r\n\t\tvar item = [];\r\n\r\n\t\tswitch(row.type){\r\n\t\t\tcase \"group\":\r\n\t\t\tconsole.warn(\"Download Warning - CSV downloader cannot process row groups\");\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"calc\":\r\n\t\t\tconsole.warn(\"Download Warning - CSV downloader cannot process column calculations\");\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"header\":\r\n\t\t\trow.columns.forEach((col, i) => {\r\n\t\t\t\tif(col && col.depth === 1){\r\n\t\t\t\t\theaders[i] = typeof col.value == \"undefined\"  || col.value === null ? \"\" : ('\"' + String(col.value).split('\"').join('\"\"') + '\"');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"row\":\r\n\t\t\trow.columns.forEach((col) => {\r\n\r\n\t\t\t\tif(col){\r\n\r\n\t\t\t\t\tswitch(typeof col.value){\r\n\t\t\t\t\t\tcase \"object\":\r\n\t\t\t\t\t\tcol.value = JSON.stringify(col.value);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase \"undefined\":\r\n\t\t\t\t\t\tcase \"null\":\r\n\t\t\t\t\t\tcol.value = \"\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\titem.push('\"' + String(col.value).split('\"').join('\"\"') + '\"');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tfileContents.push(item.join(delimiter));\r\n\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n\r\n\tif(headers.length){\r\n\t\tfileContents.unshift(headers.join(delimiter));\r\n\t}\r\n\r\n\tfileContents = fileContents.join(\"\\n\");\r\n\r\n\tif(options.bom){\r\n\t\tfileContents = \"\\ufeff\" + fileContents;\r\n\t}\r\n\r\n\tsetFileContents(fileContents, \"text/csv\");\r\n};","export default function(list, options, setFileContents){\r\n\tvar fileContents = [];\r\n\r\n\tlist.forEach((row) => {\r\n\t\tvar item = {};\r\n\r\n\t\tswitch(row.type){\r\n\t\t\tcase \"header\":\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"group\":\r\n\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process row groups\");\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"calc\":\r\n\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process column calculations\");\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"row\":\r\n\t\t\trow.columns.forEach((col) => {\r\n\t\t\t\tif(col){\r\n\t\t\t\t\titem[col.component.getField()] = col.value;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tfileContents.push(item);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n\r\n\tfileContents = JSON.stringify(fileContents, null, '\\t');\r\n\r\n\tsetFileContents(fileContents, \"application/json\");\r\n};","export default function(list, options, setFileContents){\r\n\tvar header = [],\r\n\tbody = [],\r\n\tautoTableParams = {},\r\n\trowGroupStyles = options.rowGroupStyles || {\r\n\t\tfontStyle: \"bold\",\r\n\t\tfontSize: 12,\r\n\t\tcellPadding: 6,\r\n\t\tfillColor: 220,\r\n\t},\r\n\trowCalcStyles = options.rowCalcStyles || {\r\n\t\tfontStyle: \"bold\",\r\n\t\tfontSize: 10,\r\n\t\tcellPadding: 4,\r\n\t\tfillColor: 232,\r\n\t},\r\n\tjsPDFParams = options.jsPDF || {},\r\n\ttitle = options && options.title ? options.title : \"\";\r\n\r\n\tif(!jsPDFParams.orientation){\r\n\t\tjsPDFParams.orientation = options.orientation || \"landscape\";\r\n\t}\r\n\r\n\tif(!jsPDFParams.unit){\r\n\t\tjsPDFParams.unit = \"pt\";\r\n\t}\r\n\r\n\t//parse row list\r\n\tlist.forEach((row) => {\r\n\t\tvar item = {};\r\n\r\n\t\tswitch(row.type){\r\n\t\t\tcase \"header\":\r\n\t\t\theader.push(parseRow(row));\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"group\":\r\n\t\t\tbody.push(parseRow(row, rowGroupStyles));\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"calc\":\r\n\t\t\tbody.push(parseRow(row, rowCalcStyles));\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"row\":\r\n\t\t\tbody.push(parseRow(row));\r\n\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n\r\n\tfunction parseRow(row, styles){\r\n\t\tvar rowData = [];\r\n\r\n\t\trow.columns.forEach((col) =>{\r\n\t\t\tvar cell;\r\n\r\n\t\t\tif(col){\r\n\t\t\t\tswitch(typeof col.value){\r\n\t\t\t\t\tcase \"object\":\r\n\t\t\t\t\tcol.value = JSON.stringify(col.value);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase \"undefined\":\r\n\t\t\t\t\tcase \"null\":\r\n\t\t\t\t\tcol.value = \"\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcell = {\r\n\t\t\t\t\tcontent:col.value,\r\n\t\t\t\t\tcolSpan:col.width,\r\n\t\t\t\t\trowSpan:col.height,\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif(styles){\r\n\t\t\t\t\tcell.styles = styles;\r\n\t\t\t\t}\r\n\r\n\t\t\t\trowData.push(cell);\r\n\t\t\t}else{\r\n\t\t\t\trowData.push(\"\");\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn rowData;\r\n\t}\r\n\r\n\r\n\t//configure PDF\r\n\tvar doc = new jsPDF(jsPDFParams); //set document to landscape, better for most tables\r\n\r\n\tif(options && options.autoTable){\r\n\t\tif(typeof options.autoTable === \"function\"){\r\n\t\t\tautoTableParams = options.autoTable(doc) || {};\r\n\t\t}else{\r\n\t\t\tautoTableParams = options.autoTable;\r\n\t\t}\r\n\t}\r\n\r\n\tif(title){\r\n\t\tautoTableParams.addPageContent = function(data) {\r\n\t\t\tdoc.text(title, 40, 30);\r\n\t\t};\r\n\t}\r\n\r\n\tautoTableParams.head = header;\r\n\tautoTableParams.body = body;\r\n\r\n\tdoc.autoTable(autoTableParams);\r\n\r\n\tif(options && options.documentProcessing){\r\n\t\toptions.documentProcessing(doc);\r\n\t}\r\n\r\n\tsetFileContents(doc.output(\"arraybuffer\"), \"application/pdf\");\r\n};","export default function(list, options, setFileContents){\r\n\tvar self = this,\r\n\tsheetName = options.sheetName || \"Sheet1\",\r\n\tworkbook = XLSX.utils.book_new(),\r\n\toutput;\r\n\r\n\tworkbook.SheetNames = [];\r\n\tworkbook.Sheets = {};\r\n\r\n\tfunction generateSheet(){\r\n\t\tvar rows = [],\r\n\t\tmerges = [],\r\n\t\tworksheet = {},\r\n\t\trange = {s: {c:0, r:0}, e: {c:(list[0] ? list[0].columns.reduce((a, b) => a + (b && b.width ? b.width : 1), 0) : 0), r:list.length }};\r\n\r\n\t\t//parse row list\r\n\t\tlist.forEach((row, i) => {\r\n\t\t\tvar rowData = [];\r\n\r\n\t\t\trow.columns.forEach(function(col, j){\r\n\r\n\t\t\t\tif(col){\r\n\t\t\t\t\trowData.push(!(col.value instanceof Date) && typeof col.value === \"object\" ? JSON.stringify(col.value) : col.value);\r\n\r\n\t\t\t\t\tif(col.width > 1 || col.height > -1){\r\n\t\t\t\t\t\tmerges.push({s:{r:i,c:j},e:{r:i + col.height - 1,c:j + col.width - 1}});\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\trowData.push(\"\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\trows.push(rowData);\r\n\t\t});\r\n\r\n\r\n\t\t//convert rows to worksheet\r\n\t\tXLSX.utils.sheet_add_aoa(worksheet, rows);\r\n\r\n\t\tworksheet['!ref'] = XLSX.utils.encode_range(range);\r\n\r\n\t\tif(merges.length){\r\n\t\t\tworksheet[\"!merges\"] = merges;\r\n\t\t}\r\n\r\n\t\treturn worksheet;\r\n\t}\r\n\r\n\tif(options.sheetOnly){\r\n\t\tsetFileContents(generateSheet());\r\n\t\treturn;\r\n\t}\r\n\r\n\tif(options.sheets){\r\n\t\tfor(var sheet in options.sheets){\r\n\r\n\t\t\tif(options.sheets[sheet] === true){\r\n\t\t\t\tworkbook.SheetNames.push(sheet);\r\n\t\t\t\tworkbook.Sheets[sheet] = generateSheet();\r\n\t\t\t}else{\r\n\r\n\t\t\t\tworkbook.SheetNames.push(sheet);\r\n\r\n\t\t\t\tthis.modules.comms.send(options.sheets[sheet], \"download\", \"intercept\",{\r\n\t\t\t\t\ttype:\"xlsx\",\r\n\t\t\t\t\toptions:{sheetOnly:true},\r\n\t\t\t\t\tactive:self.active,\r\n\t\t\t\t\tintercept:function(data){\r\n\t\t\t\t\t\tworkbook.Sheets[sheet] = data;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}else{\r\n\t\tworkbook.SheetNames.push(sheetName);\r\n\t\tworkbook.Sheets[sheetName] = generateSheet();\r\n\t}\r\n\r\n\tif(options.documentProcessing){\r\n\t\tworkbook = options.documentProcessing(workbook);\r\n\t}\r\n\r\n\t//convert workbook to binary array\r\n\tfunction s2ab(s) {\r\n\t\tvar buf = new ArrayBuffer(s.length);\r\n\t\tvar view = new Uint8Array(buf);\r\n\t\tfor (var i=0; i!=s.length; ++i) view[i] = s.charCodeAt(i) & 0xFF;\r\n\t\t\treturn buf;\r\n\t}\r\n\r\n\toutput = XLSX.write(workbook, {bookType:'xlsx', bookSST:true, type: 'binary'});\r\n\r\n\tsetFileContents(s2ab(output), \"application/octet-stream\");\r\n};","export default function(list, options, setFileContents){\r\n\tif(this.modExists(\"export\", true)){\r\n\t\tsetFileContents(this.modules.export.genereateHTMLTable(list), \"text/html\");\r\n\t}\r\n};","import csv from './downloaders/csv.js';\r\nimport json from './downloaders/json.js';\r\nimport pdf from './downloaders/pdf.js';\r\nimport xlsx from './downloaders/xlsx.js';\r\nimport html from './downloaders/html.js';\r\n\r\nexport default {\r\n\tcsv:csv,\r\n\tjson:json,\r\n\tpdf:pdf,\r\n\txlsx:xlsx,\r\n\thtml:html,\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport defaultDownloaders from './defaults/downloaders.js';\r\n\r\nclass Download extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\t}\r\n\r\n\t//trigger file download\r\n\tdownload(type, filename, options, range, interceptCallback){\r\n\t\tvar downloadFunc = false;\r\n\r\n\t\tfunction buildLink(data, mime){\r\n\t\t\tif(interceptCallback){\r\n\t\t\t\tif(interceptCallback === true){\r\n\t\t\t\t\tthis.triggerDownload(data, mime, type, filename, true);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tinterceptCallback(data);\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tthis.triggerDownload(data, mime, type, filename);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(typeof type == \"function\"){\r\n\t\t\tdownloadFunc = type;\r\n\t\t}else{\r\n\t\t\tif(Download.downloaders[type]){\r\n\t\t\t\tdownloadFunc = Download.downloaders[type];\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Download Error - No such download type found: \", type);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(downloadFunc){\r\n\t\t\tvar list = this.generateExportList(range);\r\n\r\n\t\t\tdownloadFunc.call(this.table, list , options || {}, buildLink);\r\n\t\t}\r\n\t}\r\n\r\n\tgenerateExportList(range){\r\n\t\tvar list = this.table.modules.export.generateExportList(this.table.options.downloadConfig, false, range || this.table.options.downloadRowRange, \"download\");\r\n\r\n\t\t//assign group header formatter\r\n\t\tvar groupHeader = this.table.options.groupHeaderDownload;\r\n\r\n\t\tif(groupHeader && !Array.isArray(groupHeader)){\r\n\t\t\tgroupHeader = [groupHeader];\r\n\t\t}\r\n\r\n\t\tlist.forEach((row) => {\r\n\t\t\tvar group;\r\n\r\n\t\t\tif(row.type === \"group\"){\r\n\t\t\t\tgroup = row.columns[0];\r\n\r\n\t\t\t\tif(groupHeader && groupHeader[row.indent]){\r\n\t\t\t\t\tgroup.value = groupHeader[row.indent](group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn list;\r\n\t}\r\n\r\n\ttriggerDownload(data, mime, type, filename, newTab){\r\n\t\tvar element = document.createElement('a'),\r\n\t\tblob = new Blob([data],{type:mime}),\r\n\t\tfilename = filename || \"Tabulator.\" + (typeof type === \"function\" ? \"txt\" : type);\r\n\r\n\t\tblob = this.table.options.downloadReady.call(this.table, data, blob);\r\n\r\n\t\tif(blob){\r\n\r\n\t\t\tif(newTab){\r\n\t\t\t\twindow.open(window.URL.createObjectURL(blob));\r\n\t\t\t}else{\r\n\t\t\t\tif(navigator.msSaveOrOpenBlob){\r\n\t\t\t\t\tnavigator.msSaveOrOpenBlob(blob, filename);\r\n\t\t\t\t}else{\r\n\t\t\t\t\telement.setAttribute('href', window.URL.createObjectURL(blob));\r\n\r\n\t\t\t\t\t//set file title\r\n\t\t\t\t\telement.setAttribute('download', filename);\r\n\r\n\t\t\t\t\t//trigger download\r\n\t\t\t\t\telement.style.display = 'none';\r\n\t\t\t\t\tdocument.body.appendChild(element);\r\n\t\t\t\t\telement.click();\r\n\r\n\t\t\t\t\t//remove temporary link element\r\n\t\t\t\t\tdocument.body.removeChild(element);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif(this.table.options.downloadComplete){\r\n\t\t\t\tthis.table.options.downloadComplete();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcommsReceived(table, action, data){\r\n\t\tswitch(action){\r\n\t\t\tcase \"intercept\":\r\n\t\t\tthis.download(data.type, \"\", data.options, data.active, data.intercept);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nDownload.moduleName = \"download\";\r\n\r\n//load defaults\r\nDownload.downloaders = defaultDownloaders;\r\n\r\nexport default Download;","//input element\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n\t//create and style input\r\n\tvar cellValue = cell.getValue(),\r\n\tinput = document.createElement(\"input\");\r\n\r\n\tinput.setAttribute(\"type\", editorParams.search ? \"search\" : \"text\");\r\n\r\n\tinput.style.padding = \"4px\";\r\n\tinput.style.width = \"100%\";\r\n\tinput.style.boxSizing = \"border-box\";\r\n\r\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n\t\tfor (let key in editorParams.elementAttributes){\r\n\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\tkey = key.slice(1);\r\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n\t\t\t}else{\r\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinput.value = typeof cellValue !== \"undefined\" ? cellValue : \"\";\r\n\r\n\tonRendered(function(){\r\n\t\tinput.focus({preventScroll: true});\r\n\t\tinput.style.height = \"100%\";\r\n\t});\r\n\r\n\tfunction onChange(e){\r\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\") || input.value !== cellValue){\r\n\t\t\tif(success(input.value)){\r\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tcancel();\r\n\t\t}\r\n\t}\r\n\r\n\t//submit new value on blur or change\r\n\tinput.addEventListener(\"change\", onChange);\r\n\tinput.addEventListener(\"blur\", onChange);\r\n\r\n\t//submit new value on enter\r\n\tinput.addEventListener(\"keydown\", function(e){\r\n\t\tswitch(e.keyCode){\r\n\t\t\t// case 9:\r\n\t\t\tcase 13:\r\n\t\t\tonChange(e);\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 27:\r\n\t\t\tcancel();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 35:\r\n\t\t\tcase 36:\r\n\t\t\te.stopPropagation();\r\n\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n\r\n\tif(editorParams.mask){\r\n\t\tthis.table.modules.edit.maskInput(input, editorParams);\r\n\t}\r\n\r\n\treturn input;\r\n};","//resizable text area element\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n    var self = this,\r\n    cellValue = cell.getValue(),\r\n    vertNav = editorParams.verticalNavigation || \"hybrid\",\r\n    value = String(cellValue !== null && typeof cellValue !== \"undefined\"  ? cellValue : \"\"),\r\n    count = (value.match(/(?:\\r\\n|\\r|\\n)/g) || []).length + 1,\r\n    input = document.createElement(\"textarea\"),\r\n    scrollHeight = 0;\r\n\r\n    //create and style input\r\n    input.style.display = \"block\";\r\n    input.style.padding = \"2px\";\r\n    input.style.height = \"100%\";\r\n    input.style.width = \"100%\";\r\n    input.style.boxSizing = \"border-box\";\r\n    input.style.whiteSpace = \"pre-wrap\";\r\n    input.style.resize = \"none\";\r\n\r\n    if(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n        for (let key in editorParams.elementAttributes){\r\n            if(key.charAt(0) == \"+\"){\r\n                key = key.slice(1);\r\n                input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n            }else{\r\n                input.setAttribute(key, editorParams.elementAttributes[key]);\r\n            }\r\n        }\r\n    }\r\n\r\n    input.value = value;\r\n\r\n    onRendered(function(){\r\n        input.focus({preventScroll: true});\r\n        input.style.height = \"100%\";\r\n\r\n        input.scrollHeight;\r\n        input.style.height = input.scrollHeight + \"px\";\r\n        cell.getRow().normalizeHeight();\r\n    });\r\n\r\n    function onChange(e){\r\n\r\n        if(((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\") || input.value !== cellValue){\r\n\r\n            if(success(input.value)){\r\n                cellValue = input.value; //persist value if successfully validated incase editor is used as header filter\r\n            }\r\n\r\n            setTimeout(function(){\r\n                cell.getRow().normalizeHeight();\r\n            },300)\r\n        }else{\r\n            cancel();\r\n        }\r\n    }\r\n\r\n    //submit new value on blur or change\r\n    input.addEventListener(\"change\", onChange);\r\n    input.addEventListener(\"blur\", onChange);\r\n\r\n    input.addEventListener(\"keyup\", function(){\r\n\r\n        input.style.height = \"\";\r\n\r\n        var heightNow = input.scrollHeight;\r\n\r\n        input.style.height = heightNow + \"px\";\r\n\r\n        if(heightNow != scrollHeight){\r\n            scrollHeight = heightNow;\r\n            cell.getRow().normalizeHeight();\r\n        }\r\n    });\r\n\r\n    input.addEventListener(\"keydown\", function(e){\r\n\r\n        switch(e.keyCode){\r\n            case 27:\r\n            cancel();\r\n            break;\r\n\r\n            case 38: //up arrow\r\n            if(vertNav == \"editor\" || (vertNav == \"hybrid\" && input.selectionStart)){\r\n                e.stopImmediatePropagation();\r\n                e.stopPropagation();\r\n            }\r\n\r\n            break;\r\n\r\n            case 40: //down arrow\r\n            if(vertNav == \"editor\" || (vertNav == \"hybrid\" && input.selectionStart !== input.value.length)){\r\n                e.stopImmediatePropagation();\r\n                e.stopPropagation();\r\n            }\r\n            break;\r\n\r\n            case 35:\r\n            case 36:\r\n            e.stopPropagation();\r\n            break;\r\n        }\r\n    });\r\n\r\n    if(editorParams.mask){\r\n        this.table.modules.edit.maskInput(input, editorParams);\r\n    }\r\n\r\n    return input;\r\n};","//input element with type of number\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n\tvar cellValue = cell.getValue(),\r\n\tvertNav = editorParams.verticalNavigation || \"editor\",\r\n\tinput = document.createElement(\"input\");\r\n\r\n\tinput.setAttribute(\"type\", \"number\");\r\n\r\n\tif(typeof editorParams.max != \"undefined\"){\r\n\t\tinput.setAttribute(\"max\", editorParams.max);\r\n\t}\r\n\r\n\tif(typeof editorParams.min != \"undefined\"){\r\n\t\tinput.setAttribute(\"min\", editorParams.min);\r\n\t}\r\n\r\n\tif(typeof editorParams.step != \"undefined\"){\r\n\t\tinput.setAttribute(\"step\", editorParams.step);\r\n\t}\r\n\r\n\t//create and style input\r\n\tinput.style.padding = \"4px\";\r\n\tinput.style.width = \"100%\";\r\n\tinput.style.boxSizing = \"border-box\";\r\n\r\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n\t\tfor (let key in editorParams.elementAttributes){\r\n\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\tkey = key.slice(1);\r\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n\t\t\t}else{\r\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinput.value = cellValue;\r\n\r\n\tvar blurFunc = function(e){\r\n\t\tonChange();\r\n\t};\r\n\r\n\tonRendered(function () {\r\n\t\t//submit new value on blur\r\n\t\tinput.removeEventListener(\"blur\", blurFunc);\r\n\r\n\t\tinput.focus({preventScroll: true});\r\n\t\tinput.style.height = \"100%\";\r\n\r\n\t\t//submit new value on blur\r\n\t\tinput.addEventListener(\"blur\", blurFunc);\r\n\t});\r\n\r\n\tfunction onChange(){\r\n\t\tvar value = input.value;\r\n\r\n\t\tif(!isNaN(value) && value !==\"\"){\r\n\t\t\tvalue = Number(value);\r\n\t\t}\r\n\r\n\t\tif(value !== cellValue){\r\n\t\t\tif(success(value)){\r\n\t\t\t\tcellValue = value; //persist value if successfully validated incase editor is used as header filter\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tcancel();\r\n\t\t}\r\n\t}\r\n\r\n\t//submit new value on enter\r\n\tinput.addEventListener(\"keydown\", function(e){\r\n\t\tswitch(e.keyCode){\r\n\t\t\tcase 13:\r\n\t\t\t// case 9:\r\n\t\t\tonChange();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 27:\r\n\t\t\tcancel();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 38: //up arrow\r\n\t\t\tcase 40: //down arrow\r\n\t\t\tif(vertNav == \"editor\"){\r\n\t\t\t\te.stopImmediatePropagation();\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 35:\r\n\t\t\tcase 36:\r\n\t\t\te.stopPropagation();\r\n\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n\r\n\tif(editorParams.mask){\r\n\t\tthis.table.modules.edit.maskInput(input, editorParams);\r\n\t}\r\n\r\n\treturn input;\r\n};","//input element with type of number\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n\tvar cellValue = cell.getValue(),\r\n\tinput = document.createElement(\"input\");\r\n\r\n\tinput.setAttribute(\"type\", \"range\");\r\n\r\n\tif (typeof editorParams.max != \"undefined\") {\r\n\t\tinput.setAttribute(\"max\", editorParams.max);\r\n\t}\r\n\r\n\tif (typeof editorParams.min != \"undefined\") {\r\n\t\tinput.setAttribute(\"min\", editorParams.min);\r\n\t}\r\n\r\n\tif (typeof editorParams.step != \"undefined\") {\r\n\t\tinput.setAttribute(\"step\", editorParams.step);\r\n\t}\r\n\r\n\t//create and style input\r\n\tinput.style.padding = \"4px\";\r\n\tinput.style.width = \"100%\";\r\n\tinput.style.boxSizing = \"border-box\";\r\n\r\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n\t\tfor (let key in editorParams.elementAttributes){\r\n\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\tkey = key.slice(1);\r\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n\t\t\t}else{\r\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinput.value = cellValue;\r\n\r\n\tonRendered(function () {\r\n\t\tinput.focus({preventScroll: true});\r\n\t\tinput.style.height = \"100%\";\r\n\t});\r\n\r\n\tfunction onChange(){\r\n\t\tvar value = input.value;\r\n\r\n\t\tif(!isNaN(value) && value !==\"\"){\r\n\t\t\tvalue = Number(value);\r\n\t\t}\r\n\r\n\t\tif(value != cellValue){\r\n\t\t\tif(success(value)){\r\n\t\t\t\tcellValue = value; //persist value if successfully validated incase editor is used as header filter\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tcancel();\r\n\t\t}\r\n\t}\r\n\r\n\t//submit new value on blur\r\n\tinput.addEventListener(\"blur\", function(e){\r\n\t\tonChange();\r\n\t});\r\n\r\n\t//submit new value on enter\r\n\tinput.addEventListener(\"keydown\", function(e){\r\n\t\tswitch(e.keyCode){\r\n\t\t\tcase 13:\r\n\t\t\t// case 9:\r\n\t\t\tonChange();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 27:\r\n\t\t\tcancel();\r\n\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n\r\n\treturn input;\r\n};","import Helpers from '../../../../core/Helpers.js';\r\n\r\n//dropdown select editor\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n\tvar self = this,\r\n\tcellEl = cell.getElement(),\r\n\tinitialValue = cell.getValue(),\r\n\tvertNav = editorParams.verticalNavigation || \"editor\",\r\n\tinitialDisplayValue = typeof initialValue !== \"undefined\" || initialValue === null ? (Array.isArray(initialValue) ? initialValue : [initialValue]) : (typeof editorParams.defaultValue !== \"undefined\" ? editorParams.defaultValue : []),\r\n\tinput = document.createElement(\"input\"),\r\n\tlistEl = document.createElement(\"div\"),\r\n\tmultiselect = editorParams.multiselect,\r\n\tdataItems = [],\r\n\tcurrentItem = {},\r\n\tdisplayItems = [],\r\n\tcurrentItems = [],\r\n\tblurable = true,\r\n\tblockListShow = false,\r\n\tsearchWord = \"\",\r\n\tsearchWordTimeout = null;\r\n\r\n\tif(Array.isArray(editorParams) || (!Array.isArray(editorParams) && typeof editorParams === \"object\" && !editorParams.values)){\r\n\t\tconsole.warn(\"DEPRECATION WARNING - values for the select editor must now be passed into the values property of the editorParams object, not as the editorParams object\");\r\n\t\teditorParams = {values:editorParams};\r\n\t}\r\n\r\n\tfunction getUniqueColumnValues(field){\r\n\t\tvar output = {},\r\n\t\tdata = self.table.getData(),\r\n\t\tcolumn;\r\n\r\n\t\tif(field){\r\n\t\t\tcolumn = self.table.columnManager.getColumnByField(field);\r\n\t\t}else{\r\n\t\t\tcolumn = cell.getColumn()._getSelf();\r\n\t\t}\r\n\r\n\t\tif(column){\r\n\t\t\tdata.forEach(function(row){\r\n\t\t\t\tvar val = column.getFieldValue(row);\r\n\r\n\t\t\t\tif(val !== null && typeof val !== \"undefined\" && val !== \"\"){\r\n\t\t\t\t\toutput[val] = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"unable to find matching column to create select lookup list:\", field);\r\n\t\t}\r\n\r\n\t\treturn Object.keys(output);\r\n\t}\r\n\r\n\tfunction parseItems(inputValues, curentValues){\r\n\t\tvar dataList = [];\r\n\t\tvar displayList = [];\r\n\r\n\t\tfunction processComplexListItem(item){\r\n\t\t\tvar item = {\r\n\t\t\t\tlabel:item.label,\r\n\t\t\t\tvalue:item.value,\r\n\t\t\t\titemParams:item.itemParams,\r\n\t\t\t\telementAttributes: item.elementAttributes,\r\n\t\t\t\telement:false,\r\n\t\t\t};\r\n\r\n\t\t\t// if(item.value === curentValue || (!isNaN(parseFloat(item.value)) && !isNaN(parseFloat(item.value)) && parseFloat(item.value) === parseFloat(curentValue))){\r\n\t\t\t// \tsetCurrentItem(item);\r\n\t\t\t// }\r\n\r\n\t\t\tif(curentValues.indexOf(item.value) > -1){\r\n\t\t\t\tsetItem(item);\r\n\t\t\t}\r\n\r\n\t\t\tdataList.push(item);\r\n\t\t\tdisplayList.push(item);\r\n\r\n\t\t\treturn item;\r\n\t\t}\r\n\r\n\t\tif(typeof inputValues == \"function\"){\r\n\t\t\tinputValues = inputValues(cell);\r\n\t\t}\r\n\r\n\t\tif(Array.isArray(inputValues)){\r\n\t\t\tinputValues.forEach(function(value){\r\n\t\t\t\tvar item;\r\n\r\n\t\t\t\tif(typeof value === \"object\"){\r\n\r\n\t\t\t\t\tif(value.options){\r\n\t\t\t\t\t\titem = {\r\n\t\t\t\t\t\t\tlabel:value.label,\r\n\t\t\t\t\t\t\tgroup:true,\r\n\t\t\t\t\t\t\titemParams:value.itemParams,\r\n\t\t\t\t\t\t\telementAttributes:value.elementAttributes,\r\n\t\t\t\t\t\t\telement:false,\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tdisplayList.push(item);\r\n\r\n\t\t\t\t\t\tvalue.options.forEach(function(item){\r\n\t\t\t\t\t\t\tprocessComplexListItem(item);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tprocessComplexListItem(value);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}else{\r\n\r\n\t\t\t\t\titem = {\r\n\t\t\t\t\t\tlabel:value,\r\n\t\t\t\t\t\tvalue:value,\r\n\t\t\t\t\t\telement:false,\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t// if(item.value === curentValue || (!isNaN(parseFloat(item.value)) && !isNaN(parseFloat(item.value)) && parseFloat(item.value) === parseFloat(curentValue))){\r\n\t\t\t\t\t// \tsetCurrentItem(item);\r\n\t\t\t\t\t// }\r\n\r\n\t\t\t\t\tif(curentValues.indexOf(item.value) > -1){\r\n\t\t\t\t\t\tsetItem(item);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdataList.push(item);\r\n\t\t\t\t\tdisplayList.push(item);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tfor(var key in inputValues){\r\n\t\t\t\tvar item = {\r\n\t\t\t\t\tlabel:inputValues[key],\r\n\t\t\t\t\tvalue:key,\r\n\t\t\t\t\telement:false,\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// if(item.value === curentValue || (!isNaN(parseFloat(item.value)) && !isNaN(parseFloat(item.value)) && parseFloat(item.value) === parseFloat(curentValue))){\r\n\t\t\t\t// \tsetCurrentItem(item);\r\n\t\t\t\t// }\r\n\r\n\t\t\t\tif(curentValues.indexOf(item.value) > -1){\r\n\t\t\t\t\tsetItem(item);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdataList.push(item);\r\n\t\t\t\tdisplayList.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(editorParams.sortValuesList){\r\n\t\t\tdataList.sort((a, b) => {\r\n\t\t\t\treturn a.label < b.label ? -1 : (a.label > b.label ? 1 : 0);\r\n\t\t\t});\r\n\r\n\t\t\tdisplayList.sort((a, b) => {\r\n\t\t\t\treturn a.label < b.label ? -1 : (a.label > b.label ? 1 : 0);\r\n\t\t\t});\r\n\r\n\t\t\tif(editorParams.sortValuesList !== \"asc\"){\r\n\t\t\t\tdataList.reverse();\r\n\t\t\t\tdisplayList.reverse();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tdataItems = dataList;\r\n\t\tdisplayItems = displayList;\r\n\r\n\t\tfillList();\r\n\t}\r\n\r\n\tfunction fillList(){\r\n\t\twhile(listEl.firstChild) listEl.removeChild(listEl.firstChild);\r\n\r\n\t\tdisplayItems.forEach(function(item){\r\n\r\n\t\t\tvar el = item.element;\r\n\r\n\t\t\tif(!el){\r\n\t\t\t\tel = document.createElement(\"div\");\r\n\t\t\t\titem.label = editorParams.listItemFormatter ? editorParams.listItemFormatter(item.value, item.label, cell, el, item.itemParams) : item.label;\r\n\t\t\t\tif(item.group){\r\n\t\t\t\t\tel.classList.add(\"tabulator-edit-select-list-group\");\r\n\t\t\t\t\tel.tabIndex = 0;\r\n\t\t\t\t\tel.innerHTML = item.label === \"\" ? \"&nbsp;\" : item.label;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tel.classList.add(\"tabulator-edit-select-list-item\");\r\n\t\t\t\t\tel.tabIndex = 0;\r\n\t\t\t\t\tel.innerHTML = item.label === \"\" ? \"&nbsp;\" : item.label;\r\n\r\n\t\t\t\t\tel.addEventListener(\"click\", function(){\r\n\t\t\t\t\t\tblockListShow = true;\r\n\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tblockListShow = false;\r\n\t\t\t\t\t\t}, 10);\r\n\r\n\t\t\t\t\t\t// setCurrentItem(item);\r\n\t\t\t\t\t\t// chooseItem();\r\n\t\t\t\t\t\tif(multiselect){\r\n\t\t\t\t\t\t\ttoggleItem(item);\r\n\t\t\t\t\t\t\tinput.focus();\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tchooseItem(item);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// if(item === currentItem){\r\n\t\t\t\t\t// \tel.classList.add(\"active\");\r\n\t\t\t\t\t// }\r\n\r\n\t\t\t\t\tif(currentItems.indexOf(item) > -1){\r\n\t\t\t\t\t\tel.classList.add(\"active\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(item.elementAttributes && typeof item.elementAttributes == \"object\"){\r\n\t\t\t\t\tfor (let key in item.elementAttributes){\r\n\t\t\t\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\t\t\t\tkey = key.slice(1);\r\n\t\t\t\t\t\t\tel.setAttribute(key, input.getAttribute(key) + item.elementAttributes[\"+\" + key]);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tel.setAttribute(key, item.elementAttributes[key]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tel.addEventListener(\"mousedown\", function(){\r\n\t\t\t\t\tblurable = false;\r\n\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\tblurable = true;\r\n\t\t\t\t\t}, 10);\r\n\t\t\t\t});\r\n\r\n\t\t\t\titem.element = el;\r\n\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlistEl.appendChild(el);\r\n\t\t});\r\n\t}\r\n\r\n\r\n\tfunction setCurrentItem(item, active){\r\n\r\n\t\tif(!multiselect && currentItem && currentItem.element){\r\n\t\t\tcurrentItem.element.classList.remove(\"active\");\r\n\t\t}\r\n\r\n\t\tif(currentItem && currentItem.element){\r\n\t\t\tcurrentItem.element.classList.remove(\"focused\");\r\n\t\t}\r\n\r\n\t\tcurrentItem = item;\r\n\r\n\t\tif(item.element){\r\n\t\t\titem.element.classList.add(\"focused\");\r\n\t\t\tif(active){\r\n\t\t\t\titem.element.classList.add(\"active\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(item && item.element && item.element.scrollIntoView){\r\n\t\t\titem.element.scrollIntoView({behavior: 'smooth', block: 'nearest', inline: 'start'});\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t// function chooseItem(){\r\n\t// \thideList();\r\n\r\n\t// \tif(initialValue !== currentItem.value){\r\n\t// \t\tinitialValue = currentItem.value;\r\n\t// \t\tsuccess(currentItem.value);\r\n\t// \t}else{\r\n\t// \t\tcancel();\r\n\t// \t}\r\n\t// }\r\n\r\n\tfunction setItem(item) {\r\n\t\tvar index = currentItems.indexOf(item);\r\n\r\n\t\tif(index == -1){\r\n\t\t\tcurrentItems.push(item);\r\n\t\t\tsetCurrentItem(item, true);\r\n\t\t}\r\n\r\n\t\tfillInput();\r\n\t}\r\n\r\n\tfunction unsetItem(index) {\r\n\t\tvar item = currentItems[index];\r\n\r\n\t\tif(index > -1){\r\n\t\t\tcurrentItems.splice(index, 1);\r\n\t\t\tif(item.element){\r\n\t\t\t\titem.element.classList.remove(\"active\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction toggleItem(item) {\r\n\t\tif(!item){\r\n\t\t\titem = currentItem;\r\n\t\t}\r\n\r\n\t\tvar index = currentItems.indexOf(item);\r\n\r\n\t\tif(index > -1){\r\n\t\t\tunsetItem(index);\r\n\t\t}else{\r\n\t\t\tif(multiselect !== true && currentItems.length >= multiselect){\r\n\t\t\t\tunsetItem(0);\r\n\t\t\t}\r\n\r\n\t\t\tsetItem(item);\r\n\t\t}\r\n\r\n\t\tfillInput();\r\n\r\n\t}\r\n\r\n\tfunction chooseItem(item){\r\n\t\thideList();\r\n\r\n\t\tif(!item){\r\n\t\t\titem = currentItem;\r\n\t\t}\r\n\r\n\t\tif(item){\r\n\t\t\tinput.value = item.label;\r\n\t\t\tsuccess(item.value);\r\n\t\t}\r\n\r\n\t\tinitialDisplayValue = [item.value];\r\n\t}\r\n\r\n\r\n\tfunction chooseItems(silent){\r\n\t\tif(!silent){\r\n\t\t\thideList();\r\n\t\t}\r\n\r\n\t\tvar output = [];\r\n\r\n\t\tcurrentItems.forEach((item) => {\r\n\t\t\toutput.push(item.value);\r\n\t\t});\r\n\r\n\t\tinitialDisplayValue = output;\r\n\r\n\t\tsuccess(output);\r\n\t}\r\n\r\n\tfunction fillInput(){\r\n\t\tvar output = [];\r\n\r\n\t\tcurrentItems.forEach((item) => {\r\n\t\t\toutput.push(item.label);\r\n\t\t});\r\n\r\n\t\tinput.value = output.join(\", \");\r\n\r\n\t\tif(self.currentCell === false){\r\n\t\t\tchooseItems(true);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction unsetItems() {\r\n\r\n\t\tvar len = currentItems.length;\r\n\r\n\t\tfor(let i = 0; i < len; i++){\r\n\t\t\tunsetItem(0);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction cancelItem(){\r\n\t\thideList();\r\n\t\tcancel();\r\n\t}\r\n\r\n\tfunction showList(){\r\n\t\tcurrentItems = [];\r\n\r\n\t\tif(!listEl.parentNode){\r\n\t\t\tif(editorParams.values === true){\r\n\t\t\t\tparseItems(getUniqueColumnValues(), initialDisplayValue);\r\n\t\t\t}else if(typeof editorParams.values === \"string\"){\r\n\t\t\t\tparseItems(getUniqueColumnValues(editorParams.values), initialDisplayValue);\r\n\t\t\t}else{\r\n\t\t\t\tparseItems(editorParams.values || [], initialDisplayValue);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tvar offset = Helpers.elOffset(cellEl);\r\n\r\n\t\t\tlistEl.style.minWidth = cellEl.offsetWidth + \"px\";\r\n\r\n\t\t\tlistEl.style.top = (offset.top + cellEl.offsetHeight) + \"px\";\r\n\t\t\tlistEl.style.left = offset.left + \"px\";\r\n\r\n\r\n\t\t\tlistEl.addEventListener(\"mousedown\", function(e){\r\n\t\t\t\tblurable = false;\r\n\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tblurable = true;\r\n\t\t\t\t}, 10);\r\n\t\t\t});\r\n\r\n\t\t\tdocument.body.appendChild(listEl);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction hideList(){\r\n\t\tif(listEl.parentNode){\r\n\t\t\tlistEl.parentNode.removeChild(listEl);\r\n\t\t}\r\n\r\n\t\tremoveScrollListener();\r\n\t}\r\n\r\n\tfunction removeScrollListener() {\r\n\t\tself.table.rowManager.element.removeEventListener(\"scroll\", cancelItem);\r\n\t}\r\n\r\n\tfunction scrollTovalue(char){\r\n\r\n\t\tclearTimeout(searchWordTimeout);\r\n\r\n\t\tvar character = String.fromCharCode(event.keyCode).toLowerCase();\r\n\t\tsearchWord += character.toLowerCase();\r\n\r\n\t\tvar match = dataItems.find((item) => {\r\n\t\t\treturn typeof item.label !== \"undefined\" && item.label.toLowerCase().startsWith(searchWord);\r\n\t\t});\r\n\r\n\t\tif(match){\r\n\t\t\tsetCurrentItem(match, !multiselect);\r\n\t\t}\r\n\r\n\t\tsearchWordTimeout = setTimeout(() => {\r\n\t\t\tsearchWord = \"\";\r\n\t\t}, 800)\r\n\t}\r\n\r\n\t//style input\r\n\tinput.setAttribute(\"type\", \"text\");\r\n\r\n\tinput.style.padding = \"4px\";\r\n\tinput.style.width = \"100%\";\r\n\tinput.style.boxSizing = \"border-box\";\r\n\tinput.style.cursor = \"default\";\r\n\tinput.readOnly = (this.currentCell != false);\r\n\r\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n\t\tfor (let key in editorParams.elementAttributes){\r\n\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\tkey = key.slice(1);\r\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n\t\t\t}else{\r\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinput.value = typeof initialValue !== \"undefined\" || initialValue === null ? initialValue : \"\";\r\n\r\n\t// if(editorParams.values === true){\r\n\t// \tparseItems(getUniqueColumnValues(), initialValue);\r\n\t// }else if(typeof editorParams.values === \"string\"){\r\n\t// \tparseItems(getUniqueColumnValues(editorParams.values), initialValue);\r\n\t// }else{\r\n\t// \tparseItems(editorParams.values || [], initialValue);\r\n\t// }\r\n\r\n\tinput.addEventListener(\"search\", function(e){\r\n\t\tif(!input.value){\r\n\t\t\tunsetItems();\r\n\t\t\tchooseItems();\r\n\t\t}\r\n\t});\r\n\r\n\t//allow key based navigation\r\n\tinput.addEventListener(\"keydown\", function(e){\r\n\t\tvar index;\r\n\r\n\t\tswitch(e.keyCode){\r\n\t\t\tcase 38: //up arrow\r\n\t\t\tindex = dataItems.indexOf(currentItem);\r\n\r\n\t\t\tif(vertNav == \"editor\" || (vertNav == \"hybrid\" && index)){\r\n\t\t\t\te.stopImmediatePropagation();\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tif(index > 0){\r\n\t\t\t\t\tsetCurrentItem(dataItems[index - 1], !multiselect);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 40: //down arrow\r\n\t\t\tindex = dataItems.indexOf(currentItem);\r\n\r\n\t\t\tif(vertNav == \"editor\" || (vertNav == \"hybrid\" && index < dataItems.length - 1)){\r\n\t\t\t\te.stopImmediatePropagation();\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tif(index < dataItems.length - 1){\r\n\t\t\t\t\tif(index == -1){\r\n\t\t\t\t\t\tsetCurrentItem(dataItems[0], !multiselect);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tsetCurrentItem(dataItems[index + 1], !multiselect);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 37: //left arrow\r\n\t\t\tcase 39: //right arrow\r\n\t\t\te.stopImmediatePropagation();\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 13: //enter\r\n\t\t\t// chooseItem();\r\n\r\n\t\t\tif(multiselect){\r\n\t\t\t\ttoggleItem();\r\n\t\t\t}else{\r\n\t\t\t\tchooseItem();\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 27: //escape\r\n\t\t\tcancelItem();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 9: //tab\r\n\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\tif(self.currentCell === false){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\r\n\t\t\tif(e.keyCode >= 38 && e.keyCode <= 90){\r\n\t\t\t\tscrollTovalue(e.keyCode);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tinput.addEventListener(\"blur\", function(e){\r\n\t\tif(blurable){\r\n\t\t\tif(multiselect){\r\n\t\t\t\tchooseItems();\r\n\t\t\t}else{\r\n\t\t\t\tcancelItem();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tinput.addEventListener(\"focus\", function(e){\r\n\t\tif(!blockListShow){\r\n\t\t\tshowList();\r\n\t\t}\r\n\t});\r\n\r\n\t//style list element\r\n\tlistEl = document.createElement(\"div\");\r\n\tlistEl.classList.add(\"tabulator-edit-select-list\");\r\n\r\n\tonRendered(function(){\r\n\t\tinput.style.height = \"100%\";\r\n\t\tinput.focus({preventScroll: true});\r\n\t});\r\n\r\n\tsetTimeout(() => {\r\n\t\tthis.table.rowManager.element.addEventListener(\"scroll\", cancelItem);\r\n\t}, 10);\r\n\r\n\treturn input;\r\n};","import Helpers from '../../../../core/Helpers.js';\r\n\r\n//autocomplete\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n\tvar self = this,\r\n\tcellEl = cell.getElement(),\r\n\tinitialValue = cell.getValue(),\r\n\tvertNav = editorParams.verticalNavigation || \"editor\",\r\n\tinitialDisplayValue = typeof initialValue !== \"undefined\" || initialValue === null ? initialValue : (typeof editorParams.defaultValue !== \"undefined\" ? editorParams.defaultValue : \"\"),\r\n\tinput = document.createElement(\"input\"),\r\n\tlistEl = document.createElement(\"div\"),\r\n\tallItems = [],\r\n\tdisplayItems = [],\r\n\tvalues = [],\r\n\tcurrentItem = false,\r\n\tblurable = true,\r\n\tuniqueColumnValues = false;\r\n\r\n\t//style input\r\n\tinput.setAttribute(\"type\", \"search\");\r\n\r\n\tinput.style.padding = \"4px\";\r\n\tinput.style.width = \"100%\";\r\n\tinput.style.boxSizing = \"border-box\";\r\n\r\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n\t\tfor (let key in editorParams.elementAttributes){\r\n\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\tkey = key.slice(1);\r\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n\t\t\t}else{\r\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//style list element\r\n\tlistEl.classList.add(\"tabulator-edit-select-list\");\r\n\r\n\tlistEl.addEventListener(\"mousedown\", function(e){\r\n\t\tblurable = false;\r\n\r\n\t\tsetTimeout(function(){\r\n\t\t\tblurable = true;\r\n\t\t}, 10);\r\n\t});\r\n\r\n\r\n\tfunction genUniqueColumnValues(){\r\n\t\tif(editorParams.values === true){\r\n\t\t\tuniqueColumnValues = getUniqueColumnValues();\r\n\t\t}else if(typeof editorParams.values === \"string\"){\r\n\t\t\tuniqueColumnValues = getUniqueColumnValues(editorParams.values);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getUniqueColumnValues(field){\r\n\t\tvar output = {},\r\n\t\tdata = self.table.getData(),\r\n\t\tcolumn;\r\n\r\n\t\tif(field){\r\n\t\t\tcolumn = self.table.columnManager.getColumnByField(field);\r\n\t\t}else{\r\n\t\t\tcolumn = cell.getColumn()._getSelf();\r\n\t\t}\r\n\r\n\t\tif(column){\r\n\t\t\tdata.forEach(function(row){\r\n\t\t\t\tvar val = column.getFieldValue(row);\r\n\r\n\t\t\t\tif(val !== null && typeof val !== \"undefined\" && val !== \"\"){\r\n\t\t\t\t\toutput[val] = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(editorParams.sortValuesList){\r\n\t\t\t\tif(editorParams.sortValuesList == \"asc\"){\r\n\t\t\t\t\toutput = Object.keys(output).sort();\r\n\t\t\t\t}else{\r\n\t\t\t\t\toutput = Object.keys(output).sort().reverse();\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\toutput = Object.keys(output);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"unable to find matching column to create autocomplete lookup list:\", field);\r\n\t\t}\r\n\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tfunction filterList(term, intialLoad){\r\n\t\tvar matches = [],\r\n\t\tvalues, items, searchEl;\r\n\r\n\t\t//lookup base values list\r\n\t\tif(uniqueColumnValues){\r\n\t\t\tvalues = uniqueColumnValues;\r\n\t\t}else{\r\n\t\t\tvalues = editorParams.values || [];\r\n\t\t}\r\n\r\n\t\tif(editorParams.searchFunc){\r\n\t\t\tmatches = editorParams.searchFunc(term, values);\r\n\r\n\t\t\tif(matches instanceof Promise){\r\n\r\n\t\t\t\taddNotice(typeof editorParams.searchingPlaceholder !== \"undefined\" ? editorParams.searchingPlaceholder : \"Searching...\");\r\n\r\n\t\t\t\tmatches.then((result) => {\r\n\t\t\t\t\tfillListIfNotEmpty(parseItems(result), intialLoad);\r\n\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\tconsole.err(\"error in autocomplete search promise:\", err);\r\n\t\t\t\t});\r\n\r\n\t\t\t}else{\r\n\t\t\t\tfillListIfNotEmpty(parseItems(matches), intialLoad);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\titems = parseItems(values);\r\n\r\n\t\t\tif(term === \"\"){\r\n\t\t\t\tif(editorParams.showListOnEmpty){\r\n\t\t\t\t\tmatches = items;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\titems.forEach(function(item){\r\n\t\t\t\t\tif(item.value !== null || typeof item.value !== \"undefined\"){\r\n\t\t\t\t\t\tif(String(item.value).toLowerCase().indexOf(String(term).toLowerCase()) > -1 || String(item.title).toLowerCase().indexOf(String(term).toLowerCase()) > -1){\r\n\t\t\t\t\t\t\tmatches.push(item);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfillListIfNotEmpty(matches, intialLoad);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction addNotice(notice){\r\n\t\tvar searchEl = document.createElement(\"div\");\r\n\r\n\t\tclearList();\r\n\r\n\t\tif(notice !== false){\r\n\t\t\tsearchEl.classList.add(\"tabulator-edit-select-list-notice\");\r\n\t\t\tsearchEl.tabIndex = 0;\r\n\r\n\t\t\tif(notice instanceof Node){\r\n\t\t\t\tsearchEl.appendChild(notice);\r\n\t\t\t}else{\r\n\t\t\t\tsearchEl.innerHTML = notice;\r\n\t\t\t}\r\n\r\n\t\t\tlistEl.appendChild(searchEl);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction parseItems(inputValues){\r\n\t\tvar itemList = [];\r\n\r\n\t\tif(Array.isArray(inputValues)){\r\n\t\t\tinputValues.forEach(function(value){\r\n\r\n\t\t\t\tvar item = {};\r\n\r\n\t\t\t\tif(typeof value === \"object\"){\r\n\t\t\t\t\titem.title = editorParams.listItemFormatter ? editorParams.listItemFormatter(value.value, value.label) : value.label;\r\n\t\t\t\t\titem.value = value.value;\r\n\t\t\t\t}else{\r\n\t\t\t\t\titem.title = editorParams.listItemFormatter ? editorParams.listItemFormatter(value, value) : value;\r\n\t\t\t\t\titem.value = value;\r\n\t\t\t\t}\r\n\r\n\t\t\t\titemList.push(item);\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tfor(var key in inputValues){\r\n\t\t\t\tvar item = {\r\n\t\t\t\t\ttitle:editorParams.listItemFormatter ? editorParams.listItemFormatter(key, inputValues[key]) : inputValues[key],\r\n\t\t\t\t\tvalue:key,\r\n\t\t\t\t};\r\n\r\n\t\t\t\titemList.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn itemList;\r\n\t}\r\n\r\n\tfunction clearList(){\r\n\t\twhile(listEl.firstChild) listEl.removeChild(listEl.firstChild);\r\n\t}\r\n\r\n\tfunction fillListIfNotEmpty(items, intialLoad){\r\n\t\tif(items.length){\r\n\t\t\tfillList(items, intialLoad);\r\n\t\t}else{\r\n\t\t\tif(editorParams.emptyPlaceholder){\r\n\t\t\t\taddNotice(editorParams.emptyPlaceholder);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction fillList(items, intialLoad){\r\n\t\tvar current = false;\r\n\r\n\t\tclearList();\r\n\r\n\t\tdisplayItems = items;\r\n\r\n\t\tdisplayItems.forEach(function(item){\r\n\t\t\tvar el = item.element;\r\n\r\n\t\t\tif(!el){\r\n\t\t\t\tel = document.createElement(\"div\");\r\n\t\t\t\tel.classList.add(\"tabulator-edit-select-list-item\");\r\n\t\t\t\tel.tabIndex = 0;\r\n\t\t\t\tel.innerHTML = item.title;\r\n\r\n\t\t\t\tel.addEventListener(\"click\", function(e){\r\n\t\t\t\t\tsetCurrentItem(item);\r\n\t\t\t\t\tchooseItem();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tel.addEventListener(\"mousedown\", function(e){\r\n\t\t\t\t\tblurable = false;\r\n\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\tblurable = true;\r\n\t\t\t\t\t}, 10);\r\n\t\t\t\t});\r\n\r\n\t\t\t\titem.element = el;\r\n\r\n\t\t\t\tif(intialLoad && item.value == initialValue){\r\n\t\t\t\t\tinput.value = item.title;\r\n\t\t\t\t\titem.element.classList.add(\"active\");\r\n\t\t\t\t\tcurrent = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(item === currentItem){\r\n\t\t\t\t\titem.element.classList.add(\"active\");\r\n\t\t\t\t\tcurrent = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlistEl.appendChild(el);\r\n\t\t});\r\n\r\n\t\tif(!current){\r\n\t\t\tsetCurrentItem(false);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction chooseItem(){\r\n\t\thideList();\r\n\r\n\t\tif(currentItem){\r\n\t\t\tif(initialValue !== currentItem.value){\r\n\t\t\t\tinitialValue = currentItem.value;\r\n\t\t\t\tinput.value = currentItem.title;\r\n\t\t\t\tsuccess(currentItem.value);\r\n\t\t\t}else{\r\n\t\t\t\tcancel();\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(editorParams.freetext){\r\n\t\t\t\tinitialValue = input.value;\r\n\t\t\t\tsuccess(input.value);\r\n\t\t\t}else{\r\n\t\t\t\tif(editorParams.allowEmpty && input.value === \"\"){\r\n\t\t\t\t\tinitialValue = input.value;\r\n\t\t\t\t\tsuccess(input.value);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcancel();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction showList(){\r\n\t\tif(!listEl.parentNode){\r\n\r\n\t\t\tconsole.log(\"show\", initialDisplayValue)\r\n\t\t\twhile(listEl.firstChild) listEl.removeChild(listEl.firstChild);\r\n\r\n\t\t\tvar offset = Helpers.elOffset(cellEl);\r\n\r\n\t\t\tlistEl.style.minWidth = cellEl.offsetWidth + \"px\";\r\n\r\n\t\t\tlistEl.style.top = (offset.top + cellEl.offsetHeight) + \"px\";\r\n\t\t\tlistEl.style.left = offset.left + \"px\";\r\n\t\t\tdocument.body.appendChild(listEl);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction setCurrentItem(item, showInputValue){\r\n\t\tif(currentItem && currentItem.element){\r\n\t\t\tcurrentItem.element.classList.remove(\"active\");\r\n\t\t}\r\n\r\n\t\tcurrentItem = item;\r\n\r\n\t\tif(item && item.element){\r\n\t\t\titem.element.classList.add(\"active\");\r\n\t\t}\r\n\r\n\t\tif(item && item.element && item.element.scrollIntoView){\r\n\t\t\titem.element.scrollIntoView({behavior: 'smooth', block: 'nearest', inline: 'start'});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction hideList(){\r\n\t\tif(listEl.parentNode){\r\n\t\t\tlistEl.parentNode.removeChild(listEl);\r\n\t\t}\r\n\r\n\t\tremoveScrollListener();\r\n\t}\r\n\r\n\r\n\tfunction cancelItem(){\r\n\t\thideList();\r\n\t\tcancel();\r\n\t}\r\n\r\n\tfunction removeScrollListener() {\r\n\t\tself.table.rowManager.element.removeEventListener(\"scroll\", cancelItem);\r\n\t}\r\n\r\n\t//allow key based navigation\r\n\tinput.addEventListener(\"keydown\", function(e){\r\n\t\tvar index;\r\n\r\n\t\tswitch(e.keyCode){\r\n\t\t\tcase 38: //up arrow\r\n\t\t\tindex = displayItems.indexOf(currentItem);\r\n\r\n\t\t\tif(vertNav == \"editor\" || (vertNav == \"hybrid\" && index)){\r\n\t\t\t\te.stopImmediatePropagation();\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tif(index > 0){\r\n\t\t\t\t\tsetCurrentItem(displayItems[index - 1]);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tsetCurrentItem(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 40: //down arrow\r\n\r\n\t\t\tindex = displayItems.indexOf(currentItem);\r\n\r\n\t\t\tif(vertNav == \"editor\" || (vertNav == \"hybrid\" && index < displayItems.length - 1)){\r\n\r\n\t\t\t\te.stopImmediatePropagation();\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tif(index < displayItems.length - 1){\r\n\t\t\t\t\tif(index == -1){\r\n\t\t\t\t\t\tsetCurrentItem(displayItems[0]);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tsetCurrentItem(displayItems[index + 1]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\r\n\t\t\tcase 37: //left arrow\r\n\t\t\tcase 39: //right arrow\r\n\t\t\te.stopImmediatePropagation();\r\n\t\t\te.stopPropagation();\r\n\t\t\t// e.preventDefault();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 13: //enter\r\n\t\t\tchooseItem();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 27: //escape\r\n\t\t\tcancelItem();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 36: //home\r\n\t\t\tcase 35: //end\r\n\t\t\t//prevent table navigation while using input element\r\n\t\t\te.stopImmediatePropagation();\r\n\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n\r\n\tinput.addEventListener(\"keyup\", function(e){\r\n\r\n\t\tswitch(e.keyCode){\r\n\t\t\tcase 38: //up arrow\r\n\t\t\tcase 37: //left arrow\r\n\t\t\tcase 39: //up arrow\r\n\t\t\tcase 40: //right arrow\r\n\t\t\tcase 13: //enter\r\n\t\t\tcase 27: //escape\r\n\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\tfilterList(input.value);\r\n\t\t}\r\n\r\n\t});\r\n\r\n\tinput.addEventListener(\"search\", function(e){\r\n\t\tfilterList(input.value);\r\n\t});\r\n\r\n\tinput.addEventListener(\"blur\", function(e){\r\n\t\tif(blurable){\r\n\t\t\tchooseItem();\r\n\t\t}\r\n\t});\r\n\r\n\tinput.addEventListener(\"focus\", function(e){\r\n\t\tvar value = initialDisplayValue;\r\n\t\tgenUniqueColumnValues();\r\n\t\tshowList();\r\n\t\tinput.value = value;\r\n\t\tfilterList(value, true);\r\n\t});\r\n\r\n\r\n\tonRendered(function(){\r\n\t\tinput.style.height = \"100%\";\r\n\t\tinput.focus({preventScroll: true});\r\n\t});\r\n\r\n\tif(editorParams.mask){\r\n\t\tthis.table.modules.edit.maskInput(input, editorParams);\r\n\t}\r\n\r\n\tsetTimeout(() => {\r\n\t\tthis.table.rowManager.element.addEventListener(\"scroll\", cancelItem);\r\n\t}, 10);\r\n\r\n\tgenUniqueColumnValues();\r\n\tinput.value = initialDisplayValue;\r\n\tfilterList(initialDisplayValue, true);\r\n\r\n\treturn input;\r\n};","//star rating\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n\tvar self = this,\r\n\telement = cell.getElement(),\r\n\tvalue = cell.getValue(),\r\n\tmaxStars = element.getElementsByTagName(\"svg\").length || 5,\r\n\tsize = element.getElementsByTagName(\"svg\")[0] ? element.getElementsByTagName(\"svg\")[0].getAttribute(\"width\") : 14,\r\n\tstars = [],\r\n\tstarsHolder = document.createElement(\"div\"),\r\n\tstar = document.createElementNS('http://www.w3.org/2000/svg', \"svg\");\r\n\r\n\r\n\t//change star type\r\n\tfunction starChange(val){\r\n\t\tstars.forEach(function(star, i){\r\n\t\t\tif(i < val){\r\n\t\t\t\tif(self.table.browser == \"ie\"){\r\n\t\t\t\t\tstar.setAttribute(\"class\", \"tabulator-star-active\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tstar.classList.replace(\"tabulator-star-inactive\", \"tabulator-star-active\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstar.innerHTML = '<polygon fill=\"#488CE9\" stroke=\"#014AAE\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\r\n\t\t\t}else{\r\n\t\t\t\tif(self.table.browser == \"ie\"){\r\n\t\t\t\t\tstar.setAttribute(\"class\", \"tabulator-star-inactive\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tstar.classList.replace(\"tabulator-star-active\", \"tabulator-star-inactive\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstar.innerHTML = '<polygon fill=\"#010155\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//build stars\r\n\tfunction buildStar(i){\r\n\r\n\t\tvar starHolder =  document.createElement(\"span\");\r\n\t\tvar nextStar = star.cloneNode(true);\r\n\r\n\t\tstars.push(nextStar);\r\n\r\n\t\tstarHolder.addEventListener(\"mouseenter\", function(e){\r\n\t\t\te.stopPropagation();\r\n\t\t\te.stopImmediatePropagation();\r\n\t\t\tstarChange(i);\r\n\t\t});\r\n\r\n\t\tstarHolder.addEventListener(\"mousemove\", function(e){\r\n\t\t\te.stopPropagation();\r\n\t\t\te.stopImmediatePropagation();\r\n\t\t});\r\n\r\n\t\tstarHolder.addEventListener(\"click\", function(e){\r\n\t\t\te.stopPropagation();\r\n\t\t\te.stopImmediatePropagation();\r\n\t\t\tsuccess(i);\r\n\t\t\telement.blur();\r\n\t\t});\r\n\r\n\t\tstarHolder.appendChild(nextStar);\r\n\t\tstarsHolder.appendChild(starHolder);\r\n\r\n\t}\r\n\r\n\t//handle keyboard navigation value change\r\n\tfunction changeValue(val){\r\n\t\tvalue = val;\r\n\t\tstarChange(val);\r\n\t}\r\n\r\n\t//style cell\r\n\telement.style.whiteSpace = \"nowrap\";\r\n\telement.style.overflow = \"hidden\";\r\n\telement.style.textOverflow = \"ellipsis\";\r\n\r\n\t//style holding element\r\n\tstarsHolder.style.verticalAlign = \"middle\";\r\n\tstarsHolder.style.display = \"inline-block\";\r\n\tstarsHolder.style.padding = \"4px\";\r\n\r\n\t//style star\r\n\tstar.setAttribute(\"width\", size);\r\n\tstar.setAttribute(\"height\", size);\r\n\tstar.setAttribute(\"viewBox\", \"0 0 512 512\");\r\n\tstar.setAttribute(\"xml:space\", \"preserve\");\r\n\tstar.style.padding = \"0 1px\";\r\n\r\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n\t\tfor (let key in editorParams.elementAttributes){\r\n\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\tkey = key.slice(1);\r\n\t\t\t\tstarsHolder.setAttribute(key, starsHolder.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n\t\t\t}else{\r\n\t\t\t\tstarsHolder.setAttribute(key, editorParams.elementAttributes[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//create correct number of stars\r\n\tfor(var i=1;i<= maxStars;i++){\r\n\t\tbuildStar(i);\r\n\t}\r\n\r\n\t//ensure value does not exceed number of stars\r\n\tvalue = Math.min(parseInt(value), maxStars);\r\n\r\n\t// set initial styling of stars\r\n\tstarChange(value);\r\n\r\n\tstarsHolder.addEventListener(\"mousemove\", function(e){\r\n\t\tstarChange(0);\r\n\t});\r\n\r\n\tstarsHolder.addEventListener(\"click\", function(e){\r\n\t\tsuccess(0);\r\n\t});\r\n\r\n\telement.addEventListener(\"blur\", function(e){\r\n\t\tcancel();\r\n\t});\r\n\r\n\t//allow key based navigation\r\n\telement.addEventListener(\"keydown\", function(e){\r\n\t\tswitch(e.keyCode){\r\n\t\t\tcase 39: //right arrow\r\n\t\t\tchangeValue(value + 1);\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 37: //left arrow\r\n\t\t\tchangeValue(value - 1);\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 13: //enter\r\n\t\t\tsuccess(value);\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 27: //escape\r\n\t\t\tcancel();\r\n\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n\r\n\treturn starsHolder;\r\n};","//draggable progress bar\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n\tvar element = cell.getElement(),\r\n\tmax = typeof editorParams.max === \"undefined\" ? ( element.getElementsByTagName(\"div\")[0].getAttribute(\"max\") || 100) : editorParams.max,\r\n\tmin = typeof editorParams.min === \"undefined\" ? ( element.getElementsByTagName(\"div\")[0].getAttribute(\"min\") || 0) : editorParams.min,\r\n\tpercent = (max - min) / 100,\r\n\tvalue = cell.getValue() || 0,\r\n\thandle = document.createElement(\"div\"),\r\n\tbar = document.createElement(\"div\"),\r\n\tmouseDrag, mouseDragWidth;\r\n\r\n\t//set new value\r\n\tfunction updateValue(){\r\n\t\tvar style = window.getComputedStyle(element, null);\r\n\r\n\t\tvar calcVal = (percent * Math.round(bar.offsetWidth / ((element.clientWidth - parseInt(style.getPropertyValue(\"padding-left\")) - parseInt(style.getPropertyValue(\"padding-right\")))/100))) + min;\r\n\t\tsuccess(calcVal);\r\n\t\telement.setAttribute(\"aria-valuenow\", calcVal);\r\n\t\telement.setAttribute(\"aria-label\", value);\r\n\t}\r\n\r\n\t//style handle\r\n\thandle.style.position = \"absolute\";\r\n\thandle.style.right = \"0\";\r\n\thandle.style.top = \"0\";\r\n\thandle.style.bottom = \"0\";\r\n\thandle.style.width = \"5px\";\r\n\thandle.classList.add(\"tabulator-progress-handle\");\r\n\r\n\t//style bar\r\n\tbar.style.display = \"inline-block\";\r\n\tbar.style.position = \"relative\";\r\n\t// bar.style.top = \"8px\";\r\n\t// bar.style.bottom = \"8px\";\r\n\t// bar.style.left = \"4px\";\r\n\t// bar.style.marginRight = \"4px\";\r\n\tbar.style.height = \"100%\";\r\n\tbar.style.backgroundColor = \"#488CE9\";\r\n\tbar.style.maxWidth = \"100%\";\r\n\tbar.style.minWidth = \"0%\";\r\n\r\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n\t\tfor (let key in editorParams.elementAttributes){\r\n\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\tkey = key.slice(1);\r\n\t\t\t\tbar.setAttribute(key, bar.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n\t\t\t}else{\r\n\t\t\t\tbar.setAttribute(key, editorParams.elementAttributes[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//style cell\r\n\telement.style.padding = \"4px 4px\";\r\n\r\n\t//make sure value is in range\r\n\tvalue = Math.min(parseFloat(value), max);\r\n\tvalue = Math.max(parseFloat(value), min);\r\n\r\n\t//workout percentage\r\n\tvalue = Math.round((value - min) / percent);\r\n\t// bar.style.right = value + \"%\";\r\n\tbar.style.width = value + \"%\";\r\n\r\n\telement.setAttribute(\"aria-valuemin\", min);\r\n\telement.setAttribute(\"aria-valuemax\", max);\r\n\r\n\tbar.appendChild(handle);\r\n\r\n\thandle.addEventListener(\"mousedown\", function(e){\r\n\t\tmouseDrag = e.screenX;\r\n\t\tmouseDragWidth = bar.offsetWidth;\r\n\t});\r\n\r\n\thandle.addEventListener(\"mouseover\", function(){\r\n\t\thandle.style.cursor = \"ew-resize\";\r\n\t});\r\n\r\n\telement.addEventListener(\"mousemove\", function(e){\r\n\t\tif(mouseDrag){\r\n\t\t\tbar.style.width = (mouseDragWidth + e.screenX - mouseDrag) + \"px\";\r\n\t\t}\r\n\t});\r\n\r\n\telement.addEventListener(\"mouseup\", function(e){\r\n\t\tif(mouseDrag){\r\n\t\t\te.stopPropagation();\r\n\t\t\te.stopImmediatePropagation();\r\n\r\n\t\t\tmouseDrag = false;\r\n\t\t\tmouseDragWidth = false;\r\n\r\n\t\t\tupdateValue();\r\n\t\t}\r\n\t});\r\n\r\n\t//allow key based navigation\r\n\telement.addEventListener(\"keydown\", function(e){\r\n\t\tswitch(e.keyCode){\r\n\t\t\tcase 39: //right arrow\r\n\t\t\te.preventDefault();\r\n\t\t\tbar.style.width = (bar.clientWidth + element.clientWidth/100) + \"px\";\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 37: //left arrow\r\n\t\t\te.preventDefault();\r\n\t\t\tbar.style.width = (bar.clientWidth - element.clientWidth/100) + \"px\";\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 9: //tab\r\n\t\t\tcase 13: //enter\r\n\t\t\tupdateValue();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 27: //escape\r\n\t\t\tcancel();\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\t});\r\n\r\n\telement.addEventListener(\"blur\", function(){\r\n\t\tcancel();\r\n\t});\r\n\r\n\treturn bar;\r\n};","//checkbox\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n\tvar value = cell.getValue(),\r\n\tinput = document.createElement(\"input\"),\r\n\ttristate = editorParams.tristate,\r\n\tindetermValue = typeof editorParams.indeterminateValue === \"undefined\" ? null : editorParams.indeterminateValue,\r\n\tindetermState = false;\r\n\r\n\tinput.setAttribute(\"type\", \"checkbox\");\r\n\tinput.style.marginTop = \"5px\";\r\n\tinput.style.boxSizing = \"border-box\";\r\n\r\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n\t\tfor (let key in editorParams.elementAttributes){\r\n\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\tkey = key.slice(1);\r\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n\t\t\t}else{\r\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinput.value = value;\r\n\r\n\tif(tristate && (typeof value === \"undefined\" || value === indetermValue || value === \"\")){\r\n\t\tindetermState = true;\r\n\t\tinput.indeterminate = true;\r\n\t}\r\n\r\n\tif(this.table.browser != \"firefox\"){ //prevent blur issue on mac firefox\r\n\t\tonRendered(function(){\r\n\t\t\tinput.focus({preventScroll: true});\r\n\t\t});\r\n\t}\r\n\r\n\tinput.checked = value === true || value === \"true\" || value === \"True\" || value === 1;\r\n\r\n\tonRendered(function(){\r\n\t\tinput.focus();\r\n\t});\r\n\r\n\tfunction setValue(blur){\r\n\t\tif(tristate){\r\n\t\t\tif(!blur){\r\n\t\t\t\tif(input.checked && !indetermState){\r\n\t\t\t\t\tinput.checked = false;\r\n\t\t\t\t\tinput.indeterminate = true;\r\n\t\t\t\t\tindetermState = true;\r\n\t\t\t\t\treturn indetermValue;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tindetermState = false;\r\n\t\t\t\t\treturn input.checked;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(indetermState){\r\n\t\t\t\t\treturn indetermValue;\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn input.checked;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\treturn input.checked;\r\n\t\t}\r\n\t}\r\n\r\n\t//submit new value on blur\r\n\tinput.addEventListener(\"change\", function(e){\r\n\t\tsuccess(setValue());\r\n\t});\r\n\r\n\tinput.addEventListener(\"blur\", function(e){\r\n\t\tsuccess(setValue(true));\r\n\t});\r\n\r\n\t//submit new value on enter\r\n\tinput.addEventListener(\"keydown\", function(e){\r\n\t\tif(e.keyCode == 13){\r\n\t\t\tsuccess(setValue());\r\n\t\t}\r\n\t\tif(e.keyCode == 27){\r\n\t\t\tcancel();\r\n\t\t}\r\n\t});\r\n\r\n\treturn input;\r\n};","import input from './editors/input.js';\r\nimport textarea from './editors/textarea.js';\r\nimport number from './editors/number.js';\r\nimport range from './editors/range.js';\r\nimport select from './editors/select.js';\r\nimport autocomplete from './editors/autocomplete.js';\r\nimport star from './editors/star.js';\r\nimport progress from './editors/progress.js';\r\nimport tickCross from './editors/tickCross.js';\r\n\r\nexport default {\r\n\tinput:input,\r\n\ttextarea:textarea,\r\n    number:number,\r\n    range:range,\r\n\tselect:select,\r\n\tautocomplete:autocomplete,\r\n\tstar:star,\r\n\tprogress:progress,\r\n\ttickCross:tickCross,\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport defaultEditors from './defaults/editors.js';\r\n\r\nclass Edit extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.currentCell = false; //hold currently editing cell\r\n\t\tthis.mouseClick = false; //hold mousedown state to prevent click binding being overriden by editor opening\r\n\t\tthis.recursionBlock = false; //prevent focus recursion\r\n\t\tthis.invalidEdit = false;\r\n\t\tthis.editedCells = [];\r\n\t}\r\n\r\n\t//initialize column editor\r\n\tinitializeColumn(column){\r\n\t\tvar self = this,\r\n\t\tconfig = {\r\n\t\t\teditor:false,\r\n\t\t\tblocked:false,\r\n\t\t\tcheck:column.definition.editable,\r\n\t\t\tparams:column.definition.editorParams || {}\r\n\t\t};\r\n\r\n\t\t//set column editor\r\n\t\tswitch(typeof column.definition.editor){\r\n\t\t\tcase \"string\":\r\n\t\t\t\tif(Edit.editors[column.definition.editor]){\r\n\t\t\t\t\tconfig.editor = Edit.editors[column.definition.editor];\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Editor Error - No such editor found: \", column.definition.editor);\r\n\t\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\t\tconfig.editor = column.definition.editor;\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"boolean\":\r\n\t\t\t\tif(column.definition.editor === true){\r\n\t\t\t\t\tif(typeof column.definition.formatter !== \"function\"){\r\n\t\t\t\t\t\tif(Edit.editors[column.definition.formatter]){\r\n\t\t\t\t\t\t\tconfig.editor = Edit.editors[column.definition.formatter];\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tconfig.editor = Edit.editors[\"input\"];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tconsole.warn(\"Editor Error - Cannot auto lookup editor for a custom formatter: \", column.definition.formatter);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tif(config.editor){\r\n\t\t\tcolumn.modules.edit = config;\r\n\t\t}\r\n\t}\r\n\r\n\tgetCurrentCell(){\r\n\t\treturn this.currentCell ? this.currentCell.getComponent() : false;\r\n\t}\r\n\r\n\tclearEditor(cancel){\r\n\t\tvar cell = this.currentCell,\r\n\t\tcellEl;\r\n\r\n\t\tthis.invalidEdit = false;\r\n\r\n\t\tif(cell){\r\n\t\t\tthis.currentCell = false;\r\n\r\n\t\t\tcellEl = cell.getElement();\r\n\r\n\t\t\tif(cancel){\r\n\t\t\t\tcell.validate();\r\n\t\t\t}else{\r\n\t\t\t\tcellEl.classList.remove(\"tabulator-validation-fail\");\r\n\t\t\t}\r\n\r\n\t\t\tcellEl.classList.remove(\"tabulator-editing\");\r\n\t\t\twhile(cellEl.firstChild) cellEl.removeChild(cellEl.firstChild);\r\n\r\n\t\t\tcell.row.getElement().classList.remove(\"tabulator-row-editing\");\r\n\t\t}\r\n\t}\r\n\r\n\tcancelEdit(){\r\n\t\tif(this.currentCell){\r\n\t\t\tvar cell = this.currentCell;\r\n\t\t\tvar component = this.currentCell.getComponent();\r\n\r\n\t\t\tthis.clearEditor(true);\r\n\t\t\tcell.setValueActual(cell.getValue());\r\n\t\t\tcell.cellRendered();\r\n\r\n\t\t\tif(cell.column.definition.editor == \"textarea\" || cell.column.definition.variableHeight){\r\n\t\t\t\tcell.row.normalizeHeight(true);\r\n\t\t\t}\r\n\r\n\t\t\tif(cell.column.cellEvents.cellEditCancelled){\r\n\t\t\t\tcell.column.cellEvents.cellEditCancelled.call(this.table, component);\r\n\t\t\t}\r\n\r\n\t\t\tthis.table.options.cellEditCancelled.call(this.table, component);\r\n\t\t}\r\n\t}\r\n\r\n\t//return a formatted value for a cell\r\n\tbindEditor(cell){\r\n\t\tvar self = this,\r\n\t\telement = cell.getElement(true);\r\n\r\n\t\telement.setAttribute(\"tabindex\", 0);\r\n\r\n\t\telement.addEventListener(\"click\", function(e){\r\n\t\t\tif(!element.classList.contains(\"tabulator-editing\")){\r\n\t\t\t\telement.focus({preventScroll: true});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\telement.addEventListener(\"mousedown\", function(e){\r\n\t\t\tif (e.button === 2) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}else{\r\n\t\t\t\tself.mouseClick = true;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\telement.addEventListener(\"focus\", function(e){\r\n\t\t\tif(!self.recursionBlock){\r\n\t\t\t\tself.edit(cell, e, false);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tfocusCellNoEvent(cell, block){\r\n\t\tthis.recursionBlock = true;\r\n\r\n\t\tif(!(block && this.table.browser === \"ie\")){\r\n\t\t\tcell.getElement().focus({preventScroll: true});\r\n\t\t}\r\n\r\n\t\tthis.recursionBlock = false;\r\n\t}\r\n\r\n\teditCell(cell, forceEdit){\r\n\t\tthis.focusCellNoEvent(cell);\r\n\t\tthis.edit(cell, false, forceEdit);\r\n\t}\r\n\r\n\tfocusScrollAdjust(cell){\r\n\t\tif(this.table.rowManager.getRenderMode() == \"virtual\"){\r\n\t\t\tvar topEdge = this.table.rowManager.element.scrollTop,\r\n\t\t\tbottomEdge = this.table.rowManager.element.clientHeight + this.table.rowManager.element.scrollTop,\r\n\t\t\trowEl = cell.row.getElement(),\r\n\t\t\toffset = rowEl.offsetTop;\r\n\r\n\t\t\tif(rowEl.offsetTop < topEdge){\r\n\t\t\t\tthis.table.rowManager.element.scrollTop -= (topEdge - rowEl.offsetTop);\r\n\t\t\t}else{\r\n\t\t\t\tif(rowEl.offsetTop + rowEl.offsetHeight  > bottomEdge){\r\n\t\t\t\t\tthis.table.rowManager.element.scrollTop += (rowEl.offsetTop + rowEl.offsetHeight - bottomEdge);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar leftEdge = this.table.rowManager.element.scrollLeft,\r\n\t\t\trightEdge = this.table.rowManager.element.clientWidth + this.table.rowManager.element.scrollLeft,\r\n\t\t\tcellEl = cell.getElement(),\r\n\t\t\toffset = cellEl.offsetLeft;\r\n\r\n\t\t\tif(this.table.modExists(\"frozenColumns\")){\r\n\t\t\t\tleftEdge += parseInt(this.table.modules.frozenColumns.leftMargin);\r\n\t\t\t\trightEdge -= parseInt(this.table.modules.frozenColumns.rightMargin);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.options.virtualDomHoz){\r\n\t\t\t\tleftEdge -= parseInt(this.table.vdomHoz.vDomPadLeft);\r\n\t\t\t\trightEdge -= parseInt(this.table.vdomHoz.vDomPadLeft);\r\n\t\t\t}\r\n\r\n\t\t\tif(cellEl.offsetLeft < leftEdge){\r\n\r\n\t\t\t\tthis.table.rowManager.element.scrollLeft -= (leftEdge - cellEl.offsetLeft);\r\n\t\t\t}else{\r\n\t\t\t\tif(cellEl.offsetLeft + cellEl.offsetWidth  > rightEdge){\r\n\t\t\t\t\tthis.table.rowManager.element.scrollLeft += (cellEl.offsetLeft + cellEl.offsetWidth - rightEdge);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tedit(cell, e, forceEdit){\r\n\t\tvar self = this,\r\n\t\tallowEdit = true,\r\n\t\trendered = function(){},\r\n\t\telement = cell.getElement(),\r\n\t\tcellEditor, component, params;\r\n\r\n\t\t//prevent editing if another cell is refusing to leave focus (eg. validation fail)\r\n\t\tif(this.currentCell){\r\n\t\t\tif(!this.invalidEdit){\r\n\t\t\t\tthis.cancelEdit();\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//handle successfull value change\r\n\t\tfunction success(value){\r\n\t\t\tif(self.currentCell === cell){\r\n\t\t\t\tvar valid = true;\r\n\r\n\t\t\t\tif(cell.column.modules.validate && self.table.modExists(\"validate\") && self.table.options.validationMode != \"manual\"){\r\n\t\t\t\t\tvalid = self.table.modules.validate.validate(cell.column.modules.validate, cell, value);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(valid === true || self.table.options.validationMode === \"highlight\"){\r\n\t\t\t\t\tself.clearEditor();\r\n\r\n\r\n\t\t\t\t\tif(!cell.modules.edit){\r\n\t\t\t\t\t\tcell.modules.edit = {};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcell.modules.edit.edited = true;\r\n\r\n\t\t\t\t\tif(self.editedCells.indexOf(cell) == -1){\r\n\t\t\t\t\t\tself.editedCells.push(cell);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcell.setValue(value, true);\r\n\r\n\t\t\t\t\tif(self.table.options.dataTree && self.table.modExists(\"dataTree\")){\r\n\t\t\t\t\t\tself.table.modules.dataTree.checkForRestyle(cell);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(valid !== true){\r\n\t\t\t\t\t\telement.classList.add(\"tabulator-validation-fail\");\r\n\t\t\t\t\t\tself.table.options.validationFailed.call(self.table, cell.getComponent(), value, valid);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tself.invalidEdit = true;\r\n\t\t\t\t\telement.classList.add(\"tabulator-validation-fail\");\r\n\t\t\t\t\tself.focusCellNoEvent(cell, true);\r\n\t\t\t\t\trendered();\r\n\t\t\t\t\tself.table.options.validationFailed.call(self.table, cell.getComponent(), value, valid);\r\n\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\t// console.warn(\"Edit Success Error - cannot call success on a cell that is no longer being edited\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//handle aborted edit\r\n\t\tfunction cancel(){\r\n\t\t\tif(self.currentCell === cell){\r\n\t\t\t\tself.cancelEdit();\r\n\r\n\t\t\t\tif(self.table.options.dataTree && self.table.modExists(\"dataTree\")){\r\n\t\t\t\t\tself.table.modules.dataTree.checkForRestyle(cell);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\t// console.warn(\"Edit Success Error - cannot call cancel on a cell that is no longer being edited\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onRendered(callback){\r\n\t\t\trendered = callback;\r\n\t\t}\r\n\r\n\t\tif(!cell.column.modules.edit.blocked){\r\n\t\t\tif(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t}\r\n\r\n\t\t\tswitch(typeof cell.column.modules.edit.check){\r\n\t\t\t\tcase \"function\":\r\n\t\t\t\tallowEdit = cell.column.modules.edit.check(cell.getComponent());\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"boolean\":\r\n\t\t\t\tallowEdit = cell.column.modules.edit.check;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tif(allowEdit || forceEdit){\r\n\r\n\t\t\t\tself.cancelEdit();\r\n\r\n\t\t\t\tself.currentCell = cell;\r\n\r\n\t\t\t\tthis.focusScrollAdjust(cell);\r\n\r\n\t\t\t\tcomponent = cell.getComponent();\r\n\r\n\t\t\t\tif(this.mouseClick){\r\n\t\t\t\t\tthis.mouseClick = false;\r\n\r\n\t\t\t\t\tif(cell.column.cellEvents.cellClick){\r\n\t\t\t\t\t\tcell.column.cellEvents.cellClick.call(this.table, e, component);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(cell.column.cellEvents.cellEditing){\r\n\t\t\t\t\tcell.column.cellEvents.cellEditing.call(this.table, component);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tself.table.options.cellEditing.call(this.table, component);\r\n\r\n\t\t\t\tparams = typeof cell.column.modules.edit.params === \"function\" ? cell.column.modules.edit.params(component) : cell.column.modules.edit.params;\r\n\r\n\t\t\t\tcellEditor = cell.column.modules.edit.editor.call(self, component, onRendered, success, cancel, params);\r\n\r\n\t\t\t\t//if editor returned, add to DOM, if false, abort edit\r\n\t\t\t\tif(cellEditor !== false){\r\n\r\n\t\t\t\t\tif(cellEditor instanceof Node){\r\n\t\t\t\t\t\telement.classList.add(\"tabulator-editing\");\r\n\t\t\t\t\t\tcell.row.getElement().classList.add(\"tabulator-row-editing\");\r\n\t\t\t\t\t\twhile(element.firstChild) element.removeChild(element.firstChild);\r\n\t\t\t\t\t\telement.appendChild(cellEditor);\r\n\r\n\t\t\t\t\t\t//trigger onRendered Callback\r\n\t\t\t\t\t\trendered();\r\n\r\n\t\t\t\t\t\t//prevent editing from triggering rowClick event\r\n\t\t\t\t\t\tvar children = element.children;\r\n\r\n\t\t\t\t\t\tfor (var i = 0; i < children.length; i++) {\r\n\t\t\t\t\t\t\tchildren[i].addEventListener(\"click\", function(e){\r\n\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tconsole.warn(\"Edit Error - Editor should return an instance of Node, the editor returned:\", cellEditor);\r\n\t\t\t\t\t\telement.blur();\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}else{\r\n\t\t\t\t\telement.blur();\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn true;\r\n\t\t\t}else{\r\n\t\t\t\tthis.mouseClick = false;\r\n\t\t\t\telement.blur();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.mouseClick = false;\r\n\t\t\telement.blur();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tmaskInput(el, options){\r\n\t\tvar mask = options.mask,\r\n\t\tmaskLetter = typeof options.maskLetterChar !== \"undefined\" ? options.maskLetterChar : \"A\",\r\n\t\tmaskNumber = typeof options.maskNumberChar !== \"undefined\" ? options.maskNumberChar : \"9\",\r\n\t\tmaskWildcard = typeof options.maskWildcardChar !== \"undefined\" ? options.maskWildcardChar : \"*\",\r\n\t\tsuccess = false;\r\n\r\n\t\tfunction fillSymbols(index){\r\n\t\t\tvar symbol = mask[index];\r\n\t\t\tif(typeof symbol !== \"undefined\" && symbol !== maskWildcard && symbol !== maskLetter && symbol !== maskNumber){\r\n\t\t\t\tel.value = el.value + \"\" + symbol;\r\n\t\t\t\tfillSymbols(index+1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tel.addEventListener(\"keydown\", (e) => {\r\n\t\t\tvar index = el.value.length,\r\n\t\t\tchar = e.key;\r\n\r\n\t\t\tif(e.keyCode > 46){\r\n\t\t\t\tif(index >= mask.length){\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\tsuccess = false;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tswitch(mask[index]){\r\n\t\t\t\t\t\tcase maskLetter:\r\n\t\t\t\t\t\tif(char.toUpperCase() == char.toLowerCase()){\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\tsuccess = false;\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase maskNumber:\r\n\t\t\t\t\t\tif(isNaN(char)){\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\tsuccess = false;\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase maskWildcard:\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tif(char !== mask[index]){\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\tsuccess = false;\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsuccess = true;\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\t\t});\r\n\r\n\t\tel.addEventListener(\"keyup\", (e) => {\r\n\t\t\tif(e.keyCode > 46){\r\n\t\t\t\tif(options.maskAutoFill){\r\n\t\t\t\t\tfillSymbols(el.value.length);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\t\tif(!el.placeholder){\r\n\t\t\tel.placeholder = mask;\r\n\t\t}\r\n\r\n\t\tif(options.maskAutoFill){\r\n\t\t\tfillSymbols(el.value.length);\r\n\t\t}\r\n\t}\r\n\r\n\tgetEditedCells(){\r\n\t\tvar output = [];\r\n\r\n\t\tthis.editedCells.forEach((cell) => {\r\n\t\t\toutput.push(cell.getComponent());\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tclearEdited(cell){\r\n\t\tvar editIndex;\r\n\r\n\t\tif(cell.modules.edit && cell.modules.edit.edited){\r\n\t\t\tcell.modules.edit.edited = false;\r\n\r\n\t\t\tif(cell.modules.validate){\r\n\t\t\t\tcell.modules.validate.invalid = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\teditIndex = this.editedCells.indexOf(cell);\r\n\r\n\t\tif(editIndex > -1){\r\n\t\t\tthis.editedCells.splice(editIndex, 1);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nEdit.moduleName = \"edit\";\r\n\r\n//load defaults\r\nEdit.editors = defaultEditors;\r\n\r\n\r\nexport default Edit;","class ExportRow{\r\n\tconstructor(type, columns, component, indent){\r\n\t\tthis.type = type;\r\n\t\tthis.columns = columns;\r\n\t\tthis.component = component || false;\r\n\t\tthis.indent = indent || 0;\r\n\t}\r\n}\r\n\r\nexport default ExportRow;","class ExportColumn{\r\n\tconstructor(value, component, width, height, depth){\r\n\t\tthis.value = value;\r\n\t\tthis.component = component || false;\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\t\tthis.depth = depth;\r\n\t}\r\n}\r\n\r\nexport default ExportColumn;","import Module from '../../core/Module.js';\r\n\r\nimport ExportRow from './ExportRow.js';\r\nimport ExportColumn from './ExportColumn.js';\r\n\r\nclass Export extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.config = {};\r\n\t\tthis.cloneTableStyle = true;\r\n\t\tthis.colVisProp = \"\";\r\n\t}\r\n\r\n\tgenerateExportList(config, style, range, colVisProp){\r\n\t\tthis.cloneTableStyle = style;\r\n\t\tthis.config = config || {};\r\n\t\tthis.colVisProp = colVisProp;\r\n\r\n\t\tvar headers = this.config.columnHeaders !== false ? this.headersToExportRows(this.generateColumnGroupHeaders()) : [];\r\n\t\tvar body = this.bodyToExportRows(this.rowLookup(range));\r\n\r\n\t\treturn headers.concat(body);\r\n\t}\r\n\r\n\tgenereateTable(config, style, range, colVisProp){\r\n\t\tvar list = this.generateExportList(config, style, range, colVisProp);\r\n\r\n\t\treturn this.genereateTableElement(list);\r\n\t}\r\n\r\n\trowLookup(range){\r\n\t\tvar rows = [];\r\n\r\n\t\tif(typeof range == \"function\"){\r\n\t\t\trange.call(this.table).forEach((row) =>{\r\n\t\t\t\trow = this.table.rowManager.findRow(row);\r\n\r\n\t\t\t\tif(row){\r\n\t\t\t\t\trows.push(row);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tswitch(range){\r\n\t\t\t\tcase true:\r\n\t\t\t\tcase \"visible\":\r\n\t\t\t\trows = this.table.rowManager.getVisibleRows(true);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"all\":\r\n\t\t\t\trows = this.table.rowManager.rows;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"selected\":\r\n\t\t\t\trows = this.table.modules.selectRow.selectedRows;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"active\":\r\n\t\t\t\tdefault:\r\n\t\t\t\tif(this.table.options.pagination){\r\n\t\t\t\t\trows = this.table.rowManager.getDisplayRows(this.table.rowManager.displayRows.length - 2);\r\n\t\t\t\t}else{\r\n\t\t\t\t\trows = this.table.rowManager.getDisplayRows();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn Object.assign([], rows);\r\n\t}\r\n\r\n\tgenerateColumnGroupHeaders(){\r\n\t\tvar output = [];\r\n\r\n\t\tvar columns = this.config.columnGroups !== false ? this.table.columnManager.columns : this.table.columnManager.columnsByIndex;\r\n\r\n\t\tcolumns.forEach((column) => {\r\n\t\t\tvar colData = this.processColumnGroup(column);\r\n\r\n\t\t\tif(colData){\r\n\t\t\t\toutput.push(colData);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tprocessColumnGroup(column){\r\n\t\tvar subGroups = column.columns,\r\n\t\tmaxDepth = 0,\r\n\t\ttitle = column.definition[\"title\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))] || column.definition.title;\r\n\r\n\t\tvar groupData = {\r\n\t\t\ttitle:title,\r\n\t\t\tcolumn:column,\r\n\t\t\tdepth:1,\r\n\t\t};\r\n\r\n\t\tif(subGroups.length){\r\n\t\t\tgroupData.subGroups = [];\r\n\t\t\tgroupData.width = 0;\r\n\r\n\t\t\tsubGroups.forEach((subGroup) => {\r\n\t\t\t\tvar subGroupData = this.processColumnGroup(subGroup);\r\n\r\n\t\t\t\tif(subGroupData){\r\n\t\t\t\t\tgroupData.width += subGroupData.width;\r\n\t\t\t\t\tgroupData.subGroups.push(subGroupData);\r\n\r\n\t\t\t\t\tif(subGroupData.depth > maxDepth){\r\n\t\t\t\t\t\tmaxDepth = subGroupData.depth;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tgroupData.depth += maxDepth;\r\n\r\n\t\t\tif(!groupData.width){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(this.columnVisCheck(column)){\r\n\t\t\t\tgroupData.width = 1;\r\n\t\t\t}else{\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn groupData;\r\n\t}\r\n\r\n\tcolumnVisCheck(column){\r\n\t\treturn column.definition[this.colVisProp] !== false && (column.visible || (!column.visible && column.definition[this.colVisProp]));\r\n\t}\r\n\r\n\theadersToExportRows(columns){\r\n\t\tvar headers = [],\r\n\t\theaderDepth = 0,\r\n\t\texportRows = [];\r\n\r\n\t\tfunction parseColumnGroup(column, level){\r\n\r\n\t\t\tvar depth = headerDepth - level;\r\n\r\n\t\t\tif(typeof headers[level] === \"undefined\"){\r\n\t\t\t\theaders[level] = [];\r\n\t\t\t}\r\n\r\n\t\t\tcolumn.height = column.subGroups ? 1 : (depth - column.depth) + 1;\r\n\r\n\t\t\theaders[level].push(column);\r\n\r\n\t\t\tif(column.height > 1){\r\n\t\t\t\tfor(let i = 1; i < column.height; i ++){\r\n\r\n\t\t\t\t\tif(typeof headers[level + i] === \"undefined\"){\r\n\t\t\t\t\t\theaders[level + i] = [];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\theaders[level + i].push(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(column.width > 1){\r\n\t\t\t\tfor(let i = 1; i < column.width; i ++){\r\n\t\t\t\t\theaders[level].push(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(column.subGroups){\r\n\t\t\t\tcolumn.subGroups.forEach(function(subGroup){\r\n\t\t\t\t\tparseColumnGroup(subGroup, level+1);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//calculate maximum header debth\r\n\t\tcolumns.forEach(function(column){\r\n\t\t\tif(column.depth > headerDepth){\r\n\t\t\t\theaderDepth = column.depth;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tcolumns.forEach(function(column){\r\n\t\t\tparseColumnGroup(column,0);\r\n\t\t});\r\n\r\n\t\theaders.forEach((header) => {\r\n\t\t\tvar columns = [];\r\n\r\n\t\t\theader.forEach((col) => {\r\n\t\t\t\tif(col){\r\n\t\t\t\t\tcolumns.push(new ExportColumn(col.title, col.column.getComponent(), col.width, col.height, col.depth));\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcolumns.push(null);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\texportRows.push(new ExportRow(\"header\", columns));\r\n\t\t});\r\n\r\n\t\treturn exportRows;\r\n\t}\r\n\r\n\tbodyToExportRows(rows){\r\n\r\n\t\tvar columns = [];\r\n\t\tvar exportRows = [];\r\n\r\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\r\n\t\t\tif (this.columnVisCheck(column)) {\r\n\t\t\t\tcolumns.push(column.getComponent());\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(this.config.columnCalcs !== false && this.table.modExists(\"columnCalcs\")){\r\n\t\t\tif(this.table.modules.columnCalcs.topInitialized){\r\n\t\t\t\trows.unshift(this.table.modules.columnCalcs.topRow);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.modules.columnCalcs.botInitialized){\r\n\t\t\t\trows.push(this.table.modules.columnCalcs.botRow);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\trows = rows.filter((row) => {\r\n\t\t\tswitch(row.type){\r\n\t\t\t\tcase \"group\":\r\n\t\t\t\treturn this.config.rowGroups !== false;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"calc\":\r\n\t\t\t\treturn this.config.columnCalcs !== false;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"row\":\r\n\t\t\t\treturn !(this.table.options.dataTree && this.config.dataTree === false && row.modules.dataTree.parent);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\trows.forEach((row, i) => {\r\n\t\t\tvar rowData = row.getData(this.colVisProp);\r\n\t\t\tvar exportCols = [];\r\n\t\t\tvar indent = 0;\r\n\r\n\t\t\tswitch(row.type){\r\n\t\t\t\tcase \"group\":\r\n\t\t\t\tindent = row.level;\r\n\t\t\t\texportCols.push(new ExportColumn(row.key, row.getComponent(), columns.length, 1));\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"calc\" :\r\n\t\t\t\tcase \"row\" :\r\n\t\t\t\tcolumns.forEach((col) => {\r\n\t\t\t\t\texportCols.push(new ExportColumn(col._column.getFieldValue(rowData), col, 1, 1));\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(this.table.options.dataTree && this.config.dataTree !== false){\r\n\t\t\t\t\tindent = row.modules.dataTree.index;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\texportRows.push(new ExportRow(row.type, exportCols, row.getComponent(), indent));\r\n\t\t});\r\n\r\n\t\treturn exportRows;\r\n\t}\r\n\r\n\tgenereateTableElement(list){\r\n\t\tvar table = document.createElement(\"table\"),\r\n\t\theaderEl = document.createElement(\"thead\"),\r\n\t\tbodyEl = document.createElement(\"tbody\"),\r\n\t\tstyles = this.lookupTableStyles(),\r\n\t\trowFormatter = this.table.options[\"rowFormatter\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))],\r\n\t\tsetup = {};\r\n\r\n\t\tsetup.rowFormatter = rowFormatter !== null ? rowFormatter : this.table.options.rowFormatter;\r\n\r\n\t\tif(this.table.options.dataTree &&this.config.dataTree !== false && this.table.modExists(\"columnCalcs\")){\r\n\t\t\tsetup.treeElementField = this.table.modules.dataTree.elementField;\r\n\t\t}\r\n\r\n\t\t//assign group header formatter\r\n\t\tsetup.groupHeader = this.table.options[\"groupHeader\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))];\r\n\r\n\t\tif(setup.groupHeader && !Array.isArray(setup.groupHeader)){\r\n\t\t\tsetup.groupHeader = [setup.groupHeader];\r\n\t\t}\r\n\r\n\t\ttable.classList.add(\"tabulator-print-table\");\r\n\r\n\t\tthis.mapElementStyles(this.table.columnManager.getHeadersElement(), headerEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\r\n\r\n\r\n\t\tif(list.length > 1000){\r\n\t\t\tconsole.warn(\"It may take a long time to render an HTML table with more than 1000 rows\");\r\n\t\t}\r\n\r\n\t\tlist.forEach((row, i) => {\r\n\t\t\tswitch(row.type){\r\n\t\t\t\tcase \"header\":\r\n\t\t\t\theaderEl.appendChild(this.genereateHeaderElement(row, setup, styles));\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"group\":\r\n\t\t\t\tbodyEl.appendChild(this.genereateGroupElement(row, setup, styles));\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"calc\":\r\n\t\t\t\tbodyEl.appendChild(this.genereateCalcElement(row, setup, styles));\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"row\":\r\n\t\t\t\tlet rowEl = this.genereateRowElement(row, setup, styles);\r\n\t\t\t\tthis.mapElementStyles(((i % 2) && styles.evenRow) ? styles.evenRow : styles.oddRow, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\r\n\t\t\t\tbodyEl.appendChild(rowEl);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(headerEl.innerHTML){\r\n\t\t\ttable.appendChild(headerEl);\r\n\t\t}\r\n\r\n\t\ttable.appendChild(bodyEl);\r\n\r\n\r\n\t\tthis.mapElementStyles(this.table.element, table, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\"]);\r\n\t\treturn table;\r\n\t}\r\n\r\n\tlookupTableStyles(){\r\n\t\tvar styles = {};\r\n\r\n\t\t//lookup row styles\r\n\t\tif(this.cloneTableStyle && window.getComputedStyle){\r\n\t\t\tstyles.oddRow = this.table.element.querySelector(\".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)\");\r\n\t\t\tstyles.evenRow = this.table.element.querySelector(\".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)\");\r\n\t\t\tstyles.calcRow = this.table.element.querySelector(\".tabulator-row.tabulator-calcs\");\r\n\t\t\tstyles.firstRow = this.table.element.querySelector(\".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)\");\r\n\t\t\tstyles.firstGroup = this.table.element.getElementsByClassName(\"tabulator-group\")[0];\r\n\r\n\t\t\tif(styles.firstRow){\r\n\t\t\t\tstyles.styleCells = styles.firstRow.getElementsByClassName(\"tabulator-cell\");\r\n\t\t\t\tstyles.firstCell = styles.styleCells[0];\r\n\t\t\t\tstyles.lastCell = styles.styleCells[styles.styleCells.length - 1];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn styles;\r\n\t}\r\n\r\n\tgenereateHeaderElement(row, setup, styles){\r\n\t\tvar rowEl = document.createElement(\"tr\");\r\n\r\n\t\trow.columns.forEach((column) => {\r\n\t\t\tif(column){\r\n\t\t\t\tvar cellEl = document.createElement(\"th\");\r\n\t\t\t\tvar classNames = column.component._column.definition.cssClass ? column.component._column.definition.cssClass.split(\" \") : [];\r\n\r\n\t\t\t\tcellEl.colSpan = column.width;\r\n\t\t\t\tcellEl.rowSpan = column.height;\r\n\r\n\t\t\t\tcellEl.innerHTML = column.value;\r\n\r\n\t\t\t\tif(this.cloneTableStyle){\r\n\t\t\t\t\tcellEl.style.boxSizing = \"border-box\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tclassNames.forEach(function(className) {\r\n\t\t\t\t\tcellEl.classList.add(className);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.mapElementStyles(column.component.getElement(), cellEl, [\"text-align\", \"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\r\n\t\t\t\tthis.mapElementStyles(column.component._column.contentElement, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\r\n\r\n\t\t\t\tif(column.component._column.visible){\r\n\t\t\t\t\tthis.mapElementStyles(column.component.getElement(), cellEl, [\"width\"]);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(column.component._column.definition.width){\r\n\t\t\t\t\t\tcellEl.style.width = column.component._column.definition.width + \"px\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(column.component._column.parent){\r\n\t\t\t\t\tthis.mapElementStyles(column.component._column.parent.groupElement, cellEl, [\"border-top\"]);\r\n\t\t\t\t}\r\n\r\n\t\t\t\trowEl.appendChild(cellEl);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn rowEl;\r\n\t}\r\n\r\n\tgenereateGroupElement(row, setup, styles){\r\n\r\n\t\tvar rowEl = document.createElement(\"tr\"),\r\n\t\tcellEl = document.createElement(\"td\"),\r\n\t\tgroup = row.columns[0];\r\n\r\n\t\trowEl.classList.add(\"tabulator-print-table-row\");\r\n\r\n\t\tif(setup.groupHeader && setup.groupHeader[row.indent]){\r\n\t\t\tgroup.value = setup.groupHeader[row.indent](group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\r\n\t\t}else{\r\n\t\t\tif(setup.groupHeader === false){\r\n\t\t\t\tgroup.value = group.value;\r\n\t\t\t}else{\r\n\t\t\t\tgroup.value = row.component._group.generator(group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcellEl.colSpan = group.width;\r\n\t\tcellEl.innerHTML = group.value;\r\n\r\n\t\trowEl.classList.add(\"tabulator-print-table-group\");\r\n\t\trowEl.classList.add(\"tabulator-group-level-\" + row.indent);\r\n\r\n\t\tif(group.component.isVisible()){\r\n\t\t\trowEl.classList.add(\"tabulator-group-visible\");\r\n\t\t}\r\n\r\n\t\tthis.mapElementStyles(styles.firstGroup, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\r\n\t\tthis.mapElementStyles(styles.firstGroup, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\r\n\r\n\t\trowEl.appendChild(cellEl);\r\n\r\n\t\treturn rowEl;\r\n\t}\r\n\r\n\tgenereateCalcElement(row, setup, styles){\r\n\t\tvar rowEl = this.genereateRowElement(row, setup, styles);\r\n\r\n\t\trowEl.classList.add(\"tabulator-print-table-calcs\");\r\n\t\tthis.mapElementStyles(styles.calcRow, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\r\n\r\n\t\treturn rowEl;\r\n\t}\r\n\r\n\tgenereateRowElement(row, setup, styles){\r\n\t\tvar rowEl = document.createElement(\"tr\");\r\n\r\n\t\trowEl.classList.add(\"tabulator-print-table-row\");\r\n\r\n\t\trow.columns.forEach((col) => {\r\n\r\n\t\t\tif(col){\r\n\t\t\t\tvar cellEl = document.createElement(\"td\"),\r\n\t\t\t\tcolumn = col.component._column,\r\n\t\t\t\tvalue = col.value;\r\n\r\n\t\t\t\tvar cellWrapper = {\r\n\t\t\t\t\tmodules:{},\r\n\t\t\t\t\tgetValue:function(){\r\n\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetField:function(){\r\n\t\t\t\t\t\treturn column.definition.field;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetElement:function(){\r\n\t\t\t\t\t\treturn cellEl;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetColumn:function(){\r\n\t\t\t\t\t\treturn column.getComponent();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetData:function(){\r\n\t\t\t\t\t\treturn row.component.getData();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetRow:function(){\r\n\t\t\t\t\t\treturn row.component;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetComponent:function(){\r\n\t\t\t\t\t\treturn cellWrapper;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcolumn:column,\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar classNames = column.definition.cssClass ? column.definition.cssClass.split(\" \") : [];\r\n\r\n\t\t\t\tclassNames.forEach(function(className) {\r\n\t\t\t\t\tcellEl.classList.add(className);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(this.table.modExists(\"format\") && this.config.formatCells !== false){\r\n\t\t\t\t\tvalue = this.table.modules.format.formatExportValue(cellWrapper, this.colVisProp);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tswitch(typeof value){\r\n\t\t\t\t\t\tcase \"object\":\r\n\t\t\t\t\t\tvalue = JSON.stringify(value);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase \"undefined\":\r\n\t\t\t\t\t\tcase \"null\":\r\n\t\t\t\t\t\tvalue = \"\";\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tvalue = value;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(value instanceof Node){\r\n\t\t\t\t\tcellEl.appendChild(value);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcellEl.innerHTML = value;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(styles.firstCell){\r\n\t\t\t\t\tthis.mapElementStyles(styles.firstCell, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\", \"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\r\n\r\n\t\t\t\t\tif(column.definition.align){\r\n\t\t\t\t\t\tcellEl.style.textAlign = column.definition.align;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this.table.options.dataTree && this.config.dataTree !== false){\r\n\t\t\t\t\tif((setup.treeElementField && setup.treeElementField == column.field) || (!setup.treeElementField && i == 0)){\r\n\t\t\t\t\t\tif(row.component._row.modules.dataTree.controlEl){\r\n\t\t\t\t\t\t\tcellEl.insertBefore(row.component._row.modules.dataTree.controlEl.cloneNode(true), cellEl.firstChild);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(row.component._row.modules.dataTree.branchEl){\r\n\t\t\t\t\t\t\tcellEl.insertBefore(row.component._row.modules.dataTree.branchEl.cloneNode(true), cellEl.firstChild);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\trowEl.appendChild(cellEl);\r\n\r\n\t\t\t\tif(cellWrapper.modules.format && cellWrapper.modules.format.renderedCallback){\r\n\t\t\t\t\tcellWrapper.modules.format.renderedCallback();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(setup.rowFormatter && this.config.formatCells !== false){\r\n\t\t\t\t\tsetup.rowFormatter(row.component);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn rowEl;\r\n\t}\r\n\r\n\tgenereateHTMLTable(list){\r\n\t\tvar holder = document.createElement(\"div\");\r\n\r\n\t\tholder.appendChild(this.genereateTableElement(list));\r\n\r\n\t\treturn holder.innerHTML;\r\n\t}\r\n\r\n\tgetHtml(visible, style, config, colVisProp){\r\n\t\tvar list = this.generateExportList(config || this.table.options.htmlOutputConfig, style, visible, colVisProp || \"htmlOutput\");\r\n\r\n\t\treturn this.genereateHTMLTable(list);\r\n\t}\r\n\r\n\tmapElementStyles(from, to, props){\r\n\t\tif(this.cloneTableStyle && from && to){\r\n\r\n\t\t\tvar lookup = {\r\n\t\t\t\t\"background-color\" : \"backgroundColor\",\r\n\t\t\t\t\"color\" : \"fontColor\",\r\n\t\t\t\t\"width\" : \"width\",\r\n\t\t\t\t\"font-weight\" : \"fontWeight\",\r\n\t\t\t\t\"font-family\" : \"fontFamily\",\r\n\t\t\t\t\"font-size\" : \"fontSize\",\r\n\t\t\t\t\"text-align\" : \"textAlign\",\r\n\t\t\t\t\"border-top\" : \"borderTop\",\r\n\t\t\t\t\"border-left\" : \"borderLeft\",\r\n\t\t\t\t\"border-right\" : \"borderRight\",\r\n\t\t\t\t\"border-bottom\" : \"borderBottom\",\r\n\t\t\t\t\"padding-top\" : \"paddingTop\",\r\n\t\t\t\t\"padding-left\" : \"paddingLeft\",\r\n\t\t\t\t\"padding-right\" : \"paddingRight\",\r\n\t\t\t\t\"padding-bottom\" : \"paddingBottom\",\r\n\t\t\t};\r\n\r\n\t\t\tif(window.getComputedStyle){\r\n\t\t\t\tvar fromStyle = window.getComputedStyle(from);\r\n\r\n\t\t\t\tprops.forEach(function(prop){\r\n\t\t\t\t\tto.style[lookup[prop]] = fromStyle.getPropertyValue(prop);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nExport.moduleName = \"export\";\r\n\r\nexport default Export;\r\n","export default {\r\n\r\n\t//equal to\r\n\t\"=\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\treturn rowVal == filterVal ? true : false;\r\n\t},\r\n\r\n\t//less than\r\n\t\"<\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\treturn rowVal < filterVal ? true : false;\r\n\t},\r\n\r\n\t//less than or equal to\r\n\t\"<=\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\treturn rowVal <= filterVal ? true : false;\r\n\t},\r\n\r\n\t//greater than\r\n\t\">\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\treturn rowVal > filterVal ? true : false;\r\n\t},\r\n\r\n\t//greater than or equal to\r\n\t\">=\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\treturn rowVal >= filterVal ? true : false;\r\n\t},\r\n\r\n\t//not equal to\r\n\t\"!=\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\treturn rowVal != filterVal ? true : false;\r\n\t},\r\n\r\n\t\"regex\":function(filterVal, rowVal, rowData, filterParams){\r\n\r\n\t\tif(typeof filterVal == \"string\"){\r\n\t\t\tfilterVal = new RegExp(filterVal);\r\n\t\t}\r\n\r\n\t\treturn filterVal.test(rowVal);\r\n\t},\r\n\r\n\t//contains the string\r\n\t\"like\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\tif(filterVal === null || typeof filterVal === \"undefined\"){\r\n\t\t\treturn rowVal === filterVal ? true : false;\r\n\t\t}else{\r\n\t\t\tif(typeof rowVal !== 'undefined' && rowVal !== null){\r\n\t\t\t\treturn String(rowVal).toLowerCase().indexOf(filterVal.toLowerCase()) > -1;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t//contains the keywords\r\n\t\"keywords\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\tvar keywords = filterVal.toLowerCase().split(typeof filterParams.separator === \"undefined\" ? \" \" : filterParams.separator),\r\n\t\tvalue = String(rowVal === null || typeof rowVal === \"undefined\" ? \"\" : rowVal).toLowerCase(),\r\n\t\tmatches = [];\r\n\r\n\t\tkeywords.forEach((keyword) =>{\r\n\t\t\tif(value.includes(keyword)){\r\n\t\t\t\tmatches.push(true);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn filterParams.matchAll ? matches.length === keywords.length : !!matches.length;\r\n\t},\r\n\r\n\t//starts with the string\r\n\t\"starts\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\tif(filterVal === null || typeof filterVal === \"undefined\"){\r\n\t\t\treturn rowVal === filterVal ? true : false;\r\n\t\t}else{\r\n\t\t\tif(typeof rowVal !== 'undefined' && rowVal !== null){\r\n\t\t\t\treturn String(rowVal).toLowerCase().startsWith(filterVal.toLowerCase());\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t//ends with the string\r\n\t\"ends\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\tif(filterVal === null || typeof filterVal === \"undefined\"){\r\n\t\t\treturn rowVal === filterVal ? true : false;\r\n\t\t}else{\r\n\t\t\tif(typeof rowVal !== 'undefined' && rowVal !== null){\r\n\t\t\t\treturn String(rowVal).toLowerCase().endsWith(filterVal.toLowerCase());\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t//in array\r\n\t\"in\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\tif(Array.isArray(filterVal)){\r\n\t\t\treturn filterVal.length ? filterVal.indexOf(rowVal) > -1 : true;\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Filter Error - filter value is not an array:\", filterVal);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t},\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport defaultFilters from './defaults/filters.js';\r\n\r\nclass Filter extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.filterList = []; //hold filter list\r\n\t\tthis.headerFilters = {}; //hold column filters\r\n\t\tthis.headerFilterColumns = []; //hold columns that use header filters\r\n\r\n\t\tthis.prevHeaderFilterChangeCheck = \"\";\r\n\t\tthis.prevHeaderFilterChangeCheck = \"{}\";\r\n\r\n\t\tthis.changed = false; //has filtering changed since last render\r\n\t}\r\n\r\n\t//initialize column header filter\r\n\tinitializeColumn(column, value){\r\n\t\tvar self = this,\r\n\t\tfield = column.getField(),\r\n\t\tparams;\r\n\r\n\t\t//handle successfull value change\r\n\t\tfunction success(value){\r\n\t\t\tvar filterType = (column.modules.filter.tagType == \"input\" && column.modules.filter.attrType == \"text\") || column.modules.filter.tagType == \"textarea\" ? \"partial\" : \"match\",\r\n\t\t\ttype = \"\",\r\n\t\t\tfilterChangeCheck = \"\",\r\n\t\t\tfilterFunc;\r\n\r\n\t\t\tif(typeof column.modules.filter.prevSuccess === \"undefined\" || column.modules.filter.prevSuccess !== value){\r\n\r\n\t\t\t\tcolumn.modules.filter.prevSuccess = value;\r\n\r\n\t\t\t\tif(!column.modules.filter.emptyFunc(value)){\r\n\t\t\t\t\tcolumn.modules.filter.value = value;\r\n\r\n\t\t\t\t\tswitch(typeof column.definition.headerFilterFunc){\r\n\t\t\t\t\t\tcase \"string\":\r\n\t\t\t\t\t\tif(Filter.filters[column.definition.headerFilterFunc]){\r\n\t\t\t\t\t\t\ttype = column.definition.headerFilterFunc;\r\n\t\t\t\t\t\t\tfilterFunc = function(data){\r\n\t\t\t\t\t\t\t\tvar params = column.definition.headerFilterFuncParams || {};\r\n\t\t\t\t\t\t\t\tvar fieldVal = column.getFieldValue(data);\r\n\r\n\t\t\t\t\t\t\t\tparams = typeof params === \"function\" ? params(value, fieldVal, data) : params;\r\n\r\n\t\t\t\t\t\t\t\treturn Filter.filters[column.definition.headerFilterFunc](value, fieldVal, data, params);\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tconsole.warn(\"Header Filter Error - Matching filter function not found: \", column.definition.headerFilterFunc);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase \"function\":\r\n\t\t\t\t\t\tfilterFunc = function(data){\r\n\t\t\t\t\t\t\tvar params = column.definition.headerFilterFuncParams || {};\r\n\t\t\t\t\t\t\tvar fieldVal = column.getFieldValue(data);\r\n\r\n\t\t\t\t\t\t\tparams = typeof params === \"function\" ? params(value, fieldVal, data) : params;\r\n\r\n\t\t\t\t\t\t\treturn column.definition.headerFilterFunc(value, fieldVal, data, params);\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\ttype = filterFunc;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(!filterFunc){\r\n\t\t\t\t\t\tswitch(filterType){\r\n\t\t\t\t\t\t\tcase \"partial\":\r\n\t\t\t\t\t\t\tfilterFunc = function(data){\r\n\t\t\t\t\t\t\t\tvar colVal = column.getFieldValue(data);\r\n\r\n\t\t\t\t\t\t\t\tif(typeof colVal !== 'undefined' && colVal !== null){\r\n\t\t\t\t\t\t\t\t\treturn String(colVal).toLowerCase().indexOf(String(value).toLowerCase()) > -1;\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\ttype = \"like\";\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tfilterFunc = function(data){\r\n\t\t\t\t\t\t\t\treturn column.getFieldValue(data) == value;\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\ttype = \"=\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tself.headerFilters[field] = {value:value, func:filterFunc, type:type, params:params || {}};\r\n\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdelete self.headerFilters[field];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfilterChangeCheck = JSON.stringify(self.headerFilters);\r\n\r\n\t\t\t\tif(self.prevHeaderFilterChangeCheck !== filterChangeCheck){\r\n\t\t\t\t\tself.prevHeaderFilterChangeCheck = filterChangeCheck;\r\n\r\n\t\t\t\t\tself.changed = true;\r\n\t\t\t\t\tself.table.rowManager.filterRefresh();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tcolumn.modules.filter = {\r\n\t\t\tsuccess:success,\r\n\t\t\tattrType:false,\r\n\t\t\ttagType:false,\r\n\t\t\temptyFunc:false,\r\n\t\t};\r\n\r\n\t\tthis.generateHeaderFilterElement(column);\r\n\t}\r\n\r\n\tgenerateHeaderFilterElement(column, initialValue, reinitialize){\r\n\t\tvar self = this,\r\n\t\tsuccess = column.modules.filter.success,\r\n\t\tfield = column.getField(),\r\n\t\tfilterElement, editor, editorElement, cellWrapper, typingTimer, searchTrigger, params;\r\n\r\n\t\t//handle aborted edit\r\n\t\tfunction cancel(){}\r\n\r\n\t\tif(column.modules.filter.headerElement && column.modules.filter.headerElement.parentNode){\r\n\t\t\tcolumn.contentElement.removeChild(column.modules.filter.headerElement.parentNode);\r\n\t\t}\r\n\r\n\t\tif(field){\r\n\r\n\t\t\t//set empty value function\r\n\t\t\tcolumn.modules.filter.emptyFunc = column.definition.headerFilterEmptyCheck || function(value){\r\n\t\t\t\treturn !value && value !== \"0\" && value !== 0;\r\n\t\t\t};\r\n\r\n\t\t\tfilterElement = document.createElement(\"div\");\r\n\t\t\tfilterElement.classList.add(\"tabulator-header-filter\");\r\n\r\n\t\t\t//set column editor\r\n\t\t\tswitch(typeof column.definition.headerFilter){\r\n\t\t\t\tcase \"string\":\r\n\t\t\t\tif(self.table.modules.edit.editors[column.definition.headerFilter]){\r\n\t\t\t\t\teditor = self.table.modules.edit.editors[column.definition.headerFilter];\r\n\r\n\t\t\t\t\tif((column.definition.headerFilter === \"tick\" || column.definition.headerFilter === \"tickCross\") && !column.definition.headerFilterEmptyCheck){\r\n\t\t\t\t\t\tcolumn.modules.filter.emptyFunc = function(value){\r\n\t\t\t\t\t\t\treturn value !== true && value !== false;\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Filter Error - Cannot build header filter, No such editor found: \", column.definition.editor);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"function\":\r\n\t\t\t\teditor = column.definition.headerFilter;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"boolean\":\r\n\t\t\t\tif(column.modules.edit && column.modules.edit.editor){\r\n\t\t\t\t\teditor = column.modules.edit.editor;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(column.definition.formatter && self.table.modules.edit.editors[column.definition.formatter]){\r\n\t\t\t\t\t\teditor = self.table.modules.edit.editors[column.definition.formatter];\r\n\r\n\t\t\t\t\t\tif((column.definition.formatter === \"tick\" || column.definition.formatter === \"tickCross\") && !column.definition.headerFilterEmptyCheck){\r\n\t\t\t\t\t\t\tcolumn.modules.filter.emptyFunc = function(value){\r\n\t\t\t\t\t\t\t\treturn value !== true && value !== false;\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\teditor = self.table.modules.edit.editors[\"input\"];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tif(editor){\r\n\r\n\t\t\t\tcellWrapper = {\r\n\t\t\t\t\tgetValue:function(){\r\n\t\t\t\t\t\treturn typeof initialValue !== \"undefined\" ? initialValue : \"\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetField:function(){\r\n\t\t\t\t\t\treturn column.definition.field;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetElement:function(){\r\n\t\t\t\t\t\treturn filterElement;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetColumn:function(){\r\n\t\t\t\t\t\treturn column.getComponent();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetRow:function(){\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tnormalizeHeight:function(){\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tparams = column.definition.headerFilterParams || {};\r\n\r\n\t\t\t\tparams = typeof params === \"function\" ? params.call(self.table) : params;\r\n\r\n\t\t\t\teditorElement = editor.call(this.table.modules.edit, cellWrapper, function(){}, success, cancel, params);\r\n\r\n\t\t\t\tif(!editorElement){\r\n\t\t\t\t\tconsole.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor returned a value of false\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!(editorElement instanceof Node)){\r\n\t\t\t\t\tconsole.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor should return an instance of Node, the editor returned:\", editorElement);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//set Placeholder Text\r\n\t\t\t\tif(field){\r\n\t\t\t\t\tself.table.modules.localize.bind(\"headerFilters|columns|\" + column.definition.field, function(value){\r\n\t\t\t\t\t\teditorElement.setAttribute(\"placeholder\", typeof value !== \"undefined\" && value ? value : self.table.modules.localize.getText(\"headerFilters|default\"));\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tself.table.modules.localize.bind(\"headerFilters|default\", function(value){\r\n\t\t\t\t\t\teditorElement.setAttribute(\"placeholder\", typeof self.column.definition.headerFilterPlaceholder !== \"undefined\" && self.column.definition.headerFilterPlaceholder ? self.column.definition.headerFilterPlaceholder : value);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//focus on element on click\r\n\t\t\t\teditorElement.addEventListener(\"click\", function(e){\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\teditorElement.focus();\r\n\t\t\t\t});\r\n\r\n\t\t\t\teditorElement.addEventListener(\"focus\", (e) => {\r\n\t\t\t\t\tvar left = this.table.columnManager.element.scrollLeft;\r\n\r\n\t\t\t\t\tif(left !== this.table.rowManager.element.scrollLeft){\r\n\t\t\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\r\n\t\t\t\t\t\tthis.table.columnManager.scrollHorizontal(left);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t//live update filters as user types\r\n\t\t\t\ttypingTimer = false;\r\n\r\n\t\t\t\tsearchTrigger = function(e){\r\n\t\t\t\t\tif(typingTimer){\r\n\t\t\t\t\t\tclearTimeout(typingTimer);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttypingTimer = setTimeout(function(){\r\n\t\t\t\t\t\tsuccess(editorElement.value);\r\n\t\t\t\t\t},self.table.options.headerFilterLiveFilterDelay);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tcolumn.modules.filter.headerElement = editorElement;\r\n\t\t\t\tcolumn.modules.filter.attrType = editorElement.hasAttribute(\"type\") ? editorElement.getAttribute(\"type\").toLowerCase() : \"\" ;\r\n\t\t\t\tcolumn.modules.filter.tagType = editorElement.tagName.toLowerCase();\r\n\r\n\t\t\t\tif(column.definition.headerFilterLiveFilter !== false){\r\n\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\t!(\r\n\t\t\t\t\t\t\tcolumn.definition.headerFilter === 'autocomplete' ||\r\n\t\t\t\t\t\t\tcolumn.definition.headerFilter === 'tickCross' ||\r\n\t\t\t\t\t\t\t((column.definition.editor === 'autocomplete' ||\r\n\t\t\t\t\t\t\t\tcolumn.definition.editor === 'tickCross') &&\r\n\t\t\t\t\t\t\tcolumn.definition.headerFilter === true)\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\teditorElement.addEventListener(\"keyup\", searchTrigger);\r\n\t\t\t\t\teditorElement.addEventListener(\"search\", searchTrigger);\r\n\r\n\r\n\t\t\t\t\t//update number filtered columns on change\r\n\t\t\t\t\tif(column.modules.filter.attrType == \"number\"){\r\n\t\t\t\t\t\teditorElement.addEventListener(\"change\", function(e){\r\n\t\t\t\t\t\t\tsuccess(editorElement.value);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//change text inputs to search inputs to allow for clearing of field\r\n\t\t\t\t\tif(column.modules.filter.attrType == \"text\" && this.table.browser !== \"ie\"){\r\n\t\t\t\t\t\teditorElement.setAttribute(\"type\", \"search\");\r\n\t\t\t\t\t\t// editorElement.off(\"change blur\"); //prevent blur from triggering filter and preventing selection click\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t\t//prevent input and select elements from propegating click to column sorters etc\r\n\t\t\t\t\tif(column.modules.filter.tagType == \"input\" || column.modules.filter.tagType == \"select\" || column.modules.filter.tagType == \"textarea\"){\r\n\t\t\t\t\t\teditorElement.addEventListener(\"mousedown\",function(e){\r\n\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfilterElement.appendChild(editorElement);\r\n\r\n\t\t\t\tcolumn.contentElement.appendChild(filterElement);\r\n\r\n\t\t\t\tif(!reinitialize){\r\n\t\t\t\t\tself.headerFilterColumns.push(column);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Filter Error - Cannot add header filter, column has no field set:\", column.definition.title);\r\n\t\t}\r\n\t}\r\n\r\n\t//hide all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\r\n\thideHeaderFilterElements(){\r\n\t\tthis.headerFilterColumns.forEach(function(column){\r\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\r\n\t\t\t\tcolumn.modules.filter.headerElement.style.display = 'none';\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//show all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\r\n\tshowHeaderFilterElements(){\r\n\t\tthis.headerFilterColumns.forEach(function(column){\r\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\r\n\t\t\t\tcolumn.modules.filter.headerElement.style.display = '';\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//programatically set focus of header filter\r\n\tsetHeaderFilterFocus(column){\r\n\t\tif(column.modules.filter && column.modules.filter.headerElement){\r\n\t\t\tcolumn.modules.filter.headerElement.focus();\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Column Filter Focus Error - No header filter set on column:\", column.getField());\r\n\t\t}\r\n\t}\r\n\r\n\t//programmatically get value of header filter\r\n\tgetHeaderFilterValue(column){\r\n\t\tif(column.modules.filter && column.modules.filter.headerElement){\r\n\t\t\treturn column.modules.filter.headerElement.value;\r\n\t\t} else {\r\n\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\r\n\t\t}\r\n\t}\r\n\r\n\t//programatically set value of header filter\r\n\tsetHeaderFilterValue(column, value){\r\n\t\tif (column){\r\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\r\n\t\t\t\tthis.generateHeaderFilterElement(column, value, true);\r\n\t\t\t\tcolumn.modules.filter.success(value);\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treloadHeaderFilter(column){\r\n\t\tif (column){\r\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\r\n\t\t\t\tthis.generateHeaderFilterElement(column, column.modules.filter.value, true);\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//check if the filters has changed since last use\r\n\thasChanged(){\r\n\t\tvar changed = this.changed;\r\n\t\tthis.changed = false;\r\n\t\treturn changed;\r\n\t}\r\n\r\n\t//set standard filters\r\n\tsetFilter(field, type, value, params){\r\n\t\tvar self = this;\r\n\r\n\t\tself.filterList = [];\r\n\r\n\t\tif(!Array.isArray(field)){\r\n\t\t\tfield = [{field:field, type:type, value:value, params:params}];\r\n\t\t}\r\n\r\n\t\tself.addFilter(field);\r\n\t}\r\n\r\n\t//add filter to array\r\n\taddFilter(field, type, value, params){\r\n\t\tvar self = this;\r\n\r\n\t\tif(!Array.isArray(field)){\r\n\t\t\tfield = [{field:field, type:type, value:value, params:params}];\r\n\t\t}\r\n\r\n\t\tfield.forEach(function(filter){\r\n\r\n\t\t\tfilter = self.findFilter(filter);\r\n\r\n\t\t\tif(filter){\r\n\t\t\t\tself.filterList.push(filter);\r\n\r\n\t\t\t\tself.changed = true;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.filter){\r\n\t\t\tthis.table.modules.persistence.save(\"filter\");\r\n\t\t}\r\n\t}\r\n\r\n\tfindFilter(filter){\r\n\t\tvar self = this,\r\n\t\tcolumn;\r\n\r\n\t\tif(Array.isArray(filter)){\r\n\t\t\treturn this.findSubFilters(filter);\r\n\t\t}\r\n\r\n\t\tvar filterFunc = false;\r\n\r\n\t\tif(typeof filter.field == \"function\"){\r\n\t\t\tfilterFunc = function(data){\r\n\t\t\t\treturn filter.field(data, filter.type || {})// pass params to custom filter function\r\n\t\t\t};\r\n\t\t}else{\r\n\r\n\t\t\tif(Filter.filters[filter.type]){\r\n\r\n\t\t\t\tcolumn = self.table.columnManager.getColumnByField(filter.field);\r\n\r\n\t\t\t\tif(column){\r\n\t\t\t\t\tfilterFunc = function(data){\r\n\t\t\t\t\t\treturn Filter.filters[filter.type](filter.value, column.getFieldValue(data), data, filter.params || {});\r\n\t\t\t\t\t};\r\n\t\t\t\t}else{\r\n\t\t\t\t\tfilterFunc = function(data){\r\n\t\t\t\t\t\treturn Filter.filters[filter.type](filter.value, data[filter.field], data, filter.params || {});\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Filter Error - No such filter type found, ignoring: \", filter.type);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfilter.func = filterFunc;\r\n\r\n\t\treturn filter.func ? filter : false;\r\n\t}\r\n\r\n\tfindSubFilters(filters){\r\n\t\tvar self = this,\r\n\t\toutput = [];\r\n\r\n\t\tfilters.forEach(function(filter){\r\n\t\t\tfilter = self.findFilter(filter);\r\n\r\n\t\t\tif(filter){\r\n\t\t\t\toutput.push(filter);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output.length ? output : false;\r\n\t}\r\n\r\n\t//get all filters\r\n\tgetFilters(all, ajax){\r\n\t\tvar output = [];\r\n\r\n\t\tif(all){\r\n\t\t\toutput = this.getHeaderFilters();\r\n\t\t}\r\n\r\n\t\tif(ajax){\r\n\t\t\toutput.forEach(function(item){\r\n\t\t\t\tif(typeof item.type == \"function\"){\r\n\t\t\t\t\titem.type = \"function\";\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\toutput = output.concat(this.filtersToArray(this.filterList, ajax));\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\t//filter to Object\r\n\tfiltersToArray(filterList, ajax){\r\n\t\tvar output = [];\r\n\r\n\t\tfilterList.forEach((filter) => {\r\n\t\t\tvar item;\r\n\r\n\t\t\tif(Array.isArray(filter)){\r\n\t\t\t\toutput.push(this.filtersToArray(filter, ajax));\r\n\t\t\t}else{\r\n\t\t\t\titem = {field:filter.field, type:filter.type, value:filter.value}\r\n\r\n\t\t\t\tif(ajax){\r\n\t\t\t\t\tif(typeof item.type == \"function\"){\r\n\t\t\t\t\t\titem.type = \"function\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\toutput.push(item);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\t//get all filters\r\n\tgetHeaderFilters(){\r\n\t\tvar self = this,\r\n\t\toutput = [];\r\n\r\n\t\tfor(var key in this.headerFilters){\r\n\t\t\toutput.push({field:key, type:this.headerFilters[key].type, value:this.headerFilters[key].value});\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\t//remove filter from array\r\n\tremoveFilter(field, type, value){\r\n\t\tvar self = this;\r\n\r\n\t\tif(!Array.isArray(field)){\r\n\t\t\tfield = [{field:field, type:type, value:value}];\r\n\t\t}\r\n\r\n\t\tfield.forEach(function(filter){\r\n\t\t\tvar index = -1;\r\n\r\n\t\t\tif(typeof filter.field == \"object\"){\r\n\t\t\t\tindex = self.filterList.findIndex(function(element){\r\n\t\t\t\t\treturn filter === element;\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tindex = self.filterList.findIndex(function(element){\r\n\t\t\t\t\treturn filter.field === element.field && filter.type === element.type  && filter.value === element.value;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif(index > -1){\r\n\t\t\t\tself.filterList.splice(index, 1);\r\n\t\t\t\tself.changed = true;\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Filter Error - No matching filter type found, ignoring: \", filter.type);\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\tif(this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.filter){\r\n\t\t\tthis.table.modules.persistence.save(\"filter\");\r\n\t\t}\r\n\t}\r\n\r\n\t//clear filters\r\n\tclearFilter(all){\r\n\t\tthis.filterList = [];\r\n\r\n\t\tif(all){\r\n\t\t\tthis.clearHeaderFilter();\r\n\t\t}\r\n\r\n\t\tthis.changed = true;\r\n\r\n\t\tif(this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.filter){\r\n\t\t\tthis.table.modules.persistence.save(\"filter\");\r\n\t\t}\r\n\t}\r\n\r\n\t//clear header filters\r\n\tclearHeaderFilter(){\r\n\t\tvar self = this;\r\n\r\n\t\tthis.headerFilters = {};\r\n\t\tself.prevHeaderFilterChangeCheck = \"{}\";\r\n\r\n\t\tthis.headerFilterColumns.forEach(function(column){\r\n\t\t\tif(typeof column.modules.filter.value !== \"undefined\"){\r\n\t\t\t\tdelete column.modules.filter.value;\r\n\t\t\t}\r\n\t\t\tcolumn.modules.filter.prevSuccess = undefined;\r\n\t\t\tself.reloadHeaderFilter(column);\r\n\t\t});\r\n\r\n\t\tthis.changed = true;\r\n\t}\r\n\r\n\t//search data and return matching rows\r\n\tsearch (searchType, field, type, value){\r\n\t\tvar self = this,\r\n\t\tactiveRows = [],\r\n\t\tfilterList = [];\r\n\r\n\t\tif(!Array.isArray(field)){\r\n\t\t\tfield = [{field:field, type:type, value:value}];\r\n\t\t}\r\n\r\n\t\tfield.forEach(function(filter){\r\n\t\t\tfilter = self.findFilter(filter);\r\n\r\n\t\t\tif(filter){\r\n\t\t\t\tfilterList.push(filter);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.table.rowManager.rows.forEach(function(row){\r\n\t\t\tvar match = true;\r\n\r\n\t\t\tfilterList.forEach(function(filter){\r\n\t\t\t\tif(!self.filterRecurse(filter, row.getData())){\r\n\t\t\t\t\tmatch = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(match){\r\n\t\t\t\tactiveRows.push(searchType === \"data\" ? row.getData(\"data\") : row.getComponent());\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\treturn activeRows;\r\n\t}\r\n\r\n\t//filter row array\r\n\tfilter(rowList, filters){\r\n\t\tvar self = this,\r\n\t\tactiveRows = [],\r\n\t\tactiveRowComponents = [];\r\n\r\n\t\tif(self.table.options.dataFiltering){\r\n\t\t\tself.table.options.dataFiltering.call(self.table, self.getFilters());\r\n\t\t}\r\n\r\n\t\tif(!self.table.options.ajaxFiltering && (self.filterList.length || Object.keys(self.headerFilters).length)){\r\n\r\n\t\t\trowList.forEach(function(row){\r\n\t\t\t\tif(self.filterRow(row)){\r\n\t\t\t\t\tactiveRows.push(row);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t}else{\r\n\t\t\tactiveRows = rowList.slice(0);\r\n\t\t}\r\n\r\n\t\tif(self.table.options.dataFiltered){\r\n\r\n\t\t\tactiveRows.forEach(function(row){\r\n\t\t\t\tactiveRowComponents.push(row.getComponent());\r\n\t\t\t});\r\n\r\n\t\t\tself.table.options.dataFiltered.call(self.table, self.getFilters(), activeRowComponents);\r\n\t\t}\r\n\r\n\t\treturn activeRows;\r\n\t}\r\n\r\n\t//filter individual row\r\n\tfilterRow(row, filters){\r\n\t\tvar self = this,\r\n\t\tmatch = true,\r\n\t\tdata = row.getData();\r\n\r\n\t\tself.filterList.forEach(function(filter){\r\n\t\t\tif(!self.filterRecurse(filter, data)){\r\n\t\t\t\tmatch = false;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\t\tfor(var field in self.headerFilters){\r\n\t\t\tif(!self.headerFilters[field].func(data)){\r\n\t\t\t\tmatch = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn match;\r\n\t}\r\n\r\n\tfilterRecurse(filter, data){\r\n\t\tvar self = this,\r\n\t\tmatch = false;\r\n\r\n\t\tif(Array.isArray(filter)){\r\n\t\t\tfilter.forEach(function(subFilter){\r\n\t\t\t\tif(self.filterRecurse(subFilter, data)){\r\n\t\t\t\t\tmatch = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tmatch = filter.func(data);\r\n\t\t}\r\n\r\n\t\treturn match;\r\n\t}\r\n}\r\n\r\nFilter.moduleName = \"filter\";\r\n\r\n//load defaults\r\nFilter.filters = defaultFilters;\r\n\r\nexport default Filter;","export default function(cell, formatterParams, onRendered){\r\n\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\r\n};","export default function(cell, formatterParams, onRendered){\r\n\treturn cell.getValue();\r\n};","export default function(cell, formatterParams, onRendered){\r\n\tcell.getElement().style.whiteSpace = \"pre-wrap\";\r\n\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\r\n};","export default function(cell, formatterParams, onRendered){\r\n\tvar floatVal = parseFloat(cell.getValue()),\r\n\tnumber, integer, decimal, rgx;\r\n\r\n\tvar decimalSym = formatterParams.decimal || \".\";\r\n\tvar thousandSym = formatterParams.thousand || \",\";\r\n\tvar symbol = formatterParams.symbol || \"\";\r\n\tvar after = !!formatterParams.symbolAfter;\r\n\tvar precision = typeof formatterParams.precision !== \"undefined\" ? formatterParams.precision : 2;\r\n\r\n\tif(isNaN(floatVal)){\r\n\t\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\r\n\t}\r\n\r\n\tnumber = precision !== false ? floatVal.toFixed(precision) : floatVal;\r\n\tnumber = String(number).split(\".\");\r\n\r\n\tinteger = number[0];\r\n\tdecimal = number.length > 1 ? decimalSym + number[1] : \"\";\r\n\r\n\trgx = /(\\d+)(\\d{3})/;\r\n\r\n\twhile (rgx.test(integer)){\r\n\t\tinteger = integer.replace(rgx, \"$1\" + thousandSym + \"$2\");\r\n\t}\r\n\r\n\treturn after ? integer + decimal + symbol : symbol + integer + decimal;\r\n};","export default function(cell, formatterParams, onRendered){\r\n\tvar value = cell.getValue(),\r\n\turlPrefix = formatterParams.urlPrefix || \"\",\r\n\tdownload = formatterParams.download,\r\n\tlabel = value,\r\n\tel = document.createElement(\"a\"),\r\n\tdata;\r\n\r\n\tif(formatterParams.labelField){\r\n\t\tdata = cell.getData();\r\n\t\tlabel = data[formatterParams.labelField];\r\n\t}\r\n\r\n\tif(formatterParams.label){\r\n\t\tswitch(typeof formatterParams.label){\r\n\t\t\tcase \"string\":\r\n\t\t\tlabel = formatterParams.label;\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\tlabel = formatterParams.label(cell);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tif(label){\r\n\t\tif(formatterParams.urlField){\r\n\t\t\tdata = cell.getData();\r\n\t\t\tvalue = data[formatterParams.urlField];\r\n\t\t}\r\n\r\n\t\tif(formatterParams.url){\r\n\t\t\tswitch(typeof formatterParams.url){\r\n\t\t\t\tcase \"string\":\r\n\t\t\t\tvalue = formatterParams.url;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"function\":\r\n\t\t\t\tvalue = formatterParams.url(cell);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tel.setAttribute(\"href\", urlPrefix + value);\r\n\r\n\t\tif(formatterParams.target){\r\n\t\t\tel.setAttribute(\"target\", formatterParams.target);\r\n\t\t}\r\n\r\n\t\tif(formatterParams.download){\r\n\r\n\t\t\tif(typeof download == \"function\"){\r\n\t\t\t\tdownload = download(cell);\r\n\t\t\t}else{\r\n\t\t\t\tdownload = download === true ? \"\" : download;\r\n\t\t\t}\r\n\r\n\t\t\tel.setAttribute(\"download\", download);\r\n\t\t}\r\n\r\n\t\tel.innerHTML = this.emptyToSpace(this.sanitizeHTML(label));\r\n\r\n\t\treturn el;\r\n\t}else{\r\n\t\treturn \"&nbsp;\";\r\n\t}\r\n};","export default function(cell, formatterParams, onRendered){\r\n\tvar el = document.createElement(\"img\"),\r\n\tsrc = cell.getValue();\r\n\r\n\tif(formatterParams.urlPrefix){\r\n\t\tsrc = formatterParams.urlPrefix + cell.getValue();\r\n\t}\r\n\r\n\tif(formatterParams.urlSuffix){\r\n\t\tsrc = src + formatterParams.urlSuffix;\r\n\t}\r\n\r\n\tel.setAttribute(\"src\", src);\r\n\r\n\tswitch(typeof formatterParams.height){\r\n\t\tcase \"number\":\r\n\t\tel.style.height = formatterParams.height + \"px\";\r\n\t\tbreak;\r\n\r\n\t\tcase \"string\":\r\n\t\tel.style.height = formatterParams.height;\r\n\t\tbreak;\r\n\t}\r\n\r\n\tswitch(typeof formatterParams.width){\r\n\t\tcase \"number\":\r\n\t\tel.style.width = formatterParams.width + \"px\";\r\n\t\tbreak;\r\n\r\n\t\tcase \"string\":\r\n\t\tel.style.width = formatterParams.width;\r\n\t\tbreak;\r\n\t}\r\n\r\n\tel.addEventListener(\"load\", function(){\r\n\t\tcell.getRow().normalizeHeight();\r\n\t});\r\n\r\n\treturn el;\r\n};","export default function(cell, formatterParams, onRendered){\r\n\tvar value = cell.getValue(),\r\n\telement = cell.getElement(),\r\n\tempty = formatterParams.allowEmpty,\r\n\ttruthy = formatterParams.allowTruthy,\r\n\ttick = typeof formatterParams.tickElement !== \"undefined\" ? formatterParams.tickElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>',\r\n\tcross = typeof formatterParams.crossElement !== \"undefined\" ? formatterParams.crossElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\"  viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\r\n\r\n\tif((truthy && value) || (value === true || value === \"true\" || value === \"True\" || value === 1 || value === \"1\")){\r\n\t\telement.setAttribute(\"aria-checked\", true);\r\n\t\treturn tick || \"\";\r\n\t}else{\r\n\t\tif(empty && (value === \"null\" || value === \"\" || value === null || typeof value === \"undefined\")){\r\n\t\t\telement.setAttribute(\"aria-checked\", \"mixed\");\r\n\t\t\treturn \"\";\r\n\t\t}else{\r\n\t\t\telement.setAttribute(\"aria-checked\", false);\r\n\t\t\treturn cross || \"\";\r\n\t\t}\r\n\t}\r\n};","export default function(cell, formatterParams, onRendered){\r\n\tvar inputFormat = formatterParams.inputFormat || \"YYYY-MM-DD hh:mm:ss\";\r\n\tvar\toutputFormat = formatterParams.outputFormat || \"DD/MM/YYYY hh:mm:ss\";\r\n\tvar\tinvalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\r\n\tvar value = cell.getValue();\r\n\r\n\tvar newDatetime = moment(value, inputFormat);\r\n\r\n\tif(newDatetime.isValid()){\r\n\t\treturn formatterParams.timezone ? newDatetime.tz(formatterParams.timezone).format(outputFormat) : newDatetime.format(outputFormat);\r\n\t}else{\r\n\r\n\t\tif(invalid === true){\r\n\t\t\treturn value;\r\n\t\t}else if(typeof invalid === \"function\"){\r\n\t\t\treturn invalid(value);\r\n\t\t}else{\r\n\t\t\treturn invalid;\r\n\t\t}\r\n\t}\r\n};","export default function datetime(cell, formatterParams, onRendered) {\r\n\tvar inputFormat = formatterParams.inputFormat || \"YYYY-MM-DD hh:mm:ss\";\r\n\tvar invalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\r\n\tvar suffix = typeof formatterParams.suffix !== \"undefined\" ? formatterParams.suffix : false;\r\n\tvar unit = typeof formatterParams.unit !== \"undefined\" ? formatterParams.unit : undefined;\r\n\tvar humanize = typeof formatterParams.humanize !== \"undefined\" ? formatterParams.humanize : false;\r\n\tvar date = typeof formatterParams.date !== \"undefined\" ? formatterParams.date : moment();\r\n\tvar value = cell.getValue();\r\n\r\n\tvar newDatetime = moment(value, inputFormat);\r\n\r\n\tif (newDatetime.isValid()) {\r\n\t\tif(humanize){\r\n\t\t\treturn moment.duration(newDatetime.diff(date)).humanize(suffix);\r\n\t\t}else{\r\n\t\t\treturn newDatetime.diff(date, unit) + (suffix ? \" \" + suffix : \"\");\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\tif (invalid === true) {\r\n\t\t\treturn value;\r\n\t\t} else if (typeof invalid === \"function\") {\r\n\t\t\treturn invalid(value);\r\n\t\t} else {\r\n\t\t\treturn invalid;\r\n\t\t}\r\n\t}\r\n};","export default function (cell, formatterParams, onRendered) {\r\n\tvar value = cell.getValue();\r\n\r\n\tif (typeof formatterParams[value] === \"undefined\") {\r\n\t\tconsole.warn('Missing display value for ' + value);\r\n\t\treturn value;\r\n\t}\r\n\r\n\treturn formatterParams[value];\r\n};","export default function(cell, formatterParams, onRendered){\r\n\tvar value = cell.getValue(),\r\n\telement = cell.getElement(),\r\n\tmaxStars = formatterParams && formatterParams.stars ? formatterParams.stars : 5,\r\n\tstars = document.createElement(\"span\"),\r\n\tstar = document.createElementNS('http://www.w3.org/2000/svg', \"svg\"),\r\n\tstarActive = '<polygon fill=\"#FFEA00\" stroke=\"#C1AB60\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>',\r\n\tstarInactive = '<polygon fill=\"#D2D2D2\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\r\n\r\n\t//style stars holder\r\n\tstars.style.verticalAlign = \"middle\";\r\n\r\n\t//style star\r\n\tstar.setAttribute(\"width\", \"14\");\r\n\tstar.setAttribute(\"height\", \"14\");\r\n\tstar.setAttribute(\"viewBox\", \"0 0 512 512\");\r\n\tstar.setAttribute(\"xml:space\", \"preserve\");\r\n\tstar.style.padding = \"0 1px\";\r\n\r\n\tvalue = value && !isNaN(value) ? parseInt(value) : 0;\r\n\r\n\tvalue = Math.max(0, Math.min(value, maxStars));\r\n\r\n\tfor(var i=1;i<= maxStars;i++){\r\n\t\tvar nextStar = star.cloneNode(true);\r\n\t\tnextStar.innerHTML = i <= value ? starActive : starInactive;\r\n\r\n\t\tstars.appendChild(nextStar);\r\n\t}\r\n\r\n\telement.style.whiteSpace = \"nowrap\";\r\n\telement.style.overflow = \"hidden\";\r\n\telement.style.textOverflow = \"ellipsis\";\r\n\r\n\telement.setAttribute(\"aria-label\", value);\r\n\r\n\treturn stars;\r\n};","export default function(cell, formatterParams, onRendered){\r\n\tvar value = this.sanitizeHTML(cell.getValue()) || 0,\r\n\tel = document.createElement(\"span\"),\r\n\tmax = formatterParams && formatterParams.max ? formatterParams.max : 100,\r\n\tmin = formatterParams && formatterParams.min ? formatterParams.min : 0,\r\n\tcolors = formatterParams && typeof formatterParams.color !== \"undefined\" ? formatterParams.color : [\"red\", \"orange\", \"green\"],\r\n\tcolor = \"#666666\",\r\n\tpercent, percentValue;\r\n\r\n\tif(isNaN(value) || typeof cell.getValue() === \"undefined\"){\r\n\t\treturn;\r\n\t}\r\n\r\n\tel.classList.add(\"tabulator-traffic-light\");\r\n\r\n\t//make sure value is in range\r\n\tpercentValue = parseFloat(value) <= max ? parseFloat(value) : max;\r\n\tpercentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min;\r\n\r\n\t//workout percentage\r\n\tpercent = (max - min) / 100;\r\n\tpercentValue = Math.round((percentValue - min) / percent);\r\n\r\n\t//set color\r\n\tswitch(typeof colors){\r\n\t\tcase \"string\":\r\n\t\tcolor = colors;\r\n\t\tbreak;\r\n\t\tcase \"function\":\r\n\t\tcolor = colors(value);\r\n\t\tbreak;\r\n\t\tcase \"object\":\r\n\t\tif(Array.isArray(colors)){\r\n\t\t\tvar unit = 100 / colors.length;\r\n\t\t\tvar index = Math.floor(percentValue / unit);\r\n\r\n\t\t\tindex = Math.min(index, colors.length - 1);\r\n\t\t\tindex = Math.max(index, 0);\r\n\t\t\tcolor = colors[index];\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tel.style.backgroundColor = color;\r\n\r\n\treturn el;\r\n};","export default function(cell, formatterParams, onRendered){ //progress bar\r\n\tvar value = this.sanitizeHTML(cell.getValue()) || 0,\r\n\telement = cell.getElement(),\r\n\tmax = formatterParams && formatterParams.max ? formatterParams.max : 100,\r\n\tmin = formatterParams && formatterParams.min ? formatterParams.min : 0,\r\n\tlegendAlign = formatterParams && formatterParams.legendAlign ? formatterParams.legendAlign : \"center\",\r\n\tpercent, percentValue, color, legend, legendColor, top, left, right, bottom;\r\n\r\n\t//make sure value is in range\r\n\tpercentValue = parseFloat(value) <= max ? parseFloat(value) : max;\r\n\tpercentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min;\r\n\r\n\t//workout percentage\r\n\tpercent = (max - min) / 100;\r\n\tpercentValue = Math.round((percentValue - min) / percent);\r\n\r\n\t//set bar color\r\n\tswitch(typeof formatterParams.color){\r\n\t\tcase \"string\":\r\n\t\tcolor = formatterParams.color;\r\n\t\tbreak;\r\n\t\tcase \"function\":\r\n\t\tcolor = formatterParams.color(value);\r\n\t\tbreak;\r\n\t\tcase \"object\":\r\n\t\tif(Array.isArray(formatterParams.color)){\r\n\t\t\tvar unit = 100 / formatterParams.color.length;\r\n\t\t\tvar index = Math.floor(percentValue / unit);\r\n\r\n\t\t\tindex = Math.min(index, formatterParams.color.length - 1);\r\n\t\t\tindex = Math.max(index, 0);\r\n\t\t\tcolor = formatterParams.color[index];\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tdefault:\r\n\t\tcolor = \"#2DC214\";\r\n\t}\r\n\r\n\t//generate legend\r\n\tswitch(typeof formatterParams.legend){\r\n\t\tcase \"string\":\r\n\t\tlegend = formatterParams.legend;\r\n\t\tbreak;\r\n\t\tcase \"function\":\r\n\t\tlegend = formatterParams.legend(value);\r\n\t\tbreak;\r\n\t\tcase \"boolean\":\r\n\t\tlegend = value;\r\n\t\tbreak;\r\n\t\tdefault:\r\n\t\tlegend = false;\r\n\t}\r\n\r\n\t//set legend color\r\n\tswitch(typeof formatterParams.legendColor){\r\n\t\tcase \"string\":\r\n\t\tlegendColor = formatterParams.legendColor;\r\n\t\tbreak;\r\n\t\tcase \"function\":\r\n\t\tlegendColor = formatterParams.legendColor(value);\r\n\t\tbreak;\r\n\t\tcase \"object\":\r\n\t\tif(Array.isArray(formatterParams.legendColor)){\r\n\t\t\tvar unit = 100 / formatterParams.legendColor.length;\r\n\t\t\tvar index = Math.floor(percentValue / unit);\r\n\r\n\t\t\tindex = Math.min(index, formatterParams.legendColor.length - 1);\r\n\t\t\tindex = Math.max(index, 0);\r\n\t\t\tlegendColor = formatterParams.legendColor[index];\r\n\t\t}\r\n\t\tbreak;\r\n\t\tdefault:\r\n\t\tlegendColor = \"#000\";\r\n\t}\r\n\r\n\telement.style.minWidth = \"30px\";\r\n\telement.style.position = \"relative\";\r\n\r\n\telement.setAttribute(\"aria-label\", percentValue);\r\n\r\n\tvar barEl = document.createElement(\"div\");\r\n\tbarEl.style.display = \"inline-block\";\r\n\tbarEl.style.position = \"relative\";\r\n\tbarEl.style.width = percentValue + \"%\";\r\n\tbarEl.style.backgroundColor = color;\r\n\tbarEl.style.height = \"100%\";\r\n\r\n\tbarEl.setAttribute('data-max', max);\r\n\tbarEl.setAttribute('data-min', min);\r\n\r\n\r\n\tif(legend){\r\n\t\tvar legendEl = document.createElement(\"div\");\r\n\t\tlegendEl.style.position = \"absolute\";\r\n\t\tlegendEl.style.top = \"4px\";\r\n\t\tlegendEl.style.left = 0;\r\n\t\tlegendEl.style.textAlign = legendAlign;\r\n\t\tlegendEl.style.width = \"100%\";\r\n\t\tlegendEl.style.color = legendColor;\r\n\t\tlegendEl.innerHTML = legend;\r\n\t}\r\n\r\n\tonRendered(function(){\r\n\r\n\t\t//handle custom element needed if formatter is to be included in printed/downloaded output\r\n\t\tif(!(cell instanceof CellComponent)){\r\n\t\t\tvar holderEl = document.createElement(\"div\");\r\n\t\t\tholderEl.style.position = \"absolute\";\r\n\t\t\tholderEl.style.top = \"4px\";\r\n\t\t\tholderEl.style.bottom = \"4px\";\r\n\t\t\tholderEl.style.left = \"4px\";\r\n\t\t\tholderEl.style.right = \"4px\";\r\n\r\n\t\t\telement.appendChild(holderEl);\r\n\r\n\t\t\telement = holderEl;\r\n\t\t}\r\n\r\n\t\telement.appendChild(barEl);\r\n\r\n\t\tif(legend){\r\n\t\t\telement.appendChild(legendEl);\r\n\t\t}\r\n\t});\r\n\r\n\treturn \"\";\r\n};","export default function(cell, formatterParams, onRendered){\r\n\tcell.getElement().style.backgroundColor = this.sanitizeHTML(cell.getValue());\r\n\treturn \"\";\r\n};","export default function(cell, formatterParams, onRendered){\r\n\treturn '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>';\r\n};","export default function(cell, formatterParams, onRendered){\r\n\treturn '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\r\n};","export default function(cell, formatterParams, onRendered){\r\n\treturn this.table.rowManager.activeRows.indexOf(cell.getRow()._getSelf()) + 1;\r\n};","export default function(cell, formatterParams, onRendered){\r\n\tcell.getElement().classList.add(\"tabulator-row-handle\");\r\n\treturn \"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>\";\r\n};","export default function(cell, formatterParams, onRendered){\r\n\tvar open = false,\r\n\tel = document.createElement(\"div\"),\r\n\tconfig = cell.getRow()._row.modules.responsiveLayout;\r\n\r\n\tel.classList.add(\"tabulator-responsive-collapse-toggle\");\r\n\tel.innerHTML = \"<span class='tabulator-responsive-collapse-toggle-open'>+</span><span class='tabulator-responsive-collapse-toggle-close'>-</span>\";\r\n\r\n\tcell.getElement().classList.add(\"tabulator-row-handle\");\r\n\r\n\tfunction toggleList(isOpen){\r\n\t\tvar collapseEl = config.element;\r\n\r\n\t\tconfig.open = isOpen;\r\n\r\n\t\tif(collapseEl){\r\n\r\n\t\t\tif(config.open){\r\n\t\t\t\tel.classList.add(\"open\");\r\n\t\t\t\tcollapseEl.style.display = '';\r\n\t\t\t}else{\r\n\t\t\t\tel.classList.remove(\"open\");\r\n\t\t\t\tcollapseEl.style.display = 'none';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tel.addEventListener(\"click\", function(e){\r\n\t\te.stopImmediatePropagation();\r\n\t\ttoggleList(!config.open);\r\n\t});\r\n\r\n\ttoggleList(config.open);\r\n\r\n\treturn el;\r\n};","export default function(cell, formatterParams, onRendered){\r\n\tvar checkbox = document.createElement(\"input\");\r\n\r\n\tcheckbox.type = 'checkbox';\r\n\r\n\tif(this.table.modExists(\"selectRow\", true)){\r\n\r\n\t\tcheckbox.addEventListener(\"click\", (e) => {\r\n\t\t\te.stopPropagation();\r\n\t\t});\r\n\r\n\t\tif(typeof cell.getRow == 'function'){\r\n\t\t\tvar row = cell.getRow();\r\n\r\n\t\t\tif(row instanceof RowComponent){\r\n\r\n\t\t\t\tcheckbox.addEventListener(\"change\", (e) => {\r\n\t\t\t\t\trow.toggleSelect();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tcheckbox.checked = row.isSelected && row.isSelected();\r\n\t\t\t\tthis.table.modules.selectRow.registerRowSelectCheckbox(row, checkbox);\r\n\t\t\t}else{\r\n\t\t\t\tcheckbox = \"\";\r\n\t\t\t}\r\n\t\t}else {\r\n\t\t\tcheckbox.addEventListener(\"change\", (e) => {\r\n\t\t\t\tif(this.table.modules.selectRow.selectedRows.length){\r\n\t\t\t\t\tthis.table.deselectRow();\r\n\t\t\t\t}else {\r\n\t\t\t\t\tthis.table.selectRow(formatterParams.rowRange);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.table.modules.selectRow.registerHeaderSelectCheckbox(checkbox);\r\n\t\t}\r\n\t}\r\n\r\n\treturn checkbox;\r\n};","import plaintext from './formatters/plaintext.js';\r\nimport html from './formatters/html.js';\r\nimport textarea from './formatters/textarea.js';\r\nimport money from './formatters/money.js';\r\nimport link from './formatters/link.js';\r\nimport image from './formatters/image.js';\r\nimport tickCross from './formatters/tickCross.js';\r\nimport datetime from './formatters/datetime.js';\r\nimport datetimediff from './formatters/datetimediff.js';\r\nimport lookup from './formatters/lookup.js';\r\nimport star from './formatters/star.js';\r\nimport traffic from './formatters/traffic.js';\r\nimport progress from './formatters/progress.js';\r\nimport color from './formatters/color.js';\r\nimport buttonTick from './formatters/buttonTick.js';\r\nimport buttonCross from './formatters/buttonCross.js';\r\nimport rownum from './formatters/rownum.js';\r\nimport handle from './formatters/handle.js';\r\nimport responsiveCollapse from './formatters/responsiveCollapse.js';\r\nimport rowSelection from './formatters/rowSelection.js';\r\n\r\nexport default {\r\n\tplaintext:plaintext,\r\n\thtml:html,\r\n\ttextarea:textarea,\r\n\tmoney:money,\r\n\tlink:link,\r\n\timage:image,\r\n\ttickCross:tickCross,\r\n\tdatetime:datetime,\r\n\tdatetimediff:datetimediff,\r\n\tlookup:lookup,\r\n\tstar:star,\r\n\ttraffic:traffic,\r\n\tprogress:progress,\r\n\tcolor:color,\r\n\tbuttonTick:buttonTick,\r\n\tbuttonCross:buttonCross,\r\n\trownum:rownum,\r\n\thandle:handle,\r\n\tresponsiveCollapse:responsiveCollapse,\r\n\trowSelection:rowSelection,\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport defaultFormatters from './defaults/formatters.js';\r\n\r\nclass Format extends Module{\r\n\r\n\t//initialize column formatter\r\n\tinitializeColumn(column){\r\n\t\tcolumn.modules.format = this.lookupFormatter(column, \"\");\r\n\r\n\t\tif(typeof column.definition.formatterPrint !== \"undefined\"){\r\n\t\t\tcolumn.modules.format.print = this.lookupFormatter(column, \"Print\");\r\n\t\t}\r\n\r\n\t\tif(typeof column.definition.formatterClipboard !== \"undefined\"){\r\n\t\t\tcolumn.modules.format.clipboard = this.lookupFormatter(column, \"Clipboard\");\r\n\t\t}\r\n\r\n\t\tif(typeof column.definition.formatterHtmlOutput !== \"undefined\"){\r\n\t\t\tcolumn.modules.format.htmlOutput = this.lookupFormatter(column, \"HtmlOutput\");\r\n\t\t}\r\n\t}\r\n\r\n\tlookupFormatter(column, type){\r\n\t\tvar config = {params:column.definition[\"formatter\" + type + \"Params\"] || {}},\r\n\t\tformatter = column.definition[\"formatter\" + type];\r\n\r\n\t\t//set column formatter\r\n\t\tswitch(typeof formatter){\r\n\t\t\tcase \"string\":\r\n\t\t\tif(Format.formatters[formatter]){\r\n\t\t\t\tconfig.formatter = Format.formatters[formatter];\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Formatter Error - No such formatter found: \", formatter);\r\n\t\t\t\tconfig.formatter = Format.formatters.plaintext;\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\tconfig.formatter = formatter;\r\n\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\tconfig.formatter = Format.formatters.plaintext;\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn config;\r\n\t}\r\n\r\n\tcellRendered(cell){\r\n\t\tif(cell.modules.format && cell.modules.format.renderedCallback && !cell.modules.format.rendered){\r\n\t\t\tcell.modules.format.renderedCallback();\r\n\t\t\tcell.modules.format.rendered = true;\r\n\t\t}\r\n\t}\r\n\r\n\t//return a formatted value for a cell\r\n\tformatValue(cell){\r\n\t\tvar component = cell.getComponent(),\r\n\t\tparams = typeof cell.column.modules.format.params === \"function\" ? cell.column.modules.format.params(component) : cell.column.modules.format.params;\r\n\r\n\t\tfunction onRendered(callback){\r\n\t\t\tif(!cell.modules.format){\r\n\t\t\t\tcell.modules.format = {};\r\n\t\t\t}\r\n\r\n\t\t\tcell.modules.format.renderedCallback = callback;\r\n\t\t\tcell.modules.format.rendered = false;\r\n\t\t}\r\n\r\n\t\treturn cell.column.modules.format.formatter.call(this, component, params, onRendered);\r\n\t}\r\n\r\n\tformatExportValue(cell, type){\r\n\t\tvar formatter = cell.column.modules.format[type],\r\n\t\tparams;\r\n\r\n\t\tif(formatter){\r\n\t\t\tparams = typeof formatter.params === \"function\" ? formatter.params(component) : formatter.params;\r\n\r\n\t\t\tfunction onRendered(callback){\r\n\t\t\t\tif(!cell.modules.format){\r\n\t\t\t\t\tcell.modules.format = {};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcell.modules.format.renderedCallback = callback;\r\n\t\t\t\tcell.modules.format.rendered = false;\r\n\t\t\t}\r\n\r\n\t\t\treturn formatter.formatter.call(this, cell.getComponent(), params, onRendered);\r\n\r\n\t\t}else{\r\n\t\t\treturn this.formatValue(cell);\r\n\t\t}\r\n\t}\r\n\r\n\tsanitizeHTML(value){\r\n\t\tif(value){\r\n\t\t\tvar entityMap = {\r\n\t\t\t\t'&': '&amp;',\r\n\t\t\t\t'<': '&lt;',\r\n\t\t\t\t'>': '&gt;',\r\n\t\t\t\t'\"': '&quot;',\r\n\t\t\t\t\"'\": '&#39;',\r\n\t\t\t\t'/': '&#x2F;',\r\n\t\t\t\t'`': '&#x60;',\r\n\t\t\t\t'=': '&#x3D;'\r\n\t\t\t};\r\n\r\n\t\t\treturn String(value).replace(/[&<>\"'`=\\/]/g, function (s) {\r\n\t\t\t\treturn entityMap[s];\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\treturn value;\r\n\t\t}\r\n\t}\r\n\r\n\temptyToSpace(value){\r\n\t\treturn value === null || typeof value === \"undefined\" || value === \"\" ? \"&nbsp;\" : value;\r\n\t}\r\n\r\n\t//get formatter for cell\r\n\tgetFormatter(formatter){\r\n\t\tvar formatter;\r\n\r\n\t\tswitch(typeof formatter){\r\n\t\t\tcase \"string\":\r\n\t\t\tif(Format.formatters[formatter]){\r\n\t\t\t\tformatter = Format.formatters[formatter]\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Formatter Error - No such formatter found: \", formatter);\r\n\t\t\t\tformatter = Format.formatters.plaintext;\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\tformatter = formatter;\r\n\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\tformatter = Format.formatters.plaintext;\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn formatter;\r\n\t}\r\n}\r\n\r\nFormat.moduleName = \"format\";\r\n\r\n//load defaults\r\nFormat.formatters = defaultFormatters;\r\n\r\nexport default Format;","import Module from '../../core/Module.js';\r\n\r\nclass FrozenColumns extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.leftColumns = [];\r\n\t\tthis.rightColumns = [];\r\n\t\tthis.leftMargin = 0;\r\n\t\tthis.rightMargin = 0;\r\n\t\tthis.rightPadding = 0;\r\n\t\tthis.initializationMode = \"left\";\r\n\t\tthis.active = false;\r\n\t\tthis.scrollEndTimer = false;\r\n\t}\r\n\r\n\t//reset initial state\r\n\treset(){\r\n\t\tthis.initializationMode = \"left\";\r\n\t\tthis.leftColumns = [];\r\n\t\tthis.rightColumns = [];\r\n\t\tthis.leftMargin = 0;\r\n\t\tthis.rightMargin = 0;\r\n\t\tthis.rightMargin = 0;\r\n\t\tthis.active = false;\r\n\r\n\t\tthis.table.columnManager.headersElement.style.marginLeft = 0;\r\n\t\tthis.table.columnManager.element.style.paddingRight = 0;\r\n\t}\r\n\r\n\t//initialize specific column\r\n\tinitializeColumn(column){\r\n\t\tvar config = {margin:0, edge:false};\r\n\r\n\t\tif(!column.isGroup){\r\n\r\n\t\t\tif(this.frozenCheck(column)){\r\n\r\n\t\t\t\tconfig.position = this.initializationMode;\r\n\r\n\t\t\t\tif(this.initializationMode == \"left\"){\r\n\t\t\t\t\tthis.leftColumns.push(column);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.rightColumns.unshift(column);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.active = true;\r\n\r\n\t\t\t\tcolumn.modules.frozen = config;\r\n\t\t\t}else{\r\n\t\t\t\tthis.initializationMode = \"right\";\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfrozenCheck(column){\r\n\t\tvar frozen = false;\r\n\r\n\t\tif(column.parent.isGroup && column.definition.frozen){\r\n\t\t\tconsole.warn(\"Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups\");\r\n\t\t}\r\n\r\n\t\tif(column.parent.isGroup){\r\n\t\t\treturn this.frozenCheck(column.parent);\r\n\t\t}else{\r\n\t\t\treturn column.definition.frozen;\r\n\t\t}\r\n\r\n\t\treturn frozen;\r\n\t}\r\n\r\n\t//quick layout to smooth horizontal scrolling\r\n\tscrollHorizontal(){\r\n\t\tvar rows;\r\n\r\n\t\tif(this.active){\r\n\t\t\tclearTimeout(this.scrollEndTimer);\r\n\r\n\t\t\t//layout all rows after scroll is complete\r\n\t\t\tthis.scrollEndTimer = setTimeout(() => {\r\n\t\t\t\tthis.layout();\r\n\t\t\t}, 100);\r\n\r\n\t\t\trows = this.table.rowManager.getVisibleRows();\r\n\r\n\t\t\tthis.calcMargins();\r\n\r\n\t\t\tthis.layoutColumnPosition();\r\n\r\n\t\t\tthis.layoutCalcRows();\r\n\r\n\t\t\trows.forEach((row) => {\r\n\t\t\t\tif(row.type === \"row\"){\r\n\t\t\t\t\tthis.layoutRow(row);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.table.rowManager.tableElement.style.marginRight = this.rightMargin;\r\n\t\t}\r\n\t}\r\n\r\n\t//calculate margins for rows\r\n\tcalcMargins(){\r\n\t\tthis.leftMargin = this._calcSpace(this.leftColumns, this.leftColumns.length) + \"px\";\r\n\t\tthis.table.columnManager.headersElement.style.marginLeft = this.leftMargin;\r\n\r\n\t\tthis.rightMargin = this._calcSpace(this.rightColumns, this.rightColumns.length) + \"px\";\r\n\t\tthis.table.columnManager.element.style.paddingRight = this.rightMargin;\r\n\r\n\t\t//calculate right frozen columns\r\n\t\tthis.rightPadding = this.table.rowManager.element.clientWidth + this.table.columnManager.scrollLeft;\r\n\t}\r\n\r\n\t//layout calculation rows\r\n\tlayoutCalcRows(){\r\n\t\tif(this.table.modExists(\"columnCalcs\")){\r\n\t\t\tif(this.table.modules.columnCalcs.topInitialized && this.table.modules.columnCalcs.topRow){\r\n\t\t\t\tthis.layoutRow(this.table.modules.columnCalcs.topRow);\r\n\t\t\t}\r\n\t\t\tif(this.table.modules.columnCalcs.botInitialized && this.table.modules.columnCalcs.botRow){\r\n\t\t\t\tthis.layoutRow(this.table.modules.columnCalcs.botRow);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//calculate column positions and layout headers\r\n\tlayoutColumnPosition(allCells){\r\n\r\n\t\tvar leftParents = [];\r\n\r\n\t\tthis.leftColumns.forEach((column, i) => {\r\n\t\t\tcolumn.modules.frozen.margin = (this._calcSpace(this.leftColumns, i) + this.table.columnManager.scrollLeft) + \"px\";\r\n\r\n\t\t\tif(i == this.leftColumns.length - 1){\r\n\t\t\t\tcolumn.modules.frozen.edge = true;\r\n\t\t\t}else{\r\n\t\t\t\tcolumn.modules.frozen.edge = false;\r\n\t\t\t}\r\n\r\n\t\t\tif(column.parent.isGroup){\r\n\t\t\t\tvar parentEl = this.getColGroupParentElement(column);\r\n\t\t\t\tif(!leftParents.includes(parentEl)){\r\n\t\t\t\t\tthis.layoutElement(parentEl, column);\r\n\t\t\t\t\tleftParents.push(parentEl);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(column.modules.frozen.edge){\r\n\t\t\t\t\tparentEl.classList.add(\"tabulator-frozen-\" + column.modules.frozen.position);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.layoutElement(column.getElement(), column);\r\n\t\t\t}\r\n\r\n\t\t\tif(allCells){\r\n\t\t\t\tcolumn.cells.forEach((cell) => {\r\n\t\t\t\t\tthis.layoutElement(cell.getElement(true), column);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.rightColumns.forEach((column, i) => {\r\n\t\t\tcolumn.modules.frozen.margin = (this.rightPadding - this._calcSpace(this.rightColumns, i + 1)) + \"px\";\r\n\r\n\t\t\tif(i == this.rightColumns.length - 1){\r\n\t\t\t\tcolumn.modules.frozen.edge = true;\r\n\t\t\t}else{\r\n\t\t\t\tcolumn.modules.frozen.edge = false;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif(column.parent.isGroup){\r\n\t\t\t\tthis.layoutElement(this.getColGroupParentElement(column), column);\r\n\t\t\t}else{\r\n\t\t\t\tthis.layoutElement(column.getElement(), column);\r\n\t\t\t}\r\n\r\n\t\t\tif(allCells){\r\n\t\t\t\tcolumn.cells.forEach((cell) => {\r\n\t\t\t\t\tthis.layoutElement(cell.getElement(true), column);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tgetColGroupParentElement(column){\r\n\t\treturn column.parent.isGroup ? this.getColGroupParentElement(column.parent) : column.getElement();\r\n\t}\r\n\r\n\t//layout columns appropropriatly\r\n\tlayout(){\r\n\t\tvar rightMargin = 0;\r\n\r\n\t\tif(this.active){\r\n\r\n\t\t\t//calculate row padding\r\n\t\t\tthis.calcMargins();\r\n\r\n\t\t\tthis.table.rowManager.getDisplayRows().forEach((row) =>{\r\n\t\t\t\tif(row.type === \"row\"){\r\n\t\t\t\t\tthis.layoutRow(row);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.layoutCalcRows();\r\n\r\n\t\t\t//calculate left columns\r\n\t\t\tthis.layoutColumnPosition(true);\r\n\r\n\t\t\tthis.table.rowManager.tableElement.style.marginRight = this.rightMargin;\r\n\t\t}\r\n\t}\r\n\r\n\tlayoutRow(row){\r\n\t\tvar rowEl = row.getElement();\r\n\r\n\t\trowEl.style.paddingLeft = this.leftMargin;\r\n\r\n\t\tthis.leftColumns.forEach((column) => {\r\n\t\t\tvar cell = row.getCell(column);\r\n\r\n\t\t\tif(cell){\r\n\t\t\t\tthis.layoutElement(cell.getElement(true), column);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.rightColumns.forEach((column) => {\r\n\t\t\tvar cell = row.getCell(column);\r\n\r\n\t\t\tif(cell){\r\n\t\t\t\tthis.layoutElement(cell.getElement(true), column);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tlayoutElement(element, column){\r\n\r\n\t\tif(column.modules.frozen){\r\n\t\t\telement.style.position = \"absolute\";\r\n\t\t\telement.style.left = column.modules.frozen.margin;\r\n\r\n\t\t\telement.classList.add(\"tabulator-frozen\");\r\n\r\n\t\t\tif(column.modules.frozen.edge){\r\n\t\t\t\telement.classList.add(\"tabulator-frozen-\" + column.modules.frozen.position);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t_calcSpace(columns, index){\r\n\t\tvar width = 0;\r\n\r\n\t\tfor (let i = 0; i < index; i++){\r\n\t\t\tif(columns[i].visible){\r\n\t\t\t\twidth += columns[i].getWidth();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn width;\r\n\t}\r\n}\r\n\r\nFrozenColumns.moduleName = \"frozenColumns\";\r\n\r\nexport default FrozenColumns;","import Module from '../../core/Module.js';\r\n\r\nclass FrozenRows extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.topElement = document.createElement(\"div\");\r\n\t\tthis.rows = [];\r\n\t\tthis.displayIndex = 0; //index in display pipeline\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.rows = [];\r\n\r\n\t\tthis.topElement.classList.add(\"tabulator-frozen-rows-holder\");\r\n\r\n\t\t// this.table.columnManager.element.append(this.topElement);\r\n\t\tthis.table.columnManager.getElement().insertBefore(this.topElement, this.table.columnManager.headersElement.nextSibling);\r\n\t}\r\n\r\n\tsetDisplayIndex(index){\r\n\t\tthis.displayIndex = index;\r\n\t}\r\n\r\n\tgetDisplayIndex(){\r\n\t\treturn this.displayIndex;\r\n\t}\r\n\r\n\tisFrozen(){\r\n\t\treturn !!this.rows.length;\r\n\t}\r\n\r\n\t//filter frozen rows out of display data\r\n\tgetRows(rows){\r\n\t\tvar self = this,\r\n\t\tfrozen = [],\r\n\t\toutput = rows.slice(0);\r\n\r\n\t\tthis.rows.forEach(function(row){\r\n\t\t\tvar index = output.indexOf(row);\r\n\r\n\t\t\tif(index > -1){\r\n\t\t\t\toutput.splice(index, 1);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tfreezeRow(row){\r\n\t\tif(!row.modules.frozen){\r\n\t\t\trow.modules.frozen = true;\r\n\t\t\tthis.topElement.appendChild(row.getElement());\r\n\t\t\trow.initialize();\r\n\t\t\trow.normalizeHeight();\r\n\t\t\tthis.table.rowManager.adjustTableSize();\r\n\r\n\t\t\tthis.rows.push(row);\r\n\r\n\t\t\tthis.table.rowManager.refreshActiveData(\"display\");\r\n\r\n\t\t\tthis.styleRows();\r\n\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Freeze Error - Row is already frozen\");\r\n\t\t}\r\n\t}\r\n\r\n\tunfreezeRow(row){\r\n\t\tvar index = this.rows.indexOf(row);\r\n\r\n\t\tif(row.modules.frozen){\r\n\r\n\t\t\trow.modules.frozen = false;\r\n\r\n\t\t\tthis.detachRow(row);\r\n\r\n\t\t\tthis.table.rowManager.adjustTableSize();\r\n\r\n\t\t\tthis.table.rowManager.refreshActiveData(\"display\");\r\n\r\n\t\t\tif(this.rows.length){\r\n\t\t\t\tthis.styleRows();\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Freeze Error - Row is already unfrozen\");\r\n\t\t}\r\n\t}\r\n\r\n\tdetachRow(row){\r\n\t\tvar index = this.rows.indexOf(row);\r\n\r\n\t\tif(index > -1){\r\n\t\t\tvar rowEl = row.getElement();\r\n\t\t\trowEl.parentNode.removeChild(rowEl);\r\n\r\n\t\t\tthis.rows.splice(index, 1);\r\n\t\t}\r\n\t}\r\n\r\n\tstyleRows(row){\r\n\t\tthis.rows.forEach((row, i) => {\r\n\t\t\tthis.table.rowManager.styleRow(row, i);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nFrozenRows.moduleName = \"frozenRows\";\r\n\r\nexport default FrozenRows;","import Helpers from '../../core/Helpers.js';\r\n\r\n//Group functions\r\nclass Group{\r\n\r\n\tconstructor(groupManager, parent, level, key, field, generator, oldGroup){\r\n\t\tthis.groupManager = groupManager;\r\n\t\tthis.parent = parent;\r\n\t\tthis.key = key;\r\n\t\tthis.level = level;\r\n\t\tthis.field = field;\r\n\t\tthis.hasSubGroups = level < (groupManager.groupIDLookups.length - 1);\r\n\t\tthis.addRow = this.hasSubGroups ? this._addRowToGroup : this._addRow;\r\n\t\tthis.type = \"group\"; //type of element\r\n\t\tthis.old = oldGroup;\r\n\t\tthis.rows = [];\r\n\t\tthis.groups = [];\r\n\t\tthis.groupList = [];\r\n\t\tthis.generator = generator;\r\n\t\tthis.elementContents = false;\r\n\t\tthis.height = 0;\r\n\t\tthis.outerHeight = 0;\r\n\t\tthis.initialized = false;\r\n\t\tthis.calcs = {};\r\n\t\tthis.initialized = false;\r\n\t\tthis.modules = {};\r\n\t\tthis.arrowElement = false;\r\n\r\n\t\tthis.visible = oldGroup ? oldGroup.visible : (typeof groupManager.startOpen[level] !== \"undefined\" ? groupManager.startOpen[level] : groupManager.startOpen[0]);\r\n\r\n\t\tthis.component = null;\r\n\r\n\t\tthis.createElements();\r\n\t\tthis.addBindings();\r\n\r\n\t\tthis.createValueGroups();\r\n\t}\r\n\r\n\twipe(){\r\n\t\tif(this.groupList.length){\r\n\t\t\tthis.groupList.forEach(function(group){\r\n\t\t\t\tgroup.wipe();\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tthis.element = false;\r\n\t\t\tthis.arrowElement = false;\r\n\t\t\tthis.elementContents = false;\r\n\t\t}\r\n\t}\r\n\r\n\tcreateElements(){\r\n\t\tvar arrow = document.createElement(\"div\");\r\n\t\tarrow.classList.add(\"tabulator-arrow\");\r\n\r\n\t\tthis.element = document.createElement(\"div\");\r\n\t\tthis.element.classList.add(\"tabulator-row\");\r\n\t\tthis.element.classList.add(\"tabulator-group\");\r\n\t\tthis.element.classList.add(\"tabulator-group-level-\" + this.level);\r\n\t\tthis.element.setAttribute(\"role\", \"rowgroup\");\r\n\r\n\t\tthis.arrowElement = document.createElement(\"div\");\r\n\t\tthis.arrowElement.classList.add(\"tabulator-group-toggle\");\r\n\t\tthis.arrowElement.appendChild(arrow);\r\n\r\n\t\t//setup movable rows\r\n\t\tif(this.groupManager.table.options.movableRows !== false && this.groupManager.table.modExists(\"moveRow\")){\r\n\t\t\tthis.groupManager.table.modules.moveRow.initializeGroupHeader(this);\r\n\t\t}\r\n\t}\r\n\r\n\tcreateValueGroups(){\r\n\t\tvar level = this.level + 1;\r\n\t\tif(this.groupManager.allowedValues && this.groupManager.allowedValues[level]){\r\n\t\t\tthis.groupManager.allowedValues[level].forEach((value) => {\r\n\t\t\t\tthis._createGroup(value, level);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\taddBindings(){\r\n\t\tvar dblTap,\ttapHold, tap, toggleElement;\r\n\r\n\t\t//handle group click events\r\n\t\tif (this.groupManager.table.options.groupClick){\r\n\t\t\tthis.element.addEventListener(\"click\", (e) => {\r\n\t\t\t\tthis.groupManager.table.options.groupClick.call(this.groupManager.table, e, this.getComponent());\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.groupManager.table.options.groupDblClick){\r\n\t\t\tthis.element.addEventListener(\"dblclick\", (e) => {\r\n\t\t\t\tthis.groupManager.table.options.groupDblClick.call(this.groupManager.table, e, this.getComponent());\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.groupManager.table.options.groupContext){\r\n\t\t\tthis.element.addEventListener(\"contextmenu\", (e) => {\r\n\t\t\t\tthis.groupManager.table.options.groupContext.call(this.groupManager.table, e, this.getComponent());\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif ((this.groupManager.table.options.groupContextMenu || this.groupManager.table.options.groupClickMenu) && this.groupManager.table.modExists(\"menu\")){\r\n\t\t\tthis.groupManager.table.modules.menu.initializeGroup.call(this.groupManager.table.modules.menu, this);\r\n\t\t}\r\n\r\n\t\tif (this.groupManager.table.options.groupTap){\r\n\t\t\ttap = false;\r\n\r\n\t\t\tthis.element.addEventListener(\"touchstart\", (e) => {\r\n\t\t\t\ttap = true;\r\n\t\t\t}, {passive: true});\r\n\r\n\t\t\tthis.element.addEventListener(\"touchend\", (e) => {\r\n\t\t\t\tif(tap){\r\n\t\t\t\t\tthis.groupManager.table.options.groupTap(e, this.getComponent());\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttap = false;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.groupManager.table.options.groupDblTap){\r\n\t\t\tdblTap = null;\r\n\r\n\t\t\tthis.element.addEventListener(\"touchend\", (e) => {\r\n\t\t\t\tif(dblTap){\r\n\t\t\t\t\tclearTimeout(dblTap);\r\n\t\t\t\t\tdblTap = null;\r\n\r\n\t\t\t\t\tthis.groupManager.table.options.groupDblTap(e, this.getComponent());\r\n\t\t\t\t}else{\r\n\r\n\t\t\t\t\tdblTap = setTimeout(() => {\r\n\t\t\t\t\t\tclearTimeout(dblTap);\r\n\t\t\t\t\t\tdblTap = null;\r\n\t\t\t\t\t}, 300);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.groupManager.table.options.groupTapHold){\r\n\t\t\ttapHold = null;\r\n\r\n\t\t\tthis.element.addEventListener(\"touchstart\", (e) => {\r\n\t\t\t\tclearTimeout(tapHold);\r\n\r\n\t\t\t\ttapHold = setTimeout(() => {\r\n\t\t\t\t\tclearTimeout(tapHold);\r\n\t\t\t\t\ttapHold = null;\r\n\t\t\t\t\ttap = false;\r\n\t\t\t\t\tthis.groupManager.table.options.groupTapHold(e, this.getComponent());\r\n\t\t\t\t}, 1000);\r\n\r\n\t\t\t}, {passive: true});\r\n\r\n\t\t\tthis.element.addEventListener(\"touchend\", (e) => {\r\n\t\t\t\tclearTimeout(tapHold);\r\n\t\t\t\ttapHold = null;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(this.groupManager.table.options.groupToggleElement){\r\n\t\t\ttoggleElement = this.groupManager.table.options.groupToggleElement == \"arrow\" ? this.arrowElement : this.element;\r\n\r\n\t\t\ttoggleElement.addEventListener(\"click\", (e) => {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\te.stopImmediatePropagation();\r\n\t\t\t\tthis.toggleVisibility();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t_createGroup(groupID, level){\r\n\t\tvar groupKey = level + \"_\" + groupID;\r\n\t\tvar group = new Group(this.groupManager, this, level, groupID,  this.groupManager.groupIDLookups[level].field, this.groupManager.headerGenerator[level] || this.groupManager.headerGenerator[0], this.old ? this.old.groups[groupKey] : false);\r\n\r\n\t\tthis.groups[groupKey] = group;\r\n\t\tthis.groupList.push(group);\r\n\t}\r\n\r\n\t_addRowToGroup(row){\r\n\r\n\t\tvar level = this.level + 1;\r\n\r\n\t\tif(this.hasSubGroups){\r\n\t\t\tvar groupID = this.groupManager.groupIDLookups[level].func(row.getData()),\r\n\t\t\tgroupKey = level + \"_\" + groupID;\r\n\r\n\t\t\tif(this.groupManager.allowedValues && this.groupManager.allowedValues[level]){\r\n\t\t\t\tif(this.groups[groupKey]){\r\n\t\t\t\t\tthis.groups[groupKey].addRow(row);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(!this.groups[groupKey]){\r\n\t\t\t\t\tthis._createGroup(groupID, level);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.groups[groupKey].addRow(row);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t_addRow(row){\r\n\t\tthis.rows.push(row);\r\n\t\trow.modules.group = this;\r\n\t}\r\n\r\n\tinsertRow(row, to, after){\r\n\t\tvar data = this.conformRowData({});\r\n\r\n\t\trow.updateData(data);\r\n\r\n\t\tvar toIndex = this.rows.indexOf(to);\r\n\r\n\t\tif(toIndex > -1){\r\n\t\t\tif(after){\r\n\t\t\t\tthis.rows.splice(toIndex+1, 0, row);\r\n\t\t\t}else{\r\n\t\t\t\tthis.rows.splice(toIndex, 0, row);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(after){\r\n\t\t\t\tthis.rows.push(row);\r\n\t\t\t}else{\r\n\t\t\t\tthis.rows.unshift(row);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\trow.modules.group = this;\r\n\r\n\t\tthis.generateGroupHeaderContents();\r\n\r\n\t\tif(this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\"){\r\n\t\t\tthis.groupManager.table.modules.columnCalcs.recalcGroup(this);\r\n\t\t}\r\n\r\n\t\tthis.groupManager.updateGroupRows(true);\r\n\t}\r\n\r\n\tscrollHeader(left){\r\n\t\tthis.arrowElement.style.marginLeft = left;\r\n\r\n\t\tthis.groupList.forEach(function(child){\r\n\t\t\tchild.scrollHeader(left);\r\n\t\t});\r\n\t}\r\n\r\n\tgetRowIndex(row){}\r\n\r\n\t//update row data to match grouping contraints\r\n\tconformRowData(data){\r\n\t\tif(this.field){\r\n\t\t\tdata[this.field] = this.key;\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Data Conforming Error - Cannot conform row data to match new group as groupBy is a function\");\r\n\t\t}\r\n\r\n\t\tif(this.parent){\r\n\t\t\tdata = this.parent.conformRowData(data);\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\tremoveRow(row){\r\n\t\tvar index = this.rows.indexOf(row);\r\n\t\tvar el = row.getElement();\r\n\r\n\r\n\t\tif(index > -1){\r\n\t\t\tthis.rows.splice(index, 1);\r\n\t\t}\r\n\r\n\t\tif(!this.groupManager.table.options.groupValues && !this.rows.length){\r\n\t\t\tif(this.parent){\r\n\t\t\t\tthis.parent.removeGroup(this);\r\n\t\t\t}else{\r\n\t\t\t\tthis.groupManager.removeGroup(this);\r\n\t\t\t}\r\n\r\n\t\t\tthis.groupManager.updateGroupRows(true);\r\n\t\t}else{\r\n\r\n\t\t\tif(el.parentNode){\r\n\t\t\t\tel.parentNode.removeChild(el);\r\n\t\t\t}\r\n\r\n\t\t\tthis.generateGroupHeaderContents();\r\n\r\n\t\t\tif(this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\"){\r\n\t\t\t\tthis.groupManager.table.modules.columnCalcs.recalcGroup(this);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tremoveGroup(group){\r\n\t\tvar groupKey = group.level + \"_\" + group.key,\r\n\t\tindex;\r\n\r\n\t\tif(this.groups[groupKey]){\r\n\t\t\tdelete this.groups[groupKey];\r\n\r\n\t\t\tindex = this.groupList.indexOf(group);\r\n\r\n\t\t\tif(index > -1){\r\n\t\t\t\tthis.groupList.splice(index, 1);\r\n\t\t\t}\r\n\r\n\t\t\tif(!this.groupList.length){\r\n\t\t\t\tif(this.parent){\r\n\t\t\t\t\tthis.parent.removeGroup(this);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.groupManager.removeGroup(this);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetHeadersAndRows(noCalc){\r\n\t\tvar output = [];\r\n\r\n\t\toutput.push(this);\r\n\r\n\t\tthis._visSet();\r\n\r\n\t\tif(this.visible){\r\n\t\t\tif(this.groupList.length){\r\n\t\t\t\tthis.groupList.forEach(function(group){\r\n\t\t\t\t\toutput = output.concat(group.getHeadersAndRows(noCalc));\r\n\t\t\t\t});\r\n\r\n\t\t\t}else{\r\n\t\t\t\tif(!noCalc && this.groupManager.table.options.columnCalcs != \"table\" && this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasTopCalcs()){\r\n\t\t\t\t\tif(this.calcs.top){\r\n\t\t\t\t\t\tthis.calcs.top.detachElement();\r\n\t\t\t\t\t\tthis.calcs.top.deleteCells();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\r\n\t\t\t\t\toutput.push(this.calcs.top);\r\n\t\t\t\t}\r\n\r\n\t\t\t\toutput = output.concat(this.rows);\r\n\r\n\t\t\t\tif(!noCalc && this.groupManager.table.options.columnCalcs != \"table\" &&  this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasBottomCalcs()){\r\n\t\t\t\t\tif(this.calcs.bottom){\r\n\t\t\t\t\t\tthis.calcs.bottom.detachElement();\r\n\t\t\t\t\t\tthis.calcs.bottom.deleteCells();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\r\n\t\t\t\t\toutput.push(this.calcs.bottom);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(!this.groupList.length && this.groupManager.table.options.columnCalcs != \"table\"){\r\n\r\n\t\t\t\tif(this.groupManager.table.modExists(\"columnCalcs\")){\r\n\r\n\t\t\t\t\tif(!noCalc && this.groupManager.table.modules.columnCalcs.hasTopCalcs()){\r\n\t\t\t\t\t\tif(this.calcs.top){\r\n\t\t\t\t\t\t\tthis.calcs.top.detachElement();\r\n\t\t\t\t\t\t\tthis.calcs.top.deleteCells();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(this.groupManager.table.options.groupClosedShowCalcs){\r\n\t\t\t\t\t\t\tthis.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\r\n\t\t\t\t\t\t\toutput.push(this.calcs.top);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(!noCalc && this.groupManager.table.modules.columnCalcs.hasBottomCalcs()){\r\n\t\t\t\t\t\tif(this.calcs.bottom){\r\n\t\t\t\t\t\t\tthis.calcs.bottom.detachElement();\r\n\t\t\t\t\t\t\tthis.calcs.bottom.deleteCells();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(this.groupManager.table.options.groupClosedShowCalcs){\r\n\t\t\t\t\t\t\tthis.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\r\n\t\t\t\t\t\t\toutput.push(this.calcs.bottom);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgetData(visible, transform){\r\n\t\tvar output = [];\r\n\r\n\t\tthis._visSet();\r\n\r\n\t\tif(!visible || (visible && this.visible)){\r\n\t\t\tthis.rows.forEach((row) => {\r\n\t\t\t\toutput.push(row.getData(transform || \"data\"));\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgetRowCount(){\r\n\t\tvar count = 0;\r\n\r\n\t\tif(this.groupList.length){\r\n\t\t\tthis.groupList.forEach((group) => {\r\n\t\t\t\tcount += group.getRowCount();\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tcount = this.rows.length;\r\n\t\t}\r\n\t\treturn count;\r\n\t}\r\n\r\n\ttoggleVisibility(){\r\n\t\tif(this.visible){\r\n\t\t\tthis.hide();\r\n\t\t}else{\r\n\t\t\tthis.show();\r\n\t\t}\r\n\t}\r\n\r\n\thide(){\r\n\t\tthis.visible = false;\r\n\r\n\t\tif(this.groupManager.table.rowManager.getRenderMode() == \"classic\" && !this.groupManager.table.options.pagination){\r\n\r\n\t\t\tthis.element.classList.remove(\"tabulator-group-visible\");\r\n\r\n\t\t\tif(this.groupList.length){\r\n\t\t\t\tthis.groupList.forEach((group) => {\r\n\r\n\t\t\t\t\tvar rows = group.getHeadersAndRows();\r\n\r\n\t\t\t\t\trows.forEach((row) => {\r\n\t\t\t\t\t\trow.detachElement();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t}else{\r\n\t\t\t\tthis.rows.forEach((row) => {\r\n\t\t\t\t\tvar rowEl = row.getElement();\r\n\t\t\t\t\trowEl.parentNode.removeChild(rowEl);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tthis.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(), this.groupManager.getDisplayIndex());\r\n\r\n\t\t\tthis.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth();\r\n\r\n\t\t}else{\r\n\t\t\tthis.groupManager.updateGroupRows(true);\r\n\t\t}\r\n\r\n\t\tthis.groupManager.table.options.groupVisibilityChanged.call(this.table, this.getComponent(), false);\r\n\t}\r\n\r\n\tshow(){\r\n\t\tthis.visible = true;\r\n\r\n\t\tif(this.groupManager.table.rowManager.getRenderMode() == \"classic\" && !this.groupManager.table.options.pagination){\r\n\r\n\t\t\tthis.element.classList.add(\"tabulator-group-visible\");\r\n\r\n\t\t\tvar prev = this.getElement();\r\n\r\n\t\t\tif(this.groupList.length){\r\n\t\t\t\tthis.groupList.forEach((group) => {\r\n\t\t\t\t\tvar rows = group.getHeadersAndRows();\r\n\r\n\t\t\t\t\trows.forEach((row) => {\r\n\t\t\t\t\t\tvar rowEl = row.getElement();\r\n\t\t\t\t\t\tprev.parentNode.insertBefore(rowEl, prev.nextSibling);\r\n\t\t\t\t\t\trow.initialize();\r\n\t\t\t\t\t\tprev = rowEl;\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t}else{\r\n\t\t\t\tthis.rows.forEach((row) => {\r\n\t\t\t\t\tvar rowEl = row.getElement();\r\n\t\t\t\t\tprev.parentNode.insertBefore(rowEl, prev.nextSibling);\r\n\t\t\t\t\trow.initialize();\r\n\t\t\t\t\tprev = rowEl;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tthis.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(), this.groupManager.getDisplayIndex());\r\n\r\n\t\t\tthis.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth();\r\n\t\t}else{\r\n\t\t\tthis.groupManager.updateGroupRows(true);\r\n\t\t}\r\n\r\n\t\tthis.groupManager.table.options.groupVisibilityChanged.call(this.table, this.getComponent(), true);\r\n\t}\r\n\r\n\t_visSet(){\r\n\t\tvar data = [];\r\n\r\n\t\tif(typeof this.visible == \"function\"){\r\n\r\n\t\t\tthis.rows.forEach(function(row){\r\n\t\t\t\tdata.push(row.getData());\r\n\t\t\t});\r\n\r\n\t\t\tthis.visible = this.visible(this.key, this.getRowCount(), data, this.getComponent());\r\n\t\t}\r\n\t}\r\n\r\n\tgetRowGroup(row){\r\n\t\tvar match = false;\r\n\t\tif(this.groupList.length){\r\n\t\t\tthis.groupList.forEach(function(group){\r\n\t\t\t\tvar result = group.getRowGroup(row);\r\n\r\n\t\t\t\tif(result){\r\n\t\t\t\t\tmatch = result;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tif(this.rows.find(function(item){\r\n\t\t\t\treturn item === row;\r\n\t\t\t})){\r\n\t\t\t\tmatch = this;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn match;\r\n\t}\r\n\r\n\tgetSubGroups(component){\r\n\t\tvar output = [];\r\n\r\n\t\tthis.groupList.forEach(function(child){\r\n\t\t\toutput.push(component ? child.getComponent() : child);\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgetRows(compoment){\r\n\t\tvar output = [];\r\n\r\n\t\tthis.rows.forEach(function(row){\r\n\t\t\toutput.push(compoment ? row.getComponent() : row);\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgenerateGroupHeaderContents(){\r\n\t\tvar data = [];\r\n\r\n\t\tthis.rows.forEach(function(row){\r\n\t\t\tdata.push(row.getData());\r\n\t\t});\r\n\r\n\t\tthis.elementContents = this.generator(this.key, this.getRowCount(), data, this.getComponent());\r\n\r\n\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\r\n\r\n\t\tif(typeof this.elementContents === \"string\"){\r\n\t\t\tthis.element.innerHTML = this.elementContents;\r\n\t\t}else{\r\n\t\t\tthis.element.appendChild(this.elementContents);\r\n\t\t}\r\n\r\n\t\tthis.element.insertBefore(this.arrowElement, this.element.firstChild);\r\n\t}\r\n\r\n\tgetPath(path = []) {\r\n\t\tpath.unshift(this.key);\r\n\t\tif(this.parent) {\r\n\t\t\tthis.parent.getPath(path);\r\n\t\t}\r\n\t\treturn path;\r\n\t}\r\n\r\n\t////////////// Standard Row Functions //////////////\r\n\r\n\tgetElement(){\r\n\t\tthis.addBindingsd = false;\r\n\r\n\t\tthis._visSet();\r\n\r\n\t\tif(this.visible){\r\n\t\t\tthis.element.classList.add(\"tabulator-group-visible\");\r\n\t\t}else{\r\n\t\t\tthis.element.classList.remove(\"tabulator-group-visible\");\r\n\t\t}\r\n\r\n\t\tfor(var i = 0; i < this.element.childNodes.length; ++i){\r\n\t\t\tthis.element.childNodes[i].parentNode.removeChild(this.element.childNodes[i]);\r\n\t\t}\r\n\r\n\t\tthis.generateGroupHeaderContents();\r\n\r\n\t\t// this.addBindings();\r\n\r\n\t\treturn this.element;\r\n\t}\r\n\r\n\tdetachElement(){\r\n\t\tif (this.element && this.element.parentNode){\r\n\t\t\tthis.element.parentNode.removeChild(this.element);\r\n\t\t}\r\n\t}\r\n\r\n\t//normalize the height of elements in the row\r\n\tnormalizeHeight(){\r\n\t\tthis.setHeight(this.element.clientHeight);\r\n\t}\r\n\r\n\tinitialize(force){\r\n\t\tif(!this.initialized || force){\r\n\t\t\tthis.normalizeHeight();\r\n\t\t\tthis.initialized = true;\r\n\t\t}\r\n\t}\r\n\r\n\treinitialize(){\r\n\t\tthis.initialized = false;\r\n\t\tthis.height = 0;\r\n\r\n\t\tif(Helpers.elVisible(this.element)){\r\n\t\t\tthis.initialize(true);\r\n\t\t}\r\n\t}\r\n\r\n\tsetHeight(height){\r\n\t\tif(this.height != height){\r\n\t\t\tthis.height = height;\r\n\t\t\tthis.outerHeight = this.element.offsetHeight;\r\n\t\t}\r\n\t}\r\n\r\n\t//return rows outer height\r\n\tgetHeight(){\r\n\t\treturn this.outerHeight;\r\n\t}\r\n\r\n\tgetGroup(){\r\n\t\treturn this;\r\n\t}\r\n\r\n\treinitializeHeight(){}\r\n\r\n\tcalcHeight(){}\r\n\r\n\tsetCellHeight(){}\r\n\r\n\tclearCellHeight(){}\r\n\r\n\t//////////////// Object Generation /////////////////\r\n\tgetComponent(){\r\n\t\tif(!this.component){\r\n\t\t\tthis.component = new GroupComponent(this);\r\n\t\t}\r\n\r\n\t\treturn this.component;\r\n\t}\r\n}\r\n\r\nexport default Group;","import Module from '../../core/Module.js';\r\n\r\nimport GroupComponent from './GroupComponent.js';\r\nimport Group from './Group.js';\r\n\r\nclass GroupRows extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.groupIDLookups = false; //enable table grouping and set field to group by\r\n\t\tthis.startOpen = [function(){return false;}]; //starting state of group\r\n\t\tthis.headerGenerator = [function(){return \"\";}];\r\n\t\tthis.groupList = []; //ordered list of groups\r\n\t\tthis.allowedValues = false;\r\n\t\tthis.groups = {}; //hold row groups\r\n\t\tthis.displayIndex = 0; //index in display pipeline\r\n\t}\r\n\r\n\t//initialize group configuration\r\n\tinitialize(){\r\n\t\tvar groupBy = this.table.options.groupBy,\r\n\t\tstartOpen = this.table.options.groupStartOpen,\r\n\t\tgroupHeader = this.table.options.groupHeader;\r\n\r\n\t\tthis.allowedValues = this.table.options.groupValues;\r\n\r\n\t\tif(Array.isArray(groupBy) && Array.isArray(groupHeader) && groupBy.length > groupHeader.length){\r\n\t\t\tconsole.warn(\"Error creating group headers, groupHeader array is shorter than groupBy array\");\r\n\t\t}\r\n\r\n\t\tthis.headerGenerator = [function(){return \"\";}];\r\n\t\tthis.startOpen = [function(){return false;}]; //starting state of group\r\n\r\n\t\tthis.table.modules.localize.bind(\"groups|item\", (langValue, lang) => {\r\n\t\t\tthis.headerGenerator[0] = (value, count, data) => { //header layout function\r\n\t\t\t\treturn (typeof value === \"undefined\" ? \"\" : value) + \"<span>(\" + count + \" \" + ((count === 1) ? langValue : lang.groups.items) + \")</span>\";\r\n\t\t\t};\r\n\t\t});\r\n\r\n\t\tthis.groupIDLookups = [];\r\n\r\n\t\tif(Array.isArray(groupBy) || groupBy){\r\n\t\t\tif(this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"table\" && this.table.options.columnCalcs != \"both\"){\r\n\t\t\t\tthis.table.modules.columnCalcs.removeCalcs();\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"group\"){\r\n\r\n\t\t\t\tvar cols = this.table.columnManager.getRealColumns();\r\n\r\n\t\t\t\tcols.forEach((col) => {\r\n\t\t\t\t\tif(col.definition.topCalc){\r\n\t\t\t\t\t\tthis.table.modules.columnCalcs.initializeTopRow();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(col.definition.bottomCalc){\r\n\t\t\t\t\t\tthis.table.modules.columnCalcs.initializeBottomRow();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(!Array.isArray(groupBy)){\r\n\t\t\tgroupBy = [groupBy];\r\n\t\t}\r\n\r\n\t\tgroupBy.forEach((group, i) => {\r\n\t\t\tvar lookupFunc, column;\r\n\r\n\t\t\tif(typeof group == \"function\"){\r\n\t\t\t\tlookupFunc = group;\r\n\t\t\t}else{\r\n\t\t\t\tcolumn = this.table.columnManager.getColumnByField(group);\r\n\r\n\t\t\t\tif(column){\r\n\t\t\t\t\tlookupFunc = function(data){\r\n\t\t\t\t\t\treturn column.getFieldValue(data);\r\n\t\t\t\t\t};\r\n\t\t\t\t}else{\r\n\t\t\t\t\tlookupFunc = function(data){\r\n\t\t\t\t\t\treturn data[group];\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.groupIDLookups.push({\r\n\t\t\t\tfield: typeof group === \"function\" ? false : group,\r\n\t\t\t\tfunc:lookupFunc,\r\n\t\t\t\tvalues:this.allowedValues ? this.allowedValues[i] : false,\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tif(startOpen){\r\n\t\t\tif(!Array.isArray(startOpen)){\r\n\t\t\t\tstartOpen = [startOpen];\r\n\t\t\t}\r\n\r\n\t\t\tstartOpen.forEach((level) => {\r\n\t\t\t\tlevel = typeof level == \"function\" ? level : function(){return true;};\r\n\t\t\t});\r\n\r\n\t\t\tthis.startOpen = startOpen;\r\n\t\t}\r\n\r\n\t\tif(groupHeader){\r\n\t\t\tthis.headerGenerator = Array.isArray(groupHeader) ? groupHeader : [groupHeader];\r\n\t\t}\r\n\r\n\t\tthis.initialized = true;\r\n\t}\r\n\r\n\tsetDisplayIndex(index){\r\n\t\tthis.displayIndex = index;\r\n\t}\r\n\r\n\tgetDisplayIndex(){\r\n\t\treturn this.displayIndex;\r\n\t}\r\n\r\n\t//return appropriate rows with group headers\r\n\tgetRows(rows){\r\n\t\tif(this.groupIDLookups.length){\r\n\r\n\t\t\tthis.table.options.dataGrouping.call(this.table);\r\n\r\n\t\t\tthis.generateGroups(rows);\r\n\r\n\t\t\tif(this.table.options.dataGrouped){\r\n\t\t\t\tthis.table.options.dataGrouped.call(this.table, this.getGroups(true));\r\n\t\t\t}\r\n\r\n\t\t\treturn this.updateGroupRows();\r\n\r\n\t\t}else{\r\n\t\t\treturn rows.slice(0);\r\n\t\t}\r\n\t}\r\n\r\n\tgetGroups(compoment){\r\n\t\tvar groupComponents = [];\r\n\r\n\t\tthis.groupList.forEach(function(group){\r\n\t\t\tgroupComponents.push(compoment ? group.getComponent() : group);\r\n\t\t});\r\n\r\n\t\treturn groupComponents;\r\n\t}\r\n\r\n\tgetChildGroups(group){\r\n\t\tvar groupComponents = [];\r\n\r\n\t\tif(!group){\r\n\t\t\tgroup = this;\r\n\t\t}\r\n\r\n\t\tgroup.groupList.forEach((child) => {\r\n\t\t\tif(child.groupList.length){\r\n\t\t\t\tgroupComponents = groupComponents.concat(this.getChildGroups(child));\r\n\t\t\t}else{\r\n\t\t\t\tgroupComponents.push(child);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn groupComponents;\r\n\t}\r\n\r\n\twipe(){\r\n\t\tthis.groupList.forEach(function(group){\r\n\t\t\tgroup.wipe();\r\n\t\t});\r\n\t}\r\n\r\n\tpullGroupListData(groupList) {\r\n\t\tvar groupListData = [];\r\n\r\n\t\tgroupList.forEach((group) => {\r\n\t\t\tvar groupHeader = {};\r\n\t\t\tgroupHeader.level = 0;\r\n\t\t\tgroupHeader.rowCount = 0;\r\n\t\t\tgroupHeader.headerContent = \"\";\r\n\t\t\tvar childData = [];\r\n\r\n\t\t\tif (group.hasSubGroups) {\r\n\t\t\t\tchildData = this.pullGroupListData(group.groupList);\r\n\r\n\t\t\t\tgroupHeader.level = group.level;\r\n\t\t\t\tgroupHeader.rowCount = childData.length - group.groupList.length; // data length minus number of sub-headers\r\n\t\t\t\tgroupHeader.headerContent = group.generator(group.key, groupHeader.rowCount, group.rows, group);\r\n\r\n\t\t\t\tgroupListData.push(groupHeader);\r\n\t\t\t\tgroupListData = groupListData.concat(childData);\r\n\t\t\t}\r\n\r\n\t\t\telse {\r\n\t\t\t\tgroupHeader.level = group.level;\r\n\t\t\t\tgroupHeader.headerContent = group.generator(group.key, group.rows.length, group.rows, group);\r\n\t\t\t\tgroupHeader.rowCount = group.getRows().length;\r\n\r\n\t\t\t\tgroupListData.push(groupHeader);\r\n\r\n\t\t\t\tgroup.getRows().forEach((row) => {\r\n\t\t\t\t\tgroupListData.push(row.getData(\"data\"));\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn groupListData\r\n\t}\r\n\r\n\tgetGroupedData(){\r\n\r\n\t\treturn this.pullGroupListData(this.groupList);\r\n\t}\r\n\r\n\tgetRowGroup(row){\r\n\t\tvar match = false;\r\n\r\n\t\tthis.groupList.forEach((group) => {\r\n\t\t\tvar result = group.getRowGroup(row);\r\n\r\n\t\t\tif(result){\r\n\t\t\t\tmatch = result;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn match;\r\n\t}\r\n\r\n\tcountGroups(){\r\n\t\treturn this.groupList.length;\r\n\t}\r\n\r\n\tgenerateGroups(rows){\r\n\t\tvar oldGroups = this.groups;\r\n\r\n\t\tthis.groups = {};\r\n\t\tthis.groupList =[];\r\n\r\n\t\tif(this.allowedValues && this.allowedValues[0]){\r\n\t\t\tthis.allowedValues[0].forEach((value) => {\r\n\t\t\t\tthis.createGroup(value, 0, oldGroups);\r\n\t\t\t});\r\n\r\n\t\t\trows.forEach((row) => {\r\n\t\t\t\tthis.assignRowToExistingGroup(row, oldGroups);\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\trows.forEach((row) => {\r\n\t\t\t\tthis.assignRowToGroup(row, oldGroups);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcreateGroup(groupID, level, oldGroups){\r\n\t\tvar groupKey = level + \"_\" + groupID,\r\n\t\tgroup;\r\n\r\n\t\toldGroups = oldGroups || [];\r\n\r\n\t\tgroup = new Group(this, false, level, groupID, this.groupIDLookups[0].field, this.headerGenerator[0], oldGroups[groupKey]);\r\n\r\n\t\tthis.groups[groupKey] = group;\r\n\t\tthis.groupList.push(group);\r\n\t}\r\n\r\n\tassignRowToExistingGroup(row, oldGroups){\r\n\t\tvar groupID = this.groupIDLookups[0].func(row.getData()),\r\n\t\tgroupKey = \"0_\" + groupID;\r\n\r\n\t\tif(this.groups[groupKey]){\r\n\t\t\tthis.groups[groupKey].addRow(row);\r\n\t\t}\r\n\t}\r\n\r\n\tassignRowToGroup(row, oldGroups){\r\n\t\tvar groupID = this.groupIDLookups[0].func(row.getData()),\r\n\t\tnewGroupNeeded = !this.groups[\"0_\" + groupID];\r\n\r\n\t\tif(newGroupNeeded){\r\n\t\t\tthis.createGroup(groupID, 0, oldGroups);\r\n\t\t}\r\n\r\n\t\tthis.groups[\"0_\" + groupID].addRow(row);\r\n\r\n\t\treturn !newGroupNeeded;\r\n\t}\r\n\r\n\treassignRowToGroup(row){\r\n\t\tvar oldRowGroup = row.getGroup(),\r\n\t\t\toldGroupPath = oldRowGroup.getPath(),\r\n\t\t\tnewGroupPath = this.getExpectedPath(row),\r\n\t\t\tsamePath = true;\r\n\r\n\t\t// figure out if new group path is the same as old group path\r\n\t\tvar samePath = (oldGroupPath.length == newGroupPath.length) && oldGroupPath.every((element, index) => {\r\n\t\t\treturn element === newGroupPath[index];\r\n\t\t});\r\n\r\n\t\t// refresh if they new path and old path aren't the same (aka the row's groupings have changed)\r\n\t\tif(!samePath) {\r\n\t\t\toldRowGroup.removeRow(row);\r\n\t\t\tthis.assignRowToGroup(row, this.groups);\r\n\t\t\tthis.table.rowManager.refreshActiveData(\"group\", false, true);\r\n\t\t}\r\n\t}\r\n\r\n\tgetExpectedPath(row) {\r\n\t\tvar groupPath = [], rowData = row.getData();\r\n\r\n\t\tthis.groupIDLookups.forEach((groupId) => {\r\n\t\t\tgroupPath.push(groupId.func(rowData));\r\n\t\t});\r\n\r\n\t\treturn groupPath;\r\n\t}\r\n\r\n\tupdateGroupRows(force){\r\n\t\tvar output = [],\r\n\t\toldRowCount;\r\n\r\n\t\tthis.groupList.forEach((group) => {\r\n\t\t\toutput = output.concat(group.getHeadersAndRows());\r\n\t\t});\r\n\r\n\t\t//force update of table display\r\n\t\tif(force){\r\n\t\t\tvar displayIndex = this.table.rowManager.setDisplayRows(output, this.getDisplayIndex());\r\n\r\n\t\t\tif(displayIndex !== true){\r\n\t\t\t\tthis.setDisplayIndex(displayIndex);\r\n\t\t\t}\r\n\r\n\t\t\tthis.table.rowManager.refreshActiveData(\"group\", true, true);\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tscrollHeaders(left){\r\n\t\tif(this.table.options.virtualDomHoz){\r\n\t\t\tleft -= this.table.vdomHoz.vDomPadLeft;\r\n\t\t}\r\n\r\n\t\tleft = left + \"px\";\r\n\r\n\t\tthis.groupList.forEach((group) => {\r\n\t\t\tgroup.scrollHeader(left);\r\n\t\t});\r\n\t}\r\n\r\n\tremoveGroup(group){\r\n\t\tvar groupKey = group.level + \"_\" + group.key,\r\n\t\tindex;\r\n\r\n\t\tif(this.groups[groupKey]){\r\n\t\t\tdelete this.groups[groupKey];\r\n\r\n\t\t\tindex = this.groupList.indexOf(group);\r\n\r\n\t\t\tif(index > -1){\r\n\t\t\t\tthis.groupList.splice(index, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nGroupRows.moduleName = \"groupRows\";\r\n\r\nexport default GroupRows;","export default {\r\n\tcellEdit: function(action){\r\n\t\taction.component.setValueProcessData(action.data.oldValue);\r\n\t},\r\n\r\n\trowAdd: function(action){\r\n\t\taction.component.deleteActual();\r\n\t},\r\n\r\n\trowDelete: function(action){\r\n\t\tvar newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\r\n\r\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\r\n\t\t\tthis.table.modules.groupRows.updateGroupRows(true);\r\n\t\t}\r\n\r\n\t\tthis._rebindRow(action.component, newRow);\r\n\t},\r\n\r\n\trowMove: function(action){\r\n\t\tthis.table.rowManager.moveRowActual(action.component, this.table.rowManager.rows[action.data.posFrom], !action.data.after);\r\n\t\tthis.table.rowManager.redraw();\r\n\t},\r\n};","export default {\r\n\tcellEdit: function(action){\r\n\t\taction.component.setValueProcessData(action.data.newValue);\r\n\t},\r\n\r\n\trowAdd: function(action){\r\n\t\tvar newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\r\n\r\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\r\n\t\t\tthis.table.modules.groupRows.updateGroupRows(true);\r\n\t\t}\r\n\r\n\t\tthis._rebindRow(action.component, newRow);\r\n\t},\r\n\r\n\trowDelete:function(action){\r\n\t\taction.component.deleteActual();\r\n\t},\r\n\r\n\trowMove: function(action){\r\n\t\tthis.table.rowManager.moveRowActual(action.component, this.table.rowManager.rows[action.data.posTo], action.data.after);\r\n\t\tthis.table.rowManager.redraw();\r\n\t},\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport defaultUndoers from './defaults/undoers.js';\r\nimport defaultRedoers from './defaults/redoers.js';\r\n\r\nclass History extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.history = [];\r\n\t\tthis.index = -1;\r\n\t}\r\n\r\n\tclear(){\r\n\t\tthis.history = [];\r\n\t\tthis.index = -1;\r\n\t}\r\n\r\n\taction(type, component, data){\r\n\t\tthis.history = this.history.slice(0, this.index + 1);\r\n\r\n\t\tthis.history.push({\r\n\t\t\ttype:type,\r\n\t\t\tcomponent:component,\r\n\t\t\tdata:data,\r\n\t\t});\r\n\r\n\t\tthis.index ++;\r\n\t}\r\n\r\n\tgetHistoryUndoSize(){\r\n\t\treturn this.index + 1;\r\n\t}\r\n\r\n\tgetHistoryRedoSize(){\r\n\t\treturn this.history.length - (this.index + 1);\r\n\t}\r\n\r\n\tclearComponentHistory(component){\r\n\t\tvar index = this.history.findIndex(function(item){\r\n\t\t\treturn item.component === component;\r\n\t\t});\r\n\r\n\t\tif(index > -1){\r\n\t\t\tthis.history.splice(index, 1);\r\n\t \t\tif(index <= this.index){\r\n\t \t\t\tthis.index--;\r\n\t \t\t}\r\n\r\n\t \t\tthis.clearComponentHistory(component);\r\n\t\t}\r\n\t}\r\n\r\n\tundo(){\r\n\t\tif(this.index > -1){\r\n\t\t\tlet action = this.history[this.index];\r\n\r\n\t\t\tHistory.undoers[action.type].call(this, action);\r\n\r\n\t\t\tthis.index--;\r\n\r\n\t\t\tthis.table.options.historyUndo.call(this.table, action.type, action.component.getComponent(), action.data);\r\n\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"History Undo Error - No more history to undo\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tredo(){\r\n\t\tif(this.history.length-1 > this.index){\r\n\r\n\t\t\tthis.index++;\r\n\r\n\t\t\tlet action = this.history[this.index];\r\n\r\n\t\t\tHistory.redoers[action.type].call(this, action);\r\n\r\n\t\t\tthis.table.options.historyRedo.call(this.table, action.type, action.component.getComponent(), action.data);\r\n\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"History Redo Error - No more history to redo\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t//rebind rows to new element after deletion\r\n\t_rebindRow(oldRow, newRow){\r\n\t\tthis.history.forEach(function(action){\r\n\t\t\tif(action.component instanceof Row){\r\n\t\t\t\tif(action.component === oldRow){\r\n\t\t\t\t\taction.component = newRow;\r\n\t\t\t\t}\r\n\t\t\t}else if(action.component instanceof Cell){\r\n\t\t\t\tif(action.component.row === oldRow){\r\n\t\t\t\t\tvar field = action.component.column.getField();\r\n\r\n\t\t\t\t\tif(field){\r\n\t\t\t\t\t\taction.component = newRow.getCell(field);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nHistory.moduleName = \"history\";\r\n\r\n//load defaults\r\nHistory.undoers = defaultUndoers;\r\nHistory.redoers = defaultRedoers;\r\n\r\nexport default History;","import Module from '../../core/Module.js';\r\n\r\nclass HtmlTableImport extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.fieldIndex = [];\r\n\t\tthis.hasIndex = false;\r\n\t}\r\n\r\n\tparseTable(){\r\n\t\tvar element = this.table.element,\r\n\t\toptions = this.table.options,\r\n\t\tcolumns = options.columns,\r\n\t\theaders = element.getElementsByTagName(\"th\"),\r\n\t\trows = element.getElementsByTagName(\"tbody\")[0],\r\n\t\tdata = [],\r\n\t\tnewTable;\r\n\r\n\t\tthis.hasIndex = false;\r\n\r\n\t\tthis.table.options.htmlImporting.call(this.table);\r\n\r\n\t\trows = rows ? rows.getElementsByTagName(\"tr\") : [];\r\n\r\n\t\t//check for tablator inline options\r\n\t\tthis._extractOptions(element, options);\r\n\r\n\t\tif(headers.length){\r\n\t\t\tthis._extractHeaders(headers, rows);\r\n\t\t}else{\r\n\t\t\tthis._generateBlankHeaders(headers, rows);\r\n\t\t}\r\n\r\n\t\t//iterate through table rows and build data set\r\n\t\tfor(var index = 0; index < rows.length; index++){\r\n\t\t\tvar row = rows[index],\r\n\t\t\tcells = row.getElementsByTagName(\"td\"),\r\n\t\t\titem = {};\r\n\r\n\t\t\t//create index if the dont exist in table\r\n\t\t\tif(!this.hasIndex){\r\n\t\t\t\titem[options.index] = index;\r\n\t\t\t}\r\n\r\n\t\t\tfor(var i = 0; i < cells.length; i++){\r\n\t\t\t\tvar cell = cells[i];\r\n\t\t\t\tif(typeof this.fieldIndex[i] !== \"undefined\"){\r\n\t\t\t\t\titem[this.fieldIndex[i]] = cell.innerHTML;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//add row data to item\r\n\t\t\tdata.push(item);\r\n\t\t}\r\n\r\n\t\t//create new element\r\n\t\tvar newElement = document.createElement(\"div\");\r\n\r\n\t\t//transfer attributes to new element\r\n\t\tvar attributes = element.attributes;\r\n\r\n\t\t// loop through attributes and apply them on div\r\n\r\n\t\tfor(var i in attributes){\r\n\t\t\tif(typeof attributes[i] == \"object\"){\r\n\t\t\t\tnewElement.setAttribute(attributes[i].name, attributes[i].value);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// replace table with div element\r\n\t\telement.parentNode.replaceChild(newElement, element);\r\n\r\n\t\toptions.data = data;\r\n\r\n\t\tthis.table.options.htmlImported.call(this.table);\r\n\r\n\t\tthis.table.element = newElement;\r\n\t}\r\n\r\n\t//extract tabulator attribute options\r\n\t_extractOptions(element, options, defaultOptions){\r\n\t\tvar attributes = element.attributes;\r\n\t\tvar optionsArr = defaultOptions ? Object.assign([], defaultOptions) : Object.keys(options);\r\n\t\tvar optionsList = {};\r\n\r\n\t\toptionsArr.forEach((item) => {\r\n\t\t\toptionsList[item.toLowerCase()] = item;\r\n\t\t});\r\n\r\n\t\tfor(var index in attributes){\r\n\t\t\tvar attrib = attributes[index];\r\n\t\t\tvar name;\r\n\r\n\t\t\tif(attrib && typeof attrib == \"object\" && attrib.name && attrib.name.indexOf(\"tabulator-\") === 0){\r\n\t\t\t\tname = attrib.name.replace(\"tabulator-\", \"\");\r\n\r\n\t\t\t\tif(typeof optionsList[name] !== \"undefined\"){\r\n\t\t\t\t\toptions[optionsList[name]] = this._attribValue(attrib.value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//get value of attribute\r\n\t_attribValue(value){\r\n\t\tif(value === \"true\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tif(value === \"false\"){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t}\r\n\r\n\t//find column if it has already been defined\r\n\t_findCol(title){\r\n\t\tvar match = this.table.options.columns.find((column) => {\r\n\t\t\treturn column.title === title;\r\n\t\t});\r\n\r\n\t\treturn match || false;\r\n\t}\r\n\r\n\t//extract column from headers\r\n\t_extractHeaders(headers, rows){\r\n\t\tfor(var index = 0; index < headers.length; index++){\r\n\t\t\tvar header = headers[index],\r\n\t\t\texists = false,\r\n\t\t\tcol = this._findCol(header.textContent),\r\n\t\t\twidth, attributes;\r\n\r\n\t\t\tif(col){\r\n\t\t\t\texists = true;\r\n\t\t\t}else{\r\n\t\t\t\tcol = {title:header.textContent.trim()};\r\n\t\t\t}\r\n\r\n\t\t\tif(!col.field) {\r\n\t\t\t\tcol.field = header.textContent.trim().toLowerCase().replace(\" \", \"_\");\r\n\t\t\t}\r\n\r\n\t\t\twidth = header.getAttribute(\"width\");\r\n\r\n\t\t\tif(width && !col.width)\t{\r\n\t\t\t\tcol.width = width;\r\n\t\t\t}\r\n\r\n\t\t\t//check for tablator inline options\r\n\t\t\tattributes = header.attributes;\r\n\r\n\t\t\t// //check for tablator inline options\r\n\t\t\tthis._extractOptions(header, col, Column.prototype.defaultOptionList);\r\n\r\n\t\t\tthis.fieldIndex[index] = col.field;\r\n\r\n\t\t\tif(col.field == this.table.options.index){\r\n\t\t\t\tthis.hasIndex = true;\r\n\t\t\t}\r\n\r\n\t\t\tif(!exists){\r\n\t\t\t\tthis.table.options.columns.push(col);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\r\n\t//generate blank headers\r\n\t_generateBlankHeaders(headers, rows){\r\n\t\tfor(var index = 0; index < headers.length; index++){\r\n\t\t\tvar header = headers[index],\r\n\t\t\tcol = {title:\"\", field:\"col\" + index};\r\n\r\n\t\t\tthis.fieldIndex[index] = col.field;\r\n\r\n\t\t\tvar width = header.getAttribute(\"width\");\r\n\r\n\t\t\tif(width){\r\n\t\t\t\tcol.width = width;\r\n\t\t\t}\r\n\r\n\t\t\tthis.table.options.columns.push(col);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nHtmlTableImport.moduleName = \"htmlTableImport\";\r\n\r\nexport default HtmlTableImport;","export default {\r\n\tnavPrev:\"shift + 9\",\r\n\tnavNext:9,\r\n\tnavUp:38,\r\n\tnavDown:40,\r\n\tscrollPageUp:33,\r\n\tscrollPageDown:34,\r\n\tscrollToStart:36,\r\n\tscrollToEnd:35,\r\n\tundo:\"ctrl + 90\",\r\n\tredo:\"ctrl + 89\",\r\n\tcopyToClipboard:\"ctrl + 67\",\r\n};","export default {\r\n\tkeyBlock:function(e){\r\n\t\te.stopPropagation();\r\n\t\te.preventDefault();\r\n\t},\r\n\tscrollPageUp:function(e){\r\n\t\tvar rowManager = this.table.rowManager,\r\n\t\tnewPos = rowManager.scrollTop - rowManager.height,\r\n\t\tscrollMax = rowManager.element.scrollHeight;\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tif(rowManager.displayRowsCount){\r\n\t\t\tif(newPos >= 0){\r\n\t\t\t\trowManager.element.scrollTop = newPos;\r\n\t\t\t}else{\r\n\t\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[0]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.table.element.focus();\r\n\t},\r\n\tscrollPageDown:function(e){\r\n\t\tvar rowManager = this.table.rowManager,\r\n\t\tnewPos = rowManager.scrollTop + rowManager.height,\r\n\t\tscrollMax = rowManager.element.scrollHeight;\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tif(rowManager.displayRowsCount){\r\n\t\t\tif(newPos <= scrollMax){\r\n\t\t\t\trowManager.element.scrollTop = newPos;\r\n\t\t\t}else{\r\n\t\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.table.element.focus();\r\n\r\n\t},\r\n\tscrollToStart:function(e){\r\n\t\tvar rowManager = this.table.rowManager;\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tif(rowManager.displayRowsCount){\r\n\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[0]);\r\n\t\t}\r\n\r\n\t\tthis.table.element.focus();\r\n\t},\r\n\tscrollToEnd:function(e){\r\n\t\tvar rowManager = this.table.rowManager;\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tif(rowManager.displayRowsCount){\r\n\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\r\n\t\t}\r\n\r\n\t\tthis.table.element.focus();\r\n\t},\r\n\tnavPrev:function(e){\r\n\t\tvar cell = false;\r\n\r\n\t\tif(this.table.modExists(\"edit\")){\r\n\t\t\tcell = this.table.modules.edit.currentCell;\r\n\r\n\t\t\tif(cell){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tcell.nav().prev();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tnavNext:function(e){\r\n\t\tvar cell = false;\r\n\t\tvar newRow = this.table.options.tabEndNewRow;\r\n\t\tvar nav;\r\n\r\n\t\tif(this.table.modExists(\"edit\")){\r\n\t\t\tcell = this.table.modules.edit.currentCell;\r\n\r\n\t\t\tif(cell){\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tnav = cell.nav();\r\n\r\n\t\t\t\tif(!nav.next()){\r\n\t\t\t\t\tif(newRow){\r\n\r\n\t\t\t\t\t\tcell.getElement().firstChild.blur();\r\n\r\n\t\t\t\t\t\tif(newRow === true){\r\n\t\t\t\t\t\t\tnewRow = this.table.addRow({})\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tif(typeof newRow == \"function\"){\r\n\t\t\t\t\t\t\t\tnewRow = this.table.addRow(newRow(cell.row.getComponent()))\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tnewRow = this.table.addRow(Object.assign({}, newRow));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tnewRow.then(() => {\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\tnav.next();\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tnavLeft:function(e){\r\n\t\tvar cell = false;\r\n\r\n\t\tif(this.table.modExists(\"edit\")){\r\n\t\t\tcell = this.table.modules.edit.currentCell;\r\n\r\n\t\t\tif(cell){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tcell.nav().left();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tnavRight:function(e){\r\n\t\tvar cell = false;\r\n\r\n\t\tif(this.table.modExists(\"edit\")){\r\n\t\t\tcell = this.table.modules.edit.currentCell;\r\n\r\n\t\t\tif(cell){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tcell.nav().right();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tnavUp:function(e){\r\n\t\tvar cell = false;\r\n\r\n\t\tif(this.table.modExists(\"edit\")){\r\n\t\t\tcell = this.table.modules.edit.currentCell;\r\n\r\n\t\t\tif(cell){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tcell.nav().up();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tnavDown:function(e){\r\n\t\tvar cell = false;\r\n\r\n\t\tif(this.table.modExists(\"edit\")){\r\n\t\t\tcell = this.table.modules.edit.currentCell;\r\n\r\n\t\t\tif(cell){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tcell.nav().down();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tundo:function(e){\r\n\t\tvar cell = false;\r\n\t\tif(this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")){\r\n\r\n\t\t\tcell = this.table.modules.edit.currentCell;\r\n\r\n\t\t\tif(!cell){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tthis.table.modules.history.undo();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tredo:function(e){\r\n\t\tvar cell = false;\r\n\t\tif(this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")){\r\n\r\n\t\t\tcell = this.table.modules.edit.currentCell;\r\n\r\n\t\t\tif(!cell){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tthis.table.modules.history.redo();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tcopyToClipboard:function(e){\r\n\t\tif(!this.table.modules.edit.currentCell){\r\n\t\t\tif(this.table.modExists(\"clipboard\", true)){\r\n\t\t\t\tthis.table.modules.clipboard.copy(false, true);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport defaultBindings from './defaults/bindings.js';\r\nimport defaultActions from './defaults/actions.js';\r\n\r\nclass Keybindings extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.watchKeys = null;\r\n\t\tthis.pressedKeys = null;\r\n\t\tthis.keyupBinding = false;\r\n\t\tthis.keydownBinding = false;\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tvar bindings = this.table.options.keybindings,\r\n\t\tmergedBindings = {};\r\n\r\n\t\tthis.watchKeys = {};\r\n\t\tthis.pressedKeys = [];\r\n\r\n\t\tif(bindings !== false){\r\n\r\n\t\t\tfor(let key in Keybindings.bindings){\r\n\t\t\t\tmergedBindings[key] = Keybindings.bindings[key];\r\n\t\t\t}\r\n\r\n\t\t\tif(Object.keys(bindings).length){\r\n\r\n\t\t\t\tfor(let key in bindings){\r\n\t\t\t\t\tmergedBindings[key] = bindings[key];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.mapBindings(mergedBindings);\r\n\t\t\tthis.bindEvents();\r\n\t\t}\r\n\t}\r\n\r\n\tmapBindings(bindings){\r\n\t\tfor(let key in bindings){\r\n\t\t\tif(Keybindings.actions[key]){\r\n\t\t\t\tif(bindings[key]){\r\n\t\t\t\t\tif(typeof bindings[key] !== \"object\"){\r\n\t\t\t\t\t\tbindings[key] = [bindings[key]];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbindings[key].forEach((binding) => {\r\n\t\t\t\t\t\tthis.mapBinding(key, binding);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Key Binding Error - no such action:\", key);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tmapBinding(action, symbolsList){\r\n\t\tvar binding = {\r\n\t\t\taction: Keybindings.actions[action],\r\n\t\t\tkeys: [],\r\n\t\t\tctrl: false,\r\n\t\t\tshift: false,\r\n\t\t\tmeta: false,\r\n\t\t};\r\n\r\n\t\tvar symbols = symbolsList.toString().toLowerCase().split(\" \").join(\"\").split(\"+\");\r\n\r\n\t\tsymbols.forEach((symbol) => {\r\n\t\t\tswitch(symbol){\r\n\t\t\t\tcase \"ctrl\":\r\n\t\t\t\tbinding.ctrl = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"shift\":\r\n\t\t\t\tbinding.shift = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"meta\":\r\n\t\t\t\tbinding.meta = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\tsymbol = parseInt(symbol);\r\n\t\t\t\tbinding.keys.push(symbol);\r\n\r\n\t\t\t\tif(!this.watchKeys[symbol]){\r\n\t\t\t\t\tthis.watchKeys[symbol] = [];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.watchKeys[symbol].push(binding);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tbindEvents(){\r\n\t\tvar self = this;\r\n\r\n\t\tthis.keyupBinding = function(e){\r\n\t\t\tvar code = e.keyCode;\r\n\t\t\tvar bindings = self.watchKeys[code];\r\n\r\n\t\t\tif(bindings){\r\n\r\n\t\t\t\tself.pressedKeys.push(code);\r\n\r\n\t\t\t\tbindings.forEach(function(binding){\r\n\t\t\t\t\tself.checkBinding(e, binding);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.keydownBinding = function(e){\r\n\t\t\tvar code = e.keyCode;\r\n\t\t\tvar bindings = self.watchKeys[code];\r\n\r\n\t\t\tif(bindings){\r\n\r\n\t\t\t\tvar index = self.pressedKeys.indexOf(code);\r\n\r\n\t\t\t\tif(index > -1){\r\n\t\t\t\t\tself.pressedKeys.splice(index, 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.table.element.addEventListener(\"keydown\", this.keyupBinding);\r\n\r\n\t\tthis.table.element.addEventListener(\"keyup\", this.keydownBinding);\r\n\t}\r\n\r\n\tclearBindings(){\r\n\t\tif(this.keyupBinding){\r\n\t\t\tthis.table.element.removeEventListener(\"keydown\", this.keyupBinding);\r\n\t\t}\r\n\r\n\t\tif(this.keydownBinding){\r\n\t\t\tthis.table.element.removeEventListener(\"keyup\", this.keydownBinding);\r\n\t\t}\r\n\t}\r\n\r\n\tcheckBinding(e, binding){\r\n\t\tvar match = true;\r\n\r\n\t\tif(e.ctrlKey == binding.ctrl && e.shiftKey == binding.shift && e.metaKey == binding.meta){\r\n\t\t\tbinding.keys.forEach((key) => {\r\n\t\t\t\tvar index = this.pressedKeys.indexOf(key);\r\n\r\n\t\t\t\tif(index == -1){\r\n\t\t\t\t\tmatch = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(match){\r\n\t\t\t\tbinding.action.call(this, e);\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\nKeybindings.moduleName = \"keybindings\";\r\n\r\n//load defaults\r\nKeybindings.bindings = defaultBindings;\r\nKeybindings.actions = defaultActions;\r\n\r\nexport default Keybindings;","import Module from '../../core/Module.js';\r\nimport Helpers from '../../core/Helpers.js';\r\n\r\nclass Menu extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.menuElements = [];\r\n\t\tthis.blurEvent = this.hideMenu.bind(this);\r\n\t\tthis.escEvent = this.escMenu.bind(this);\r\n\t\tthis.nestedMenuBlock = false;\r\n\t\tthis.positionReversedX = false;\r\n\t}\r\n\r\n\tinitializeColumnHeader(column){\r\n\t\tvar headerMenuEl;\r\n\r\n\t\tif(column.definition.headerContextMenu){\r\n\t\t\tcolumn.getElement().addEventListener(\"contextmenu\", this.LoadMenuEvent.bind(this, column, column.definition.headerContextMenu));\r\n\t\t\tthis.tapHold(column, column.definition.headerContextMenu);\r\n\t\t}\r\n\r\n\t\t// if(column.definition.headerClickMenu){\r\n\t\t// \tcolumn.getElement().addEventListener(\"click\", this.LoadMenuEvent.bind(this, column, column.definition.headerClickMenu));\r\n\t\t// }\r\n\r\n\t\tif(column.definition.headerMenu){\r\n\r\n\t\t\theaderMenuEl = document.createElement(\"span\");\r\n\t\t\theaderMenuEl.classList.add(\"tabulator-header-menu-button\");\r\n\t\t\theaderMenuEl.innerHTML = \"&vellip;\";\r\n\r\n\t\t\theaderMenuEl.addEventListener(\"click\", (e) => {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tthis.LoadMenuEvent(column, column.definition.headerMenu, e);\r\n\t\t\t});\r\n\r\n\t\t\tcolumn.titleElement.insertBefore(headerMenuEl, column.titleElement.firstChild);\r\n\t\t}\r\n\t}\r\n\r\n\tLoadMenuEvent(component, menu, e){\r\n\t\tmenu = typeof menu == \"function\" ? menu.call(this.table, component.getComponent(), e) : menu;\r\n\r\n\t\t// if(component instanceof Cell){\r\n\t\t// \te.stopImmediatePropagation();\r\n\t\t// }\r\n\r\n\t\tthis.loadMenu(e, component, menu);\r\n\t}\r\n\r\n\ttapHold(component, menu){\r\n\t\tvar element = component.getElement(),\r\n\t\ttapHold = null,\r\n\t\tloaded = false;\r\n\r\n\t\telement.addEventListener(\"touchstart\", (e) => {\r\n\t\t\tclearTimeout(tapHold);\r\n\t\t\tloaded = false;\r\n\r\n\t\t\ttapHold = setTimeout(() => {\r\n\t\t\t\tclearTimeout(tapHold);\r\n\t\t\t\ttapHold = null;\r\n\t\t\t\tloaded = true;\r\n\r\n\t\t\t\tthis.LoadMenuEvent(component, menu, e);\r\n\t\t\t}, 1000);\r\n\r\n\t\t}, {passive: true});\r\n\r\n\t\telement.addEventListener(\"touchend\", (e) => {\r\n\t\t\tclearTimeout(tapHold);\r\n\t\t\ttapHold = null;\r\n\r\n\t\t\tif(loaded){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tinitializeCell(cell){\r\n\t\tif(cell.column.definition.contextMenu){\r\n\t\t\tcell.getElement(true).addEventListener(\"contextmenu\", this.LoadMenuEvent.bind(this, cell, cell.column.definition.contextMenu));\r\n\t\t\tthis.tapHold(cell, cell.column.definition.contextMenu);\r\n\t\t}\r\n\r\n\t\tif(cell.column.definition.clickMenu){\r\n\t\t\tcell.getElement(true).addEventListener(\"click\", this.LoadMenuEvent.bind(this, cell, cell.column.definition.clickMenu));\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeRow(row){\r\n\t\tif(this.table.options.rowContextMenu){\r\n\t\t\trow.getElement().addEventListener(\"contextmenu\", this.LoadMenuEvent.bind(this, row, this.table.options.rowContextMenu));\r\n\t\t\tthis.tapHold(row, this.table.options.rowContextMenu);\r\n\t\t}\r\n\r\n\t\tif(this.table.options.rowClickMenu){\r\n\t\t\trow.getElement().addEventListener(\"click\", this.LoadMenuEvent.bind(this, row, this.table.options.rowClickMenu));\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeGroup (group){\r\n\t\tif(this.table.options.groupContextMenu){\r\n\t\t\tgroup.getElement().addEventListener(\"contextmenu\", this.LoadMenuEvent.bind(this, group, this.table.options.groupContextMenu));\r\n\t\t\tthis.tapHold(group, this.table.options.groupContextMenu);\r\n\t\t}\r\n\r\n\t\tif(this.table.options.groupClickMenu){\r\n\t\t\tgroup.getElement().addEventListener(\"click\", this.LoadMenuEvent.bind(this, group, this.table.options.groupClickMenu));\r\n\t\t}\r\n\t}\r\n\r\n\tloadMenu(e, component, menu, parentEl){\r\n\r\n\t\tvar touch = !(e instanceof MouseEvent);\r\n\r\n\t\tvar menuEl = document.createElement(\"div\");\r\n\t\tmenuEl.classList.add(\"tabulator-menu\");\r\n\r\n\t\tif(!touch){\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\r\n\t\t//abort if no menu set\r\n\t\tif(!menu || !menu.length){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(!parentEl){\r\n\t\t\tif(this.nestedMenuBlock){\r\n\t\t\t\t//abort if child menu already open\r\n\t\t\t\tif(this.isOpen()){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.nestedMenuBlock = setTimeout(() => {\r\n\t\t\t\t\tthis.nestedMenuBlock = false;\r\n\t\t\t\t}, 100)\r\n\t\t\t}\r\n\r\n\t\t\tthis.hideMenu();\r\n\t\t\tthis.menuElements = [];\r\n\t\t}\r\n\r\n\t\tmenu.forEach((item) => {\r\n\t\t\tvar itemEl = document.createElement(\"div\"),\r\n\t\t\tlabel = item.label,\r\n\t\t\tdisabled = item.disabled;\r\n\r\n\t\t\tif(item.separator){\r\n\t\t\t\titemEl.classList.add(\"tabulator-menu-separator\");\r\n\t\t\t}else{\r\n\t\t\t\titemEl.classList.add(\"tabulator-menu-item\");\r\n\r\n\t\t\t\tif(typeof label == \"function\"){\r\n\t\t\t\t\tlabel = label.call(this.table, component.getComponent());\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(label instanceof Node){\r\n\t\t\t\t\titemEl.appendChild(label);\r\n\t\t\t\t}else{\r\n\t\t\t\t\titemEl.innerHTML = label;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(typeof disabled == \"function\"){\r\n\t\t\t\t\tdisabled = disabled.call(this.table, component.getComponent());\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(disabled){\r\n\t\t\t\t\titemEl.classList.add(\"tabulator-menu-item-disabled\");\r\n\t\t\t\t\titemEl.addEventListener(\"click\", (e) => {\r\n\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(item.menu && item.menu.length){\r\n\t\t\t\t\t\titemEl.addEventListener(\"click\", (e) => {\r\n\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\tthis.hideOldSubMenus(menuEl);\r\n\t\t\t\t\t\t\tthis.loadMenu(e, component, item.menu, itemEl);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(item.action){\r\n\t\t\t\t\t\t\titemEl.addEventListener(\"click\", (e) => {\r\n\t\t\t\t\t\t\t\titem.action(e, component.getComponent());\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(item.menu && item.menu.length){\r\n\t\t\t\t\titemEl.classList.add(\"tabulator-menu-item-submenu\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tmenuEl.appendChild(itemEl);\r\n\t\t});\r\n\r\n\t\tmenuEl.addEventListener(\"click\", (e) => {\r\n\t\t\tthis.hideMenu();\r\n\t\t});\r\n\r\n\t\tthis.menuElements.push(menuEl);\r\n\t\tthis.positionMenu(menuEl, parentEl, touch, e);\r\n\t}\r\n\r\n\thideOldSubMenus(menuEl){\r\n\t\tvar index = this.menuElements.indexOf(menuEl);\r\n\r\n\t\tif(index > -1){\r\n\t\t\tfor(let i = this.menuElements.length - 1; i > index; i--){\r\n\t\t\t\tvar el = this.menuElements[i];\r\n\r\n\t\t\t\tif(el.parentNode){\r\n\t\t\t\t\tel.parentNode.removeChild(el);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.menuElements.pop();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpositionMenu(element, parentEl, touch, e){\r\n\t\tvar docHeight = Math.max(document.body.offsetHeight, window.innerHeight),\r\n\t\tx, y, parentOffset;\r\n\r\n\t\tif(!parentEl){\r\n\t\t\tx = touch ? e.touches[0].pageX : e.pageX;\r\n\t\t\ty = touch ? e.touches[0].pageY : e.pageY;\r\n\r\n\t\t\tthis.positionReversedX = false;\r\n\t\t}else{\r\n\t\t\tparentOffset = Helpers.elOffset(parentEl);\r\n\t\t\tx = parentOffset.left + parentEl.offsetWidth;\r\n\t\t\ty = parentOffset.top - 1;\r\n\t\t}\r\n\r\n\t\telement.style.top = y + \"px\";\r\n\t\telement.style.left = x + \"px\";\r\n\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.table.rowManager.element.addEventListener(\"scroll\", this.blurEvent);\r\n\t\t\tdocument.body.addEventListener(\"click\", this.blurEvent);\r\n\t\t\tdocument.body.addEventListener(\"contextmenu\", this.blurEvent);\r\n\t\t\twindow.addEventListener(\"resize\", this.blurEvent);\r\n\t\t\tdocument.body.addEventListener(\"keydown\", this.escEvent);\r\n\t\t}, 100);\r\n\r\n\t\tdocument.body.appendChild(element);\r\n\r\n\t\t//move menu to start on bottom edge if it is too close to the edge of the screen\r\n\t\tif((y + element.offsetHeight) >= docHeight){\r\n\t\t\telement.style.top = \"\";\r\n\r\n\t\t\tif(parentEl){\r\n\t\t\t\telement.style.bottom = (docHeight - parentOffset.top - parentEl.offsetHeight - 1) + \"px\";\r\n\t\t\t}else{\r\n\t\t\t\telement.style.bottom = (docHeight - y) + \"px\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//move menu to start on right edge if it is too close to the edge of the screen\r\n\t\tif((x + element.offsetWidth) >= document.body.offsetWidth || this.positionReversedX){\r\n\t\t\telement.style.left = \"\";\r\n\r\n\t\t\tif(parentEl){\r\n\t\t\t\telement.style.right = (document.documentElement.offsetWidth - parentOffset.left) + \"px\";\r\n\t\t\t}else{\r\n\t\t\t\telement.style.right = (document.documentElement.offsetWidth - x) + \"px\";\r\n\t\t\t}\r\n\r\n\t\t\tthis.positionReversedX = true;\r\n\t\t}\r\n\t}\r\n\r\n\tisOpen(){\r\n\t\treturn !!this.menuElements.length;\r\n\t}\r\n\r\n\tescMenu(e){\r\n\t\tif(e.keyCode == 27){\r\n\t\t\tthis.hideMenu();\r\n\t\t}\r\n\t}\r\n\r\n\thideMenu(){\r\n\t\tthis.menuElements.forEach((menuEl) => {\r\n\t\t\tif(menuEl.parentNode){\r\n\t\t\t\tmenuEl.parentNode.removeChild(menuEl);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdocument.body.removeEventListener(\"keydown\", this.escEvent);\r\n\t\tdocument.body.removeEventListener(\"click\", this.blurEvent);\r\n\t\tdocument.body.removeEventListener(\"contextmenu\", this.blurEvent);\r\n\t\twindow.removeEventListener(\"resize\", this.blurEvent);\r\n\t\tthis.table.rowManager.element.removeEventListener(\"scroll\", this.blurEvent);\r\n\t}\r\n}\r\n\r\nMenu.moduleName = \"menu\";\r\n\r\nexport default Menu;","import Module from '../../core/Module.js';\r\nimport Helpers from '../../core/Helpers.js';\r\n\r\nclass MoveColumns extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.placeholderElement = this.createPlaceholderElement();\r\n\t\tthis.hoverElement = false; //floating column header element\r\n\t\tthis.checkTimeout = false; //click check timeout holder\r\n\t\tthis.checkPeriod = 250; //period to wait on mousedown to consider this a move and not a click\r\n\t\tthis.moving = false; //currently moving column\r\n\t\tthis.toCol = false; //destination column\r\n\t\tthis.toColAfter = false; //position of moving column relative to the desitnation column\r\n\t\tthis.startX = 0; //starting position within header element\r\n\t\tthis.autoScrollMargin = 40; //auto scroll on edge when within margin\r\n\t\tthis.autoScrollStep = 5; //auto scroll distance in pixels\r\n\t\tthis.autoScrollTimeout = false; //auto scroll timeout\r\n\t\tthis.touchMove = false;\r\n\r\n\t\tthis.moveHover = this.moveHover.bind(this);\r\n\t\tthis.endMove = this.endMove.bind(this);\r\n\t}\r\n\r\n\tcreatePlaceholderElement(){\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tel.classList.add(\"tabulator-col\");\r\n\t\tel.classList.add(\"tabulator-col-placeholder\");\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\tinitializeColumn(column){\r\n\t\tvar self = this,\r\n\t\tconfig = {},\r\n\t\tcolEl;\r\n\r\n\t\tif(!column.modules.frozen){\r\n\r\n\t\t\tcolEl = column.getElement();\r\n\r\n\t\t\tconfig.mousemove = function(e){\r\n\t\t\t\tif(column.parent === self.moving.parent){\r\n\t\t\t\t\tif((((self.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(colEl).left) + self.table.columnManager.element.scrollLeft) > (column.getWidth() / 2)){\r\n\t\t\t\t\t\tif(self.toCol !== column || !self.toColAfter){\r\n\t\t\t\t\t\t\tcolEl.parentNode.insertBefore(self.placeholderElement, colEl.nextSibling);\r\n\t\t\t\t\t\t\tself.moveColumn(column, true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(self.toCol !== column || self.toColAfter){\r\n\t\t\t\t\t\t\tcolEl.parentNode.insertBefore(self.placeholderElement, colEl);\r\n\t\t\t\t\t\t\tself.moveColumn(column, false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}.bind(self);\r\n\r\n\t\t\tcolEl.addEventListener(\"mousedown\", function(e){\r\n\t\t\t\tself.touchMove = false;\r\n\t\t\t\tif(e.which === 1){\r\n\t\t\t\t\tself.checkTimeout = setTimeout(function(){\r\n\t\t\t\t\t\tself.startMove(e, column);\r\n\t\t\t\t\t}, self.checkPeriod);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tcolEl.addEventListener(\"mouseup\", function(e){\r\n\t\t\t\tif(e.which === 1){\r\n\t\t\t\t\tif(self.checkTimeout){\r\n\t\t\t\t\t\tclearTimeout(self.checkTimeout);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tself.bindTouchEvents(column);\r\n\t\t}\r\n\r\n\t\tcolumn.modules.moveColumn = config;\r\n\t}\r\n\r\n\tbindTouchEvents(column){\r\n\t\tvar colEl = column.getElement(),\r\n\t\tstartXMove = false, //shifting center position of the cell\r\n\t\tdir = false,\r\n\t\tcurrentCol, nextCol, prevCol, nextColWidth, prevColWidth, nextColWidthLast, prevColWidthLast;\r\n\r\n\t\tcolEl.addEventListener(\"touchstart\", (e) => {\r\n\t\t\tthis.checkTimeout = setTimeout(() => {\r\n\t\t\t\tthis.touchMove = true;\r\n\t\t\t\tcurrentCol = column;\r\n\t\t\t\tnextCol = column.nextColumn();\r\n\t\t\t\tnextColWidth = nextCol ? nextCol.getWidth()/2 : 0;\r\n\t\t\t\tprevCol = column.prevColumn();\r\n\t\t\t\tprevColWidth = prevCol ? prevCol.getWidth()/2 : 0;\r\n\t\t\t\tnextColWidthLast = 0;\r\n\t\t\t\tprevColWidthLast = 0;\r\n\t\t\t\tstartXMove = false;\r\n\r\n\t\t\t\tthis.startMove(e, column);\r\n\t\t\t}, this.checkPeriod);\r\n\t\t}, {passive: true});\r\n\r\n\t\tcolEl.addEventListener(\"touchmove\", (e) => {\r\n\t\t\tvar halfCol, diff, moveToCol;\r\n\r\n\t\t\tif(this.moving){\r\n\t\t\t\tthis.moveHover(e);\r\n\r\n\t\t\t\tif(!startXMove){\r\n\t\t\t\t\tstartXMove = e.touches[0].pageX;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdiff = e.touches[0].pageX - startXMove;\r\n\r\n\t\t\t\tif(diff > 0){\r\n\t\t\t\t\tif(nextCol && diff - nextColWidthLast > nextColWidth){\r\n\t\t\t\t\t\tmoveToCol = nextCol;\r\n\r\n\t\t\t\t\t\tif(moveToCol !== column){\r\n\t\t\t\t\t\t\tstartXMove = e.touches[0].pageX;\r\n\t\t\t\t\t\t\tmoveToCol.getElement().parentNode.insertBefore(this.placeholderElement, moveToCol.getElement().nextSibling);\r\n\t\t\t\t\t\t\tthis.moveColumn(moveToCol, true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(prevCol && -diff - prevColWidthLast >  prevColWidth){\r\n\t\t\t\t\t\tmoveToCol = prevCol;\r\n\r\n\t\t\t\t\t\tif(moveToCol !== column){\r\n\t\t\t\t\t\t\tstartXMove = e.touches[0].pageX;\r\n\t\t\t\t\t\t\tmoveToCol.getElement().parentNode.insertBefore(this.placeholderElement, moveToCol.getElement());\r\n\t\t\t\t\t\t\tthis.moveColumn(moveToCol, false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(moveToCol){\r\n\t\t\t\t\tcurrentCol = moveToCol;\r\n\t\t\t\t\tnextCol = moveToCol.nextColumn();\r\n\t\t\t\t\tnextColWidthLast = nextColWidth;\r\n\t\t\t\t\tnextColWidth = nextCol ? nextCol.getWidth() / 2 : 0;\r\n\t\t\t\t\tprevCol = moveToCol.prevColumn();\r\n\t\t\t\t\tprevColWidthLast = prevColWidth;\r\n\t\t\t\t\tprevColWidth = prevCol ? prevCol.getWidth() / 2 : 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, {passive: true});\r\n\r\n\t\tcolEl.addEventListener(\"touchend\", (e) => {\r\n\t\t\tif(this.checkTimeout){\r\n\t\t\t\tclearTimeout(this.checkTimeout);\r\n\t\t\t}\r\n\t\t\tif(this.moving){\r\n\t\t\t\tthis.endMove(e);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tstartMove(e, column){\r\n\t\tvar element = column.getElement();\r\n\r\n\t\tthis.moving = column;\r\n\t\tthis.startX = (this.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(element).left;\r\n\r\n\t\tthis.table.element.classList.add(\"tabulator-block-select\");\r\n\r\n\t\t//create placeholder\r\n\t\tthis.placeholderElement.style.width = column.getWidth() + \"px\";\r\n\t\tthis.placeholderElement.style.height = column.getHeight() + \"px\";\r\n\r\n\t\telement.parentNode.insertBefore(this.placeholderElement, element);\r\n\t\telement.parentNode.removeChild(element);\r\n\r\n\t\t//create hover element\r\n\t\tthis.hoverElement = element.cloneNode(true);\r\n\t\tthis.hoverElement.classList.add(\"tabulator-moving\");\r\n\r\n\t\tthis.table.columnManager.getElement().appendChild(this.hoverElement);\r\n\r\n\t\tthis.hoverElement.style.left = \"0\";\r\n\t\tthis.hoverElement.style.bottom = \"0\";\r\n\r\n\t\tif(!this.touchMove){\r\n\t\t\tthis._bindMouseMove();\r\n\r\n\t\t\tdocument.body.addEventListener(\"mousemove\", this.moveHover);\r\n\t\t\tdocument.body.addEventListener(\"mouseup\", this.endMove);\r\n\t\t}\r\n\r\n\t\tthis.moveHover(e);\r\n\t}\r\n\r\n\t_bindMouseMove(){\r\n\t\tthis.table.columnManager.columnsByIndex.forEach(function(column){\r\n\t\t\tif(column.modules.moveColumn.mousemove){\r\n\t\t\t\tcolumn.getElement().addEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t_unbindMouseMove(){\r\n\t\tthis.table.columnManager.columnsByIndex.forEach(function(column){\r\n\t\t\tif(column.modules.moveColumn.mousemove){\r\n\t\t\t\tcolumn.getElement().removeEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tmoveColumn(column, after){\r\n\t\tvar movingCells = this.moving.getCells();\r\n\r\n\t\tthis.toCol = column;\r\n\t\tthis.toColAfter = after;\r\n\r\n\t\tif(after){\r\n\t\t\tcolumn.getCells().forEach(function(cell, i){\r\n\t\t\t\tvar cellEl = cell.getElement(true);\r\n\t\t\t\tcellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl.nextSibling);\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tcolumn.getCells().forEach(function(cell, i){\r\n\t\t\t\tvar cellEl = cell.getElement(true);\r\n\t\t\t\tcellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tendMove(e){\r\n\t\tif(e.which === 1 || this.touchMove){\r\n\t\t\tthis._unbindMouseMove();\r\n\r\n\t\t\tthis.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\r\n\t\t\tthis.placeholderElement.parentNode.removeChild(this.placeholderElement);\r\n\t\t\tthis.hoverElement.parentNode.removeChild(this.hoverElement);\r\n\r\n\t\t\tthis.table.element.classList.remove(\"tabulator-block-select\");\r\n\r\n\t\t\tif(this.toCol){\r\n\t\t\t\tthis.table.columnManager.moveColumnActual(this.moving, this.toCol, this.toColAfter);\r\n\t\t\t}\r\n\r\n\t\t\tthis.moving = false;\r\n\t\t\tthis.toCol = false;\r\n\t\t\tthis.toColAfter = false;\r\n\r\n\t\t\tif(!this.touchMove){\r\n\t\t\t\tdocument.body.removeEventListener(\"mousemove\", this.moveHover);\r\n\t\t\t\tdocument.body.removeEventListener(\"mouseup\", this.endMove);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tmoveHover(e){\r\n\t\tvar columnHolder = this.table.columnManager.getElement(),\r\n\t\tscrollLeft = columnHolder.scrollLeft,\r\n\t\txPos = ((this.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(columnHolder).left) + scrollLeft,\r\n\t\tscrollPos;\r\n\r\n\t\tthis.hoverElement.style.left = (xPos - this.startX) + \"px\";\r\n\r\n\t\tif(xPos - scrollLeft < this.autoScrollMargin){\r\n\t\t\tif(!this.autoScrollTimeout){\r\n\t\t\t\tthis.autoScrollTimeout = setTimeout(() => {\r\n\t\t\t\t\tscrollPos = Math.max(0,scrollLeft-5);\r\n\t\t\t\t\tthis.table.rowManager.getElement().scrollLeft = scrollPos;\r\n\t\t\t\t\tthis.autoScrollTimeout = false;\r\n\t\t\t\t}, 1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(scrollLeft + columnHolder.clientWidth - xPos < this.autoScrollMargin){\r\n\t\t\tif(!this.autoScrollTimeout){\r\n\t\t\t\tthis.autoScrollTimeout = setTimeout(() => {\r\n\t\t\t\t\tscrollPos = Math.min(columnHolder.clientWidth, scrollLeft+5);\r\n\t\t\t\t\tthis.table.rowManager.getElement().scrollLeft = scrollPos;\r\n\t\t\t\t\tthis.autoScrollTimeout = false;\r\n\t\t\t\t}, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nMoveColumns.moduleName = \"moveColumn\";\r\n\r\nexport default MoveColumns;\r\n","import Module from '../../core/Module.js';\r\nimport Helpers from '../../core/Helpers.js';\r\n\r\nclass MoveRows extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.placeholderElement = this.createPlaceholderElement();\r\n\t\tthis.hoverElement = false; //floating row header element\r\n\t\tthis.checkTimeout = false; //click check timeout holder\r\n\t\tthis.checkPeriod = 150; //period to wait on mousedown to consider this a move and not a click\r\n\t\tthis.moving = false; //currently moving row\r\n\t\tthis.toRow = false; //destination row\r\n\t\tthis.toRowAfter = false; //position of moving row relative to the desitnation row\r\n\t\tthis.hasHandle = false; //row has handle instead of fully movable row\r\n\t\tthis.startY = 0; //starting Y position within header element\r\n\t\tthis.startX = 0; //starting X position within header element\r\n\r\n\t\tthis.moveHover = this.moveHover.bind(this);\r\n\t\tthis.endMove = this.endMove.bind(this);\r\n\t\tthis.tableRowDropEvent = false;\r\n\r\n\t\tthis.touchMove = false;\r\n\r\n\t\tthis.connection = false;\r\n\t\tthis.connectionSelectorsTables = false;\r\n\t\tthis.connectionSelectorsElements = false;\r\n\t\tthis.connectionElements = [];\r\n\t\tthis.connections = [];\r\n\r\n\t\tthis.connectedTable = false;\r\n\t\tthis.connectedRow = false;\r\n\t}\r\n\r\n\tcreatePlaceholderElement(){\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tel.classList.add(\"tabulator-row\");\r\n\t\tel.classList.add(\"tabulator-row-placeholder\");\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\tinitialize(handle){\r\n\t\tthis.connectionSelectorsTables = this.table.options.movableRowsConnectedTables;\r\n\t\tthis.connectionSelectorsElements = this.table.options.movableRowsConnectedElements;\r\n\r\n\t\tthis.connection = this.connectionSelectorsTables || this.connectionSelectorsElements;\r\n\t}\r\n\r\n\tsetHandle(handle){\r\n\t\tthis.hasHandle = handle;\r\n\t}\r\n\r\n\tinitializeGroupHeader(group){\r\n\t\tvar self = this,\r\n\t\tconfig = {},\r\n\t\trowEl;\r\n\r\n\t\t//inter table drag drop\r\n\t\tconfig.mouseup = function(e){\r\n\t\t\tself.tableRowDrop(e, row);\r\n\t\t}.bind(self);\r\n\r\n\t\t//same table drag drop\r\n\t\tconfig.mousemove = function(e){\r\n\t\t\tif(((e.pageY - Helpers.elOffset(group.element).top) + self.table.rowManager.element.scrollTop) > (group.getHeight() / 2)){\r\n\t\t\t\tif(self.toRow !== group || !self.toRowAfter){\r\n\t\t\t\t\tvar rowEl = group.getElement();\r\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\r\n\t\t\t\t\tself.moveRow(group, true);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(self.toRow !== group || self.toRowAfter){\r\n\t\t\t\t\tvar rowEl = group.getElement();\r\n\t\t\t\t\tif(rowEl.previousSibling){\r\n\t\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\r\n\t\t\t\t\t\tself.moveRow(group, false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}.bind(self);\r\n\r\n\t\tgroup.modules.moveRow = config;\r\n\t}\r\n\r\n\tinitializeRow(row){\r\n\t\tvar self = this,\r\n\t\tconfig = {},\r\n\t\trowEl;\r\n\r\n\t\t//inter table drag drop\r\n\t\tconfig.mouseup = function(e){\r\n\t\t\tself.tableRowDrop(e, row);\r\n\t\t}.bind(self);\r\n\r\n\t\t//same table drag drop\r\n\t\tconfig.mousemove = function(e){\r\n\t\t\tvar rowEl = row.getElement();\r\n\r\n\t\t\tif(((e.pageY - Helpers.elOffset(rowEl).top) + self.table.rowManager.element.scrollTop) > (row.getHeight() / 2)){\r\n\t\t\t\tif(self.toRow !== row || !self.toRowAfter){\r\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\r\n\t\t\t\t\tself.moveRow(row, true);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(self.toRow !== row || self.toRowAfter){\r\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\r\n\t\t\t\t\tself.moveRow(row, false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}.bind(self);\r\n\r\n\r\n\t\tif(!this.hasHandle){\r\n\r\n\t\t\trowEl = row.getElement();\r\n\r\n\t\t\trowEl.addEventListener(\"mousedown\", function(e){\r\n\t\t\t\tif(e.which === 1){\r\n\t\t\t\t\tself.checkTimeout = setTimeout(function(){\r\n\t\t\t\t\t\tself.startMove(e, row);\r\n\t\t\t\t\t}, self.checkPeriod);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\trowEl.addEventListener(\"mouseup\", function(e){\r\n\t\t\t\tif(e.which === 1){\r\n\t\t\t\t\tif(self.checkTimeout){\r\n\t\t\t\t\t\tclearTimeout(self.checkTimeout);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.bindTouchEvents(row, row.getElement());\r\n\t\t}\r\n\r\n\t\trow.modules.moveRow = config;\r\n\t}\r\n\r\n\tinitializeCell(cell){\r\n\t\tvar self = this,\r\n\t\tcellEl = cell.getElement(true);\r\n\r\n\t\tcellEl.addEventListener(\"mousedown\", function(e){\r\n\t\t\tif(e.which === 1){\r\n\t\t\t\tself.checkTimeout = setTimeout(function(){\r\n\t\t\t\t\tself.startMove(e, cell.row);\r\n\t\t\t\t}, self.checkPeriod);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tcellEl.addEventListener(\"mouseup\", function(e){\r\n\t\t\tif(e.which === 1){\r\n\t\t\t\tif(self.checkTimeout){\r\n\t\t\t\t\tclearTimeout(self.checkTimeout);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.bindTouchEvents(cell.row, cellEl);\r\n\t}\r\n\r\n\tbindTouchEvents(row, element){\r\n\t\tvar startYMove = false, //shifting center position of the cell\r\n\t\tdir = false,\r\n\t\tcurrentRow, nextRow, prevRow, nextRowHeight, prevRowHeight, nextRowHeightLast, prevRowHeightLast;\r\n\r\n\t\telement.addEventListener(\"touchstart\", (e) => {\r\n\t\t\tthis.checkTimeout = setTimeout(() => {\r\n\t\t\t\tthis.touchMove = true;\r\n\t\t\t\tcurrentRow = row;\r\n\t\t\t\tnextRow = row.nextRow();\r\n\t\t\t\tnextRowHeight = nextRow ? nextRow.getHeight()/2 : 0;\r\n\t\t\t\tprevRow = row.prevRow();\r\n\t\t\t\tprevRowHeight = prevRow ? prevRow.getHeight()/2 : 0;\r\n\t\t\t\tnextRowHeightLast = 0;\r\n\t\t\t\tprevRowHeightLast = 0;\r\n\t\t\t\tstartYMove = false;\r\n\r\n\t\t\t\tthis.startMove(e, row);\r\n\t\t\t}, this.checkPeriod);\r\n\t\t}, {passive: true});\r\n\t\tthis.moving, this.toRow, this.toRowAfter\r\n\t\telement.addEventListener(\"touchmove\", (e) => {\r\n\r\n\t\t\tvar halfCol, diff, moveToRow;\r\n\r\n\t\t\tif(this.moving){\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tthis.moveHover(e);\r\n\r\n\t\t\t\tif(!startYMove){\r\n\t\t\t\t\tstartYMove = e.touches[0].pageY;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdiff = e.touches[0].pageY - startYMove;\r\n\r\n\t\t\t\tif(diff > 0){\r\n\t\t\t\t\tif(nextRow && diff - nextRowHeightLast > nextRowHeight){\r\n\t\t\t\t\t\tmoveToRow = nextRow;\r\n\r\n\t\t\t\t\t\tif(moveToRow !== row){\r\n\t\t\t\t\t\t\tstartYMove = e.touches[0].pageY\r\n\t\t\t\t\t\t\tmoveToRow.getElement().parentNode.insertBefore(this.placeholderElement, moveToRow.getElement().nextSibling);\r\n\t\t\t\t\t\t\tthis.moveRow(moveToRow, true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(prevRow && -diff - prevRowHeightLast >  prevRowHeight){\r\n\t\t\t\t\t\tmoveToRow = prevRow;\r\n\r\n\t\t\t\t\t\tif(moveToRow !== row){\r\n\t\t\t\t\t\t\tstartYMove = e.touches[0].pageY;\r\n\t\t\t\t\t\t\tmoveToRow.getElement().parentNode.insertBefore(this.placeholderElement, moveToRow.getElement());\r\n\t\t\t\t\t\t\tthis.moveRow(moveToRow, false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(moveToRow){\r\n\t\t\t\t\tcurrentRow = moveToRow;\r\n\t\t\t\t\tnextRow = moveToRow.nextRow();\r\n\t\t\t\t\tnextRowHeightLast = nextRowHeight;\r\n\t\t\t\t\tnextRowHeight = nextRow ? nextRow.getHeight() / 2 : 0;\r\n\t\t\t\t\tprevRow = moveToRow.prevRow();\r\n\t\t\t\t\tprevRowHeightLast = prevRowHeight;\r\n\t\t\t\t\tprevRowHeight = prevRow ? prevRow.getHeight() / 2 : 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\telement.addEventListener(\"touchend\", (e) => {\r\n\t\t\tif(this.checkTimeout){\r\n\t\t\t\tclearTimeout(this.checkTimeout);\r\n\t\t\t}\r\n\t\t\tif(this.moving){\r\n\t\t\t\tthis.endMove(e);\r\n\t\t\t\tthis.touchMove = false;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t_bindMouseMove(){\r\n\t\tthis.table.rowManager.getDisplayRows().forEach((row) => {\r\n\t\t\tif((row.type === \"row\" || row.type === \"group\") && row.modules.moveRow.mousemove){\r\n\t\t\t\trow.getElement().addEventListener(\"mousemove\", row.modules.moveRow.mousemove);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t_unbindMouseMove(){\r\n\t\tthis.table.rowManager.getDisplayRows().forEach((row) => {\r\n\t\t\tif((row.type === \"row\" || row.type === \"group\")  && row.modules.moveRow.mousemove){\r\n\t\t\t\trow.getElement().removeEventListener(\"mousemove\", row.modules.moveRow.mousemove);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tstartMove(e, row){\r\n\t\tvar element = row.getElement();\r\n\r\n\t\tthis.setStartPosition(e, row);\r\n\r\n\t\tthis.moving = row;\r\n\r\n\t\tthis.table.element.classList.add(\"tabulator-block-select\");\r\n\r\n\t\t//create placeholder\r\n\t\tthis.placeholderElement.style.width = row.getWidth() + \"px\";\r\n\t\tthis.placeholderElement.style.height = row.getHeight() + \"px\";\r\n\r\n\t\tif(!this.connection){\r\n\t\t\telement.parentNode.insertBefore(this.placeholderElement, element);\r\n\t\t\telement.parentNode.removeChild(element);\r\n\t\t}else{\r\n\t\t\tthis.table.element.classList.add(\"tabulator-movingrow-sending\");\r\n\t\t\tthis.connectToTables(row);\r\n\t\t}\r\n\r\n\t\t//create hover element\r\n\t\tthis.hoverElement = element.cloneNode(true);\r\n\t\tthis.hoverElement.classList.add(\"tabulator-moving\");\r\n\r\n\t\tif(this.connection){\r\n\t\t\tdocument.body.appendChild(this.hoverElement);\r\n\t\t\tthis.hoverElement.style.left = \"0\";\r\n\t\t\tthis.hoverElement.style.top = \"0\";\r\n\t\t\tthis.hoverElement.style.width = this.table.element.clientWidth + \"px\";\r\n\t\t\tthis.hoverElement.style.whiteSpace = \"nowrap\";\r\n\t\t\tthis.hoverElement.style.overflow = \"hidden\";\r\n\t\t\tthis.hoverElement.style.pointerEvents = \"none\";\r\n\t\t}else{\r\n\t\t\tthis.table.rowManager.getTableElement().appendChild(this.hoverElement);\r\n\r\n\t\t\tthis.hoverElement.style.left = \"0\";\r\n\t\t\tthis.hoverElement.style.top = \"0\";\r\n\r\n\t\t\tthis._bindMouseMove();\r\n\t\t}\r\n\r\n\t\tdocument.body.addEventListener(\"mousemove\", this.moveHover);\r\n\t\tdocument.body.addEventListener(\"mouseup\", this.endMove);\r\n\r\n\t\tthis.moveHover(e);\r\n\t}\r\n\r\n\tsetStartPosition(e, row){\r\n\t\tvar pageX = this.touchMove ? e.touches[0].pageX : e.pageX,\r\n\t\tpageY = this.touchMove ? e.touches[0].pageY : e.pageY,\r\n\t\telement, position;\r\n\r\n\t\telement = row.getElement();\r\n\t\tif(this.connection){\r\n\t\t\tposition = element.getBoundingClientRect();\r\n\r\n\t\t\tthis.startX = position.left - pageX + window.pageXOffset;\r\n\t\t\tthis.startY = position.top - pageY + window.pageYOffset;\r\n\t\t}else{\r\n\t\t\tthis.startY = (pageY - element.getBoundingClientRect().top);\r\n\t\t}\r\n\t}\r\n\r\n\tendMove(e){\r\n\t\tif(!e || e.which === 1 || this.touchMove){\r\n\t\t\tthis._unbindMouseMove();\r\n\r\n\t\t\tif(!this.connection){\r\n\t\t\t\tthis.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\r\n\t\t\t\tthis.placeholderElement.parentNode.removeChild(this.placeholderElement);\r\n\t\t\t}\r\n\r\n\t\t\tthis.hoverElement.parentNode.removeChild(this.hoverElement);\r\n\r\n\t\t\tthis.table.element.classList.remove(\"tabulator-block-select\");\r\n\r\n\t\t\tif(this.toRow){\r\n\t\t\t\tthis.table.rowManager.moveRow(this.moving, this.toRow, this.toRowAfter);\r\n\t\t\t}\r\n\r\n\t\t\tthis.moving = false;\r\n\t\t\tthis.toRow = false;\r\n\t\t\tthis.toRowAfter = false;\r\n\r\n\t\t\tdocument.body.removeEventListener(\"mousemove\", this.moveHover);\r\n\t\t\tdocument.body.removeEventListener(\"mouseup\", this.endMove);\r\n\r\n\t\t\tif(this.connection){\r\n\t\t\t\tthis.table.element.classList.remove(\"tabulator-movingrow-sending\");\r\n\t\t\t\tthis.disconnectFromTables();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tmoveRow(row, after){\r\n\t\tthis.toRow = row;\r\n\t\tthis.toRowAfter = after;\r\n\t}\r\n\r\n\tmoveHover(e){\r\n\t\tif(this.connection){\r\n\t\t\tthis.moveHoverConnections.call(this, e);\r\n\t\t}else{\r\n\t\t\tthis.moveHoverTable.call(this, e);\r\n\t\t}\r\n\t}\r\n\r\n\tmoveHoverTable(e){\r\n\t\tvar rowHolder = this.table.rowManager.getElement(),\r\n\t\tscrollTop = rowHolder.scrollTop,\r\n\t\tyPos = ((this.touchMove ? e.touches[0].pageY : e.pageY) - rowHolder.getBoundingClientRect().top) + scrollTop,\r\n\t\tscrollPos;\r\n\r\n\t\tthis.hoverElement.style.top = (yPos - this.startY) + \"px\";\r\n\t}\r\n\r\n\tmoveHoverConnections(e){\r\n\t\tthis.hoverElement.style.left = (this.startX + (this.touchMove ? e.touches[0].pageX : e.pageX)) + \"px\";\r\n\t\tthis.hoverElement.style.top = (this.startY + (this.touchMove ? e.touches[0].pageY : e.pageY)) + \"px\";\r\n\t}\r\n\r\n\telementRowDrop(e, element, row){\r\n\t\tif(this.table.options.movableRowsElementDrop){\r\n\t\t\tthis.table.options.movableRowsElementDrop(e, element, row ? row.getComponent() : false);\r\n\t\t}\r\n\t}\r\n\r\n\t//establish connection with other tables\r\n\tconnectToTables(row){\r\n\t\tvar connectionTables;\r\n\r\n\t\tif(this.connectionSelectorsTables){\r\n\t\t\tconnectionTables = this.table.modules.comms.getConnections(this.connectionSelectorsTables);\r\n\r\n\t\t\tthis.table.options.movableRowsSendingStart.call(this.table, connectionTables);\r\n\r\n\t\t\tthis.table.modules.comms.send(this.connectionSelectorsTables, \"moveRow\", \"connect\", {\r\n\t\t\t\trow:row,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(this.connectionSelectorsElements){\r\n\r\n\t\t\tthis.connectionElements = [];\r\n\r\n\t\t\tif(!Array.isArray(this.connectionSelectorsElements)){\r\n\t\t\t\tthis.connectionSelectorsElements = [this.connectionSelectorsElements];\r\n\t\t\t}\r\n\r\n\t\t\tthis.connectionSelectorsElements.forEach((query) => {\r\n\t\t\t\tif(typeof query === \"string\"){\r\n\t\t\t\t\tthis.connectionElements = this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(query)));\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.connectionElements.push(query);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.connectionElements.forEach((element) => {\r\n\t\t\t\tvar dropEvent = (e) => {\r\n\t\t\t\t\tthis.elementRowDrop(e, element, this.moving);\r\n\t\t\t\t};\r\n\r\n\t\t\t\telement.addEventListener(\"mouseup\", dropEvent);\r\n\t\t\t\telement.tabulatorElementDropEvent = dropEvent;\r\n\r\n\t\t\t\telement.classList.add(\"tabulator-movingrow-receiving\");\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t//disconnect from other tables\r\n\tdisconnectFromTables(){\r\n\t\tvar connectionTables;\r\n\r\n\t\tif(this.connectionSelectorsTables){\r\n\t\t\tconnectionTables = this.table.modules.comms.getConnections(this.connectionSelectorsTables);\r\n\r\n\t\t\tthis.table.options.movableRowsSendingStop.call(this.table, connectionTables);\r\n\r\n\t\t\tthis.table.modules.comms.send(this.connectionSelectorsTables, \"moveRow\", \"disconnect\");\r\n\t\t}\r\n\r\n\t\tthis.connectionElements.forEach((element) => {\r\n\t\t\telement.classList.remove(\"tabulator-movingrow-receiving\");\r\n\t\t\telement.removeEventListener(\"mouseup\", element.tabulatorElementDropEvent);\r\n\t\t\tdelete element.tabulatorElementDropEvent;\r\n\t\t});\r\n\t}\r\n\r\n\t//accept incomming connection\r\n\tconnect(table, row){\r\n\t\tif(!this.connectedTable){\r\n\t\t\tthis.connectedTable = table;\r\n\t\t\tthis.connectedRow = row;\r\n\r\n\t\t\tthis.table.element.classList.add(\"tabulator-movingrow-receiving\");\r\n\r\n\t\t\tthis.table.rowManager.getDisplayRows().forEach((row) => {\r\n\t\t\t\tif(row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup){\r\n\t\t\t\t\trow.getElement().addEventListener(\"mouseup\", row.modules.moveRow.mouseup);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.tableRowDropEvent = this.tableRowDrop.bind(this);\r\n\r\n\t\t\tthis.table.element.addEventListener(\"mouseup\", this.tableRowDropEvent);\r\n\r\n\t\t\tthis.table.options.movableRowsReceivingStart.call(this.table, row, table);\r\n\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Move Row Error - Table cannot accept connection, already connected to table:\", this.connectedTable);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t//close incomming connection\r\n\tdisconnect(table){\r\n\t\tif(table === this.connectedTable){\r\n\t\t\tthis.connectedTable = false;\r\n\t\t\tthis.connectedRow = false;\r\n\r\n\t\t\tthis.table.element.classList.remove(\"tabulator-movingrow-receiving\");\r\n\r\n\t\t\tthis.table.rowManager.getDisplayRows().forEach((row) =>{\r\n\t\t\t\tif(row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup){\r\n\t\t\t\t\trow.getElement().removeEventListener(\"mouseup\", row.modules.moveRow.mouseup);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.table.element.removeEventListener(\"mouseup\", this.tableRowDropEvent);\r\n\r\n\t\t\tthis.table.options.movableRowsReceivingStop.call(this.table, table);\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Move Row Error - trying to disconnect from non connected table\")\r\n\t\t}\r\n\t}\r\n\r\n\tdropComplete(table, row, success){\r\n\t\tvar sender = false;\r\n\r\n\t\tif(success){\r\n\r\n\t\t\tswitch(typeof this.table.options.movableRowsSender){\r\n\t\t\t\tcase \"string\":\r\n\t\t\t\tsender = this.senders[this.table.options.movableRowsSender];\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"function\":\r\n\t\t\t\tsender = this.table.options.movableRowsSender;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tif(sender){\r\n\t\t\t\tsender.call(this, this.moving.getComponent(), row ? row.getComponent() : undefined, table)\r\n\t\t\t}else{\r\n\t\t\t\tif(this.table.options.movableRowsSender){\r\n\t\t\t\t\tconsole.warn(\"Mover Row Error - no matching sender found:\", this.table.options.movableRowsSender);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.table.options.movableRowsSent.call(this.table, this.moving.getComponent(), row ? row.getComponent() : undefined, table);\r\n\r\n\t\t}else{\r\n\t\t\tthis.table.options.movableRowsSentFailed.call(this.table, this.moving.getComponent(), row ? row.getComponent() : undefined, table);\r\n\t\t}\r\n\r\n\t\tthis.endMove();\r\n\t}\r\n\r\n\ttableRowDrop(e, row){\r\n\t\tvar receiver = false,\r\n\t\tsuccess = false;\r\n\r\n\t\te.stopImmediatePropagation();\r\n\r\n\t\tswitch(typeof this.table.options.movableRowsReceiver){\r\n\t\t\tcase \"string\":\r\n\t\t\treceiver = this.receivers[this.table.options.movableRowsReceiver];\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\treceiver = this.table.options.movableRowsReceiver;\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tif(receiver){\r\n\t\t\tsuccess = receiver.call(this, this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable)\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Mover Row Error - no matching receiver found:\", this.table.options.movableRowsReceiver)\r\n\t\t}\r\n\r\n\t\tif(success){\r\n\t\t\tthis.table.options.movableRowsReceived.call(this.table, this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\r\n\t\t}else{\r\n\t\t\tthis.table.options.movableRowsReceivedFailed.call(this.table, this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\r\n\t\t}\r\n\r\n\t\tthis.table.modules.comms.send(this.connectedTable, \"moveRow\", \"dropcomplete\", {\r\n\t\t\trow:row,\r\n\t\t\tsuccess:success,\r\n\t\t});\r\n\t}\r\n\r\n\tcommsReceived(table, action, data){\r\n\t\tswitch(action){\r\n\t\t\tcase \"connect\":\r\n\t\t\treturn this.connect(table, data.row);\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"disconnect\":\r\n\t\t\treturn this.disconnect(table);\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"dropcomplete\":\r\n\t\t\treturn this.dropComplete(table, data.row, data.success);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nMoveRows.prototype.receivers = {\r\n\tinsert:function(fromRow, toRow, fromTable){\r\n\t\tthis.table.addRow(fromRow.getData(), undefined, toRow);\r\n\t\treturn true;\r\n\t},\r\n\r\n\tadd:function(fromRow, toRow, fromTable){\r\n\t\tthis.table.addRow(fromRow.getData());\r\n\t\treturn true;\r\n\t},\r\n\r\n\tupdate:function(fromRow, toRow, fromTable){\r\n\t\tif(toRow){\r\n\t\t\ttoRow.update(fromRow.getData());\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t},\r\n\r\n\treplace:function(fromRow, toRow, fromTable){\r\n\t\tif(toRow){\r\n\t\t\tthis.table.addRow(fromRow.getData(), undefined, toRow);\r\n\t\t\ttoRow.delete();\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t},\r\n};\r\n\r\nMoveRows.prototype.senders = {\r\n\tdelete:function(fromRow, toRow, toTable){\r\n\t\tfromRow.delete();\r\n\t}\r\n};\r\n\r\nMoveRows.moduleName = \"moveRow\";\r\n\r\nexport default MoveRows;","export default {};","import Module from '../../core/Module.js';\r\n\r\nimport defaultMutators from './defaults/mutators.js';\r\n\r\nclass Mutator extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.allowedTypes = [\"\", \"data\", \"edit\", \"clipboard\"]; //list of muatation types\r\n\t\tthis.enabled = true;\r\n\t}\r\n\r\n\t//initialize column mutator\r\n\tinitializeColumn(column){\r\n\t\tvar match = false,\r\n\t\tconfig = {};\r\n\r\n\t\tthis.allowedTypes.forEach((type) => {\r\n\t\t\tvar key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\r\n\t\t\tmutator;\r\n\r\n\t\t\tif(column.definition[key]){\r\n\t\t\t\tmutator = this.lookupMutator(column.definition[key]);\r\n\r\n\t\t\t\tif(mutator){\r\n\t\t\t\t\tmatch = true;\r\n\r\n\t\t\t\t\tconfig[key] = {\r\n\t\t\t\t\t\tmutator:mutator,\r\n\t\t\t\t\t\tparams: column.definition[key + \"Params\"] || {},\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(match){\r\n\t\t\tcolumn.modules.mutate = config;\r\n\t\t}\r\n\t}\r\n\r\n\tlookupMutator(value){\r\n\t\tvar mutator = false;\r\n\r\n\t\t//set column mutator\r\n\t\tswitch(typeof value){\r\n\t\t\tcase \"string\":\r\n\t\t\tif(Mutator.mutators[value]){\r\n\t\t\t\tmutator = Mutator.mutators[value];\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Mutator Error - No such mutator found, ignoring: \", value);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\tmutator = value;\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn mutator;\r\n\t}\r\n\r\n\t//apply mutator to row\r\n\ttransformRow(data, type, updatedData){\r\n\t\tvar key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\r\n\t\tvalue;\r\n\r\n\t\tif(this.enabled){\r\n\r\n\t\t\tthis.table.columnManager.traverse((column) => {\r\n\t\t\t\tvar mutator, params, component;\r\n\r\n\t\t\t\tif(column.modules.mutate){\r\n\t\t\t\t\tmutator = column.modules.mutate[key] || column.modules.mutate.mutator || false;\r\n\r\n\t\t\t\t\tif(mutator){\r\n\t\t\t\t\t\tvalue = column.getFieldValue(typeof updatedData !== \"undefined\" ? updatedData : data);\r\n\r\n\t\t\t\t\t\tif(type == \"data\" || typeof value !== \"undefined\"){\r\n\t\t\t\t\t\t\tcomponent = column.getComponent();\r\n\t\t\t\t\t\t\tparams = typeof mutator.params === \"function\" ? mutator.params(value, data, type, component) : mutator.params;\r\n\t\t\t\t\t\t\tcolumn.setFieldValue(data, mutator.mutator(value, data, type, params, component));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\t//apply mutator to new cell value\r\n\ttransformCell(cell, value){\r\n\t\tvar mutator = cell.column.modules.mutate.mutatorEdit || cell.column.modules.mutate.mutator || false,\r\n\t\ttempData = {};\r\n\r\n\t\tif(mutator){\r\n\t\t\ttempData = Object.assign(tempData, cell.row.getData());\r\n\t\t\tcell.column.setFieldValue(tempData, value);\r\n\t\t\treturn mutator.mutator(value, tempData, \"edit\", mutator.params, cell.getComponent());\r\n\t\t}else{\r\n\t\t\treturn value;\r\n\t\t}\r\n\t}\r\n\r\n\tenable(){\r\n\t\tthis.enabled = true;\r\n\t}\r\n\r\n\tdisable(){\r\n\t\tthis.enabled = false;\r\n\t}\r\n}\r\n\r\nMutator.moduleName = \"mutator\";\r\n\r\n//load defaults\r\nMutator.mutators = defaultMutators;\r\n\r\nexport default Mutator;","export default {\r\n\t\"page\":\"page\",\r\n\t\"size\":\"size\",\r\n\t\"sorters\":\"sorters\",\r\n\t\"filters\":\"filters\",\r\n};","export default {\r\n\t\"current_page\":\"current_page\",\r\n\t\"last_page\":\"last_page\",\r\n\t\"data\":\"data\",\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport Helpers from '../../core/Helpers.js';\r\n\r\nimport defaultDataSentNames from './defaults/dataSentNames.js';\r\nimport defaultDataReceivedNames from './defaults/dataReceivedNames.js';\r\n\r\nclass Page extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.mode = \"local\";\r\n\t\tthis.progressiveLoad = false;\r\n\r\n\t\tthis.size = 0;\r\n\t\tthis.page = 1;\r\n\t\tthis.count = 5;\r\n\t\tthis.max = 1;\r\n\r\n\t\tthis.displayIndex = 0; //index in display pipeline\r\n\r\n\t\tthis.initialLoad = true;\r\n\r\n\t\tthis.pageSizes = [];\r\n\r\n\t\tthis.dataReceivedNames = {};\r\n\t\tthis.dataSentNames = {};\r\n\r\n\t\tthis.createElements();\r\n\t}\r\n\r\n\tcreateElements(){\r\n\t\tvar button;\r\n\r\n\t\tthis.element = document.createElement(\"span\");\r\n\t\tthis.element.classList.add(\"tabulator-paginator\");\r\n\r\n\t\tthis.pagesElement = document.createElement(\"span\");\r\n\t\tthis.pagesElement.classList.add(\"tabulator-pages\");\r\n\r\n\t\tbutton = document.createElement(\"button\");\r\n\t\tbutton.classList.add(\"tabulator-page\");\r\n\t\tbutton.setAttribute(\"type\", \"button\");\r\n\t\tbutton.setAttribute(\"role\", \"button\");\r\n\t\tbutton.setAttribute(\"aria-label\", \"\");\r\n\t\tbutton.setAttribute(\"title\", \"\");\r\n\r\n\t\tthis.firstBut = button.cloneNode(true);\r\n\t\tthis.firstBut.setAttribute(\"data-page\", \"first\");\r\n\r\n\t\tthis.prevBut = button.cloneNode(true);\r\n\t\tthis.prevBut.setAttribute(\"data-page\", \"prev\");\r\n\r\n\t\tthis.nextBut = button.cloneNode(true);\r\n\t\tthis.nextBut.setAttribute(\"data-page\", \"next\");\r\n\r\n\t\tthis.lastBut = button.cloneNode(true);\r\n\t\tthis.lastBut.setAttribute(\"data-page\", \"last\");\r\n\r\n\t\tif(this.table.options.paginationSizeSelector){\r\n\t\t\tthis.pageSizeSelect = document.createElement(\"select\");\r\n\t\t\tthis.pageSizeSelect.classList.add(\"tabulator-page-size\");\r\n\t\t}\r\n\t}\r\n\r\n\tgeneratePageSizeSelectList(){\r\n\t\tvar pageSizes = [];\r\n\r\n\t\tif(this.pageSizeSelect){\r\n\r\n\t\t\tif(Array.isArray(this.table.options.paginationSizeSelector)){\r\n\t\t\t\tpageSizes = this.table.options.paginationSizeSelector;\r\n\t\t\t\tthis.pageSizes = pageSizes;\r\n\r\n\t\t\t\tif(this.pageSizes.indexOf(this.size) == -1){\r\n\t\t\t\t\tpageSizes.unshift(this.size);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\r\n\t\t\t\tif(this.pageSizes.indexOf(this.size) == -1){\r\n\t\t\t\t\tpageSizes = [];\r\n\r\n\t\t\t\t\tfor (let i = 1; i < 5; i++){\r\n\t\t\t\t\t\tpageSizes.push(this.size * i);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.pageSizes = pageSizes;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tpageSizes = this.pageSizes;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\twhile(this.pageSizeSelect.firstChild) this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);\r\n\r\n\t\t\tpageSizes.forEach((item) => {\r\n\t\t\t\tvar itemEl = document.createElement(\"option\");\r\n\t\t\t\titemEl.value = item;\r\n\r\n\t\t\t\tif(item === true){\r\n\t\t\t\t\tthis.table.modules.localize.bind(\"pagination|all\", function(value){\r\n\t\t\t\t\t\titemEl.innerHTML = value;\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\titemEl.innerHTML = item;\r\n\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\tthis.pageSizeSelect.appendChild(itemEl);\r\n\t\t\t});\r\n\r\n\t\t\tthis.pageSizeSelect.value = this.size;\r\n\t\t}\r\n\t}\r\n\r\n\t//setup pageination\r\n\tinitialize(hidden){\r\n\t\tvar pageSelectLabel, testElRow, testElCell;\r\n\r\n\t\t//update param names\r\n\t\tthis.dataSentNames = Object.assign({}, Page.defaultDataSentNames);\r\n\t\tthis.dataSentNames = Object.assign(this.dataSentNames, this.table.options.paginationDataSent);\r\n\r\n\t\tthis.dataReceivedNames = Object.assign({}, Page.defaultDataReceivedNames);\r\n\t\tthis.dataReceivedNames = Object.assign(this.dataReceivedNames, this.table.options.paginationDataReceived);\r\n\r\n\t\t//build pagination element\r\n\r\n\t\t//bind localizations\r\n\t\tthis.table.modules.localize.bind(\"pagination|first\", (value) => {\r\n\t\t\tthis.firstBut.innerHTML = value;\r\n\t\t});\r\n\r\n\t\tthis.table.modules.localize.bind(\"pagination|first_title\", (value) => {\r\n\t\t\tthis.firstBut.setAttribute(\"aria-label\", value);\r\n\t\t\tthis.firstBut.setAttribute(\"title\", value);\r\n\t\t});\r\n\r\n\t\tthis.table.modules.localize.bind(\"pagination|prev\", (value) => {\r\n\t\t\tthis.prevBut.innerHTML = value;\r\n\t\t});\r\n\r\n\t\tthis.table.modules.localize.bind(\"pagination|prev_title\", (value) => {\r\n\t\t\tthis.prevBut.setAttribute(\"aria-label\", value);\r\n\t\t\tthis.prevBut.setAttribute(\"title\", value);\r\n\t\t});\r\n\r\n\t\tthis.table.modules.localize.bind(\"pagination|next\", (value) => {\r\n\t\t\tthis.nextBut.innerHTML = value;\r\n\t\t});\r\n\r\n\t\tthis.table.modules.localize.bind(\"pagination|next_title\", (value) => {\r\n\t\t\tthis.nextBut.setAttribute(\"aria-label\", value);\r\n\t\t\tthis.nextBut.setAttribute(\"title\", value);\r\n\t\t});\r\n\r\n\t\tthis.table.modules.localize.bind(\"pagination|last\", (value) => {\r\n\t\t\tthis.lastBut.innerHTML = value;\r\n\t\t});\r\n\r\n\t\tthis.table.modules.localize.bind(\"pagination|last_title\", (value) => {\r\n\t\t\tthis.lastBut.setAttribute(\"aria-label\", value);\r\n\t\t\tthis.lastBut.setAttribute(\"title\", value);\r\n\t\t});\r\n\r\n\t\t//click bindings\r\n\t\tthis.firstBut.addEventListener(\"click\", () => {\r\n\t\t\tthis.setPage(1).then(()=>{}).catch(()=>{});\r\n\t\t});\r\n\r\n\t\tthis.prevBut.addEventListener(\"click\", () => {\r\n\t\t\tthis.previousPage().then(()=>{}).catch(()=>{});\r\n\t\t});\r\n\r\n\t\tthis.nextBut.addEventListener(\"click\", () => {\r\n\t\t\tthis.nextPage().then(()=>{}).catch(()=>{});\r\n\t\t});\r\n\r\n\t\tthis.lastBut.addEventListener(\"click\", () => {\r\n\t\t\tthis.setPage(this.max).then(()=>{}).catch(()=>{});\r\n\t\t});\r\n\r\n\t\tif(this.table.options.paginationElement){\r\n\t\t\tthis.element = this.table.options.paginationElement;\r\n\t\t}\r\n\r\n\t\tif(this.pageSizeSelect){\r\n\t\t\tpageSelectLabel = document.createElement(\"label\");\r\n\r\n\t\t\tthis.table.modules.localize.bind(\"pagination|page_size\", (value) => {\r\n\t\t\t\tthis.pageSizeSelect.setAttribute(\"aria-label\", value);\r\n\t\t\t\tthis.pageSizeSelect.setAttribute(\"title\", value);\r\n\t\t\t\tpageSelectLabel.innerHTML = value;\r\n\t\t\t});\r\n\r\n\t\t\tthis.element.appendChild(pageSelectLabel);\r\n\t\t\tthis.element.appendChild(this.pageSizeSelect);\r\n\r\n\t\t\tthis.pageSizeSelect.addEventListener(\"change\", (e) => {\r\n\t\t\t\tthis.setPageSize(this.pageSizeSelect.value == \"true\" ? true : this.pageSizeSelect.value);\r\n\t\t\t\tthis.setPage(1).then(()=>{}).catch(()=>{});\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t//append to DOM\r\n\t\tthis.element.appendChild(this.firstBut);\r\n\t\tthis.element.appendChild(this.prevBut);\r\n\t\tthis.element.appendChild(this.pagesElement);\r\n\t\tthis.element.appendChild(this.nextBut);\r\n\t\tthis.element.appendChild(this.lastBut);\r\n\r\n\t\tif(!this.table.options.paginationElement && !hidden){\r\n\t\t\tthis.table.footerManager.append(this.element, this);\r\n\t\t}\r\n\r\n\t\t//set default values\r\n\t\tthis.mode = this.table.options.pagination;\r\n\r\n\t\tif(this.table.options.paginationSize){\r\n\t\t\tthis.size = this.table.options.paginationSize;\r\n\t\t}else{\r\n\t\t\ttestElRow = document.createElement(\"div\");\r\n\t\t\ttestElRow.classList.add(\"tabulator-row\");\r\n\t\t\ttestElRow.style.visibility = hidden;\r\n\r\n\t\t\ttestElCell = document.createElement(\"div\");\r\n\t\t\ttestElCell.classList.add(\"tabulator-cell\");\r\n\t\t\ttestElCell.innerHTML = \"Page Row Test\";\r\n\r\n\t\t\ttestElRow.appendChild(testElCell);\r\n\r\n\t\t\tthis.table.rowManager.getTableElement().appendChild(testElRow);\r\n\r\n\t\t\tthis.size =  Math.floor(this.table.rowManager.getElement().clientHeight / testElRow.offsetHeight);\r\n\r\n\t\t\tthis.table.rowManager.getTableElement().removeChild(testElRow);\r\n\t\t}\r\n\r\n\t\t// this.page = this.table.options.paginationInitialPage || 1;\r\n\t\tthis.count = this.table.options.paginationButtonCount;\r\n\r\n\t\tthis.generatePageSizeSelectList();\r\n\t}\r\n\r\n\tinitializeProgressive(mode){\r\n\t\tthis.initialize(true);\r\n\t\tthis.mode = \"progressive_\" + mode;\r\n\t\tthis.progressiveLoad = true;\r\n\t}\r\n\r\n\tsetDisplayIndex(index){\r\n\t\tthis.displayIndex = index;\r\n\t}\r\n\r\n\tgetDisplayIndex(){\r\n\t\treturn this.displayIndex;\r\n\t}\r\n\r\n\t//calculate maximum page from number of rows\r\n\tsetMaxRows(rowCount){\r\n\t\tif(!rowCount){\r\n\t\t\tthis.max = 1;\r\n\t\t}else{\r\n\t\t\tthis.max = this.size === true ?  1 : Math.ceil(rowCount/this.size);\r\n\t\t}\r\n\r\n\t\tif(this.page > this.max){\r\n\t\t\tthis.page = this.max;\r\n\t\t}\r\n\t}\r\n\r\n\t//reset to first page without triggering action\r\n\treset(force, columnsChanged){\r\n\t\tif(this.mode == \"local\" || force){\r\n\t\t\tthis.page = 1;\r\n\t\t}\r\n\r\n\t\tif(columnsChanged){\r\n\t\t\tthis.initialLoad = true;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\t//set the maxmum page\r\n\tsetMaxPage(max){\r\n\r\n\t\tmax = parseInt(max);\r\n\r\n\t\tthis.max = max || 1;\r\n\r\n\t\tif(this.page > this.max){\r\n\t\t\tthis.page = this.max;\r\n\t\t\tthis.trigger();\r\n\t\t}\r\n\t}\r\n\r\n\t//set current page number\r\n\tsetPage(page){\r\n\t\tswitch(page){\r\n\t\t\tcase \"first\":\r\n\t\t\t\treturn this.setPage(1);\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"prev\":\r\n\t\t\t\treturn this.previousPage();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"next\":\r\n\t\t\t\treturn this.nextPage();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"last\":\r\n\t\t\t\treturn this.setPage(this.max);\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\r\n\t\t\tpage = parseInt(page);\r\n\r\n\t\t\tif((page > 0 && page <= this.max) || this.mode !== \"local\"){\r\n\t\t\t\tthis.page = page;\r\n\t\t\t\tthis.trigger()\r\n\t\t\t\t.then(()=>{\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t})\r\n\t\t\t\t.catch(()=>{\r\n\t\t\t\t\treject();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.page){\r\n\t\t\t\t\tthis.table.modules.persistence.save(\"page\");\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Pagination Error - Requested page is out of range of 1 - \" + this.max + \":\", page);\r\n\t\t\t\treject();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tsetPageToRow(row){\r\n\t\treturn new Promise((resolve, reject)=>{\r\n\r\n\t\t\tvar rows = this.table.rowManager.getDisplayRows(this.displayIndex - 1);\r\n\t\t\tvar index = rows.indexOf(row);\r\n\r\n\t\t\tif(index > -1){\r\n\t\t\t\tvar page = this.size === true ? 1 : Math.ceil((index + 1) / this.size);\r\n\r\n\t\t\t\tthis.setPage(page)\r\n\t\t\t\t.then(()=>{\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t})\r\n\t\t\t\t.catch(()=>{\r\n\t\t\t\t\treject();\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Pagination Error - Requested row is not visible\");\r\n\t\t\t\treject();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tsetPageSize(size){\r\n\t\tif(size !== true){\r\n\t\t\tsize = parseInt(size);\r\n\t\t}\r\n\r\n\t\tif(size > 0){\r\n\t\t\tthis.size = size;\r\n\t\t}\r\n\r\n\t\tif(this.pageSizeSelect){\r\n\t\t\t// this.pageSizeSelect.value = size;\r\n\t\t\tthis.generatePageSizeSelectList();\r\n\t\t}\r\n\r\n\t\tif(this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.page){\r\n\t\t\tthis.table.modules.persistence.save(\"page\");\r\n\t\t}\r\n\t}\r\n\r\n\t//setup the pagination buttons\r\n\t_setPageButtons(){\r\n\t\tlet leftSize = Math.floor((this.count-1) / 2);\r\n\t\tlet rightSize = Math.ceil((this.count-1) / 2);\r\n\t\tlet min = this.max - this.page + leftSize + 1 < this.count ? this.max-this.count+1: Math.max(this.page-leftSize,1);\r\n\t\tlet max = this.page <= rightSize? Math.min(this.count, this.max) :Math.min(this.page+rightSize, this.max);\r\n\r\n\t\twhile(this.pagesElement.firstChild) this.pagesElement.removeChild(this.pagesElement.firstChild);\r\n\r\n\t\tif(this.page == 1){\r\n\t\t\tthis.firstBut.disabled = true;\r\n\t\t\tthis.prevBut.disabled = true;\r\n\t\t}else{\r\n\t\t\tthis.firstBut.disabled = false;\r\n\t\t\tthis.prevBut.disabled = false;\r\n\t\t}\r\n\r\n\t\tif(this.page == this.max){\r\n\t\t\tthis.lastBut.disabled = true;\r\n\t\t\tthis.nextBut.disabled = true;\r\n\t\t}else{\r\n\t\t\tthis.lastBut.disabled = false;\r\n\t\t\tthis.nextBut.disabled = false;\r\n\t\t}\r\n\r\n\t\tfor(let i = min; i <= max; i++){\r\n\t\t\tif(i>0 && i <= this.max){\r\n\t\t\t\tthis.pagesElement.appendChild(this._generatePageButton(i));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.footerRedraw();\r\n\t}\r\n\r\n\t_generatePageButton(page){\r\n\t\tvar button = document.createElement(\"button\");\r\n\r\n\t\tbutton.classList.add(\"tabulator-page\");\r\n\t\tif(page == this.page){\r\n\t\t\tbutton.classList.add(\"active\");\r\n\t\t}\r\n\r\n\t\tbutton.setAttribute(\"type\", \"button\");\r\n\t\tbutton.setAttribute(\"role\", \"button\");\r\n\r\n\t\tthis.table.modules.localize.bind(\"pagination|page_title\", (value) => {\r\n\t\t\tbutton.setAttribute(\"aria-label\", value + \" \" + page);\r\n\t\t\tbutton.setAttribute(\"title\", value + \" \" + page);\r\n\t\t});\r\n\r\n\t\tbutton.setAttribute(\"data-page\", page);\r\n\t\tbutton.textContent = page;\r\n\r\n\t\tbutton.addEventListener(\"click\", (e) => {\r\n\t\t\tthis.setPage(page).then(()=>{}).catch(()=>{});\r\n\t\t});\r\n\r\n\t\treturn button;\r\n\t}\r\n\r\n\t//previous page\r\n\tpreviousPage(){\r\n\t\treturn new Promise((resolve, reject)=>{\r\n\t\t\tif(this.page > 1){\r\n\t\t\t\tthis.page--;\r\n\t\t\t\tthis.trigger()\r\n\t\t\t\t.then(()=>{\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t})\r\n\t\t\t\t.catch(()=>{\r\n\t\t\t\t\treject();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.page){\r\n\t\t\t\t\tthis.table.modules.persistence.save(\"page\");\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Pagination Error - Previous page would be less than page 1:\", 0);\r\n\t\t\t\treject()\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//next page\r\n\tnextPage(){\r\n\t\treturn new Promise((resolve, reject)=>{\r\n\t\t\tif(this.page < this.max){\r\n\t\t\t\tthis.page++;\r\n\t\t\t\tthis.trigger()\r\n\t\t\t\t.then(()=>{\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t})\r\n\t\t\t\t.catch(()=>{\r\n\t\t\t\t\treject();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.page){\r\n\t\t\t\t\tthis.table.modules.persistence.save(\"page\");\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tif(!this.progressiveLoad){\r\n\t\t\t\t\tconsole.warn(\"Pagination Error - Next page would be greater than maximum page of \" + this.max + \":\", this.max + 1);\r\n\t\t\t\t}\r\n\t\t\t\treject();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//return current page number\r\n\tgetPage(){\r\n\t\treturn this.page;\r\n\t}\r\n\r\n\t//return max page number\r\n\tgetPageMax(){\r\n\t\treturn this.max;\r\n\t}\r\n\r\n\tgetPageSize(size){\r\n\t\treturn this.size;\r\n\t}\r\n\r\n\tgetMode(){\r\n\t\treturn this.mode;\r\n\t}\r\n\r\n\t//return appropriate rows for current page\r\n\tgetRows(data){\r\n\t\tvar output, start, end;\r\n\r\n\t\tif(this.mode == \"local\"){\r\n\t\t\toutput = [];\r\n\r\n\t\t\tif(this.size === true){\r\n\t\t\t\tstart = 0;\r\n\t\t\t\tend = data.length;\r\n\t\t\t}else{\r\n\t\t\t\tstart = this.size * (this.page - 1);\r\n\t\t\t\tend = start + parseInt(this.size);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tthis._setPageButtons();\r\n\r\n\t\t\tfor(let i = start; i < end; i++){\r\n\t\t\t\tif(data[i]){\r\n\t\t\t\t\toutput.push(data[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn output;\r\n\t\t}else{\r\n\t\t\tthis._setPageButtons();\r\n\r\n\t\t\treturn data.slice(0);\r\n\t\t}\r\n\t}\r\n\r\n\ttrigger(){\r\n\t\tvar left;\r\n\r\n\t\treturn new Promise((resolve, reject)=>{\r\n\r\n\t\t\tswitch(this.mode){\r\n\t\t\t\tcase \"local\":\r\n\t\t\t\tleft = this.table.rowManager.scrollLeft;\r\n\r\n\t\t\t\tthis.table.rowManager.refreshActiveData(\"page\");\r\n\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\r\n\r\n\t\t\t\tthis.table.options.pageLoaded.call(this.table, this.getPage());\r\n\t\t\t\tresolve();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"remote\":\r\n\t\t\t\tcase \"progressive_load\":\r\n\t\t\t\tcase \"progressive_scroll\":\r\n\t\t\t\tthis.table.modules.ajax.blockActiveRequest();\r\n\t\t\t\tthis._getRemotePage()\r\n\t\t\t\t.then(()=>{\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t})\r\n\t\t\t\t.catch(()=>{\r\n\t\t\t\t\treject();\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\tconsole.warn(\"Pagination Error - no such pagination mode:\", this.mode);\r\n\t\t\t\treject();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t_getRemotePage(){\r\n\t\tvar oldParams, pageParams;\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\r\n\t\t\tif(!this.table.modExists(\"ajax\", true)){\r\n\t\t\t\treject();\r\n\t\t\t}\r\n\r\n\t\t\t//record old params and restore after request has been made\r\n\t\t\toldParams = Helpers.deepClone(this.table.modules.ajax.getParams() || {});\r\n\t\t\tpageParams = this.table.modules.ajax.getParams();\r\n\r\n\t\t\t//configure request params\r\n\t\t\tpageParams[this.dataSentNames.page] = this.page;\r\n\r\n\t\t\t//set page size if defined\r\n\t\t\tif(this.size){\r\n\t\t\t\tpageParams[this.dataSentNames.size] = this.size;\r\n\t\t\t}\r\n\r\n\t\t\t//set sort data if defined\r\n\t\t\tif(this.table.options.ajaxSorting && this.table.modExists(\"sort\")){\r\n\t\t\t\tlet sorters = this.table.modules.sort.getSort();\r\n\r\n\t\t\t\tsorters.forEach((item) => {\r\n\t\t\t\t\tdelete item.column;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tpageParams[this.dataSentNames.sorters] = sorters;\r\n\t\t\t}\r\n\r\n\t\t\t//set filter data if defined\r\n\t\t\tif(this.table.options.ajaxFiltering && this.table.modExists(\"filter\")){\r\n\t\t\t\tlet filters = this.table.modules.filter.getFilters(true, true);\r\n\t\t\t\tpageParams[this.dataSentNames.filters] = filters;\r\n\t\t\t}\r\n\r\n\t\t\tthis.table.modules.ajax.setParams(pageParams);\r\n\r\n\t\t\tthis.table.modules.ajax.sendRequest(this.progressiveLoad)\r\n\t\t\t.then((data)=>{\r\n\t\t\t\tthis._parseRemoteData(data);\r\n\t\t\t\tresolve();\r\n\t\t\t})\r\n\t\t\t.catch((e)=>{reject()});\r\n\r\n\t\t\tthis.table.modules.ajax.setParams(oldParams);\r\n\t\t});\r\n\t}\r\n\r\n\t_parseRemoteData(data){\r\n\t\tvar left, data, margin;\r\n\r\n\t\tif(typeof data[this.dataReceivedNames.last_page] === \"undefined\"){\r\n\t\t\tconsole.warn(\"Remote Pagination Error - Server response missing '\" + this.dataReceivedNames.last_page + \"' property\");\r\n\t\t}\r\n\r\n\t\tif(data[this.dataReceivedNames.data]){\r\n\t\t\tthis.max = parseInt(data[this.dataReceivedNames.last_page]) || 1;\r\n\r\n\t\t\tif(this.progressiveLoad){\r\n\t\t\t\tswitch(this.mode){\r\n\t\t\t\t\tcase \"progressive_load\":\r\n\r\n\t\t\t\t\tif(this.page == 1){\r\n\t\t\t\t\t\tthis.table.rowManager.setData(data[this.dataReceivedNames.data], false, this.initialLoad && this.page == 1)\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.table.rowManager.addRows(data[this.dataReceivedNames.data]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(this.page < this.max){\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.nextPage().then(()=>{}).catch(()=>{});\r\n\t\t\t\t\t\t}, this.table.options.ajaxProgressiveLoadDelay);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase \"progressive_scroll\":\r\n\t\t\t\t\tdata = this.table.rowManager.getData().concat(data[this.dataReceivedNames.data]);\r\n\r\n\t\t\t\t\tthis.table.rowManager.setData(data, true, this.initialLoad && this.page == 1);\r\n\r\n\t\t\t\t\tmargin = this.table.options.ajaxProgressiveLoadScrollMargin || (this.table.rowManager.element.clientHeight * 2);\r\n\r\n\t\t\t\t\tif(this.table.rowManager.element.scrollHeight <= (this.table.rowManager.element.clientHeight + margin)){\r\n\t\t\t\t\t\tthis.nextPage().then(()=>{}).catch(()=>{});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tleft = this.table.rowManager.scrollLeft;\r\n\r\n\t\t\t\tthis.table.rowManager.setData(data[this.dataReceivedNames.data], false, this.initialLoad && this.page == 1);\r\n\r\n\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\r\n\r\n\t\t\t\tthis.table.columnManager.scrollHorizontal(left);\r\n\r\n\t\t\t\tthis.table.options.pageLoaded.call(this.table, this.getPage());\r\n\t\t\t}\r\n\r\n\t\t\tthis.initialLoad = false;\r\n\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Remote Pagination Error - Server response missing '\" + this.dataReceivedNames.data + \"' property\");\r\n\t\t}\r\n\t}\r\n\r\n\t//handle the footer element being redrawn\r\n\tfooterRedraw(){\r\n\t\tvar footer = this.table.footerManager.element;\r\n\r\n\t\tif((Math.ceil(footer.clientWidth) - footer.scrollWidth) < 0){\r\n\t\t\tthis.pagesElement.style.display = 'none';\r\n\t\t}else{\r\n\t\t\tthis.pagesElement.style.display = '';\r\n\r\n\t\t\tif((Math.ceil(footer.clientWidth) - footer.scrollWidth) < 0){\r\n\t\t\t\tthis.pagesElement.style.display = 'none';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nPage.moduleName = \"page\";\r\n\r\n//load defaults\r\nPage.defaultDataSentNames = defaultDataSentNames;\r\nPage.defaultDataReceivedNames = defaultDataReceivedNames;\r\n\r\nexport default Page;","// read peristence information from storage\r\nexport default {\r\n\tlocal:function(id, type){\r\n\t\tvar data = localStorage.getItem(id + \"-\" + type);\r\n\r\n\t\treturn data ? JSON.parse(data) : false;\r\n\t},\r\n\tcookie:function(id, type){\r\n\t\tvar cookie = document.cookie,\r\n\t\tkey = id + \"-\" + type,\r\n\t\tcookiePos = cookie.indexOf(key + \"=\"),\r\n\t\tend, data;\r\n\r\n\t\t//if cookie exists, decode and load column data into tabulator\r\n\t\tif(cookiePos > -1){\r\n\t\t\tcookie = cookie.substr(cookiePos);\r\n\r\n\t\t\tend = cookie.indexOf(\";\");\r\n\r\n\t\t\tif(end > -1){\r\n\t\t\t\tcookie = cookie.substr(0, end);\r\n\t\t\t}\r\n\r\n\t\t\tdata = cookie.replace(key + \"=\", \"\");\r\n\t\t}\r\n\r\n\t\treturn data ? JSON.parse(data) : false;\r\n\t}\r\n};","//write persistence information to storage\r\nexport default {\r\n\tlocal:function(id, type, data){\r\n\t\tlocalStorage.setItem(id + \"-\" + type, JSON.stringify(data));\r\n\t},\r\n\tcookie:function(id, type, data){\r\n\t\tvar expireDate = new Date();\r\n\r\n\t\texpireDate.setDate(expireDate.getDate() + 10000);\r\n\r\n\t\tdocument.cookie = id + \"-\" + type + \"=\" + JSON.stringify(data) + \"; expires=\" + expireDate.toUTCString();\r\n\t}\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport defaultReaders from './defaults/readers.js';\r\nimport defaultWriters from './defaults/writers.js';\r\n\r\nclass Persistence extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.mode = \"\";\r\n\t\tthis.id = \"\";\r\n\t\t// this.persistProps = [\"field\", \"width\", \"visible\"];\r\n\t\tthis.defWatcherBlock = false;\r\n\t\tthis.config = {};\r\n\t\tthis.readFunc = false;\r\n\t\tthis.writeFunc = false;\r\n\t}\r\n\r\n\t// Test for whether localStorage is available for use.\r\n\tlocalStorageTest() {\r\n\t\tvar  testKey =  \"_tabulator_test\";\r\n\r\n\t\ttry {\r\n\t\t\twindow.localStorage.setItem( testKey, testKey);\r\n\t\t\twindow.localStorage.removeItem( testKey );\r\n\t\t\treturn true;\r\n\t\t} catch(e) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t//setup parameters\r\n\tinitialize(){\r\n\t\t//determine persistent layout storage type\r\n\t\tvar mode = this.table.options.persistenceMode,\r\n\t\tid = this.table.options.persistenceID,\r\n\t\tretreivedData;\r\n\r\n\t\tthis.mode = mode !== true ?  mode : (this.localStorageTest() ? \"local\" : \"cookie\");\r\n\r\n\t\tif(this.table.options.persistenceReaderFunc){\r\n\t\t\tif(typeof this.table.options.persistenceReaderFunc === \"function\"){\r\n\t\t\t\tthis.readFunc = this.table.options.persistenceReaderFunc;\r\n\t\t\t}else{\r\n\t\t\t\tif(Persistence.readers[this.table.options.persistenceReaderFunc]){\r\n\t\t\t\t\tthis.readFunc = Persistence.readers[this.table.options.persistenceReaderFunc];\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Persistence Read Error - invalid reader set\", this.table.options.persistenceReaderFunc);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(Persistence.readers[this.mode]){\r\n\t\t\t\tthis.readFunc = Persistence.readers[this.mode];\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Persistence Read Error - invalid reader set\", this.mode);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.table.options.persistenceWriterFunc){\r\n\t\t\tif(typeof this.table.options.persistenceWriterFunc === \"function\"){\r\n\t\t\t\tthis.writeFunc = this.table.options.persistenceWriterFunc;\r\n\t\t\t}else{\r\n\t\t\t\tif(Persistence.writers[this.table.options.persistenceWriterFunc]){\r\n\t\t\t\t\tthis.writeFunc = Persistence.writers[this.table.options.persistenceWriterFunc];\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Persistence Write Error - invalid reader set\", this.table.options.persistenceWriterFunc);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(Persistence.writers[this.mode]){\r\n\t\t\t\tthis.writeFunc = Persistence.writers[this.mode];\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Persistence Write Error - invalid writer set\", this.mode);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//set storage tag\r\n\t\tthis.id = \"tabulator-\" + (id || (this.table.element.getAttribute(\"id\") || \"\"));\r\n\r\n\t\tthis.config = {\r\n\t\t\tsort:this.table.options.persistence === true || this.table.options.persistence.sort,\r\n\t\t\tfilter:this.table.options.persistence === true || this.table.options.persistence.filter,\r\n\t\t\tgroup:this.table.options.persistence === true || this.table.options.persistence.group,\r\n\t\t\tpage:this.table.options.persistence === true || this.table.options.persistence.page,\r\n\t\t\tcolumns:this.table.options.persistence === true ? [\"title\", \"width\", \"visible\"] : this.table.options.persistence.columns,\r\n\t\t};\r\n\r\n\t\t//load pagination data if needed\r\n\t\tif(this.config.page){\r\n\t\t\tretreivedData = this.retreiveData(\"page\");\r\n\r\n\t\t\tif(retreivedData){\r\n\t\t\t\tif(typeof retreivedData.paginationSize !== \"undefined\" && (this.config.page === true || this.config.page.size)){\r\n\t\t\t\t\tthis.table.options.paginationSize = retreivedData.paginationSize;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(typeof retreivedData.paginationInitialPage !== \"undefined\" && (this.config.page === true || this.config.page.page)){\r\n\t\t\t\t\tthis.table.options.paginationInitialPage = retreivedData.paginationInitialPage;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//load group data if needed\r\n\t\tif(this.config.group){\r\n\t\t\tretreivedData = this.retreiveData(\"group\");\r\n\r\n\t\t\tif(retreivedData){\r\n\t\t\t\tif(typeof retreivedData.groupBy !== \"undefined\" && (this.config.group === true || this.config.group.groupBy)){\r\n\t\t\t\t\tthis.table.options.groupBy = retreivedData.groupBy;\r\n\t\t\t\t}\r\n\t\t\t\tif(typeof retreivedData.groupStartOpen !== \"undefined\" && (this.config.group === true || this.config.group.groupStartOpen)){\r\n\t\t\t\t\tthis.table.options.groupStartOpen = retreivedData.groupStartOpen;\r\n\t\t\t\t}\r\n\t\t\t\tif(typeof retreivedData.groupHeader !== \"undefined\" && (this.config.group === true || this.config.group.groupHeader)){\r\n\t\t\t\t\tthis.table.options.groupHeader = retreivedData.groupHeader;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.config.columns){\r\n\t\t\tthis.table.options.columns = this.load(\"columns\", this.table.options.columns);\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeColumn(column){\r\n\t\tvar def, keys;\r\n\r\n\t\tif(this.config.columns){\r\n\t\t\tthis.defWatcherBlock = true;\r\n\r\n\t\t\tdef = column.getDefinition();\r\n\r\n\t\t\tkeys = this.config.columns === true ? Object.keys(def) : this.config.columns;\r\n\r\n\t\t\tkeys.forEach((key)=>{\r\n\t\t\t\tvar props = Object.getOwnPropertyDescriptor(def, key);\r\n\t\t\t\tvar value = def[key];\r\n\t\t\t\tif(props){\r\n\t\t\t\t\tObject.defineProperty(def, key, {\r\n\t\t\t\t\t\tset: function(newValue){\r\n\t\t\t\t\t\t\tvalue = newValue;\r\n\r\n\t\t\t\t\t\t\tif(!this.defWatcherBlock){\r\n\t\t\t\t\t\t\t\tthis.save(\"columns\");\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif(props.set){\r\n\t\t\t\t\t\t\t\tprops.set(newValue);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tget:function(){\r\n\t\t\t\t\t\t\tif(props.get){\r\n\t\t\t\t\t\t\t\tprops.get();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.defWatcherBlock = false;\r\n\t\t}\r\n\t}\r\n\r\n\t//load saved definitions\r\n\tload(type, current){\r\n\t\tvar data = this.retreiveData(type);\r\n\r\n\t\tif(current){\r\n\t\t\tdata = data ? this.mergeDefinition(current, data) : current;\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\t//retreive data from memory\r\n\tretreiveData(type){\r\n\t\treturn this.readFunc ? this.readFunc(this.id, type) : false;\r\n\t}\r\n\r\n\t//merge old and new column definitions\r\n\tmergeDefinition(oldCols, newCols){\r\n\t\tvar output = [];\r\n\r\n\t\tnewCols = newCols || [];\r\n\r\n\t\tnewCols.forEach((column, to) => {\r\n\t\t\tvar from = this._findColumn(oldCols, column),\r\n\t\t\tkeys;\r\n\r\n\t\t\tif(from){\r\n\t\t\t\tif(this.config.columns === true || this.config.columns == undefined){\r\n\t\t\t\t\tkeys =  Object.keys(from);\r\n\t\t\t\t\tkeys.push(\"width\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tkeys = this.config.columns;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tkeys.forEach((key)=>{\r\n\t\t\t\t\tif(key !== \"columns\" && typeof column[key] !== \"undefined\"){\r\n\t\t\t\t\t\tfrom[key] = column[key];\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(from.columns){\r\n\t\t\t\t\tfrom.columns = this.mergeDefinition(from.columns, column.columns);\r\n\t\t\t\t}\r\n\r\n\t\t\t\toutput.push(from);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\toldCols.forEach((column, i) => {\r\n\t\t\tvar from = this._findColumn(newCols, column);\r\n\r\n\t\t\tif (!from) {\r\n\t\t\t\tif(output.length>i){\r\n\t\t\t\t\toutput.splice(i, 0, column);\r\n\t\t\t\t}else{\r\n\t\t\t\t\toutput.push(column);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\t//find matching columns\r\n\t_findColumn(columns, subject){\r\n\t\tvar type = subject.columns ? \"group\" : (subject.field ? \"field\" : \"object\");\r\n\r\n\t\treturn columns.find(function(col){\r\n\t\t\tswitch(type){\r\n\t\t\t\tcase \"group\":\r\n\t\t\t\treturn col.title === subject.title && col.columns.length === subject.columns.length;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"field\":\r\n\t\t\t\treturn col.field === subject.field;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"object\":\r\n\t\t\t\treturn col === subject;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//save data\r\n\tsave(type){\r\n\t\tvar data = {};\r\n\r\n\t\tswitch(type){\r\n\t\t\tcase \"columns\":\r\n\t\t\tdata = this.parseColumns(this.table.columnManager.getColumns())\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"filter\":\r\n\t\t\tdata = this.table.modules.filter.getFilters();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"sort\":\r\n\t\t\tdata = this.validateSorters(this.table.modules.sort.getSort());\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"group\":\r\n\t\t\tdata = this.getGroupConfig();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"page\":\r\n\t\t\tdata = this.getPageConfig();\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tif(this.writeFunc){\r\n\t\t\tthis.writeFunc(this.id, type, data);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//ensure sorters contain no function data\r\n\tvalidateSorters(data){\r\n\t\tdata.forEach(function(item){\r\n\t\t\titem.column = item.field;\r\n\t\t\tdelete item.field;\r\n\t\t});\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\tgetGroupConfig(){\r\n\t\tvar data = {};\r\n\r\n\t\tif(this.config.group){\r\n\t\t\tif(this.config.group === true || this.config.group.groupBy){\r\n\t\t\t\tdata.groupBy = this.table.options.groupBy;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.config.group === true || this.config.group.groupStartOpen){\r\n\t\t\t\tdata.groupStartOpen = this.table.options.groupStartOpen;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.config.group === true || this.config.group.groupHeader){\r\n\t\t\t\tdata.groupHeader = this.table.options.groupHeader;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\tgetPageConfig(){\r\n\t\tvar data = {};\r\n\r\n\t\tif(this.config.page){\r\n\t\t\tif(this.config.page === true || this.config.page.size){\r\n\t\t\t\tdata.paginationSize = this.table.modules.page.getPageSize();\r\n\t\t\t}\r\n\r\n\t\t\tif(this.config.page === true || this.config.page.page){\r\n\t\t\t\tdata.paginationInitialPage = this.table.modules.page.getPage();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\r\n\t//parse columns for data to store\r\n\tparseColumns(columns){\r\n\t\tvar definitions = [],\r\n\t\texcludedKeys = [\"headerContextMenu\", \"headerMenu\", \"contextMenu\", \"clickMenu\"];\r\n\r\n\t\tcolumns.forEach((column) => {\r\n\t\t\tvar defStore = {},\r\n\t\t\tcolDef = column.getDefinition(),\r\n\t\t\tkeys;\r\n\r\n\t\t\tif(column.isGroup){\r\n\t\t\t\tdefStore.title = colDef.title;\r\n\t\t\t\tdefStore.columns = this.parseColumns(column.getColumns());\r\n\t\t\t}else{\r\n\t\t\t\tdefStore.field = column.getField();\r\n\r\n\t\t\t\tif(this.config.columns === true || this.config.columns == undefined){\r\n\t\t\t\t\tkeys =  Object.keys(colDef);\r\n\t\t\t\t\tkeys.push(\"width\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tkeys = this.config.columns;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tkeys.forEach((key)=>{\r\n\t\t\t\t\tswitch(key){\r\n\t\t\t\t\t\tcase \"width\":\r\n\t\t\t\t\t\tdefStore.width = column.getWidth();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"visible\":\r\n\t\t\t\t\t\tdefStore.visible = column.visible;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tif(typeof colDef[key] !== \"function\" && excludedKeys.indexOf(key) === -1){\r\n\t\t\t\t\t\t\tdefStore[key] = colDef[key];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tdefinitions.push(defStore);\r\n\t\t});\r\n\r\n\t\treturn definitions;\r\n\t}\r\n}\r\n\r\nPersistence.moduleName = \"persistence\";\r\n\r\n//load defaults\r\nPersistence.readers = defaultReaders;\r\nPersistence.writers = defaultWriters;\r\n\r\nexport default Persistence;","import Module from '../../core/Module.js';\r\n\r\nclass Print extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.element = false;\r\n\t\tthis.manualBlock = false;\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\twindow.addEventListener(\"beforeprint\", this.replaceTable.bind(this));\r\n\t\twindow.addEventListener(\"afterprint\", this.cleanup.bind(this));\r\n\t}\r\n\r\n\treplaceTable(){\r\n\t\tif(!this.manualBlock){\r\n\t\t\tthis.element = document.createElement(\"div\");\r\n\t\t\tthis.element.classList.add(\"tabulator-print-table\");\r\n\r\n\t\t\tthis.element.appendChild(this.table.modules.export.genereateTable(this.table.options.printConfig, this.table.options.printStyled, this.table.options.printRowRange, \"print\"));\r\n\r\n\t\t\tthis.table.element.style.display = \"none\";\r\n\r\n\t\t\tthis.table.element.parentNode.insertBefore(this.element, this.table.element);\r\n\t\t}\r\n\t}\r\n\r\n\tcleanup(){\r\n\t\tdocument.body.classList.remove(\"tabulator-print-fullscreen-hide\");\r\n\r\n\t\tif(this.element && this.element.parentNode){\r\n\t\t\tthis.element.parentNode.removeChild(this.element);\r\n\t\t\tthis.table.element.style.display = \"\";\r\n\t\t}\r\n\t}\r\n\r\n\tprintFullscreen(visible, style, config){\r\n\t\tvar scrollX = window.scrollX,\r\n\t\tscrollY = window.scrollY,\r\n\t\theaderEl = document.createElement(\"div\"),\r\n\t\tfooterEl = document.createElement(\"div\"),\r\n\t\ttableEl = this.table.modules.export.genereateTable(typeof config != \"undefined\" ? config : this.table.options.printConfig, typeof style != \"undefined\" ? style : this.table.options.printStyled, visible || this.table.options.printRowRange, \"print\"),\r\n\t\theaderContent, footerContent;\r\n\r\n\t\tthis.manualBlock = true;\r\n\r\n\t\tthis.element = document.createElement(\"div\");\r\n\t\tthis.element.classList.add(\"tabulator-print-fullscreen\");\r\n\r\n\t\tif(this.table.options.printHeader){\r\n\t\t\theaderEl.classList.add(\"tabulator-print-header\");\r\n\r\n\t\t\theaderContent = typeof this.table.options.printHeader == \"function\" ? this.table.options.printHeader.call(this.table) : this.table.options.printHeader;\r\n\r\n\t\t\tif(typeof headerContent == \"string\"){\r\n\t\t\t\theaderEl.innerHTML = headerContent;\r\n\t\t\t}else{\r\n\t\t\t\theaderEl.appendChild(headerContent);\r\n\t\t\t}\r\n\r\n\t\t\tthis.element.appendChild(headerEl);\r\n\t\t}\r\n\r\n\t\tthis.element.appendChild(tableEl);\r\n\r\n\t\tif(this.table.options.printFooter){\r\n\t\t\tfooterEl.classList.add(\"tabulator-print-footer\");\r\n\r\n\t\t\tfooterContent = typeof this.table.options.printFooter == \"function\" ? this.table.options.printFooter.call(this.table) : this.table.options.printFooter;\r\n\r\n\r\n\t\t\tif(typeof footerContent == \"string\"){\r\n\t\t\t\tfooterEl.innerHTML = footerContent;\r\n\t\t\t}else{\r\n\t\t\t\tfooterEl.appendChild(footerContent);\r\n\t\t\t}\r\n\r\n\t\t\tthis.element.appendChild(footerEl);\r\n\t\t}\r\n\r\n\t\tdocument.body.classList.add(\"tabulator-print-fullscreen-hide\");\r\n\t\tdocument.body.appendChild(this.element);\r\n\r\n\t\tif(this.table.options.printFormatter){\r\n\t\t\tthis.table.options.printFormatter(this.element, tableEl);\r\n\t\t}\r\n\r\n\t\twindow.print();\r\n\r\n\t\tthis.cleanup();\r\n\r\n\t\twindow.scrollTo(scrollX, scrollY);\r\n\r\n\t\tthis.manualBlock = false;\r\n\t}\r\n}\r\n\r\nPrint.moduleName = \"print\";\r\n\r\nexport default Print;","import Module from '../../core/Module.js';\r\n\r\nclass ReactiveData extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.data = false;\r\n\t\tthis.blocked = false; //block reactivity while performing update\r\n\t\tthis.origFuncs = {}; // hold original data array functions to allow replacement after data is done with\r\n\t\tthis.currentVersion = 0;\r\n\t}\r\n\r\n\twatchData(data){\r\n\t\tvar self = this,\r\n\t\tpushFunc, version;\r\n\r\n\t\tthis.currentVersion ++;\r\n\r\n\t\tversion = this.currentVersion;\r\n\r\n\t\tself.unwatchData();\r\n\r\n\t\tself.data = data;\r\n\r\n\t\t//override array push function\r\n\t\tself.origFuncs.push = data.push;\r\n\r\n\t\tObject.defineProperty(self.data, \"push\", {\r\n\t\t\tenumerable: false,\r\n\t\t\tconfigurable: true,\r\n\t\t\tvalue: function () {\r\n\t\t\t\tvar args = Array.from(arguments);\r\n\r\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\r\n\t\t\t\t\targs.forEach(function (arg){\r\n\t\t\t\t\t\tself.table.rowManager.addRowActual(arg, false);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn self.origFuncs.push.apply(data, arguments);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t//override array unshift function\r\n\t\tself.origFuncs.unshift = data.unshift;\r\n\r\n\t\tObject.defineProperty(self.data, \"unshift\", {\r\n\t\t\tenumerable: false,\r\n\t\t\tconfigurable: true,\r\n\t\t\tvalue: function () {\r\n\t\t\t\tvar args = Array.from(arguments);\r\n\r\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\r\n\t\t\t\t\targs.forEach(function (arg){\r\n\t\t\t\t\t\tself.table.rowManager.addRowActual(arg, true);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn self.origFuncs.unshift.apply(data, arguments);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\t\t//override array shift function\r\n\t\tself.origFuncs.shift = data.shift;\r\n\r\n\t\tObject.defineProperty(self.data, \"shift\", {\r\n\t\t\tenumerable: false,\r\n\t\t\tconfigurable: true,\r\n\t\t\tvalue: function () {\r\n\t\t\t\tvar row;\r\n\r\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\r\n\t\t\t\t\tif(self.data.length){\r\n\t\t\t\t\t\trow = self.table.rowManager.getRowFromDataObject(self.data[0]);\r\n\r\n\t\t\t\t\t\tif(row){\r\n\t\t\t\t\t\t\trow.deleteActual();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn self.origFuncs.shift.call(data);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t//override array pop function\r\n\t\tself.origFuncs.pop = data.pop;\r\n\r\n\t\tObject.defineProperty(self.data, \"pop\", {\r\n\t\t\tenumerable: false,\r\n\t\t\tconfigurable: true,\r\n\t\t\tvalue: function () {\r\n\t\t\t\tvar row;\r\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\r\n\t\t\t\t\tif(self.data.length){\r\n\t\t\t\t\t\trow = self.table.rowManager.getRowFromDataObject(self.data[self.data.length - 1]);\r\n\r\n\t\t\t\t\t\tif(row){\r\n\t\t\t\t\t\t\trow.deleteActual();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn self.origFuncs.pop.call(data);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\t\t//override array splice function\r\n\t\tself.origFuncs.splice = data.splice;\r\n\r\n\t\tObject.defineProperty(self.data, \"splice\", {\r\n\t\t\tenumerable: false,\r\n\t\t\tconfigurable: true,\r\n\t\t\tvalue: function () {\r\n\t\t\t\tvar args = Array.from(arguments),\r\n\t\t\t\tstart = args[0] < 0 ? data.length + args[0] : args[0],\r\n\t\t\t\tend = args[1],\r\n\t\t\t\tnewRows = args[2] ? args.slice(2) : false,\r\n\t\t\t\tstartRow;\r\n\r\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\r\n\r\n\t\t\t\t\t//add new rows\r\n\t\t\t\t\tif(newRows){\r\n\t\t\t\t\t\tstartRow = data[start] ? self.table.rowManager.getRowFromDataObject(data[start]) : false;\r\n\r\n\t\t\t\t\t\tif(startRow){\r\n\t\t\t\t\t\t\tnewRows.forEach(function(rowData){\r\n\t\t\t\t\t\t\t\tself.table.rowManager.addRowActual(rowData, true, startRow, true);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tnewRows = newRows.slice().reverse();\r\n\r\n\t\t\t\t\t\t\tnewRows.forEach(function(rowData){\r\n\t\t\t\t\t\t\t\tself.table.rowManager.addRowActual(rowData, true, false, true);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//delete removed rows\r\n\t\t\t\t\tif(end !== 0){\r\n\t\t\t\t\t\tvar oldRows = data.slice(start, typeof args[1] === \"undefined\" ? args[1] : start + end);\r\n\r\n\t\t\t\t\t\toldRows.forEach(function(rowData, i){\r\n\t\t\t\t\t\t\tvar row = self.table.rowManager.getRowFromDataObject(rowData);\r\n\r\n\t\t\t\t\t\t\tif(row){\r\n\t\t\t\t\t\t\t\trow.deleteActual(i !== oldRows.length - 1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(newRows || end !== 0){\r\n\t\t\t\t\t\tself.table.rowManager.reRenderInPosition();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn self.origFuncs.splice.apply(data, arguments);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tunwatchData(){\r\n\t\tif(this.data !== false){\r\n\t\t\tfor(var key in this.origFuncs){\r\n\t\t\t\tObject.defineProperty(this.data, key, {\r\n\t\t\t\t\tenumerable: true,\r\n\t\t\t\t\tconfigurable:true,\r\n\t\t\t\t\twritable:true,\r\n\t\t\t\t\tvalue: this.origFuncs.key,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\twatchRow(row){\r\n\t\tvar data = row.getData();\r\n\r\n\t\tthis.blocked = true;\r\n\r\n\t\tfor(var key in data){\r\n\t\t\tthis.watchKey(row, data, key);\r\n\t\t}\r\n\r\n\t\tif(this.table.options.dataTree){\r\n\t\t\tthis.watchTreeChildren(row);\r\n\t\t}\r\n\r\n\t\tthis.blocked = false;\r\n\t}\r\n\r\n\twatchTreeChildren (row){\r\n\t\tvar self = this,\r\n\t\tchildField = row.getData()[this.table.options.dataTreeChildField],\r\n\t\torigFuncs = {};\r\n\r\n\t\tfunction rebuildTree(){\r\n\t\t\tself.table.modules.dataTree.initializeRow(row);\r\n\t\t\tself.table.modules.dataTree.layoutRow(row);\r\n\t\t\tself.table.rowManager.refreshActiveData(\"tree\", false, true);\r\n\t\t}\r\n\r\n\t\tif(childField){\r\n\r\n\t\t\torigFuncs.push = childField.push;\r\n\r\n\t\t\tObject.defineProperty(childField, \"push\", {\r\n\t\t\t\tenumerable: false,\r\n\t\t\t\tconfigurable: true,\r\n\t\t\t\tvalue: function value() {\r\n\t\t\t\t\tvar result = origFuncs.push.apply(childField, arguments);\r\n\r\n\t\t\t\t\trebuildTree();\r\n\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\torigFuncs.unshift = childField.unshift;\r\n\r\n\t\t\tObject.defineProperty(childField, \"unshift\", {\r\n\t\t\t\tenumerable: false,\r\n\t\t\t\tconfigurable: true,\r\n\t\t\t\tvalue: function value() {\r\n\t\t\t\t\tvar result =  origFuncs.unshift.apply(childField, arguments);\r\n\r\n\t\t\t\t\trebuildTree();\r\n\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\torigFuncs.shift = childField.shift;\r\n\r\n\t\t\tObject.defineProperty(childField, \"shift\", {\r\n\t\t\t\tenumerable: false,\r\n\t\t\t\tconfigurable: true,\r\n\t\t\t\tvalue: function value() {\r\n\t\t\t\t\tvar result =  origFuncs.shift.call(childField);\r\n\r\n\t\t\t\t\trebuildTree();\r\n\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\torigFuncs.pop = childField.pop;\r\n\r\n\t\t\tObject.defineProperty(childField, \"pop\", {\r\n\t\t\t\tenumerable: false,\r\n\t\t\t\tconfigurable: true,\r\n\t\t\t\tvalue: function value() {\r\n\t\t\t\t\tvar result =  origFuncs.pop.call(childField);\r\n\r\n\t\t\t\t\trebuildTree();\r\n\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\torigFuncs.splice = childField.splice;\r\n\r\n\t\t\tObject.defineProperty(childField, \"splice\", {\r\n\t\t\t\tenumerable: false,\r\n\t\t\t\tconfigurable: true,\r\n\t\t\t\tvalue: function value() {\r\n\t\t\t\t\tvar result =  origFuncs.splice.apply(childField, arguments);\r\n\r\n\t\t\t\t\trebuildTree();\r\n\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\twatchKey(row, data, key){\r\n\t\tvar self = this,\r\n\t\tprops = Object.getOwnPropertyDescriptor(data, key),\r\n\t\tvalue = data[key],\r\n\t\tversion = this.currentVersion;\r\n\r\n\t\tObject.defineProperty(data, key, {\r\n\t\t\tset: function(newValue){\r\n\t\t\t\tvalue = newValue;\r\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\r\n\t\t\t\t\tvar update = {};\r\n\t\t\t\t\tupdate[key] = newValue;\r\n\t\t\t\t\trow.updateData(update);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(props.set){\r\n\t\t\t\t\tprops.set(newValue);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tget:function(){\r\n\r\n\t\t\t\tif(props.get){\r\n\t\t\t\t\tprops.get();\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn value;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tunwatchRow(row){\r\n\t\tvar data = row.getData();\r\n\r\n\t\tfor(var key in data){\r\n\t\t\tObject.defineProperty(data, key, {\r\n\t\t\t\tvalue:data[key],\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tblock(){\r\n\t\tthis.blocked = true;\r\n\t}\r\n\r\n\tunblock(){\r\n\t\tthis.blocked = false;\r\n\t}\r\n}\r\n\r\nReactiveData.moduleName = \"reactiveData\";\r\n\r\nexport default ReactiveData;\r\n\r\n\r\n\r\n","import Module from '../../core/Module.js';\r\n\r\nclass ResizeColumns extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.startColumn = false;\r\n\t\tthis.startX = false;\r\n\t\tthis.startWidth = false;\r\n\t\tthis.handle = null;\r\n\t\tthis.prevHandle = null;\r\n\t}\r\n\r\n\tinitializeColumn(type, column, element){\r\n\t\tvar self = this,\r\n\t\tvariableHeight = false,\r\n\t\tmode = this.table.options.resizableColumns;\r\n\r\n\t\t//set column resize mode\r\n\t\tif(type === \"header\"){\r\n\t\t\tvariableHeight = column.definition.formatter == \"textarea\" || column.definition.variableHeight;\r\n\t\t\tcolumn.modules.resize = {variableHeight:variableHeight};\r\n\t\t}\r\n\r\n\t\tif(mode === true || mode == type){\r\n\r\n\t\t\tvar handle = document.createElement('div');\r\n\t\t\thandle.className = \"tabulator-col-resize-handle\";\r\n\r\n\r\n\t\t\tvar prevHandle = document.createElement('div');\r\n\t\t\tprevHandle.className = \"tabulator-col-resize-handle prev\";\r\n\r\n\t\t\thandle.addEventListener(\"click\", function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t});\r\n\r\n\t\t\tvar handleDown = function(e){\r\n\t\t\t\tvar nearestColumn = column.getLastColumn();\r\n\r\n\t\t\t\tif(nearestColumn && self._checkResizability(nearestColumn)){\r\n\t\t\t\t\tself.startColumn = column;\r\n\t\t\t\t\tself._mouseDown(e, nearestColumn, handle);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\thandle.addEventListener(\"mousedown\", handleDown);\r\n\t\t\thandle.addEventListener(\"touchstart\", handleDown, {passive: true});\r\n\r\n\t\t\t//reszie column on  double click\r\n\t\t\thandle.addEventListener(\"dblclick\", function(e){\r\n\t\t\t\tvar col = column.getLastColumn();\r\n\r\n\t\t\t\tif(col && self._checkResizability(col)){\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\tcol.reinitializeWidth(true);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\r\n\t\t\tprevHandle.addEventListener(\"click\", function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t});\r\n\r\n\t\t\tvar prevHandleDown = function(e){\r\n\t\t\t\tvar nearestColumn, colIndex, prevColumn;\r\n\r\n\t\t\t\tnearestColumn = column.getFirstColumn();\r\n\r\n\t\t\t\tif(nearestColumn){\r\n\t\t\t\t\tcolIndex = self.table.columnManager.findColumnIndex(nearestColumn);\r\n\t\t\t\t\tprevColumn = colIndex > 0 ? self.table.columnManager.getColumnByIndex(colIndex - 1) : false;\r\n\r\n\t\t\t\t\tif(prevColumn && self._checkResizability(prevColumn)){\r\n\t\t\t\t\t\tself.startColumn = column;\r\n\t\t\t\t\t\tself._mouseDown(e, prevColumn, prevHandle);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tprevHandle.addEventListener(\"mousedown\", prevHandleDown);\r\n\t\t\tprevHandle.addEventListener(\"touchstart\", prevHandleDown, {passive: true});\r\n\r\n\t\t\t//resize column on double click\r\n\t\t\tprevHandle.addEventListener(\"dblclick\", function(e){\r\n\t\t\t\tvar nearestColumn, colIndex, prevColumn;\r\n\r\n\t\t\t\tnearestColumn = column.getFirstColumn();\r\n\r\n\t\t\t\tif(nearestColumn){\r\n\t\t\t\t\tcolIndex = self.table.columnManager.findColumnIndex(nearestColumn);\r\n\t\t\t\t\tprevColumn = colIndex > 0 ? self.table.columnManager.getColumnByIndex(colIndex - 1) : false;\r\n\r\n\t\t\t\t\tif(prevColumn && self._checkResizability(prevColumn)){\r\n\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\tprevColumn.reinitializeWidth(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\telement.appendChild(handle);\r\n\t\t\telement.appendChild(prevHandle);\r\n\t\t}\r\n\t}\r\n\r\n\t_checkResizability(column){\r\n\t\treturn typeof column.definition.resizable != \"undefined\" ? column.definition.resizable : this.table.options.resizableColumns;\r\n\t}\r\n\r\n\t_mouseDown(e, column, handle){\r\n\t\tvar self = this;\r\n\r\n\t\tself.table.element.classList.add(\"tabulator-block-select\");\r\n\r\n\t\tfunction mouseMove(e){\r\n\t\t\t// self.table.columnManager.tempScrollBlock();\r\n\r\n\t\t\tif(self.table.rtl){\r\n\t\t\t\tcolumn.setWidth(self.startWidth - ((typeof e.screenX === \"undefined\" ? e.touches[0].screenX : e.screenX) - self.startX));\r\n\t\t\t}else{\r\n\t\t\t\tcolumn.setWidth(self.startWidth + ((typeof e.screenX === \"undefined\" ? e.touches[0].screenX : e.screenX) - self.startX));\r\n\t\t\t}\r\n\r\n\t\t\tif(self.table.options.virtualDomHoz){\r\n\t\t\t\tself.table.vdomHoz.reinitialize(true);\r\n\t\t\t}\r\n\r\n\t\t\tif(!self.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight){\r\n\t\t\t\tcolumn.checkCellHeights();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction mouseUp(e){\r\n\r\n\t\t\t//block editor from taking action while resizing is taking place\r\n\t\t\tif(self.startColumn.modules.edit){\r\n\t\t\t\tself.startColumn.modules.edit.blocked = false;\r\n\t\t\t}\r\n\r\n\t\t\tif(self.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight){\r\n\t\t\t\tcolumn.checkCellHeights();\r\n\t\t\t}\r\n\r\n\t\t\tdocument.body.removeEventListener(\"mouseup\", mouseUp);\r\n\t\t\tdocument.body.removeEventListener(\"mousemove\", mouseMove);\r\n\r\n\t\t\thandle.removeEventListener(\"touchmove\", mouseMove);\r\n\t\t\thandle.removeEventListener(\"touchend\", mouseUp);\r\n\r\n\t\t\tself.table.element.classList.remove(\"tabulator-block-select\");\r\n\r\n\t\t\tif(self.table.options.persistence && self.table.modExists(\"persistence\", true) && self.table.modules.persistence.config.columns){\r\n\t\t\t\tself.table.modules.persistence.save(\"columns\");\r\n\t\t\t}\r\n\r\n\t\t\tself.table.options.columnResized.call(self.table, column.getComponent());\r\n\t\t}\r\n\r\n\t\te.stopPropagation(); //prevent resize from interfereing with movable columns\r\n\r\n\t\t//block editor from taking action while resizing is taking place\r\n\t\tif(self.startColumn.modules.edit){\r\n\t\t\tself.startColumn.modules.edit.blocked = true;\r\n\t\t}\r\n\r\n\t\tself.startX = typeof e.screenX === \"undefined\" ? e.touches[0].screenX : e.screenX;\r\n\t\tself.startWidth = column.getWidth();\r\n\r\n\t\tdocument.body.addEventListener(\"mousemove\", mouseMove);\r\n\t\tdocument.body.addEventListener(\"mouseup\", mouseUp);\r\n\t\thandle.addEventListener(\"touchmove\", mouseMove, {passive: true});\r\n\t\thandle.addEventListener(\"touchend\", mouseUp);\r\n\t}\r\n}\r\n\r\nResizeColumns.moduleName = \"resizeColumns\";\r\n\r\nexport default ResizeColumns;","import Module from '../../core/Module.js';\r\n\r\nclass ResizeRows extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.startColumn = false;\r\n\t\tthis.startY = false;\r\n\t\tthis.startHeight = false;\r\n\t\tthis.handle = null;\r\n\t\tthis.prevHandle = null;\r\n\t}\r\n\r\n\tinitializeRow(row){\r\n\t\tvar self = this,\r\n\t\trowEl = row.getElement();\r\n\r\n\t\tvar handle = document.createElement('div');\r\n\t\thandle.className = \"tabulator-row-resize-handle\";\r\n\r\n\t\tvar prevHandle = document.createElement('div');\r\n\t\tprevHandle.className = \"tabulator-row-resize-handle prev\";\r\n\r\n\t\thandle.addEventListener(\"click\", function(e){\r\n\t\t\te.stopPropagation();\r\n\t\t});\r\n\r\n\t\tvar handleDown = function(e){\r\n\t\t\tself.startRow = row;\r\n\t\t\tself._mouseDown(e, row, handle);\r\n\t\t};\r\n\r\n\t\thandle.addEventListener(\"mousedown\", handleDown);\r\n\t\thandle.addEventListener(\"touchstart\", handleDown, {passive: true});\r\n\r\n\t\tprevHandle.addEventListener(\"click\", function(e){\r\n\t\t\te.stopPropagation();\r\n\t\t});\r\n\r\n\t\tvar prevHandleDown =  function(e){\r\n\t\t\tvar prevRow = self.table.rowManager.prevDisplayRow(row);\r\n\r\n\t\t\tif(prevRow){\r\n\t\t\t\tself.startRow = prevRow;\r\n\t\t\t\tself._mouseDown(e, prevRow, prevHandle);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tprevHandle.addEventListener(\"mousedown\",prevHandleDown);\r\n\t\tprevHandle.addEventListener(\"touchstart\",prevHandleDown, {passive: true});\r\n\r\n\t\trowEl.appendChild(handle);\r\n\t\trowEl.appendChild(prevHandle);\r\n\t}\r\n\r\n\t_mouseDown(e, row, handle){\r\n\t\tvar self = this;\r\n\r\n\t\tself.table.element.classList.add(\"tabulator-block-select\");\r\n\r\n\t\tfunction mouseMove(e){\r\n\t\t\trow.setHeight(self.startHeight + ((typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY) - self.startY));\r\n\t\t}\r\n\r\n\t\tfunction mouseUp(e){\r\n\r\n\t\t\t// //block editor from taking action while resizing is taking place\r\n\t\t\t// if(self.startColumn.modules.edit){\r\n\t\t\t// \tself.startColumn.modules.edit.blocked = false;\r\n\t\t\t// }\r\n\r\n\t\t\tdocument.body.removeEventListener(\"mouseup\", mouseMove);\r\n\t\t\tdocument.body.removeEventListener(\"mousemove\", mouseMove);\r\n\r\n\t\t\thandle.removeEventListener(\"touchmove\", mouseMove);\r\n\t\t\thandle.removeEventListener(\"touchend\", mouseUp);\r\n\r\n\t\t\tself.table.element.classList.remove(\"tabulator-block-select\");\r\n\r\n\t\t\tself.table.options.rowResized.call(this.table, row.getComponent());\r\n\t\t}\r\n\r\n\t\te.stopPropagation(); //prevent resize from interfereing with movable columns\r\n\r\n\t\t//block editor from taking action while resizing is taking place\r\n\t\t// if(self.startColumn.modules.edit){\r\n\t\t// \tself.startColumn.modules.edit.blocked = true;\r\n\t\t// }\r\n\r\n\t\tself.startY = typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY;\r\n\t\tself.startHeight = row.getHeight();\r\n\r\n\t\tdocument.body.addEventListener(\"mousemove\", mouseMove);\r\n\t\tdocument.body.addEventListener(\"mouseup\", mouseUp);\r\n\r\n\t\thandle.addEventListener(\"touchmove\", mouseMove, {passive: true});\r\n\t\thandle.addEventListener(\"touchend\", mouseUp);\r\n\t}\r\n}\r\n\r\nResizeRows.moduleName = \"resizeRows\";\r\n\r\nexport default ResizeRows;","import Module from '../../core/Module.js';\r\n\r\nclass ResizeTable extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.binding = false;\r\n\t\tthis.observer = false;\r\n\t\tthis.containerObserver = false;\r\n\r\n\t\tthis.tableHeight = 0;\r\n\t\tthis.tableWidth = 0;\r\n\t\tthis.containerHeight = 0;\r\n\t\tthis.containerWidth = 0;\r\n\r\n\t\tthis.autoResize = false;\r\n\t}\r\n\r\n\tinitialize(row){\r\n\t\tvar table = this.table,\r\n\t\ttableStyle;\r\n\r\n\t\tthis.tableHeight = table.element.clientHeight;\r\n\t\tthis.tableWidth = table.element.clientWidth;\r\n\r\n\t\tif(table.element.parentNode){\r\n\t\t\tthis.containerHeight = table.element.parentNode.clientHeight;\r\n\t\t\tthis.containerWidth = table.element.parentNode.clientWidth;\r\n\t\t}\r\n\r\n\t\tif(typeof ResizeObserver !== \"undefined\" && table.rowManager.getRenderMode() === \"virtual\"){\r\n\r\n\t\t\tthis.autoResize = true;\r\n\r\n\t\t\tthis.observer = new ResizeObserver((entry) => {\r\n\t\t\t\tif(!table.browserMobile || (table.browserMobile &&!table.modules.edit.currentCell)){\r\n\r\n\t\t\t\t\tvar nodeHeight = Math.floor(entry[0].contentRect.height);\r\n\t\t\t\t\tvar nodeWidth = Math.floor(entry[0].contentRect.width);\r\n\r\n\t\t\t\t\tif(this.tableHeight != nodeHeight || this.tableWidth != nodeWidth){\r\n\t\t\t\t\t\tthis.tableHeight = nodeHeight;\r\n\t\t\t\t\t\tthis.tableWidth = nodeWidth;\r\n\r\n\t\t\t\t\t\tif(table.element.parentNode){\r\n\t\t\t\t\t\t\tthis.containerHeight = table.element.parentNode.clientHeight;\r\n\t\t\t\t\t\t\tthis.containerWidth = table.element.parentNode.clientWidth;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(table.options.virtualDomHoz){\r\n\t\t\t\t\t\t\ttable.vdomHoz.reinitialize(true);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\ttable.redraw();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.observer.observe(table.element);\r\n\r\n\t\t\ttableStyle = window.getComputedStyle(table.element);\r\n\r\n\t\t\tif(this.table.element.parentNode && !this.table.rowManager.fixedHeight && (tableStyle.getPropertyValue(\"max-height\") || tableStyle.getPropertyValue(\"min-height\"))){\r\n\r\n\t\t\t\tthis.containerObserver = new ResizeObserver((entry) => {\r\n\t\t\t\t\tif(!table.browserMobile || (table.browserMobile &&!table.modules.edit.currentCell)){\r\n\r\n\t\t\t\t\t\tvar nodeHeight = Math.floor(entry[0].contentRect.height);\r\n\t\t\t\t\t\tvar nodeWidth = Math.floor(entry[0].contentRect.width);\r\n\r\n\t\t\t\t\t\tif(this.containerHeight != nodeHeight || this.containerWidth != nodeWidth){\r\n\t\t\t\t\t\t\tthis.containerHeight = nodeHeight;\r\n\t\t\t\t\t\t\tthis.containerWidth = nodeWidth;\r\n\t\t\t\t\t\t\tthis.tableHeight = table.element.clientHeight;\r\n\t\t\t\t\t\t\tthis.tableWidth = table.element.clientWidth;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(table.options.virtualDomHoz){\r\n\t\t\t\t\t\t\ttable.vdomHoz.reinitialize(true);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\ttable.redraw();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.containerObserver.observe(this.table.element.parentNode);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.binding = function(){\r\n\t\t\t\tif(!table.browserMobile || (table.browserMobile && !table.modules.edit.currentCell)){\r\n\t\t\t\t\tif(table.options.virtualDomHoz){\r\n\t\t\t\t\t\ttable.vdomHoz.reinitialize(true);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttable.redraw();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\twindow.addEventListener(\"resize\", this.binding);\r\n\t\t}\r\n\t}\r\n\r\n\tclearBindings(row){\r\n\t\tif(this.binding){\r\n\t\t\twindow.removeEventListener(\"resize\", this.binding);\r\n\t\t}\r\n\r\n\t\tif(this.observer){\r\n\t\t\tthis.observer.unobserve(this.table.element);\r\n\t\t}\r\n\r\n\t\tif(this.containerObserver){\r\n\t\t\tthis.containerObserver.unobserve(this.table.element.parentNode);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nResizeTable.moduleName = \"resizeTable\";\r\n\r\nexport default ResizeTable;","import Module from '../../core/Module.js';\r\n\r\nclass ResponsiveLayout extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.columns = [];\r\n\t\tthis.hiddenColumns = [];\r\n\t\tthis.mode = \"\";\r\n\t\tthis.index = 0;\r\n\t\tthis.collapseFormatter = [];\r\n\t\tthis.collapseStartOpen = true;\r\n\t\tthis.collapseHandleColumn = false;\r\n\t}\r\n\r\n\t//generate resposive columns list\r\n\tinitialize(){\r\n\t\tvar self = this,\r\n\t\tcolumns = [];\r\n\r\n\t\tthis.mode = this.table.options.responsiveLayout;\r\n\t\tthis.collapseFormatter = this.table.options.responsiveLayoutCollapseFormatter || this.formatCollapsedData;\r\n\t\tthis.collapseStartOpen = this.table.options.responsiveLayoutCollapseStartOpen;\r\n\t\tthis.hiddenColumns = [];\r\n\r\n\t\t//detemine level of responsivity for each column\r\n\t\tthis.table.columnManager.columnsByIndex.forEach(function(column, i){\r\n\t\t\tif(column.modules.responsive){\r\n\t\t\t\tif(column.modules.responsive.order && column.modules.responsive.visible){\r\n\t\t\t\t\tcolumn.modules.responsive.index = i;\r\n\t\t\t\t\tcolumns.push(column);\r\n\r\n\t\t\t\t\tif(!column.visible && self.mode === \"collapse\"){\r\n\t\t\t\t\t\tself.hiddenColumns.push(column);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t//sort list by responsivity\r\n\t\tcolumns = columns.reverse();\r\n\t\tcolumns = columns.sort(function(a, b){\r\n\t\t\tvar diff = b.modules.responsive.order - a.modules.responsive.order;\r\n\t\t\treturn diff || (b.modules.responsive.index - a.modules.responsive.index);\r\n\t\t});\r\n\r\n\t\tthis.columns = columns;\r\n\r\n\t\tif(this.mode === \"collapse\"){\r\n\t\t\tthis.generateCollapsedContent();\r\n\t\t}\r\n\r\n\t\t//assign collapse column\r\n\t\tfor (let col of this.table.columnManager.columnsByIndex){\r\n\t\t\tif(col.definition.formatter == \"responsiveCollapse\"){\r\n\t\t\t\tthis.collapseHandleColumn = col;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.collapseHandleColumn){\r\n\t\t\tif(this.hiddenColumns.length){\r\n\t\t\t\tthis.collapseHandleColumn.show();\r\n\t\t\t}else{\r\n\t\t\t\tthis.collapseHandleColumn.hide();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//define layout information\r\n\tinitializeColumn(column){\r\n\t\tvar def = column.getDefinition();\r\n\r\n\t\tcolumn.modules.responsive = {order: typeof def.responsive === \"undefined\" ? 1 : def.responsive, visible:def.visible === false ? false : true};\r\n\t}\r\n\r\n\tinitializeRow(row){\r\n\t\tvar el;\r\n\r\n\t\tif(row.type !== \"calc\"){\r\n\t\t\tel = document.createElement(\"div\");\r\n\t\t\tel.classList.add(\"tabulator-responsive-collapse\");\r\n\r\n\t\t\trow.modules.responsiveLayout = {\r\n\t\t\t\telement:el,\r\n\t\t\t\topen:this.collapseStartOpen,\r\n\t\t\t};\r\n\r\n\t\t\tif(!this.collapseStartOpen){\r\n\t\t\t\tel.style.display = 'none';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tlayoutRow(row){\r\n\t\tvar rowEl = row.getElement();\r\n\r\n\t\tif(row.modules.responsiveLayout){\r\n\t\t\trowEl.appendChild(row.modules.responsiveLayout.element);\r\n\t\t\tthis.generateCollapsedRowContent(row);\r\n\t\t}\r\n\t}\r\n\r\n\t//update column visibility\r\n\tupdateColumnVisibility(column, visible){\r\n\t\tvar index;\r\n\t\tif(column.modules.responsive){\r\n\t\t\tcolumn.modules.responsive.visible = visible;\r\n\t\t\tthis.initialize();\r\n\t\t}\r\n\t}\r\n\r\n\thideColumn(column){\r\n\t\tvar colCount = this.hiddenColumns.length;\r\n\r\n\t\tcolumn.hide(false, true);\r\n\r\n\t\tif(this.mode === \"collapse\"){\r\n\t\t\tthis.hiddenColumns.unshift(column);\r\n\t\t\tthis.generateCollapsedContent();\r\n\r\n\t\t\tif(this.collapseHandleColumn && !colCount){\r\n\t\t\t\tthis.collapseHandleColumn.show();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tshowColumn(column){\r\n\t\tvar index;\r\n\r\n\t\tcolumn.show(false, true);\r\n\t\t//set column width to prevent calculation loops on uninitialized columns\r\n\t\tcolumn.setWidth(column.getWidth());\r\n\r\n\t\tif(this.mode === \"collapse\"){\r\n\t\t\tindex = this.hiddenColumns.indexOf(column);\r\n\r\n\t\t\tif(index > -1){\r\n\t\t\t\tthis.hiddenColumns.splice(index, 1);\r\n\t\t\t}\r\n\r\n\t\t\tthis.generateCollapsedContent();\r\n\r\n\t\t\tif(this.collapseHandleColumn && !this.hiddenColumns.length){\r\n\t\t\t\tthis.collapseHandleColumn.hide();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//redraw columns to fit space\r\n\tupdate(){\r\n\t\tvar self = this,\r\n\t\tworking = true;\r\n\r\n\t\twhile(working){\r\n\r\n\t\t\tlet width = self.table.modules.layout.getMode() == \"fitColumns\" ? self.table.columnManager.getFlexBaseWidth() : self.table.columnManager.getWidth();\r\n\r\n\t\t\tlet diff = (self.table.options.headerVisible ? self.table.columnManager.element.clientWidth : self.table.element.clientWidth) - width;\r\n\r\n\t\t\tif(diff < 0){\r\n\t\t\t\t//table is too wide\r\n\t\t\t\tlet column = self.columns[self.index];\r\n\r\n\t\t\t\tif(column){\r\n\t\t\t\t\tself.hideColumn(column);\r\n\t\t\t\t\tself.index ++;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tworking = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\r\n\t\t\t\t//table has spare space\r\n\t\t\t\tlet column = self.columns[self.index -1];\r\n\r\n\t\t\t\tif(column){\r\n\t\t\t\t\tif(diff > 0){\r\n\t\t\t\t\t\tif(diff >= column.getWidth()){\r\n\t\t\t\t\t\t\tself.showColumn(column);\r\n\t\t\t\t\t\t\tself.index --;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tworking = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tworking = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tworking = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(!self.table.rowManager.activeRowsCount){\r\n\t\t\t\tself.table.rowManager.renderEmptyScroll();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgenerateCollapsedContent(){\r\n\t\tvar self = this,\r\n\t\trows = this.table.rowManager.getDisplayRows();\r\n\r\n\t\trows.forEach(function(row){\r\n\t\t\tself.generateCollapsedRowContent(row);\r\n\t\t});\r\n\t}\r\n\r\n\tgenerateCollapsedRowContent(row){\r\n\t\tvar el, contents;\r\n\r\n\t\tif(row.modules.responsiveLayout){\r\n\t\t\tel = row.modules.responsiveLayout.element;\r\n\r\n\t\t\twhile(el.firstChild) el.removeChild(el.firstChild);\r\n\r\n\t\t\tcontents = this.collapseFormatter(this.generateCollapsedRowData(row));\r\n\t\t\tif(contents){\r\n\t\t\t\tel.appendChild(contents);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgenerateCollapsedRowData(row){\r\n\t\tvar self = this,\r\n\t\tdata = row.getData(),\r\n\t\toutput = [],\r\n\t\tmockCellComponent;\r\n\r\n\t\tthis.hiddenColumns.forEach(function(column){\r\n\t\t\tvar value = column.getFieldValue(data);\r\n\r\n\t\t\tif(column.definition.title && column.field){\r\n\t\t\t\tif(column.modules.format && self.table.options.responsiveLayoutCollapseUseFormatters){\r\n\r\n\t\t\t\t\tmockCellComponent = {\r\n\t\t\t\t\t\tvalue:false,\r\n\t\t\t\t\t\tdata:{},\r\n\t\t\t\t\t\tgetValue:function(){\r\n\t\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetData:function(){\r\n\t\t\t\t\t\t\treturn data;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetElement:function(){\r\n\t\t\t\t\t\t\treturn document.createElement(\"div\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetRow:function(){\r\n\t\t\t\t\t\t\treturn row.getComponent();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetColumn:function(){\r\n\t\t\t\t\t\t\treturn column.getComponent();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\toutput.push({\r\n\t\t\t\t\t\tfield: column.field,\r\n\t\t\t\t\t\ttitle: column.definition.title,\r\n\t\t\t\t\t\tvalue: column.modules.format.formatter.call(self.table.modules.format, mockCellComponent, column.modules.format.params)\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\toutput.push({\r\n\t\t\t\t\t\tfield: column.field,\r\n\t\t\t\t\t\ttitle: column.definition.title,\r\n\t\t\t\t\t\tvalue: value\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tformatCollapsedData(data){\r\n\t\tvar list = document.createElement(\"table\");\r\n\r\n\t\tdata.forEach(function(item){\r\n\t\t\tvar row = document.createElement(\"tr\");\r\n\t\t\tvar titleData = document.createElement(\"td\");\r\n\t\t\tvar valueData = document.createElement(\"td\");\r\n\t\t\tvar node_content;\r\n\r\n\t\t\tvar titleHighlight = document.createElement(\"strong\");\r\n\t\t\ttitleData.appendChild(titleHighlight);\r\n\t\t\tthis.table.modules.localize.bind(\"columns|\" + item.field, function(text){\r\n\t\t\t\ttitleHighlight.innerText = text || item.title;\r\n\t\t\t});\r\n\r\n\t\t\tif(item.value instanceof Node){\r\n\t\t\t\tnode_content = document.createElement(\"div\");\r\n\t\t\t\tnode_content.appendChild(item.value);\r\n\t\t\t\tvalueData.appendChild(node_content);\r\n\t\t\t}else{\r\n\t\t\t\tvalueData.innerHTML = item.value;\r\n\t\t\t}\r\n\r\n\t\t\trow.appendChild(titleData);\r\n\t\t\trow.appendChild(valueData);\r\n\t\t\tlist.appendChild(row);\r\n\t\t}, this);\r\n\r\n\t\treturn Object.keys(data).length ? list : \"\";\r\n\t}\r\n}\r\n\r\nResponsiveLayout.moduleName = \"responsiveLayout\";\r\n\r\nexport default ResponsiveLayout;","import Module from '../../core/Module.js';\r\n\r\nclass SelectRow extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.selecting = false; //flag selecting in progress\r\n\t\tthis.lastClickedRow = false; //last clicked row\r\n\t\tthis.selectPrev = []; //hold previously selected element for drag drop selection\r\n\t\tthis.selectedRows = []; //hold selected rows\r\n\t\tthis.headerCheckboxElement = null; // hold header select element\r\n\t}\r\n\r\n\tclearSelectionData(silent){\r\n\t\tthis.selecting = false;\r\n\t\tthis.lastClickedRow = false;\r\n\t\tthis.selectPrev = [];\r\n\t\tthis.selectedRows = [];\r\n\r\n\t\tif(!silent){\r\n\t\t\tthis._rowSelectionChanged();\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeRow(row){\r\n\t\tvar self = this,\r\n\t\telement = row.getElement();\r\n\r\n\t\t// trigger end of row selection\r\n\t\tvar endSelect = function(){\r\n\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\tself.selecting = false;\r\n\t\t\t}, 50);\r\n\r\n\t\t\tdocument.body.removeEventListener(\"mouseup\", endSelect);\r\n\t\t};\r\n\r\n\t\trow.modules.select = {selected:false};\r\n\r\n\t\t//set row selection class\r\n\t\tif(self.table.options.selectableCheck.call(this.table, row.getComponent())){\r\n\t\t\telement.classList.add(\"tabulator-selectable\");\r\n\t\t\telement.classList.remove(\"tabulator-unselectable\");\r\n\r\n\t\t\tif(self.table.options.selectable && self.table.options.selectable != \"highlight\"){\r\n\t\t\t\tif(self.table.options.selectableRangeMode === \"click\"){\r\n\t\t\t\t\telement.addEventListener(\"click\", function(e){\r\n\t\t\t\t\t\tif(e.shiftKey){\r\n\t\t\t\t\t\t\tself.table._clearSelection();\r\n\t\t\t\t\t\t\tself.lastClickedRow = self.lastClickedRow || row;\r\n\r\n\t\t\t\t\t\t\tvar lastClickedRowIdx = self.table.rowManager.getDisplayRowIndex(self.lastClickedRow);\r\n\t\t\t\t\t\t\tvar rowIdx = self.table.rowManager.getDisplayRowIndex(row);\r\n\r\n\t\t\t\t\t\t\tvar fromRowIdx = lastClickedRowIdx <= rowIdx ? lastClickedRowIdx : rowIdx;\r\n\t\t\t\t\t\t\tvar toRowIdx = lastClickedRowIdx >= rowIdx ? lastClickedRowIdx : rowIdx;\r\n\r\n\t\t\t\t\t\t\tvar rows = self.table.rowManager.getDisplayRows().slice(0);\r\n\t\t\t\t\t\t\tvar toggledRows = rows.splice(fromRowIdx, toRowIdx - fromRowIdx + 1);\r\n\r\n\t\t\t\t\t\t\tif(e.ctrlKey || e.metaKey){\r\n\t\t\t\t\t\t\t\ttoggledRows.forEach(function(toggledRow){\r\n\t\t\t\t\t\t\t\t\tif(toggledRow !== self.lastClickedRow){\r\n\r\n\t\t\t\t\t\t\t\t\t\tif(self.table.options.selectable !== true && !self.isRowSelected(row)){\r\n\t\t\t\t\t\t\t\t\t\t\tif(self.selectedRows.length < self.table.options.selectable){\r\n\t\t\t\t\t\t\t\t\t\t\t\tself.toggleRow(toggledRow);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\tself.toggleRow(toggledRow);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tself.lastClickedRow = row;\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tself.deselectRows(undefined, true);\r\n\r\n\t\t\t\t\t\t\t\tif(self.table.options.selectable !== true){\r\n\t\t\t\t\t\t\t\t\tif(toggledRows.length > self.table.options.selectable){\r\n\t\t\t\t\t\t\t\t\t\ttoggledRows = toggledRows.slice(0, self.table.options.selectable)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tself.selectRows(toggledRows);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tself.table._clearSelection();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if(e.ctrlKey || e.metaKey){\r\n\t\t\t\t\t\t\tself.toggleRow(row);\r\n\t\t\t\t\t\t\tself.lastClickedRow = row;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tself.deselectRows(undefined, true);\r\n\t\t\t\t\t\t\tself.selectRows(row);\r\n\t\t\t\t\t\t\tself.lastClickedRow = row;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\telement.addEventListener(\"click\", function(e){\r\n\t\t\t\t\t\tif(!self.table.modExists(\"edit\") || !self.table.modules.edit.getCurrentCell()){\r\n\t\t\t\t\t\t\tself.table._clearSelection();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(!self.selecting){\r\n\t\t\t\t\t\t\tself.toggleRow(row);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\telement.addEventListener(\"mousedown\", function(e){\r\n\t\t\t\t\t\tif(e.shiftKey){\r\n\t\t\t\t\t\t\tself.table._clearSelection();\r\n\r\n\t\t\t\t\t\t\tself.selecting = true;\r\n\r\n\t\t\t\t\t\t\tself.selectPrev = [];\r\n\r\n\t\t\t\t\t\t\tdocument.body.addEventListener(\"mouseup\", endSelect);\r\n\t\t\t\t\t\t\tdocument.body.addEventListener(\"keyup\", endSelect);\r\n\r\n\t\t\t\t\t\t\tself.toggleRow(row);\r\n\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\telement.addEventListener(\"mouseenter\", function(e){\r\n\t\t\t\t\t\tif(self.selecting){\r\n\t\t\t\t\t\t\tself.table._clearSelection();\r\n\t\t\t\t\t\t\tself.toggleRow(row);\r\n\r\n\t\t\t\t\t\t\tif(self.selectPrev[1] == row){\r\n\t\t\t\t\t\t\t\tself.toggleRow(self.selectPrev[0]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\telement.addEventListener(\"mouseout\", function(e){\r\n\t\t\t\t\t\tif(self.selecting){\r\n\t\t\t\t\t\t\tself.table._clearSelection();\r\n\t\t\t\t\t\t\tself.selectPrev.unshift(row);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\telement.classList.add(\"tabulator-unselectable\");\r\n\t\t\telement.classList.remove(\"tabulator-selectable\");\r\n\t\t}\r\n\t}\r\n\r\n\t//toggle row selection\r\n\ttoggleRow(row){\r\n\t\tif(this.table.options.selectableCheck.call(this.table, row.getComponent())){\r\n\t\t\tif(row.modules.select && row.modules.select.selected){\r\n\t\t\t\tthis._deselectRow(row);\r\n\t\t\t}else{\r\n\t\t\t\tthis._selectRow(row);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//select a number of rows\r\n\tselectRows(rows){\r\n\t\tvar rowMatch;\r\n\r\n\t\tswitch(typeof rows){\r\n\t\t\tcase \"undefined\":\r\n\t\t\tthis.table.rowManager.rows.forEach((row) => {\r\n\t\t\t\tthis._selectRow(row, true, true);\r\n\t\t\t});\r\n\r\n\t\t\tthis._rowSelectionChanged();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"string\":\r\n\r\n\t\t\trowMatch = this.table.rowManager.findRow(rows);\r\n\r\n\t\t\tif(rowMatch){\r\n\t\t\t\tthis._selectRow(rowMatch, true, true);\r\n\t\t\t}else{\r\n\t\t\t\tthis.table.rowManager.getRows(rows).forEach((row) => {\r\n\t\t\t\t\tthis._selectRow(row, true, true);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tthis._rowSelectionChanged();\r\n\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\tif(Array.isArray(rows)){\r\n\t\t\t\trows.forEach((row) => {\r\n\t\t\t\t\tthis._selectRow(row, true, true);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis._rowSelectionChanged();\r\n\t\t\t}else{\r\n\t\t\t\tthis._selectRow(rows, false, true);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\t//select an individual row\r\n\t_selectRow(rowInfo, silent, force){\r\n\t\tvar index;\r\n\r\n\t\t//handle max row count\r\n\t\tif(!isNaN(this.table.options.selectable) && this.table.options.selectable !== true && !force){\r\n\t\t\tif(this.selectedRows.length >= this.table.options.selectable){\r\n\t\t\t\tif(this.table.options.selectableRollingSelection){\r\n\t\t\t\t\tthis._deselectRow(this.selectedRows[0]);\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar row = this.table.rowManager.findRow(rowInfo);\r\n\r\n\t\tif(row){\r\n\t\t\tif(this.selectedRows.indexOf(row) == -1){\r\n\t\t\t\trow.getElement().classList.add(\"tabulator-selected\");\r\n\t\t\t\tif(!row.modules.select){\r\n\t\t\t\t\trow.modules.select = {};\r\n\t\t\t\t}\r\n\r\n\t\t\t\trow.modules.select.selected = true;\r\n\t\t\t\tif(row.modules.select.checkboxEl){\r\n\t\t\t\t\trow.modules.select.checkboxEl.checked = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.selectedRows.push(row);\r\n\r\n\t\t\t\tif(this.table.options.dataTreeSelectPropagate){\r\n\t\t\t\t\tthis.childRowSelection(row, true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!silent){\r\n\t\t\t\t\tthis.table.options.rowSelected.call(this.table, row.getComponent());\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._rowSelectionChanged(silent);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(!silent){\r\n\t\t\t\tconsole.warn(\"Selection Error - No such row found, ignoring selection:\" + rowInfo);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tisRowSelected(row){\r\n\t\treturn this.selectedRows.indexOf(row) !== -1;\r\n\t}\r\n\r\n\t//deselect a number of rows\r\n\tdeselectRows(rows, silent){\r\n\t\tvar self = this,\r\n\t\trowCount;\r\n\r\n\t\tif(typeof rows == \"undefined\"){\r\n\r\n\t\t\trowCount = self.selectedRows.length;\r\n\r\n\t\t\tfor(let i = 0; i < rowCount; i++){\r\n\t\t\t\tself._deselectRow(self.selectedRows[0], true);\r\n\t\t\t}\r\n\r\n\t\t\tself._rowSelectionChanged(silent);\r\n\r\n\t\t}else{\r\n\t\t\tif(Array.isArray(rows)){\r\n\t\t\t\trows.forEach(function(row){\r\n\t\t\t\t\tself._deselectRow(row, true);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tself._rowSelectionChanged(silent);\r\n\t\t\t}else{\r\n\t\t\t\tself._deselectRow(rows, silent);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//deselect an individual row\r\n\t_deselectRow(rowInfo, silent){\r\n\t\tvar self = this,\r\n\t\trow = self.table.rowManager.findRow(rowInfo),\r\n\t\tindex;\r\n\r\n\t\tif(row){\r\n\t\t\tindex = self.selectedRows.findIndex(function(selectedRow){\r\n\t\t\t\treturn selectedRow == row;\r\n\t\t\t});\r\n\r\n\t\t\tif(index > -1){\r\n\r\n\t\t\t\trow.getElement().classList.remove(\"tabulator-selected\");\r\n\t\t\t\tif(!row.modules.select){\r\n\t\t\t\t\trow.modules.select = {};\r\n\t\t\t\t}\r\n\r\n\t\t\t\trow.modules.select.selected = false;\r\n\t\t\t\tif(row.modules.select.checkboxEl){\r\n\t\t\t\t\trow.modules.select.checkboxEl.checked = false;\r\n\t\t\t\t}\r\n\t\t\t\tself.selectedRows.splice(index, 1);\r\n\r\n\t\t\t\tif(this.table.options.dataTreeSelectPropagate){\r\n\t\t\t\t\tthis.childRowSelection(row, false);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!silent){\r\n\t\t\t\t\tself.table.options.rowDeselected.call(this.table, row.getComponent());\r\n\t\t\t\t}\r\n\r\n\t\t\t\tself._rowSelectionChanged(silent);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(!silent){\r\n\t\t\t\tconsole.warn(\"Deselection Error - No such row found, ignoring selection:\" + rowInfo);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetSelectedData(){\r\n\t\tvar data = [];\r\n\r\n\t\tthis.selectedRows.forEach(function(row){\r\n\t\t\tdata.push(row.getData());\r\n\t\t});\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\tgetSelectedRows(){\r\n\r\n\t\tvar rows = [];\r\n\r\n\t\tthis.selectedRows.forEach(function(row){\r\n\t\t\trows.push(row.getComponent());\r\n\t\t});\r\n\r\n\t\treturn rows;\r\n\t}\r\n\r\n\t_rowSelectionChanged(silent){\r\n\t\tif(this.headerCheckboxElement){\r\n\t\t\tif(this.selectedRows.length === 0){\r\n\t\t\t\tthis.headerCheckboxElement.checked = false;\r\n\t\t\t\tthis.headerCheckboxElement.indeterminate = false;\r\n\t\t\t} else if(this.table.rowManager.rows.length === this.selectedRows.length){\r\n\t\t\t\tthis.headerCheckboxElement.checked = true;\r\n\t\t\t\tthis.headerCheckboxElement.indeterminate = false;\r\n\t\t\t} else {\r\n\t\t\t\tthis.headerCheckboxElement.indeterminate = true;\r\n\t\t\t\tthis.headerCheckboxElement.checked = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(!silent){\r\n\t\t\tthis.table.options.rowSelectionChanged.call(this.table, this.getSelectedData(), this.getSelectedRows());\r\n\t\t}\r\n\t}\r\n\r\n\tregisterRowSelectCheckbox (row, element) {\r\n\t\tif(!row._row.modules.select){\r\n\t\t\trow._row.modules.select = {};\r\n\t\t}\r\n\r\n\t\trow._row.modules.select.checkboxEl = element;\r\n\t}\r\n\r\n\tregisterHeaderSelectCheckbox (element) {\r\n\t\tthis.headerCheckboxElement = element;\r\n\t}\r\n\r\n\tchildRowSelection(row, select){\r\n\t\tvar children = this.table.modules.dataTree.getChildren(row, true);\r\n\r\n\t\tif(select){\r\n\t\t\tfor(let child of children){\r\n\t\t\t\tthis._selectRow(child, true);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tfor(let child of children){\r\n\t\t\t\tthis._deselectRow(child, true);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nSelectRow.moduleName = \"selectRow\";\r\n\r\nexport default SelectRow;","//sort numbers\r\nexport default function(a, b, aRow, bRow, column, dir, params){\r\n\tvar alignEmptyValues = params.alignEmptyValues;\r\n\tvar decimal = params.decimalSeparator;\r\n\tvar thousand = params.thousandSeparator;\r\n\tvar emptyAlign = 0;\r\n\r\n\ta = String(a);\r\n\tb = String(b);\r\n\r\n\tif(thousand){\r\n\t\ta = a.split(thousand).join(\"\");\r\n\t\tb = b.split(thousand).join(\"\");\r\n\t}\r\n\r\n\tif(decimal){\r\n\t\ta = a.split(decimal).join(\".\");\r\n\t\tb = b.split(decimal).join(\".\");\r\n\t}\r\n\r\n\ta = parseFloat(a);\r\n\tb = parseFloat(b);\r\n\r\n\t//handle non numeric values\r\n\tif(isNaN(a)){\r\n\t\temptyAlign =  isNaN(b) ? 0 : -1;\r\n\t}else if(isNaN(b)){\r\n\t\temptyAlign =  1;\r\n\t}else{\r\n\t\t//compare valid values\r\n\t\treturn a - b;\r\n\t}\r\n\r\n\t//fix empty values in position\r\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\r\n\t\temptyAlign *= -1;\r\n\t}\r\n\r\n\treturn emptyAlign;\r\n};","//sort strings\r\nexport default function(a, b, aRow, bRow, column, dir, params){\r\n\tvar alignEmptyValues = params.alignEmptyValues;\r\n\tvar emptyAlign = 0;\r\n\tvar locale;\r\n\r\n\t//handle empty values\r\n\tif(!a){\r\n\t\temptyAlign =  !b ? 0 : -1;\r\n\t}else if(!b){\r\n\t\temptyAlign =  1;\r\n\t}else{\r\n\t\t//compare valid values\r\n\t\tswitch(typeof params.locale){\r\n\t\t\tcase \"boolean\":\r\n\t\t\tif(params.locale){\r\n\t\t\t\tlocale = this.table.modules.localize.getLocale();\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t\tcase \"string\":\r\n\t\t\tlocale = params.locale;\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn String(a).toLowerCase().localeCompare(String(b).toLowerCase(), locale);\r\n\t}\r\n\r\n\t//fix empty values in position\r\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\r\n\t\temptyAlign *= -1;\r\n\t}\r\n\r\n\treturn emptyAlign;\r\n};","//sort datetime\r\nexport default function(a, b, aRow, bRow, column, dir, params){\r\n\tvar format = params.format || \"DD/MM/YYYY HH:mm:ss\",\r\n\talignEmptyValues = params.alignEmptyValues,\r\n\temptyAlign = 0;\r\n\r\n\tif(typeof moment != \"undefined\"){\r\n\t\ta = moment(a, format);\r\n\t\tb = moment(b, format);\r\n\r\n\t\tif(!a.isValid()){\r\n\t\t\temptyAlign = !b.isValid() ? 0 : -1;\r\n\t\t}else if(!b.isValid()){\r\n\t\t\temptyAlign =  1;\r\n\t\t}else{\r\n\t\t\t//compare valid values\r\n\t\t\treturn a - b;\r\n\t\t}\r\n\r\n\t\t//fix empty values in position\r\n\t\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\r\n\t\t\temptyAlign *= -1;\r\n\t\t}\r\n\r\n\t\treturn emptyAlign;\r\n\r\n\t}else{\r\n\t\tconsole.error(\"Sort Error - 'datetime' sorter is dependant on moment.js\");\r\n\t}\r\n};","import datetime from './datetime.js';\r\n\r\n//sort date\r\nexport default function(a, b, aRow, bRow, column, dir, params){\r\n\tif(!params.format){\r\n\t\tparams.format = \"DD/MM/YYYY\";\r\n\t}\r\n\r\n\treturn datetime.call(this, a, b, aRow, bRow, column, dir, params);\r\n};","import datetime from './datetime.js';\r\n\r\n//sort times\r\nexport default function(a, b, aRow, bRow, column, dir, params){\r\n\tif(!params.format){\r\n\t\tparams.format = \"HH:mm\";\r\n\t}\r\n\r\n\treturn datetime.call(this, a, b, aRow, bRow, column, dir, params);\r\n};","//sort booleans\r\nexport default function(a, b, aRow, bRow, column, dir, params){\r\n\tvar el1 = a === true || a === \"true\" || a === \"True\" || a === 1 ? 1 : 0;\r\n\tvar el2 = b === true || b === \"true\" || b === \"True\" || b === 1 ? 1 : 0;\r\n\r\n\treturn el1 - el2;\r\n};","//sort if element contains any data\r\nexport default function(a, b, aRow, bRow, column, dir, params){\r\n\tvar el1 = 0;\r\n\tvar el2 = 0;\r\n\tvar type = params.type || \"length\";\r\n\tvar alignEmptyValues = params.alignEmptyValues;\r\n\tvar emptyAlign = 0;\r\n\r\n\tfunction calc(value){\r\n\r\n\t\tswitch(type){\r\n\t\t\tcase \"length\":\r\n\t\t\treturn value.length;\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"sum\":\r\n\t\t\treturn value.reduce(function(c, d){\r\n\t\t\t\treturn c + d;\r\n\t\t\t});\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"max\":\r\n\t\t\treturn Math.max.apply(null, value) ;\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"min\":\r\n\t\t\treturn Math.min.apply(null, value) ;\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"avg\":\r\n\t\t\treturn value.reduce(function(c, d){\r\n\t\t\t\treturn c + d;\r\n\t\t\t}) / value.length;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\t//handle non array values\r\n\tif(!Array.isArray(a)){\r\n\t\talignEmptyValues = !Array.isArray(b) ? 0 : -1;\r\n\t}else if(!Array.isArray(b)){\r\n\t\talignEmptyValues = 1;\r\n\t}else{\r\n\r\n\t\t//compare valid values\r\n\t\tel1 = a ? calc(a) : 0;\r\n\t\tel2 = b ? calc(b) : 0;\r\n\r\n\t\treturn el1 - el2;\r\n\t}\r\n\r\n\t//fix empty values in position\r\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\r\n\t\temptyAlign *= -1;\r\n\t}\r\n\r\n\treturn emptyAlign;\r\n};","//sort if element contains any data\r\nexport default function(a, b, aRow, bRow, column, dir, params){\r\n\tvar el1 = typeof a == \"undefined\" ? 0 : 1;\r\n\tvar el2 = typeof b == \"undefined\" ? 0 : 1;\r\n\r\n\treturn el1 - el2;\r\n};","//sort alpha numeric strings\r\nexport default function(as, bs, aRow, bRow, column, dir, params){\r\n\tvar a, b, a1, b1, i= 0, L, rx = /(\\d+)|(\\D+)/g, rd = /\\d/;\r\n\tvar alignEmptyValues = params.alignEmptyValues;\r\n\tvar emptyAlign = 0;\r\n\r\n\t//handle empty values\r\n\tif(!as && as!== 0){\r\n\t\temptyAlign =  !bs && bs!== 0 ? 0 : -1;\r\n\t}else if(!bs && bs!== 0){\r\n\t\temptyAlign =  1;\r\n\t}else{\r\n\r\n\t\tif(isFinite(as) && isFinite(bs)) return as - bs;\r\n\t\ta = String(as).toLowerCase();\r\n\t\tb = String(bs).toLowerCase();\r\n\t\tif(a === b) return 0;\r\n\t\tif(!(rd.test(a) && rd.test(b))) return a > b ? 1 : -1;\r\n\t\ta = a.match(rx);\r\n\t\tb = b.match(rx);\r\n\t\tL = a.length > b.length ? b.length : a.length;\r\n\t\twhile(i < L){\r\n\t\t\ta1= a[i];\r\n\t\t\tb1= b[i++];\r\n\t\t\tif(a1 !== b1){\r\n\t\t\t\tif(isFinite(a1) && isFinite(b1)){\r\n\t\t\t\t\tif(a1.charAt(0) === \"0\") a1 = \".\" + a1;\r\n\t\t\t\t\tif(b1.charAt(0) === \"0\") b1 = \".\" + b1;\r\n\t\t\t\t\treturn a1 - b1;\r\n\t\t\t\t}\r\n\t\t\t\telse return a1 > b1 ? 1 : -1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn a.length > b.length;\r\n\t}\r\n\r\n\t//fix empty values in position\r\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\r\n\t\temptyAlign *= -1;\r\n\t}\r\n\r\n\treturn emptyAlign;\r\n};","import number from './sorters/number.js';\r\nimport string from './sorters/string.js';\r\nimport date from './sorters/date.js';\r\nimport time from './sorters/time.js';\r\nimport datetime from './sorters/datetime.js';\r\nimport boolean from './sorters/boolean.js';\r\nimport array from './sorters/array.js';\r\nimport exists from './sorters/exists.js';\r\nimport alphanum from './sorters/alphanum.js';\r\n\r\nexport default {\r\n\tnumber:number,\r\n\tstring:string,\r\n\tdate:date,\r\n\ttime:time,\r\n\tdatetime:datetime,\r\n\tboolean:boolean,\r\n\tarray:array,\r\n\texists:exists,\r\n\talphanum:alphanum\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport defaultSorters from './defaults/sorters.js';\r\n\r\nclass Sort extends Module{\r\n\r\n\tconstructor(table){\r\n\t \tsuper(table);\r\n\r\n\t \tthis.sortList = []; //holder current sort\r\n\t \tthis.changed = false; //has the sort changed since last render\r\n\t}\r\n\r\n\t//initialize column header for sorting\r\n\tinitializeColumn(column, content){\r\n\t\tvar self = this,\r\n\t\tsorter = false,\r\n\t\tcolEl,\r\n\t\tarrowEl;\r\n\r\n\t\tswitch(typeof column.definition.sorter){\r\n\t\t\tcase \"string\":\r\n\t\t\tif(Sort.sorters[column.definition.sorter]){\r\n\t\t\t\tsorter = Sort.sorters[column.definition.sorter];\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Sort Error - No such sorter found: \", column.definition.sorter);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\tsorter = column.definition.sorter;\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tcolumn.modules.sort = {\r\n\t\t\tsorter:sorter, dir:\"none\",\r\n\t\t\tparams:column.definition.sorterParams || {},\r\n\t\t\tstartingDir:column.definition.headerSortStartingDir || \"asc\",\r\n\t\t\ttristate: typeof column.definition.headerSortTristate !== \"undefined\" ? column.definition.headerSortTristate : this.table.options.headerSortTristate,\r\n\t\t};\r\n\r\n\t\tif(typeof column.definition.headerSort === \"undefined\" ? (this.table.options.headerSort !== false) : column.definition.headerSort !== false){\r\n\r\n\t\t\tcolEl = column.getElement();\r\n\r\n\t\t\tcolEl.classList.add(\"tabulator-sortable\");\r\n\r\n\r\n\t\t\tarrowEl = document.createElement(\"div\");\r\n\t\t\tarrowEl.classList.add(\"tabulator-col-sorter\");\r\n\r\n\t\t\tif(typeof this.table.options.headerSortElement == \"object\"){\r\n\t\t\t\tarrowEl.appendChild(this.table.options.headerSortElement);\r\n\t\t\t}else{\r\n\t\t\t\tarrowEl.innerHTML = this.table.options.headerSortElement;\r\n\t\t\t}\r\n\r\n\t\t\t//create sorter arrow\r\n\t\t\tcontent.appendChild(arrowEl);\r\n\r\n\t\t\tcolumn.modules.sort.element = arrowEl;\r\n\r\n\t\t\t//sort on click\r\n\t\t\tcolEl.addEventListener(\"click\", function(e){\r\n\t\t\t\tvar dir = \"\",\r\n\t\t\t\tsorters=[],\r\n\t\t\t\tmatch = false;\r\n\r\n\t\t\t\tif(column.modules.sort){\r\n\t\t\t\t\tif(column.modules.sort.tristate){\r\n\t\t\t\t\t\tif(column.modules.sort.dir == \"none\"){\r\n\t\t\t\t\t\t\tdir = column.modules.sort.startingDir;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tif(column.modules.sort.dir == column.modules.sort.startingDir){\r\n\t\t\t\t\t\t\t\tdir = column.modules.sort.dir == \"asc\" ? \"desc\" : \"asc\";\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tdir = \"none\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tswitch(column.modules.sort.dir){\r\n\t\t\t\t\t\t\tcase \"asc\":\r\n\t\t\t\t\t\t\tdir = \"desc\";\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase \"desc\":\r\n\t\t\t\t\t\t\tdir = \"asc\";\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tdir = column.modules.sort.startingDir;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif (self.table.options.columnHeaderSortMulti && (e.shiftKey || e.ctrlKey)) {\r\n\t\t\t\t\t\tsorters = self.getSort();\r\n\r\n\t\t\t\t\t\tmatch = sorters.findIndex(function(sorter){\r\n\t\t\t\t\t\t\treturn sorter.field === column.getField();\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif(match > -1){\r\n\t\t\t\t\t\t\tsorters[match].dir = dir;\r\n\r\n\t\t\t\t\t\t\tif(match != sorters.length -1){\r\n\t\t\t\t\t\t\t\tmatch = sorters.splice(match, 1)[0];\r\n\t\t\t\t\t\t\t\tif(dir != \"none\"){\r\n\t\t\t\t\t\t\t\t\tsorters.push(match);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tif(dir != \"none\"){\r\n\t\t\t\t\t\t\t\tsorters.push({column:column, dir:dir});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t//add to existing sort\r\n\t\t\t\t\t\tself.setSort(sorters);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(dir == \"none\"){\r\n\t\t\t\t\t\t\tself.clear();\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t//sort by column only\r\n\t\t\t\t\t\t\tself.setSort(column, dir);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tself.table.rowManager.sorterRefresh(!self.sortList.length);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t//check if the sorters have changed since last use\r\n\thasChanged(){\r\n\t\tvar changed = this.changed;\r\n\t\tthis.changed = false;\r\n\t\treturn changed;\r\n\t}\r\n\r\n\t//return current sorters\r\n\tgetSort(){\r\n\t\tvar self = this,\r\n\t\tsorters = [];\r\n\r\n\t\tself.sortList.forEach(function(item){\r\n\t\t\tif(item.column){\r\n\t\t\t\tsorters.push({column:item.column.getComponent(), field:item.column.getField(), dir:item.dir});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn sorters;\r\n\t}\r\n\r\n\t//change sort list and trigger sort\r\n\tsetSort(sortList, dir){\r\n\t\tvar self = this,\r\n\t\tnewSortList = [];\r\n\r\n\t\tif(!Array.isArray(sortList)){\r\n\t\t\tsortList = [{column: sortList, dir:dir}];\r\n\t\t}\r\n\r\n\t\tsortList.forEach(function(item){\r\n\t\t\tvar column;\r\n\r\n\t\t\tcolumn = self.table.columnManager.findColumn(item.column);\r\n\r\n\t\t\tif(column){\r\n\t\t\t\titem.column = column;\r\n\t\t\t\tnewSortList.push(item);\r\n\t\t\t\tself.changed = true;\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Sort Warning - Sort field does not exist and is being ignored: \", item.column);\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\tself.sortList = newSortList;\r\n\r\n\t\tif(this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.sort){\r\n\t\t\tthis.table.modules.persistence.save(\"sort\");\r\n\t\t}\r\n\t}\r\n\r\n\t//clear sorters\r\n\tclear(){\r\n\t\tthis.setSort([]);\r\n\t}\r\n\r\n\t//find appropriate sorter for column\r\n\tfindSorter(column){\r\n\t\tvar row = this.table.rowManager.activeRows[0],\r\n\t\tsorter = \"string\",\r\n\t\tfield, value;\r\n\r\n\t\tif(row){\r\n\t\t\trow = row.getData();\r\n\t\t\tfield = column.getField();\r\n\r\n\t\t\tif(field){\r\n\r\n\t\t\t\tvalue = column.getFieldValue(row);\r\n\r\n\t\t\t\tswitch(typeof value){\r\n\t\t\t\t\tcase \"undefined\":\r\n\t\t\t\t\tsorter = \"string\";\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase \"boolean\":\r\n\t\t\t\t\tsorter = \"boolean\";\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\tif(!isNaN(value) && value !== \"\"){\r\n\t\t\t\t\t\tsorter = \"number\";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)){\r\n\t\t\t\t\t\t\tsorter = \"alphanum\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn Sort.sorters[sorter];\r\n\t}\r\n\r\n\t//work through sort list sorting data\r\n\tsort(data){\r\n\t\tvar self = this,\r\n\t\tsortList = this.table.options.sortOrderReverse ? self.sortList.slice().reverse() : self.sortList,\r\n\t\tsortListActual = [],\r\n\t\trowComponents = [],\r\n\t\tlastSort;\r\n\r\n\t\tif(self.table.options.dataSorting){\r\n\t\t\tself.table.options.dataSorting.call(self.table, self.getSort());\r\n\t\t}\r\n\r\n\t\tself.clearColumnHeaders();\r\n\r\n\t\tif(!self.table.options.ajaxSorting){\r\n\r\n\t\t\t//build list of valid sorters and trigger column specific callbacks before sort begins\r\n\t\t\tsortList.forEach(function(item, i){\r\n\t\t\t\tvar sortObj = item.column.modules.sort;\r\n\r\n\t\t\t\tif(item.column && sortObj){\r\n\r\n\t\t\t\t\t//if no sorter has been defined, take a guess\r\n\t\t\t\t\tif(!sortObj.sorter){\r\n\t\t\t\t\t\tsortObj.sorter = self.findSorter(item.column);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\titem.params = typeof sortObj.params === \"function\" ? sortObj.params(item.column.getComponent(), item.dir) : sortObj.params;\r\n\r\n\t\t\t\t\tsortListActual.push(item);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tself.setColumnHeader(item.column, item.dir);\r\n\t\t\t});\r\n\r\n\t\t\t//sort data\r\n\t\t\tif (sortListActual.length) {\r\n\t\t\t\tself._sortItems(data, sortListActual);\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\tsortList.forEach(function(item, i){\r\n\t\t\t\tself.setColumnHeader(item.column, item.dir);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(self.table.options.dataSorted){\r\n\t\t\tdata.forEach((row) => {\r\n\t\t\t\trowComponents.push(row.getComponent());\r\n\t\t\t});\r\n\r\n\t\t\tself.table.options.dataSorted.call(self.table, self.getSort(), rowComponents);\r\n\t\t}\r\n\t}\r\n\r\n\t//clear sort arrows on columns\r\n\tclearColumnHeaders(){\r\n\t\tthis.table.columnManager.getRealColumns().forEach(function(column){\r\n\t\t\tif(column.modules.sort){\r\n\t\t\t\tcolumn.modules.sort.dir = \"none\";\r\n\t\t\t\tcolumn.getElement().setAttribute(\"aria-sort\", \"none\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//set the column header sort direction\r\n\tsetColumnHeader(column, dir){\r\n\t\tcolumn.modules.sort.dir = dir;\r\n\t\tcolumn.getElement().setAttribute(\"aria-sort\", dir);\r\n\t}\r\n\r\n\t//sort each item in sort list\r\n\t_sortItems(data, sortList){\r\n\t\tvar sorterCount = sortList.length - 1;\r\n\r\n\t\tdata.sort((a, b) => {\r\n\t\t\tvar result;\r\n\r\n\t\t\tfor(var i = sorterCount; i>= 0; i--){\r\n\t\t\t\tlet sortItem = sortList[i];\r\n\r\n\t\t\t\tresult = this._sortRow(a, b, sortItem.column, sortItem.dir, sortItem.params);\r\n\r\n\t\t\t\tif(result !== 0){\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn result;\r\n\t\t});\r\n\t}\r\n\r\n\t//process individual rows for a sort function on active data\r\n\t_sortRow(a, b, column, dir, params){\r\n\t\tvar el1Comp, el2Comp, colComp;\r\n\r\n\t\t//switch elements depending on search direction\r\n\t\tvar el1 = dir == \"asc\" ? a : b;\r\n\t\tvar el2 = dir == \"asc\" ? b : a;\r\n\r\n\t\ta = column.getFieldValue(el1.getData());\r\n\t\tb = column.getFieldValue(el2.getData());\r\n\r\n\t\ta = typeof a !== \"undefined\" ? a : \"\";\r\n\t\tb = typeof b !== \"undefined\" ? b : \"\";\r\n\r\n\t\tel1Comp = el1.getComponent();\r\n\t\tel2Comp = el2.getComponent();\r\n\r\n\t\treturn column.modules.sort.sorter.call(this, a, b, el1Comp, el2Comp, column.getComponent(), dir, params);\r\n\t}\r\n}\r\n\r\nSort.moduleName = \"sort\";\r\n\r\n//load defaults\r\nSort.sorters = defaultSorters;\r\n\r\nexport default Sort;","export default {\r\n\t//is integer\r\n\tinteger: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tvalue = Number(value);\r\n\t\treturn typeof value === 'number' && isFinite(value) && Math.floor(value) === value;\r\n\t},\r\n\r\n\t//is float\r\n\tfloat: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tvalue = Number(value);\r\n\t\treturn typeof value === 'number' && isFinite(value) && value % 1 !== 0;\r\n\t},\r\n\r\n\t//must be a number\r\n\tnumeric: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn !isNaN(value);\r\n\t},\r\n\r\n\t//must be a string\r\n\tstring: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn isNaN(value);\r\n\t},\r\n\r\n\t//maximum value\r\n\tmax: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn parseFloat(value) <= parameters;\r\n\t},\r\n\r\n\t//minimum value\r\n\tmin: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn parseFloat(value) >= parameters;\r\n\t},\r\n\r\n\t//starts with  value\r\n\tstarts: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn String(value).toLowerCase().startsWith(String(parameters).toLowerCase());\r\n\t},\r\n\r\n\t//ends with  value\r\n\tends: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn String(value).toLowerCase().endsWith(String(parameters).toLowerCase());\r\n\t},\r\n\r\n\r\n\t//minimum string length\r\n\tminLength: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn String(value).length >= parameters;\r\n\t},\r\n\r\n\t//maximum string length\r\n\tmaxLength: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn String(value).length <= parameters;\r\n\t},\r\n\r\n\t//in provided value list\r\n\tin: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif(typeof parameters == \"string\"){\r\n\t\t\tparameters = parameters.split(\"|\");\r\n\t\t}\r\n\r\n\t\treturn value === \"\" || parameters.indexOf(value) > -1;\r\n\t},\r\n\r\n\t//must match provided regex\r\n\tregex: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tvar reg = new RegExp(parameters);\r\n\r\n\t\treturn reg.test(value);\r\n\t},\r\n\r\n\t//value must be unique in this column\r\n\tunique: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tvar unique = true;\r\n\r\n\t\tvar cellData = cell.getData();\r\n\t\tvar column = cell.getColumn()._getSelf();\r\n\r\n\t\tthis.table.rowManager.rows.forEach(function(row){\r\n\t\t\tvar data = row.getData();\r\n\r\n\t\t\tif(data !== cellData){\r\n\t\t\t\tif(value == column.getFieldValue(data)){\r\n\t\t\t\t\tunique = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn unique;\r\n\t},\r\n\r\n\t//must have a value\r\n\trequired:function(cell, value, parameters){\r\n\t\treturn value !== \"\" && value !== null && typeof value !== \"undefined\";\r\n\t},\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport defaultValidators from './defaults/validators.js';\r\n\r\nclass Validate extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.invalidCells = [];\r\n\t}\r\n\r\n\t//validate\r\n\tinitializeColumn(column){\r\n\t\tvar self = this,\r\n\t\tconfig = [],\r\n\t\tvalidator;\r\n\r\n\t\tif(column.definition.validator){\r\n\r\n\t\t\tif(Array.isArray(column.definition.validator)){\r\n\t\t\t\tcolumn.definition.validator.forEach(function(item){\r\n\t\t\t\t\tvalidator = self._extractValidator(item);\r\n\r\n\t\t\t\t\tif(validator){\r\n\t\t\t\t\t\tconfig.push(validator);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t}else{\r\n\t\t\t\tvalidator = this._extractValidator(column.definition.validator);\r\n\r\n\t\t\t\tif(validator){\r\n\t\t\t\t\tconfig.push(validator);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tcolumn.modules.validate = config.length ? config : false;\r\n\t\t}\r\n\t}\r\n\r\n\t_extractValidator(value){\r\n\t\tvar type, params, pos;\r\n\r\n\t\tswitch(typeof value){\r\n\t\t\tcase \"string\":\r\n\t\t\tpos = value.indexOf(':');\r\n\r\n\t\t\tif(pos > -1){\r\n\t\t\t\ttype = value.substring(0,pos);\r\n\t\t\t\tparams = value.substring(pos+1);\r\n\t\t\t}else{\r\n\t\t\t\ttype = value;\r\n\t\t\t}\r\n\r\n\t\t\treturn this._buildValidator(type, params);\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\treturn this._buildValidator(value);\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"object\":\r\n\t\t\treturn this._buildValidator(value.type, value.parameters);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\t_buildValidator(type, params){\r\n\r\n\t\tvar func = typeof type == \"function\" ? type : Validate.validators[type];\r\n\r\n\t\tif(!func){\r\n\t\t\tconsole.warn(\"Validator Setup Error - No matching validator found:\", type);\r\n\t\t\treturn false;\r\n\t\t}else{\r\n\t\t\treturn {\r\n\t\t\t\ttype:typeof type == \"function\" ? \"function\" : type,\r\n\t\t\t\tfunc:func,\r\n\t\t\t\tparams:params,\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\tvalidate(validators, cell, value){\r\n\t\tvar self = this,\r\n\t\tvalid = [],\r\n\t\tinvalidIndex = this.invalidCells.indexOf(cell);\r\n\r\n\t\tif(validators){\r\n\t\t\tvalidators.forEach(function(item){\r\n\t\t\t\tif(!item.func.call(self, cell.getComponent(), value, item.params)){\r\n\t\t\t\t\tvalid.push({\r\n\t\t\t\t\t\ttype:item.type,\r\n\t\t\t\t\t\tparameters:item.params\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tvalid = valid.length ? valid : true;\r\n\r\n\t\tif(!cell.modules.validate){\r\n\t\t\tcell.modules.validate = {};\r\n\t\t}\r\n\r\n\t\tif(valid === true){\r\n\t\t\tcell.modules.validate.invalid = false;\r\n\t\t\tcell.getElement().classList.remove(\"tabulator-validation-fail\");\r\n\r\n\t\t\tif(invalidIndex > -1){\r\n\t\t\t\tthis.invalidCells.splice(invalidIndex, 1);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tcell.modules.validate.invalid = true;\r\n\r\n\t\t\tif(this.table.options.validationMode !== \"manual\"){\r\n\t\t\t\tcell.getElement().classList.add(\"tabulator-validation-fail\");\r\n\t\t\t}\r\n\r\n\t\t\tif(invalidIndex == -1){\r\n\t\t\t\tthis.invalidCells.push(cell);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn valid;\r\n\t}\r\n\r\n\tgetInvalidCells(){\r\n\t\tvar output = [];\r\n\r\n\t\tthis.invalidCells.forEach((cell) => {\r\n\t\t\toutput.push(cell.getComponent());\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tclearValidation(cell){\r\n\t\tvar invalidIndex;\r\n\r\n\t\tif(cell.modules.validate && cell.modules.validate.invalid){\r\n\r\n\t\t\tcell.getElement().classList.remove(\"tabulator-validation-fail\");\r\n\t\t\tcell.modules.validate.invalid = false;\r\n\r\n\t\t\tinvalidIndex = this.invalidCells.indexOf(cell);\r\n\r\n\t\t\tif(invalidIndex > -1){\r\n\t\t\t\tthis.invalidCells.splice(invalidIndex, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nValidate.moduleName = \"validate\";\r\n\r\n//load defaults\r\nValidate.validators = defaultValidators;\r\n\r\nexport default Validate;","//tabulator with all modules installed\r\nimport {default as Tabulator} from './Tabulator.js';\r\nimport * as modules from '../core/modules/optional.js';\r\nimport ModuleBinder from './ModuleBinder.js';\r\n\r\nclass TabulatorFull extends Tabulator {};\r\n\r\n//bind modules and static functionality\r\nnew ModuleBinder(TabulatorFull, modules);\r\n\r\nexport default TabulatorFull;"],"names":["height","minHeight","maxHeight","layout","layoutColumnsOnNewData","columnMinWidth","columnMaxWidth","columnHeaderVertAlign","resizableColumns","resizableRows","autoResize","columns","columnDefaults","cellHozAlign","cellVertAlign","headerHozAlign","data","autoColumns","autoColumnsDefinitions","reactiveData","nestedFieldSeparator","tooltips","tooltipsHeader","tooltipGenerationMode","initialSort","initialFilter","initialHeaderFilter","columnHeaderSortMulti","sortOrderReverse","headerSort","headerSortTristate","headerSortElement","footerElement","index","textDirection","keybindings","tabEndNewRow","invalidOptionWarnings","clipboard","clipboardCopyStyled","clipboardCopyConfig","clipboardCopyFormatter","clipboardCopyRowRange","clipboardPasteParser","clipboardPasteAction","clipboardCopied","clipboardPasted","clipboardPasteError","downloadReady","blob","downloadComplete","downloadConfig","downloadRowRange","dataTree","dataTreeFilter","dataTreeSort","dataTreeElementColumn","dataTreeBranchElement","dataTreeChildIndent","dataTreeChildField","dataTreeCollapseElement","dataTreeExpandElement","dataTreeStartExpanded","dataTreeRowExpanded","dataTreeRowCollapsed","dataTreeChildColumnCalcs","dataTreeSelectPropagate","printAsHtml","printFormatter","printHeader","printFooter","printStyled","printRowRange","printConfig","addRowPos","selectable","selectableRangeMode","selectableRollingSelection","selectablePersistence","selectableCheck","row","headerFilterLiveFilterDelay","headerFilterPlaceholder","headerVisible","history","locale","langs","virtualDom","virtualDomBuffer","virtualDomHoz","persistence","persistenceID","persistenceMode","persistenceReaderFunc","persistenceWriterFunc","responsiveLayout","responsiveLayoutCollapseStartOpen","responsiveLayoutCollapseUseFormatters","responsiveLayoutCollapseFormatter","pagination","paginationSize","paginationInitialPage","paginationButtonCount","paginationSizeSelector","paginationElement","paginationDataSent","paginationDataReceived","paginationAddRow","ajaxURL","ajaxURLGenerator","ajaxParams","ajaxConfig","ajaxContentType","ajaxRequestFunc","ajaxLoader","ajaxLoaderLoading","ajaxLoaderError","ajaxFiltering","ajaxSorting","ajaxProgressiveLoad","ajaxProgressiveLoadDelay","ajaxProgressiveLoadScrollMargin","groupBy","groupStartOpen","groupValues","groupUpdateOnCellEdit","groupHeader","groupHeaderPrint","groupHeaderClipboard","groupHeaderHtmlOutput","groupHeaderDownload","htmlOutputConfig","movableColumns","movableRows","movableRowsConnectedTables","movableRowsConnectedElements","movableRowsSender","movableRowsReceiver","movableRowsSendingStart","movableRowsSent","movableRowsSentFailed","movableRowsSendingStop","movableRowsReceivingStart","movableRowsReceived","movableRowsReceivedFailed","movableRowsReceivingStop","movableRowsElementDrop","scrollToRowPosition","scrollToRowIfVisible","scrollToColumnPosition","scrollToColumnIfVisible","rowFormatter","rowFormatterPrint","rowFormatterClipboard","rowFormatterHtmlOutput","placeholder","tableBuilding","tableBuilt","renderStarted","renderComplete","rowClick","rowDblClick","rowContext","rowTap","rowDblTap","rowTapHold","rowMouseEnter","rowMouseLeave","rowMouseOver","rowMouseOut","rowMouseMove","rowContextMenu","rowClickMenu","rowAdded","rowDeleted","rowMoved","rowUpdated","rowSelectionChanged","rowSelected","rowDeselected","rowResized","cellClick","cellDblClick","cellContext","cellTap","cellDblTap","cellTapHold","cellMouseEnter","cellMouseLeave","cellMouseOver","cellMouseOut","cellMouseMove","cellEditing","cellEdited","cellEditCancelled","columnMoved","columnResized","columnTitleChanged","columnVisibilityChanged","htmlImporting","htmlImported","dataLoading","dataLoaded","dataChanged","ajaxRequesting","ajaxResponse","ajaxError","dataFiltering","dataFiltered","dataSorting","dataSorted","groupToggleElement","groupClosedShowCalcs","dataGrouping","dataGrouped","groupVisibilityChanged","groupClick","groupDblClick","groupContext","groupContextMenu","groupClickMenu","groupTap","groupDblTap","groupTapHold","columnCalcs","pageLoaded","localized","validationMode","validationFailed","historyUndo","historyRedo","scrollHorizontal","scrollVertical","ColumnComponent","column","_column","type","getElement","getDefinition","getField","cells","forEach","cell","push","getComponent","visible","isGroup","show","hide","output","length","parent","Column","table","columnManager","scrollToColumn","modExists","modules","filter","setHeaderFilterFocus","reloadHeaderFilter","getHeaderFilterValue","value","setHeaderFilterValue","to","after","toColumn","findColumn","moveColumn","console","warn","nextCol","nextColumn","prevCol","prevColumn","updates","updateDefinition","getWidth","width","result","reinitializeWidth","setWidth","options","vdomHoz","reinitialize","validate","CellComponent","_cell","getValue","getOldValue","initialValue","getData","mutate","setValue","setValueActual","force","edit","cancelEdit","edited","clearEdited","invalid","clearValidation","nav","checkHeight","Cell","element","oldValue","minWidth","component","loaded","build","generateElement","_configureCell","getFieldValue","document","createElement","className","setAttribute","cellEvents","field","vertAligns","top","bottom","middle","hozAligns","left","right","center","style","textAlign","hozAlign","vertAlign","display","alignItems","justifyContent","definition","cssClass","classNames","split","classList","add","addEventListener","e","_generateTooltip","_bindClickEvents","_bindTouchEvents","_bindMouseEvents","bindEditor","rowHandle","moveRow","initializeCell","call","currentCell","preventDefault","selection","range","body","createTextRange","moveToElementText","select","window","getSelection","createRange","selectNode","removeAllRanges","addRange","dblTap","tapHold","tap","passive","clearTimeout","setTimeout","val","format","formatValue","innerHTML","Node","firstChild","removeChild","appendChild","cellRendered","tooltip","containerOnly","layoutElement","changed","setValueProcessData","action","newValue","groupRows","reassignRowToGroup","rowManager","mutator","transformCell","topCalc","bottomCalc","recalc","activeRows","recalcRowGroup","block","setFieldValue","unblock","_generateContents","resizeColumns","initializeColumn","contextMenu","clickMenu","menu","frozenColumns","widthStyled","offsetWidth","minWidthStyled","maxWidth","maxWidthStyled","reinitializeHeight","heightStyled","offsetHeight","editCell","editing","getCurrentCell","_getSelf","valid","redrawBlock","parentNode","clearComponentHistory","deleteCell","calcs","self","nextCell","getCellIndex","next","nextRow","nextDisplayRow","findNextEditableCell","prev","prevRow","prevDisplayRow","findPrevEditableCell","up","down","def","contentElement","titleHolderElement","titleElement","groupElement","createGroupElement","fieldStructure","titleFormatterRendered","mapDefinitionDefaults","setField","checkDefinition","widthFixed","_mapDepricatedFunctionality","i","newCol","attachColumn","checkColumnVisibility","registerColumnField","setHandle","_buildHeader","bindModuleColumns","el","defaults","key","Object","keys","defaultOptionList","indexOf","title","_getNestedData","_getFlatData","_setNestedData","_setFlatData","registerColumnPosition","reRegisterPosition","headerTooltip","localize","bind","headerVertical","_bindEvents","_buildColumnHeaderContent","_buildGroupHeader","_buildColumnHeader","setTooltip","headerFilter","setHeaderFilterColumnPlaceholder","config","headerClick","headerDblClick","headerContext","headerTap","headerDblTap","headerTapHold","sort","headerContextMenu","headerClickMenu","headerMenu","initializeColumnHeader","editor","validator","accessor","classeNames","setMinWidth","parseInt","setMaxWidth","_buildColumnHeaderTitle","editableTitle","stopPropagation","focus","text","_formatColumnHeaderTitle","formatter","contents","params","mockCell","onRendered","titleFormatter","getFormatter","callback","titleFormatterParams","dataObj","structure","alignment","parentHeight","getGroupElement","clientHeight","getHeadersElement","paddingTop","verticalAlign","clearVerticalAlign","rowNumColumn","getFirstColumn","getLastColumn","getTopColumn","updateBranches","colDefs","silent","responsiveToggle","_verticalAlignHeaders","save","updateColumnVisibility","matchChildWidths","childWidth","child","splice","setWidthActual","isNaN","Math","floor","clientWidth","max","min","rows","heightInitialized","offsetParent","clearCellHeight","calcHeight","setCellHeight","Promise","resolve","reject","cellCount","deregisterColumn","findColumnIndex","_nextVisibleColumn","getColumnByIndex","_prevVisibleColumn","hideHeaderFilterElements","fitToData","showHeaderFilterElements","clearWidth","assign","addColumn","then","err","defaultOptions","Helpers","box","getBoundingClientRect","pageYOffset","documentElement","clientTop","pageXOffset","clientLeft","obj","clone","Array","isArray","Date","deepClone","ColumnManager","blockHozScrollEvent","headersElement","createHeadersElement","createHeaderElement","columnsByIndex","columnsByField","scrollLeft","insertBefore","manager","hozAdjust","scrollWidth","marginLeft","cols","definitions","sorter","col","match","find","setColumns","reset","_addColumn","_reIndexColumns","initialize","redraw","before","nextToColumn","colEl","parentIndex","nextEl","nextSibling","unshift","columnRendered","getHeight","adjustTableSize","subject","HTMLElement","root","matches","fieldRoot","findIndex","active","structured","from","moveColumnActual","_moveColumnInArray","getComponents","updateRows","fromIndex","toIndex","concat","getTreeChildren","position","ifVisible","offset","adjust","offsetLeft","generateCell","totalWidth","fixedWidth","scrollHeight","colWidth","getMode","elVisible","resetScroll","update","footerManager","RowComponent","_row","transform","getCells","getCell","getRowPosition","scrollToRow","page","setPageToRow","moveToRow","updateData","normalizeHeight","selectRow","selectRows","deselectRows","toggleRow","isRowSelected","frozenRows","freezeRow","unfreezeRow","collapseRow","expandRow","getTreeParent","pos","addTreeChildRow","getGroup","Row","manualHeight","outerHeight","initialized","created","setData","create","initializeRow","generateCells","deleteCells","layoutRow","resizeRows","reinitializeRow","children","setHeight","clearHeight","transformRow","watchRow","updatedData","tempData","newRowData","JSON","parse","attrname","getColumnsByFieldRoot","redrawNeeded","refreshActiveData","findCell","allowEdit","check","prevCell","toRow","findRow","moveRowActual","getRowIndex","deleteActual","blockRedraw","detatchModules","group","removeRow","deleteRow","rowDelete","_deselectRow","detachRow","RowManager","createHolderElement","tableElement","createTableElement","heightFixer","firstRender","renderMode","fixedHeight","activeRowsCount","displayRows","displayRowsCount","scrollTop","vDomRowHeight","vDomTop","vDomBottom","vDomScrollPosTop","vDomScrollPosBottom","vDomTopPad","vDomBottomPad","vDomMaxRenderChain","vDomWindowBuffer","vDomWindowMinTotalRows","vDomWindowMinMarginRows","vDomTopNewRows","vDomBottomNewRows","redrawBlockRestoreConfig","redrawBlockRederInPosition","setRenderMode","scrollHeaders","dir","ajax","nextPage","rowIndex","getDisplayRows","rowEl","rowTop","elOffset","abs","_virtualRenderFill","offsetTop","renderInPosition","columnsChanged","_setDataActual","reRenderInPosition","generateColumnsFromRowData","_wipeElements","clear","clearSelectionData","watchData","error","wipe","allIndex","activeIndex","setActiveRows","displayRowIterator","displayIndex","regenerateRowNumbers","updateGroupRows","addRowActual","findAddRowPos","reverse","item","addRow","dispRows","getPageSize","assignRowToGroup","_moveRowInArray","posFrom","posTo","Group","toGroup","fromGroup","insertRow","start","end","styleRow","findRowIndex","rowOnly","getDisplayRowIndex","list","getRows","sorters","getSort","paginationDataSentNames","filters","getFilters","setParams","sendRequest","setPage","loadData","_genRemoteRequest","loadOrignalData","progressiveLoad","stage","skipStage","cascadeOrder","slice","resetDisplayRows","isFrozen","getDisplayIndex","setDisplayIndex","getNextDisplayIndex","setDisplayRows","setMaxRows","dataChange","renderTable","viewable","topEdge","bottomEdge","topFound","topRow","bottomRow","getVisibleRows","selectedRows","getRenderMode","topOffset","diff","_simpleRender","renderEmptyScroll","_clearVirtualDom","checkClassicModeGroupHeaderWidth","onlyGroupHeaders","paddingBottom","visibility","remove","forceMove","holder","topPad","rowsHeight","topPadHeight","heightOccupied","ceil","rowHeight","vDomScrollHeight","countGroups","topDiff","bottomDiff","margin","_addTopRow","_removeBottomRow","_removeTopRow","_addBottomRow","topRowHeight","_quickNormalizeRowHeight","bottomRowHeight","initialHeight","otherHeight","external","resizeTable","tableWidth","browser","event","createEvent","initEvent","dispatchEvent","Event","FooterManager","links","_initialize","querySelector","activate","deactivate","link","footerRedraw","TableRegistry","tables","query","results","querySelectorAll","matchElement","Tabulator","lookupTable","Module","name","fitDataLayoutOverride","colsWidth","gap","lastCol","responsive","flexWidth","flexGrowUnits","flexColWidth","flexColumns","fixedShrinkColumns","flexShrinkUnits","overflowWidth","gapFill","calcWidth","scaleColumns","freeSpace","shrinkCols","oversizeCols","oversizeSpace","remainingSpace","nextColWidth","remainingFlexGrowUnits","changeUnits","undersizeCols","calcGrow","widthGrow","calcShrink","widthShrink","fitData","fitDataFill","fitDataGeneral","fitDataTable","fitDataStretch","fitColumns","Layout","mode","modes","moduleName","defaultModes","Localize","lang","bindings","langList","headerFilters","_setLangProp","values","desiredLocale","traverseLang","trans","path","prop","navigator","language","toLowerCase","prefix","_executeBindings","pathArray","_getLangElement","level","rootPath","getText","binding","defaultLangs","Comms","selectors","connections","connection","comms","con","module","getConnections","tableComms","commsReceived","ModuleBinder","tabulator","bindStaticFuctionality","bindModules","coreModules","moduleBindings","extendModule","property","source","prototype","registerModule","mod","registerModuleBinding","findTable","mods","VirtualDomHorizontal","holderEl","leftCol","rightCol","vDomScrollPosLeft","vDomScrollPosRight","vDomPadLeft","vDomPadRight","fitDataColAvg","compatabilityCheck","frozen","ok","rtl","scroll","change","collsWidth","colEnd","getGroups","old","colPos","leftPos","rightPos","_this18","fitDataCheck","paddingLeft","paddingRight","reinitChanged","renitializeRows","addColRight","removeColLeft","addColLeft","removeColRight","fitDataColActualWidthCheck","prepend","newWidth","widthDiff","colPositionAdjust","browserSlow","browserMobile","initializeElement","initializeOptions","_create","register","getComputedStyle","direction","empty","_clearObjectPointers","rtlCheck","tagName","htmlTableImport","parseTable","setRowManager","setColumnManager","_buildElement","_loadInitialData","_detectBrowser","setHeaderFilterPlaceholder","installLang","setLocale","span","load","setSort","setFilter","print","unwatchData","clearBindings","ua","userAgent","vendor","opera","test","substr","restoreRedraw","extensions","input","accept","file","files","reader","FileReader","readAsText","onload","onerror","click","blockActiveRequest","_setData","inPosition","setConfig","setUrl","getUrl","clearData","getDataCount","search","getHtml","printFullscreen","responses","addRows","newRows","getRowFromPosition","count","successCount","foundRows","doneCheck","a","b","fromRow","selector","copy","getDefinitionTree","parseColumns","getColumns","mergeDefinition","fromColumn","getLocale","getLang","sortList","sorterRefresh","filterRefresh","addFilter","all","getHeaderFilters","removeFilter","clearFilter","clearHeaderFilter","getSelectedRows","getSelectedData","getInvalidCells","setMaxPage","size","setPageSize","previousPage","getPage","getPageMax","groups","getGroupedData","getEditedCells","getResults","recalcAll","undo","redo","getHistoryUndoSize","getHistoryRedoSize","filename","download","receive","plugin","required","Accessor","allowedTypes","charAt","toUpperCase","lookupAccessor","accessors","rowComponent","traverse","colCompnent","defautlAccessors","method","url","includes","serializeParams","contentType","urlGenerator","contentTypeFormatters","headers","Accept","location","origin","credentials","fetch","response","json","status","statusText","stringify","generateParamsList","form","FormData","append","Ajax","loaderElement","createLoaderElement","msgElement","createMsgElement","loadingElement","errorElement","loaderPromise","loading","requestOrder","template","trim","content","defaultLoaderPromise","defaultURLGenerator","initializeProgressive","_loadDefaultConfig","defaultConfig","_loadDataProgressive","_loadDataStandard","encoded","encodeURIComponent","join","requestNo","showLoader","hideLoader","showError","shouldLoad","defaultContentTypeFormatters","replace","updateOrAddData","insert","addData","headerFindSuccess","columnMap","shift","Clipboard","pasteParser","pasteAction","customSelection","rowRange","blocked","plain","html","generateExportList","genereateHTMLTable","generatePlainContent","clipboardData","originalEvent","paste","setPasteParser","setPasteAction","rowData","getKey","internal","sel","textRange","selectNodeContents","toString","execCommand","pasteActions","parser","pasteParsers","checkPaseOrigin","getPasteData","mutateData","target","defaultPasteActions","defaultPasteParsers","CalcComponent","calcParams","precision","reduce","sum","Number","toFixed","parseFloat","String","ColumnCalcs","topCalcs","botCalcs","genColumn","topElement","botElement","botRow","topInitialized","botInitialized","topCalcParams","botCalcParams","bottomCalcParams","calculations","initializeTopRow","botCalc","initializeBottomRow","rowsToData","generateRow","recalcGroup","getRowGroup","getChildGroups","generateRowData","open","getFilteredTreeChildren","disable","enable","paramKey","getGroupResults","groupObj","subGroups","getSubGroups","subGroupResults","subgroup","defaultCalculations","DataTree","indent","collapseEl","expandEl","branchEl","elementField","startOpen","dummyEl","firstCol","getFirstVisibileColumn","tabIndex","childArray","controlEl","generateControlElement","cloneNode","marginRight","getPropertyValue","oldControl","replaceChild","getChildren","allChildren","generateChildren","subChildren","sub","childData","childRow","childIndex","findChildIndex","recurse","setFileContents","delimiter","fileContents","depth","bom","header","autoTableParams","rowGroupStyles","fontStyle","fontSize","cellPadding","fillColor","rowCalcStyles","jsPDFParams","jsPDF","orientation","unit","parseRow","styles","colSpan","rowSpan","doc","autoTable","addPageContent","head","documentProcessing","sheetName","workbook","XLSX","utils","book_new","SheetNames","Sheets","generateSheet","merges","worksheet","s","c","r","j","sheet_add_aoa","encode_range","sheetOnly","sheets","sheet","send","intercept","s2ab","buf","ArrayBuffer","view","Uint8Array","charCodeAt","write","bookType","bookSST","csv","pdf","xlsx","Download","interceptCallback","downloadFunc","buildLink","mime","triggerDownload","downloaders","_group","getRowCount","newTab","Blob","URL","createObjectURL","msSaveOrOpenBlob","defaultDownloaders","success","cancel","editorParams","cellValue","padding","boxSizing","elementAttributes","getAttribute","preventScroll","onChange","keyCode","mask","maskInput","vertNav","verticalNavigation","whiteSpace","resize","getRow","heightNow","selectionStart","stopImmediatePropagation","step","blurFunc","removeEventListener","cellEl","initialDisplayValue","defaultValue","listEl","multiselect","dataItems","currentItem","displayItems","currentItems","blurable","blockListShow","searchWord","searchWordTimeout","getUniqueColumnValues","getColumnByField","getColumn","parseItems","inputValues","curentValues","dataList","displayList","processComplexListItem","label","itemParams","setItem","sortValuesList","fillList","listItemFormatter","toggleItem","chooseItem","setCurrentItem","scrollIntoView","behavior","inline","fillInput","unsetItem","hideList","chooseItems","unsetItems","len","cancelItem","showList","removeScrollListener","scrollTovalue","char","character","fromCharCode","startsWith","cursor","readOnly","uniqueColumnValues","genUniqueColumnValues","filterList","term","intialLoad","items","searchFunc","addNotice","searchingPlaceholder","fillListIfNotEmpty","showListOnEmpty","notice","searchEl","clearList","itemList","emptyPlaceholder","current","freetext","allowEmpty","log","showInputValue","maxStars","getElementsByTagName","stars","starsHolder","star","createElementNS","starChange","buildStar","starHolder","nextStar","blur","changeValue","overflow","textOverflow","percent","handle","bar","mouseDrag","mouseDragWidth","updateValue","calcVal","round","backgroundColor","screenX","tristate","indetermValue","indeterminateValue","indetermState","marginTop","indeterminate","checked","textarea","number","autocomplete","progress","tickCross","Edit","mouseClick","recursionBlock","invalidEdit","editedCells","editable","editors","clearEditor","variableHeight","contains","button","forceEdit","focusCellNoEvent","leftEdge","rightEdge","leftMargin","rightMargin","rendered","cellEditor","checkForRestyle","focusScrollAdjust","maskLetter","maskLetterChar","maskNumber","maskNumberChar","maskWildcard","maskWildcardChar","fillSymbols","symbol","maskAutoFill","editIndex","defaultEditors","ExportRow","ExportColumn","Export","cloneTableStyle","colVisProp","columnHeaders","headersToExportRows","generateColumnGroupHeaders","bodyToExportRows","rowLookup","genereateTableElement","columnGroups","colData","processColumnGroup","maxDepth","groupData","subGroup","subGroupData","columnVisCheck","headerDepth","exportRows","parseColumnGroup","rowGroups","exportCols","headerEl","bodyEl","lookupTableStyles","setup","treeElementField","mapElementStyles","genereateHeaderElement","genereateGroupElement","genereateCalcElement","genereateRowElement","evenRow","oddRow","calcRow","firstRow","firstGroup","getElementsByClassName","styleCells","firstCell","lastCell","generator","isVisible","cellWrapper","formatCells","formatExportValue","align","renderedCallback","props","lookup","fromStyle","filterVal","rowVal","filterParams","RegExp","keywords","separator","keyword","matchAll","endsWith","Filter","headerFilterColumns","prevHeaderFilterChangeCheck","filterType","tagType","attrType","filterChangeCheck","filterFunc","prevSuccess","emptyFunc","headerFilterFunc","headerFilterFuncParams","fieldVal","colVal","func","generateHeaderFilterElement","filterElement","editorElement","typingTimer","searchTrigger","headerElement","headerFilterEmptyCheck","headerFilterParams","hasAttribute","headerFilterLiveFilter","findFilter","findSubFilters","filtersToArray","undefined","searchType","filterRecurse","rowList","activeRowComponents","filterRow","subFilter","defaultFilters","formatterParams","emptyToSpace","sanitizeHTML","floatVal","integer","decimal","rgx","decimalSym","thousandSym","thousand","symbolAfter","urlPrefix","labelField","urlField","src","urlSuffix","truthy","allowTruthy","tick","tickElement","cross","crossElement","inputFormat","outputFormat","invalidPlaceholder","newDatetime","moment","isValid","timezone","tz","datetime","suffix","humanize","date","duration","starActive","starInactive","colors","color","percentValue","legendAlign","legend","legendColor","barEl","legendEl","toggleList","isOpen","checkbox","toggleSelect","isSelected","registerRowSelectCheckbox","deselectRow","registerHeaderSelectCheckbox","plaintext","money","image","datetimediff","traffic","buttonTick","buttonCross","rownum","responsiveCollapse","rowSelection","Format","lookupFormatter","formatterPrint","formatterClipboard","formatterHtmlOutput","htmlOutput","formatters","entityMap","defaultFormatters","FrozenColumns","leftColumns","rightColumns","rightPadding","initializationMode","scrollEndTimer","edge","frozenCheck","calcMargins","layoutColumnPosition","layoutCalcRows","_calcSpace","allCells","leftParents","parentEl","getColGroupParentElement","FrozenRows","styleRows","groupManager","oldGroup","hasSubGroups","groupIDLookups","_addRowToGroup","_addRow","groupList","elementContents","arrowElement","createElements","addBindings","createValueGroups","arrow","initializeGroupHeader","allowedValues","_createGroup","toggleElement","initializeGroup","toggleVisibility","groupID","groupKey","headerGenerator","conformRowData","generateGroupHeaderContents","scrollHeader","removeGroup","noCalc","_visSet","getHeadersAndRows","hasTopCalcs","detachElement","generateTopRow","hasBottomCalcs","generateBottomRow","compoment","getPath","addBindingsd","childNodes","GroupComponent","GroupRows","langValue","removeCalcs","getRealColumns","lookupFunc","generateGroups","groupComponents","groupListData","rowCount","headerContent","pullGroupListData","oldGroups","createGroup","assignRowToExistingGroup","newGroupNeeded","oldRowGroup","oldGroupPath","newGroupPath","getExpectedPath","samePath","every","groupPath","groupId","cellEdit","rowAdd","newRow","_rebindRow","rowMove","History","undoers","redoers","oldRow","defaultUndoers","defaultRedoers","HtmlTableImport","fieldIndex","hasIndex","_extractOptions","_extractHeaders","_generateBlankHeaders","newElement","attributes","optionsArr","optionsList","attrib","_attribValue","exists","_findCol","textContent","navPrev","navNext","navUp","navDown","scrollPageUp","scrollPageDown","scrollToStart","scrollToEnd","copyToClipboard","keyBlock","newPos","scrollMax","navLeft","navRight","Keybindings","watchKeys","pressedKeys","keyupBinding","keydownBinding","mergedBindings","mapBindings","bindEvents","actions","mapBinding","symbolsList","ctrl","meta","symbols","code","checkBinding","ctrlKey","shiftKey","metaKey","defaultBindings","defaultActions","Menu","menuElements","blurEvent","hideMenu","escEvent","escMenu","nestedMenuBlock","positionReversedX","headerMenuEl","LoadMenuEvent","loadMenu","touch","MouseEvent","menuEl","itemEl","disabled","hideOldSubMenus","positionMenu","pop","docHeight","innerHeight","x","y","parentOffset","touches","pageX","pageY","MoveColumns","placeholderElement","createPlaceholderElement","hoverElement","checkTimeout","checkPeriod","moving","toCol","toColAfter","startX","autoScrollMargin","autoScrollStep","autoScrollTimeout","touchMove","moveHover","endMove","mousemove","which","startMove","bindTouchEvents","startXMove","prevColWidth","nextColWidthLast","prevColWidthLast","moveToCol","_bindMouseMove","movingCells","_unbindMouseMove","columnHolder","xPos","scrollPos","MoveRows","toRowAfter","hasHandle","startY","tableRowDropEvent","connectionSelectorsTables","connectionSelectorsElements","connectionElements","connectedTable","connectedRow","mouseup","tableRowDrop","previousSibling","startYMove","nextRowHeight","prevRowHeight","nextRowHeightLast","prevRowHeightLast","setStartPosition","connectToTables","pointerEvents","getTableElement","disconnectFromTables","moveHoverConnections","moveHoverTable","rowHolder","yPos","connectionTables","dropEvent","elementRowDrop","tabulatorElementDropEvent","sender","senders","receiver","receivers","connect","disconnect","dropComplete","fromTable","toTable","Mutator","enabled","lookupMutator","mutators","mutatorEdit","defaultMutators","Page","initialLoad","pageSizes","dataReceivedNames","dataSentNames","pagesElement","firstBut","prevBut","nextBut","lastBut","pageSizeSelect","hidden","pageSelectLabel","testElRow","testElCell","defaultDataSentNames","defaultDataReceivedNames","generatePageSizeSelectList","trigger","leftSize","rightSize","_generatePageButton","_setPageButtons","_getRemotePage","oldParams","pageParams","getParams","_parseRemoteData","last_page","footer","local","id","localStorage","getItem","cookie","cookiePos","expireDate","setDate","getDate","toUTCString","Persistence","defWatcherBlock","readFunc","writeFunc","testKey","removeItem","retreivedData","localStorageTest","readers","writers","retreiveData","getOwnPropertyDescriptor","defineProperty","set","get","oldCols","newCols","_findColumn","validateSorters","getGroupConfig","getPageConfig","excludedKeys","defStore","colDef","defaultReaders","defaultWriters","Print","manualBlock","replaceTable","cleanup","genereateTable","scrollX","scrollY","footerEl","tableEl","footerContent","scrollTo","ReactiveData","origFuncs","currentVersion","version","enumerable","configurable","args","arguments","arg","apply","getRowFromDataObject","startRow","oldRows","writable","watchKey","watchTreeChildren","childField","rebuildTree","ResizeColumns","startColumn","startWidth","prevHandle","handleDown","nearestColumn","_checkResizability","_mouseDown","prevHandleDown","colIndex","resizable","mouseMove","checkCellHeights","mouseUp","ResizeRows","startHeight","screenY","ResizeTable","observer","containerObserver","tableHeight","containerHeight","containerWidth","tableStyle","ResizeObserver","entry","nodeHeight","contentRect","nodeWidth","observe","unobserve","ResponsiveLayout","hiddenColumns","collapseFormatter","collapseStartOpen","collapseHandleColumn","formatCollapsedData","order","generateCollapsedContent","generateCollapsedRowContent","colCount","working","getFlexBaseWidth","hideColumn","showColumn","generateCollapsedRowData","mockCellComponent","titleData","valueData","node_content","titleHighlight","innerText","SelectRow","selecting","lastClickedRow","selectPrev","headerCheckboxElement","_rowSelectionChanged","endSelect","selected","_clearSelection","lastClickedRowIdx","rowIdx","fromRowIdx","toRowIdx","toggledRows","toggledRow","_selectRow","rowMatch","rowInfo","checkboxEl","childRowSelection","selectedRow","aRow","bRow","alignEmptyValues","decimalSeparator","thousandSeparator","emptyAlign","localeCompare","el1","el2","calc","d","as","bs","a1","b1","L","rx","rd","isFinite","string","time","boolean","array","alphanum","Sort","arrowEl","sorterParams","startingDir","headerSortStartingDir","newSortList","sortListActual","rowComponents","clearColumnHeaders","sortObj","findSorter","setColumnHeader","_sortItems","sorterCount","sortItem","_sortRow","el1Comp","el2Comp","defaultSorters","parameters","numeric","starts","ends","minLength","maxLength","regex","reg","unique","cellData","Validate","invalidCells","_extractValidator","substring","_buildValidator","validators","invalidIndex","defaultValidators","TabulatorFull"],"mappings":"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"}